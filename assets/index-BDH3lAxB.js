(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function xu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function hZ(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var DO={exports:{}},b3={};var zF;function Wae(){if(zF)return b3;zF=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return b3.Fragment=e,b3.jsx=t,b3.jsxs=t,b3}var jF;function Qae(){return jF||(jF=1,DO.exports=Wae()),DO.exports}var oe=Qae(),RO={exports:{}},Fr={};var NF;function qae(){if(NF)return Fr;NF=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),M=Symbol.iterator;function E(De){return De===null||typeof De!="object"?null:(De=M&&De[M]||De["@@iterator"],typeof De=="function"?De:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,z={};function V(De,Xe,Ke){this.props=De,this.context=Xe,this.refs=z,this.updater=Ke||P}V.prototype.isReactComponent={},V.prototype.setState=function(De,Xe){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,Xe,"setState")},V.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function Z(){}Z.prototype=V.prototype;function X(De,Xe,Ke){this.props=De,this.context=Xe,this.refs=z,this.updater=Ke||P}var re=X.prototype=new Z;re.constructor=X,U(re,V.prototype),re.isPureReactComponent=!0;var ee=Array.isArray;function ne(){}var q={H:null,A:null,T:null,S:null},le=Object.prototype.hasOwnProperty;function ue(De,Xe,Ke){var Bt=Ke.ref;return{$$typeof:n,type:De,key:Xe,ref:Bt!==void 0?Bt:null,props:Ke}}function ve(De,Xe){return ue(De.type,Xe,De.props)}function pe(De){return typeof De=="object"&&De!==null&&De.$$typeof===n}function Be(De){var Xe={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(Ke){return Xe[Ke]})}var Ce=/\/+/g;function Oe(De,Xe){return typeof De=="object"&&De!==null&&De.key!=null?Be(""+De.key):Xe.toString(36)}function Fe(De){switch(De.status){case"fulfilled":return De.value;case"rejected":throw De.reason;default:switch(typeof De.status=="string"?De.then(ne,ne):(De.status="pending",De.then(function(Xe){De.status==="pending"&&(De.status="fulfilled",De.value=Xe)},function(Xe){De.status==="pending"&&(De.status="rejected",De.reason=Xe)})),De.status){case"fulfilled":return De.value;case"rejected":throw De.reason}}throw De}function Ee(De,Xe,Ke,Bt,ot){var Et=typeof De;(Et==="undefined"||Et==="boolean")&&(De=null);var Rt=!1;if(De===null)Rt=!0;else switch(Et){case"bigint":case"string":case"number":Rt=!0;break;case"object":switch(De.$$typeof){case n:case e:Rt=!0;break;case p:return Rt=De._init,Ee(Rt(De._payload),Xe,Ke,Bt,ot)}}if(Rt)return ot=ot(De),Rt=Bt===""?"."+Oe(De,0):Bt,ee(ot)?(Ke="",Rt!=null&&(Ke=Rt.replace(Ce,"$&/")+"/"),Ee(ot,Xe,Ke,"",function(Te){return Te})):ot!=null&&(pe(ot)&&(ot=ve(ot,Ke+(ot.key==null||De&&De.key===ot.key?"":(""+ot.key).replace(Ce,"$&/")+"/")+Rt)),Xe.push(ot)),1;Rt=0;var Ue=Bt===""?".":Bt+":";if(ee(De))for(var ke=0;ke<De.length;ke++)Bt=De[ke],Et=Ue+Oe(Bt,ke),Rt+=Ee(Bt,Xe,Ke,Et,ot);else if(ke=E(De),typeof ke=="function")for(De=ke.call(De),ke=0;!(Bt=De.next()).done;)Bt=Bt.value,Et=Ue+Oe(Bt,ke++),Rt+=Ee(Bt,Xe,Ke,Et,ot);else if(Et==="object"){if(typeof De.then=="function")return Ee(Fe(De),Xe,Ke,Bt,ot);throw Xe=String(De),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.")}return Rt}function Ve(De,Xe,Ke){if(De==null)return De;var Bt=[],ot=0;return Ee(De,Bt,"","",function(Et){return Xe.call(Ke,Et,ot++)}),Bt}function ut(De){if(De._status===-1){var Xe=De._result;Xe=Xe(),Xe.then(function(Ke){(De._status===0||De._status===-1)&&(De._status=1,De._result=Ke)},function(Ke){(De._status===0||De._status===-1)&&(De._status=2,De._result=Ke)}),De._status===-1&&(De._status=0,De._result=Xe)}if(De._status===1)return De._result.default;throw De._result}var mt=typeof reportError=="function"?reportError:function(De){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof De=="object"&&De!==null&&typeof De.message=="string"?String(De.message):String(De),error:De});if(!window.dispatchEvent(Xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",De);return}console.error(De)},Pe={map:Ve,forEach:function(De,Xe,Ke){Ve(De,function(){Xe.apply(this,arguments)},Ke)},count:function(De){var Xe=0;return Ve(De,function(){Xe++}),Xe},toArray:function(De){return Ve(De,function(Xe){return Xe})||[]},only:function(De){if(!pe(De))throw Error("React.Children.only expected to receive a single React element child.");return De}};return Fr.Activity=v,Fr.Children=Pe,Fr.Component=V,Fr.Fragment=t,Fr.Profiler=r,Fr.PureComponent=X,Fr.StrictMode=i,Fr.Suspense=c,Fr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Fr.__COMPILER_RUNTIME={__proto__:null,c:function(De){return q.H.useMemoCache(De)}},Fr.cache=function(De){return function(){return De.apply(null,arguments)}},Fr.cacheSignal=function(){return null},Fr.cloneElement=function(De,Xe,Ke){if(De==null)throw Error("The argument must be a React element, but you passed "+De+".");var Bt=U({},De.props),ot=De.key;if(Xe!=null)for(Et in Xe.key!==void 0&&(ot=""+Xe.key),Xe)!le.call(Xe,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&Xe.ref===void 0||(Bt[Et]=Xe[Et]);var Et=arguments.length-2;if(Et===1)Bt.children=Ke;else if(1<Et){for(var Rt=Array(Et),Ue=0;Ue<Et;Ue++)Rt[Ue]=arguments[Ue+2];Bt.children=Rt}return ue(De.type,ot,Bt)},Fr.createContext=function(De){return De={$$typeof:s,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null},De.Provider=De,De.Consumer={$$typeof:o,_context:De},De},Fr.createElement=function(De,Xe,Ke){var Bt,ot={},Et=null;if(Xe!=null)for(Bt in Xe.key!==void 0&&(Et=""+Xe.key),Xe)le.call(Xe,Bt)&&Bt!=="key"&&Bt!=="__self"&&Bt!=="__source"&&(ot[Bt]=Xe[Bt]);var Rt=arguments.length-2;if(Rt===1)ot.children=Ke;else if(1<Rt){for(var Ue=Array(Rt),ke=0;ke<Rt;ke++)Ue[ke]=arguments[ke+2];ot.children=Ue}if(De&&De.defaultProps)for(Bt in Rt=De.defaultProps,Rt)ot[Bt]===void 0&&(ot[Bt]=Rt[Bt]);return ue(De,Et,ot)},Fr.createRef=function(){return{current:null}},Fr.forwardRef=function(De){return{$$typeof:a,render:De}},Fr.isValidElement=pe,Fr.lazy=function(De){return{$$typeof:p,_payload:{_status:-1,_result:De},_init:ut}},Fr.memo=function(De,Xe){return{$$typeof:d,type:De,compare:Xe===void 0?null:Xe}},Fr.startTransition=function(De){var Xe=q.T,Ke={};q.T=Ke;try{var Bt=De(),ot=q.S;ot!==null&&ot(Ke,Bt),typeof Bt=="object"&&Bt!==null&&typeof Bt.then=="function"&&Bt.then(ne,mt)}catch(Et){mt(Et)}finally{Xe!==null&&Ke.types!==null&&(Xe.types=Ke.types),q.T=Xe}},Fr.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Fr.use=function(De){return q.H.use(De)},Fr.useActionState=function(De,Xe,Ke){return q.H.useActionState(De,Xe,Ke)},Fr.useCallback=function(De,Xe){return q.H.useCallback(De,Xe)},Fr.useContext=function(De){return q.H.useContext(De)},Fr.useDebugValue=function(){},Fr.useDeferredValue=function(De,Xe){return q.H.useDeferredValue(De,Xe)},Fr.useEffect=function(De,Xe){return q.H.useEffect(De,Xe)},Fr.useEffectEvent=function(De){return q.H.useEffectEvent(De)},Fr.useId=function(){return q.H.useId()},Fr.useImperativeHandle=function(De,Xe,Ke){return q.H.useImperativeHandle(De,Xe,Ke)},Fr.useInsertionEffect=function(De,Xe){return q.H.useInsertionEffect(De,Xe)},Fr.useLayoutEffect=function(De,Xe){return q.H.useLayoutEffect(De,Xe)},Fr.useMemo=function(De,Xe){return q.H.useMemo(De,Xe)},Fr.useOptimistic=function(De,Xe){return q.H.useOptimistic(De,Xe)},Fr.useReducer=function(De,Xe,Ke){return q.H.useReducer(De,Xe,Ke)},Fr.useRef=function(De){return q.H.useRef(De)},Fr.useState=function(De){return q.H.useState(De)},Fr.useSyncExternalStore=function(De,Xe,Ke){return q.H.useSyncExternalStore(De,Xe,Ke)},Fr.useTransition=function(){return q.H.useTransition()},Fr.version="19.2.0",Fr}var GF;function wa(){return GF||(GF=1,RO.exports=qae()),RO.exports}var St=wa();const En=xu(St);var dZ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dx=En.createContext&&En.createContext(dZ),Yae=["attr","size","title"];function Vae(n,e){if(n==null)return{};var t=$ae(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function $ae(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function eE(){return eE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},eE.apply(this,arguments)}function WF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function tE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WF(Object(t),!0).forEach(function(i){Hae(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Hae(n,e,t){return e=Zae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zae(n){var e=Xae(n,"string");return typeof e=="symbol"?e:e+""}function Xae(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fZ(n){return n&&n.map((e,t)=>En.createElement(e.tag,tE({key:t},e.attr),fZ(e.child)))}function Co(n){return e=>En.createElement(Jae,eE({attr:tE({},n.attr)},e),fZ(n.child))}function Jae(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=Vae(n,Yae),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),En.createElement("svg",eE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:tE(tE({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&En.createElement("title",null,o),n.children)};return dx!==void 0?En.createElement(dx.Consumer,null,t=>e(t)):e(dZ)}var PO={exports:{}},_3={},UO={exports:{}},LO={};var QF;function ele(){return QF||(QF=1,(function(n){function e(Ee,Ve){var ut=Ee.length;Ee.push(Ve);e:for(;0<ut;){var mt=ut-1>>>1,Pe=Ee[mt];if(0<r(Pe,Ve))Ee[mt]=Ve,Ee[ut]=Pe,ut=mt;else break e}}function t(Ee){return Ee.length===0?null:Ee[0]}function i(Ee){if(Ee.length===0)return null;var Ve=Ee[0],ut=Ee.pop();if(ut!==Ve){Ee[0]=ut;e:for(var mt=0,Pe=Ee.length,De=Pe>>>1;mt<De;){var Xe=2*(mt+1)-1,Ke=Ee[Xe],Bt=Xe+1,ot=Ee[Bt];if(0>r(Ke,ut))Bt<Pe&&0>r(ot,Ke)?(Ee[mt]=ot,Ee[Bt]=ut,mt=Bt):(Ee[mt]=Ke,Ee[Xe]=ut,mt=Xe);else if(Bt<Pe&&0>r(ot,ut))Ee[mt]=ot,Ee[Bt]=ut,mt=Bt;else break e}}return Ve}function r(Ee,Ve){var ut=Ee.sortIndex-Ve.sortIndex;return ut!==0?ut:Ee.id-Ve.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],d=[],p=1,v=null,M=3,E=!1,P=!1,U=!1,z=!1,V=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function re(Ee){for(var Ve=t(d);Ve!==null;){if(Ve.callback===null)i(d);else if(Ve.startTime<=Ee)i(d),Ve.sortIndex=Ve.expirationTime,e(c,Ve);else break;Ve=t(d)}}function ee(Ee){if(U=!1,re(Ee),!P)if(t(c)!==null)P=!0,ne||(ne=!0,Be());else{var Ve=t(d);Ve!==null&&Fe(ee,Ve.startTime-Ee)}}var ne=!1,q=-1,le=5,ue=-1;function ve(){return z?!0:!(n.unstable_now()-ue<le)}function pe(){if(z=!1,ne){var Ee=n.unstable_now();ue=Ee;var Ve=!0;try{e:{P=!1,U&&(U=!1,Z(q),q=-1),E=!0;var ut=M;try{t:{for(re(Ee),v=t(c);v!==null&&!(v.expirationTime>Ee&&ve());){var mt=v.callback;if(typeof mt=="function"){v.callback=null,M=v.priorityLevel;var Pe=mt(v.expirationTime<=Ee);if(Ee=n.unstable_now(),typeof Pe=="function"){v.callback=Pe,re(Ee),Ve=!0;break t}v===t(c)&&i(c),re(Ee)}else i(c);v=t(c)}if(v!==null)Ve=!0;else{var De=t(d);De!==null&&Fe(ee,De.startTime-Ee),Ve=!1}}break e}finally{v=null,M=ut,E=!1}Ve=void 0}}finally{Ve?Be():ne=!1}}}var Be;if(typeof X=="function")Be=function(){X(pe)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Oe=Ce.port2;Ce.port1.onmessage=pe,Be=function(){Oe.postMessage(null)}}else Be=function(){V(pe,0)};function Fe(Ee,Ve){q=V(function(){Ee(n.unstable_now())},Ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ee){Ee.callback=null},n.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<Ee?Math.floor(1e3/Ee):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(Ee){switch(M){case 1:case 2:case 3:var Ve=3;break;default:Ve=M}var ut=M;M=Ve;try{return Ee()}finally{M=ut}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(Ee,Ve){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var ut=M;M=Ee;try{return Ve()}finally{M=ut}},n.unstable_scheduleCallback=function(Ee,Ve,ut){var mt=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?mt+ut:mt):ut=mt,Ee){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ut+Pe,Ee={id:p++,callback:Ve,priorityLevel:Ee,startTime:ut,expirationTime:Pe,sortIndex:-1},ut>mt?(Ee.sortIndex=ut,e(d,Ee),t(c)===null&&Ee===t(d)&&(U?(Z(q),q=-1):U=!0,Fe(ee,ut-mt))):(Ee.sortIndex=Pe,e(c,Ee),P||E||(P=!0,ne||(ne=!0,Be()))),Ee},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(Ee){var Ve=M;return function(){var ut=M;M=Ve;try{return Ee.apply(this,arguments)}finally{M=ut}}}})(LO)),LO}var qF;function tle(){return qF||(qF=1,UO.exports=ele()),UO.exports}var KO={exports:{}},WA={};var YF;function nle(){if(YF)return WA;YF=1;var n=wa();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,d,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:c,containerInfo:d,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return WA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,WA.createPortal=function(c,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(c,d,null,p)},WA.flushSync=function(c){var d=s.T,p=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=d,i.p=p,i.d.f()}},WA.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(c,d))},WA.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},WA.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var p=d.as,v=a(p,d.crossOrigin),M=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:M,fetchPriority:E}):p==="script"&&i.d.X(c,{crossOrigin:v,integrity:M,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},WA.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=a(d.as,d.crossOrigin);i.d.M(c,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(c)},WA.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,v=a(p,d.crossOrigin);i.d.L(c,p,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},WA.preloadModule=function(c,d){if(typeof c=="string")if(d){var p=a(d.as,d.crossOrigin);i.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(c)},WA.requestFormReset=function(c){i.d.r(c)},WA.unstable_batchedUpdates=function(c,d){return c(d)},WA.useFormState=function(c,d,p){return s.H.useFormState(c,d,p)},WA.useFormStatus=function(){return s.H.useHostTransitionStatus()},WA.version="19.2.0",WA}var VF;function KP(){if(VF)return KO.exports;VF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),KO.exports=nle(),KO.exports}var $F;function ile(){if($F)return _3;$F=1;var n=tle(),e=wa(),t=KP();function i(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function o(f){var g=f,x=f;if(f.alternate)for(;g.return;)g=g.return;else{f=g;do g=f,(g.flags&4098)!==0&&(x=g.return),f=g.return;while(f)}return g.tag===3?x:null}function s(f){if(f.tag===13){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function a(f){if(f.tag===31){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function c(f){if(o(f)!==f)throw Error(i(188))}function d(f){var g=f.alternate;if(!g){if(g=o(f),g===null)throw Error(i(188));return g!==f?null:f}for(var x=f,T=g;;){var G=x.return;if(G===null)break;var J=G.alternate;if(J===null){if(T=G.return,T!==null){x=T;continue}break}if(G.child===J.child){for(J=G.child;J;){if(J===x)return c(G),f;if(J===T)return c(G),g;J=J.sibling}throw Error(i(188))}if(x.return!==T.return)x=G,T=J;else{for(var xe=!1,qe=G.child;qe;){if(qe===x){xe=!0,x=G,T=J;break}if(qe===T){xe=!0,T=G,x=J;break}qe=qe.sibling}if(!xe){for(qe=J.child;qe;){if(qe===x){xe=!0,x=J,T=G;break}if(qe===T){xe=!0,T=J,x=G;break}qe=qe.sibling}if(!xe)throw Error(i(189))}}if(x.alternate!==T)throw Error(i(190))}if(x.tag!==3)throw Error(i(188));return x.stateNode.current===x?f:g}function p(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f;for(f=f.child;f!==null;){if(g=p(f),g!==null)return g;f=f.sibling}return null}var v=Object.assign,M=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),X=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function Be(f){return f===null||typeof f!="object"?null:(f=pe&&f[pe]||f["@@iterator"],typeof f=="function"?f:null)}var Ce=Symbol.for("react.client.reference");function Oe(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===Ce?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case U:return"Fragment";case V:return"Profiler";case z:return"StrictMode";case ee:return"Suspense";case ne:return"SuspenseList";case ue:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case P:return"Portal";case X:return f.displayName||"Context";case Z:return(f._context.displayName||"Context")+".Consumer";case re:var g=f.render;return f=f.displayName,f||(f=g.displayName||g.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case q:return g=f.displayName||null,g!==null?g:Oe(f.type)||"Memo";case le:g=f._payload,f=f._init;try{return Oe(f(g))}catch{}}return null}var Fe=Array.isArray,Ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},mt=[],Pe=-1;function De(f){return{current:f}}function Xe(f){0>Pe||(f.current=mt[Pe],mt[Pe]=null,Pe--)}function Ke(f,g){Pe++,mt[Pe]=f.current,f.current=g}var Bt=De(null),ot=De(null),Et=De(null),Rt=De(null);function Ue(f,g){switch(Ke(Et,g),Ke(ot,f),Ke(Bt,null),g.nodeType){case 9:case 11:f=(f=g.documentElement)&&(f=f.namespaceURI)?nm(f):0;break;default:if(f=g.tagName,g=g.namespaceURI)g=nm(g),f=Ru(g,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}Xe(Bt),Ke(Bt,f)}function ke(){Xe(Bt),Xe(ot),Xe(Et)}function Te(f){f.memoizedState!==null&&Ke(Rt,f);var g=Bt.current,x=Ru(g,f.type);g!==x&&(Ke(ot,f),Ke(Bt,x))}function He(f){ot.current===f&&(Xe(Bt),Xe(ot)),Rt.current===f&&(Xe(Rt),Q0._currentValue=ut)}var Ct,vt;function wt(f){if(Ct===void 0)try{throw Error()}catch(x){var g=x.stack.trim().match(/\n( *(at )?)/);Ct=g&&g[1]||"",vt=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+f+vt}var Ft=!1;function Pt(f,g){if(!f||Ft)return"";Ft=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(g){var yn=function(){throw Error()};if(Object.defineProperty(yn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yn,[])}catch(on){var Jt=on}Reflect.construct(f,[],yn)}else{try{yn.call()}catch(on){Jt=on}f.call(yn.prototype)}}else{try{throw Error()}catch(on){Jt=on}(yn=f())&&typeof yn.catch=="function"&&yn.catch(function(){})}}catch(on){if(on&&Jt&&typeof on.stack=="string")return[on.stack,Jt.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=T.DetermineComponentFrameRoot(),xe=J[0],qe=J[1];if(xe&&qe){var xt=xe.split(`
`),Zt=qe.split(`
`);for(G=T=0;T<xt.length&&!xt[T].includes("DetermineComponentFrameRoot");)T++;for(;G<Zt.length&&!Zt[G].includes("DetermineComponentFrameRoot");)G++;if(T===xt.length||G===Zt.length)for(T=xt.length-1,G=Zt.length-1;1<=T&&0<=G&&xt[T]!==Zt[G];)G--;for(;1<=T&&0<=G;T--,G--)if(xt[T]!==Zt[G]){if(T!==1||G!==1)do if(T--,G--,0>G||xt[T]!==Zt[G]){var un=`
`+xt[T].replace(" at new "," at ");return f.displayName&&un.includes("<anonymous>")&&(un=un.replace("<anonymous>",f.displayName)),un}while(1<=T&&0<=G);break}}}finally{Ft=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?wt(x):""}function nn(f,g){switch(f.tag){case 26:case 27:case 5:return wt(f.type);case 16:return wt("Lazy");case 13:return f.child!==g&&g!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return Pt(f.type,!1);case 11:return Pt(f.type.render,!1);case 1:return Pt(f.type,!0);case 31:return wt("Activity");default:return""}}function Kn(f){try{var g="",x=null;do g+=nn(f,x),x=f,f=f.return;while(f);return g}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}var Wn=Object.prototype.hasOwnProperty,Mi=n.unstable_scheduleCallback,Fn=n.unstable_cancelCallback,Ln=n.unstable_shouldYield,In=n.unstable_requestPaint,oi=n.unstable_now,Tn=n.unstable_getCurrentPriorityLevel,je=n.unstable_ImmediatePriority,$=n.unstable_UserBlockingPriority,j=n.unstable_NormalPriority,Q=n.unstable_LowPriority,Ae=n.unstable_IdlePriority,Me=n.log,Ne=n.unstable_setDisableYieldValue,We=null,it=null;function bt(f){if(typeof Me=="function"&&Ne(f),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(We,f)}catch{}}var Ye=Math.clz32?Math.clz32:Ut,at=Math.log,C=Math.LN2;function Ut(f){return f>>>=0,f===0?32:31-(at(f)/C|0)|0}var gn=256,bn=262144,_n=4194304;function Mt(f){var g=f&42;if(g!==0)return g;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function xi(f,g,x){var T=f.pendingLanes;if(T===0)return 0;var G=0,J=f.suspendedLanes,xe=f.pingedLanes;f=f.warmLanes;var qe=T&134217727;return qe!==0?(T=qe&~J,T!==0?G=Mt(T):(xe&=qe,xe!==0?G=Mt(xe):x||(x=qe&~f,x!==0&&(G=Mt(x))))):(qe=T&~J,qe!==0?G=Mt(qe):xe!==0?G=Mt(xe):x||(x=T&~f,x!==0&&(G=Mt(x)))),G===0?0:g!==0&&g!==G&&(g&J)===0&&(J=G&-G,x=g&-g,J>=x||J===32&&(x&4194048)!==0)?g:G}function ji(f,g){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&g)===0}function Qn(f,g){switch(f){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(){var f=_n;return _n<<=1,(_n&62914560)===0&&(_n=4194304),f}function Yi(f){for(var g=[],x=0;31>x;x++)g.push(f);return g}function qi(f,g){f.pendingLanes|=g,g!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Ui(f,g,x,T,G,J){var xe=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var qe=f.entanglements,xt=f.expirationTimes,Zt=f.hiddenUpdates;for(x=xe&~x;0<x;){var un=31-Ye(x),yn=1<<un;qe[un]=0,xt[un]=-1;var Jt=Zt[un];if(Jt!==null)for(Zt[un]=null,un=0;un<Jt.length;un++){var on=Jt[un];on!==null&&(on.lane&=-536870913)}x&=~yn}T!==0&&Vi(f,T,0),J!==0&&G===0&&f.tag!==0&&(f.suspendedLanes|=J&~(xe&~g))}function Vi(f,g,x){f.pendingLanes|=g,f.suspendedLanes&=~g;var T=31-Ye(g);f.entangledLanes|=g,f.entanglements[T]=f.entanglements[T]|1073741824|x&261930}function Ki(f,g){var x=f.entangledLanes|=g;for(f=f.entanglements;x;){var T=31-Ye(x),G=1<<T;G&g|f[T]&g&&(f[T]|=g),x&=~G}}function Ir(f,g){var x=g&-g;return x=(x&42)!==0?1:Eo(x),(x&(f.suspendedLanes|g))!==0?0:x}function Eo(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function cn(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function rr(){var f=Ve.p;return f!==0?f:(f=window.event,f===void 0?32:D_(f.type))}function Yo(f,g){var x=Ve.p;try{return Ve.p=f,g()}finally{Ve.p=x}}var aa=Math.random().toString(36).slice(2),lo="__reactFiber$"+aa,Dn="__reactProps$"+aa,er="__reactContainer$"+aa,Ai="__reactEvents$"+aa,ja="__reactListeners$"+aa,_A="__reactHandles$"+aa,Sl="__reactResources$"+aa,Hi="__reactMarker$"+aa;function $u(f){delete f[lo],delete f[Dn],delete f[Ai],delete f[ja],delete f[_A]}function fo(f){var g=f[lo];if(g)return g;for(var x=f.parentNode;x;){if(g=x[er]||x[lo]){if(x=g.alternate,g.child!==null||x!==null&&x.child!==null)for(f=cp(f);f!==null;){if(x=f[lo])return x;f=cp(f)}return g}f=x,x=f.parentNode}return null}function Xa(f){if(f=f[lo]||f[er]){var g=f.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return f}return null}function El(f){var g=f.tag;if(g===5||g===26||g===27||g===6)return f.stateNode;throw Error(i(33))}function Na(f){var g=f[Sl];return g||(g=f[Sl]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Lo(f){f[Hi]=!0}var bc=new Set,Vo={};function vr(f,g){Ga(f,g),Ga(f+"Capture",g)}function Ga(f,g){for(Vo[f]=g,f=0;f<g.length;f++)bc.add(g[f])}var es=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mu={},wu={};function hl(f){return Wn.call(wu,f)?!0:Wn.call(Mu,f)?!1:es.test(f)?wu[f]=!0:(Mu[f]=!0,!1)}function Xc(f,g,x){if(hl(g))if(x===null)f.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":f.removeAttribute(g);return;case"boolean":var T=g.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){f.removeAttribute(g);return}}f.setAttribute(g,""+x)}}function dl(f,g,x){if(x===null)f.removeAttribute(g);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(g);return}f.setAttribute(g,""+x)}}function Wa(f,g,x,T){if(T===null)f.removeAttribute(x);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttributeNS(g,x,""+T)}}function Ar(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Hu(f){var g=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Bl(f,g,x){var T=Object.getOwnPropertyDescriptor(f.constructor.prototype,g);if(!f.hasOwnProperty(g)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var G=T.get,J=T.set;return Object.defineProperty(f,g,{configurable:!0,get:function(){return G.call(this)},set:function(xe){x=""+xe,J.call(this,xe)}}),Object.defineProperty(f,g,{enumerable:T.enumerable}),{getValue:function(){return x},setValue:function(xe){x=""+xe},stopTracking:function(){f._valueTracker=null,delete f[g]}}}}function Ol(f){if(!f._valueTracker){var g=Hu(f)?"checked":"value";f._valueTracker=Bl(f,g,""+f[g])}}function Su(f){if(!f)return!1;var g=f._valueTracker;if(!g)return!0;var x=g.getValue(),T="";return f&&(T=Hu(f)?f.checked?"true":"false":f.value),f=T,f!==x?(g.setValue(f),!0):!1}function _c(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var zh=/[\n"\\]/g;function Zs(f){return f.replace(zh,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function xc(f,g,x,T,G,J,xe,qe){f.name="",xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?f.type=xe:f.removeAttribute("type"),g!=null?xe==="number"?(g===0&&f.value===""||f.value!=g)&&(f.value=""+Ar(g)):f.value!==""+Ar(g)&&(f.value=""+Ar(g)):xe!=="submit"&&xe!=="reset"||f.removeAttribute("value"),g!=null?Jc(f,xe,Ar(g)):x!=null?Jc(f,xe,Ar(x)):T!=null&&f.removeAttribute("value"),G==null&&J!=null&&(f.defaultChecked=!!J),G!=null&&(f.checked=G&&typeof G!="function"&&typeof G!="symbol"),qe!=null&&typeof qe!="function"&&typeof qe!="symbol"&&typeof qe!="boolean"?f.name=""+Ar(qe):f.removeAttribute("name")}function Zl(f,g,x,T,G,J,xe,qe){if(J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(f.type=J),g!=null||x!=null){if(!(J!=="submit"&&J!=="reset"||g!=null)){Ol(f);return}x=x!=null?""+Ar(x):"",g=g!=null?""+Ar(g):x,qe||g===f.value||(f.value=g),f.defaultValue=g}T=T??G,T=typeof T!="function"&&typeof T!="symbol"&&!!T,f.checked=qe?f.checked:!!T,f.defaultChecked=!!T,xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"&&(f.name=xe),Ol(f)}function Jc(f,g,x){g==="number"&&_c(f.ownerDocument)===f||f.defaultValue===""+x||(f.defaultValue=""+x)}function Xl(f,g,x,T){if(f=f.options,g){g={};for(var G=0;G<x.length;G++)g["$"+x[G]]=!0;for(x=0;x<f.length;x++)G=g.hasOwnProperty("$"+f[x].value),f[x].selected!==G&&(f[x].selected=G),G&&T&&(f[x].defaultSelected=!0)}else{for(x=""+Ar(x),g=null,G=0;G<f.length;G++){if(f[G].value===x){f[G].selected=!0,T&&(f[G].defaultSelected=!0);return}g!==null||f[G].disabled||(g=f[G])}g!==null&&(g.selected=!0)}}function Jl(f,g,x){if(g!=null&&(g=""+Ar(g),g!==f.value&&(f.value=g),x==null)){f.defaultValue!==g&&(f.defaultValue=g);return}f.defaultValue=x!=null?""+Ar(x):""}function ms(f,g,x,T){if(g==null){if(T!=null){if(x!=null)throw Error(i(92));if(Fe(T)){if(1<T.length)throw Error(i(93));T=T[0]}x=T}x==null&&(x=""),g=x}x=Ar(g),f.defaultValue=x,T=f.textContent,T===x&&T!==""&&T!==null&&(f.value=T),Ol(f)}function Bo(f,g){if(g){var x=f.firstChild;if(x&&x===f.lastChild&&x.nodeType===3){x.nodeValue=g;return}}f.textContent=g}var eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eu(f,g,x){var T=g.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?T?f.setProperty(g,""):g==="float"?f.cssFloat="":f[g]="":T?f.setProperty(g,x):typeof x!="number"||x===0||eu.has(g)?g==="float"?f.cssFloat=x:f[g]=(""+x).trim():f[g]=x+"px"}function Is(f,g,x){if(g!=null&&typeof g!="object")throw Error(i(62));if(f=f.style,x!=null){for(var T in x)!x.hasOwnProperty(T)||g!=null&&g.hasOwnProperty(T)||(T.indexOf("--")===0?f.setProperty(T,""):T==="float"?f.cssFloat="":f[T]="");for(var G in g)T=g[G],g.hasOwnProperty(G)&&x[G]!==T&&Eu(f,G,T)}else for(var J in g)g.hasOwnProperty(J)&&Eu(f,J,g[J])}function Bu(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nr(f){return Zu.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function Ja(){}var ts=null;function Xu(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var ns=null,mo=null;function po(f){var g=Xa(f);if(g&&(f=g.stateNode)){var x=f[Dn]||null;e:switch(f=g.stateNode,g.type){case"input":if(xc(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),g=x.name,x.type==="radio"&&g!=null){for(x=f;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Zs(""+g)+'"][type="radio"]'),g=0;g<x.length;g++){var T=x[g];if(T!==f&&T.form===f.form){var G=T[Dn]||null;if(!G)throw Error(i(90));xc(T,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(g=0;g<x.length;g++)T=x[g],T.form===f.form&&Su(T)}break e;case"textarea":Jl(f,x.value,x.defaultValue);break e;case"select":g=x.value,g!=null&&Xl(f,!!x.multiple,g,!1)}}}var wi=!1;function ro(f,g,x){if(wi)return f(g,x);wi=!0;try{var T=f(g);return T}finally{if(wi=!1,(ns!==null||mo!==null)&&(o1(),ns&&(g=ns,f=mo,mo=ns=null,po(g),f)))for(g=0;g<f.length;g++)po(f[g])}}function Xs(f,g){var x=f.stateNode;if(x===null)return null;var T=x[Dn]||null;if(T===null)return null;x=T[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(f=f.type,T=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!T;break e;default:f=!1}if(f)return null;if(x&&typeof x!="function")throw Error(i(231,g,typeof x));return x}var bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(bo)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Ns=!1}var la=null,el=null,Zi=null;function Rr(){if(Zi)return Zi;var f,g=el,x=g.length,T,G="value"in la?la.value:la.textContent,J=G.length;for(f=0;f<x&&g[f]===G[f];f++);var xe=x-f;for(T=1;T<=xe&&g[x-T]===G[J-T];T++);return Zi=G.slice(f,1<T?1-T:void 0)}function ie(f){var g=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&g===13&&(f=13)):f=g,f===10&&(f=13),32<=f||f===13?f:0}function _e(){return!0}function $e(){return!1}function Ot(f){function g(x,T,G,J,xe){this._reactName=x,this._targetInst=G,this.type=T,this.nativeEvent=J,this.target=xe,this.currentTarget=null;for(var qe in f)f.hasOwnProperty(qe)&&(x=f[qe],this[qe]=x?x(J):J[qe]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?_e:$e,this.isPropagationStopped=$e,this}return v(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=_e)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=_e)},persist:function(){},isPersistent:_e}),g}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rn=Ot(qn),Ti=v({},qn,{view:0,detail:0}),Ni=Ot(Ti),Yn,Oi,ni,si=v({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ni&&(ni&&f.type==="mousemove"?(Yn=f.screenX-ni.screenX,Oi=f.screenY-ni.screenY):Oi=Yn=0,ni=f),Yn)},movementY:function(f){return"movementY"in f?f.movementY:Oi}}),mr=Ot(si),ii=v({},si,{dataTransfer:0}),jr=Ot(ii),Oo=v({},Ti,{relatedTarget:0}),Ko=Ot(Oo),ps=v({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),oh=Ot(ps),Il=v({},qn,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),gs=Ot(Il),Yv=v({},qn,{data:0}),Ou=Ot(Yv),nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xA(f){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(f):(f=_o[f])?!!g[f]:!1}function zd(){return xA}var $o=v({},Ti,{key:function(f){if(f.key){var g=nu[f.key]||f.key;if(g!=="Unidentified")return g}return f.type==="keypress"?(f=ie(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?eA[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(f){return f.type==="keypress"?ie(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?ie(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),To=Ot($o),e0=v({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=Ot(e0),n0=v({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vv=Ot(n0),Tf=v({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),i0=Ot(Tf),jd=v({},si,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),kf=Ot(jd),MA=v({},qn,{newState:0,oldState:0}),Df=Ot(MA),Nd=[9,13,27,32],Gs=bo&&"CompositionEvent"in window,jh=null;bo&&"documentMode"in document&&(jh=document.documentMode);var Nh=bo&&"TextEvent"in window&&!jh,Gd=bo&&(!Gs||jh&&8<jh&&11>=jh),Gh=" ",r0=!1;function Wd(f,g){switch(f){case"keyup":return Nd.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Mc=!1;function Tl(f,g){switch(f){case"compositionend":return ty(g);case"keypress":return g.which!==32?null:(r0=!0,Gh);case"textInput":return f=g.data,f===Gh&&r0?null:f;default:return null}}function o0(f,g){if(Mc)return f==="compositionend"||!Gs&&Wd(f,g)?(f=Rr(),Zi=el=la=null,Mc=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Gd&&g.locale!=="ko"?null:g.data;default:return null}}var Rf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g==="input"?!!Rf[f.type]:g==="textarea"}function Um(f,g,x,T){ns?mo?mo.push(T):mo=[T]:ns=T,g=L0(g,"onChange"),0<g.length&&(x=new Rn("onChange","change",null,x,T),f.push({event:x,listeners:g}))}var Qd=null,Pf=null;function ny(f){b_(f,0)}function Lm(f){var g=El(f);if(Su(g))return f}function Wh(f,g){if(f==="change")return g}var Qh=!1;if(bo){var Km;if(bo){var qh="oninput"in document;if(!qh){var Fm=document.createElement("div");Fm.setAttribute("oninput","return;"),qh=typeof Fm.oninput=="function"}Km=qh}else Km=!1;Qh=Km&&(!document.documentMode||9<document.documentMode)}function Uf(){Qd&&(Qd.detachEvent("onpropertychange",sh),Pf=Qd=null)}function sh(f){if(f.propertyName==="value"&&Lm(Pf)){var g=[];Um(g,Pf,f,Xu(f)),ro(ny,g)}}function s0(f,g,x){f==="focusin"?(Uf(),Qd=g,Pf=x,Qd.attachEvent("onpropertychange",sh)):f==="focusout"&&Uf()}function iy(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Lm(Pf)}function zm(f,g){if(f==="click")return Lm(g)}function ry(f,g){if(f==="input"||f==="change")return Lm(g)}function Yh(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var Ts=typeof Object.is=="function"?Object.is:Yh;function ah(f,g){if(Ts(f,g))return!0;if(typeof f!="object"||f===null||typeof g!="object"||g===null)return!1;var x=Object.keys(f),T=Object.keys(g);if(x.length!==T.length)return!1;for(T=0;T<x.length;T++){var G=x[T];if(!Wn.call(g,G)||!Ts(f[G],g[G]))return!1}return!0}function wc(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function jm(f,g){var x=wc(f);f=0;for(var T;x;){if(x.nodeType===3){if(T=f+x.textContent.length,f<=g&&T>=g)return{node:x,offset:g-f};f=T}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=wc(x)}}function a0(f,g){return f&&g?f===g?!0:f&&f.nodeType===3?!1:g&&g.nodeType===3?a0(f,g.parentNode):"contains"in f?f.contains(g):f.compareDocumentPosition?!!(f.compareDocumentPosition(g)&16):!1:!1}function l0(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var g=_c(f.document);g instanceof f.HTMLIFrameElement;){try{var x=typeof g.contentWindow.location.href=="string"}catch{x=!1}if(x)f=g.contentWindow;else break;g=_c(f.document)}return g}function Nm(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g&&(g==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||g==="textarea"||f.contentEditable==="true")}var lh=bo&&"documentMode"in document&&11>=document.documentMode,Dt=null,ln=null,tn=null,yi=!1;function yr(f,g,x){var T=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;yi||Dt==null||Dt!==_c(T)||(T=Dt,"selectionStart"in T&&Nm(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),tn&&ah(tn,T)||(tn=T,T=L0(ln,"onSelect"),0<T.length&&(g=new Rn("onSelect","select",null,g,x),f.push({event:g,listeners:T}),g.target=Dt)))}function Nr(f,g){var x={};return x[f.toLowerCase()]=g.toLowerCase(),x["Webkit"+f]="webkit"+g,x["Moz"+f]="moz"+g,x}var ys={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},Fo={},Zr={};bo&&(Zr=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function wA(f){if(Fo[f])return Fo[f];if(!ys[f])return f;var g=ys[f],x;for(x in g)if(g.hasOwnProperty(x)&&x in Zr)return Fo[f]=g[x];return f}var kl=wA("animationend"),Vh=wA("animationiteration"),u0=wA("animationstart"),Sc=wA("transitionrun"),$h=wA("transitionstart"),uh=wA("transitioncancel"),xr=wA("transitionend"),Kg=new Map,Gm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gm.push("scrollEnd");function Dl(f,g){Kg.set(f,g),vr(g,[f])}var SA=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},iu=[],ch=0,EA=0;function Iu(){for(var f=ch,g=EA=ch=0;g<f;){var x=iu[g];iu[g++]=null;var T=iu[g];iu[g++]=null;var G=iu[g];iu[g++]=null;var J=iu[g];if(iu[g++]=null,T!==null&&G!==null){var xe=T.pending;xe===null?G.next=G:(G.next=xe.next,xe.next=G),T.pending=G}J!==0&&c0(x,G,J)}}function Hh(f,g,x,T){iu[ch++]=f,iu[ch++]=g,iu[ch++]=x,iu[ch++]=T,EA|=T,f.lanes|=T,f=f.alternate,f!==null&&(f.lanes|=T)}function Ah(f,g,x,T){return Hh(f,g,x,T),qd(f)}function ru(f,g){return Hh(f,null,null,g),qd(f)}function c0(f,g,x){f.lanes|=x;var T=f.alternate;T!==null&&(T.lanes|=x);for(var G=!1,J=f.return;J!==null;)J.childLanes|=x,T=J.alternate,T!==null&&(T.childLanes|=x),J.tag===22&&(f=J.stateNode,f===null||f._visibility&1||(G=!0)),f=J,J=J.return;return f.tag===3?(J=f.stateNode,G&&g!==null&&(G=31-Ye(x),f=J.hiddenUpdates,T=f[G],T===null?f[G]=[g]:T.push(g),g.lane=x|536870912),J):null}function qd(f){if(50<r1)throw r1=0,fC=null,Error(i(185));for(var g=f.return;g!==null;)f=g,g=f.return;return f.tag===3?f.stateNode:null}var lr={};function Wm(f,g,x,T){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fl(f,g,x,T){return new Wm(f,g,x,T)}function BA(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Rl(f,g){var x=f.alternate;return x===null?(x=fl(f.tag,g,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=g,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&65011712,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,g=f.dependencies,x.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function oy(f,g){f.flags&=65011714;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=g,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,g=x.dependencies,f.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),f}function A0(f,g,x,T,G,J){var xe=0;if(T=f,typeof f=="function")BA(f)&&(xe=1);else if(typeof f=="string")xe=TC(f,x,Bt.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case ue:return f=fl(31,x,g,G),f.elementType=ue,f.lanes=J,f;case U:return Zh(x.children,G,J,g);case z:xe=8,G|=24;break;case V:return f=fl(12,x,g,G|2),f.elementType=V,f.lanes=J,f;case ee:return f=fl(13,x,g,G),f.elementType=ee,f.lanes=J,f;case ne:return f=fl(19,x,g,G),f.elementType=ne,f.lanes=J,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case X:xe=10;break e;case Z:xe=9;break e;case re:xe=11;break e;case q:xe=14;break e;case le:xe=16,T=null;break e}xe=29,x=Error(i(130,f===null?"null":typeof f,"")),T=null}return g=fl(xe,x,g,G),g.elementType=f,g.type=T,g.lanes=J,g}function Zh(f,g,x,T){return f=fl(7,f,T,g),f.lanes=x,f}function Lf(f,g,x){return f=fl(6,f,null,g),f.lanes=x,f}function Yd(f){var g=fl(18,null,null,0);return g.stateNode=f,g}function OA(f,g,x){return g=fl(4,f.children!==null?f.children:[],f.key,g),g.lanes=x,g.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},g}var Qm=new WeakMap;function Pl(f,g){if(typeof f=="object"&&f!==null){var x=Qm.get(f);return x!==void 0?x:(g={value:f,source:g,stack:Kn(g)},Qm.set(f,g),g)}return{value:f,source:g,stack:Kn(g)}}var Xh=[],Jh=0,vs=null,Ws=0,tl=[],nl=0,tA=null,IA=1,Ul="";function Ju(f,g){Xh[Jh++]=Ws,Xh[Jh++]=vs,vs=f,Ws=g}function qm(f,g,x){tl[nl++]=IA,tl[nl++]=Ul,tl[nl++]=tA,tA=f;var T=IA;f=Ul;var G=32-Ye(T)-1;T&=~(1<<G),x+=1;var J=32-Ye(g)+G;if(30<J){var xe=G-G%5;J=(T&(1<<xe)-1).toString(32),T>>=xe,G-=xe,IA=1<<32-Ye(g)+G|x<<G|T,Ul=J+f}else IA=1<<J|x<<G|T,Ul=f}function Ec(f){f.return!==null&&(Ju(f,1),qm(f,1,0))}function TA(f){for(;f===vs;)vs=Xh[--Jh],Xh[Jh]=null,Ws=Xh[--Jh],Xh[Jh]=null;for(;f===tA;)tA=tl[--nl],tl[nl]=null,Ul=tl[--nl],tl[nl]=null,IA=tl[--nl],tl[nl]=null}function Vd(f,g){tl[nl++]=IA,tl[nl++]=Ul,tl[nl++]=tA,IA=g.id,Ul=g.overflow,tA=f}var ua=null,uo=null,Lr=!1,hh=null,ec=!1,ks=Error(i(519));function Tu(f){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bc(Pl(g,f)),ks}function Ll(f){var g=f.stateNode,x=f.type,T=f.memoizedProps;switch(g[lo]=f,g[Dn]=T,x){case"dialog":oo("cancel",g),oo("close",g);break;case"iframe":case"object":case"embed":oo("load",g);break;case"video":case"audio":for(x=0;x<A1.length;x++)oo(A1[x],g);break;case"source":oo("error",g);break;case"img":case"image":case"link":oo("error",g),oo("load",g);break;case"details":oo("toggle",g);break;case"input":oo("invalid",g),Zl(g,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0);break;case"select":oo("invalid",g);break;case"textarea":oo("invalid",g),ms(g,T.value,T.defaultValue,T.children)}x=T.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||g.textContent===""+x||T.suppressHydrationWarning===!0||ky(g.textContent,x)?(T.popover!=null&&(oo("beforetoggle",g),oo("toggle",g)),T.onScroll!=null&&oo("scroll",g),T.onScrollEnd!=null&&oo("scrollend",g),T.onClick!=null&&(g.onclick=Ja),g=!0):g=!1,g||Tu(f,!0)}function dh(f){for(ua=f.return;ua;)switch(ua.tag){case 5:case 31:case 13:ec=!1;return;case 27:case 3:ec=!0;return;default:ua=ua.return}}function nA(f){if(f!==ua)return!1;if(!Lr)return dh(f),Lr=!0,!1;var g=f.tag,x;if((x=g!==3&&g!==27)&&((x=g===5)&&(x=f.type,x=!(x!=="form"&&x!=="button")||vd(f.type,f.memoizedProps)),x=!x),x&&uo&&Tu(f),dh(f),g===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));uo=im(f)}else if(g===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));uo=im(f)}else g===27?(g=uo,Pi(f.type)?(f=Ly,Ly=null,uo=f):uo=g):uo=ua?GA(f.stateNode.nextSibling):null;return!0}function Qe(){uo=ua=null,Lr=!1}function ou(){var f=hh;return f!==null&&(zc===null?zc=f:zc.push.apply(zc,f),hh=null),f}function Bc(f){hh===null?hh=[f]:hh.push(f)}var Sa=De(null),hr=null,kA=null;function fh(f,g,x){Ke(Sa,g._currentValue),g._currentValue=x}function DA(f){f._currentValue=Sa.current,Xe(Sa)}function RA(f,g,x){for(;f!==null;){var T=f.alternate;if((f.childLanes&g)!==g?(f.childLanes|=g,T!==null&&(T.childLanes|=g)):T!==null&&(T.childLanes&g)!==g&&(T.childLanes|=g),f===x)break;f=f.return}}function h0(f,g,x,T){var G=f.child;for(G!==null&&(G.return=f);G!==null;){var J=G.dependencies;if(J!==null){var xe=G.child;J=J.firstContext;e:for(;J!==null;){var qe=J;J=G;for(var xt=0;xt<g.length;xt++)if(qe.context===g[xt]){J.lanes|=x,qe=J.alternate,qe!==null&&(qe.lanes|=x),RA(J.return,x,f),T||(xe=null);break e}J=qe.next}}else if(G.tag===18){if(xe=G.return,xe===null)throw Error(i(341));xe.lanes|=x,J=xe.alternate,J!==null&&(J.lanes|=x),RA(xe,x,f),xe=null}else xe=G.child;if(xe!==null)xe.return=G;else for(xe=G;xe!==null;){if(xe===f){xe=null;break}if(G=xe.sibling,G!==null){G.return=xe.return,xe=G;break}xe=xe.return}G=xe}}function Oc(f,g,x,T){f=null;for(var G=g,J=!1;G!==null;){if(!J){if((G.flags&524288)!==0)J=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var xe=G.alternate;if(xe===null)throw Error(i(387));if(xe=xe.memoizedProps,xe!==null){var qe=G.type;Ts(G.pendingProps.value,xe.value)||(f!==null?f.push(qe):f=[qe])}}else if(G===Rt.current){if(xe=G.alternate,xe===null)throw Error(i(387));xe.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(f!==null?f.push(Q0):f=[Q0])}G=G.return}f!==null&&h0(g,f,x,T),g.flags|=262144}function Kf(f){for(f=f.firstContext;f!==null;){if(!Ts(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function mh(f){hr=f,kA=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function ca(f){return d0(hr,f)}function tc(f,g){return hr===null&&mh(f),d0(f,g)}function d0(f,g){var x=g._currentValue;if(g={context:g,memoizedValue:x,next:null},kA===null){if(f===null)throw Error(i(308));kA=g,f.dependencies={lanes:0,firstContext:g},f.flags|=524288}else kA=kA.next=g;return x}var Fg=typeof AbortController<"u"?AbortController:function(){var f=[],g=this.signal={aborted:!1,addEventListener:function(x,T){f.push(T)}};this.abort=function(){g.aborted=!0,f.forEach(function(x){return x()})}},sy=n.unstable_scheduleCallback,zg=n.unstable_NormalPriority,Ds={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kl(){return{controller:new Fg,data:new Map,refCount:0}}function Fl(f){f.refCount--,f.refCount===0&&sy(zg,function(){f.controller.abort()})}var su=null,f0=0,zl=0,Ff=null;function Ic(f,g){if(su===null){var x=su=[];f0=0,zl=Nl(),Ff={status:"pending",value:void 0,then:function(T){x.push(T)}}}return f0++,g.then(zf,zf),g}function zf(){if(--f0===0&&su!==null){Ff!==null&&(Ff.status="fulfilled");var f=su;su=null,zl=0,Ff=null;for(var g=0;g<f.length;g++)(0,f[g])()}}function Ym(f,g){var x=[],T={status:"pending",value:null,reason:null,then:function(G){x.push(G)}};return f.then(function(){T.status="fulfilled",T.value=g;for(var G=0;G<x.length;G++)(0,x[G])(g)},function(G){for(T.status="rejected",T.reason=G,G=0;G<x.length;G++)(0,x[G])(void 0)}),T}var Rs=Ee.S;Ee.S=function(f,g){cC=oi(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Ic(f,g),Rs!==null&&Rs(f,g)};var iA=De(null);function Vm(){var f=iA.current;return f!==null?f:bs.pooledCache}function ed(f,g){g===null?Ke(iA,iA.current):Ke(iA,g.pool)}function PA(){var f=Vm();return f===null?null:{parent:Ds._currentValue,pool:f}}var jn=Error(i(460)),jf=Error(i(474)),ph=Error(i(542)),$m={then:function(){}};function td(f){return f=f.status,f==="fulfilled"||f==="rejected"}function nd(f,g,x){switch(x=f[x],x===void 0?f.push(g):x!==g&&(g.then(Ja,Ja),g=x),g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,p0(f),f;default:if(typeof g.status=="string")g.then(Ja,Ja);else{if(f=bs,f!==null&&100<f.shellSuspendCounter)throw Error(i(482));f=g,f.status="pending",f.then(function(T){if(g.status==="pending"){var G=g;G.status="fulfilled",G.value=T}},function(T){if(g.status==="pending"){var G=g;G.status="rejected",G.reason=T}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw f=g.reason,p0(f),f}throw UA=g,jn}}function ml(f){try{var g=f._init;return g(f._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(UA=x,jn):x}}var UA=null;function m0(){if(UA===null)throw Error(i(459));var f=UA;return UA=null,f}function p0(f){if(f===jn||f===ph)throw Error(i(483))}var Tc=null,nc=0;function $d(f){var g=nc;return nc+=1,Tc===null&&(Tc=[]),nd(Tc,f,g)}function ku(f,g){g=g.props.ref,f.ref=g!==void 0?g:null}function au(f,g){throw g.$$typeof===M?Error(i(525)):(f=Object.prototype.toString.call(g),Error(i(31,f==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":f)))}function Hm(f){function g(Lt,kt){if(f){var Vt=Lt.deletions;Vt===null?(Lt.deletions=[kt],Lt.flags|=16):Vt.push(kt)}}function x(Lt,kt){if(!f)return null;for(;kt!==null;)g(Lt,kt),kt=kt.sibling;return null}function T(Lt){for(var kt=new Map;Lt!==null;)Lt.key!==null?kt.set(Lt.key,Lt):kt.set(Lt.index,Lt),Lt=Lt.sibling;return kt}function G(Lt,kt){return Lt=Rl(Lt,kt),Lt.index=0,Lt.sibling=null,Lt}function J(Lt,kt,Vt){return Lt.index=Vt,f?(Vt=Lt.alternate,Vt!==null?(Vt=Vt.index,Vt<kt?(Lt.flags|=67108866,kt):Vt):(Lt.flags|=67108866,kt)):(Lt.flags|=1048576,kt)}function xe(Lt){return f&&Lt.alternate===null&&(Lt.flags|=67108866),Lt}function qe(Lt,kt,Vt,dn){return kt===null||kt.tag!==6?(kt=Lf(Vt,Lt.mode,dn),kt.return=Lt,kt):(kt=G(kt,Vt),kt.return=Lt,kt)}function xt(Lt,kt,Vt,dn){var vi=Vt.type;return vi===U?un(Lt,kt,Vt.props.children,dn,Vt.key):kt!==null&&(kt.elementType===vi||typeof vi=="object"&&vi!==null&&vi.$$typeof===le&&ml(vi)===kt.type)?(kt=G(kt,Vt.props),ku(kt,Vt),kt.return=Lt,kt):(kt=A0(Vt.type,Vt.key,Vt.props,null,Lt.mode,dn),ku(kt,Vt),kt.return=Lt,kt)}function Zt(Lt,kt,Vt,dn){return kt===null||kt.tag!==4||kt.stateNode.containerInfo!==Vt.containerInfo||kt.stateNode.implementation!==Vt.implementation?(kt=OA(Vt,Lt.mode,dn),kt.return=Lt,kt):(kt=G(kt,Vt.children||[]),kt.return=Lt,kt)}function un(Lt,kt,Vt,dn,vi){return kt===null||kt.tag!==7?(kt=Zh(Vt,Lt.mode,dn,vi),kt.return=Lt,kt):(kt=G(kt,Vt),kt.return=Lt,kt)}function yn(Lt,kt,Vt){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return kt=Lf(""+kt,Lt.mode,Vt),kt.return=Lt,kt;if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case E:return Vt=A0(kt.type,kt.key,kt.props,null,Lt.mode,Vt),ku(Vt,kt),Vt.return=Lt,Vt;case P:return kt=OA(kt,Lt.mode,Vt),kt.return=Lt,kt;case le:return kt=ml(kt),yn(Lt,kt,Vt)}if(Fe(kt)||Be(kt))return kt=Zh(kt,Lt.mode,Vt,null),kt.return=Lt,kt;if(typeof kt.then=="function")return yn(Lt,$d(kt),Vt);if(kt.$$typeof===X)return yn(Lt,tc(Lt,kt),Vt);au(Lt,kt)}return null}function Jt(Lt,kt,Vt,dn){var vi=kt!==null?kt.key:null;if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint")return vi!==null?null:qe(Lt,kt,""+Vt,dn);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case E:return Vt.key===vi?xt(Lt,kt,Vt,dn):null;case P:return Vt.key===vi?Zt(Lt,kt,Vt,dn):null;case le:return Vt=ml(Vt),Jt(Lt,kt,Vt,dn)}if(Fe(Vt)||Be(Vt))return vi!==null?null:un(Lt,kt,Vt,dn,null);if(typeof Vt.then=="function")return Jt(Lt,kt,$d(Vt),dn);if(Vt.$$typeof===X)return Jt(Lt,kt,tc(Lt,Vt),dn);au(Lt,Vt)}return null}function on(Lt,kt,Vt,dn,vi){if(typeof dn=="string"&&dn!==""||typeof dn=="number"||typeof dn=="bigint")return Lt=Lt.get(Vt)||null,qe(kt,Lt,""+dn,vi);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case E:return Lt=Lt.get(dn.key===null?Vt:dn.key)||null,xt(kt,Lt,dn,vi);case P:return Lt=Lt.get(dn.key===null?Vt:dn.key)||null,Zt(kt,Lt,dn,vi);case le:return dn=ml(dn),on(Lt,kt,Vt,dn,vi)}if(Fe(dn)||Be(dn))return Lt=Lt.get(Vt)||null,un(kt,Lt,dn,vi,null);if(typeof dn.then=="function")return on(Lt,kt,Vt,$d(dn),vi);if(dn.$$typeof===X)return on(Lt,kt,Vt,tc(kt,dn),vi);au(kt,dn)}return null}function Si(Lt,kt,Vt,dn){for(var vi=null,xo=null,Gi=kt,Tr=kt=0,Jr=null;Gi!==null&&Tr<Vt.length;Tr++){Gi.index>Tr?(Jr=Gi,Gi=null):Jr=Gi.sibling;var Uo=Jt(Lt,Gi,Vt[Tr],dn);if(Uo===null){Gi===null&&(Gi=Jr);break}f&&Gi&&Uo.alternate===null&&g(Lt,Gi),kt=J(Uo,kt,Tr),xo===null?vi=Uo:xo.sibling=Uo,xo=Uo,Gi=Jr}if(Tr===Vt.length)return x(Lt,Gi),Lr&&Ju(Lt,Tr),vi;if(Gi===null){for(;Tr<Vt.length;Tr++)Gi=yn(Lt,Vt[Tr],dn),Gi!==null&&(kt=J(Gi,kt,Tr),xo===null?vi=Gi:xo.sibling=Gi,xo=Gi);return Lr&&Ju(Lt,Tr),vi}for(Gi=T(Gi);Tr<Vt.length;Tr++)Jr=on(Gi,Lt,Tr,Vt[Tr],dn),Jr!==null&&(f&&Jr.alternate!==null&&Gi.delete(Jr.key===null?Tr:Jr.key),kt=J(Jr,kt,Tr),xo===null?vi=Jr:xo.sibling=Jr,xo=Jr);return f&&Gi.forEach(function(Af){return g(Lt,Af)}),Lr&&Ju(Lt,Tr),vi}function ir(Lt,kt,Vt,dn){if(Vt==null)throw Error(i(151));for(var vi=null,xo=null,Gi=kt,Tr=kt=0,Jr=null,Uo=Vt.next();Gi!==null&&!Uo.done;Tr++,Uo=Vt.next()){Gi.index>Tr?(Jr=Gi,Gi=null):Jr=Gi.sibling;var Af=Jt(Lt,Gi,Uo.value,dn);if(Af===null){Gi===null&&(Gi=Jr);break}f&&Gi&&Af.alternate===null&&g(Lt,Gi),kt=J(Af,kt,Tr),xo===null?vi=Af:xo.sibling=Af,xo=Af,Gi=Jr}if(Uo.done)return x(Lt,Gi),Lr&&Ju(Lt,Tr),vi;if(Gi===null){for(;!Uo.done;Tr++,Uo=Vt.next())Uo=yn(Lt,Uo.value,dn),Uo!==null&&(kt=J(Uo,kt,Tr),xo===null?vi=Uo:xo.sibling=Uo,xo=Uo);return Lr&&Ju(Lt,Tr),vi}for(Gi=T(Gi);!Uo.done;Tr++,Uo=Vt.next())Uo=on(Gi,Lt,Tr,Uo.value,dn),Uo!==null&&(f&&Uo.alternate!==null&&Gi.delete(Uo.key===null?Tr:Uo.key),kt=J(Uo,kt,Tr),xo===null?vi=Uo:xo.sibling=Uo,xo=Uo);return f&&Gi.forEach(function(K_){return g(Lt,K_)}),Lr&&Ju(Lt,Tr),vi}function Go(Lt,kt,Vt,dn){if(typeof Vt=="object"&&Vt!==null&&Vt.type===U&&Vt.key===null&&(Vt=Vt.props.children),typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case E:e:{for(var vi=Vt.key;kt!==null;){if(kt.key===vi){if(vi=Vt.type,vi===U){if(kt.tag===7){x(Lt,kt.sibling),dn=G(kt,Vt.props.children),dn.return=Lt,Lt=dn;break e}}else if(kt.elementType===vi||typeof vi=="object"&&vi!==null&&vi.$$typeof===le&&ml(vi)===kt.type){x(Lt,kt.sibling),dn=G(kt,Vt.props),ku(dn,Vt),dn.return=Lt,Lt=dn;break e}x(Lt,kt);break}else g(Lt,kt);kt=kt.sibling}Vt.type===U?(dn=Zh(Vt.props.children,Lt.mode,dn,Vt.key),dn.return=Lt,Lt=dn):(dn=A0(Vt.type,Vt.key,Vt.props,null,Lt.mode,dn),ku(dn,Vt),dn.return=Lt,Lt=dn)}return xe(Lt);case P:e:{for(vi=Vt.key;kt!==null;){if(kt.key===vi)if(kt.tag===4&&kt.stateNode.containerInfo===Vt.containerInfo&&kt.stateNode.implementation===Vt.implementation){x(Lt,kt.sibling),dn=G(kt,Vt.children||[]),dn.return=Lt,Lt=dn;break e}else{x(Lt,kt);break}else g(Lt,kt);kt=kt.sibling}dn=OA(Vt,Lt.mode,dn),dn.return=Lt,Lt=dn}return xe(Lt);case le:return Vt=ml(Vt),Go(Lt,kt,Vt,dn)}if(Fe(Vt))return Si(Lt,kt,Vt,dn);if(Be(Vt)){if(vi=Be(Vt),typeof vi!="function")throw Error(i(150));return Vt=vi.call(Vt),ir(Lt,kt,Vt,dn)}if(typeof Vt.then=="function")return Go(Lt,kt,$d(Vt),dn);if(Vt.$$typeof===X)return Go(Lt,kt,tc(Lt,Vt),dn);au(Lt,Vt)}return typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint"?(Vt=""+Vt,kt!==null&&kt.tag===6?(x(Lt,kt.sibling),dn=G(kt,Vt),dn.return=Lt,Lt=dn):(x(Lt,kt),dn=Lf(Vt,Lt.mode,dn),dn.return=Lt,Lt=dn),xe(Lt)):x(Lt,kt)}return function(Lt,kt,Vt,dn){try{nc=0;var vi=Go(Lt,kt,Vt,dn);return Tc=null,vi}catch(Gi){if(Gi===jn||Gi===ph)throw Gi;var xo=fl(29,Gi,null,Lt.mode);return xo.lanes=dn,xo.return=Lt,xo}}}var rA=Hm(!0),Zm=Hm(!1),ic=!1;function oA(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kc(f,g){f=f.updateQueue,g.updateQueue===f&&(g.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Gr(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Dc(f,g,x){var T=f.updateQueue;if(T===null)return null;if(T=T.shared,(Do&2)!==0){var G=T.pending;return G===null?g.next=g:(g.next=G.next,G.next=g),T.pending=g,g=qd(f),c0(f,null,x),g}return Hh(f,T,g,x),qd(f)}function id(f,g,x){if(g=g.updateQueue,g!==null&&(g=g.shared,(x&4194048)!==0)){var T=g.lanes;T&=f.pendingLanes,x|=T,g.lanes=x,Ki(f,x)}}function rd(f,g){var x=f.updateQueue,T=f.alternate;if(T!==null&&(T=T.updateQueue,x===T)){var G=null,J=null;if(x=x.firstBaseUpdate,x!==null){do{var xe={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};J===null?G=J=xe:J=J.next=xe,x=x.next}while(x!==null);J===null?G=J=g:J=J.next=g}else G=J=g;x={baseState:T.baseState,firstBaseUpdate:G,lastBaseUpdate:J,shared:T.shared,callbacks:T.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=g:f.next=g,x.lastBaseUpdate=g}var Aa=!1;function gh(){if(Aa){var f=Ff;if(f!==null)throw f}}function Hd(f,g,x,T){Aa=!1;var G=f.updateQueue;ic=!1;var J=G.firstBaseUpdate,xe=G.lastBaseUpdate,qe=G.shared.pending;if(qe!==null){G.shared.pending=null;var xt=qe,Zt=xt.next;xt.next=null,xe===null?J=Zt:xe.next=Zt,xe=xt;var un=f.alternate;un!==null&&(un=un.updateQueue,qe=un.lastBaseUpdate,qe!==xe&&(qe===null?un.firstBaseUpdate=Zt:qe.next=Zt,un.lastBaseUpdate=xt))}if(J!==null){var yn=G.baseState;xe=0,un=Zt=xt=null,qe=J;do{var Jt=qe.lane&-536870913,on=Jt!==qe.lane;if(on?(Kr&Jt)===Jt:(T&Jt)===Jt){Jt!==0&&Jt===zl&&(Aa=!0),un!==null&&(un=un.next={lane:0,tag:qe.tag,payload:qe.payload,callback:null,next:null});e:{var Si=f,ir=qe;Jt=g;var Go=x;switch(ir.tag){case 1:if(Si=ir.payload,typeof Si=="function"){yn=Si.call(Go,yn,Jt);break e}yn=Si;break e;case 3:Si.flags=Si.flags&-65537|128;case 0:if(Si=ir.payload,Jt=typeof Si=="function"?Si.call(Go,yn,Jt):Si,Jt==null)break e;yn=v({},yn,Jt);break e;case 2:ic=!0}}Jt=qe.callback,Jt!==null&&(f.flags|=64,on&&(f.flags|=8192),on=G.callbacks,on===null?G.callbacks=[Jt]:on.push(Jt))}else on={lane:Jt,tag:qe.tag,payload:qe.payload,callback:qe.callback,next:null},un===null?(Zt=un=on,xt=yn):un=un.next=on,xe|=Jt;if(qe=qe.next,qe===null){if(qe=G.shared.pending,qe===null)break;on=qe,qe=on.next,on.next=null,G.lastBaseUpdate=on,G.shared.pending=null}}while(!0);un===null&&(xt=yn),G.baseState=xt,G.firstBaseUpdate=Zt,G.lastBaseUpdate=un,J===null&&(G.shared.lanes=0),NA|=xe,f.lanes=xe,f.memoizedState=yn}}function rc(f,g){if(typeof f!="function")throw Error(i(191,f));f.call(g)}function Xm(f,g){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)rc(x[f],g)}var il=De(null),oc=De(0);function mi(f,g){f=xh,Ke(oc,f),Ke(il,g),xh=f|g.baseLanes}function li(){Ke(oc,xh),Ke(il,il.current)}function LA(){xh=oc.current,Xe(il),Xe(oc)}var lu=De(null),rl=null;function Js(f){var g=f.alternate;Ke(ea,ea.current&1),Ke(lu,f),rl===null&&(g===null||il.current!==null||g.memoizedState!==null)&&(rl=f)}function pl(f){Ke(ea,ea.current),Ke(lu,f),rl===null&&(rl=f)}function jg(f){f.tag===22?(Ke(ea,ea.current),Ke(lu,f),rl===null&&(rl=f)):Rc()}function Rc(){Ke(ea,ea.current),Ke(lu,lu.current)}function uu(f){Xe(lu),rl===f&&(rl=null),Xe(ea)}var ea=De(0);function yh(f){for(var g=f;g!==null;){if(g.tag===13){var x=g.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Pu(x)||na(x)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Xr=0,Ri=null,zo=null,As=null,od=!1,sc=!1,vh=!1,Nf=0,KA=0,sA=null,Ng=0;function hs(){throw Error(i(321))}function Pc(f,g){if(g===null)return!1;for(var x=0;x<g.length&&x<f.length;x++)if(!Ts(f[x],g[x]))return!1;return!0}function Zd(f,g,x,T,G,J){return Xr=J,Ri=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ee.H=f===null||f.memoizedState===null?Oa:jl,vh=!1,J=x(T,G),vh=!1,sc&&(J=sd(g,x,T,G)),Xd(f),J}function Xd(f){Ee.H=rs;var g=zo!==null&&zo.next!==null;if(Xr=0,As=zo=Ri=null,od=!1,KA=0,sA=null,g)throw Error(i(300));f===null||Ys||(f=f.dependencies,f!==null&&Kf(f)&&(Ys=!0))}function sd(f,g,x,T){Ri=f;var G=0;do{if(sc&&(sA=null),KA=0,sc=!1,25<=G)throw Error(i(301));if(G+=1,As=zo=null,f.updateQueue!=null){var J=f.updateQueue;J.lastEffect=null,J.events=null,J.stores=null,J.memoCache!=null&&(J.memoCache.index=0)}Ee.H=Ho,J=g(x,T)}while(sc);return J}function Jm(){var f=Ee.H,g=f.useState()[0];return g=typeof g.then=="function"?ad(g):g,f=f.useState()[0],(zo!==null?zo.memoizedState:null)!==f&&(Ri.flags|=1024),g}function Gf(){var f=Nf!==0;return Nf=0,f}function FA(f,g,x){g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~x}function Ch(f){if(od){for(f=f.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}od=!1}Xr=0,As=zo=Ri=null,sc=!1,KA=Nf=0,sA=null}function ol(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return As===null?Ri.memoizedState=As=f:As=As.next=f,As}function Cs(){if(zo===null){var f=Ri.alternate;f=f!==null?f.memoizedState:null}else f=zo.next;var g=As===null?Ri.memoizedState:As.next;if(g!==null)As=g,zo=f;else{if(f===null)throw Ri.alternate===null?Error(i(467)):Error(i(310));zo=f,f={memoizedState:zo.memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},As===null?Ri.memoizedState=As=f:As=As.next=f}return As}function Uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ad(f){var g=KA;return KA+=1,sA===null&&(sA=[]),f=nd(sA,f,g),g=Ri,(As===null?g.memoizedState:As.next)===null&&(g=g.alternate,Ee.H=g===null||g.memoizedState===null?Oa:jl),f}function ld(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return ad(f);if(f.$$typeof===X)return ca(f)}throw Error(i(438,String(f)))}function Wf(f){var g=null,x=Ri.updateQueue;if(x!==null&&(g=x.memoCache),g==null){var T=Ri.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(g={data:T.data.map(function(G){return G.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),x===null&&(x=Uc(),Ri.updateQueue=x),x.memoCache=g,x=g.data[g.index],x===void 0)for(x=g.data[g.index]=Array(f),T=0;T<f;T++)x[T]=ve;return g.index++,x}function ac(f,g){return typeof g=="function"?g(f):g}function I(f){var g=Cs();return u(g,zo,f)}function u(f,g,x){var T=f.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=x;var G=f.baseQueue,J=T.pending;if(J!==null){if(G!==null){var xe=G.next;G.next=J.next,J.next=xe}g.baseQueue=G=J,T.pending=null}if(J=f.baseState,G===null)f.memoizedState=J;else{g=G.next;var qe=xe=null,xt=null,Zt=g,un=!1;do{var yn=Zt.lane&-536870913;if(yn!==Zt.lane?(Kr&yn)===yn:(Xr&yn)===yn){var Jt=Zt.revertLane;if(Jt===0)xt!==null&&(xt=xt.next={lane:0,revertLane:0,gesture:null,action:Zt.action,hasEagerState:Zt.hasEagerState,eagerState:Zt.eagerState,next:null}),yn===zl&&(un=!0);else if((Xr&Jt)===Jt){Zt=Zt.next,Jt===zl&&(un=!0);continue}else yn={lane:0,revertLane:Zt.revertLane,gesture:null,action:Zt.action,hasEagerState:Zt.hasEagerState,eagerState:Zt.eagerState,next:null},xt===null?(qe=xt=yn,xe=J):xt=xt.next=yn,Ri.lanes|=Jt,NA|=Jt;yn=Zt.action,vh&&x(J,yn),J=Zt.hasEagerState?Zt.eagerState:x(J,yn)}else Jt={lane:yn,revertLane:Zt.revertLane,gesture:Zt.gesture,action:Zt.action,hasEagerState:Zt.hasEagerState,eagerState:Zt.eagerState,next:null},xt===null?(qe=xt=Jt,xe=J):xt=xt.next=Jt,Ri.lanes|=yn,NA|=yn;Zt=Zt.next}while(Zt!==null&&Zt!==g);if(xt===null?xe=J:xt.next=qe,!Ts(J,f.memoizedState)&&(Ys=!0,un&&(x=Ff,x!==null)))throw x;f.memoizedState=J,f.baseState=xe,f.baseQueue=xt,T.lastRenderedState=J}return G===null&&(T.lanes=0),[f.memoizedState,T.dispatch]}function m(f){var g=Cs(),x=g.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=f;var T=x.dispatch,G=x.pending,J=g.memoizedState;if(G!==null){x.pending=null;var xe=G=G.next;do J=f(J,xe.action),xe=xe.next;while(xe!==G);Ts(J,g.memoizedState)||(Ys=!0),g.memoizedState=J,g.baseQueue===null&&(g.baseState=J),x.lastRenderedState=J}return[J,T]}function b(f,g,x){var T=Ri,G=Cs(),J=Lr;if(J){if(x===void 0)throw Error(i(407));x=x()}else x=g();var xe=!Ts((zo||G).memoizedState,x);if(xe&&(G.memoizedState=x,Ys=!0),G=G.queue,qt(K.bind(null,T,G,f),[f]),G.getSnapshot!==g||xe||As!==null&&As.memoizedState.tag&1){if(T.flags|=2048,At(9,{destroy:void 0},k.bind(null,T,G,x,g),null),bs===null)throw Error(i(349));J||(Xr&127)!==0||S(T,g,x)}return x}function S(f,g,x){f.flags|=16384,f={getSnapshot:g,value:x},g=Ri.updateQueue,g===null?(g=Uc(),Ri.updateQueue=g,g.stores=[f]):(x=g.stores,x===null?g.stores=[f]:x.push(f))}function k(f,g,x,T){g.value=x,g.getSnapshot=T,N(g)&&H(f)}function K(f,g,x){return x(function(){N(g)&&H(f)})}function N(f){var g=f.getSnapshot;f=f.value;try{var x=g();return!Ts(f,x)}catch{return!0}}function H(f){var g=ru(f,2);g!==null&&jc(g,f,2)}function se(f){var g=ol();if(typeof f=="function"){var x=f;if(f=x(),vh){bt(!0);try{x()}finally{bt(!1)}}}return g.memoizedState=g.baseState=f,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:f},g}function ce(f,g,x,T){return f.baseState=x,u(f,zo,typeof T=="function"?T:ac)}function ye(f,g,x,T,G){if(Ba(f))throw Error(i(485));if(f=g.action,f!==null){var J={payload:G,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(xe){J.listeners.push(xe)}};Ee.T!==null?x(!0):J.isTransition=!1,T(J),x=g.pending,x===null?(J.next=g.pending=J,ge(g,J)):(J.next=x.next,g.pending=x.next=J)}}function ge(f,g){var x=g.action,T=g.payload,G=f.state;if(g.isTransition){var J=Ee.T,xe={};Ee.T=xe;try{var qe=x(G,T),xt=Ee.S;xt!==null&&xt(xe,qe),Se(f,g,qe)}catch(Zt){Je(f,g,Zt)}finally{J!==null&&xe.types!==null&&(J.types=xe.types),Ee.T=J}}else try{J=x(G,T),Se(f,g,J)}catch(Zt){Je(f,g,Zt)}}function Se(f,g,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(T){Le(f,g,T)},function(T){return Je(f,g,T)}):Le(f,g,x)}function Le(f,g,x){g.status="fulfilled",g.value=x,nt(g),f.state=x,g=f.pending,g!==null&&(x=g.next,x===g?f.pending=null:(x=x.next,g.next=x,ge(f,x)))}function Je(f,g,x){var T=f.pending;if(f.pending=null,T!==null){T=T.next;do g.status="rejected",g.reason=x,nt(g),g=g.next;while(g!==T)}f.action=null}function nt(f){f=f.listeners;for(var g=0;g<f.length;g++)(0,f[g])()}function tt(f,g){return g}function rt(f,g){if(Lr){var x=bs.formState;if(x!==null){e:{var T=Ri;if(Lr){if(uo){t:{for(var G=uo,J=ec;G.nodeType!==8;){if(!J){G=null;break t}if(G=GA(G.nextSibling),G===null){G=null;break t}}J=G.data,G=J==="F!"||J==="F"?G:null}if(G){uo=GA(G.nextSibling),T=G.data==="F!";break e}}Tu(T)}T=!1}T&&(g=x[0])}}return x=ol(),x.memoizedState=x.baseState=g,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:g},x.queue=T,x=ud.bind(null,Ri,T),T.dispatch=x,T=se(!1),J=qs.bind(null,Ri,!1,T.queue),T=ol(),G={state:g,dispatch:null,action:f,pending:null},T.queue=G,x=ye.bind(null,Ri,G,J,x),G.dispatch=x,T.memoizedState=f,[g,x,!1]}function ft(f){var g=Cs();return lt(g,zo,f)}function lt(f,g,x){if(g=u(f,g,tt)[0],f=I(ac)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var T=ad(g)}catch(xe){throw xe===jn?ph:xe}else T=g;g=Cs();var G=g.queue,J=G.dispatch;return x!==g.memoizedState&&(Ri.flags|=2048,At(9,{destroy:void 0},pt.bind(null,G,x),null)),[T,J,f]}function pt(f,g){f.action=g}function _t(f){var g=Cs(),x=zo;if(x!==null)return lt(g,x,f);Cs(),g=g.memoizedState,x=Cs();var T=x.queue.dispatch;return x.memoizedState=f,[g,T,!1]}function At(f,g,x,T){return f={tag:f,create:x,deps:T,inst:g,next:null},g=Ri.updateQueue,g===null&&(g=Uc(),Ri.updateQueue=g),x=g.lastEffect,x===null?g.lastEffect=f.next=f:(T=x.next,x.next=f,f.next=T,g.lastEffect=f),f}function Tt(){return Cs().memoizedState}function zt(f,g,x,T){var G=ol();Ri.flags|=f,G.memoizedState=At(1|g,{destroy:void 0},x,T===void 0?null:T)}function jt(f,g,x,T){var G=Cs();T=T===void 0?null:T;var J=G.memoizedState.inst;zo!==null&&T!==null&&Pc(T,zo.memoizedState.deps)?G.memoizedState=At(g,J,x,T):(Ri.flags|=f,G.memoizedState=At(1|g,J,x,T))}function Wt(f,g){zt(8390656,8,f,g)}function qt(f,g){jt(2048,8,f,g)}function fn(f){Ri.flags|=4;var g=Ri.updateQueue;if(g===null)g=Uc(),Ri.updateQueue=g,g.events=[f];else{var x=g.events;x===null?g.events=[f]:x.push(f)}}function Pn(f){var g=Cs().memoizedState;return fn({ref:g,nextImpl:f}),function(){if((Do&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function hn(f,g){return jt(4,2,f,g)}function ui(f,g){return jt(4,4,f,g)}function or(f,g){if(typeof g=="function"){f=f();var x=g(f);return function(){typeof x=="function"?x():g(null)}}if(g!=null)return f=f(),g.current=f,function(){g.current=null}}function go(f,g,x){x=x!=null?x.concat([f]):null,jt(4,4,or.bind(null,g,f),x)}function ko(){}function yo(f,g){var x=Cs();g=g===void 0?null:g;var T=x.memoizedState;return g!==null&&Pc(g,T[1])?T[0]:(x.memoizedState=[f,g],f)}function Pr(f,g){var x=Cs();g=g===void 0?null:g;var T=x.memoizedState;if(g!==null&&Pc(g,T[1]))return T[0];if(T=f(),vh){bt(!0);try{f()}finally{bt(!1)}}return x.memoizedState=[T,g],T}function Ur(f,g,x){return x===void 0||(Xr&1073741824)!==0&&(Kr&261930)===0?f.memoizedState=g:(f.memoizedState=x,f=T0(),Ri.lanes|=f,NA|=f,x)}function Ea(f,g,x,T){return Ts(x,g)?x:il.current!==null?(f=Ur(f,x,T),Ts(f,g)||(Ys=!0),f):(Xr&42)===0||(Xr&1073741824)!==0&&(Kr&261930)===0?(Ys=!0,f.memoizedState=x):(f=T0(),Ri.lanes|=f,NA|=f,g)}function is(f,g,x,T,G){var J=Ve.p;Ve.p=J!==0&&8>J?J:8;var xe=Ee.T,qe={};Ee.T=qe,qs(f,!1,g,x);try{var xt=G(),Zt=Ee.S;if(Zt!==null&&Zt(qe,xt),xt!==null&&typeof xt=="object"&&typeof xt.then=="function"){var un=Ym(xt,T);cu(f,g,un,Ro(f))}else cu(f,g,T,Ro(f))}catch(yn){cu(f,g,{then:function(){},status:"rejected",reason:yn},Ro())}finally{Ve.p=J,xe!==null&&qe.types!==null&&(xe.types=qe.types),Ee.T=xe}}function Qs(){}function jo(f,g,x,T){if(f.tag!==5)throw Error(i(476));var G=Ps(f).queue;is(f,G,g,ut,x===null?Qs:function(){return Qa(f),x(T)})}function Ps(f){var g=f.memoizedState;if(g!==null)return g;g={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:ut},next:null};var x={};return g.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:x},next:null},f.memoizedState=g,f=f.alternate,f!==null&&(f.memoizedState=g),g}function Qa(f){var g=Ps(f);g.next===null&&(g=f.alternate.memoizedState),cu(f,g.next.queue,{},Ro())}function gl(){return ca(Q0)}function Lc(){return Cs().memoizedState}function Du(){return Cs().memoizedState}function aA(f){for(var g=f.return;g!==null;){switch(g.tag){case 24:case 3:var x=Ro();f=Gr(x);var T=Dc(g,f,x);T!==null&&(jc(T,g,x),id(T,g,x)),g={cache:Kl()},f.payload=g;return}g=g.return}}function g0(f,g,x){var T=Ro();x={lane:T,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Ba(f)?ha(g,x):(x=Ah(f,g,x,T),x!==null&&(jc(x,f,T),Au(x,g,T)))}function ud(f,g,x){var T=Ro();cu(f,g,x,T)}function cu(f,g,x,T){var G={lane:T,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Ba(f))ha(g,G);else{var J=f.alternate;if(f.lanes===0&&(J===null||J.lanes===0)&&(J=g.lastRenderedReducer,J!==null))try{var xe=g.lastRenderedState,qe=J(xe,x);if(G.hasEagerState=!0,G.eagerState=qe,Ts(qe,xe))return Hh(f,g,G,0),bs===null&&Iu(),!1}catch{}if(x=Ah(f,g,G,T),x!==null)return jc(x,f,T),Au(x,g,T),!0}return!1}function qs(f,g,x,T){if(T={lane:2,revertLane:Nl(),gesture:null,action:T,hasEagerState:!1,eagerState:null,next:null},Ba(f)){if(g)throw Error(i(479))}else g=Ah(f,x,T,2),g!==null&&jc(g,f,2)}function Ba(f){var g=f.alternate;return f===Ri||g!==null&&g===Ri}function ha(f,g){sc=od=!0;var x=f.pending;x===null?g.next=g:(g.next=x.next,x.next=g),f.pending=g}function Au(f,g,x){if((x&4194048)!==0){var T=g.lanes;T&=f.pendingLanes,x|=T,g.lanes=x,Ki(f,x)}}var rs={readContext:ca,use:ld,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useLayoutEffect:hs,useInsertionEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useSyncExternalStore:hs,useId:hs,useHostTransitionStatus:hs,useFormState:hs,useActionState:hs,useOptimistic:hs,useMemoCache:hs,useCacheRefresh:hs};rs.useEffectEvent=hs;var Oa={readContext:ca,use:ld,useCallback:function(f,g){return ol().memoizedState=[f,g===void 0?null:g],f},useContext:ca,useEffect:Wt,useImperativeHandle:function(f,g,x){x=x!=null?x.concat([f]):null,zt(4194308,4,or.bind(null,g,f),x)},useLayoutEffect:function(f,g){return zt(4194308,4,f,g)},useInsertionEffect:function(f,g){zt(4,2,f,g)},useMemo:function(f,g){var x=ol();g=g===void 0?null:g;var T=f();if(vh){bt(!0);try{f()}finally{bt(!1)}}return x.memoizedState=[T,g],T},useReducer:function(f,g,x){var T=ol();if(x!==void 0){var G=x(g);if(vh){bt(!0);try{x(g)}finally{bt(!1)}}}else G=g;return T.memoizedState=T.baseState=G,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:G},T.queue=f,f=f.dispatch=g0.bind(null,Ri,f),[T.memoizedState,f]},useRef:function(f){var g=ol();return f={current:f},g.memoizedState=f},useState:function(f){f=se(f);var g=f.queue,x=ud.bind(null,Ri,g);return g.dispatch=x,[f.memoizedState,x]},useDebugValue:ko,useDeferredValue:function(f,g){var x=ol();return Ur(x,f,g)},useTransition:function(){var f=se(!1);return f=is.bind(null,Ri,f.queue,!0,!1),ol().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,g,x){var T=Ri,G=ol();if(Lr){if(x===void 0)throw Error(i(407));x=x()}else{if(x=g(),bs===null)throw Error(i(349));(Kr&127)!==0||S(T,g,x)}G.memoizedState=x;var J={value:x,getSnapshot:g};return G.queue=J,Wt(K.bind(null,T,J,f),[f]),T.flags|=2048,At(9,{destroy:void 0},k.bind(null,T,J,x,g),null),x},useId:function(){var f=ol(),g=bs.identifierPrefix;if(Lr){var x=Ul,T=IA;x=(T&~(1<<32-Ye(T)-1)).toString(32)+x,g="_"+g+"R_"+x,x=Nf++,0<x&&(g+="H"+x.toString(32)),g+="_"}else x=Ng++,g="_"+g+"r_"+x.toString(32)+"_";return f.memoizedState=g},useHostTransitionStatus:gl,useFormState:rt,useActionState:rt,useOptimistic:function(f){var g=ol();g.memoizedState=g.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=x,g=qs.bind(null,Ri,!0,x),x.dispatch=g,[f,g]},useMemoCache:Wf,useCacheRefresh:function(){return ol().memoizedState=aA.bind(null,Ri)},useEffectEvent:function(f){var g=ol(),x={impl:f};return g.memoizedState=x,function(){if((Do&2)!==0)throw Error(i(440));return x.impl.apply(void 0,arguments)}}},jl={readContext:ca,use:ld,useCallback:yo,useContext:ca,useEffect:qt,useImperativeHandle:go,useInsertionEffect:hn,useLayoutEffect:ui,useMemo:Pr,useReducer:I,useRef:Tt,useState:function(){return I(ac)},useDebugValue:ko,useDeferredValue:function(f,g){var x=Cs();return Ea(x,zo.memoizedState,f,g)},useTransition:function(){var f=I(ac)[0],g=Cs().memoizedState;return[typeof f=="boolean"?f:ad(f),g]},useSyncExternalStore:b,useId:Lc,useHostTransitionStatus:gl,useFormState:ft,useActionState:ft,useOptimistic:function(f,g){var x=Cs();return ce(x,zo,f,g)},useMemoCache:Wf,useCacheRefresh:Du};jl.useEffectEvent=Pn;var Ho={readContext:ca,use:ld,useCallback:yo,useContext:ca,useEffect:qt,useImperativeHandle:go,useInsertionEffect:hn,useLayoutEffect:ui,useMemo:Pr,useReducer:m,useRef:Tt,useState:function(){return m(ac)},useDebugValue:ko,useDeferredValue:function(f,g){var x=Cs();return zo===null?Ur(x,f,g):Ea(x,zo.memoizedState,f,g)},useTransition:function(){var f=m(ac)[0],g=Cs().memoizedState;return[typeof f=="boolean"?f:ad(f),g]},useSyncExternalStore:b,useId:Lc,useHostTransitionStatus:gl,useFormState:_t,useActionState:_t,useOptimistic:function(f,g){var x=Cs();return zo!==null?ce(x,zo,f,g):(x.baseState=f,[f,x.queue.dispatch])},useMemoCache:Wf,useCacheRefresh:Du};Ho.useEffectEvent=Pn;function y0(f,g,x,T){g=f.memoizedState,x=x(T,g),x=x==null?g:v({},g,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var Qf={enqueueSetState:function(f,g,x){f=f._reactInternals;var T=Ro(),G=Gr(T);G.payload=g,x!=null&&(G.callback=x),g=Dc(f,G,T),g!==null&&(jc(g,f,T),id(g,f,T))},enqueueReplaceState:function(f,g,x){f=f._reactInternals;var T=Ro(),G=Gr(T);G.tag=1,G.payload=g,x!=null&&(G.callback=x),g=Dc(f,G,T),g!==null&&(jc(g,f,T),id(g,f,T))},enqueueForceUpdate:function(f,g){f=f._reactInternals;var x=Ro(),T=Gr(x);T.tag=2,g!=null&&(T.callback=g),g=Dc(f,T,x),g!==null&&(jc(g,f,x),id(g,f,x))}};function v0(f,g,x,T,G,J,xe){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,J,xe):g.prototype&&g.prototype.isPureReactComponent?!ah(x,T)||!ah(G,J):!0}function C0(f,g,x,T){f=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(x,T),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(x,T),g.state!==f&&Qf.enqueueReplaceState(g,g.state,null)}function da(f,g){var x=g;if("ref"in g){x={};for(var T in g)T!=="ref"&&(x[T]=g[T])}if(f=f.defaultProps){x===g&&(x=v({},x));for(var G in f)x[G]===void 0&&(x[G]=f[G])}return x}function bh(f){SA(f)}function zA(f){console.error(f)}function Gg(f){SA(f)}function cd(f,g){try{var x=f.onUncaughtError;x(g.value,{componentStack:g.stack})}catch(T){setTimeout(function(){throw T})}}function b0(f,g,x){try{var T=f.onCaughtError;T(x.value,{componentStack:x.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function Ad(f,g,x){return x=Gr(x),x.tag=3,x.payload={element:null},x.callback=function(){cd(f,g)},x}function Kc(f){return f=Gr(f),f.tag=3,f}function qf(f,g,x,T){var G=x.type.getDerivedStateFromError;if(typeof G=="function"){var J=T.value;f.payload=function(){return G(J)},f.callback=function(){b0(g,x,T)}}var xe=x.stateNode;xe!==null&&typeof xe.componentDidCatch=="function"&&(f.callback=function(){b0(g,x,T),typeof G!="function"&&(Jf===null?Jf=new Set([this]):Jf.add(this));var qe=T.stack;this.componentDidCatch(T.value,{componentStack:qe!==null?qe:""})})}function Wg(f,g,x,T,G){if(x.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(g=x.alternate,g!==null&&Oc(g,x,G,!0),x=lu.current,x!==null){switch(x.tag){case 31:case 13:return rl===null?sf():x.alternate===null&&ma===0&&(ma=3),x.flags&=-257,x.flags|=65536,x.lanes=G,T===$m?x.flags|=16384:(g=x.updateQueue,g===null?x.updateQueue=new Set([T]):g.add(T),l1(f,T,G)),!1;case 22:return x.flags|=65536,T===$m?x.flags|=16384:(g=x.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([T])},x.updateQueue=g):(x=g.retryQueue,x===null?g.retryQueue=new Set([T]):x.add(T)),l1(f,T,G)),!1}throw Error(i(435,x.tag))}return l1(f,T,G),sf(),!1}if(Lr)return g=lu.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=G,T!==ks&&(f=Error(i(422),{cause:T}),Bc(Pl(f,x)))):(T!==ks&&(g=Error(i(423),{cause:T}),Bc(Pl(g,x))),f=f.current.alternate,f.flags|=65536,G&=-G,f.lanes|=G,T=Pl(T,x),G=Ad(f.stateNode,T,G),rd(f,G),ma!==4&&(ma=2)),!1;var J=Error(i(520),{cause:T});if(J=Pl(J,x),n1===null?n1=[J]:n1.push(J),ma!==4&&(ma=2),g===null)return!0;T=Pl(T,x),x=g;do{switch(x.tag){case 3:return x.flags|=65536,f=G&-G,x.lanes|=f,f=Ad(x.stateNode,T,f),rd(x,f),!1;case 1:if(g=x.type,J=x.stateNode,(x.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Jf===null||!Jf.has(J))))return x.flags|=65536,G&=-G,x.lanes|=G,G=Kc(G),qf(G,f,x,T),rd(x,G),!1}x=x.return}while(x!==null);return!1}var Qg=Error(i(461)),Ys=!1;function fa(f,g,x,T){g.child=f===null?Zm(g,null,x,T):rA(g,f.child,x,T)}function sr(f,g,x,T,G){x=x.render;var J=g.ref;if("ref"in T){var xe={};for(var qe in T)qe!=="ref"&&(xe[qe]=T[qe])}else xe=T;return mh(g),T=Zd(f,g,x,xe,J,G),qe=Gf(),f!==null&&!Ys?(FA(f,g,G),ta(f,g,G)):(Lr&&qe&&Ec(g),g.flags|=1,fa(f,g,T,G),g.child)}function hd(f,g,x,T,G){if(f===null){var J=x.type;return typeof J=="function"&&!BA(J)&&J.defaultProps===void 0&&x.compare===null?(g.tag=15,g.type=J,ay(f,g,J,T,G)):(f=A0(x.type,null,T,g,g.mode,G),f.ref=g.ref,f.return=g,g.child=f)}if(J=f.child,!$g(f,G)){var xe=J.memoizedProps;if(x=x.compare,x=x!==null?x:ah,x(xe,T)&&f.ref===g.ref)return ta(f,g,G)}return g.flags|=1,f=Rl(J,T),f.ref=g.ref,f.return=g,g.child=f}function ay(f,g,x,T,G){if(f!==null){var J=f.memoizedProps;if(ah(J,T)&&f.ref===g.ref)if(Ys=!1,g.pendingProps=T=J,$g(f,G))(f.flags&131072)!==0&&(Ys=!0);else return g.lanes=f.lanes,ta(f,g,G)}return uy(f,g,x,T,G)}function lA(f,g,x,T){var G=T.children,J=f!==null?f.memoizedState:null;if(f===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),T.mode==="hidden"){if((g.flags&128)!==0){if(J=J!==null?J.baseLanes|x:x,f!==null){for(T=g.child=f.child,G=0;T!==null;)G=G|T.lanes|T.childLanes,T=T.sibling;T=G&~J}else T=0,g.child=null;return ep(f,g,J,x,T)}if((x&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},f!==null&&ed(g,J!==null?J.cachePool:null),J!==null?mi(g,J):li(),jg(g);else return T=g.lanes=536870912,ep(f,g,J!==null?J.baseLanes|x:x,x,T)}else J!==null?(ed(g,J.cachePool),mi(g,J),Rc(),g.memoizedState=null):(f!==null&&ed(g,null),li(),Rc());return fa(f,g,G,x),g.child}function Yf(f,g){return f!==null&&f.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function ep(f,g,x,T,G){var J=Vm();return J=J===null?null:{parent:Ds._currentValue,pool:J},g.memoizedState={baseLanes:x,cachePool:J},f!==null&&ed(g,null),li(),jg(g),f!==null&&Oc(f,g,T,!0),g.childLanes=G,null}function qg(f,g){return g=Ay({mode:g.mode,children:g.children},f.mode),g.ref=f.ref,f.child=g,g.return=f,g}function hu(f,g,x){return rA(g,f.child,null,x),f=qg(g,g.pendingProps),f.flags|=2,uu(g),g.memoizedState=null,f}function r3(f,g,x){var T=g.pendingProps,G=(g.flags&128)!==0;if(g.flags&=-129,f===null){if(Lr){if(T.mode==="hidden")return f=qg(g,T),g.lanes=536870912,Yf(null,f);if(pl(g),(f=uo)?(f=SC(f,ec),f=f!==null&&f.data==="&"?f:null,f!==null&&(g.memoizedState={dehydrated:f,treeContext:tA!==null?{id:IA,overflow:Ul}:null,retryLane:536870912,hydrationErrors:null},x=Yd(f),x.return=g,g.child=x,ua=g,uo=null)):f=null,f===null)throw Tu(g);return g.lanes=536870912,null}return qg(g,T)}var J=f.memoizedState;if(J!==null){var xe=J.dehydrated;if(pl(g),G)if(g.flags&256)g.flags&=-257,g=hu(f,g,x);else if(g.memoizedState!==null)g.child=f.child,g.flags|=128,g=null;else throw Error(i(558));else if(Ys||Oc(f,g,x,!1),G=(x&f.childLanes)!==0,Ys||G){if(T=bs,T!==null&&(xe=Ir(T,x),xe!==0&&xe!==J.retryLane))throw J.retryLane=xe,ru(f,xe),jc(T,f,xe),Qg;sf(),g=hu(f,g,x)}else f=J.treeContext,uo=GA(xe.nextSibling),ua=g,Lr=!0,hh=null,ec=!1,f!==null&&Vd(g,f),g=qg(g,T),g.flags|=4096;return g}return f=Rl(f.child,{mode:T.mode,children:T.children}),f.ref=g.ref,g.child=f,f.return=g,f}function ly(f,g){var x=g.ref;if(x===null)f!==null&&f.ref!==null&&(g.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(i(284));(f===null||f.ref!==x)&&(g.flags|=4194816)}}function uy(f,g,x,T,G){return mh(g),x=Zd(f,g,x,T,void 0,G),T=Gf(),f!==null&&!Ys?(FA(f,g,G),ta(f,g,G)):(Lr&&T&&Ec(g),g.flags|=1,fa(f,g,x,G),g.child)}function $v(f,g,x,T,G,J){return mh(g),g.updateQueue=null,x=sd(g,T,x,G),Xd(f),T=Gf(),f!==null&&!Ys?(FA(f,g,J),ta(f,g,J)):(Lr&&T&&Ec(g),g.flags|=1,fa(f,g,x,J),g.child)}function Yg(f,g,x,T,G){if(mh(g),g.stateNode===null){var J=lr,xe=x.contextType;typeof xe=="object"&&xe!==null&&(J=ca(xe)),J=new x(T,J),g.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,J.updater=Qf,g.stateNode=J,J._reactInternals=g,J=g.stateNode,J.props=T,J.state=g.memoizedState,J.refs={},oA(g),xe=x.contextType,J.context=typeof xe=="object"&&xe!==null?ca(xe):lr,J.state=g.memoizedState,xe=x.getDerivedStateFromProps,typeof xe=="function"&&(y0(g,x,xe,T),J.state=g.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(xe=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),xe!==J.state&&Qf.enqueueReplaceState(J,J.state,null),Hd(g,T,J,G),gh(),J.state=g.memoizedState),typeof J.componentDidMount=="function"&&(g.flags|=4194308),T=!0}else if(f===null){J=g.stateNode;var qe=g.memoizedProps,xt=da(x,qe);J.props=xt;var Zt=J.context,un=x.contextType;xe=lr,typeof un=="object"&&un!==null&&(xe=ca(un));var yn=x.getDerivedStateFromProps;un=typeof yn=="function"||typeof J.getSnapshotBeforeUpdate=="function",qe=g.pendingProps!==qe,un||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(qe||Zt!==xe)&&C0(g,J,T,xe),ic=!1;var Jt=g.memoizedState;J.state=Jt,Hd(g,T,J,G),gh(),Zt=g.memoizedState,qe||Jt!==Zt||ic?(typeof yn=="function"&&(y0(g,x,yn,T),Zt=g.memoizedState),(xt=ic||v0(g,x,xt,T,Jt,Zt,xe))?(un||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(g.flags|=4194308)):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=T,g.memoizedState=Zt),J.props=T,J.state=Zt,J.context=xe,T=xt):(typeof J.componentDidMount=="function"&&(g.flags|=4194308),T=!1)}else{J=g.stateNode,kc(f,g),xe=g.memoizedProps,un=da(x,xe),J.props=un,yn=g.pendingProps,Jt=J.context,Zt=x.contextType,xt=lr,typeof Zt=="object"&&Zt!==null&&(xt=ca(Zt)),qe=x.getDerivedStateFromProps,(Zt=typeof qe=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(xe!==yn||Jt!==xt)&&C0(g,J,T,xt),ic=!1,Jt=g.memoizedState,J.state=Jt,Hd(g,T,J,G),gh();var on=g.memoizedState;xe!==yn||Jt!==on||ic||f!==null&&f.dependencies!==null&&Kf(f.dependencies)?(typeof qe=="function"&&(y0(g,x,qe,T),on=g.memoizedState),(un=ic||v0(g,x,un,T,Jt,on,xt)||f!==null&&f.dependencies!==null&&Kf(f.dependencies))?(Zt||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(T,on,xt),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(T,on,xt)),typeof J.componentDidUpdate=="function"&&(g.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof J.componentDidUpdate!="function"||xe===f.memoizedProps&&Jt===f.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||xe===f.memoizedProps&&Jt===f.memoizedState||(g.flags|=1024),g.memoizedProps=T,g.memoizedState=on),J.props=T,J.state=on,J.context=xt,T=un):(typeof J.componentDidUpdate!="function"||xe===f.memoizedProps&&Jt===f.memoizedState||(g.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||xe===f.memoizedProps&&Jt===f.memoizedState||(g.flags|=1024),T=!1)}return J=T,ly(f,g),T=(g.flags&128)!==0,J||T?(J=g.stateNode,x=T&&typeof x.getDerivedStateFromError!="function"?null:J.render(),g.flags|=1,f!==null&&T?(g.child=rA(g,f.child,null,G),g.child=rA(g,null,x,G)):fa(f,g,x,G),g.memoizedState=J.state,f=g.child):f=ta(f,g,G),f}function Hv(f,g,x,T){return Qe(),g.flags|=256,fa(f,g,x,T),g.child}var cy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zv(f){return{baseLanes:f,cachePool:PA()}}function _h(f,g,x){return f=f!==null?f.childLanes&~x:0,g&&(f|=hA),f}function du(f,g,x){var T=g.pendingProps,G=!1,J=(g.flags&128)!==0,xe;if((xe=J)||(xe=f!==null&&f.memoizedState===null?!1:(ea.current&2)!==0),xe&&(G=!0,g.flags&=-129),xe=(g.flags&32)!==0,g.flags&=-33,f===null){if(Lr){if(G?Js(g):Rc(),(f=uo)?(f=SC(f,ec),f=f!==null&&f.data!=="&"?f:null,f!==null&&(g.memoizedState={dehydrated:f,treeContext:tA!==null?{id:IA,overflow:Ul}:null,retryLane:536870912,hydrationErrors:null},x=Yd(f),x.return=g,g.child=x,ua=g,uo=null)):f=null,f===null)throw Tu(g);return na(f)?g.lanes=32:g.lanes=536870912,null}var qe=T.children;return T=T.fallback,G?(Rc(),G=g.mode,qe=Ay({mode:"hidden",children:qe},G),T=Zh(T,G,x,null),qe.return=g,T.return=g,qe.sibling=T,g.child=qe,T=g.child,T.memoizedState=Zv(x),T.childLanes=_h(f,xe,x),g.memoizedState=cy,Yf(null,T)):(Js(g),_0(g,qe))}var xt=f.memoizedState;if(xt!==null&&(qe=xt.dehydrated,qe!==null)){if(J)g.flags&256?(Js(g),g.flags&=-257,g=tp(f,g,x)):g.memoizedState!==null?(Rc(),g.child=f.child,g.flags|=128,g=null):(Rc(),qe=T.fallback,G=g.mode,T=Ay({mode:"visible",children:T.children},G),qe=Zh(qe,G,x,null),qe.flags|=2,T.return=g,qe.return=g,T.sibling=qe,g.child=T,rA(g,f.child,null,x),T=g.child,T.memoizedState=Zv(x),T.childLanes=_h(f,xe,x),g.memoizedState=cy,g=Yf(null,T));else if(Js(g),na(qe)){if(xe=qe.nextSibling&&qe.nextSibling.dataset,xe)var Zt=xe.dgst;xe=Zt,T=Error(i(419)),T.stack="",T.digest=xe,Bc({value:T,source:null,stack:null}),g=tp(f,g,x)}else if(Ys||Oc(f,g,x,!1),xe=(x&f.childLanes)!==0,Ys||xe){if(xe=bs,xe!==null&&(T=Ir(xe,x),T!==0&&T!==xt.retryLane))throw xt.retryLane=T,ru(f,T),jc(xe,f,T),Qg;Pu(qe)||sf(),g=tp(f,g,x)}else Pu(qe)?(g.flags|=192,g.child=f.child,g=null):(f=xt.treeContext,uo=GA(qe.nextSibling),ua=g,Lr=!0,hh=null,ec=!1,f!==null&&Vd(g,f),g=_0(g,T.children),g.flags|=4096);return g}return G?(Rc(),qe=T.fallback,G=g.mode,xt=f.child,Zt=xt.sibling,T=Rl(xt,{mode:"hidden",children:T.children}),T.subtreeFlags=xt.subtreeFlags&65011712,Zt!==null?qe=Rl(Zt,qe):(qe=Zh(qe,G,x,null),qe.flags|=2),qe.return=g,T.return=g,T.sibling=qe,g.child=T,Yf(null,T),T=g.child,qe=f.child.memoizedState,qe===null?qe=Zv(x):(G=qe.cachePool,G!==null?(xt=Ds._currentValue,G=G.parent!==xt?{parent:xt,pool:xt}:G):G=PA(),qe={baseLanes:qe.baseLanes|x,cachePool:G}),T.memoizedState=qe,T.childLanes=_h(f,xe,x),g.memoizedState=cy,Yf(f.child,T)):(Js(g),x=f.child,f=x.sibling,x=Rl(x,{mode:"visible",children:T.children}),x.return=g,x.sibling=null,f!==null&&(xe=g.deletions,xe===null?(g.deletions=[f],g.flags|=16):xe.push(f)),g.child=x,g.memoizedState=null,x)}function _0(f,g){return g=Ay({mode:"visible",children:g},f.mode),g.return=f,f.child=g}function Ay(f,g){return f=fl(22,f,null,g),f.lanes=0,f}function tp(f,g,x){return rA(g,f.child,null,x),f=_0(g,g.pendingProps.children),f.flags|=2,g.memoizedState=null,f}function Xv(f,g,x){f.lanes|=g;var T=f.alternate;T!==null&&(T.lanes|=g),RA(f.return,g,x)}function Vg(f,g,x,T,G,J){var xe=f.memoizedState;xe===null?f.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:T,tail:x,tailMode:G,treeForkCount:J}:(xe.isBackwards=g,xe.rendering=null,xe.renderingStartTime=0,xe.last=T,xe.tail=x,xe.tailMode=G,xe.treeForkCount=J)}function dd(f,g,x){var T=g.pendingProps,G=T.revealOrder,J=T.tail;T=T.children;var xe=ea.current,qe=(xe&2)!==0;if(qe?(xe=xe&1|2,g.flags|=128):xe&=1,Ke(ea,xe),fa(f,g,T,x),T=Lr?Ws:0,!qe&&f!==null&&(f.flags&128)!==0)e:for(f=g.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Xv(f,x,g);else if(f.tag===19)Xv(f,x,g);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===g)break e;for(;f.sibling===null;){if(f.return===null||f.return===g)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(G){case"forwards":for(x=g.child,G=null;x!==null;)f=x.alternate,f!==null&&yh(f)===null&&(G=x),x=x.sibling;x=G,x===null?(G=g.child,g.child=null):(G=x.sibling,x.sibling=null),Vg(g,!1,G,x,J,T);break;case"backwards":case"unstable_legacy-backwards":for(x=null,G=g.child,g.child=null;G!==null;){if(f=G.alternate,f!==null&&yh(f)===null){g.child=G;break}f=G.sibling,G.sibling=x,x=G,G=f}Vg(g,!0,x,null,J,T);break;case"together":Vg(g,!1,null,null,void 0,T);break;default:g.memoizedState=null}return g.child}function ta(f,g,x){if(f!==null&&(g.dependencies=f.dependencies),NA|=g.lanes,(x&g.childLanes)===0)if(f!==null){if(Oc(f,g,x,!1),(x&g.childLanes)===0)return null}else return null;if(f!==null&&g.child!==f.child)throw Error(i(153));if(g.child!==null){for(f=g.child,x=Rl(f,f.pendingProps),g.child=x,x.return=g;f.sibling!==null;)f=f.sibling,x=x.sibling=Rl(f,f.pendingProps),x.return=g;x.sibling=null}return g.child}function $g(f,g){return(f.lanes&g)!==0?!0:(f=f.dependencies,!!(f!==null&&Kf(f)))}function Jv(f,g,x){switch(g.tag){case 3:Ue(g,g.stateNode.containerInfo),fh(g,Ds,f.memoizedState.cache),Qe();break;case 27:case 5:Te(g);break;case 4:Ue(g,g.stateNode.containerInfo);break;case 10:fh(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,pl(g),null;break;case 13:var T=g.memoizedState;if(T!==null)return T.dehydrated!==null?(Js(g),g.flags|=128,null):(x&g.child.childLanes)!==0?du(f,g,x):(Js(g),f=ta(f,g,x),f!==null?f.sibling:null);Js(g);break;case 19:var G=(f.flags&128)!==0;if(T=(x&g.childLanes)!==0,T||(Oc(f,g,x,!1),T=(x&g.childLanes)!==0),G){if(T)return dd(f,g,x);g.flags|=128}if(G=g.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Ke(ea,ea.current),T)break;return null;case 22:return g.lanes=0,lA(f,g,x,g.pendingProps);case 24:fh(g,Ds,f.memoizedState.cache)}return ta(f,g,x)}function l_(f,g,x){if(f!==null)if(f.memoizedProps!==g.pendingProps)Ys=!0;else{if(!$g(f,x)&&(g.flags&128)===0)return Ys=!1,Jv(f,g,x);Ys=(f.flags&131072)!==0}else Ys=!1,Lr&&(g.flags&1048576)!==0&&qm(g,Ws,g.index);switch(g.lanes=0,g.tag){case 16:e:{var T=g.pendingProps;if(f=ml(g.elementType),g.type=f,typeof f=="function")BA(f)?(T=da(f,T),g.tag=1,g=Yg(null,g,f,T,x)):(g.tag=0,g=uy(null,g,f,T,x));else{if(f!=null){var G=f.$$typeof;if(G===re){g.tag=11,g=sr(null,g,f,T,x);break e}else if(G===q){g.tag=14,g=hd(null,g,f,T,x);break e}}throw g=Oe(f)||f,Error(i(306,g,""))}}return g;case 0:return uy(f,g,g.type,g.pendingProps,x);case 1:return T=g.type,G=da(T,g.pendingProps),Yg(f,g,T,G,x);case 3:e:{if(Ue(g,g.stateNode.containerInfo),f===null)throw Error(i(387));T=g.pendingProps;var J=g.memoizedState;G=J.element,kc(f,g),Hd(g,T,null,x);var xe=g.memoizedState;if(T=xe.cache,fh(g,Ds,T),T!==J.cache&&h0(g,[Ds],x,!0),gh(),T=xe.element,J.isDehydrated)if(J={element:T,isDehydrated:!1,cache:xe.cache},g.updateQueue.baseState=J,g.memoizedState=J,g.flags&256){g=Hv(f,g,T,x);break e}else if(T!==G){G=Pl(Error(i(424)),g),Bc(G),g=Hv(f,g,T,x);break e}else for(f=g.stateNode.containerInfo,f.nodeType===9?f=f.body:f=f.nodeName==="HTML"?f.ownerDocument.body:f,uo=GA(f.firstChild),ua=g,Lr=!0,hh=null,ec=!0,x=Zm(g,null,T,x),g.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Qe(),T===G){g=ta(f,g,x);break e}fa(f,g,T,x)}g=g.child}return g;case 26:return ly(f,g),f===null?(x=Fy(g.type,null,g.pendingProps,null))?g.memoizedState=x:Lr||(x=g.type,f=g.pendingProps,T=yd(Et.current).createElement(x),T[lo]=g,T[Dn]=f,Ra(T,x,f),Lo(T),g.stateNode=T):g.memoizedState=Fy(g.type,f.memoizedProps,g.pendingProps,f.memoizedState),null;case 27:return Te(g),f===null&&Lr&&(T=g.stateNode=x_(g.type,g.pendingProps,Et.current),ua=g,ec=!0,G=uo,Pi(g.type)?(Ly=G,uo=GA(T.firstChild)):uo=G),fa(f,g,g.pendingProps.children,x),ly(f,g),f===null&&(g.flags|=4194304),g.child;case 5:return f===null&&Lr&&((G=T=uo)&&(T=sl(T,g.type,g.pendingProps,ec),T!==null?(g.stateNode=T,ua=g,uo=GA(T.firstChild),ec=!1,G=!0):G=!1),G||Tu(g)),Te(g),G=g.type,J=g.pendingProps,xe=f!==null?f.memoizedProps:null,T=J.children,vd(G,J)?T=null:xe!==null&&vd(G,xe)&&(g.flags|=32),g.memoizedState!==null&&(G=Zd(f,g,Jm,null,null,x),Q0._currentValue=G),ly(f,g),fa(f,g,T,x),g.child;case 6:return f===null&&Lr&&((f=x=uo)&&(x=dr(x,g.pendingProps,ec),x!==null?(g.stateNode=x,ua=g,uo=null,f=!0):f=!1),f||Tu(g)),null;case 13:return du(f,g,x);case 4:return Ue(g,g.stateNode.containerInfo),T=g.pendingProps,f===null?g.child=rA(g,null,T,x):fa(f,g,T,x),g.child;case 11:return sr(f,g,g.type,g.pendingProps,x);case 7:return fa(f,g,g.pendingProps,x),g.child;case 8:return fa(f,g,g.pendingProps.children,x),g.child;case 12:return fa(f,g,g.pendingProps.children,x),g.child;case 10:return T=g.pendingProps,fh(g,g.type,T.value),fa(f,g,T.children,x),g.child;case 9:return G=g.type._context,T=g.pendingProps.children,mh(g),G=ca(G),T=T(G),g.flags|=1,fa(f,g,T,x),g.child;case 14:return hd(f,g,g.type,g.pendingProps,x);case 15:return ay(f,g,g.type,g.pendingProps,x);case 19:return dd(f,g,x);case 31:return r3(f,g,x);case 22:return lA(f,g,x,g.pendingProps);case 24:return mh(g),T=ca(Ds),f===null?(G=Vm(),G===null&&(G=bs,J=Kl(),G.pooledCache=J,J.refCount++,J!==null&&(G.pooledCacheLanes|=x),G=J),g.memoizedState={parent:T,cache:G},oA(g),fh(g,Ds,G)):((f.lanes&x)!==0&&(kc(f,g),Hd(g,null,null,x),gh()),G=f.memoizedState,J=g.memoizedState,G.parent!==T?(G={parent:T,cache:T},g.memoizedState=G,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=G),fh(g,Ds,T)):(T=J.cache,fh(g,Ds,T),T!==G.cache&&h0(g,[Ds],x,!0))),fa(f,g,g.pendingProps.children,x),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function fd(f){f.flags|=4}function eC(f,g,x,T,G){if((g=(f.mode&32)!==0)&&(g=!1),g){if(f.flags|=16777216,(G&335544128)===G)if(f.stateNode.complete)f.flags|=8192;else if(k0())f.flags|=8192;else throw UA=$m,jf}else f.flags&=-16777217}function tC(f,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!kC(g))if(k0())f.flags|=8192;else throw UA=$m,jf}function x0(f,g){g!==null&&(f.flags|=4),f.flags&16384&&(g=f.tag!==22?Zn():536870912,f.lanes|=g,I0|=g)}function Hg(f,g){if(!Lr)switch(f.tailMode){case"hidden":g=f.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var T=null;x!==null;)x.alternate!==null&&(T=x),x=x.sibling;T===null?g||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function os(f){var g=f.alternate!==null&&f.alternate.child===f.child,x=0,T=0;if(g)for(var G=f.child;G!==null;)x|=G.lanes|G.childLanes,T|=G.subtreeFlags&65011712,T|=G.flags&65011712,G.return=f,G=G.sibling;else for(G=f.child;G!==null;)x|=G.lanes|G.childLanes,T|=G.subtreeFlags,T|=G.flags,G.return=f,G=G.sibling;return f.subtreeFlags|=T,f.childLanes=x,g}function nC(f,g,x){var T=g.pendingProps;switch(TA(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(g),null;case 1:return os(g),null;case 3:return x=g.stateNode,T=null,f!==null&&(T=f.memoizedState.cache),g.memoizedState.cache!==T&&(g.flags|=2048),DA(Ds),ke(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(nA(g)?fd(g):f===null||f.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,ou())),os(g),null;case 26:var G=g.type,J=g.memoizedState;return f===null?(fd(g),J!==null?(os(g),tC(g,J)):(os(g),eC(g,G,null,T,x))):J?J!==f.memoizedState?(fd(g),os(g),tC(g,J)):(os(g),g.flags&=-16777217):(f=f.memoizedProps,f!==T&&fd(g),os(g),eC(g,G,f,T,x)),null;case 27:if(He(g),x=Et.current,G=g.type,f!==null&&g.stateNode!=null)f.memoizedProps!==T&&fd(g);else{if(!T){if(g.stateNode===null)throw Error(i(166));return os(g),null}f=Bt.current,nA(g)?Ll(g):(f=x_(G,T,x),g.stateNode=f,fd(g))}return os(g),null;case 5:if(He(g),G=g.type,f!==null&&g.stateNode!=null)f.memoizedProps!==T&&fd(g);else{if(!T){if(g.stateNode===null)throw Error(i(166));return os(g),null}if(J=Bt.current,nA(g))Ll(g);else{var xe=yd(Et.current);switch(J){case 1:J=xe.createElementNS("http://www.w3.org/2000/svg",G);break;case 2:J=xe.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;default:switch(G){case"svg":J=xe.createElementNS("http://www.w3.org/2000/svg",G);break;case"math":J=xe.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;case"script":J=xe.createElement("div"),J.innerHTML="<script><\/script>",J=J.removeChild(J.firstChild);break;case"select":J=typeof T.is=="string"?xe.createElement("select",{is:T.is}):xe.createElement("select"),T.multiple?J.multiple=!0:T.size&&(J.size=T.size);break;default:J=typeof T.is=="string"?xe.createElement(G,{is:T.is}):xe.createElement(G)}}J[lo]=g,J[Dn]=T;e:for(xe=g.child;xe!==null;){if(xe.tag===5||xe.tag===6)J.appendChild(xe.stateNode);else if(xe.tag!==4&&xe.tag!==27&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===g)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===g)break e;xe=xe.return}xe.sibling.return=xe.return,xe=xe.sibling}g.stateNode=J;e:switch(Ra(J,G,T),G){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}T&&fd(g)}}return os(g),eC(g,g.type,f===null?null:f.memoizedProps,g.pendingProps,x),null;case 6:if(f&&g.stateNode!=null)f.memoizedProps!==T&&fd(g);else{if(typeof T!="string"&&g.stateNode===null)throw Error(i(166));if(f=Et.current,nA(g)){if(f=g.stateNode,x=g.memoizedProps,T=null,G=ua,G!==null)switch(G.tag){case 27:case 5:T=G.memoizedProps}f[lo]=g,f=!!(f.nodeValue===x||T!==null&&T.suppressHydrationWarning===!0||ky(f.nodeValue,x)),f||Tu(g,!0)}else f=yd(f).createTextNode(T),f[lo]=g,g.stateNode=f}return os(g),null;case 31:if(x=g.memoizedState,f===null||f.memoizedState!==null){if(T=nA(g),x!==null){if(f===null){if(!T)throw Error(i(318));if(f=g.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(557));f[lo]=g}else Qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;os(g),f=!1}else x=ou(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=x),f=!0;if(!f)return g.flags&256?(uu(g),g):(uu(g),null);if((g.flags&128)!==0)throw Error(i(558))}return os(g),null;case 13:if(T=g.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(G=nA(g),T!==null&&T.dehydrated!==null){if(f===null){if(!G)throw Error(i(318));if(G=g.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(i(317));G[lo]=g}else Qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;os(g),G=!1}else G=ou(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=G),G=!0;if(!G)return g.flags&256?(uu(g),g):(uu(g),null)}return uu(g),(g.flags&128)!==0?(g.lanes=x,g):(x=T!==null,f=f!==null&&f.memoizedState!==null,x&&(T=g.child,G=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(G=T.alternate.memoizedState.cachePool.pool),J=null,T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(J=T.memoizedState.cachePool.pool),J!==G&&(T.flags|=2048)),x!==f&&x&&(g.child.flags|=8192),x0(g,g.updateQueue),os(g),null);case 4:return ke(),f===null&&Iy(g.stateNode.containerInfo),os(g),null;case 10:return DA(g.type),os(g),null;case 19:if(Xe(ea),T=g.memoizedState,T===null)return os(g),null;if(G=(g.flags&128)!==0,J=T.rendering,J===null)if(G)Hg(T,!1);else{if(ma!==0||f!==null&&(f.flags&128)!==0)for(f=g.child;f!==null;){if(J=yh(f),J!==null){for(g.flags|=128,Hg(T,!1),f=J.updateQueue,g.updateQueue=f,x0(g,f),g.subtreeFlags=0,f=x,x=g.child;x!==null;)oy(x,f),x=x.sibling;return Ke(ea,ea.current&1|2),Lr&&Ju(g,T.treeForkCount),g.child}f=f.sibling}T.tail!==null&&oi()>Xf&&(g.flags|=128,G=!0,Hg(T,!1),g.lanes=4194304)}else{if(!G)if(f=yh(J),f!==null){if(g.flags|=128,G=!0,f=f.updateQueue,g.updateQueue=f,x0(g,f),Hg(T,!0),T.tail===null&&T.tailMode==="hidden"&&!J.alternate&&!Lr)return os(g),null}else 2*oi()-T.renderingStartTime>Xf&&x!==536870912&&(g.flags|=128,G=!0,Hg(T,!1),g.lanes=4194304);T.isBackwards?(J.sibling=g.child,g.child=J):(f=T.last,f!==null?f.sibling=J:g.child=J,T.last=J)}return T.tail!==null?(f=T.tail,T.rendering=f,T.tail=f.sibling,T.renderingStartTime=oi(),f.sibling=null,x=ea.current,Ke(ea,G?x&1|2:x&1),Lr&&Ju(g,T.treeForkCount),f):(os(g),null);case 22:case 23:return uu(g),LA(),T=g.memoizedState!==null,f!==null?f.memoizedState!==null!==T&&(g.flags|=8192):T&&(g.flags|=8192),T?(x&536870912)!==0&&(g.flags&128)===0&&(os(g),g.subtreeFlags&6&&(g.flags|=8192)):os(g),x=g.updateQueue,x!==null&&x0(g,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==x&&(g.flags|=2048),f!==null&&Xe(iA),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),g.memoizedState.cache!==x&&(g.flags|=2048),DA(Ds),os(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function M0(f,g){switch(TA(g),g.tag){case 1:return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 3:return DA(Ds),ke(),f=g.flags,(f&65536)!==0&&(f&128)===0?(g.flags=f&-65537|128,g):null;case 26:case 27:case 5:return He(g),null;case 31:if(g.memoizedState!==null){if(uu(g),g.alternate===null)throw Error(i(340));Qe()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 13:if(uu(g),f=g.memoizedState,f!==null&&f.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Qe()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 19:return Xe(ea),null;case 4:return ke(),null;case 10:return DA(g.type),null;case 22:case 23:return uu(g),LA(),f!==null&&Xe(iA),f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 24:return DA(Ds),null;case 25:return null;default:return null}}function hy(f,g){switch(TA(g),g.tag){case 3:DA(Ds),ke();break;case 26:case 27:case 5:He(g);break;case 4:ke();break;case 31:g.memoizedState!==null&&uu(g);break;case 13:uu(g);break;case 19:Xe(ea);break;case 10:DA(g.type);break;case 22:case 23:uu(g),LA(),f!==null&&Xe(iA);break;case 24:DA(Ds)}}function w0(f,g){try{var x=g.updateQueue,T=x!==null?x.lastEffect:null;if(T!==null){var G=T.next;x=G;do{if((x.tag&f)===f){T=void 0;var J=x.create,xe=x.inst;T=J(),xe.destroy=T}x=x.next}while(x!==G)}}catch(qe){Po(g,g.return,qe)}}function Jd(f,g,x){try{var T=g.updateQueue,G=T!==null?T.lastEffect:null;if(G!==null){var J=G.next;T=J;do{if((T.tag&f)===f){var xe=T.inst,qe=xe.destroy;if(qe!==void 0){xe.destroy=void 0,G=g;var xt=x,Zt=qe;try{Zt()}catch(un){Po(G,xt,un)}}}T=T.next}while(T!==J)}}catch(un){Po(g,g.return,un)}}function Vf(f){var g=f.updateQueue;if(g!==null){var x=f.stateNode;try{Xm(g,x)}catch(T){Po(f,f.return,T)}}}function Zg(f,g,x){x.props=da(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(T){Po(f,g,T)}}function lc(f,g){try{var x=f.ref;if(x!==null){switch(f.tag){case 26:case 27:case 5:var T=f.stateNode;break;case 30:T=f.stateNode;break;default:T=f.stateNode}typeof x=="function"?f.refCleanup=x(T):x.current=T}}catch(G){Po(f,g,G)}}function Ia(f,g){var x=f.ref,T=f.refCleanup;if(x!==null)if(typeof T=="function")try{T()}catch(G){Po(f,g,G)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(G){Po(f,g,G)}else x.current=null}function S0(f){var g=f.type,x=f.memoizedProps,T=f.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":x.autoFocus&&T.focus();break e;case"img":x.src?T.src=x.src:x.srcSet&&(T.srcset=x.srcSet)}}catch(G){Po(f,f.return,G)}}function dy(f,g,x){try{var T=f.stateNode;m1(T,f.type,x,g),T[Dn]=g}catch(G){Po(f,f.return,G)}}function u_(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&Pi(f.type)||f.tag===4}function iC(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||u_(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&Pi(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function rC(f,g,x){var T=f.tag;if(T===5||T===6)f=f.stateNode,g?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(f,g):(g=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,g.appendChild(f),x=x._reactRootContainer,x!=null||g.onclick!==null||(g.onclick=Ja));else if(T!==4&&(T===27&&Pi(f.type)&&(x=f.stateNode,g=null),f=f.child,f!==null))for(rC(f,g,x),f=f.sibling;f!==null;)rC(f,g,x),f=f.sibling}function fy(f,g,x){var T=f.tag;if(T===5||T===6)f=f.stateNode,g?x.insertBefore(f,g):x.appendChild(f);else if(T!==4&&(T===27&&Pi(f.type)&&(x=f.stateNode),f=f.child,f!==null))for(fy(f,g,x),f=f.sibling;f!==null;)fy(f,g,x),f=f.sibling}function c_(f){var g=f.stateNode,x=f.memoizedProps;try{for(var T=f.type,G=g.attributes;G.length;)g.removeAttributeNode(G[0]);Ra(g,T,x),g[lo]=f,g[Dn]=x}catch(J){Po(f,f.return,J)}}var ef=!1,Ta=!1,oC=!1,sC=typeof WeakSet=="function"?WeakSet:Set,ka=null;function o3(f,g){if(f=f.containerInfo,z0=q0,f=l0(f),Nm(f)){if("selectionStart"in f)var x={start:f.selectionStart,end:f.selectionEnd};else e:{x=(x=f.ownerDocument)&&x.defaultView||window;var T=x.getSelection&&x.getSelection();if(T&&T.rangeCount!==0){x=T.anchorNode;var G=T.anchorOffset,J=T.focusNode;T=T.focusOffset;try{x.nodeType,J.nodeType}catch{x=null;break e}var xe=0,qe=-1,xt=-1,Zt=0,un=0,yn=f,Jt=null;t:for(;;){for(var on;yn!==x||G!==0&&yn.nodeType!==3||(qe=xe+G),yn!==J||T!==0&&yn.nodeType!==3||(xt=xe+T),yn.nodeType===3&&(xe+=yn.nodeValue.length),(on=yn.firstChild)!==null;)Jt=yn,yn=on;for(;;){if(yn===f)break t;if(Jt===x&&++Zt===G&&(qe=xe),Jt===J&&++un===T&&(xt=xe),(on=yn.nextSibling)!==null)break;yn=Jt,Jt=yn.parentNode}yn=on}x=qe===-1||xt===-1?null:{start:qe,end:xt}}else x=null}x=x||{start:0,end:0}}else x=null;for(Dy={focusedElem:f,selectionRange:x},q0=!1,ka=g;ka!==null;)if(g=ka,f=g.child,(g.subtreeFlags&1028)!==0&&f!==null)f.return=g,ka=f;else for(;ka!==null;){switch(g=ka,J=g.alternate,f=g.flags,g.tag){case 0:if((f&4)!==0&&(f=g.updateQueue,f=f!==null?f.events:null,f!==null))for(x=0;x<f.length;x++)G=f[x],G.ref.impl=G.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&J!==null){f=void 0,x=g,G=J.memoizedProps,J=J.memoizedState,T=x.stateNode;try{var Si=da(x.type,G);f=T.getSnapshotBeforeUpdate(Si,J),T.__reactInternalSnapshotBeforeUpdate=f}catch(ir){Po(x,x.return,ir)}}break;case 3:if((f&1024)!==0){if(f=g.stateNode.containerInfo,x=f.nodeType,x===9)pu(f);else if(x===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":pu(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(i(163))}if(f=g.sibling,f!==null){f.return=g.return,ka=f;break}ka=g.return}}function Vs(f,g,x){var T=x.flags;switch(x.tag){case 0:case 11:case 15:md(f,x),T&4&&w0(5,x);break;case 1:if(md(f,x),T&4)if(f=x.stateNode,g===null)try{f.componentDidMount()}catch(xe){Po(x,x.return,xe)}else{var G=da(x.type,g.memoizedProps);g=g.memoizedState;try{f.componentDidUpdate(G,g,f.__reactInternalSnapshotBeforeUpdate)}catch(xe){Po(x,x.return,xe)}}T&64&&Vf(x),T&512&&lc(x,x.return);break;case 3:if(md(f,x),T&64&&(f=x.updateQueue,f!==null)){if(g=null,x.child!==null)switch(x.child.tag){case 27:case 5:g=x.child.stateNode;break;case 1:g=x.child.stateNode}try{Xm(f,g)}catch(xe){Po(x,x.return,xe)}}break;case 27:g===null&&T&4&&c_(x);case 26:case 5:md(f,x),g===null&&T&4&&S0(x),T&512&&lc(x,x.return);break;case 12:md(f,x);break;case 31:md(f,x),T&4&&my(f,x);break;case 13:md(f,x),T&4&&aC(f,x),T&64&&(f=x.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(x=Sy.bind(null,x),Uy(f,x))));break;case 22:if(T=x.memoizedState!==null||ef,!T){g=g!==null&&g.memoizedState!==null||Ta,G=ef;var J=Ta;ef=T,(Ta=g)&&!J?pd(f,x,(x.subtreeFlags&8772)!==0):md(f,x),ef=G,Ta=J}break;case 30:break;default:md(f,x)}}function $f(f){var g=f.alternate;g!==null&&(f.alternate=null,$f(g)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(g=f.stateNode,g!==null&&$u(g)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Us=null,fu=!1;function jA(f,g,x){for(x=x.child;x!==null;)E0(f,g,x),x=x.sibling}function E0(f,g,x){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(We,x)}catch{}switch(x.tag){case 26:Ta||Ia(x,g),jA(f,g,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Ta||Ia(x,g);var T=Us,G=fu;Pi(x.type)&&(Us=x.stateNode,fu=!1),jA(f,g,x),j0(x.stateNode),Us=T,fu=G;break;case 5:Ta||Ia(x,g);case 6:if(T=Us,G=fu,Us=null,jA(f,g,x),Us=T,fu=G,Us!==null)if(fu)try{(Us.nodeType===9?Us.body:Us.nodeName==="HTML"?Us.ownerDocument.body:Us).removeChild(x.stateNode)}catch(J){Po(x,g,J)}else try{Us.removeChild(x.stateNode)}catch(J){Po(x,g,J)}break;case 18:Us!==null&&(fu?(f=Us,dA(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,x.stateNode),Y0(f)):dA(Us,x.stateNode));break;case 4:T=Us,G=fu,Us=x.stateNode.containerInfo,fu=!0,jA(f,g,x),Us=T,fu=G;break;case 0:case 11:case 14:case 15:Jd(2,x,g),Ta||Jd(4,x,g),jA(f,g,x);break;case 1:Ta||(Ia(x,g),T=x.stateNode,typeof T.componentWillUnmount=="function"&&Zg(x,g,T)),jA(f,g,x);break;case 21:jA(f,g,x);break;case 22:Ta=(T=Ta)||x.memoizedState!==null,jA(f,g,x),Ta=T;break;default:jA(f,g,x)}}function my(f,g){if(g.memoizedState===null&&(f=g.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{Y0(f)}catch(x){Po(g,g.return,x)}}}function aC(f,g){if(g.memoizedState===null&&(f=g.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{Y0(f)}catch(x){Po(g,g.return,x)}}function Xg(f){switch(f.tag){case 31:case 13:case 19:var g=f.stateNode;return g===null&&(g=f.stateNode=new sC),g;case 22:return f=f.stateNode,g=f._retryCache,g===null&&(g=f._retryCache=new sC),g;default:throw Error(i(435,f.tag))}}function B0(f,g){var x=Xg(f);g.forEach(function(T){if(!x.has(T)){x.add(T);var G=h3.bind(null,f,T);T.then(G,G)}})}function yl(f,g){var x=g.deletions;if(x!==null)for(var T=0;T<x.length;T++){var G=x[T],J=f,xe=g,qe=xe;e:for(;qe!==null;){switch(qe.tag){case 27:if(Pi(qe.type)){Us=qe.stateNode,fu=!1;break e}break;case 5:Us=qe.stateNode,fu=!1;break e;case 3:case 4:Us=qe.stateNode.containerInfo,fu=!0;break e}qe=qe.return}if(Us===null)throw Error(i(160));E0(J,xe,G),Us=null,fu=!1,J=G.alternate,J!==null&&(J.return=null),G.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)np(g,f),g=g.sibling}var Fc=null;function np(f,g){var x=f.alternate,T=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:yl(g,f),ss(f),T&4&&(Jd(3,f,f.return),w0(3,f),Jd(5,f,f.return));break;case 1:yl(g,f),ss(f),T&512&&(Ta||x===null||Ia(x,x.return)),T&64&&ef&&(f=f.updateQueue,f!==null&&(T=f.callbacks,T!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?T:x.concat(T))));break;case 26:var G=Fc;if(yl(g,f),ss(f),T&512&&(Ta||x===null||Ia(x,x.return)),T&4){var J=x!==null?x.memoizedState:null;if(T=f.memoizedState,x===null)if(T===null)if(f.stateNode===null){e:{T=f.type,x=f.memoizedProps,G=G.ownerDocument||G;t:switch(T){case"title":J=G.getElementsByTagName("title")[0],(!J||J[Hi]||J[lo]||J.namespaceURI==="http://www.w3.org/2000/svg"||J.hasAttribute("itemprop"))&&(J=G.createElement(T),G.head.insertBefore(J,G.querySelector("head > title"))),Ra(J,T,x),J[lo]=f,Lo(J),T=J;break e;case"link":var xe=zy("link","href",G).get(T+(x.href||""));if(xe){for(var qe=0;qe<xe.length;qe++)if(J=xe[qe],J.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&J.getAttribute("rel")===(x.rel==null?null:x.rel)&&J.getAttribute("title")===(x.title==null?null:x.title)&&J.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){xe.splice(qe,1);break t}}J=G.createElement(T),Ra(J,T,x),G.head.appendChild(J);break;case"meta":if(xe=zy("meta","content",G).get(T+(x.content||""))){for(qe=0;qe<xe.length;qe++)if(J=xe[qe],J.getAttribute("content")===(x.content==null?null:""+x.content)&&J.getAttribute("name")===(x.name==null?null:x.name)&&J.getAttribute("property")===(x.property==null?null:x.property)&&J.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&J.getAttribute("charset")===(x.charSet==null?null:x.charSet)){xe.splice(qe,1);break t}}J=G.createElement(T),Ra(J,T,x),G.head.appendChild(J);break;default:throw Error(i(468,T))}J[lo]=f,Lo(J),T=J}f.stateNode=T}else jy(G,f.type,f.stateNode);else f.stateNode=S_(G,T,f.memoizedProps);else J!==T?(J===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):J.count--,T===null?jy(G,f.type,f.stateNode):S_(G,T,f.memoizedProps)):T===null&&f.stateNode!==null&&dy(f,f.memoizedProps,x.memoizedProps)}break;case 27:yl(g,f),ss(f),T&512&&(Ta||x===null||Ia(x,x.return)),x!==null&&T&4&&dy(f,f.memoizedProps,x.memoizedProps);break;case 5:if(yl(g,f),ss(f),T&512&&(Ta||x===null||Ia(x,x.return)),f.flags&32){G=f.stateNode;try{Bo(G,"")}catch(Si){Po(f,f.return,Si)}}T&4&&f.stateNode!=null&&(G=f.memoizedProps,dy(f,G,x!==null?x.memoizedProps:G)),T&1024&&(oC=!0);break;case 6:if(yl(g,f),ss(f),T&4){if(f.stateNode===null)throw Error(i(162));T=f.memoizedProps,x=f.stateNode;try{x.nodeValue=T}catch(Si){Po(f,f.return,Si)}}break;case 3:if(om=null,G=Fc,Fc=N0(g.containerInfo),yl(g,f),Fc=G,ss(f),T&4&&x!==null&&x.memoizedState.isDehydrated)try{Y0(g.containerInfo)}catch(Si){Po(f,f.return,Si)}oC&&(oC=!1,A_(f));break;case 4:T=Fc,Fc=N0(f.stateNode.containerInfo),yl(g,f),ss(f),Fc=T;break;case 12:yl(g,f),ss(f);break;case 31:yl(g,f),ss(f),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,B0(f,T)));break;case 13:yl(g,f),ss(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(op=oi()),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,B0(f,T)));break;case 22:G=f.memoizedState!==null;var xt=x!==null&&x.memoizedState!==null,Zt=ef,un=Ta;if(ef=Zt||G,Ta=un||xt,yl(g,f),Ta=un,ef=Zt,ss(f),T&8192)e:for(g=f.stateNode,g._visibility=G?g._visibility&-2:g._visibility|1,G&&(x===null||xt||ef||Ta||uA(f)),x=null,g=f;;){if(g.tag===5||g.tag===26){if(x===null){xt=x=g;try{if(J=xt.stateNode,G)xe=J.style,typeof xe.setProperty=="function"?xe.setProperty("display","none","important"):xe.display="none";else{qe=xt.stateNode;var yn=xt.memoizedProps.style,Jt=yn!=null&&yn.hasOwnProperty("display")?yn.display:null;qe.style.display=Jt==null||typeof Jt=="boolean"?"":(""+Jt).trim()}}catch(Si){Po(xt,xt.return,Si)}}}else if(g.tag===6){if(x===null){xt=g;try{xt.stateNode.nodeValue=G?"":xt.memoizedProps}catch(Si){Po(xt,xt.return,Si)}}}else if(g.tag===18){if(x===null){xt=g;try{var on=xt.stateNode;G?vl(on,!0):vl(xt.stateNode,!1)}catch(Si){Po(xt,xt.return,Si)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===f)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break e;for(;g.sibling===null;){if(g.return===null||g.return===f)break e;x===g&&(x=null),g=g.return}x===g&&(x=null),g.sibling.return=g.return,g=g.sibling}T&4&&(T=f.updateQueue,T!==null&&(x=T.retryQueue,x!==null&&(T.retryQueue=null,B0(f,x))));break;case 19:yl(g,f),ss(f),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,B0(f,T)));break;case 30:break;case 21:break;default:yl(g,f),ss(f)}}function ss(f){var g=f.flags;if(g&2){try{for(var x,T=f.return;T!==null;){if(u_(T)){x=T;break}T=T.return}if(x==null)throw Error(i(160));switch(x.tag){case 27:var G=x.stateNode,J=iC(f);fy(f,J,G);break;case 5:var xe=x.stateNode;x.flags&32&&(Bo(xe,""),x.flags&=-33);var qe=iC(f);fy(f,qe,xe);break;case 3:case 4:var xt=x.stateNode.containerInfo,Zt=iC(f);rC(f,Zt,xt);break;default:throw Error(i(161))}}catch(un){Po(f,f.return,un)}f.flags&=-3}g&4096&&(f.flags&=-4097)}function A_(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var g=f;A_(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),f=f.sibling}}function md(f,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Vs(f,g.alternate,g),g=g.sibling}function uA(f){for(f=f.child;f!==null;){var g=f;switch(g.tag){case 0:case 11:case 14:case 15:Jd(4,g,g.return),uA(g);break;case 1:Ia(g,g.return);var x=g.stateNode;typeof x.componentWillUnmount=="function"&&Zg(g,g.return,x),uA(g);break;case 27:j0(g.stateNode);case 26:case 5:Ia(g,g.return),uA(g);break;case 22:g.memoizedState===null&&uA(g);break;case 30:uA(g);break;default:uA(g)}f=f.sibling}}function pd(f,g,x){for(x=x&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var T=g.alternate,G=f,J=g,xe=J.flags;switch(J.tag){case 0:case 11:case 15:pd(G,J,x),w0(4,J);break;case 1:if(pd(G,J,x),T=J,G=T.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(Zt){Po(T,T.return,Zt)}if(T=J,G=T.updateQueue,G!==null){var qe=T.stateNode;try{var xt=G.shared.hiddenCallbacks;if(xt!==null)for(G.shared.hiddenCallbacks=null,G=0;G<xt.length;G++)rc(xt[G],qe)}catch(Zt){Po(T,T.return,Zt)}}x&&xe&64&&Vf(J),lc(J,J.return);break;case 27:c_(J);case 26:case 5:pd(G,J,x),x&&T===null&&xe&4&&S0(J),lc(J,J.return);break;case 12:pd(G,J,x);break;case 31:pd(G,J,x),x&&xe&4&&my(G,J);break;case 13:pd(G,J,x),x&&xe&4&&aC(G,J);break;case 22:J.memoizedState===null&&pd(G,J,x),lc(J,J.return);break;case 30:break;default:pd(G,J,x)}g=g.sibling}}function py(f,g){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(f=g.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&Fl(x))}function ip(f,g){f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&Fl(f))}function cA(f,g,x,T){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)lC(f,g,x,T),g=g.sibling}function lC(f,g,x,T){var G=g.flags;switch(g.tag){case 0:case 11:case 15:cA(f,g,x,T),G&2048&&w0(9,g);break;case 1:cA(f,g,x,T);break;case 3:cA(f,g,x,T),G&2048&&(f=null,g.alternate!==null&&(f=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==f&&(g.refCount++,f!=null&&Fl(f)));break;case 12:if(G&2048){cA(f,g,x,T),f=g.stateNode;try{var J=g.memoizedProps,xe=J.id,qe=J.onPostCommit;typeof qe=="function"&&qe(xe,g.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(xt){Po(g,g.return,xt)}}else cA(f,g,x,T);break;case 31:cA(f,g,x,T);break;case 13:cA(f,g,x,T);break;case 23:break;case 22:J=g.stateNode,xe=g.alternate,g.memoizedState!==null?J._visibility&2?cA(f,g,x,T):Jg(f,g):J._visibility&2?cA(f,g,x,T):(J._visibility|=2,tf(f,g,x,T,(g.subtreeFlags&10256)!==0||!1)),G&2048&&py(xe,g);break;case 24:cA(f,g,x,T),G&2048&&ip(g.alternate,g);break;default:cA(f,g,x,T)}}function tf(f,g,x,T,G){for(G=G&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var J=f,xe=g,qe=x,xt=T,Zt=xe.flags;switch(xe.tag){case 0:case 11:case 15:tf(J,xe,qe,xt,G),w0(8,xe);break;case 23:break;case 22:var un=xe.stateNode;xe.memoizedState!==null?un._visibility&2?tf(J,xe,qe,xt,G):Jg(J,xe):(un._visibility|=2,tf(J,xe,qe,xt,G)),G&&Zt&2048&&py(xe.alternate,xe);break;case 24:tf(J,xe,qe,xt,G),G&&Zt&2048&&ip(xe.alternate,xe);break;default:tf(J,xe,qe,xt,G)}g=g.sibling}}function Jg(f,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var x=f,T=g,G=T.flags;switch(T.tag){case 22:Jg(x,T),G&2048&&py(T.alternate,T);break;case 24:Jg(x,T),G&2048&&ip(T.alternate,T);break;default:Jg(x,T)}g=g.sibling}}var e1=8192;function O0(f,g,x){if(f.subtreeFlags&e1)for(f=f.child;f!==null;)h_(f,g,x),f=f.sibling}function h_(f,g,x){switch(f.tag){case 26:O0(f,g,x),f.flags&e1&&f.memoizedState!==null&&fp(x,Fc,f.memoizedState,f.memoizedProps);break;case 5:O0(f,g,x);break;case 3:case 4:var T=Fc;Fc=N0(f.stateNode.containerInfo),O0(f,g,x),Fc=T;break;case 22:f.memoizedState===null&&(T=f.alternate,T!==null&&T.memoizedState!==null?(T=e1,e1=16777216,O0(f,g,x),e1=T):O0(f,g,x));break;default:O0(f,g,x)}}function d_(f){var g=f.alternate;if(g!==null&&(f=g.child,f!==null)){g.child=null;do g=f.sibling,f.sibling=null,f=g;while(f!==null)}}function nf(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var x=0;x<g.length;x++){var T=g[x];ka=T,m_(T,f)}d_(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)f_(f),f=f.sibling}function f_(f){switch(f.tag){case 0:case 11:case 15:nf(f),f.flags&2048&&Jd(9,f,f.return);break;case 3:nf(f);break;case 12:nf(f);break;case 22:var g=f.stateNode;f.memoizedState!==null&&g._visibility&2&&(f.return===null||f.return.tag!==13)?(g._visibility&=-3,t1(f)):nf(f);break;default:nf(f)}}function t1(f){var g=f.deletions;if((f.flags&16)!==0){if(g!==null)for(var x=0;x<g.length;x++){var T=g[x];ka=T,m_(T,f)}d_(f)}for(f=f.child;f!==null;){switch(g=f,g.tag){case 0:case 11:case 15:Jd(8,g,g.return),t1(g);break;case 22:x=g.stateNode,x._visibility&2&&(x._visibility&=-3,t1(g));break;default:t1(g)}f=f.sibling}}function m_(f,g){for(;ka!==null;){var x=ka;switch(x.tag){case 0:case 11:case 15:Jd(8,x,g);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var T=x.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:Fl(x.memoizedState.cache)}if(T=x.child,T!==null)T.return=x,ka=T;else e:for(x=f;ka!==null;){T=ka;var G=T.sibling,J=T.return;if($f(T),T===x){ka=null;break e}if(G!==null){G.return=J,ka=G;break e}ka=J}}}var s3={getCacheForType:function(f){var g=ca(Ds),x=g.data.get(f);return x===void 0&&(x=f(),g.data.set(f,x)),x},cacheSignal:function(){return ca(Ds).controller.signal}},a3=typeof WeakMap=="function"?WeakMap:Map,Do=0,bs=null,Wr=null,Kr=0,No=0,AA=null,Hf=!1,rp=!1,gy=!1,xh=0,ma=0,NA=0,Zf=0,uC=0,hA=0,I0=0,n1=null,zc=null,yy=!1,op=0,cC=0,Xf=1/0,i1=null,Jf=null,Da=0,em=null,sp=null,rf=0,AC=0,hC=null,dC=null,r1=0,fC=null;function Ro(){return(Do&2)!==0&&Kr!==0?Kr&-Kr:Ee.T!==null?Nl():rr()}function T0(){if(hA===0)if((Kr&536870912)===0||Lr){var f=bn;bn<<=1,(bn&3932160)===0&&(bn=262144),hA=f}else hA=536870912;return f=lu.current,f!==null&&(f.flags|=32),hA}function jc(f,g,x){(f===bs&&(No===2||No===9)||f.cancelPendingCommit!==null)&&(Mh(f,0),of(f,Kr,hA,!1)),qi(f,x),((Do&2)===0||f!==bs)&&(f===bs&&((Do&2)===0&&(Zf|=x),ma===4&&of(f,Kr,hA,!1)),Sh(f))}function p_(f,g,x){if((Do&6)!==0)throw Error(i(327));var T=!x&&(g&127)===0&&(g&f.expiredLanes)===0||ji(f,g),G=T?u3(f,g):by(f,g,!0),J=T;do{if(G===0){rp&&!T&&of(f,g,0,!1);break}else{if(x=f.current.alternate,J&&!pC(x)){G=by(f,g,!1),J=!1;continue}if(G===2){if(J=g,f.errorRecoveryDisabledLanes&J)var xe=0;else xe=f.pendingLanes&-536870913,xe=xe!==0?xe:xe&536870912?536870912:0;if(xe!==0){g=xe;e:{var qe=f;G=n1;var xt=qe.current.memoizedState.isDehydrated;if(xt&&(Mh(qe,xe).flags|=256),xe=by(qe,xe,!1),xe!==2){if(gy&&!xt){qe.errorRecoveryDisabledLanes|=J,Zf|=J,G=4;break e}J=zc,zc=G,J!==null&&(zc===null?zc=J:zc.push.apply(zc,J))}G=xe}if(J=!1,G!==2)continue}}if(G===1){Mh(f,0),of(f,g,0,!0);break}e:{switch(T=f,J=G,J){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:of(T,g,hA,!Hf);break e;case 2:zc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(G=op+300-oi(),10<G)){if(of(T,g,hA,!Hf),xi(T,0,!0)!==0)break e;rf=g,T.timeoutHandle=Py(mC.bind(null,T,x,zc,i1,yy,g,hA,Zf,I0,Hf,J,"Throttled",-0,0),G);break e}mC(T,x,zc,i1,yy,g,hA,Zf,I0,Hf,J,null,-0,0)}}break}while(!0);Sh(f)}function mC(f,g,x,T,G,J,xe,qe,xt,Zt,un,yn,Jt,on){if(f.timeoutHandle=-1,yn=g.subtreeFlags,yn&8192||(yn&16785408)===16785408){yn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ja},h_(g,J,yn);var Si=(J&62914560)===J?op-oi():(J&4194048)===J?cC-oi():0;if(Si=E_(yn,Si),Si!==null){rf=J,f.cancelPendingCommit=Si(v_.bind(null,f,g,J,x,T,G,xe,qe,xt,un,yn,null,Jt,on)),of(f,J,xe,!Zt);return}}v_(f,g,J,x,T,G,xe,qe,xt)}function pC(f){for(var g=f;;){var x=g.tag;if((x===0||x===11||x===15)&&g.flags&16384&&(x=g.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var T=0;T<x.length;T++){var G=x[T],J=G.getSnapshot;G=G.value;try{if(!Ts(J(),G))return!1}catch{return!1}}if(x=g.child,g.subtreeFlags&16384&&x!==null)x.return=g,g=x;else{if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function of(f,g,x,T){g&=~uC,g&=~Zf,f.suspendedLanes|=g,f.pingedLanes&=~g,T&&(f.warmLanes|=g),T=f.expirationTimes;for(var G=g;0<G;){var J=31-Ye(G),xe=1<<J;T[J]=-1,G&=~xe}x!==0&&Vi(f,x,g)}function o1(){return(Do&6)===0?(up(0),!1):!0}function vy(){if(Wr!==null){if(No===0)var f=Wr.return;else f=Wr,kA=hr=null,Ch(f),Tc=null,nc=0,f=Wr;for(;f!==null;)hy(f.alternate,f),f=f.return;Wr=null}}function Mh(f,g){var x=f.timeoutHandle;x!==-1&&(f.timeoutHandle=-1,m3(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),rf=0,vy(),bs=f,Wr=x=Rl(f.current,null),Kr=g,No=0,AA=null,Hf=!1,rp=ji(f,g),gy=!1,I0=hA=uC=Zf=NA=ma=0,zc=n1=null,yy=!1,(g&8)!==0&&(g|=g&32);var T=f.entangledLanes;if(T!==0)for(f=f.entanglements,T&=g;0<T;){var G=31-Ye(T),J=1<<G;g|=f[G],T&=~J}return xh=g,Iu(),x}function Cy(f,g){Ri=null,Ee.H=rs,g===jn||g===ph?(g=m0(),No=3):g===jf?(g=m0(),No=4):No=g===Qg?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,AA=g,Wr===null&&(ma=1,cd(f,Pl(g,f.current)))}function k0(){var f=lu.current;return f===null?!0:(Kr&4194048)===Kr?rl===null:(Kr&62914560)===Kr||(Kr&536870912)!==0?f===rl:!1}function gC(){var f=Ee.H;return Ee.H=rs,f===null?rs:f}function s1(){var f=Ee.A;return Ee.A=s3,f}function sf(){ma=4,Hf||(Kr&4194048)!==Kr&&lu.current!==null||(rp=!0),(NA&134217727)===0&&(Zf&134217727)===0||bs===null||of(bs,Kr,hA,!1)}function by(f,g,x){var T=Do;Do|=2;var G=gC(),J=s1();(bs!==f||Kr!==g)&&(i1=null,Mh(f,g)),g=!1;var xe=ma;e:do try{if(No!==0&&Wr!==null){var qe=Wr,xt=AA;switch(No){case 8:vy(),xe=6;break e;case 3:case 2:case 9:case 6:lu.current===null&&(g=!0);var Zt=No;if(No=0,AA=null,D0(f,qe,xt,Zt),x&&rp){xe=0;break e}break;default:Zt=No,No=0,AA=null,D0(f,qe,xt,Zt)}}l3(),xe=ma;break}catch(un){Cy(f,un)}while(!0);return g&&f.shellSuspendCounter++,kA=hr=null,Do=T,Ee.H=G,Ee.A=J,Wr===null&&(bs=null,Kr=0,Iu()),xe}function l3(){for(;Wr!==null;)g_(Wr)}function u3(f,g){var x=Do;Do|=2;var T=gC(),G=s1();bs!==f||Kr!==g?(i1=null,Xf=oi()+500,Mh(f,g)):rp=ji(f,g);e:do try{if(No!==0&&Wr!==null){g=Wr;var J=AA;t:switch(No){case 1:No=0,AA=null,D0(f,g,J,1);break;case 2:case 9:if(td(J)){No=0,AA=null,y_(g);break}g=function(){No!==2&&No!==9||bs!==f||(No=7),Sh(f)},J.then(g,g);break e;case 3:No=7;break e;case 4:No=5;break e;case 7:td(J)?(No=0,AA=null,y_(g)):(No=0,AA=null,D0(f,g,J,7));break;case 5:var xe=null;switch(Wr.tag){case 26:xe=Wr.memoizedState;case 5:case 27:var qe=Wr;if(xe?kC(xe):qe.stateNode.complete){No=0,AA=null;var xt=qe.sibling;if(xt!==null)Wr=xt;else{var Zt=qe.return;Zt!==null?(Wr=Zt,_y(Zt)):Wr=null}break t}}No=0,AA=null,D0(f,g,J,5);break;case 6:No=0,AA=null,D0(f,g,J,6);break;case 8:vy(),ma=6;break e;default:throw Error(i(462))}}c3();break}catch(un){Cy(f,un)}while(!0);return kA=hr=null,Ee.H=T,Ee.A=G,Do=x,Wr!==null?0:(bs=null,Kr=0,Iu(),ma)}function c3(){for(;Wr!==null&&!Ln();)g_(Wr)}function g_(f){var g=l_(f.alternate,f,xh);f.memoizedProps=f.pendingProps,g===null?_y(f):Wr=g}function y_(f){var g=f,x=g.alternate;switch(g.tag){case 15:case 0:g=$v(x,g,g.pendingProps,g.type,void 0,Kr);break;case 11:g=$v(x,g,g.pendingProps,g.type.render,g.ref,Kr);break;case 5:Ch(g);default:hy(x,g),g=Wr=oy(g,xh),g=l_(x,g,xh)}f.memoizedProps=f.pendingProps,g===null?_y(f):Wr=g}function D0(f,g,x,T){kA=hr=null,Ch(g),Tc=null,nc=0;var G=g.return;try{if(Wg(f,G,g,x,Kr)){ma=1,cd(f,Pl(x,f.current)),Wr=null;return}}catch(J){if(G!==null)throw Wr=G,J;ma=1,cd(f,Pl(x,f.current)),Wr=null;return}g.flags&32768?(Lr||T===1?f=!0:rp||(Kr&536870912)!==0?f=!1:(Hf=f=!0,(T===2||T===9||T===3||T===6)&&(T=lu.current,T!==null&&T.tag===13&&(T.flags|=16384))),a1(g,f)):_y(g)}function _y(f){var g=f;do{if((g.flags&32768)!==0){a1(g,Hf);return}f=g.return;var x=nC(g.alternate,g,xh);if(x!==null){Wr=x;return}if(g=g.sibling,g!==null){Wr=g;return}Wr=g=f}while(g!==null);ma===0&&(ma=5)}function a1(f,g){do{var x=M0(f.alternate,f);if(x!==null){x.flags&=32767,Wr=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!g&&(f=f.sibling,f!==null)){Wr=f;return}Wr=f=x}while(f!==null);ma=6,Wr=null}function v_(f,g,x,T,G,J,xe,qe,xt){f.cancelPendingCommit=null;do ap();while(Da!==0);if((Do&6)!==0)throw Error(i(327));if(g!==null){if(g===f.current)throw Error(i(177));if(J=g.lanes|g.childLanes,J|=EA,Ui(f,x,J,xe,qe,xt),f===bs&&(Wr=bs=null,Kr=0),sp=g,em=f,rf=x,AC=J,hC=G,dC=T,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,d3(j,function(){return wy(),null})):(f.callbackNode=null,f.callbackPriority=0),T=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||T){T=Ee.T,Ee.T=null,G=Ve.p,Ve.p=2,xe=Do,Do|=4;try{o3(f,g,x)}finally{Do=xe,Ve.p=G,Ee.T=T}}Da=1,yC(),vC(),xy()}}function yC(){if(Da===1){Da=0;var f=em,g=sp,x=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||x){x=Ee.T,Ee.T=null;var T=Ve.p;Ve.p=2;var G=Do;Do|=4;try{np(g,f);var J=Dy,xe=l0(f.containerInfo),qe=J.focusedElem,xt=J.selectionRange;if(xe!==qe&&qe&&qe.ownerDocument&&a0(qe.ownerDocument.documentElement,qe)){if(xt!==null&&Nm(qe)){var Zt=xt.start,un=xt.end;if(un===void 0&&(un=Zt),"selectionStart"in qe)qe.selectionStart=Zt,qe.selectionEnd=Math.min(un,qe.value.length);else{var yn=qe.ownerDocument||document,Jt=yn&&yn.defaultView||window;if(Jt.getSelection){var on=Jt.getSelection(),Si=qe.textContent.length,ir=Math.min(xt.start,Si),Go=xt.end===void 0?ir:Math.min(xt.end,Si);!on.extend&&ir>Go&&(xe=Go,Go=ir,ir=xe);var Lt=jm(qe,ir),kt=jm(qe,Go);if(Lt&&kt&&(on.rangeCount!==1||on.anchorNode!==Lt.node||on.anchorOffset!==Lt.offset||on.focusNode!==kt.node||on.focusOffset!==kt.offset)){var Vt=yn.createRange();Vt.setStart(Lt.node,Lt.offset),on.removeAllRanges(),ir>Go?(on.addRange(Vt),on.extend(kt.node,kt.offset)):(Vt.setEnd(kt.node,kt.offset),on.addRange(Vt))}}}}for(yn=[],on=qe;on=on.parentNode;)on.nodeType===1&&yn.push({element:on,left:on.scrollLeft,top:on.scrollTop});for(typeof qe.focus=="function"&&qe.focus(),qe=0;qe<yn.length;qe++){var dn=yn[qe];dn.element.scrollLeft=dn.left,dn.element.scrollTop=dn.top}}q0=!!z0,Dy=z0=null}finally{Do=G,Ve.p=T,Ee.T=x}}f.current=g,Da=2}}function vC(){if(Da===2){Da=0;var f=em,g=sp,x=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||x){x=Ee.T,Ee.T=null;var T=Ve.p;Ve.p=2;var G=Do;Do|=4;try{Vs(f,g.alternate,g)}finally{Do=G,Ve.p=T,Ee.T=x}}Da=3}}function xy(){if(Da===4||Da===3){Da=0,In();var f=em,g=sp,x=rf,T=dC;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Da=5:(Da=0,sp=em=null,My(f,f.pendingLanes));var G=f.pendingLanes;if(G===0&&(Jf=null),cn(x),g=g.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(We,g,void 0,(g.current.flags&128)===128)}catch{}if(T!==null){g=Ee.T,G=Ve.p,Ve.p=2,Ee.T=null;try{for(var J=f.onRecoverableError,xe=0;xe<T.length;xe++){var qe=T[xe];J(qe.value,{componentStack:qe.stack})}}finally{Ee.T=g,Ve.p=G}}(rf&3)!==0&&ap(),Sh(f),G=f.pendingLanes,(x&261930)!==0&&(G&42)!==0?f===fC?r1++:(r1=0,fC=f):r1=0,up(0)}}function My(f,g){(f.pooledCacheLanes&=g)===0&&(g=f.pooledCache,g!=null&&(f.pooledCache=null,Fl(g)))}function ap(){return yC(),vC(),xy(),wy()}function wy(){if(Da!==5)return!1;var f=em,g=AC;AC=0;var x=cn(rf),T=Ee.T,G=Ve.p;try{Ve.p=32>x?32:x,Ee.T=null,x=hC,hC=null;var J=em,xe=rf;if(Da=0,sp=em=null,rf=0,(Do&6)!==0)throw Error(i(331));var qe=Do;if(Do|=4,f_(J.current),lC(J,J.current,xe,x),Do=qe,up(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(We,J)}catch{}return!0}finally{Ve.p=G,Ee.T=T,My(f,g)}}function gd(f,g,x){g=Pl(x,g),g=Ad(f.stateNode,g,2),f=Dc(f,g,2),f!==null&&(qi(f,2),Sh(f))}function Po(f,g,x){if(f.tag===3)gd(f,f,x);else for(;g!==null;){if(g.tag===3){gd(g,f,x);break}else if(g.tag===1){var T=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Jf===null||!Jf.has(T))){f=Pl(x,f),x=Kc(2),T=Dc(g,x,2),T!==null&&(qf(x,T,g,f),qi(T,2),Sh(T));break}}g=g.return}}function l1(f,g,x){var T=f.pingCache;if(T===null){T=f.pingCache=new a3;var G=new Set;T.set(g,G)}else G=T.get(g),G===void 0&&(G=new Set,T.set(g,G));G.has(x)||(gy=!0,G.add(x),f=A3.bind(null,f,g,x),g.then(f,f))}function A3(f,g,x){var T=f.pingCache;T!==null&&T.delete(g),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,bs===f&&(Kr&x)===x&&(ma===4||ma===3&&(Kr&62914560)===Kr&&300>oi()-op?(Do&2)===0&&Mh(f,0):uC|=x,I0===Kr&&(I0=0)),Sh(f)}function R0(f,g){g===0&&(g=Zn()),f=ru(f,g),f!==null&&(qi(f,g),Sh(f))}function Sy(f){var g=f.memoizedState,x=0;g!==null&&(x=g.retryLane),R0(f,x)}function h3(f,g){var x=0;switch(f.tag){case 31:case 13:var T=f.stateNode,G=f.memoizedState;G!==null&&(x=G.retryLane);break;case 19:T=f.stateNode;break;case 22:T=f.stateNode._retryCache;break;default:throw Error(i(314))}T!==null&&T.delete(g),R0(f,x)}function d3(f,g){return Mi(f,g)}var P0=null,lp=null,Ey=!1,u1=!1,wh=!1,uc=0;function Sh(f){f!==lp&&f.next===null&&(lp===null?P0=lp=f:lp=lp.next=f),u1=!0,Ey||(Ey=!0,CC())}function up(f,g){if(!wh&&u1){wh=!0;do for(var x=!1,T=P0;T!==null;){if(f!==0){var G=T.pendingLanes;if(G===0)var J=0;else{var xe=T.suspendedLanes,qe=T.pingedLanes;J=(1<<31-Ye(42|f)+1)-1,J&=G&~(xe&~qe),J=J&201326741?J&201326741|1:J?J|2:0}J!==0&&(x=!0,Oy(T,J))}else J=Kr,J=xi(T,T===bs?J:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),(J&3)===0||ji(T,J)||(x=!0,Oy(T,J));T=T.next}while(x);wh=!1}}function f3(){c1()}function c1(){u1=Ey=!1;var f=0;uc!==0&&wC()&&(f=uc);for(var g=oi(),x=null,T=P0;T!==null;){var G=T.next,J=By(T,g);J===0?(T.next=null,x===null?P0=G:x.next=G,G===null&&(lp=x)):(x=T,(f!==0||(J&3)!==0)&&(u1=!0)),T=G}Da!==0&&Da!==5||up(f),uc!==0&&(uc=0)}function By(f,g){for(var x=f.suspendedLanes,T=f.pingedLanes,G=f.expirationTimes,J=f.pendingLanes&-62914561;0<J;){var xe=31-Ye(J),qe=1<<xe,xt=G[xe];xt===-1?((qe&x)===0||(qe&T)!==0)&&(G[xe]=Qn(qe,g)):xt<=g&&(f.expiredLanes|=qe),J&=~qe}if(g=bs,x=Kr,x=xi(f,f===g?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),T=f.callbackNode,x===0||f===g&&(No===2||No===9)||f.cancelPendingCommit!==null)return T!==null&&T!==null&&Fn(T),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||ji(f,x)){if(g=x&-x,g===f.callbackPriority)return g;switch(T!==null&&Fn(T),cn(x)){case 2:case 8:x=$;break;case 32:x=j;break;case 268435456:x=Ae;break;default:x=j}return T=C_.bind(null,f),x=Mi(x,T),f.callbackPriority=g,f.callbackNode=x,g}return T!==null&&T!==null&&Fn(T),f.callbackPriority=2,f.callbackNode=null,2}function C_(f,g){if(Da!==0&&Da!==5)return f.callbackNode=null,f.callbackPriority=0,null;var x=f.callbackNode;if(ap()&&f.callbackNode!==x)return null;var T=Kr;return T=xi(f,f===bs?T:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),T===0?null:(p_(f,T,g),By(f,oi()),f.callbackNode!=null&&f.callbackNode===x?C_.bind(null,f):null)}function Oy(f,g){if(ap())return null;p_(f,g,!0)}function CC(){wr(function(){(Do&6)!==0?Mi(je,f3):c1()})}function Nl(){if(uc===0){var f=zl;f===0&&(f=gn,gn<<=1,(gn&261888)===0&&(gn=256)),uc=f}return uc}function bC(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:nr(""+f)}function _C(f,g){var x=g.ownerDocument.createElement("input");return x.name=g.name,x.value=g.value,f.id&&x.setAttribute("form",f.id),g.parentNode.insertBefore(x,g),f=new FormData(f),x.parentNode.removeChild(x),f}function af(f,g,x,T,G){if(g==="submit"&&x&&x.stateNode===G){var J=bC((G[Dn]||null).action),xe=T.submitter;xe&&(g=(g=xe[Dn]||null)?bC(g.formAction):xe.getAttribute("formAction"),g!==null&&(J=g,xe=null));var qe=new Rn("action","action",null,T,G);f.push({event:qe,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(uc!==0){var xt=xe?_C(G,xe):new FormData(G);jo(x,{pending:!0,data:xt,method:G.method,action:J},null,xt)}}else typeof J=="function"&&(qe.preventDefault(),xt=xe?_C(G,xe):new FormData(G),jo(x,{pending:!0,data:xt,method:G.method,action:J},J,xt))},currentTarget:G}]})}}for(var Cr=0;Cr<Gm.length;Cr++){var U0=Gm[Cr],cc=U0.toLowerCase(),qa=U0[0].toUpperCase()+U0.slice(1);Dl(cc,"on"+qa)}Dl(kl,"onAnimationEnd"),Dl(Vh,"onAnimationIteration"),Dl(u0,"onAnimationStart"),Dl("dblclick","onDoubleClick"),Dl("focusin","onFocus"),Dl("focusout","onBlur"),Dl(Sc,"onTransitionRun"),Dl($h,"onTransitionStart"),Dl(uh,"onTransitionCancel"),Dl(xr,"onTransitionEnd"),Ga("onMouseEnter",["mouseout","mouseover"]),Ga("onMouseLeave",["mouseout","mouseover"]),Ga("onPointerEnter",["pointerout","pointerover"]),Ga("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var A1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(A1));function b_(f,g){g=(g&4)!==0;for(var x=0;x<f.length;x++){var T=f[x],G=T.event;T=T.listeners;e:{var J=void 0;if(g)for(var xe=T.length-1;0<=xe;xe--){var qe=T[xe],xt=qe.instance,Zt=qe.currentTarget;if(qe=qe.listener,xt!==J&&G.isPropagationStopped())break e;J=qe,G.currentTarget=Zt;try{J(G)}catch(un){SA(un)}G.currentTarget=null,J=xt}else for(xe=0;xe<T.length;xe++){if(qe=T[xe],xt=qe.instance,Zt=qe.currentTarget,qe=qe.listener,xt!==J&&G.isPropagationStopped())break e;J=qe,G.currentTarget=Zt;try{J(G)}catch(un){SA(un)}G.currentTarget=null,J=xt}}}}function oo(f,g){var x=g[Ai];x===void 0&&(x=g[Ai]=new Set);var T=f+"__bubble";x.has(T)||(d1(g,f,2,!1),x.add(T))}function h1(f,g,x){var T=0;g&&(T|=4),d1(x,f,T,g)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Iy(f){if(!f[Eh]){f[Eh]=!0,bc.forEach(function(x){x!=="selectionchange"&&(tm.has(x)||h1(x,!1,f),h1(x,!0,f))});var g=f.nodeType===9?f:f.ownerDocument;g===null||g[Eh]||(g[Eh]=!0,h1("selectionchange",!1,g))}}function d1(f,g,x,T){switch(D_(g)){case 2:var G=LC;break;case 8:G=k_;break;default:G=sm}x=G.bind(null,g,x,f),G=void 0,!Ns||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(G=!0),T?G!==void 0?f.addEventListener(g,x,{capture:!0,passive:G}):f.addEventListener(g,x,!0):G!==void 0?f.addEventListener(g,x,{passive:G}):f.addEventListener(g,x,!1)}function Ty(f,g,x,T,G){var J=T;if((g&1)===0&&(g&2)===0&&T!==null)e:for(;;){if(T===null)return;var xe=T.tag;if(xe===3||xe===4){var qe=T.stateNode.containerInfo;if(qe===G)break;if(xe===4)for(xe=T.return;xe!==null;){var xt=xe.tag;if((xt===3||xt===4)&&xe.stateNode.containerInfo===G)return;xe=xe.return}for(;qe!==null;){if(xe=fo(qe),xe===null)return;if(xt=xe.tag,xt===5||xt===6||xt===26||xt===27){T=J=xe;continue e}qe=qe.parentNode}}T=T.return}ro(function(){var Zt=J,un=Xu(x),yn=[];e:{var Jt=Kg.get(f);if(Jt!==void 0){var on=Rn,Si=f;switch(f){case"keypress":if(ie(x)===0)break e;case"keydown":case"keyup":on=To;break;case"focusin":Si="focus",on=Ko;break;case"focusout":Si="blur",on=Ko;break;case"beforeblur":case"afterblur":on=Ko;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":on=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":on=jr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":on=Vv;break;case kl:case Vh:case u0:on=oh;break;case xr:on=i0;break;case"scroll":case"scrollend":on=Ni;break;case"wheel":on=kf;break;case"copy":case"cut":case"paste":on=gs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":on=t0;break;case"toggle":case"beforetoggle":on=Df}var ir=(g&4)!==0,Go=!ir&&(f==="scroll"||f==="scrollend"),Lt=ir?Jt!==null?Jt+"Capture":null:Jt;ir=[];for(var kt=Zt,Vt;kt!==null;){var dn=kt;if(Vt=dn.stateNode,dn=dn.tag,dn!==5&&dn!==26&&dn!==27||Vt===null||Lt===null||(dn=Xs(kt,Lt),dn!=null&&ir.push(Nc(kt,dn,Vt))),Go)break;kt=kt.return}0<ir.length&&(Jt=new on(Jt,Si,null,x,un),yn.push({event:Jt,listeners:ir}))}}if((g&7)===0){e:{if(Jt=f==="mouseover"||f==="pointerover",on=f==="mouseout"||f==="pointerout",Jt&&x!==ts&&(Si=x.relatedTarget||x.fromElement)&&(fo(Si)||Si[er]))break e;if((on||Jt)&&(Jt=un.window===un?un:(Jt=un.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,on?(Si=x.relatedTarget||x.toElement,on=Zt,Si=Si?fo(Si):null,Si!==null&&(Go=o(Si),ir=Si.tag,Si!==Go||ir!==5&&ir!==27&&ir!==6)&&(Si=null)):(on=null,Si=Zt),on!==Si)){if(ir=mr,dn="onMouseLeave",Lt="onMouseEnter",kt="mouse",(f==="pointerout"||f==="pointerover")&&(ir=t0,dn="onPointerLeave",Lt="onPointerEnter",kt="pointer"),Go=on==null?Jt:El(on),Vt=Si==null?Jt:El(Si),Jt=new ir(dn,kt+"leave",on,x,un),Jt.target=Go,Jt.relatedTarget=Vt,dn=null,fo(un)===Zt&&(ir=new ir(Lt,kt+"enter",Si,x,un),ir.target=Vt,ir.relatedTarget=Go,dn=ir),Go=dn,on&&Si)t:{for(ir=f1,Lt=on,kt=Si,Vt=0,dn=Lt;dn;dn=ir(dn))Vt++;dn=0;for(var vi=kt;vi;vi=ir(vi))dn++;for(;0<Vt-dn;)Lt=ir(Lt),Vt--;for(;0<dn-Vt;)kt=ir(kt),dn--;for(;Vt--;){if(Lt===kt||kt!==null&&Lt===kt.alternate){ir=Lt;break t}Lt=ir(Lt),kt=ir(kt)}ir=null}else ir=null;on!==null&&_s(yn,Jt,on,ir,!1),Si!==null&&Go!==null&&_s(yn,Go,Si,ir,!0)}}e:{if(Jt=Zt?El(Zt):window,on=Jt.nodeName&&Jt.nodeName.toLowerCase(),on==="select"||on==="input"&&Jt.type==="file")var xo=Wh;else if(Pm(Jt))if(Qh)xo=ry;else{xo=iy;var Gi=s0}else on=Jt.nodeName,!on||on.toLowerCase()!=="input"||Jt.type!=="checkbox"&&Jt.type!=="radio"?Zt&&Bu(Zt.elementType)&&(xo=Wh):xo=zm;if(xo&&(xo=xo(f,Zt))){Um(yn,xo,x,un);break e}Gi&&Gi(f,Jt,Zt),f==="focusout"&&Zt&&Jt.type==="number"&&Zt.memoizedProps.value!=null&&Jc(Jt,"number",Jt.value)}switch(Gi=Zt?El(Zt):window,f){case"focusin":(Pm(Gi)||Gi.contentEditable==="true")&&(Dt=Gi,ln=Zt,tn=null);break;case"focusout":tn=ln=Dt=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,yr(yn,x,un);break;case"selectionchange":if(lh)break;case"keydown":case"keyup":yr(yn,x,un)}var Tr;if(Gs)e:{switch(f){case"compositionstart":var Jr="onCompositionStart";break e;case"compositionend":Jr="onCompositionEnd";break e;case"compositionupdate":Jr="onCompositionUpdate";break e}Jr=void 0}else Mc?Wd(f,x)&&(Jr="onCompositionEnd"):f==="keydown"&&x.keyCode===229&&(Jr="onCompositionStart");Jr&&(Gd&&x.locale!=="ko"&&(Mc||Jr!=="onCompositionStart"?Jr==="onCompositionEnd"&&Mc&&(Tr=Rr()):(la=un,el="value"in la?la.value:la.textContent,Mc=!0)),Gi=L0(Zt,Jr),0<Gi.length&&(Jr=new Ou(Jr,f,null,x,un),yn.push({event:Jr,listeners:Gi}),Tr?Jr.data=Tr:(Tr=ty(x),Tr!==null&&(Jr.data=Tr)))),(Tr=Nh?Tl(f,x):o0(f,x))&&(Jr=L0(Zt,"onBeforeInput"),0<Jr.length&&(Gi=new Ou("onBeforeInput","beforeinput",null,x,un),yn.push({event:Gi,listeners:Jr}),Gi.data=Tr)),af(yn,f,Zt,x,un)}b_(yn,g)})}function Nc(f,g,x){return{instance:f,listener:g,currentTarget:x}}function L0(f,g){for(var x=g+"Capture",T=[];f!==null;){var G=f,J=G.stateNode;if(G=G.tag,G!==5&&G!==26&&G!==27||J===null||(G=Xs(f,x),G!=null&&T.unshift(Nc(f,G,J)),G=Xs(f,g),G!=null&&T.push(Nc(f,G,J))),f.tag===3)return T;f=f.return}return[]}function f1(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function _s(f,g,x,T,G){for(var J=g._reactName,xe=[];x!==null&&x!==T;){var qe=x,xt=qe.alternate,Zt=qe.stateNode;if(qe=qe.tag,xt!==null&&xt===T)break;qe!==5&&qe!==26&&qe!==27||Zt===null||(xt=Zt,G?(Zt=Xs(x,J),Zt!=null&&xe.unshift(Nc(x,Zt,xt))):G||(Zt=Xs(x,J),Zt!=null&&xe.push(Nc(x,Zt,xt)))),x=x.return}xe.length!==0&&f.push({event:g,listeners:xe})}var pa=/\r\n?/g,K0=/\u0000|\uFFFD/g;function xC(f){return(typeof f=="string"?f:""+f).replace(pa,`
`).replace(K0,"")}function ky(f,g){return g=xC(g),xC(f)===g}function as(f,g,x,T,G,J){switch(x){case"children":typeof T=="string"?g==="body"||g==="textarea"&&T===""||Bo(f,T):(typeof T=="number"||typeof T=="bigint")&&g!=="body"&&Bo(f,""+T);break;case"className":dl(f,"class",T);break;case"tabIndex":dl(f,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":dl(f,x,T);break;case"style":Is(f,T,J);break;case"data":if(g!=="object"){dl(f,"data",T);break}case"src":case"href":if(T===""&&(g!=="a"||x!=="href")){f.removeAttribute(x);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){f.removeAttribute(x);break}T=nr(""+T),f.setAttribute(x,T);break;case"action":case"formAction":if(typeof T=="function"){f.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof J=="function"&&(x==="formAction"?(g!=="input"&&as(f,g,"name",G.name,G,null),as(f,g,"formEncType",G.formEncType,G,null),as(f,g,"formMethod",G.formMethod,G,null),as(f,g,"formTarget",G.formTarget,G,null)):(as(f,g,"encType",G.encType,G,null),as(f,g,"method",G.method,G,null),as(f,g,"target",G.target,G,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){f.removeAttribute(x);break}T=nr(""+T),f.setAttribute(x,T);break;case"onClick":T!=null&&(f.onclick=Ja);break;case"onScroll":T!=null&&oo("scroll",f);break;case"onScrollEnd":T!=null&&oo("scrollend",f);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(x=T.__html,x!=null){if(G.children!=null)throw Error(i(60));f.innerHTML=x}}break;case"multiple":f.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":f.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){f.removeAttribute("xlink:href");break}x=nr(""+T),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(x,""+T):f.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(x,""):f.removeAttribute(x);break;case"capture":case"download":T===!0?f.setAttribute(x,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?f.setAttribute(x,T):f.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?f.setAttribute(x,T):f.removeAttribute(x);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?f.removeAttribute(x):f.setAttribute(x,T);break;case"popover":oo("beforetoggle",f),oo("toggle",f),Xc(f,"popover",T);break;case"xlinkActuate":Wa(f,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":Wa(f,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":Wa(f,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":Wa(f,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":Wa(f,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":Wa(f,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":Wa(f,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":Wa(f,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":Wa(f,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":Xc(f,"is",T);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=tu.get(x)||x,Xc(f,x,T))}}function Ac(f,g,x,T,G,J){switch(x){case"style":Is(f,T,J);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(x=T.__html,x!=null){if(G.children!=null)throw Error(i(60));f.innerHTML=x}}break;case"children":typeof T=="string"?Bo(f,T):(typeof T=="number"||typeof T=="bigint")&&Bo(f,""+T);break;case"onScroll":T!=null&&oo("scroll",f);break;case"onScrollEnd":T!=null&&oo("scrollend",f);break;case"onClick":T!=null&&(f.onclick=Ja);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vo.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(G=x.endsWith("Capture"),g=x.slice(2,G?x.length-7:void 0),J=f[Dn]||null,J=J!=null?J[x]:null,typeof J=="function"&&f.removeEventListener(g,J,G),typeof T=="function")){typeof J!="function"&&J!==null&&(x in f?f[x]=null:f.hasAttribute(x)&&f.removeAttribute(x)),f.addEventListener(g,T,G);break e}x in f?f[x]=T:T===!0?f.setAttribute(x,""):Xc(f,x,T)}}}function Ra(f,g,x){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oo("error",f),oo("load",f);var T=!1,G=!1,J;for(J in x)if(x.hasOwnProperty(J)){var xe=x[J];if(xe!=null)switch(J){case"src":T=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:as(f,g,J,xe,x,null)}}G&&as(f,g,"srcSet",x.srcSet,x,null),T&&as(f,g,"src",x.src,x,null);return;case"input":oo("invalid",f);var qe=J=xe=G=null,xt=null,Zt=null;for(T in x)if(x.hasOwnProperty(T)){var un=x[T];if(un!=null)switch(T){case"name":G=un;break;case"type":xe=un;break;case"checked":xt=un;break;case"defaultChecked":Zt=un;break;case"value":J=un;break;case"defaultValue":qe=un;break;case"children":case"dangerouslySetInnerHTML":if(un!=null)throw Error(i(137,g));break;default:as(f,g,T,un,x,null)}}Zl(f,J,qe,xt,Zt,xe,G,!1);return;case"select":oo("invalid",f),T=xe=J=null;for(G in x)if(x.hasOwnProperty(G)&&(qe=x[G],qe!=null))switch(G){case"value":J=qe;break;case"defaultValue":xe=qe;break;case"multiple":T=qe;default:as(f,g,G,qe,x,null)}g=J,x=xe,f.multiple=!!T,g!=null?Xl(f,!!T,g,!1):x!=null&&Xl(f,!!T,x,!0);return;case"textarea":oo("invalid",f),J=G=T=null;for(xe in x)if(x.hasOwnProperty(xe)&&(qe=x[xe],qe!=null))switch(xe){case"value":T=qe;break;case"defaultValue":G=qe;break;case"children":J=qe;break;case"dangerouslySetInnerHTML":if(qe!=null)throw Error(i(91));break;default:as(f,g,xe,qe,x,null)}ms(f,T,G,J);return;case"option":for(xt in x)x.hasOwnProperty(xt)&&(T=x[xt],T!=null)&&(xt==="selected"?f.selected=T&&typeof T!="function"&&typeof T!="symbol":as(f,g,xt,T,x,null));return;case"dialog":oo("beforetoggle",f),oo("toggle",f),oo("cancel",f),oo("close",f);break;case"iframe":case"object":oo("load",f);break;case"video":case"audio":for(T=0;T<A1.length;T++)oo(A1[T],f);break;case"image":oo("error",f),oo("load",f);break;case"details":oo("toggle",f);break;case"embed":case"source":case"link":oo("error",f),oo("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Zt in x)if(x.hasOwnProperty(Zt)&&(T=x[Zt],T!=null))switch(Zt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:as(f,g,Zt,T,x,null)}return;default:if(Bu(g)){for(un in x)x.hasOwnProperty(un)&&(T=x[un],T!==void 0&&Ac(f,g,un,T,x,void 0));return}}for(qe in x)x.hasOwnProperty(qe)&&(T=x[qe],T!=null&&as(f,g,qe,T,x,null))}function m1(f,g,x,T){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,J=null,xe=null,qe=null,xt=null,Zt=null,un=null;for(on in x){var yn=x[on];if(x.hasOwnProperty(on)&&yn!=null)switch(on){case"checked":break;case"value":break;case"defaultValue":xt=yn;default:T.hasOwnProperty(on)||as(f,g,on,null,T,yn)}}for(var Jt in T){var on=T[Jt];if(yn=x[Jt],T.hasOwnProperty(Jt)&&(on!=null||yn!=null))switch(Jt){case"type":J=on;break;case"name":G=on;break;case"checked":Zt=on;break;case"defaultChecked":un=on;break;case"value":xe=on;break;case"defaultValue":qe=on;break;case"children":case"dangerouslySetInnerHTML":if(on!=null)throw Error(i(137,g));break;default:on!==yn&&as(f,g,Jt,on,T,yn)}}xc(f,xe,qe,xt,Zt,un,J,G);return;case"select":on=xe=qe=Jt=null;for(J in x)if(xt=x[J],x.hasOwnProperty(J)&&xt!=null)switch(J){case"value":break;case"multiple":on=xt;default:T.hasOwnProperty(J)||as(f,g,J,null,T,xt)}for(G in T)if(J=T[G],xt=x[G],T.hasOwnProperty(G)&&(J!=null||xt!=null))switch(G){case"value":Jt=J;break;case"defaultValue":qe=J;break;case"multiple":xe=J;default:J!==xt&&as(f,g,G,J,T,xt)}g=qe,x=xe,T=on,Jt!=null?Xl(f,!!x,Jt,!1):!!T!=!!x&&(g!=null?Xl(f,!!x,g,!0):Xl(f,!!x,x?[]:"",!1));return;case"textarea":on=Jt=null;for(qe in x)if(G=x[qe],x.hasOwnProperty(qe)&&G!=null&&!T.hasOwnProperty(qe))switch(qe){case"value":break;case"children":break;default:as(f,g,qe,null,T,G)}for(xe in T)if(G=T[xe],J=x[xe],T.hasOwnProperty(xe)&&(G!=null||J!=null))switch(xe){case"value":Jt=G;break;case"defaultValue":on=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(91));break;default:G!==J&&as(f,g,xe,G,T,J)}Jl(f,Jt,on);return;case"option":for(var Si in x)Jt=x[Si],x.hasOwnProperty(Si)&&Jt!=null&&!T.hasOwnProperty(Si)&&(Si==="selected"?f.selected=!1:as(f,g,Si,null,T,Jt));for(xt in T)Jt=T[xt],on=x[xt],T.hasOwnProperty(xt)&&Jt!==on&&(Jt!=null||on!=null)&&(xt==="selected"?f.selected=Jt&&typeof Jt!="function"&&typeof Jt!="symbol":as(f,g,xt,Jt,T,on));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ir in x)Jt=x[ir],x.hasOwnProperty(ir)&&Jt!=null&&!T.hasOwnProperty(ir)&&as(f,g,ir,null,T,Jt);for(Zt in T)if(Jt=T[Zt],on=x[Zt],T.hasOwnProperty(Zt)&&Jt!==on&&(Jt!=null||on!=null))switch(Zt){case"children":case"dangerouslySetInnerHTML":if(Jt!=null)throw Error(i(137,g));break;default:as(f,g,Zt,Jt,T,on)}return;default:if(Bu(g)){for(var Go in x)Jt=x[Go],x.hasOwnProperty(Go)&&Jt!==void 0&&!T.hasOwnProperty(Go)&&Ac(f,g,Go,void 0,T,Jt);for(un in T)Jt=T[un],on=x[un],!T.hasOwnProperty(un)||Jt===on||Jt===void 0&&on===void 0||Ac(f,g,un,Jt,T,on);return}}for(var Lt in x)Jt=x[Lt],x.hasOwnProperty(Lt)&&Jt!=null&&!T.hasOwnProperty(Lt)&&as(f,g,Lt,null,T,Jt);for(yn in T)Jt=T[yn],on=x[yn],!T.hasOwnProperty(yn)||Jt===on||Jt==null&&on==null||as(f,g,yn,Jt,T,on)}function MC(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function F0(){if(typeof performance.getEntriesByType=="function"){for(var f=0,g=0,x=performance.getEntriesByType("resource"),T=0;T<x.length;T++){var G=x[T],J=G.transferSize,xe=G.initiatorType,qe=G.duration;if(J&&qe&&MC(xe)){for(xe=0,qe=G.responseEnd,T+=1;T<x.length;T++){var xt=x[T],Zt=xt.startTime;if(Zt>qe)break;var un=xt.transferSize,yn=xt.initiatorType;un&&MC(yn)&&(xt=xt.responseEnd,xe+=un*(xt<qe?1:(qe-Zt)/(xt-Zt)))}if(--T,g+=8*(J+xe)/(G.duration/1e3),f++,10<f)break}}if(0<f)return g/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var z0=null,Dy=null;function yd(f){return f.nodeType===9?f:f.ownerDocument}function nm(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ru(f,g){if(f===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&g==="foreignObject"?0:f}function vd(f,g){return f==="textarea"||f==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ry=null;function wC(){var f=window.event;return f&&f.type==="popstate"?f===Ry?!1:(Ry=f,!0):(Ry=null,!1)}var Py=typeof setTimeout=="function"?setTimeout:void 0,m3=typeof clearTimeout=="function"?clearTimeout:void 0,__=typeof Promise=="function"?Promise:void 0,wr=typeof queueMicrotask=="function"?queueMicrotask:typeof __<"u"?function(f){return __.resolve(null).then(f).catch(mu)}:Py;function mu(f){setTimeout(function(){throw f})}function Pi(f){return f==="head"}function dA(f,g){var x=g,T=0;do{var G=x.nextSibling;if(f.removeChild(x),G&&G.nodeType===8)if(x=G.data,x==="/$"||x==="/&"){if(T===0){f.removeChild(G),Y0(g);return}T--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")T++;else if(x==="html")j0(f.ownerDocument.documentElement);else if(x==="head"){x=f.ownerDocument.head,j0(x);for(var J=x.firstChild;J;){var xe=J.nextSibling,qe=J.nodeName;J[Hi]||qe==="SCRIPT"||qe==="STYLE"||qe==="LINK"&&J.rel.toLowerCase()==="stylesheet"||x.removeChild(J),J=xe}}else x==="body"&&j0(f.ownerDocument.body);x=G}while(x);Y0(g)}function vl(f,g){var x=f;f=0;do{var T=x.nextSibling;if(x.nodeType===1?g?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(g?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),T&&T.nodeType===8)if(x=T.data,x==="/$"){if(f===0)break;f--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||f++;x=T}while(x)}function pu(f){var g=f.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var x=g;switch(g=g.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":pu(x),$u(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}f.removeChild(x)}}function sl(f,g,x,T){for(;f.nodeType===1;){var G=x;if(f.nodeName.toLowerCase()!==g.toLowerCase()){if(!T&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(T){if(!f[Hi])switch(g){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(J=f.getAttribute("rel"),J==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(J!==G.rel||f.getAttribute("href")!==(G.href==null||G.href===""?null:G.href)||f.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||f.getAttribute("title")!==(G.title==null?null:G.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(J=f.getAttribute("src"),(J!==(G.src==null?null:G.src)||f.getAttribute("type")!==(G.type==null?null:G.type)||f.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&J&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(g==="input"&&f.type==="hidden"){var J=G.name==null?null:""+G.name;if(G.type==="hidden"&&f.getAttribute("name")===J)return f}else return f;if(f=GA(f.nextSibling),f===null)break}return null}function dr(f,g,x){if(g==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!x||(f=GA(f.nextSibling),f===null))return null;return f}function SC(f,g){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!g||(f=GA(f.nextSibling),f===null))return null;return f}function Pu(f){return f.data==="$?"||f.data==="$~"}function na(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function Uy(f,g){var x=f.ownerDocument;if(f.data==="$~")f._reactRetry=g;else if(f.data!=="$?"||x.readyState!=="loading")g();else{var T=function(){g(),x.removeEventListener("DOMContentLoaded",T)};x.addEventListener("DOMContentLoaded",T),f._reactRetry=T}}function GA(f){for(;f!=null;f=f.nextSibling){var g=f.nodeType;if(g===1||g===3)break;if(g===8){if(g=f.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return f}var Ly=null;function im(f){f=f.nextSibling;for(var g=0;f;){if(f.nodeType===8){var x=f.data;if(x==="/$"||x==="/&"){if(g===0)return GA(f.nextSibling);g--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||g++}f=f.nextSibling}return null}function cp(f){f=f.previousSibling;for(var g=0;f;){if(f.nodeType===8){var x=f.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(g===0)return f;g--}else x!=="/$"&&x!=="/&"||g++}f=f.previousSibling}return null}function x_(f,g,x){switch(g=yd(x),f){case"html":if(f=g.documentElement,!f)throw Error(i(452));return f;case"head":if(f=g.head,!f)throw Error(i(453));return f;case"body":if(f=g.body,!f)throw Error(i(454));return f;default:throw Error(i(451))}}function j0(f){for(var g=f.attributes;g.length;)f.removeAttributeNode(g[0]);$u(f)}var fA=new Map,EC=new Set;function N0(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Cd=Ve.d;Ve.d={f:BC,r:Uu,D:bd,C:Ky,L:OC,m:M_,X:hc,S:Cl,M:w_};function BC(){var f=Cd.f(),g=o1();return f||g}function Uu(f){var g=Xa(f);g!==null&&g.tag===5&&g.type==="form"?Qa(g):Cd.r(f)}var Gl=typeof document>"u"?null:document;function gu(f,g,x){var T=Gl;if(T&&typeof g=="string"&&g){var G=Zs(g);G='link[rel="'+f+'"][href="'+G+'"]',typeof x=="string"&&(G+='[crossorigin="'+x+'"]'),EC.has(G)||(EC.add(G),f={rel:f,crossOrigin:x,href:g},T.querySelector(G)===null&&(g=T.createElement("link"),Ra(g,"link",f),Lo(g),T.head.appendChild(g)))}}function bd(f){Cd.D(f),gu("dns-prefetch",f,null)}function Ky(f,g){Cd.C(f,g),gu("preconnect",f,g)}function OC(f,g,x){Cd.L(f,g,x);var T=Gl;if(T&&f&&g){var G='link[rel="preload"][as="'+Zs(g)+'"]';g==="image"&&x&&x.imageSrcSet?(G+='[imagesrcset="'+Zs(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(G+='[imagesizes="'+Zs(x.imageSizes)+'"]')):G+='[href="'+Zs(f)+'"]';var J=G;switch(g){case"style":J=lf(f);break;case"script":J=rm(f)}fA.has(J)||(f=v({rel:"preload",href:g==="image"&&x&&x.imageSrcSet?void 0:f,as:g},x),fA.set(J,f),T.querySelector(G)!==null||g==="style"&&T.querySelector(Ap(J))||g==="script"&&T.querySelector(hp(J))||(g=T.createElement("link"),Ra(g,"link",f),Lo(g),T.head.appendChild(g)))}}function M_(f,g){Cd.m(f,g);var x=Gl;if(x&&f){var T=g&&typeof g.as=="string"?g.as:"script",G='link[rel="modulepreload"][as="'+Zs(T)+'"][href="'+Zs(f)+'"]',J=G;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":J=rm(f)}if(!fA.has(J)&&(f=v({rel:"modulepreload",href:f},g),fA.set(J,f),x.querySelector(G)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(hp(J)))return}T=x.createElement("link"),Ra(T,"link",f),Lo(T),x.head.appendChild(T)}}}function Cl(f,g,x){Cd.S(f,g,x);var T=Gl;if(T&&f){var G=Na(T).hoistableStyles,J=lf(f);g=g||"default";var xe=G.get(J);if(!xe){var qe={loading:0,preload:null};if(xe=T.querySelector(Ap(J)))qe.loading=5;else{f=v({rel:"stylesheet",href:f,"data-precedence":g},x),(x=fA.get(J))&&W0(f,x);var xt=xe=T.createElement("link");Lo(xt),Ra(xt,"link",f),xt._p=new Promise(function(Zt,un){xt.onload=Zt,xt.onerror=un}),xt.addEventListener("load",function(){qe.loading|=1}),xt.addEventListener("error",function(){qe.loading|=2}),qe.loading|=4,p1(xe,g,T)}xe={type:"stylesheet",instance:xe,count:1,state:qe},G.set(J,xe)}}}function hc(f,g){Cd.X(f,g);var x=Gl;if(x&&f){var T=Na(x).hoistableScripts,G=rm(f),J=T.get(G);J||(J=x.querySelector(hp(G)),J||(f=v({src:f,async:!0},g),(g=fA.get(G))&&dp(f,g),J=x.createElement("script"),Lo(J),Ra(J,"link",f),x.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},T.set(G,J))}}function w_(f,g){Cd.M(f,g);var x=Gl;if(x&&f){var T=Na(x).hoistableScripts,G=rm(f),J=T.get(G);J||(J=x.querySelector(hp(G)),J||(f=v({src:f,async:!0,type:"module"},g),(g=fA.get(G))&&dp(f,g),J=x.createElement("script"),Lo(J),Ra(J,"link",f),x.head.appendChild(J)),J={type:"script",instance:J,count:1,state:null},T.set(G,J))}}function Fy(f,g,x,T){var G=(G=Et.current)?N0(G):null;if(!G)throw Error(i(446));switch(f){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(g=lf(x.href),x=Na(G).hoistableStyles,T=x.get(g),T||(T={type:"style",instance:null,count:0,state:null},x.set(g,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){f=lf(x.href);var J=Na(G).hoistableStyles,xe=J.get(f);if(xe||(G=G.ownerDocument||G,xe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},J.set(f,xe),(J=G.querySelector(Ap(f)))&&!J._p&&(xe.instance=J,xe.state.loading=5),fA.has(f)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},fA.set(f,x),J||G0(G,f,x,xe.state))),g&&T===null)throw Error(i(528,""));return xe}if(g&&T!==null)throw Error(i(529,""));return null;case"script":return g=x.async,x=x.src,typeof x=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=rm(x),x=Na(G).hoistableScripts,T=x.get(g),T||(T={type:"script",instance:null,count:0,state:null},x.set(g,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,f))}}function lf(f){return'href="'+Zs(f)+'"'}function Ap(f){return'link[rel="stylesheet"]['+f+"]"}function IC(f){return v({},f,{"data-precedence":f.precedence,precedence:null})}function G0(f,g,x,T){f.querySelector('link[rel="preload"][as="style"]['+g+"]")?T.loading=1:(g=f.createElement("link"),T.preload=g,g.addEventListener("load",function(){return T.loading|=1}),g.addEventListener("error",function(){return T.loading|=2}),Ra(g,"link",x),Lo(g),f.head.appendChild(g))}function rm(f){return'[src="'+Zs(f)+'"]'}function hp(f){return"script[async]"+f}function S_(f,g,x){if(g.count++,g.instance===null)switch(g.type){case"style":var T=f.querySelector('style[data-href~="'+Zs(x.href)+'"]');if(T)return g.instance=T,Lo(T),T;var G=v({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return T=(f.ownerDocument||f).createElement("style"),Lo(T),Ra(T,"style",G),p1(T,x.precedence,f),g.instance=T;case"stylesheet":G=lf(x.href);var J=f.querySelector(Ap(G));if(J)return g.state.loading|=4,g.instance=J,Lo(J),J;T=IC(x),(G=fA.get(G))&&W0(T,G),J=(f.ownerDocument||f).createElement("link"),Lo(J);var xe=J;return xe._p=new Promise(function(qe,xt){xe.onload=qe,xe.onerror=xt}),Ra(J,"link",T),g.state.loading|=4,p1(J,x.precedence,f),g.instance=J;case"script":return J=rm(x.src),(G=f.querySelector(hp(J)))?(g.instance=G,Lo(G),G):(T=x,(G=fA.get(J))&&(T=v({},x),dp(T,G)),f=f.ownerDocument||f,G=f.createElement("script"),Lo(G),Ra(G,"link",T),f.head.appendChild(G),g.instance=G);case"void":return null;default:throw Error(i(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(T=g.instance,g.state.loading|=4,p1(T,x.precedence,f));return g.instance}function p1(f,g,x){for(var T=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=T.length?T[T.length-1]:null,J=G,xe=0;xe<T.length;xe++){var qe=T[xe];if(qe.dataset.precedence===g)J=qe;else if(J!==G)break}J?J.parentNode.insertBefore(f,J.nextSibling):(g=x.nodeType===9?x.head:x,g.insertBefore(f,g.firstChild))}function W0(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.title==null&&(f.title=g.title)}function dp(f,g){f.crossOrigin==null&&(f.crossOrigin=g.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=g.referrerPolicy),f.integrity==null&&(f.integrity=g.integrity)}var om=null;function zy(f,g,x){if(om===null){var T=new Map,G=om=new Map;G.set(x,T)}else G=om,T=G.get(x),T||(T=new Map,G.set(x,T));if(T.has(f))return T;for(T.set(f,null),x=x.getElementsByTagName(f),G=0;G<x.length;G++){var J=x[G];if(!(J[Hi]||J[lo]||f==="link"&&J.getAttribute("rel")==="stylesheet")&&J.namespaceURI!=="http://www.w3.org/2000/svg"){var xe=J.getAttribute(g)||"";xe=f+xe;var qe=T.get(xe);qe?qe.push(J):T.set(xe,[J])}}return T}function jy(f,g,x){f=f.ownerDocument||f,f.head.insertBefore(x,g==="title"?f.querySelector("head > title"):null)}function TC(f,g,x){if(x===1||g.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(f=g.disabled,typeof g.precedence=="string"&&f==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function kC(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function fp(f,g,x,T){if(x.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var G=lf(T.href),J=g.querySelector(Ap(G));if(J){g=J._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(f.count++,f=g1.bind(f),g.then(f,f)),x.state.loading|=4,x.instance=J,Lo(J);return}J=g.ownerDocument||g,T=IC(T),(G=fA.get(G))&&W0(T,G),J=J.createElement("link"),Lo(J);var xe=J;xe._p=new Promise(function(qe,xt){xe.onload=qe,xe.onerror=xt}),Ra(J,"link",T),x.instance=J}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(x,g),(g=x.state.preload)&&(x.state.loading&3)===0&&(f.count++,x=g1.bind(f),g.addEventListener("load",x),g.addEventListener("error",x))}}var Ny=0;function E_(f,g){return f.stylesheets&&f.count===0&&y1(f,f.stylesheets),0<f.count||0<f.imgCount?function(x){var T=setTimeout(function(){if(f.stylesheets&&y1(f,f.stylesheets),f.unsuspend){var J=f.unsuspend;f.unsuspend=null,J()}},6e4+g);0<f.imgBytes&&Ny===0&&(Ny=62500*F0());var G=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&y1(f,f.stylesheets),f.unsuspend)){var J=f.unsuspend;f.unsuspend=null,J()}},(f.imgBytes>Ny?50:800)+g);return f.unsuspend=x,function(){f.unsuspend=null,clearTimeout(T),clearTimeout(G)}}:null}function g1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)y1(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var Gy=null;function y1(f,g){f.stylesheets=null,f.unsuspend!==null&&(f.count++,Gy=new Map,g.forEach(B_,f),Gy=null,g1.call(f))}function B_(f,g){if(!(g.state.loading&4)){var x=Gy.get(f);if(x)var T=x.get(null);else{x=new Map,Gy.set(f,x);for(var G=f.querySelectorAll("link[data-precedence],style[data-precedence]"),J=0;J<G.length;J++){var xe=G[J];(xe.nodeName==="LINK"||xe.getAttribute("media")!=="not all")&&(x.set(xe.dataset.precedence,xe),T=xe)}T&&x.set(null,T)}G=g.instance,xe=G.getAttribute("data-precedence"),J=x.get(xe)||T,J===T&&x.set(null,G),x.set(xe,G),this.count++,T=g1.bind(this),G.addEventListener("load",T),G.addEventListener("error",T),J?J.parentNode.insertBefore(G,J.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(G,f.firstChild)),g.state.loading|=4}}var Q0={$$typeof:X,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function DC(f,g,x,T,G,J,xe,qe,xt){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=T,this.onUncaughtError=G,this.onCaughtError=J,this.onRecoverableError=xe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xt,this.incompleteTransitions=new Map}function RC(f,g,x,T,G,J,xe,qe,xt,Zt,un,yn){return f=new DC(f,g,x,xe,xt,Zt,un,yn,qe),g=1,J===!0&&(g|=24),J=fl(3,null,null,g),f.current=J,J.stateNode=f,g=Kl(),g.refCount++,f.pooledCache=g,g.refCount++,J.memoizedState={element:T,isDehydrated:x,cache:g},oA(J),f}function O_(f){return f?(f=lr,f):lr}function I_(f,g,x,T,G,J){G=O_(G),T.context===null?T.context=G:T.pendingContext=G,T=Gr(g),T.payload={element:x},J=J===void 0?null:J,J!==null&&(T.callback=J),x=Dc(f,T,g),x!==null&&(jc(x,f,g),id(x,f,g))}function PC(f,g){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<g?x:g}}function mp(f,g){PC(f,g),(f=f.alternate)&&PC(f,g)}function UC(f){if(f.tag===13||f.tag===31){var g=ru(f,67108864);g!==null&&jc(g,f,67108864),mp(f,67108864)}}function T_(f){if(f.tag===13||f.tag===31){var g=Ro();g=Eo(g);var x=ru(f,g);x!==null&&jc(x,f,g),mp(f,g)}}var q0=!0;function LC(f,g,x,T){var G=Ee.T;Ee.T=null;var J=Ve.p;try{Ve.p=2,sm(f,g,x,T)}finally{Ve.p=J,Ee.T=G}}function k_(f,g,x,T){var G=Ee.T;Ee.T=null;var J=Ve.p;try{Ve.p=8,sm(f,g,x,T)}finally{Ve.p=J,Ee.T=G}}function sm(f,g,x,T){if(q0){var G=Wy(T);if(G===null)Ty(f,g,T,Qy,x),FC(f,T);else if(R_(G,f,g,x,T))T.stopPropagation();else if(FC(f,T),g&4&&-1<p3.indexOf(f)){for(;G!==null;){var J=Xa(G);if(J!==null)switch(J.tag){case 3:if(J=J.stateNode,J.current.memoizedState.isDehydrated){var xe=Mt(J.pendingLanes);if(xe!==0){var qe=J;for(qe.pendingLanes|=2,qe.entangledLanes|=2;xe;){var xt=1<<31-Ye(xe);qe.entanglements[1]|=xt,xe&=~xt}Sh(J),(Do&6)===0&&(Xf=oi()+500,up(0))}}break;case 31:case 13:qe=ru(J,2),qe!==null&&jc(qe,J,2),o1(),mp(J,2)}if(J=Wy(T),J===null&&Ty(f,g,T,Qy,x),J===G)break;G=J}G!==null&&T.stopPropagation()}else Ty(f,g,T,null,x)}}function Wy(f){return f=Xu(f),pp(f)}var Qy=null;function pp(f){if(Qy=null,f=fo(f),f!==null){var g=o(f);if(g===null)f=null;else{var x=g.tag;if(x===13){if(f=s(g),f!==null)return f;f=null}else if(x===31){if(f=a(g),f!==null)return f;f=null}else if(x===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;f=null}else g!==f&&(f=null)}}return Qy=f,null}function D_(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tn()){case je:return 2;case $:return 8;case j:case Q:return 32;case Ae:return 268435456;default:return 32}default:return 32}}var KC=!1,uf=null,cf=null,am=null,v1=new Map,C1=new Map,lm=[],p3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FC(f,g){switch(f){case"focusin":case"focusout":uf=null;break;case"dragenter":case"dragleave":cf=null;break;case"mouseover":case"mouseout":am=null;break;case"pointerover":case"pointerout":v1.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":C1.delete(g.pointerId)}}function mA(f,g,x,T,G,J){return f===null||f.nativeEvent!==J?(f={blockedOn:g,domEventName:x,eventSystemFlags:T,nativeEvent:J,targetContainers:[G]},g!==null&&(g=Xa(g),g!==null&&UC(g)),f):(f.eventSystemFlags|=T,g=f.targetContainers,G!==null&&g.indexOf(G)===-1&&g.push(G),f)}function R_(f,g,x,T,G){switch(g){case"focusin":return uf=mA(uf,f,g,x,T,G),!0;case"dragenter":return cf=mA(cf,f,g,x,T,G),!0;case"mouseover":return am=mA(am,f,g,x,T,G),!0;case"pointerover":var J=G.pointerId;return v1.set(J,mA(v1.get(J)||null,f,g,x,T,G)),!0;case"gotpointercapture":return J=G.pointerId,C1.set(J,mA(C1.get(J)||null,f,g,x,T,G)),!0}return!1}function gp(f){var g=fo(f.target);if(g!==null){var x=o(g);if(x!==null){if(g=x.tag,g===13){if(g=s(x),g!==null){f.blockedOn=g,Yo(f.priority,function(){T_(x)});return}}else if(g===31){if(g=a(x),g!==null){f.blockedOn=g,Yo(f.priority,function(){T_(x)});return}}else if(g===3&&x.stateNode.current.memoizedState.isDehydrated){f.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}f.blockedOn=null}function qy(f){if(f.blockedOn!==null)return!1;for(var g=f.targetContainers;0<g.length;){var x=Wy(f.nativeEvent);if(x===null){x=f.nativeEvent;var T=new x.constructor(x.type,x);ts=T,x.target.dispatchEvent(T),ts=null}else return g=Xa(x),g!==null&&UC(g),f.blockedOn=x,!1;g.shift()}return!0}function P_(f,g,x){qy(f)&&x.delete(g)}function g3(){KC=!1,uf!==null&&qy(uf)&&(uf=null),cf!==null&&qy(cf)&&(cf=null),am!==null&&qy(am)&&(am=null),v1.forEach(P_),C1.forEach(P_)}function um(f,g){f.blockedOn===g&&(f.blockedOn=null,KC||(KC=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,g3)))}var b1=null;function U_(f){b1!==f&&(b1=f,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){b1===f&&(b1=null);for(var g=0;g<f.length;g+=3){var x=f[g],T=f[g+1],G=f[g+2];if(typeof T!="function"){if(pp(T||x)===null)continue;break}var J=Xa(x);J!==null&&(f.splice(g,3),g-=3,jo(J,{pending:!0,data:G,method:x.method,action:T},T,G))}}))}function Y0(f){function g(xt){return um(xt,f)}uf!==null&&um(uf,f),cf!==null&&um(cf,f),am!==null&&um(am,f),v1.forEach(g),C1.forEach(g);for(var x=0;x<lm.length;x++){var T=lm[x];T.blockedOn===f&&(T.blockedOn=null)}for(;0<lm.length&&(x=lm[0],x.blockedOn===null);)gp(x),x.blockedOn===null&&lm.shift();if(x=(f.ownerDocument||f).$$reactFormReplay,x!=null)for(T=0;T<x.length;T+=3){var G=x[T],J=x[T+1],xe=G[Dn]||null;if(typeof J=="function")xe||U_(x);else if(xe){var qe=null;if(J&&J.hasAttribute("formAction")){if(G=J,xe=J[Dn]||null)qe=xe.formAction;else if(pp(G)!==null)continue}else qe=xe.action;typeof qe=="function"?x[T+1]=qe:(x.splice(T,3),T-=3),U_(x)}}}function Lu(){function f(J){J.canIntercept&&J.info==="react-transition"&&J.intercept({handler:function(){return new Promise(function(xe){return G=xe})},focusReset:"manual",scroll:"manual"})}function g(){G!==null&&(G(),G=null),T||setTimeout(x,20)}function x(){if(!T&&!navigation.transition){var J=navigation.currentEntry;J&&J.url!=null&&navigation.navigate(J.url,{state:J.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var T=!1,G=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(x,100),function(){T=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),G!==null&&(G(),G=null)}}}function V0(f){this._internalRoot=f}Yy.prototype.render=V0.prototype.render=function(f){var g=this._internalRoot;if(g===null)throw Error(i(409));var x=g.current,T=Ro();I_(x,T,f,g,null,null)},Yy.prototype.unmount=V0.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var g=f.containerInfo;I_(f.current,2,null,f,null,null),o1(),g[er]=null}};function Yy(f){this._internalRoot=f}Yy.prototype.unstable_scheduleHydration=function(f){if(f){var g=rr();f={blockedOn:null,target:f,priority:g};for(var x=0;x<lm.length&&g!==0&&g<lm[x].priority;x++);lm.splice(x,0,f),x===0&&gp(f)}};var zC=e.version;if(zC!=="19.2.0")throw Error(i(527,zC,"19.2.0"));Ve.findDOMNode=function(f){var g=f._reactInternals;if(g===void 0)throw typeof f.render=="function"?Error(i(188)):(f=Object.keys(f).join(","),Error(i(268,f)));return f=d(g),f=f!==null?p(f):null,f=f===null?null:f.stateNode,f};var L_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vy.isDisabled&&Vy.supportsFiber)try{We=Vy.inject(L_),it=Vy}catch{}}return _3.createRoot=function(f,g){if(!r(f))throw Error(i(299));var x=!1,T="",G=bh,J=zA,xe=Gg;return g!=null&&(g.unstable_strictMode===!0&&(x=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onUncaughtError!==void 0&&(G=g.onUncaughtError),g.onCaughtError!==void 0&&(J=g.onCaughtError),g.onRecoverableError!==void 0&&(xe=g.onRecoverableError)),g=RC(f,1,!1,null,null,x,T,null,G,J,xe,Lu),f[er]=g.current,Iy(f),new V0(g)},_3.hydrateRoot=function(f,g,x){if(!r(f))throw Error(i(299));var T=!1,G="",J=bh,xe=zA,qe=Gg,xt=null;return x!=null&&(x.unstable_strictMode===!0&&(T=!0),x.identifierPrefix!==void 0&&(G=x.identifierPrefix),x.onUncaughtError!==void 0&&(J=x.onUncaughtError),x.onCaughtError!==void 0&&(xe=x.onCaughtError),x.onRecoverableError!==void 0&&(qe=x.onRecoverableError),x.formState!==void 0&&(xt=x.formState)),g=RC(f,1,!0,g,x??null,T,G,xt,J,xe,qe,Lu),g.context=O_(null),x=g.current,T=Ro(),T=Eo(T),G=Gr(T),G.callback=null,Dc(x,G,T),x=T,g.current.lanes=x,qi(g,x),Sh(g),f[er]=g.current,Iy(f),new Yy(g)},_3.version="19.2.0",_3}var HF;function rle(){if(HF)return PO.exports;HF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),PO.exports=ile(),PO.exports}var mZ=rle();const ole="modulepreload",sle=function(n){return"/maputnik/"+n},ZF={},WC=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let d=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};var s=d;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=d(t.map(p=>{if(p=sle(p),p in ZF)return;ZF[p]=!0;const v=p.endsWith(".css"),M=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${M}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":ole,v||(E.as="script"),E.crossOrigin="",E.href=p,c&&E.setAttribute("nonce",c),document.head.appendChild(E),v)return new Promise((P,U)=>{E.addEventListener("load",P),E.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},ale=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Dr=n=>typeof n=="string",x3=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},XF=n=>n==null?"":""+n,lle=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},ule=/###/g,JF=n=>n&&n.indexOf("###")>-1?n.replace(ule,"."):n,ez=n=>!n||Dr(n),g4=(n,e,t)=>{const i=Dr(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(ez(n))return{};const o=JF(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return ez(n)?{}:{obj:n,k:JF(i[r])}},tz=(n,e,t)=>{const{obj:i,k:r}=g4(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=g4(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=g4(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},cle=(n,e,t,i)=>{const{obj:r,k:o}=g4(n,e,Object);r[o]=r[o]||[],r[o].push(t)},nE=(n,e)=>{const{obj:t,k:i}=g4(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},Ale=(n,e,t)=>{const i=nE(n,t);return i!==void 0?i:nE(e,t)},pZ=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Dr(n[i])||n[i]instanceof String||Dr(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):pZ(n[i],e[i],t):n[i]=e[i]);return n},N_=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var hle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const dle=n=>Dr(n)?n.replace(/[&<>"'\/]/g,e=>hle[e]):n;class fle{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const mle=[" ",",","?","!",";"],ple=new fle(20),gle=(n,e,t)=>{e=e||"",t=t||"";const i=mle.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=ple.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},W9=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},Y4=n=>n?.replace("_","-"),yle={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class iE{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||yle,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Dr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new iE(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new iE(this.logger,e)}}var hg=new iE;class P6{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class nz extends P6{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):Dr(i)&&o?a.push(...i.split(o)):a.push(i)));const c=nE(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!Dr(i)?c:W9(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),tz(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(Dr(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=nE(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?pZ(c,i,o):c={...c,...i},tz(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var gZ={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const yZ=Symbol("i18next/PATH_KEY");function vle(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===yZ?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function rE(n,e){const{[yZ]:t}=n(vle());return t.join(e?.keySeparator??".")}const iz={},FO=n=>!Dr(n)&&typeof n!="boolean"&&typeof n!="number";class oE extends P6{constructor(e,t={}){super(),lle(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=hg.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if(r?.res===void 0)return!1;const o=FO(r.res);return!(i.returnObjects===!1&&o)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!gle(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Dr(o)?[o]:o};const d=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(d[0])>-1)&&(o=d.shift()),e=d.join(r)}return{key:e,namespaces:Dr(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=rE(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),d=c[c.length-1];let p=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const v=r.lng||this.language,M=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return M?o?{res:`${d}${p}${a}`,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:`${d}${p}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:d,usedParams:this.getUsedParamsDetails(r)}:a;const E=this.resolve(e,r);let P=E?.res;const U=E?.usedKey||a,z=E?.exactUsedKey||a,V=["[object Number]","[object Function]","[object RegExp]"],Z=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,X=!this.i18nFormat||this.i18nFormat.handleAsObject,re=r.count!==void 0&&!Dr(r.count),ee=oE.hasDefaultValue(r),ne=re?this.pluralResolver.getSuffix(v,r.count,r):"",q=r.ordinal&&re?this.pluralResolver.getSuffix(v,r.count,{ordinal:!1}):"",le=re&&!r.ordinal&&r.count===0,ue=le&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${ne}`]||r[`defaultValue${q}`]||r.defaultValue;let ve=P;X&&!P&&ee&&(ve=ue);const pe=FO(ve),Be=Object.prototype.toString.apply(ve);if(X&&ve&&pe&&V.indexOf(Be)<0&&!(Dr(Z)&&Array.isArray(ve))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ce=this.options.returnedObjectHandler?this.options.returnedObjectHandler(U,ve,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(E.res=Ce,E.usedParams=this.getUsedParamsDetails(r),E):Ce}if(s){const Ce=Array.isArray(ve),Oe=Ce?[]:{},Fe=Ce?z:U;for(const Ee in ve)if(Object.prototype.hasOwnProperty.call(ve,Ee)){const Ve=`${Fe}${s}${Ee}`;ee&&!P?Oe[Ee]=this.translate(Ve,{...r,defaultValue:FO(ue)?ue[Ee]:void 0,joinArrays:!1,ns:c}):Oe[Ee]=this.translate(Ve,{...r,joinArrays:!1,ns:c}),Oe[Ee]===Ve&&(Oe[Ee]=ve[Ee])}P=Oe}}else if(X&&Dr(Z)&&Array.isArray(P))P=P.join(Z),P&&(P=this.extendTranslation(P,e,r,i));else{let Ce=!1,Oe=!1;!this.isValidLookup(P)&&ee&&(Ce=!0,P=ue),this.isValidLookup(P)||(Oe=!0,P=a);const Ee=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Oe?void 0:P,Ve=ee&&ue!==P&&this.options.updateMissing;if(Oe||Ce||Ve){if(this.logger.log(Ve?"updateKey":"missingKey",v,d,a,Ve?ue:P),s){const De=this.resolve(a,{...r,keySeparator:!1});De&&De.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ut=[];const mt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&mt&&mt[0])for(let De=0;De<mt.length;De++)ut.push(mt[De]);else this.options.saveMissingTo==="all"?ut=this.languageUtils.toResolveHierarchy(r.lng||this.language):ut.push(r.lng||this.language);const Pe=(De,Xe,Ke)=>{const Bt=ee&&Ke!==P?Ke:Ee;this.options.missingKeyHandler?this.options.missingKeyHandler(De,d,Xe,Bt,Ve,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(De,d,Xe,Bt,Ve,r),this.emit("missingKey",De,d,Xe,P)};this.options.saveMissing&&(this.options.saveMissingPlurals&&re?ut.forEach(De=>{const Xe=this.pluralResolver.getSuffixes(De,r);le&&r[`defaultValue${this.options.pluralSeparator}zero`]&&Xe.indexOf(`${this.options.pluralSeparator}zero`)<0&&Xe.push(`${this.options.pluralSeparator}zero`),Xe.forEach(Ke=>{Pe([De],a+Ke,r[`defaultValue${Ke}`]||ue)})}):Pe(ut,a,ue))}P=this.extendTranslation(P,e,r,E,i),Oe&&P===a&&this.options.appendNamespaceToMissingKey&&(P=`${d}${p}${a}`),(Oe||Ce)&&this.options.parseMissingKeyHandler&&(P=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${p}${a}`:a,Ce?P:void 0,r))}return o?(E.res=P,E.usedParams=this.getUsedParamsDetails(r),E):P}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Dr(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const v=e.match(this.interpolator.nestingRegexp);d=v&&v.length}let p=i.replace&&!Dr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,i.lng||this.language||r.usedLng,i),c){const v=e.match(this.interpolator.nestingRegexp),M=v&&v.length;d<M&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>o?.[0]===v[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=Dr(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=gZ.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return Dr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const d=this.extractFromKey(c,t),p=d.key;r=p;let v=d.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const M=t.count!==void 0&&!Dr(t.count),E=M&&!t.ordinal&&t.count===0,P=t.context!==void 0&&(Dr(t.context)||typeof t.context=="number")&&t.context!=="",U=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(z=>{this.isValidLookup(i)||(a=z,!iz[`${U[0]}-${z}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(iz[`${U[0]}-${z}`]=!0,this.logger.warn(`key "${r}" for languages "${U.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),U.forEach(V=>{if(this.isValidLookup(i))return;s=V;const Z=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(Z,p,V,z,t);else{let re;M&&(re=this.pluralResolver.getSuffix(V,t.count,t));const ee=`${this.options.pluralSeparator}zero`,ne=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(M&&(t.ordinal&&re.indexOf(ne)===0&&Z.push(p+re.replace(ne,this.options.pluralSeparator)),Z.push(p+re),E&&Z.push(p+ee)),P){const q=`${p}${this.options.contextSeparator||"_"}${t.context}`;Z.push(q),M&&(t.ordinal&&re.indexOf(ne)===0&&Z.push(q+re.replace(ne,this.options.pluralSeparator)),Z.push(q+re),E&&Z.push(q+ee))}}let X;for(;X=Z.pop();)this.isValidLookup(i)||(o=X,i=this.getResource(V,z,X,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Dr(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class rz{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=hg.create("languageUtils")}getScriptPartFromCode(e){if(e=Y4(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Y4(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Dr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Dr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Dr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Dr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const oz={zero:0,one:1,two:2,few:3,many:4,other:5},sz={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Cle{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=hg.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=Y4(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),sz;if(!e.match(/-|_/))return sz;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>oz[r]-oz[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const az=(n,e,t,i=".",r=!0)=>{let o=Ale(n,e,t);return!o&&r&&Dr(t)&&(o=W9(n,t,i),o===void 0&&(o=W9(e,t,i))),o},zO=n=>n.replace(/\$/g,"$$$$");class lz{constructor(e={}){this.logger=hg.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:d,unescapeSuffix:p,unescapePrefix:v,nestingPrefix:M,nestingPrefixEscaped:E,nestingSuffix:P,nestingSuffixEscaped:U,nestingOptionsSeparator:z,maxReplaces:V,alwaysFormat:Z}=e.interpolation;this.escape=t!==void 0?t:dle,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?N_(o):s||"{{",this.suffix=a?N_(a):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=p?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=M?N_(M):E||N_("$t("),this.nestingSuffix=P?N_(P):U||N_(")"),this.nestingOptionsSeparator=z||",",this.maxReplaces=V||1e3,this.alwaysFormat=Z!==void 0?Z:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=E=>{if(E.indexOf(this.formatSeparator)<0){const V=az(t,c,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,i,{...r,...t,interpolationkey:E}):V}const P=E.split(this.formatSeparator),U=P.shift().trim(),z=P.join(this.formatSeparator).trim();return this.format(az(t,c,U,this.options.keySeparator,this.options.ignoreJSONStructure),z,i,{...r,...t,interpolationkey:U})};this.resetRegExp();const p=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>zO(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?zO(this.escape(E)):zO(E)}].forEach(E=>{for(a=0;o=E.regex.exec(e);){const P=o[1].trim();if(s=d(P),s===void 0)if(typeof p=="function"){const z=p(e,o,r);s=Dr(z)?z:""}else if(r&&Object.prototype.hasOwnProperty.call(r,P))s="";else if(v){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${P} for interpolating ${e}`),s="";else!Dr(s)&&!this.useRawValueToEscape&&(s=XF(s));const U=E.safeValue(s);if(e=e.replace(o[0],U),v?(E.regex.lastIndex+=s.length,E.regex.lastIndex-=o[0].length):E.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,d)=>{const p=this.nestingOptionsSeparator;if(c.indexOf(p)<0)return c;const v=c.split(new RegExp(`${p}[ ]*{`));let M=`{${v[1]}`;c=v[0],M=this.interpolate(M,s);const E=M.match(/'/g),P=M.match(/"/g);((E?.length??0)%2===0&&!P||P.length%2!==0)&&(M=M.replace(/'/g,'"'));try{s=JSON.parse(M),d&&(s={...d,...s})}catch(U){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,U),`${c}${p}${M}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!Dr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const d=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(d!==-1&&(c=r[1].slice(d).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),r[1]=r[1].slice(0,d)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!Dr(o))return o;Dr(o)||(o=XF(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((p,v)=>this.format(p,v,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const ble=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),p=a.trim();t[p]||(t[p]=d),d==="false"&&(t[p]=!1),d==="true"&&(t[p]=!0),isNaN(d)||(t[p]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},uz=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(Y4(i),r),e[s]=a),a(t)}},_le=n=>(e,t,i)=>n(Y4(t),i)(e);class xle{constructor(e={}){this.logger=hg.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?uz:_le;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=uz(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:d,formatOptions:p}=ble(c);if(this.formats[d]){let v=a;try{const M=r?.formatParams?.[r.interpolationkey]||{},E=M.locale||M.lng||r.locale||r.lng||i;v=this.formats[d](a,E,{...p,...r,...M})}catch(M){this.logger.warn(M)}return v}else this.logger.warn(`there was no format function for ${d}`);return a},e)}}const Mle=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class wle extends P6{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=hg.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(d=>{let p=!0;t.forEach(v=>{const M=`${d}|${v}`;!i.reload&&this.store.hasResourceBundle(d,v)?this.state[M]=2:this.state[M]<0||(this.state[M]===1?s[M]===void 0&&(s[M]=!0):(this.state[M]=1,p=!1,s[M]===void 0&&(s[M]=!0),o[M]===void 0&&(o[M]=!0),c[v]===void 0&&(c[v]=!0)))}),p||(a[d]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{cle(c.loaded,[o],s),Mle(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{a[d]||(a[d]={});const p=c.loaded[d];p.length&&p.forEach(v=>{a[d][v]===void 0&&(a[d][v]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(d,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(d&&p&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(d,p)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const d=c(e,t);d&&typeof d.then=="function"?d.then(p=>a(null,p)).catch(a):a(null,d)}catch(d){a(d)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Dr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Dr(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},d=this.backend.create.bind(this.backend);if(d.length<6)try{let p;d.length===5?p=d(e,t,i,r,c):p=d(e,t,i,r),p&&typeof p.then=="function"?p.then(v=>a(null,v)).catch(a):a(null,p)}catch(p){a(p)}else d(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const jO=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Dr(n[1])&&(e.defaultValue=n[1]),Dr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),cz=n=>(Dr(n.ns)&&(n.ns=[n.ns]),Dr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Dr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),ew=()=>{},Sle=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class y4 extends P6{constructor(e={},t){if(super(),this.options=cz(e),this.services={},this.logger=hg,this.modules={external:[]},Sle(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Dr(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=jO();this.options={...i,...this.options,...cz(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=i.overloadTranslationOptionHandler);const r=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?hg.init(r(this.modules.logger),this.options):hg.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=xle;const p=new rz(this.options);this.store=new nz(this.options.resources,this.options);const v=this.services;v.logger=hg,v.resourceStore=this.store,v.languageUtils=p,v.pluralResolver=new Cle(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(v.formatter=r(d),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new lz(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new wle(r(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(E,...P)=>{this.emit(E,...P)}),this.modules.languageDetector&&(v.languageDetector=r(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=r(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new oE(this.services,this.options),this.translator.on("*",(E,...P)=>{this.emit(E,...P)}),this.modules.external.forEach(E=>{E.init&&E.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ew),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...p)=>this.store[d](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...p)=>(this.store[d](...p),this)});const a=x3(),c=()=>{const d=(p,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(v),t(p,v)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=ew){let i=t;const r=Dr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(d=>{d!=="cimode"&&o.indexOf(d)<0&&o.push(d)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=x3();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=ew),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&gZ.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=x3();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...d)=>this.t(...d)),t&&t(a,(...d)=>this.t(...d))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Dr(a)?a:a&&a[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Dr(a)?[a]:a);d&&(this.language||r(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,p=>{o(p,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const d=this.options.keySeparator||".";let p;return c.keyPrefix&&Array.isArray(o)?p=o.map(v=>(typeof v=="function"&&(v=rE(v,{...this.options,...s})),`${c.keyPrefix}${d}${v}`)):(typeof o=="function"&&(o=rE(o,{...this.options,...s})),p=c.keyPrefix?`${c.keyPrefix}${d}${o}`:o),this.t(p,c)};return Dr(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const d=this.services.backendConnector.state[`${a}|${c}`];return d===-1||d===0||d===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=x3();return this.options.ns?(Dr(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=x3();Dr(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new rz(jO());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const i=new y4(e,t);return i.createInstance=y4.createInstance,i}cloneInstance(e={},t=ew){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new y4(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((p,v)=>(p[v]={...c[d][v]},p),c[d]),c),{});o.store=new nz(a,r),o.services.resourceStore=o.store}if(e.interpolation){const c={...jO().interpolation,...this.options.interpolation,...e.interpolation},d={...r,interpolation:c};o.services.interpolator=new lz(d)}return o.translator=new oE(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const nh=y4.createInstance();nh.createInstance;nh.dir;nh.init;nh.loadResources;nh.reloadResources;nh.use;nh.changeLanguage;nh.getFixedT;nh.t;nh.exists;nh.setDefaultNamespace;nh.hasLoadedNamespace;nh.loadNamespaces;nh.loadLanguages;const{slice:Ele,forEach:Ble}=[];function Ole(n){return Ble.call(Ele.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function Ile(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const Az=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Tle=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!Az.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!Az.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},hz={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=Tle(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var kle={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return hz.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&hz.create(t,n,i,r,o)}},Dle={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},Rle={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let G_=null;const dz=()=>{if(G_!==null)return G_;try{if(G_=typeof window<"u"&&window.localStorage!==null,!G_)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{G_=!1}return G_};var Ple={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&dz())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&dz()&&window.localStorage.setItem(t,n)}};let W_=null;const fz=()=>{if(W_!==null)return W_;try{if(W_=typeof window<"u"&&window.sessionStorage!==null,!W_)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{W_=!1}return W_};var Ule={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&fz())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&fz()&&window.sessionStorage.setItem(t,n)}},Lle={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Kle={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Fle={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},zle={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let vZ=!1;try{document.cookie,vZ=!0}catch{}const CZ=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];vZ||CZ.splice(1,1);const jle=()=>({order:CZ,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class bZ{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Ole(t,this.options||{},jle()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(kle),this.addDetector(Dle),this.addDetector(Ple),this.addDetector(Ule),this.addDetector(Lle),this.addDetector(Kle),this.addDetector(Fle),this.addDetector(zle),this.addDetector(Rle)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!Ile(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}bZ.type="languageDetector";var Nle=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},NO,mz;function Gle(){return mz||(mz=1,NO={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),NO}var Wle=Gle();const Qle=xu(Wle);var qle=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function pz(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Qle[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(qle),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var Yle=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Vle=/^\s*$/,$le=Object.create(null);function _Z(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(_Z,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Hle={parse:function(n,e){e||(e={}),e.components||(e.components=$le);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(Yle,function(c,d){if(s){if(c!=="</"+t.name+">")return;s=!1}var p,v=c.charAt(1)!=="/",M=c.startsWith("<!--"),E=d+c.length,P=n.charAt(E);if(M){var U=pz(c);return o<0?(i.push(U),i):((p=r[o]).children.push(U),i)}if(v&&(o++,(t=pz(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!P||P==="<"||t.children.push({type:"text",content:n.slice(E,n.indexOf("<",E))}),o===0&&i.push(t),(p=r[o-1])&&p.children.push(t),r[o]=t),(!v||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&P!=="<"&&P)){p=o===-1?i:r[o].children;var z=n.indexOf("<",E),V=n.slice(E,z===-1?void 0:z);Vle.test(V)&&(V=" "),(z>-1&&o+p.length>=0||V!==" ")&&p.push({type:"text",content:V})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+_Z("",t)},"")}};const yS=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);Kh(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},gz={},U6=(n,e,t,i)=>{Kh(t)&&gz[t]||(Kh(t)&&(gz[t]=new Date),yS(n,e,t,i))},xZ=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},Q9=(n,e,t)=>{n.loadNamespaces(e,xZ(n,t))},yz=(n,e,t,i)=>{if(Kh(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return Q9(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,xZ(n,i))},Zle=(n,e,t={})=>!e.languages||!e.languages.length?(U6(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),Xle=n=>n.displayName||n.name||(Kh(n)&&n.length>0?n:"Unknown"),Kh=n=>typeof n=="string",R1=n=>typeof n=="object"&&n!==null,Jle=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,eue={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},tue=n=>eue[n],MZ=n=>n.replace(Jle,tue);let q9={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:MZ,transDefaultProps:void 0};const nue=(n={})=>{q9={...q9,...n}},FP=()=>q9;let wZ;const iue=n=>{wZ=n},zP=()=>wZ,vS=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},CS=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?ub(e):e},rue=n=>Array.isArray(n)&&n.every(St.isValidElement),ub=n=>Array.isArray(n)?n:[n],oue=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},sue=n=>{const e={};if(!n)return e;const t=i=>{ub(i).forEach(o=>{Kh(o)||(vS(o)?t(CS(o)):R1(o)&&!St.isValidElement(o)&&Object.assign(e,o))})};return t(n),e},SZ=(n,e,t,i)=>{if(!n)return"";let r="";const o=ub(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(Kh(a)){r+=`${a}`;return}if(St.isValidElement(a)){const{props:d,type:p}=a,v=Object.keys(d).length,M=s.indexOf(p)>-1,E=d.children;if(!E&&M&&!v){r+=`<${p}/>`;return}if(!E&&(!M||v)||d.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(M&&v===1&&Kh(E)){r+=`<${p}>${E}</${p}>`;return}const P=SZ(E,e,t,i);r+=`<${c}>${P}</${c}>`;return}if(a===null){yS(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(R1(a)){const{format:d,...p}=a,v=Object.keys(p);if(v.length===1){const M=d?`${v[0]}, ${d}`:v[0];r+=`{{${M}}}`;return}yS(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}yS(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},aue=(n,e=[],t={})=>{if(!n)return n;const i=Object.keys(t),r=[...e,...i];let o="",s=0;for(;s<n.length;)if(n[s]==="<"){let a=!1;const c=n.slice(s).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9_-]*)>/);if(c){const d=c[1];(/^\d+$/.test(d)||r.includes(d))&&(a=!0,o+=c[0],s+=c[0].length)}if(!a){const d=n.slice(s).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9_-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(d){const p=d[1];(/^\d+$/.test(p)||r.includes(p))&&(a=!0,o+=d[0],s+=d[0].length)}}a||(o+="&lt;",s+=1)}else o+=n[s],s+=1;return o},lue=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(Z=>`<${Z}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const d=e??{},p=Z=>{ub(Z).forEach(re=>{Kh(re)||(vS(re)?p(CS(re)):R1(re)&&!St.isValidElement(re)&&Object.assign(d,re))})};p(n);const v=aue(t,a,d),M=Hle.parse(`<0>${v}</0>`),E={...d,...o},P=(Z,X,re)=>{const ee=CS(Z),ne=z(ee,X.children,re);return rue(ee)&&ne.length===0||Z.props?.i18nIsDynamicList?ee:ne},U=(Z,X,re,ee,ne)=>{Z.dummy?(Z.children=X,re.push(St.cloneElement(Z,{key:ee},ne?void 0:X))):re.push(...St.Children.map([Z],q=>{const le="data-i18n-is-dynamic-list",ue={key:ee,[le]:void 0};return q&&q.props&&Object.keys(q.props).forEach(ve=>{ve==="ref"||ve==="children"||ve==="i18nIsDynamicList"||ve===le||(ue[ve]=q.props[ve])}),St.cloneElement(q,ue,ne?null:X)}))},z=(Z,X,re)=>{const ee=ub(Z);return ub(X).reduce((q,le,ue)=>{const ve=le.children?.[0]?.content&&i.services.interpolator.interpolate(le.children[0].content,E,i.language);if(le.type==="tag"){let pe=ee[parseInt(le.name,10)];!pe&&e&&(pe=e[le.name]),re.length===1&&!pe&&(pe=re[0][le.name]),pe||(pe={});const Be={...le.attrs};s&&Object.keys(Be).forEach(ut=>{const mt=Be[ut];Kh(mt)&&(Be[ut]=MZ(mt))});const Ce=Object.keys(Be).length!==0?oue({props:Be},pe):pe,Oe=St.isValidElement(Ce),Fe=Oe&&vS(le,!0)&&!le.voidElement,Ee=c&&R1(Ce)&&Ce.dummy&&!Oe,Ve=R1(e)&&Object.hasOwnProperty.call(e,le.name);if(Kh(Ce)){const ut=i.services.interpolator.interpolate(Ce,E,i.language);q.push(ut)}else if(vS(Ce)||Fe){const ut=P(Ce,le,re);U(Ce,ut,q,ue)}else if(Ee){const ut=z(ee,le.children,re);U(Ce,ut,q,ue)}else if(Number.isNaN(parseFloat(le.name)))if(Ve){const ut=P(Ce,le,re);U(Ce,ut,q,ue,le.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(le.name)>-1)if(le.voidElement)q.push(St.createElement(le.name,{key:`${le.name}-${ue}`}));else{const ut=z(ee,le.children,re);q.push(St.createElement(le.name,{key:`${le.name}-${ue}`},ut))}else if(le.voidElement)q.push(`<${le.name} />`);else{const ut=z(ee,le.children,re);q.push(`<${le.name}>${ut}</${le.name}>`)}else if(R1(Ce)&&!Oe){const ut=le.children[0]?ve:null;ut&&q.push(ut)}else U(Ce,ve,q,ue,le.children.length!==1||!ve)}else if(le.type==="text"){const pe=r.transWrapTextNodes,Be=typeof r.unescape=="function"?r.unescape:FP().unescape,Ce=s?Be(i.services.interpolator.interpolate(le.content,E,i.language)):i.services.interpolator.interpolate(le.content,E,i.language);pe?q.push(St.createElement(pe,{key:`${le.name}-${ue}`},Ce)):q.push(Ce)}return q},[])},V=z([{dummy:!0,children:n||[]}],M,ub(n||[]));return CS(V[0])},EZ=(n,e,t)=>{const i=n.key||e,r=St.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return St.createElement(St.Fragment,null,r)}return St.createElement(o,{key:i})},uue=(n,e)=>n.map((t,i)=>EZ(t,i,e)),cue=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:EZ(n[i],i,e)})}),t},Aue=(n,e,t,i)=>n?Array.isArray(n)?uue(n,e):R1(n)?cue(n,e):(U6(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,hue=n=>!R1(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function due({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:d,i18n:p,t:v,shouldUnescape:M,...E}){const P=p||zP();if(!P)return U6(P,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const U=v||P.t.bind(P)||(Pe=>Pe),z={...FP(),...P.options?.react};let V=d||U.ns||P.options?.defaultNS;V=Kh(V)?[V]:V||["translation"];const{transDefaultProps:Z}=z,X=Z?.tOptions?{...Z.tOptions,...o}:o,re=M??Z?.shouldUnescape,ee=Z?.values?{...Z.values,...s}:s,ne=Z?.components?{...Z.components,...c}:c,q=SZ(n,z,P,i),le=a||X?.defaultValue||q||z.transEmptyNodeValue||(typeof i=="function"?rE(i):i),{hashTransKey:ue}=z,ve=i||(ue?ue(q||le):q||le);P.options?.interpolation?.defaultVariables?s=ee&&Object.keys(ee).length>0?{...ee,...P.options.interpolation.defaultVariables}:{...P.options.interpolation.defaultVariables}:s=ee;const pe=sue(n);pe&&typeof pe.count=="number"&&e===void 0&&(e=pe.count);const Be=s||e!==void 0&&!P.options?.interpolation?.alwaysFormat||!n?X.interpolation:{interpolation:{...X.interpolation,prefix:"#$?",suffix:"?$#"}},Ce={...X,context:r||X.context,count:e,...s,...Be,defaultValue:le,ns:V};let Oe=ve?U(ve,Ce):le;Oe===ve&&le&&(Oe=le);const Fe=Aue(ne,Oe,P,i);let Ee=Fe||n,Ve=null;hue(Fe)&&(Ve=Fe,Ee=n);const ut=lue(Ee,Ve,Oe,P,z,Ce,re),mt=t??z.defaultTransParent;return mt?St.createElement(mt,E,ut):ut}const fue={type:"3rdParty",init(n){nue(n.options.react),iue(n)}},BZ=St.createContext();class mue{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Cb({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:d,i18n:p,t:v,shouldUnescape:M,...E}){const{i18n:P,defaultNS:U}=St.useContext(BZ)||{},z=p||P||zP(),V=v||z?.t.bind(z);return due({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:d||V?.ns||U||z?.options?.defaultNS,i18n:z,t:v,shouldUnescape:M,...E})}var GO={exports:{}},WO={};var vz;function pue(){if(vz)return WO;vz=1;var n=wa();function e(v,M){return v===M&&(v!==0||1/v===1/M)||v!==v&&M!==M}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,o=n.useLayoutEffect,s=n.useDebugValue;function a(v,M){var E=M(),P=i({inst:{value:E,getSnapshot:M}}),U=P[0].inst,z=P[1];return o(function(){U.value=E,U.getSnapshot=M,c(U)&&z({inst:U})},[v,E,M]),r(function(){return c(U)&&z({inst:U}),v(function(){c(U)&&z({inst:U})})},[v]),s(E),E}function c(v){var M=v.getSnapshot;v=v.value;try{var E=M();return!t(v,E)}catch{return!0}}function d(v,M){return M()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return WO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,WO}var Cz;function gue(){return Cz||(Cz=1,GO.exports=pue()),GO.exports}var yue=gue();const vue=(n,e)=>Kh(e)?e:R1(e)&&Kh(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,Cue={t:vue,ready:!1},bue=()=>()=>{},_ue=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=St.useContext(BZ)||{},o=t||i||zP();o&&!o.reportNamespaces&&(o.reportNamespaces=new mue),o||U6(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=St.useMemo(()=>({...FP(),...o?.options?.react,...e}),[o,e]),{useSuspense:a,keyPrefix:c}=s,d=r||o?.options?.defaultNS,p=Kh(d)?[d]:d||["translation"],v=St.useMemo(()=>p,p);o?.reportNamespaces?.addUsedNamespaces?.(v);const M=St.useRef(0),E=St.useCallback(ue=>{if(!o)return bue;const{bindI18n:ve,bindI18nStore:pe}=s,Be=()=>{M.current+=1,ue()};return ve&&o.on(ve,Be),pe&&o.store.on(pe,Be),()=>{ve&&ve.split(" ").forEach(Ce=>o.off(Ce,Be)),pe&&pe.split(" ").forEach(Ce=>o.store.off(Ce,Be))}},[o,s]),P=St.useRef(),U=St.useCallback(()=>{if(!o)return Cue;const ue=!!(o.isInitialized||o.initializedStoreOnce)&&v.every(Fe=>Zle(Fe,o,s)),ve=e.lng||o.language,pe=M.current,Be=P.current;if(Be&&Be.ready===ue&&Be.lng===ve&&Be.keyPrefix===c&&Be.revision===pe)return Be;const Oe={t:o.getFixedT(ve,s.nsMode==="fallback"?v:v[0],c),ready:ue,lng:ve,keyPrefix:c,revision:pe};return P.current=Oe,Oe},[o,v,c,s,e.lng]),[z,V]=St.useState(0),{t:Z,ready:X}=yue.useSyncExternalStore(E,U,U);St.useEffect(()=>{if(o&&!X&&!a){const ue=()=>V(ve=>ve+1);e.lng?yz(o,e.lng,v,ue):Q9(o,v,ue)}},[o,e.lng,v,X,a,z]);const re=o||{},ee=St.useRef(null),ne=St.useRef(),q=ue=>{const ve=Object.getOwnPropertyDescriptors(ue);ve.__original&&delete ve.__original;const pe=Object.create(Object.getPrototypeOf(ue),ve);if(!Object.prototype.hasOwnProperty.call(pe,"__original"))try{Object.defineProperty(pe,"__original",{value:ue,writable:!1,enumerable:!1,configurable:!1})}catch{}return pe},le=St.useMemo(()=>{const ue=re,ve=ue?.language;let pe=ue;ue&&(ee.current&&ee.current.__original===ue?ne.current!==ve?(pe=q(ue),ee.current=pe,ne.current=ve):pe=ee.current:(pe=q(ue),ee.current=pe,ne.current=ve));const Be=[Z,pe,X];return Be.t=Z,Be.i18n=pe,Be.ready=X,Be},[Z,re,X,re.resolvedLanguage,re.language,re.languages]);if(o&&a&&!X)throw new Promise(ue=>{const ve=()=>ue();e.lng?yz(o,e.lng,v,ve):Q9(o,v,ve)});return le},So=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,d,p]=_ue(n,{...a,keyPrefix:e.keyPrefix}),v={...a,t:c,i18n:d,tReady:p};return e.withRef&&s?v.ref=s:!e.withRef&&s&&(v.forwardedRef=s),St.createElement(i,v)}r.displayName=`withI18nextTranslation(${Xle(i)})`,r.WrappedComponent=i;const o=(s,a)=>St.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?St.forwardRef(o):r};function Ks(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="9743b658c81cabee1d947d94611cafb3cd7a6a97",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:14,column:1}},1:{start:{line:15,column:0},end:{line:41,column:3}},2:{start:{line:17,column:4},end:{line:19,column:5}},3:{start:{line:18,column:6},end:{line:18,column:16}},4:{start:{line:20,column:4},end:{line:20,column:672}},5:{start:{line:20,column:119},end:{line:20,column:158}},6:{start:{line:20,column:198},end:{line:20,column:237}},7:{start:{line:20,column:277},end:{line:20,column:316}},8:{start:{line:20,column:356},end:{line:20,column:395}},9:{start:{line:20,column:435},end:{line:20,column:474}},10:{start:{line:20,column:514},end:{line:20,column:553}},11:{start:{line:20,column:593},end:{line:20,column:632}},12:{start:{line:36,column:4},end:{line:38,column:5}},13:{start:{line:37,column:6},end:{line:37,column:13}},14:{start:{line:39,column:4},end:{line:39,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:16,column:21},end:{line:16,column:22}},loc:{start:{line:16,column:35},end:{line:21,column:3}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:20,column:113},end:{line:20,column:114}},loc:{start:{line:20,column:119},end:{line:20,column:158}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:20,column:192},end:{line:20,column:193}},loc:{start:{line:20,column:198},end:{line:20,column:237}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:20,column:271},end:{line:20,column:272}},loc:{start:{line:20,column:277},end:{line:20,column:316}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:20,column:350},end:{line:20,column:351}},loc:{start:{line:20,column:356},end:{line:20,column:395}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:20,column:429},end:{line:20,column:430}},loc:{start:{line:20,column:435},end:{line:20,column:474}},line:20},6:{name:"(anonymous_6)",decl:{start:{line:20,column:508},end:{line:20,column:509}},loc:{start:{line:20,column:514},end:{line:20,column:553}},line:20},7:{name:"(anonymous_7)",decl:{start:{line:20,column:587},end:{line:20,column:588}},loc:{start:{line:20,column:593},end:{line:20,column:632}},line:20},8:{name:"(anonymous_8)",decl:{start:{line:35,column:21},end:{line:35,column:22}},loc:{start:{line:35,column:41},end:{line:40,column:3}},line:35}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:36,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:38,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,ykBAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9743b658c81cabee1d947d94611cafb3cd7a6a97"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ks=function(){return s},s}Ks();const OZ=(Ks().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",ko:"",zh:""});Ks().s[1]++;nh.use(bZ).use(Nle((n,e)=>(Ks().f[0]++,Ks().s[2]++,n==="en"?(Ks().b[0][0]++,Ks().s[3]++,{}):(Ks().b[0][1]++,Ks().s[4]++,ale(Object.assign({"./locales/de/translation.json":()=>(Ks().f[1]++,Ks().s[5]++,WC(()=>import("./translation-CPFfmJcW.js"),[])),"./locales/fr/translation.json":()=>(Ks().f[2]++,Ks().s[6]++,WC(()=>import("./translation-BktxBT01.js"),[])),"./locales/he/translation.json":()=>(Ks().f[3]++,Ks().s[7]++,WC(()=>import("./translation-DPhSS0Gs.js"),[])),"./locales/it/translation.json":()=>(Ks().f[4]++,Ks().s[8]++,WC(()=>import("./translation-CLpRwhDK.js"),[])),"./locales/ja/translation.json":()=>(Ks().f[5]++,Ks().s[9]++,WC(()=>import("./translation-D-wqDivs.js"),[])),"./locales/ko/translation.json":()=>(Ks().f[6]++,Ks().s[10]++,WC(()=>import("./translation-Cy7xBmk7.js"),[])),"./locales/zh/translation.json":()=>(Ks().f[7]++,Ks().s[11]++,WC(()=>import("./translation-D7NLQqWX.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(fue).init({supportedLngs:Object.keys(OZ),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Ks().f[8]++,Ks().s[12]++,n[0]==="en"){Ks().b[1][0]++,Ks().s[13]++;return}else Ks().b[1][1]++;Ks().s[14]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var q3={exports:{}};q3.exports;var bz;function xue(){return bz||(bz=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",d="[object Error]",p="[object Function]",v="[object GeneratorFunction]",M="[object Map]",E="[object Number]",P="[object Object]",U="[object Promise]",z="[object RegExp]",V="[object Set]",Z="[object String]",X="[object Symbol]",re="[object WeakMap]",ee="[object ArrayBuffer]",ne="[object DataView]",q="[object Float32Array]",le="[object Float64Array]",ue="[object Int8Array]",ve="[object Int16Array]",pe="[object Int32Array]",Be="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Fe="[object Uint32Array]",Ee=/[\\^$.*+?()[\]{}|]/g,Ve=/\w*$/,ut=/^\[object .+?Constructor\]$/,mt=/^(?:0|[1-9]\d*)$/,Pe={};Pe[o]=Pe[s]=Pe[ee]=Pe[ne]=Pe[a]=Pe[c]=Pe[q]=Pe[le]=Pe[ue]=Pe[ve]=Pe[pe]=Pe[M]=Pe[E]=Pe[P]=Pe[z]=Pe[V]=Pe[Z]=Pe[X]=Pe[Be]=Pe[Ce]=Pe[Oe]=Pe[Fe]=!0,Pe[d]=Pe[p]=Pe[re]=!1;var De=typeof window=="object"&&window&&window.Object===Object&&window,Xe=typeof self=="object"&&self&&self.Object===Object&&self,Ke=De||Xe||Function("return this")(),Bt=e&&!e.nodeType&&e,ot=Bt&&!0&&n&&!n.nodeType&&n,Et=ot&&ot.exports===Bt;function Rt(ie,_e){return ie.set(_e[0],_e[1]),ie}function Ue(ie,_e){return ie.add(_e),ie}function ke(ie,_e){for(var $e=-1,Ot=ie?ie.length:0;++$e<Ot&&_e(ie[$e],$e,ie)!==!1;);return ie}function Te(ie,_e){for(var $e=-1,Ot=_e.length,qn=ie.length;++$e<Ot;)ie[qn+$e]=_e[$e];return ie}function He(ie,_e,$e,Ot){for(var qn=-1,Rn=ie?ie.length:0;++qn<Rn;)$e=_e($e,ie[qn],qn,ie);return $e}function Ct(ie,_e){for(var $e=-1,Ot=Array(ie);++$e<ie;)Ot[$e]=_e($e);return Ot}function vt(ie,_e){return ie?.[_e]}function wt(ie){var _e=!1;if(ie!=null&&typeof ie.toString!="function")try{_e=!!(ie+"")}catch{}return _e}function Ft(ie){var _e=-1,$e=Array(ie.size);return ie.forEach(function(Ot,qn){$e[++_e]=[qn,Ot]}),$e}function Pt(ie,_e){return function($e){return ie(_e($e))}}function nn(ie){var _e=-1,$e=Array(ie.size);return ie.forEach(function(Ot){$e[++_e]=Ot}),$e}var Kn=Array.prototype,Wn=Function.prototype,Mi=Object.prototype,Fn=Ke["__core-js_shared__"],Ln=(function(){var ie=/[^.]+$/.exec(Fn&&Fn.keys&&Fn.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""})(),In=Wn.toString,oi=Mi.hasOwnProperty,Tn=Mi.toString,je=RegExp("^"+In.call(oi).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=Et?Ke.Buffer:void 0,j=Ke.Symbol,Q=Ke.Uint8Array,Ae=Pt(Object.getPrototypeOf,Object),Me=Object.create,Ne=Mi.propertyIsEnumerable,We=Kn.splice,it=Object.getOwnPropertySymbols,bt=$?$.isBuffer:void 0,Ye=Pt(Object.keys,Object),at=ms(Ke,"DataView"),C=ms(Ke,"Map"),Ut=ms(Ke,"Promise"),gn=ms(Ke,"Set"),bn=ms(Ke,"WeakMap"),_n=ms(Object,"create"),Mt=ts(at),xi=ts(C),ji=ts(Ut),Qn=ts(gn),Zn=ts(bn),Yi=j?j.prototype:void 0,qi=Yi?Yi.valueOf:void 0;function Ui(ie){var _e=-1,$e=ie?ie.length:0;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function Vi(){this.__data__=_n?_n(null):{}}function Ki(ie){return this.has(ie)&&delete this.__data__[ie]}function Ir(ie){var _e=this.__data__;if(_n){var $e=_e[ie];return $e===i?void 0:$e}return oi.call(_e,ie)?_e[ie]:void 0}function Eo(ie){var _e=this.__data__;return _n?_e[ie]!==void 0:oi.call(_e,ie)}function cn(ie,_e){var $e=this.__data__;return $e[ie]=_n&&_e===void 0?i:_e,this}Ui.prototype.clear=Vi,Ui.prototype.delete=Ki,Ui.prototype.get=Ir,Ui.prototype.has=Eo,Ui.prototype.set=cn;function rr(ie){var _e=-1,$e=ie?ie.length:0;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function Yo(){this.__data__=[]}function aa(ie){var _e=this.__data__,$e=Ga(_e,ie);if($e<0)return!1;var Ot=_e.length-1;return $e==Ot?_e.pop():We.call(_e,$e,1),!0}function lo(ie){var _e=this.__data__,$e=Ga(_e,ie);return $e<0?void 0:_e[$e][1]}function Dn(ie){return Ga(this.__data__,ie)>-1}function er(ie,_e){var $e=this.__data__,Ot=Ga($e,ie);return Ot<0?$e.push([ie,_e]):$e[Ot][1]=_e,this}rr.prototype.clear=Yo,rr.prototype.delete=aa,rr.prototype.get=lo,rr.prototype.has=Dn,rr.prototype.set=er;function Ai(ie){var _e=-1,$e=ie?ie.length:0;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function ja(){this.__data__={hash:new Ui,map:new(C||rr),string:new Ui}}function _A(ie){return Jl(this,ie).delete(ie)}function Sl(ie){return Jl(this,ie).get(ie)}function Hi(ie){return Jl(this,ie).has(ie)}function $u(ie,_e){return Jl(this,ie).set(ie,_e),this}Ai.prototype.clear=ja,Ai.prototype.delete=_A,Ai.prototype.get=Sl,Ai.prototype.has=Hi,Ai.prototype.set=$u;function fo(ie){this.__data__=new rr(ie)}function Xa(){this.__data__=new rr}function El(ie){return this.__data__.delete(ie)}function Na(ie){return this.__data__.get(ie)}function Lo(ie){return this.__data__.has(ie)}function bc(ie,_e){var $e=this.__data__;if($e instanceof rr){var Ot=$e.__data__;if(!C||Ot.length<t-1)return Ot.push([ie,_e]),this;$e=this.__data__=new Ai(Ot)}return $e.set(ie,_e),this}fo.prototype.clear=Xa,fo.prototype.delete=El,fo.prototype.get=Na,fo.prototype.has=Lo,fo.prototype.set=bc;function Vo(ie,_e){var $e=po(ie)||mo(ie)?Ct(ie.length,String):[],Ot=$e.length,qn=!!Ot;for(var Rn in ie)oi.call(ie,Rn)&&!(qn&&(Rn=="length"||tu(Rn,Ot)))&&$e.push(Rn);return $e}function vr(ie,_e,$e){var Ot=ie[_e];(!(oi.call(ie,_e)&&ns(Ot,$e))||$e===void 0&&!(_e in ie))&&(ie[_e]=$e)}function Ga(ie,_e){for(var $e=ie.length;$e--;)if(ns(ie[$e][0],_e))return $e;return-1}function es(ie,_e){return ie&&Zl(_e,el(_e),ie)}function Mu(ie,_e,$e,Ot,qn,Rn,Ti){var Ni;if(Ot&&(Ni=Rn?Ot(ie,qn,Rn,Ti):Ot(ie)),Ni!==void 0)return Ni;if(!Hr(ie))return ie;var Yn=po(ie);if(Yn){if(Ni=Eu(ie),!_e)return xc(ie,Ni)}else{var Oi=eu(ie),ni=Oi==p||Oi==v;if(Xs(ie))return Ar(ie,_e);if(Oi==P||Oi==o||ni&&!Rn){if(wt(ie))return Rn?ie:{};if(Ni=Is(ni?{}:ie),!_e)return Jc(ie,es(Ni,ie))}else{if(!Pe[Oi])return Rn?ie:{};Ni=Bu(ie,Oi,Mu,_e)}}Ti||(Ti=new fo);var si=Ti.get(ie);if(si)return si;if(Ti.set(ie,Ni),!Yn)var mr=$e?Xl(ie):el(ie);return ke(mr||ie,function(ii,jr){mr&&(jr=ii,ii=ie[jr]),vr(Ni,jr,Mu(ii,_e,$e,Ot,jr,ie,Ti))}),Ni}function wu(ie){return Hr(ie)?Me(ie):{}}function hl(ie,_e,$e){var Ot=_e(ie);return po(ie)?Ot:Te(Ot,$e(ie))}function Xc(ie){return Tn.call(ie)}function dl(ie){if(!Hr(ie)||nr(ie))return!1;var _e=bo(ie)||wt(ie)?je:ut;return _e.test(ts(ie))}function Wa(ie){if(!Ja(ie))return Ye(ie);var _e=[];for(var $e in Object(ie))oi.call(ie,$e)&&$e!="constructor"&&_e.push($e);return _e}function Ar(ie,_e){if(_e)return ie.slice();var $e=new ie.constructor(ie.length);return ie.copy($e),$e}function Hu(ie){var _e=new ie.constructor(ie.byteLength);return new Q(_e).set(new Q(ie)),_e}function Bl(ie,_e){var $e=_e?Hu(ie.buffer):ie.buffer;return new ie.constructor($e,ie.byteOffset,ie.byteLength)}function Ol(ie,_e,$e){var Ot=_e?$e(Ft(ie),!0):Ft(ie);return He(Ot,Rt,new ie.constructor)}function Su(ie){var _e=new ie.constructor(ie.source,Ve.exec(ie));return _e.lastIndex=ie.lastIndex,_e}function _c(ie,_e,$e){var Ot=_e?$e(nn(ie),!0):nn(ie);return He(Ot,Ue,new ie.constructor)}function zh(ie){return qi?Object(qi.call(ie)):{}}function Zs(ie,_e){var $e=_e?Hu(ie.buffer):ie.buffer;return new ie.constructor($e,ie.byteOffset,ie.length)}function xc(ie,_e){var $e=-1,Ot=ie.length;for(_e||(_e=Array(Ot));++$e<Ot;)_e[$e]=ie[$e];return _e}function Zl(ie,_e,$e,Ot){$e||($e={});for(var qn=-1,Rn=_e.length;++qn<Rn;){var Ti=_e[qn],Ni=void 0;vr($e,Ti,Ni===void 0?ie[Ti]:Ni)}return $e}function Jc(ie,_e){return Zl(ie,Bo(ie),_e)}function Xl(ie){return hl(ie,el,Bo)}function Jl(ie,_e){var $e=ie.__data__;return Zu(_e)?$e[typeof _e=="string"?"string":"hash"]:$e.map}function ms(ie,_e){var $e=vt(ie,_e);return dl($e)?$e:void 0}var Bo=it?Pt(it,Object):Zi,eu=Xc;(at&&eu(new at(new ArrayBuffer(1)))!=ne||C&&eu(new C)!=M||Ut&&eu(Ut.resolve())!=U||gn&&eu(new gn)!=V||bn&&eu(new bn)!=re)&&(eu=function(ie){var _e=Tn.call(ie),$e=_e==P?ie.constructor:void 0,Ot=$e?ts($e):void 0;if(Ot)switch(Ot){case Mt:return ne;case xi:return M;case ji:return U;case Qn:return V;case Zn:return re}return _e});function Eu(ie){var _e=ie.length,$e=ie.constructor(_e);return _e&&typeof ie[0]=="string"&&oi.call(ie,"index")&&($e.index=ie.index,$e.input=ie.input),$e}function Is(ie){return typeof ie.constructor=="function"&&!Ja(ie)?wu(Ae(ie)):{}}function Bu(ie,_e,$e,Ot){var qn=ie.constructor;switch(_e){case ee:return Hu(ie);case a:case c:return new qn(+ie);case ne:return Bl(ie,Ot);case q:case le:case ue:case ve:case pe:case Be:case Ce:case Oe:case Fe:return Zs(ie,Ot);case M:return Ol(ie,Ot,$e);case E:case Z:return new qn(ie);case z:return Su(ie);case V:return _c(ie,Ot,$e);case X:return zh(ie)}}function tu(ie,_e){return _e=_e??r,!!_e&&(typeof ie=="number"||mt.test(ie))&&ie>-1&&ie%1==0&&ie<_e}function Zu(ie){var _e=typeof ie;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ie!=="__proto__":ie===null}function nr(ie){return!!Ln&&Ln in ie}function Ja(ie){var _e=ie&&ie.constructor,$e=typeof _e=="function"&&_e.prototype||Mi;return ie===$e}function ts(ie){if(ie!=null){try{return In.call(ie)}catch{}try{return ie+""}catch{}}return""}function Xu(ie){return Mu(ie,!0,!0)}function ns(ie,_e){return ie===_e||ie!==ie&&_e!==_e}function mo(ie){return ro(ie)&&oi.call(ie,"callee")&&(!Ne.call(ie,"callee")||Tn.call(ie)==o)}var po=Array.isArray;function wi(ie){return ie!=null&&Ns(ie.length)&&!bo(ie)}function ro(ie){return la(ie)&&wi(ie)}var Xs=bt||Rr;function bo(ie){var _e=Hr(ie)?Tn.call(ie):"";return _e==p||_e==v}function Ns(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=r}function Hr(ie){var _e=typeof ie;return!!ie&&(_e=="object"||_e=="function")}function la(ie){return!!ie&&typeof ie=="object"}function el(ie){return wi(ie)?Vo(ie):Wa(ie)}function Zi(){return[]}function Rr(){return!1}n.exports=Xu})(q3,q3.exports)),q3.exports}var Mue=xue();const v4=xu(Mue);var QO,_z;function wue(){if(_z)return QO;_z=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function d(U,z,V){return U===U&&(V!==void 0&&(U=U<=V?U:V),z!==void 0&&(U=U>=z?U:z)),U}function p(U){var z=typeof U;return!!U&&(z=="object"||z=="function")}function v(U){return!!U&&typeof U=="object"}function M(U){return typeof U=="symbol"||v(U)&&c.call(U)==e}function E(U){if(typeof U=="number")return U;if(M(U))return n;if(p(U)){var z=typeof U.valueOf=="function"?U.valueOf():U;U=p(z)?z+"":z}if(typeof U!="string")return U===0?U:+U;U=U.replace(t,"");var V=r.test(U);return V||o.test(U)?s(U.slice(2),V?2:8):i.test(U)?n:+U}function P(U,z,V){return V===void 0&&(V=z,z=void 0),V!==void 0&&(V=E(V),V=V===V?V:0),z!==void 0&&(z=E(z),z=z===z?z:0),d(E(U),z,V)}return QO=P,QO}var Sue=wue();const xz=xu(Sue);var qO={},M3={},Mz;function Eue(){if(Mz)return M3;Mz=1,M3.byteLength=a,M3.toByteArray=d,M3.fromByteArray=M;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(E){var P=E.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=E.indexOf("=");U===-1&&(U=P);var z=U===P?0:4-U%4;return[U,z]}function a(E){var P=s(E),U=P[0],z=P[1];return(U+z)*3/4-z}function c(E,P,U){return(P+U)*3/4-U}function d(E){var P,U=s(E),z=U[0],V=U[1],Z=new t(c(E,z,V)),X=0,re=V>0?z-4:z,ee;for(ee=0;ee<re;ee+=4)P=e[E.charCodeAt(ee)]<<18|e[E.charCodeAt(ee+1)]<<12|e[E.charCodeAt(ee+2)]<<6|e[E.charCodeAt(ee+3)],Z[X++]=P>>16&255,Z[X++]=P>>8&255,Z[X++]=P&255;return V===2&&(P=e[E.charCodeAt(ee)]<<2|e[E.charCodeAt(ee+1)]>>4,Z[X++]=P&255),V===1&&(P=e[E.charCodeAt(ee)]<<10|e[E.charCodeAt(ee+1)]<<4|e[E.charCodeAt(ee+2)]>>2,Z[X++]=P>>8&255,Z[X++]=P&255),Z}function p(E){return n[E>>18&63]+n[E>>12&63]+n[E>>6&63]+n[E&63]}function v(E,P,U){for(var z,V=[],Z=P;Z<U;Z+=3)z=(E[Z]<<16&16711680)+(E[Z+1]<<8&65280)+(E[Z+2]&255),V.push(p(z));return V.join("")}function M(E){for(var P,U=E.length,z=U%3,V=[],Z=16383,X=0,re=U-z;X<re;X+=Z)V.push(v(E,X,X+Z>re?re:X+Z));return z===1?(P=E[U-1],V.push(n[P>>2]+n[P<<4&63]+"==")):z===2&&(P=(E[U-2]<<8)+E[U-1],V.push(n[P>>10]+n[P>>4&63]+n[P<<2&63]+"=")),V.join("")}return M3}var tw={};var wz;function Bue(){return wz||(wz=1,tw.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,d=c>>1,p=-7,v=t?r-1:0,M=t?-1:1,E=n[e+v];for(v+=M,o=E&(1<<-p)-1,E>>=-p,p+=a;p>0;o=o*256+n[e+v],v+=M,p-=8);for(s=o&(1<<-p)-1,o>>=-p,p+=i;p>0;s=s*256+n[e+v],v+=M,p-=8);if(o===0)o=1-d;else{if(o===c)return s?NaN:(E?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-d}return(E?-1:1)*s*Math.pow(2,o-i)},tw.write=function(n,e,t,i,r,o){var s,a,c,d=o*8-r-1,p=(1<<d)-1,v=p>>1,M=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=i?0:o-1,P=i?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+v>=1?e+=M/c:e+=M*Math.pow(2,1-v),e*c>=2&&(s++,c/=2),s+v>=p?(a=0,s=p):s+v>=1?(a=(e*c-1)*Math.pow(2,r),s=s+v):(a=e*Math.pow(2,v-1)*Math.pow(2,r),s=0));r>=8;n[t+E]=a&255,E+=P,a/=256,r-=8);for(s=s<<r|a,d+=r;d>0;n[t+E]=s&255,E+=P,s/=256,d-=8);n[t+E-P]|=U*128}),tw}var Sz;function Oue(){return Sz||(Sz=1,(function(n){const e=Eue(),t=Bue(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=Z,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const $=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf($,j),$.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s($){if($>r)throw new RangeError('The value "'+$+'" is invalid for option "size"');const j=new Uint8Array($);return Object.setPrototypeOf(j,a.prototype),j}function a($,j,Q){if(typeof $=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v($)}return c($,j,Q)}a.poolSize=8192;function c($,j,Q){if(typeof $=="string")return M($,j);if(ArrayBuffer.isView($))return P($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(Ln($,ArrayBuffer)||$&&Ln($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ln($,SharedArrayBuffer)||$&&Ln($.buffer,SharedArrayBuffer)))return U($,j,Q);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ae=$.valueOf&&$.valueOf();if(Ae!=null&&Ae!==$)return a.from(Ae,j,Q);const Me=z($);if(Me)return Me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return a.from($[Symbol.toPrimitive]("string"),j,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}a.from=function($,j,Q){return c($,j,Q)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function p($,j,Q){return d($),$<=0?s($):j!==void 0?typeof Q=="string"?s($).fill(j,Q):s($).fill(j):s($)}a.alloc=function($,j,Q){return p($,j,Q)};function v($){return d($),s($<0?0:V($)|0)}a.allocUnsafe=function($){return v($)},a.allocUnsafeSlow=function($){return v($)};function M($,j){if((typeof j!="string"||j==="")&&(j="utf8"),!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const Q=X($,j)|0;let Ae=s(Q);const Me=Ae.write($,j);return Me!==Q&&(Ae=Ae.slice(0,Me)),Ae}function E($){const j=$.length<0?0:V($.length)|0,Q=s(j);for(let Ae=0;Ae<j;Ae+=1)Q[Ae]=$[Ae]&255;return Q}function P($){if(Ln($,Uint8Array)){const j=new Uint8Array($);return U(j.buffer,j.byteOffset,j.byteLength)}return E($)}function U($,j,Q){if(j<0||$.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<j+(Q||0))throw new RangeError('"length" is outside of buffer bounds');let Ae;return j===void 0&&Q===void 0?Ae=new Uint8Array($):Q===void 0?Ae=new Uint8Array($,j):Ae=new Uint8Array($,j,Q),Object.setPrototypeOf(Ae,a.prototype),Ae}function z($){if(a.isBuffer($)){const j=V($.length)|0,Q=s(j);return Q.length===0||$.copy(Q,0,0,j),Q}if($.length!==void 0)return typeof $.length!="number"||In($.length)?s(0):E($);if($.type==="Buffer"&&Array.isArray($.data))return E($.data)}function V($){if($>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return $|0}function Z($){return+$!=$&&($=0),a.alloc(+$)}a.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==a.prototype},a.compare=function(j,Q){if(Ln(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),Ln(Q,Uint8Array)&&(Q=a.from(Q,Q.offset,Q.byteLength)),!a.isBuffer(j)||!a.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===Q)return 0;let Ae=j.length,Me=Q.length;for(let Ne=0,We=Math.min(Ae,Me);Ne<We;++Ne)if(j[Ne]!==Q[Ne]){Ae=j[Ne],Me=Q[Ne];break}return Ae<Me?-1:Me<Ae?1:0},a.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(j,Q){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return a.alloc(0);let Ae;if(Q===void 0)for(Q=0,Ae=0;Ae<j.length;++Ae)Q+=j[Ae].length;const Me=a.allocUnsafe(Q);let Ne=0;for(Ae=0;Ae<j.length;++Ae){let We=j[Ae];if(Ln(We,Uint8Array))Ne+We.length>Me.length?(a.isBuffer(We)||(We=a.from(We)),We.copy(Me,Ne)):Uint8Array.prototype.set.call(Me,We,Ne);else if(a.isBuffer(We))We.copy(Me,Ne);else throw new TypeError('"list" argument must be an Array of Buffers');Ne+=We.length}return Me};function X($,j){if(a.isBuffer($))return $.length;if(ArrayBuffer.isView($)||Ln($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const Q=$.length,Ae=arguments.length>2&&arguments[2]===!0;if(!Ae&&Q===0)return 0;let Me=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return Q;case"utf8":case"utf-8":return nn($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q*2;case"hex":return Q>>>1;case"base64":return Mi($).length;default:if(Me)return Ae?-1:nn($).length;j=(""+j).toLowerCase(),Me=!0}}a.byteLength=X;function re($,j,Q){let Ae=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((Q===void 0||Q>this.length)&&(Q=this.length),Q<=0)||(Q>>>=0,j>>>=0,Q<=j))return"";for($||($="utf8");;)switch($){case"hex":return mt(this,j,Q);case"utf8":case"utf-8":return Oe(this,j,Q);case"ascii":return Ve(this,j,Q);case"latin1":case"binary":return ut(this,j,Q);case"base64":return Ce(this,j,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,j,Q);default:if(Ae)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),Ae=!0}}a.prototype._isBuffer=!0;function ee($,j,Q){const Ae=$[j];$[j]=$[Q],$[Q]=Ae}a.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Q=0;Q<j;Q+=2)ee(this,Q,Q+1);return this},a.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Q=0;Q<j;Q+=4)ee(this,Q,Q+3),ee(this,Q+1,Q+2);return this},a.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Q=0;Q<j;Q+=8)ee(this,Q,Q+7),ee(this,Q+1,Q+6),ee(this,Q+2,Q+5),ee(this,Q+3,Q+4);return this},a.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?Oe(this,0,j):re.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(j){if(!a.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:a.compare(this,j)===0},a.prototype.inspect=function(){let j="";const Q=n.INSPECT_MAX_BYTES;return j=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(j+=" ... "),"<Buffer "+j+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(j,Q,Ae,Me,Ne){if(Ln(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(Q===void 0&&(Q=0),Ae===void 0&&(Ae=j?j.length:0),Me===void 0&&(Me=0),Ne===void 0&&(Ne=this.length),Q<0||Ae>j.length||Me<0||Ne>this.length)throw new RangeError("out of range index");if(Me>=Ne&&Q>=Ae)return 0;if(Me>=Ne)return-1;if(Q>=Ae)return 1;if(Q>>>=0,Ae>>>=0,Me>>>=0,Ne>>>=0,this===j)return 0;let We=Ne-Me,it=Ae-Q;const bt=Math.min(We,it),Ye=this.slice(Me,Ne),at=j.slice(Q,Ae);for(let C=0;C<bt;++C)if(Ye[C]!==at[C]){We=Ye[C],it=at[C];break}return We<it?-1:it<We?1:0};function ne($,j,Q,Ae,Me){if($.length===0)return-1;if(typeof Q=="string"?(Ae=Q,Q=0):Q>2147483647?Q=2147483647:Q<-2147483648&&(Q=-2147483648),Q=+Q,In(Q)&&(Q=Me?0:$.length-1),Q<0&&(Q=$.length+Q),Q>=$.length){if(Me)return-1;Q=$.length-1}else if(Q<0)if(Me)Q=0;else return-1;if(typeof j=="string"&&(j=a.from(j,Ae)),a.isBuffer(j))return j.length===0?-1:q($,j,Q,Ae,Me);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?Me?Uint8Array.prototype.indexOf.call($,j,Q):Uint8Array.prototype.lastIndexOf.call($,j,Q):q($,[j],Q,Ae,Me);throw new TypeError("val must be string, number or Buffer")}function q($,j,Q,Ae,Me){let Ne=1,We=$.length,it=j.length;if(Ae!==void 0&&(Ae=String(Ae).toLowerCase(),Ae==="ucs2"||Ae==="ucs-2"||Ae==="utf16le"||Ae==="utf-16le")){if($.length<2||j.length<2)return-1;Ne=2,We/=2,it/=2,Q/=2}function bt(at,C){return Ne===1?at[C]:at.readUInt16BE(C*Ne)}let Ye;if(Me){let at=-1;for(Ye=Q;Ye<We;Ye++)if(bt($,Ye)===bt(j,at===-1?0:Ye-at)){if(at===-1&&(at=Ye),Ye-at+1===it)return at*Ne}else at!==-1&&(Ye-=Ye-at),at=-1}else for(Q+it>We&&(Q=We-it),Ye=Q;Ye>=0;Ye--){let at=!0;for(let C=0;C<it;C++)if(bt($,Ye+C)!==bt(j,C)){at=!1;break}if(at)return Ye}return-1}a.prototype.includes=function(j,Q,Ae){return this.indexOf(j,Q,Ae)!==-1},a.prototype.indexOf=function(j,Q,Ae){return ne(this,j,Q,Ae,!0)},a.prototype.lastIndexOf=function(j,Q,Ae){return ne(this,j,Q,Ae,!1)};function le($,j,Q,Ae){Q=Number(Q)||0;const Me=$.length-Q;Ae?(Ae=Number(Ae),Ae>Me&&(Ae=Me)):Ae=Me;const Ne=j.length;Ae>Ne/2&&(Ae=Ne/2);let We;for(We=0;We<Ae;++We){const it=parseInt(j.substr(We*2,2),16);if(In(it))return We;$[Q+We]=it}return We}function ue($,j,Q,Ae){return Fn(nn(j,$.length-Q),$,Q,Ae)}function ve($,j,Q,Ae){return Fn(Kn(j),$,Q,Ae)}function pe($,j,Q,Ae){return Fn(Mi(j),$,Q,Ae)}function Be($,j,Q,Ae){return Fn(Wn(j,$.length-Q),$,Q,Ae)}a.prototype.write=function(j,Q,Ae,Me){if(Q===void 0)Me="utf8",Ae=this.length,Q=0;else if(Ae===void 0&&typeof Q=="string")Me=Q,Ae=this.length,Q=0;else if(isFinite(Q))Q=Q>>>0,isFinite(Ae)?(Ae=Ae>>>0,Me===void 0&&(Me="utf8")):(Me=Ae,Ae=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ne=this.length-Q;if((Ae===void 0||Ae>Ne)&&(Ae=Ne),j.length>0&&(Ae<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Me||(Me="utf8");let We=!1;for(;;)switch(Me){case"hex":return le(this,j,Q,Ae);case"utf8":case"utf-8":return ue(this,j,Q,Ae);case"ascii":case"latin1":case"binary":return ve(this,j,Q,Ae);case"base64":return pe(this,j,Q,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,j,Q,Ae);default:if(We)throw new TypeError("Unknown encoding: "+Me);Me=(""+Me).toLowerCase(),We=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ce($,j,Q){return j===0&&Q===$.length?e.fromByteArray($):e.fromByteArray($.slice(j,Q))}function Oe($,j,Q){Q=Math.min($.length,Q);const Ae=[];let Me=j;for(;Me<Q;){const Ne=$[Me];let We=null,it=Ne>239?4:Ne>223?3:Ne>191?2:1;if(Me+it<=Q){let bt,Ye,at,C;switch(it){case 1:Ne<128&&(We=Ne);break;case 2:bt=$[Me+1],(bt&192)===128&&(C=(Ne&31)<<6|bt&63,C>127&&(We=C));break;case 3:bt=$[Me+1],Ye=$[Me+2],(bt&192)===128&&(Ye&192)===128&&(C=(Ne&15)<<12|(bt&63)<<6|Ye&63,C>2047&&(C<55296||C>57343)&&(We=C));break;case 4:bt=$[Me+1],Ye=$[Me+2],at=$[Me+3],(bt&192)===128&&(Ye&192)===128&&(at&192)===128&&(C=(Ne&15)<<18|(bt&63)<<12|(Ye&63)<<6|at&63,C>65535&&C<1114112&&(We=C))}}We===null?(We=65533,it=1):We>65535&&(We-=65536,Ae.push(We>>>10&1023|55296),We=56320|We&1023),Ae.push(We),Me+=it}return Ee(Ae)}const Fe=4096;function Ee($){const j=$.length;if(j<=Fe)return String.fromCharCode.apply(String,$);let Q="",Ae=0;for(;Ae<j;)Q+=String.fromCharCode.apply(String,$.slice(Ae,Ae+=Fe));return Q}function Ve($,j,Q){let Ae="";Q=Math.min($.length,Q);for(let Me=j;Me<Q;++Me)Ae+=String.fromCharCode($[Me]&127);return Ae}function ut($,j,Q){let Ae="";Q=Math.min($.length,Q);for(let Me=j;Me<Q;++Me)Ae+=String.fromCharCode($[Me]);return Ae}function mt($,j,Q){const Ae=$.length;(!j||j<0)&&(j=0),(!Q||Q<0||Q>Ae)&&(Q=Ae);let Me="";for(let Ne=j;Ne<Q;++Ne)Me+=oi[$[Ne]];return Me}function Pe($,j,Q){const Ae=$.slice(j,Q);let Me="";for(let Ne=0;Ne<Ae.length-1;Ne+=2)Me+=String.fromCharCode(Ae[Ne]+Ae[Ne+1]*256);return Me}a.prototype.slice=function(j,Q){const Ae=this.length;j=~~j,Q=Q===void 0?Ae:~~Q,j<0?(j+=Ae,j<0&&(j=0)):j>Ae&&(j=Ae),Q<0?(Q+=Ae,Q<0&&(Q=0)):Q>Ae&&(Q=Ae),Q<j&&(Q=j);const Me=this.subarray(j,Q);return Object.setPrototypeOf(Me,a.prototype),Me};function De($,j,Q){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+j>Q)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(j,Q,Ae){j=j>>>0,Q=Q>>>0,Ae||De(j,Q,this.length);let Me=this[j],Ne=1,We=0;for(;++We<Q&&(Ne*=256);)Me+=this[j+We]*Ne;return Me},a.prototype.readUintBE=a.prototype.readUIntBE=function(j,Q,Ae){j=j>>>0,Q=Q>>>0,Ae||De(j,Q,this.length);let Me=this[j+--Q],Ne=1;for(;Q>0&&(Ne*=256);)Me+=this[j+--Q]*Ne;return Me},a.prototype.readUint8=a.prototype.readUInt8=function(j,Q){return j=j>>>0,Q||De(j,1,this.length),this[j]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(j,Q){return j=j>>>0,Q||De(j,2,this.length),this[j]|this[j+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(j,Q){return j=j>>>0,Q||De(j,2,this.length),this[j]<<8|this[j+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},a.prototype.readBigUInt64LE=Tn(function(j){j=j>>>0,vt(j,"offset");const Q=this[j],Ae=this[j+7];(Q===void 0||Ae===void 0)&&wt(j,this.length-8);const Me=Q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,Ne=this[++j]+this[++j]*2**8+this[++j]*2**16+Ae*2**24;return BigInt(Me)+(BigInt(Ne)<<BigInt(32))}),a.prototype.readBigUInt64BE=Tn(function(j){j=j>>>0,vt(j,"offset");const Q=this[j],Ae=this[j+7];(Q===void 0||Ae===void 0)&&wt(j,this.length-8);const Me=Q*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],Ne=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+Ae;return(BigInt(Me)<<BigInt(32))+BigInt(Ne)}),a.prototype.readIntLE=function(j,Q,Ae){j=j>>>0,Q=Q>>>0,Ae||De(j,Q,this.length);let Me=this[j],Ne=1,We=0;for(;++We<Q&&(Ne*=256);)Me+=this[j+We]*Ne;return Ne*=128,Me>=Ne&&(Me-=Math.pow(2,8*Q)),Me},a.prototype.readIntBE=function(j,Q,Ae){j=j>>>0,Q=Q>>>0,Ae||De(j,Q,this.length);let Me=Q,Ne=1,We=this[j+--Me];for(;Me>0&&(Ne*=256);)We+=this[j+--Me]*Ne;return Ne*=128,We>=Ne&&(We-=Math.pow(2,8*Q)),We},a.prototype.readInt8=function(j,Q){return j=j>>>0,Q||De(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},a.prototype.readInt16LE=function(j,Q){j=j>>>0,Q||De(j,2,this.length);const Ae=this[j]|this[j+1]<<8;return Ae&32768?Ae|4294901760:Ae},a.prototype.readInt16BE=function(j,Q){j=j>>>0,Q||De(j,2,this.length);const Ae=this[j+1]|this[j]<<8;return Ae&32768?Ae|4294901760:Ae},a.prototype.readInt32LE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},a.prototype.readInt32BE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},a.prototype.readBigInt64LE=Tn(function(j){j=j>>>0,vt(j,"offset");const Q=this[j],Ae=this[j+7];(Q===void 0||Ae===void 0)&&wt(j,this.length-8);const Me=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(Ae<<24);return(BigInt(Me)<<BigInt(32))+BigInt(Q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),a.prototype.readBigInt64BE=Tn(function(j){j=j>>>0,vt(j,"offset");const Q=this[j],Ae=this[j+7];(Q===void 0||Ae===void 0)&&wt(j,this.length-8);const Me=(Q<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(Me)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+Ae)}),a.prototype.readFloatLE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),t.read(this,j,!0,23,4)},a.prototype.readFloatBE=function(j,Q){return j=j>>>0,Q||De(j,4,this.length),t.read(this,j,!1,23,4)},a.prototype.readDoubleLE=function(j,Q){return j=j>>>0,Q||De(j,8,this.length),t.read(this,j,!0,52,8)},a.prototype.readDoubleBE=function(j,Q){return j=j>>>0,Q||De(j,8,this.length),t.read(this,j,!1,52,8)};function Xe($,j,Q,Ae,Me,Ne){if(!a.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>Me||j<Ne)throw new RangeError('"value" argument is out of bounds');if(Q+Ae>$.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(j,Q,Ae,Me){if(j=+j,Q=Q>>>0,Ae=Ae>>>0,!Me){const it=Math.pow(2,8*Ae)-1;Xe(this,j,Q,Ae,it,0)}let Ne=1,We=0;for(this[Q]=j&255;++We<Ae&&(Ne*=256);)this[Q+We]=j/Ne&255;return Q+Ae},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(j,Q,Ae,Me){if(j=+j,Q=Q>>>0,Ae=Ae>>>0,!Me){const it=Math.pow(2,8*Ae)-1;Xe(this,j,Q,Ae,it,0)}let Ne=Ae-1,We=1;for(this[Q+Ne]=j&255;--Ne>=0&&(We*=256);)this[Q+Ne]=j/We&255;return Q+Ae},a.prototype.writeUint8=a.prototype.writeUInt8=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,1,255,0),this[Q]=j&255,Q+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,2,65535,0),this[Q]=j&255,this[Q+1]=j>>>8,Q+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,2,65535,0),this[Q]=j>>>8,this[Q+1]=j&255,Q+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,4,4294967295,0),this[Q+3]=j>>>24,this[Q+2]=j>>>16,this[Q+1]=j>>>8,this[Q]=j&255,Q+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,4,4294967295,0),this[Q]=j>>>24,this[Q+1]=j>>>16,this[Q+2]=j>>>8,this[Q+3]=j&255,Q+4};function Ke($,j,Q,Ae,Me){Ct(j,Ae,Me,$,Q,7);let Ne=Number(j&BigInt(4294967295));$[Q++]=Ne,Ne=Ne>>8,$[Q++]=Ne,Ne=Ne>>8,$[Q++]=Ne,Ne=Ne>>8,$[Q++]=Ne;let We=Number(j>>BigInt(32)&BigInt(4294967295));return $[Q++]=We,We=We>>8,$[Q++]=We,We=We>>8,$[Q++]=We,We=We>>8,$[Q++]=We,Q}function Bt($,j,Q,Ae,Me){Ct(j,Ae,Me,$,Q,7);let Ne=Number(j&BigInt(4294967295));$[Q+7]=Ne,Ne=Ne>>8,$[Q+6]=Ne,Ne=Ne>>8,$[Q+5]=Ne,Ne=Ne>>8,$[Q+4]=Ne;let We=Number(j>>BigInt(32)&BigInt(4294967295));return $[Q+3]=We,We=We>>8,$[Q+2]=We,We=We>>8,$[Q+1]=We,We=We>>8,$[Q]=We,Q+8}a.prototype.writeBigUInt64LE=Tn(function(j,Q=0){return Ke(this,j,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Tn(function(j,Q=0){return Bt(this,j,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(j,Q,Ae,Me){if(j=+j,Q=Q>>>0,!Me){const bt=Math.pow(2,8*Ae-1);Xe(this,j,Q,Ae,bt-1,-bt)}let Ne=0,We=1,it=0;for(this[Q]=j&255;++Ne<Ae&&(We*=256);)j<0&&it===0&&this[Q+Ne-1]!==0&&(it=1),this[Q+Ne]=(j/We>>0)-it&255;return Q+Ae},a.prototype.writeIntBE=function(j,Q,Ae,Me){if(j=+j,Q=Q>>>0,!Me){const bt=Math.pow(2,8*Ae-1);Xe(this,j,Q,Ae,bt-1,-bt)}let Ne=Ae-1,We=1,it=0;for(this[Q+Ne]=j&255;--Ne>=0&&(We*=256);)j<0&&it===0&&this[Q+Ne+1]!==0&&(it=1),this[Q+Ne]=(j/We>>0)-it&255;return Q+Ae},a.prototype.writeInt8=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,1,127,-128),j<0&&(j=255+j+1),this[Q]=j&255,Q+1},a.prototype.writeInt16LE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,2,32767,-32768),this[Q]=j&255,this[Q+1]=j>>>8,Q+2},a.prototype.writeInt16BE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,2,32767,-32768),this[Q]=j>>>8,this[Q+1]=j&255,Q+2},a.prototype.writeInt32LE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,4,2147483647,-2147483648),this[Q]=j&255,this[Q+1]=j>>>8,this[Q+2]=j>>>16,this[Q+3]=j>>>24,Q+4},a.prototype.writeInt32BE=function(j,Q,Ae){return j=+j,Q=Q>>>0,Ae||Xe(this,j,Q,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[Q]=j>>>24,this[Q+1]=j>>>16,this[Q+2]=j>>>8,this[Q+3]=j&255,Q+4},a.prototype.writeBigInt64LE=Tn(function(j,Q=0){return Ke(this,j,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Tn(function(j,Q=0){return Bt(this,j,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ot($,j,Q,Ae,Me,Ne){if(Q+Ae>$.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("Index out of range")}function Et($,j,Q,Ae,Me){return j=+j,Q=Q>>>0,Me||ot($,j,Q,4),t.write($,j,Q,Ae,23,4),Q+4}a.prototype.writeFloatLE=function(j,Q,Ae){return Et(this,j,Q,!0,Ae)},a.prototype.writeFloatBE=function(j,Q,Ae){return Et(this,j,Q,!1,Ae)};function Rt($,j,Q,Ae,Me){return j=+j,Q=Q>>>0,Me||ot($,j,Q,8),t.write($,j,Q,Ae,52,8),Q+8}a.prototype.writeDoubleLE=function(j,Q,Ae){return Rt(this,j,Q,!0,Ae)},a.prototype.writeDoubleBE=function(j,Q,Ae){return Rt(this,j,Q,!1,Ae)},a.prototype.copy=function(j,Q,Ae,Me){if(!a.isBuffer(j))throw new TypeError("argument should be a Buffer");if(Ae||(Ae=0),!Me&&Me!==0&&(Me=this.length),Q>=j.length&&(Q=j.length),Q||(Q=0),Me>0&&Me<Ae&&(Me=Ae),Me===Ae||j.length===0||this.length===0)return 0;if(Q<0)throw new RangeError("targetStart out of bounds");if(Ae<0||Ae>=this.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("sourceEnd out of bounds");Me>this.length&&(Me=this.length),j.length-Q<Me-Ae&&(Me=j.length-Q+Ae);const Ne=Me-Ae;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Q,Ae,Me):Uint8Array.prototype.set.call(j,this.subarray(Ae,Me),Q),Ne},a.prototype.fill=function(j,Q,Ae,Me){if(typeof j=="string"){if(typeof Q=="string"?(Me=Q,Q=0,Ae=this.length):typeof Ae=="string"&&(Me=Ae,Ae=this.length),Me!==void 0&&typeof Me!="string")throw new TypeError("encoding must be a string");if(typeof Me=="string"&&!a.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);if(j.length===1){const We=j.charCodeAt(0);(Me==="utf8"&&We<128||Me==="latin1")&&(j=We)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(Q<0||this.length<Q||this.length<Ae)throw new RangeError("Out of range index");if(Ae<=Q)return this;Q=Q>>>0,Ae=Ae===void 0?this.length:Ae>>>0,j||(j=0);let Ne;if(typeof j=="number")for(Ne=Q;Ne<Ae;++Ne)this[Ne]=j;else{const We=a.isBuffer(j)?j:a.from(j,Me),it=We.length;if(it===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(Ne=0;Ne<Ae-Q;++Ne)this[Ne+Q]=We[Ne%it]}return this};const Ue={};function ke($,j,Q){Ue[$]=class extends Q{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(Me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Me,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}ke("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?`${$} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function($,j){return`The "${$}" argument must be of type number. Received type ${typeof j}`},TypeError),ke("ERR_OUT_OF_RANGE",function($,j,Q){let Ae=`The value of "${$}" is out of range.`,Me=Q;return Number.isInteger(Q)&&Math.abs(Q)>2**32?Me=Te(String(Q)):typeof Q=="bigint"&&(Me=String(Q),(Q>BigInt(2)**BigInt(32)||Q<-(BigInt(2)**BigInt(32)))&&(Me=Te(Me)),Me+="n"),Ae+=` It must be ${j}. Received ${Me}`,Ae},RangeError);function Te($){let j="",Q=$.length;const Ae=$[0]==="-"?1:0;for(;Q>=Ae+4;Q-=3)j=`_${$.slice(Q-3,Q)}${j}`;return`${$.slice(0,Q)}${j}`}function He($,j,Q){vt(j,"offset"),($[j]===void 0||$[j+Q]===void 0)&&wt(j,$.length-(Q+1))}function Ct($,j,Q,Ae,Me,Ne){if($>Q||$<j){const We=typeof j=="bigint"?"n":"";let it;throw j===0||j===BigInt(0)?it=`>= 0${We} and < 2${We} ** ${(Ne+1)*8}${We}`:it=`>= -(2${We} ** ${(Ne+1)*8-1}${We}) and < 2 ** ${(Ne+1)*8-1}${We}`,new Ue.ERR_OUT_OF_RANGE("value",it,$)}He(Ae,Me,Ne)}function vt($,j){if(typeof $!="number")throw new Ue.ERR_INVALID_ARG_TYPE(j,"number",$)}function wt($,j,Q){throw Math.floor($)!==$?(vt($,Q),new Ue.ERR_OUT_OF_RANGE("offset","an integer",$)):j<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,$)}const Ft=/[^+/0-9A-Za-z-_]/g;function Pt($){if($=$.split("=")[0],$=$.trim().replace(Ft,""),$.length<2)return"";for(;$.length%4!==0;)$=$+"=";return $}function nn($,j){j=j||1/0;let Q;const Ae=$.length;let Me=null;const Ne=[];for(let We=0;We<Ae;++We){if(Q=$.charCodeAt(We),Q>55295&&Q<57344){if(!Me){if(Q>56319){(j-=3)>-1&&Ne.push(239,191,189);continue}else if(We+1===Ae){(j-=3)>-1&&Ne.push(239,191,189);continue}Me=Q;continue}if(Q<56320){(j-=3)>-1&&Ne.push(239,191,189),Me=Q;continue}Q=(Me-55296<<10|Q-56320)+65536}else Me&&(j-=3)>-1&&Ne.push(239,191,189);if(Me=null,Q<128){if((j-=1)<0)break;Ne.push(Q)}else if(Q<2048){if((j-=2)<0)break;Ne.push(Q>>6|192,Q&63|128)}else if(Q<65536){if((j-=3)<0)break;Ne.push(Q>>12|224,Q>>6&63|128,Q&63|128)}else if(Q<1114112){if((j-=4)<0)break;Ne.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,Q&63|128)}else throw new Error("Invalid code point")}return Ne}function Kn($){const j=[];for(let Q=0;Q<$.length;++Q)j.push($.charCodeAt(Q)&255);return j}function Wn($,j){let Q,Ae,Me;const Ne=[];for(let We=0;We<$.length&&!((j-=2)<0);++We)Q=$.charCodeAt(We),Ae=Q>>8,Me=Q%256,Ne.push(Me),Ne.push(Ae);return Ne}function Mi($){return e.toByteArray(Pt($))}function Fn($,j,Q,Ae){let Me;for(Me=0;Me<Ae&&!(Me+Q>=j.length||Me>=$.length);++Me)j[Me+Q]=$[Me];return Me}function Ln($,j){return $ instanceof j||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===j.name}function In($){return $!==$}const oi=(function(){const $="0123456789abcdef",j=new Array(256);for(let Q=0;Q<16;++Q){const Ae=Q*16;for(let Me=0;Me<16;++Me)j[Ae+Me]=$[Q]+$[Me]}return j})();function Tn($){return typeof BigInt>"u"?je:$}function je(){throw new Error("BigInt not supported")}})(qO)),qO}var Iue=Oue();const Tue=xu(Iue);var YO,Ez;function kue(){if(Ez)return YO;Ez=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/[\\^$.*+?()[\]{}|]/g,p=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,M=typeof window=="object"&&window&&window.Object===Object&&window,E=typeof self=="object"&&self&&self.Object===Object&&self,P=M||E||Function("return this")();function U(Ye,at){return Ye?.[at]}function z(Ye){var at=!1;if(Ye!=null&&typeof Ye.toString!="function")try{at=!!(Ye+"")}catch{}return at}var V=Array.prototype,Z=Function.prototype,X=Object.prototype,re=P["__core-js_shared__"],ee=(function(){var Ye=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return Ye?"Symbol(src)_1."+Ye:""})(),ne=Z.toString,q=X.hasOwnProperty,le=X.toString,ue=RegExp("^"+ne.call(q).replace(d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=P.Symbol,pe=V.splice,Be=Mi(P,"Map"),Ce=Mi(Object,"create"),Oe=ve?ve.prototype:void 0,Fe=Oe?Oe.toString:void 0;function Ee(Ye){var at=-1,C=Ye?Ye.length:0;for(this.clear();++at<C;){var Ut=Ye[at];this.set(Ut[0],Ut[1])}}function Ve(){this.__data__=Ce?Ce(null):{}}function ut(Ye){return this.has(Ye)&&delete this.__data__[Ye]}function mt(Ye){var at=this.__data__;if(Ce){var C=at[Ye];return C===e?void 0:C}return q.call(at,Ye)?at[Ye]:void 0}function Pe(Ye){var at=this.__data__;return Ce?at[Ye]!==void 0:q.call(at,Ye)}function De(Ye,at){var C=this.__data__;return C[Ye]=Ce&&at===void 0?e:at,this}Ee.prototype.clear=Ve,Ee.prototype.delete=ut,Ee.prototype.get=mt,Ee.prototype.has=Pe,Ee.prototype.set=De;function Xe(Ye){var at=-1,C=Ye?Ye.length:0;for(this.clear();++at<C;){var Ut=Ye[at];this.set(Ut[0],Ut[1])}}function Ke(){this.__data__=[]}function Bt(Ye){var at=this.__data__,C=wt(at,Ye);if(C<0)return!1;var Ut=at.length-1;return C==Ut?at.pop():pe.call(at,C,1),!0}function ot(Ye){var at=this.__data__,C=wt(at,Ye);return C<0?void 0:at[C][1]}function Et(Ye){return wt(this.__data__,Ye)>-1}function Rt(Ye,at){var C=this.__data__,Ut=wt(C,Ye);return Ut<0?C.push([Ye,at]):C[Ut][1]=at,this}Xe.prototype.clear=Ke,Xe.prototype.delete=Bt,Xe.prototype.get=ot,Xe.prototype.has=Et,Xe.prototype.set=Rt;function Ue(Ye){var at=-1,C=Ye?Ye.length:0;for(this.clear();++at<C;){var Ut=Ye[at];this.set(Ut[0],Ut[1])}}function ke(){this.__data__={hash:new Ee,map:new(Be||Xe),string:new Ee}}function Te(Ye){return Wn(this,Ye).delete(Ye)}function He(Ye){return Wn(this,Ye).get(Ye)}function Ct(Ye){return Wn(this,Ye).has(Ye)}function vt(Ye,at){return Wn(this,Ye).set(Ye,at),this}Ue.prototype.clear=ke,Ue.prototype.delete=Te,Ue.prototype.get=He,Ue.prototype.has=Ct,Ue.prototype.set=vt;function wt(Ye,at){for(var C=Ye.length;C--;)if(j(Ye[C][0],at))return C;return-1}function Ft(Ye,at){at=Fn(at,Ye)?[at]:Kn(at);for(var C=0,Ut=at.length;Ye!=null&&C<Ut;)Ye=Ye[Tn(at[C++])];return C&&C==Ut?Ye:void 0}function Pt(Ye){if(!Me(Ye)||In(Ye))return!1;var at=Ae(Ye)||z(Ye)?ue:v;return at.test(je(Ye))}function nn(Ye){if(typeof Ye=="string")return Ye;if(We(Ye))return Fe?Fe.call(Ye):"";var at=Ye+"";return at=="0"&&1/Ye==-1/0?"-0":at}function Kn(Ye){return Q(Ye)?Ye:oi(Ye)}function Wn(Ye,at){var C=Ye.__data__;return Ln(at)?C[typeof at=="string"?"string":"hash"]:C.map}function Mi(Ye,at){var C=U(Ye,at);return Pt(C)?C:void 0}function Fn(Ye,at){if(Q(Ye))return!1;var C=typeof Ye;return C=="number"||C=="symbol"||C=="boolean"||Ye==null||We(Ye)?!0:s.test(Ye)||!o.test(Ye)||at!=null&&Ye in Object(at)}function Ln(Ye){var at=typeof Ye;return at=="string"||at=="number"||at=="symbol"||at=="boolean"?Ye!=="__proto__":Ye===null}function In(Ye){return!!ee&&ee in Ye}var oi=$(function(Ye){Ye=it(Ye);var at=[];return a.test(Ye)&&at.push(""),Ye.replace(c,function(C,Ut,gn,bn){at.push(gn?bn.replace(p,"$1"):Ut||C)}),at});function Tn(Ye){if(typeof Ye=="string"||We(Ye))return Ye;var at=Ye+"";return at=="0"&&1/Ye==-1/0?"-0":at}function je(Ye){if(Ye!=null){try{return ne.call(Ye)}catch{}try{return Ye+""}catch{}}return""}function $(Ye,at){if(typeof Ye!="function"||at&&typeof at!="function")throw new TypeError(n);var C=function(){var Ut=arguments,gn=at?at.apply(this,Ut):Ut[0],bn=C.cache;if(bn.has(gn))return bn.get(gn);var _n=Ye.apply(this,Ut);return C.cache=bn.set(gn,_n),_n};return C.cache=new($.Cache||Ue),C}$.Cache=Ue;function j(Ye,at){return Ye===at||Ye!==Ye&&at!==at}var Q=Array.isArray;function Ae(Ye){var at=Me(Ye)?le.call(Ye):"";return at==t||at==i}function Me(Ye){var at=typeof Ye;return!!Ye&&(at=="object"||at=="function")}function Ne(Ye){return!!Ye&&typeof Ye=="object"}function We(Ye){return typeof Ye=="symbol"||Ne(Ye)&&le.call(Ye)==r}function it(Ye){return Ye==null?"":nn(Ye)}function bt(Ye,at,C){var Ut=Ye==null?void 0:Ft(Ye,at);return Ut===void 0?C:Ut}return YO=bt,YO}var Due=kue();const Rue=xu(Due);var Y3={exports:{}};var Pue=Y3.exports,Bz;function Uue(){return Bz||(Bz=1,(function(n,e){(function(){var t,i="4.17.23",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",v=1,M=2,E=4,P=1,U=2,z=1,V=2,Z=4,X=8,re=16,ee=32,ne=64,q=128,le=256,ue=512,ve=30,pe="...",Be=800,Ce=16,Oe=1,Fe=2,Ee=3,Ve=1/0,ut=9007199254740991,mt=17976931348623157e292,Pe=NaN,De=4294967295,Xe=De-1,Ke=De>>>1,Bt=[["ary",q],["bind",z],["bindKey",V],["curry",X],["curryRight",re],["flip",ue],["partial",ee],["partialRight",ne],["rearg",le]],ot="[object Arguments]",Et="[object Array]",Rt="[object AsyncFunction]",Ue="[object Boolean]",ke="[object Date]",Te="[object DOMException]",He="[object Error]",Ct="[object Function]",vt="[object GeneratorFunction]",wt="[object Map]",Ft="[object Number]",Pt="[object Null]",nn="[object Object]",Kn="[object Promise]",Wn="[object Proxy]",Mi="[object RegExp]",Fn="[object Set]",Ln="[object String]",In="[object Symbol]",oi="[object Undefined]",Tn="[object WeakMap]",je="[object WeakSet]",$="[object ArrayBuffer]",j="[object DataView]",Q="[object Float32Array]",Ae="[object Float64Array]",Me="[object Int8Array]",Ne="[object Int16Array]",We="[object Int32Array]",it="[object Uint8Array]",bt="[object Uint8ClampedArray]",Ye="[object Uint16Array]",at="[object Uint32Array]",C=/\b__p \+= '';/g,Ut=/\b(__p \+=) '' \+/g,gn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bn=/&(?:amp|lt|gt|quot|#39);/g,_n=/[&<>"']/g,Mt=RegExp(bn.source),xi=RegExp(_n.source),ji=/<%-([\s\S]+?)%>/g,Qn=/<%([\s\S]+?)%>/g,Zn=/<%=([\s\S]+?)%>/g,Yi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qi=/^\w*$/,Ui=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vi=/[\\^$.*+?()[\]{}|]/g,Ki=RegExp(Vi.source),Ir=/^\s+/,Eo=/\s/,cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rr=/\{\n\/\* \[wrapped with (.+)\] \*/,Yo=/,? & /,aa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lo=/[()=,{}\[\]\/\s]/,Dn=/\\(\\)?/g,er=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ai=/\w*$/,ja=/^[-+]0x[0-9a-f]+$/i,_A=/^0b[01]+$/i,Sl=/^\[object .+?Constructor\]$/,Hi=/^0o[0-7]+$/i,$u=/^(?:0|[1-9]\d*)$/,fo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xa=/($^)/,El=/['\n\r\u2028\u2029\\]/g,Na="\\ud800-\\udfff",Lo="\\u0300-\\u036f",bc="\\ufe20-\\ufe2f",Vo="\\u20d0-\\u20ff",vr=Lo+bc+Vo,Ga="\\u2700-\\u27bf",es="a-z\\xdf-\\xf6\\xf8-\\xff",Mu="\\xac\\xb1\\xd7\\xf7",wu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hl="\\u2000-\\u206f",Xc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dl="A-Z\\xc0-\\xd6\\xd8-\\xde",Wa="\\ufe0e\\ufe0f",Ar=Mu+wu+hl+Xc,Hu="[']",Bl="["+Na+"]",Ol="["+Ar+"]",Su="["+vr+"]",_c="\\d+",zh="["+Ga+"]",Zs="["+es+"]",xc="[^"+Na+Ar+_c+Ga+es+dl+"]",Zl="\\ud83c[\\udffb-\\udfff]",Jc="(?:"+Su+"|"+Zl+")",Xl="[^"+Na+"]",Jl="(?:\\ud83c[\\udde6-\\uddff]){2}",ms="[\\ud800-\\udbff][\\udc00-\\udfff]",Bo="["+dl+"]",eu="\\u200d",Eu="(?:"+Zs+"|"+xc+")",Is="(?:"+Bo+"|"+xc+")",Bu="(?:"+Hu+"(?:d|ll|m|re|s|t|ve))?",tu="(?:"+Hu+"(?:D|LL|M|RE|S|T|VE))?",Zu=Jc+"?",nr="["+Wa+"]?",Ja="(?:"+eu+"(?:"+[Xl,Jl,ms].join("|")+")"+nr+Zu+")*",ts="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ns=nr+Zu+Ja,mo="(?:"+[zh,Jl,ms].join("|")+")"+ns,po="(?:"+[Xl+Su+"?",Su,Jl,ms,Bl].join("|")+")",wi=RegExp(Hu,"g"),ro=RegExp(Su,"g"),Xs=RegExp(Zl+"(?="+Zl+")|"+po+ns,"g"),bo=RegExp([Bo+"?"+Zs+"+"+Bu+"(?="+[Ol,Bo,"$"].join("|")+")",Is+"+"+tu+"(?="+[Ol,Bo+Eu,"$"].join("|")+")",Bo+"?"+Eu+"+"+Bu,Bo+"+"+tu,Xu,ts,_c,mo].join("|"),"g"),Ns=RegExp("["+eu+Na+vr+Wa+"]"),Hr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,la=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],el=-1,Zi={};Zi[Q]=Zi[Ae]=Zi[Me]=Zi[Ne]=Zi[We]=Zi[it]=Zi[bt]=Zi[Ye]=Zi[at]=!0,Zi[ot]=Zi[Et]=Zi[$]=Zi[Ue]=Zi[j]=Zi[ke]=Zi[He]=Zi[Ct]=Zi[wt]=Zi[Ft]=Zi[nn]=Zi[Mi]=Zi[Fn]=Zi[Ln]=Zi[Tn]=!1;var Rr={};Rr[ot]=Rr[Et]=Rr[$]=Rr[j]=Rr[Ue]=Rr[ke]=Rr[Q]=Rr[Ae]=Rr[Me]=Rr[Ne]=Rr[We]=Rr[wt]=Rr[Ft]=Rr[nn]=Rr[Mi]=Rr[Fn]=Rr[Ln]=Rr[In]=Rr[it]=Rr[bt]=Rr[Ye]=Rr[at]=!0,Rr[He]=Rr[Ct]=Rr[Tn]=!1;var ie={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},_e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qn=parseFloat,Rn=parseInt,Ti=typeof window=="object"&&window&&window.Object===Object&&window,Ni=typeof self=="object"&&self&&self.Object===Object&&self,Yn=Ti||Ni||Function("return this")(),Oi=e&&!e.nodeType&&e,ni=Oi&&!0&&n&&!n.nodeType&&n,si=ni&&ni.exports===Oi,mr=si&&Ti.process,ii=(function(){try{var Dt=ni&&ni.require&&ni.require("util").types;return Dt||mr&&mr.binding&&mr.binding("util")}catch{}})(),jr=ii&&ii.isArrayBuffer,Oo=ii&&ii.isDate,Ko=ii&&ii.isMap,ps=ii&&ii.isRegExp,oh=ii&&ii.isSet,Il=ii&&ii.isTypedArray;function gs(Dt,ln,tn){switch(tn.length){case 0:return Dt.call(ln);case 1:return Dt.call(ln,tn[0]);case 2:return Dt.call(ln,tn[0],tn[1]);case 3:return Dt.call(ln,tn[0],tn[1],tn[2])}return Dt.apply(ln,tn)}function Yv(Dt,ln,tn,yi){for(var yr=-1,Nr=Dt==null?0:Dt.length;++yr<Nr;){var ys=Dt[yr];ln(yi,ys,tn(ys),Dt)}return yi}function Ou(Dt,ln){for(var tn=-1,yi=Dt==null?0:Dt.length;++tn<yi&&ln(Dt[tn],tn,Dt)!==!1;);return Dt}function nu(Dt,ln){for(var tn=Dt==null?0:Dt.length;tn--&&ln(Dt[tn],tn,Dt)!==!1;);return Dt}function eA(Dt,ln){for(var tn=-1,yi=Dt==null?0:Dt.length;++tn<yi;)if(!ln(Dt[tn],tn,Dt))return!1;return!0}function _o(Dt,ln){for(var tn=-1,yi=Dt==null?0:Dt.length,yr=0,Nr=[];++tn<yi;){var ys=Dt[tn];ln(ys,tn,Dt)&&(Nr[yr++]=ys)}return Nr}function xA(Dt,ln){var tn=Dt==null?0:Dt.length;return!!tn&&MA(Dt,ln,0)>-1}function zd(Dt,ln,tn){for(var yi=-1,yr=Dt==null?0:Dt.length;++yi<yr;)if(tn(ln,Dt[yi]))return!0;return!1}function $o(Dt,ln){for(var tn=-1,yi=Dt==null?0:Dt.length,yr=Array(yi);++tn<yi;)yr[tn]=ln(Dt[tn],tn,Dt);return yr}function To(Dt,ln){for(var tn=-1,yi=ln.length,yr=Dt.length;++tn<yi;)Dt[yr+tn]=ln[tn];return Dt}function e0(Dt,ln,tn,yi){var yr=-1,Nr=Dt==null?0:Dt.length;for(yi&&Nr&&(tn=Dt[++yr]);++yr<Nr;)tn=ln(tn,Dt[yr],yr,Dt);return tn}function t0(Dt,ln,tn,yi){var yr=Dt==null?0:Dt.length;for(yi&&yr&&(tn=Dt[--yr]);yr--;)tn=ln(tn,Dt[yr],yr,Dt);return tn}function n0(Dt,ln){for(var tn=-1,yi=Dt==null?0:Dt.length;++tn<yi;)if(ln(Dt[tn],tn,Dt))return!0;return!1}var Vv=jh("length");function Tf(Dt){return Dt.split("")}function i0(Dt){return Dt.match(aa)||[]}function jd(Dt,ln,tn){var yi;return tn(Dt,function(yr,Nr,ys){if(ln(yr,Nr,ys))return yi=Nr,!1}),yi}function kf(Dt,ln,tn,yi){for(var yr=Dt.length,Nr=tn+(yi?1:-1);yi?Nr--:++Nr<yr;)if(ln(Dt[Nr],Nr,Dt))return Nr;return-1}function MA(Dt,ln,tn){return ln===ln?zm(Dt,ln,tn):kf(Dt,Nd,tn)}function Df(Dt,ln,tn,yi){for(var yr=tn-1,Nr=Dt.length;++yr<Nr;)if(yi(Dt[yr],ln))return yr;return-1}function Nd(Dt){return Dt!==Dt}function Gs(Dt,ln){var tn=Dt==null?0:Dt.length;return tn?r0(Dt,ln)/tn:Pe}function jh(Dt){return function(ln){return ln==null?t:ln[Dt]}}function Nh(Dt){return function(ln){return Dt==null?t:Dt[ln]}}function Gd(Dt,ln,tn,yi,yr){return yr(Dt,function(Nr,ys,Fo){tn=yi?(yi=!1,Nr):ln(tn,Nr,ys,Fo)}),tn}function Gh(Dt,ln){var tn=Dt.length;for(Dt.sort(ln);tn--;)Dt[tn]=Dt[tn].value;return Dt}function r0(Dt,ln){for(var tn,yi=-1,yr=Dt.length;++yi<yr;){var Nr=ln(Dt[yi]);Nr!==t&&(tn=tn===t?Nr:tn+Nr)}return tn}function Wd(Dt,ln){for(var tn=-1,yi=Array(Dt);++tn<Dt;)yi[tn]=ln(tn);return yi}function ty(Dt,ln){return $o(ln,function(tn){return[tn,Dt[tn]]})}function Mc(Dt){return Dt&&Dt.slice(0,ah(Dt)+1).replace(Ir,"")}function Tl(Dt){return function(ln){return Dt(ln)}}function o0(Dt,ln){return $o(ln,function(tn){return Dt[tn]})}function Rf(Dt,ln){return Dt.has(ln)}function Pm(Dt,ln){for(var tn=-1,yi=Dt.length;++tn<yi&&MA(ln,Dt[tn],0)>-1;);return tn}function Um(Dt,ln){for(var tn=Dt.length;tn--&&MA(ln,Dt[tn],0)>-1;);return tn}function Qd(Dt,ln){for(var tn=Dt.length,yi=0;tn--;)Dt[tn]===ln&&++yi;return yi}var Pf=Nh(ie),ny=Nh(_e);function Lm(Dt){return"\\"+Ot[Dt]}function Wh(Dt,ln){return Dt==null?t:Dt[ln]}function Qh(Dt){return Ns.test(Dt)}function Km(Dt){return Hr.test(Dt)}function qh(Dt){for(var ln,tn=[];!(ln=Dt.next()).done;)tn.push(ln.value);return tn}function Fm(Dt){var ln=-1,tn=Array(Dt.size);return Dt.forEach(function(yi,yr){tn[++ln]=[yr,yi]}),tn}function Uf(Dt,ln){return function(tn){return Dt(ln(tn))}}function sh(Dt,ln){for(var tn=-1,yi=Dt.length,yr=0,Nr=[];++tn<yi;){var ys=Dt[tn];(ys===ln||ys===p)&&(Dt[tn]=p,Nr[yr++]=tn)}return Nr}function s0(Dt){var ln=-1,tn=Array(Dt.size);return Dt.forEach(function(yi){tn[++ln]=yi}),tn}function iy(Dt){var ln=-1,tn=Array(Dt.size);return Dt.forEach(function(yi){tn[++ln]=[yi,yi]}),tn}function zm(Dt,ln,tn){for(var yi=tn-1,yr=Dt.length;++yi<yr;)if(Dt[yi]===ln)return yi;return-1}function ry(Dt,ln,tn){for(var yi=tn+1;yi--;)if(Dt[yi]===ln)return yi;return yi}function Yh(Dt){return Qh(Dt)?jm(Dt):Vv(Dt)}function Ts(Dt){return Qh(Dt)?a0(Dt):Tf(Dt)}function ah(Dt){for(var ln=Dt.length;ln--&&Eo.test(Dt.charAt(ln)););return ln}var wc=Nh($e);function jm(Dt){for(var ln=Xs.lastIndex=0;Xs.test(Dt);)++ln;return ln}function a0(Dt){return Dt.match(Xs)||[]}function l0(Dt){return Dt.match(bo)||[]}var Nm=(function Dt(ln){ln=ln==null?Yn:lh.defaults(Yn.Object(),ln,lh.pick(Yn,la));var tn=ln.Array,yi=ln.Date,yr=ln.Error,Nr=ln.Function,ys=ln.Math,Fo=ln.Object,Zr=ln.RegExp,wA=ln.String,kl=ln.TypeError,Vh=tn.prototype,u0=Nr.prototype,Sc=Fo.prototype,$h=ln["__core-js_shared__"],uh=u0.toString,xr=Sc.hasOwnProperty,Kg=0,Gm=(function(){var w=/[^.]+$/.exec($h&&$h.keys&&$h.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Dl=Sc.toString,SA=uh.call(Fo),iu=Yn._,ch=Zr("^"+uh.call(xr).replace(Vi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),EA=si?ln.Buffer:t,Iu=ln.Symbol,Hh=ln.Uint8Array,Ah=EA?EA.allocUnsafe:t,ru=Uf(Fo.getPrototypeOf,Fo),c0=Fo.create,qd=Sc.propertyIsEnumerable,lr=Vh.splice,Wm=Iu?Iu.isConcatSpreadable:t,fl=Iu?Iu.iterator:t,BA=Iu?Iu.toStringTag:t,Rl=(function(){try{var w=lA(Fo,"defineProperty");return w({},"",{}),w}catch{}})(),oy=ln.clearTimeout!==Yn.clearTimeout&&ln.clearTimeout,A0=yi&&yi.now!==Yn.Date.now&&yi.now,Zh=ln.setTimeout!==Yn.setTimeout&&ln.setTimeout,Lf=ys.ceil,Yd=ys.floor,OA=Fo.getOwnPropertySymbols,Qm=EA?EA.isBuffer:t,Pl=ln.isFinite,Xh=Vh.join,Jh=Uf(Fo.keys,Fo),vs=ys.max,Ws=ys.min,tl=yi.now,nl=ln.parseInt,tA=ys.random,IA=Vh.reverse,Ul=lA(ln,"DataView"),Ju=lA(ln,"Map"),qm=lA(ln,"Promise"),Ec=lA(ln,"Set"),TA=lA(ln,"WeakMap"),Vd=lA(Fo,"create"),ua=TA&&new TA,uo={},Lr=Ia(Ul),hh=Ia(Ju),ec=Ia(qm),ks=Ia(Ec),Tu=Ia(TA),Ll=Iu?Iu.prototype:t,dh=Ll?Ll.valueOf:t,nA=Ll?Ll.toString:t;function Qe(w){if(pa(w)&&!Cr(w)&&!(w instanceof hr)){if(w instanceof Sa)return w;if(xr.call(w,"__wrapped__"))return dy(w)}return new Sa(w)}var ou=(function(){function w(){}return function(R){if(!_s(R))return{};if(c0)return c0(R);w.prototype=R;var Y=new w;return w.prototype=t,Y}})();function Bc(){}function Sa(w,R){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!R,this.__index__=0,this.__values__=t}Qe.templateSettings={escape:ji,evaluate:Qn,interpolate:Zn,variable:"",imports:{_:Qe}},Qe.prototype=Bc.prototype,Qe.prototype.constructor=Qe,Sa.prototype=ou(Bc.prototype),Sa.prototype.constructor=Sa;function hr(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function kA(){var w=new hr(this.__wrapped__);return w.__actions__=Pr(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=Pr(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=Pr(this.__views__),w}function fh(){if(this.__filtered__){var w=new hr(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function DA(){var w=this.__wrapped__.value(),R=this.__dir__,Y=Cr(w),de=R<0,Re=Y?w.length:0,et=r3(0,Re,this.__views__),yt=et.start,It=et.end,Kt=It-yt,Sn=de?It:yt-1,h=this.__iteratees__,l=h.length,A=0,y=Ws(Kt,this.__takeCount__);if(!Y||!de&&Re==Kt&&y==Kt)return rt(w,this.__actions__);var _=[];e:for(;Kt--&&A<y;){Sn+=R;for(var B=-1,O=w[Sn];++B<l;){var D=h[B],F=D.iteratee,W=D.type,te=F(O);if(W==Fe)O=te;else if(!te){if(W==Oe)continue e;break e}}_[A++]=O}return _}hr.prototype=ou(Bc.prototype),hr.prototype.constructor=hr;function RA(w){var R=-1,Y=w==null?0:w.length;for(this.clear();++R<Y;){var de=w[R];this.set(de[0],de[1])}}function h0(){this.__data__=Vd?Vd(null):{},this.size=0}function Oc(w){var R=this.has(w)&&delete this.__data__[w];return this.size-=R?1:0,R}function Kf(w){var R=this.__data__;if(Vd){var Y=R[w];return Y===c?t:Y}return xr.call(R,w)?R[w]:t}function mh(w){var R=this.__data__;return Vd?R[w]!==t:xr.call(R,w)}function ca(w,R){var Y=this.__data__;return this.size+=this.has(w)?0:1,Y[w]=Vd&&R===t?c:R,this}RA.prototype.clear=h0,RA.prototype.delete=Oc,RA.prototype.get=Kf,RA.prototype.has=mh,RA.prototype.set=ca;function tc(w){var R=-1,Y=w==null?0:w.length;for(this.clear();++R<Y;){var de=w[R];this.set(de[0],de[1])}}function d0(){this.__data__=[],this.size=0}function Fg(w){var R=this.__data__,Y=UA(R,w);if(Y<0)return!1;var de=R.length-1;return Y==de?R.pop():lr.call(R,Y,1),--this.size,!0}function sy(w){var R=this.__data__,Y=UA(R,w);return Y<0?t:R[Y][1]}function zg(w){return UA(this.__data__,w)>-1}function Ds(w,R){var Y=this.__data__,de=UA(Y,w);return de<0?(++this.size,Y.push([w,R])):Y[de][1]=R,this}tc.prototype.clear=d0,tc.prototype.delete=Fg,tc.prototype.get=sy,tc.prototype.has=zg,tc.prototype.set=Ds;function Kl(w){var R=-1,Y=w==null?0:w.length;for(this.clear();++R<Y;){var de=w[R];this.set(de[0],de[1])}}function Fl(){this.size=0,this.__data__={hash:new RA,map:new(Ju||tc),string:new RA}}function su(w){var R=hd(this,w).delete(w);return this.size-=R?1:0,R}function f0(w){return hd(this,w).get(w)}function zl(w){return hd(this,w).has(w)}function Ff(w,R){var Y=hd(this,w),de=Y.size;return Y.set(w,R),this.size+=Y.size==de?0:1,this}Kl.prototype.clear=Fl,Kl.prototype.delete=su,Kl.prototype.get=f0,Kl.prototype.has=zl,Kl.prototype.set=Ff;function Ic(w){var R=-1,Y=w==null?0:w.length;for(this.__data__=new Kl;++R<Y;)this.add(w[R])}function zf(w){return this.__data__.set(w,c),this}function Ym(w){return this.__data__.has(w)}Ic.prototype.add=Ic.prototype.push=zf,Ic.prototype.has=Ym;function Rs(w){var R=this.__data__=new tc(w);this.size=R.size}function iA(){this.__data__=new tc,this.size=0}function Vm(w){var R=this.__data__,Y=R.delete(w);return this.size=R.size,Y}function ed(w){return this.__data__.get(w)}function PA(w){return this.__data__.has(w)}function jn(w,R){var Y=this.__data__;if(Y instanceof tc){var de=Y.__data__;if(!Ju||de.length<r-1)return de.push([w,R]),this.size=++Y.size,this;Y=this.__data__=new Kl(de)}return Y.set(w,R),this.size=Y.size,this}Rs.prototype.clear=iA,Rs.prototype.delete=Vm,Rs.prototype.get=ed,Rs.prototype.has=PA,Rs.prototype.set=jn;function jf(w,R){var Y=Cr(w),de=!Y&&af(w),Re=!Y&&!de&&tm(w),et=!Y&&!de&&!Re&&vd(w),yt=Y||de||Re||et,It=yt?Wd(w.length,wA):[],Kt=It.length;for(var Sn in w)(R||xr.call(w,Sn))&&!(yt&&(Sn=="length"||Re&&(Sn=="offset"||Sn=="parent")||et&&(Sn=="buffer"||Sn=="byteLength"||Sn=="byteOffset")||_h(Sn,Kt)))&&It.push(Sn);return It}function ph(w){var R=w.length;return R?w[ld(0,R-1)]:t}function $m(w,R){return Vf(Pr(w),ku(R,0,w.length))}function td(w){return Vf(Pr(w))}function nd(w,R,Y){(Y!==t&&!Nl(w[R],Y)||Y===t&&!(R in w))&&nc(w,R,Y)}function ml(w,R,Y){var de=w[R];(!(xr.call(w,R)&&Nl(de,Y))||Y===t&&!(R in w))&&nc(w,R,Y)}function UA(w,R){for(var Y=w.length;Y--;)if(Nl(w[Y][0],R))return Y;return-1}function m0(w,R,Y,de){return oA(w,function(Re,et,yt){R(de,Re,Y(Re),yt)}),de}function p0(w,R){return w&&Ur(R,Cl(R),w)}function Tc(w,R){return w&&Ur(R,hc(R),w)}function nc(w,R,Y){R=="__proto__"&&Rl?Rl(w,R,{configurable:!0,enumerable:!0,value:Y,writable:!0}):w[R]=Y}function $d(w,R){for(var Y=-1,de=R.length,Re=tn(de),et=w==null;++Y<de;)Re[Y]=et?t:Gl(w,R[Y]);return Re}function ku(w,R,Y){return w===w&&(Y!==t&&(w=w<=Y?w:Y),R!==t&&(w=w>=R?w:R)),w}function au(w,R,Y,de,Re,et){var yt,It=R&v,Kt=R&M,Sn=R&E;if(Y&&(yt=Re?Y(w,de,Re,et):Y(w)),yt!==t)return yt;if(!_s(w))return w;var h=Cr(w);if(h){if(yt=$v(w),!It)return Pr(w,yt)}else{var l=hu(w),A=l==Ct||l==vt;if(tm(w))return Wt(w,It);if(l==nn||l==ot||A&&!Re){if(yt=Kt||A?{}:Yg(w),!It)return Kt?is(w,Tc(yt,w)):Ea(w,p0(yt,w))}else{if(!Rr[l])return Re?w:{};yt=Hv(w,l,It)}}et||(et=new Rs);var y=et.get(w);if(y)return y;et.set(w,yt),yd(w)?w.forEach(function(O){yt.add(au(O,R,Y,O,w,et))}):K0(w)&&w.forEach(function(O,D){yt.set(D,au(O,R,Y,D,w,et))});var _=Sn?Kt?Wg:qf:Kt?hc:Cl,B=h?t:_(w);return Ou(B||w,function(O,D){B&&(D=O,O=w[D]),ml(yt,D,au(O,R,Y,D,w,et))}),yt}function Hm(w){var R=Cl(w);return function(Y){return rA(Y,w,R)}}function rA(w,R,Y){var de=Y.length;if(w==null)return!de;for(w=Fo(w);de--;){var Re=Y[de],et=R[Re],yt=w[Re];if(yt===t&&!(Re in w)||!et(yt))return!1}return!0}function Zm(w,R,Y){if(typeof w!="function")throw new kl(s);return M0(function(){w.apply(t,Y)},R)}function ic(w,R,Y,de){var Re=-1,et=xA,yt=!0,It=w.length,Kt=[],Sn=R.length;if(!It)return Kt;Y&&(R=$o(R,Tl(Y))),de?(et=zd,yt=!1):R.length>=r&&(et=Rf,yt=!1,R=new Ic(R));e:for(;++Re<It;){var h=w[Re],l=Y==null?h:Y(h);if(h=de||h!==0?h:0,yt&&l===l){for(var A=Sn;A--;)if(R[A]===l)continue e;Kt.push(h)}else et(R,l,de)||Kt.push(h)}return Kt}var oA=Ps(rc),kc=Ps(Xm,!0);function Gr(w,R){var Y=!0;return oA(w,function(de,Re,et){return Y=!!R(de,Re,et),Y}),Y}function Dc(w,R,Y){for(var de=-1,Re=w.length;++de<Re;){var et=w[de],yt=R(et);if(yt!=null&&(It===t?yt===yt&&!Ru(yt):Y(yt,It)))var It=yt,Kt=et}return Kt}function id(w,R,Y,de){var Re=w.length;for(Y=Pi(Y),Y<0&&(Y=-Y>Re?0:Re+Y),de=de===t||de>Re?Re:Pi(de),de<0&&(de+=Re),de=Y>de?0:dA(de);Y<de;)w[Y++]=R;return w}function rd(w,R){var Y=[];return oA(w,function(de,Re,et){R(de,Re,et)&&Y.push(de)}),Y}function Aa(w,R,Y,de,Re){var et=-1,yt=w.length;for(Y||(Y=Zv),Re||(Re=[]);++et<yt;){var It=w[et];R>0&&Y(It)?R>1?Aa(It,R-1,Y,de,Re):To(Re,It):de||(Re[Re.length]=It)}return Re}var gh=Qa(),Hd=Qa(!0);function rc(w,R){return w&&gh(w,R,Cl)}function Xm(w,R){return w&&Hd(w,R,Cl)}function il(w,R){return _o(R,function(Y){return Nc(w[Y])})}function oc(w,R){R=At(R,w);for(var Y=0,de=R.length;w!=null&&Y<de;)w=w[lc(R[Y++])];return Y&&Y==de?w:t}function mi(w,R,Y){var de=R(w);return Cr(w)?de:To(de,Y(w))}function li(w){return w==null?w===t?oi:Pt:BA&&BA in Fo(w)?Yf(w):eC(w)}function LA(w,R){return w>R}function lu(w,R){return w!=null&&xr.call(w,R)}function rl(w,R){return w!=null&&R in Fo(w)}function Js(w,R,Y){return w>=Ws(R,Y)&&w<vs(R,Y)}function pl(w,R,Y){for(var de=Y?zd:xA,Re=w[0].length,et=w.length,yt=et,It=tn(et),Kt=1/0,Sn=[];yt--;){var h=w[yt];yt&&R&&(h=$o(h,Tl(R))),Kt=Ws(h.length,Kt),It[yt]=!Y&&(R||Re>=120&&h.length>=120)?new Ic(yt&&h):t}h=w[0];var l=-1,A=It[0];e:for(;++l<Re&&Sn.length<Kt;){var y=h[l],_=R?R(y):y;if(y=Y||y!==0?y:0,!(A?Rf(A,_):de(Sn,_,Y))){for(yt=et;--yt;){var B=It[yt];if(!(B?Rf(B,_):de(w[yt],_,Y)))continue e}A&&A.push(_),Sn.push(y)}}return Sn}function jg(w,R,Y,de){return rc(w,function(Re,et,yt){R(de,Y(Re),et,yt)}),de}function Rc(w,R,Y){R=At(R,w),w=x0(w,R);var de=w==null?w:w[lc(ss(R))];return de==null?t:gs(de,w,Y)}function uu(w){return pa(w)&&li(w)==ot}function ea(w){return pa(w)&&li(w)==$}function yh(w){return pa(w)&&li(w)==ke}function Xr(w,R,Y,de,Re){return w===R?!0:w==null||R==null||!pa(w)&&!pa(R)?w!==w&&R!==R:Ri(w,R,Y,de,Xr,Re)}function Ri(w,R,Y,de,Re,et){var yt=Cr(w),It=Cr(R),Kt=yt?Et:hu(w),Sn=It?Et:hu(R);Kt=Kt==ot?nn:Kt,Sn=Sn==ot?nn:Sn;var h=Kt==nn,l=Sn==nn,A=Kt==Sn;if(A&&tm(w)){if(!tm(R))return!1;yt=!0,h=!1}if(A&&!h)return et||(et=new Rs),yt||vd(w)?cd(w,R,Y,de,Re,et):b0(w,R,Kt,Y,de,Re,et);if(!(Y&P)){var y=h&&xr.call(w,"__wrapped__"),_=l&&xr.call(R,"__wrapped__");if(y||_){var B=y?w.value():w,O=_?R.value():R;return et||(et=new Rs),Re(B,O,Y,de,et)}}return A?(et||(et=new Rs),Ad(w,R,Y,de,Re,et)):!1}function zo(w){return pa(w)&&hu(w)==wt}function As(w,R,Y,de){var Re=Y.length,et=Re,yt=!de;if(w==null)return!et;for(w=Fo(w);Re--;){var It=Y[Re];if(yt&&It[2]?It[1]!==w[It[0]]:!(It[0]in w))return!1}for(;++Re<et;){It=Y[Re];var Kt=It[0],Sn=w[Kt],h=It[1];if(yt&&It[2]){if(Sn===t&&!(Kt in w))return!1}else{var l=new Rs;if(de)var A=de(Sn,h,Kt,w,R,l);if(!(A===t?Xr(h,Sn,P|U,de,l):A))return!1}}return!0}function od(w){if(!_s(w)||Xv(w))return!1;var R=Nc(w)?ch:Sl;return R.test(Ia(w))}function sc(w){return pa(w)&&li(w)==Mi}function vh(w){return pa(w)&&hu(w)==Fn}function Nf(w){return pa(w)&&f1(w.length)&&!!Zi[li(w)]}function KA(w){return typeof w=="function"?w:w==null?Lu:typeof w=="object"?Cr(w)?Xd(w[0],w[1]):Zd(w):qe(w)}function sA(w){if(!dd(w))return Jh(w);var R=[];for(var Y in Fo(w))xr.call(w,Y)&&Y!="constructor"&&R.push(Y);return R}function Ng(w){if(!_s(w))return fd(w);var R=dd(w),Y=[];for(var de in w)de=="constructor"&&(R||!xr.call(w,de))||Y.push(de);return Y}function hs(w,R){return w<R}function Pc(w,R){var Y=-1,de=cc(w)?tn(w.length):[];return oA(w,function(Re,et,yt){de[++Y]=R(Re,et,yt)}),de}function Zd(w){var R=ay(w);return R.length==1&&R[0][2]?$g(R[0][0],R[0][1]):function(Y){return Y===w||As(Y,w,R)}}function Xd(w,R){return _0(w)&&ta(R)?$g(lc(w),R):function(Y){var de=Gl(Y,w);return de===t&&de===R?bd(Y,w):Xr(R,de,P|U)}}function sd(w,R,Y,de,Re){w!==R&&gh(R,function(et,yt){if(Re||(Re=new Rs),_s(et))Jm(w,R,yt,Y,sd,de,Re);else{var It=de?de(os(w,yt),et,yt+"",w,R,Re):t;It===t&&(It=et),nd(w,yt,It)}},hc)}function Jm(w,R,Y,de,Re,et,yt){var It=os(w,Y),Kt=os(R,Y),Sn=yt.get(Kt);if(Sn){nd(w,Y,Sn);return}var h=et?et(It,Kt,Y+"",w,R,yt):t,l=h===t;if(l){var A=Cr(Kt),y=!A&&tm(Kt),_=!A&&!y&&vd(Kt);h=Kt,A||y||_?Cr(It)?h=It:qa(It)?h=Pr(It):y?(l=!1,h=Wt(Kt,!0)):_?(l=!1,h=ui(Kt,!0)):h=[]:F0(Kt)||af(Kt)?(h=It,af(It)?h=pu(It):(!_s(It)||Nc(It))&&(h=Yg(Kt))):l=!1}l&&(yt.set(Kt,h),Re(h,Kt,de,et,yt),yt.delete(Kt)),nd(w,Y,h)}function Gf(w,R){var Y=w.length;if(Y)return R+=R<0?Y:0,_h(R,Y)?w[R]:t}function FA(w,R,Y){R.length?R=$o(R,function(et){return Cr(et)?function(yt){return oc(yt,et.length===1?et[0]:et)}:et}):R=[Lu];var de=-1;R=$o(R,Tl(sr()));var Re=Pc(w,function(et,yt,It){var Kt=$o(R,function(Sn){return Sn(et)});return{criteria:Kt,index:++de,value:et}});return Gh(Re,function(et,yt){return go(et,yt,Y)})}function Ch(w,R){return ol(w,R,function(Y,de){return bd(w,de)})}function ol(w,R,Y){for(var de=-1,Re=R.length,et={};++de<Re;){var yt=R[de],It=oc(w,yt);Y(It,yt)&&b(et,At(yt,w),It)}return et}function Cs(w){return function(R){return oc(R,w)}}function Uc(w,R,Y,de){var Re=de?Df:MA,et=-1,yt=R.length,It=w;for(w===R&&(R=Pr(R)),Y&&(It=$o(w,Tl(Y)));++et<yt;)for(var Kt=0,Sn=R[et],h=Y?Y(Sn):Sn;(Kt=Re(It,h,Kt,de))>-1;)It!==w&&lr.call(It,Kt,1),lr.call(w,Kt,1);return w}function ad(w,R){for(var Y=w?R.length:0,de=Y-1;Y--;){var Re=R[Y];if(Y==de||Re!==et){var et=Re;_h(Re)?lr.call(w,Re,1):Je(w,Re)}}return w}function ld(w,R){return w+Yd(tA()*(R-w+1))}function Wf(w,R,Y,de){for(var Re=-1,et=vs(Lf((R-w)/(Y||1)),0),yt=tn(et);et--;)yt[de?et:++Re]=w,w+=Y;return yt}function ac(w,R){var Y="";if(!w||R<1||R>ut)return Y;do R%2&&(Y+=w),R=Yd(R/2),R&&(w+=w);while(R);return Y}function I(w,R){return hy(tC(w,R,Lu),w+"")}function u(w){return ph(fp(w))}function m(w,R){var Y=fp(w);return Vf(Y,ku(R,0,Y.length))}function b(w,R,Y,de){if(!_s(w))return w;R=At(R,w);for(var Re=-1,et=R.length,yt=et-1,It=w;It!=null&&++Re<et;){var Kt=lc(R[Re]),Sn=Y;if(Kt==="__proto__"||Kt==="constructor"||Kt==="prototype")return w;if(Re!=yt){var h=It[Kt];Sn=de?de(h,Kt,It):t,Sn===t&&(Sn=_s(h)?h:_h(R[Re+1])?[]:{})}ml(It,Kt,Sn),It=It[Kt]}return w}var S=ua?function(w,R){return ua.set(w,R),w}:Lu,k=Rl?function(w,R){return Rl(w,"toString",{configurable:!0,enumerable:!1,value:um(R),writable:!0})}:Lu;function K(w){return Vf(fp(w))}function N(w,R,Y){var de=-1,Re=w.length;R<0&&(R=-R>Re?0:Re+R),Y=Y>Re?Re:Y,Y<0&&(Y+=Re),Re=R>Y?0:Y-R>>>0,R>>>=0;for(var et=tn(Re);++de<Re;)et[de]=w[de+R];return et}function H(w,R){var Y;return oA(w,function(de,Re,et){return Y=R(de,Re,et),!Y}),!!Y}function se(w,R,Y){var de=0,Re=w==null?de:w.length;if(typeof R=="number"&&R===R&&Re<=Ke){for(;de<Re;){var et=de+Re>>>1,yt=w[et];yt!==null&&!Ru(yt)&&(Y?yt<=R:yt<R)?de=et+1:Re=et}return Re}return ce(w,R,Lu,Y)}function ce(w,R,Y,de){var Re=0,et=w==null?0:w.length;if(et===0)return 0;R=Y(R);for(var yt=R!==R,It=R===null,Kt=Ru(R),Sn=R===t;Re<et;){var h=Yd((Re+et)/2),l=Y(w[h]),A=l!==t,y=l===null,_=l===l,B=Ru(l);if(yt)var O=de||_;else Sn?O=_&&(de||A):It?O=_&&A&&(de||!y):Kt?O=_&&A&&!y&&(de||!B):y||B?O=!1:O=de?l<=R:l<R;O?Re=h+1:et=h}return Ws(et,Xe)}function ye(w,R){for(var Y=-1,de=w.length,Re=0,et=[];++Y<de;){var yt=w[Y],It=R?R(yt):yt;if(!Y||!Nl(It,Kt)){var Kt=It;et[Re++]=yt===0?0:yt}}return et}function ge(w){return typeof w=="number"?w:Ru(w)?Pe:+w}function Se(w){if(typeof w=="string")return w;if(Cr(w))return $o(w,Se)+"";if(Ru(w))return nA?nA.call(w):"";var R=w+"";return R=="0"&&1/w==-Ve?"-0":R}function Le(w,R,Y){var de=-1,Re=xA,et=w.length,yt=!0,It=[],Kt=It;if(Y)yt=!1,Re=zd;else if(et>=r){var Sn=R?null:v0(w);if(Sn)return s0(Sn);yt=!1,Re=Rf,Kt=new Ic}else Kt=R?[]:It;e:for(;++de<et;){var h=w[de],l=R?R(h):h;if(h=Y||h!==0?h:0,yt&&l===l){for(var A=Kt.length;A--;)if(Kt[A]===l)continue e;R&&Kt.push(l),It.push(h)}else Re(Kt,l,Y)||(Kt!==It&&Kt.push(l),It.push(h))}return It}function Je(w,R){R=At(R,w);var Y=-1,de=R.length;if(!de)return!0;for(var Re=w==null||typeof w!="object"&&typeof w!="function";++Y<de;){var et=R[Y];if(typeof et=="string"){if(et==="__proto__"&&!xr.call(w,"__proto__"))return!1;if(et==="constructor"&&Y+1<de&&typeof R[Y+1]=="string"&&R[Y+1]==="prototype"){if(Re&&Y===0)continue;return!1}}}var yt=x0(w,R);return yt==null||delete yt[lc(ss(R))]}function nt(w,R,Y,de){return b(w,R,Y(oc(w,R)),de)}function tt(w,R,Y,de){for(var Re=w.length,et=de?Re:-1;(de?et--:++et<Re)&&R(w[et],et,w););return Y?N(w,de?0:et,de?et+1:Re):N(w,de?et+1:0,de?Re:et)}function rt(w,R){var Y=w;return Y instanceof hr&&(Y=Y.value()),e0(R,function(de,Re){return Re.func.apply(Re.thisArg,To([de],Re.args))},Y)}function ft(w,R,Y){var de=w.length;if(de<2)return de?Le(w[0]):[];for(var Re=-1,et=tn(de);++Re<de;)for(var yt=w[Re],It=-1;++It<de;)It!=Re&&(et[Re]=ic(et[Re]||yt,w[It],R,Y));return Le(Aa(et,1),R,Y)}function lt(w,R,Y){for(var de=-1,Re=w.length,et=R.length,yt={};++de<Re;){var It=de<et?R[de]:t;Y(yt,w[de],It)}return yt}function pt(w){return qa(w)?w:[]}function _t(w){return typeof w=="function"?w:Lu}function At(w,R){return Cr(w)?w:_0(w,R)?[w]:Zg(dr(w))}var Tt=I;function zt(w,R,Y){var de=w.length;return Y=Y===t?de:Y,!R&&Y>=de?w:N(w,R,Y)}var jt=oy||function(w){return Yn.clearTimeout(w)};function Wt(w,R){if(R)return w.slice();var Y=w.length,de=Ah?Ah(Y):new w.constructor(Y);return w.copy(de),de}function qt(w){var R=new w.constructor(w.byteLength);return new Hh(R).set(new Hh(w)),R}function fn(w,R){var Y=R?qt(w.buffer):w.buffer;return new w.constructor(Y,w.byteOffset,w.byteLength)}function Pn(w){var R=new w.constructor(w.source,Ai.exec(w));return R.lastIndex=w.lastIndex,R}function hn(w){return dh?Fo(dh.call(w)):{}}function ui(w,R){var Y=R?qt(w.buffer):w.buffer;return new w.constructor(Y,w.byteOffset,w.length)}function or(w,R){if(w!==R){var Y=w!==t,de=w===null,Re=w===w,et=Ru(w),yt=R!==t,It=R===null,Kt=R===R,Sn=Ru(R);if(!It&&!Sn&&!et&&w>R||et&&yt&&Kt&&!It&&!Sn||de&&yt&&Kt||!Y&&Kt||!Re)return 1;if(!de&&!et&&!Sn&&w<R||Sn&&Y&&Re&&!de&&!et||It&&Y&&Re||!yt&&Re||!Kt)return-1}return 0}function go(w,R,Y){for(var de=-1,Re=w.criteria,et=R.criteria,yt=Re.length,It=Y.length;++de<yt;){var Kt=or(Re[de],et[de]);if(Kt){if(de>=It)return Kt;var Sn=Y[de];return Kt*(Sn=="desc"?-1:1)}}return w.index-R.index}function ko(w,R,Y,de){for(var Re=-1,et=w.length,yt=Y.length,It=-1,Kt=R.length,Sn=vs(et-yt,0),h=tn(Kt+Sn),l=!de;++It<Kt;)h[It]=R[It];for(;++Re<yt;)(l||Re<et)&&(h[Y[Re]]=w[Re]);for(;Sn--;)h[It++]=w[Re++];return h}function yo(w,R,Y,de){for(var Re=-1,et=w.length,yt=-1,It=Y.length,Kt=-1,Sn=R.length,h=vs(et-It,0),l=tn(h+Sn),A=!de;++Re<h;)l[Re]=w[Re];for(var y=Re;++Kt<Sn;)l[y+Kt]=R[Kt];for(;++yt<It;)(A||Re<et)&&(l[y+Y[yt]]=w[Re++]);return l}function Pr(w,R){var Y=-1,de=w.length;for(R||(R=tn(de));++Y<de;)R[Y]=w[Y];return R}function Ur(w,R,Y,de){var Re=!Y;Y||(Y={});for(var et=-1,yt=R.length;++et<yt;){var It=R[et],Kt=de?de(Y[It],w[It],It,Y,w):t;Kt===t&&(Kt=w[It]),Re?nc(Y,It,Kt):ml(Y,It,Kt)}return Y}function Ea(w,R){return Ur(w,ep(w),R)}function is(w,R){return Ur(w,qg(w),R)}function Qs(w,R){return function(Y,de){var Re=Cr(Y)?Yv:m0,et=R?R():{};return Re(Y,w,sr(de,2),et)}}function jo(w){return I(function(R,Y){var de=-1,Re=Y.length,et=Re>1?Y[Re-1]:t,yt=Re>2?Y[2]:t;for(et=w.length>3&&typeof et=="function"?(Re--,et):t,yt&&du(Y[0],Y[1],yt)&&(et=Re<3?t:et,Re=1),R=Fo(R);++de<Re;){var It=Y[de];It&&w(R,It,de,et)}return R})}function Ps(w,R){return function(Y,de){if(Y==null)return Y;if(!cc(Y))return w(Y,de);for(var Re=Y.length,et=R?Re:-1,yt=Fo(Y);(R?et--:++et<Re)&&de(yt[et],et,yt)!==!1;);return Y}}function Qa(w){return function(R,Y,de){for(var Re=-1,et=Fo(R),yt=de(R),It=yt.length;It--;){var Kt=yt[w?It:++Re];if(Y(et[Kt],Kt,et)===!1)break}return R}}function gl(w,R,Y){var de=R&z,Re=aA(w);function et(){var yt=this&&this!==Yn&&this instanceof et?Re:w;return yt.apply(de?Y:this,arguments)}return et}function Lc(w){return function(R){R=dr(R);var Y=Qh(R)?Ts(R):t,de=Y?Y[0]:R.charAt(0),Re=Y?zt(Y,1).join(""):R.slice(1);return de[w]()+Re}}function Du(w){return function(R){return e0(R_(Q0(R).replace(wi,"")),w,"")}}function aA(w){return function(){var R=arguments;switch(R.length){case 0:return new w;case 1:return new w(R[0]);case 2:return new w(R[0],R[1]);case 3:return new w(R[0],R[1],R[2]);case 4:return new w(R[0],R[1],R[2],R[3]);case 5:return new w(R[0],R[1],R[2],R[3],R[4]);case 6:return new w(R[0],R[1],R[2],R[3],R[4],R[5]);case 7:return new w(R[0],R[1],R[2],R[3],R[4],R[5],R[6])}var Y=ou(w.prototype),de=w.apply(Y,R);return _s(de)?de:Y}}function g0(w,R,Y){var de=aA(w);function Re(){for(var et=arguments.length,yt=tn(et),It=et,Kt=fa(Re);It--;)yt[It]=arguments[It];var Sn=et<3&&yt[0]!==Kt&&yt[et-1]!==Kt?[]:sh(yt,Kt);if(et-=Sn.length,et<Y)return y0(w,R,qs,Re.placeholder,t,yt,Sn,t,t,Y-et);var h=this&&this!==Yn&&this instanceof Re?de:w;return gs(h,this,yt)}return Re}function ud(w){return function(R,Y,de){var Re=Fo(R);if(!cc(R)){var et=sr(Y,3);R=Cl(R),Y=function(It){return et(Re[It],It,Re)}}var yt=w(R,Y,de);return yt>-1?Re[et?R[yt]:yt]:t}}function cu(w){return Kc(function(R){var Y=R.length,de=Y,Re=Sa.prototype.thru;for(w&&R.reverse();de--;){var et=R[de];if(typeof et!="function")throw new kl(s);if(Re&&!yt&&Ys(et)=="wrapper")var yt=new Sa([],!0)}for(de=yt?de:Y;++de<Y;){et=R[de];var It=Ys(et),Kt=It=="wrapper"?Qg(et):t;Kt&&tp(Kt[0])&&Kt[1]==(q|X|ee|le)&&!Kt[4].length&&Kt[9]==1?yt=yt[Ys(Kt[0])].apply(yt,Kt[3]):yt=et.length==1&&tp(et)?yt[It]():yt.thru(et)}return function(){var Sn=arguments,h=Sn[0];if(yt&&Sn.length==1&&Cr(h))return yt.plant(h).value();for(var l=0,A=Y?R[l].apply(this,Sn):h;++l<Y;)A=R[l].call(this,A);return A}})}function qs(w,R,Y,de,Re,et,yt,It,Kt,Sn){var h=R&q,l=R&z,A=R&V,y=R&(X|re),_=R&ue,B=A?t:aA(w);function O(){for(var D=arguments.length,F=tn(D),W=D;W--;)F[W]=arguments[W];if(y)var te=fa(O),ae=Qd(F,te);if(de&&(F=ko(F,de,Re,y)),et&&(F=yo(F,et,yt,y)),D-=ae,y&&D<Sn){var he=sh(F,te);return y0(w,R,qs,O.placeholder,Y,F,he,It,Kt,Sn-D)}var me=l?Y:this,be=A?me[w]:w;return D=F.length,It?F=Hg(F,It):_&&D>1&&F.reverse(),h&&Kt<D&&(F.length=Kt),this&&this!==Yn&&this instanceof O&&(be=B||aA(be)),be.apply(me,F)}return O}function Ba(w,R){return function(Y,de){return jg(Y,w,R(de),{})}}function ha(w,R){return function(Y,de){var Re;if(Y===t&&de===t)return R;if(Y!==t&&(Re=Y),de!==t){if(Re===t)return de;typeof Y=="string"||typeof de=="string"?(Y=Se(Y),de=Se(de)):(Y=ge(Y),de=ge(de)),Re=w(Y,de)}return Re}}function Au(w){return Kc(function(R){return R=$o(R,Tl(sr())),I(function(Y){var de=this;return w(R,function(Re){return gs(Re,de,Y)})})})}function rs(w,R){R=R===t?" ":Se(R);var Y=R.length;if(Y<2)return Y?ac(R,w):R;var de=ac(R,Lf(w/Yh(R)));return Qh(R)?zt(Ts(de),0,w).join(""):de.slice(0,w)}function Oa(w,R,Y,de){var Re=R&z,et=aA(w);function yt(){for(var It=-1,Kt=arguments.length,Sn=-1,h=de.length,l=tn(h+Kt),A=this&&this!==Yn&&this instanceof yt?et:w;++Sn<h;)l[Sn]=de[Sn];for(;Kt--;)l[Sn++]=arguments[++It];return gs(A,Re?Y:this,l)}return yt}function jl(w){return function(R,Y,de){return de&&typeof de!="number"&&du(R,Y,de)&&(Y=de=t),R=mu(R),Y===t?(Y=R,R=0):Y=mu(Y),de=de===t?R<Y?1:-1:mu(de),Wf(R,Y,de,w)}}function Ho(w){return function(R,Y){return typeof R=="string"&&typeof Y=="string"||(R=vl(R),Y=vl(Y)),w(R,Y)}}function y0(w,R,Y,de,Re,et,yt,It,Kt,Sn){var h=R&X,l=h?yt:t,A=h?t:yt,y=h?et:t,_=h?t:et;R|=h?ee:ne,R&=~(h?ne:ee),R&Z||(R&=-4);var B=[w,R,Re,y,l,_,A,It,Kt,Sn],O=Y.apply(t,B);return tp(w)&&nC(O,B),O.placeholder=de,w0(O,w,R)}function Qf(w){var R=ys[w];return function(Y,de){if(Y=vl(Y),de=de==null?0:Ws(Pi(de),292),de&&Pl(Y)){var Re=(dr(Y)+"e").split("e"),et=R(Re[0]+"e"+(+Re[1]+de));return Re=(dr(et)+"e").split("e"),+(Re[0]+"e"+(+Re[1]-de))}return R(Y)}}var v0=Ec&&1/s0(new Ec([,-0]))[1]==Ve?function(w){return new Ec(w)}:x;function C0(w){return function(R){var Y=hu(R);return Y==wt?Fm(R):Y==Fn?iy(R):ty(R,w(R))}}function da(w,R,Y,de,Re,et,yt,It){var Kt=R&V;if(!Kt&&typeof w!="function")throw new kl(s);var Sn=de?de.length:0;if(Sn||(R&=-97,de=Re=t),yt=yt===t?yt:vs(Pi(yt),0),It=It===t?It:Pi(It),Sn-=Re?Re.length:0,R&ne){var h=de,l=Re;de=Re=t}var A=Kt?t:Qg(w),y=[w,R,Y,de,Re,h,l,et,yt,It];if(A&&l_(y,A),w=y[0],R=y[1],Y=y[2],de=y[3],Re=y[4],It=y[9]=y[9]===t?Kt?0:w.length:vs(y[9]-Sn,0),!It&&R&(X|re)&&(R&=-25),!R||R==z)var _=gl(w,R,Y);else R==X||R==re?_=g0(w,R,It):(R==ee||R==(z|ee))&&!Re.length?_=Oa(w,R,Y,de):_=qs.apply(t,y);var B=A?S:nC;return w0(B(_,y),w,R)}function bh(w,R,Y,de){return w===t||Nl(w,Sc[Y])&&!xr.call(de,Y)?R:w}function zA(w,R,Y,de,Re,et){return _s(w)&&_s(R)&&(et.set(R,w),sd(w,R,t,zA,et),et.delete(R)),w}function Gg(w){return F0(w)?t:w}function cd(w,R,Y,de,Re,et){var yt=Y&P,It=w.length,Kt=R.length;if(It!=Kt&&!(yt&&Kt>It))return!1;var Sn=et.get(w),h=et.get(R);if(Sn&&h)return Sn==R&&h==w;var l=-1,A=!0,y=Y&U?new Ic:t;for(et.set(w,R),et.set(R,w);++l<It;){var _=w[l],B=R[l];if(de)var O=yt?de(B,_,l,R,w,et):de(_,B,l,w,R,et);if(O!==t){if(O)continue;A=!1;break}if(y){if(!n0(R,function(D,F){if(!Rf(y,F)&&(_===D||Re(_,D,Y,de,et)))return y.push(F)})){A=!1;break}}else if(!(_===B||Re(_,B,Y,de,et))){A=!1;break}}return et.delete(w),et.delete(R),A}function b0(w,R,Y,de,Re,et,yt){switch(Y){case j:if(w.byteLength!=R.byteLength||w.byteOffset!=R.byteOffset)return!1;w=w.buffer,R=R.buffer;case $:return!(w.byteLength!=R.byteLength||!et(new Hh(w),new Hh(R)));case Ue:case ke:case Ft:return Nl(+w,+R);case He:return w.name==R.name&&w.message==R.message;case Mi:case Ln:return w==R+"";case wt:var It=Fm;case Fn:var Kt=de&P;if(It||(It=s0),w.size!=R.size&&!Kt)return!1;var Sn=yt.get(w);if(Sn)return Sn==R;de|=U,yt.set(w,R);var h=cd(It(w),It(R),de,Re,et,yt);return yt.delete(w),h;case In:if(dh)return dh.call(w)==dh.call(R)}return!1}function Ad(w,R,Y,de,Re,et){var yt=Y&P,It=qf(w),Kt=It.length,Sn=qf(R),h=Sn.length;if(Kt!=h&&!yt)return!1;for(var l=Kt;l--;){var A=It[l];if(!(yt?A in R:xr.call(R,A)))return!1}var y=et.get(w),_=et.get(R);if(y&&_)return y==R&&_==w;var B=!0;et.set(w,R),et.set(R,w);for(var O=yt;++l<Kt;){A=It[l];var D=w[A],F=R[A];if(de)var W=yt?de(F,D,A,R,w,et):de(D,F,A,w,R,et);if(!(W===t?D===F||Re(D,F,Y,de,et):W)){B=!1;break}O||(O=A=="constructor")}if(B&&!O){var te=w.constructor,ae=R.constructor;te!=ae&&"constructor"in w&&"constructor"in R&&!(typeof te=="function"&&te instanceof te&&typeof ae=="function"&&ae instanceof ae)&&(B=!1)}return et.delete(w),et.delete(R),B}function Kc(w){return hy(tC(w,t,Us),w+"")}function qf(w){return mi(w,Cl,ep)}function Wg(w){return mi(w,hc,qg)}var Qg=ua?function(w){return ua.get(w)}:x;function Ys(w){for(var R=w.name+"",Y=uo[R],de=xr.call(uo,R)?Y.length:0;de--;){var Re=Y[de],et=Re.func;if(et==null||et==w)return Re.name}return R}function fa(w){var R=xr.call(Qe,"placeholder")?Qe:w;return R.placeholder}function sr(){var w=Qe.iteratee||V0;return w=w===V0?KA:w,arguments.length?w(arguments[0],arguments[1]):w}function hd(w,R){var Y=w.__data__;return Ay(R)?Y[typeof R=="string"?"string":"hash"]:Y.map}function ay(w){for(var R=Cl(w),Y=R.length;Y--;){var de=R[Y],Re=w[de];R[Y]=[de,Re,ta(Re)]}return R}function lA(w,R){var Y=Wh(w,R);return od(Y)?Y:t}function Yf(w){var R=xr.call(w,BA),Y=w[BA];try{w[BA]=t;var de=!0}catch{}var Re=Dl.call(w);return de&&(R?w[BA]=Y:delete w[BA]),Re}var ep=OA?function(w){return w==null?[]:(w=Fo(w),_o(OA(w),function(R){return qd.call(w,R)}))}:yn,qg=OA?function(w){for(var R=[];w;)To(R,ep(w)),w=ru(w);return R}:yn,hu=li;(Ul&&hu(new Ul(new ArrayBuffer(1)))!=j||Ju&&hu(new Ju)!=wt||qm&&hu(qm.resolve())!=Kn||Ec&&hu(new Ec)!=Fn||TA&&hu(new TA)!=Tn)&&(hu=function(w){var R=li(w),Y=R==nn?w.constructor:t,de=Y?Ia(Y):"";if(de)switch(de){case Lr:return j;case hh:return wt;case ec:return Kn;case ks:return Fn;case Tu:return Tn}return R});function r3(w,R,Y){for(var de=-1,Re=Y.length;++de<Re;){var et=Y[de],yt=et.size;switch(et.type){case"drop":w+=yt;break;case"dropRight":R-=yt;break;case"take":R=Ws(R,w+yt);break;case"takeRight":w=vs(w,R-yt);break}}return{start:w,end:R}}function ly(w){var R=w.match(rr);return R?R[1].split(Yo):[]}function uy(w,R,Y){R=At(R,w);for(var de=-1,Re=R.length,et=!1;++de<Re;){var yt=lc(R[de]);if(!(et=w!=null&&Y(w,yt)))break;w=w[yt]}return et||++de!=Re?et:(Re=w==null?0:w.length,!!Re&&f1(Re)&&_h(yt,Re)&&(Cr(w)||af(w)))}function $v(w){var R=w.length,Y=new w.constructor(R);return R&&typeof w[0]=="string"&&xr.call(w,"index")&&(Y.index=w.index,Y.input=w.input),Y}function Yg(w){return typeof w.constructor=="function"&&!dd(w)?ou(ru(w)):{}}function Hv(w,R,Y){var de=w.constructor;switch(R){case $:return qt(w);case Ue:case ke:return new de(+w);case j:return fn(w,Y);case Q:case Ae:case Me:case Ne:case We:case it:case bt:case Ye:case at:return ui(w,Y);case wt:return new de;case Ft:case Ln:return new de(w);case Mi:return Pn(w);case Fn:return new de;case In:return hn(w)}}function cy(w,R){var Y=R.length;if(!Y)return w;var de=Y-1;return R[de]=(Y>1?"& ":"")+R[de],R=R.join(Y>2?", ":" "),w.replace(cn,`{
/* [wrapped with `+R+`] */
`)}function Zv(w){return Cr(w)||af(w)||!!(Wm&&w&&w[Wm])}function _h(w,R){var Y=typeof w;return R=R??ut,!!R&&(Y=="number"||Y!="symbol"&&$u.test(w))&&w>-1&&w%1==0&&w<R}function du(w,R,Y){if(!_s(Y))return!1;var de=typeof R;return(de=="number"?cc(Y)&&_h(R,Y.length):de=="string"&&R in Y)?Nl(Y[R],w):!1}function _0(w,R){if(Cr(w))return!1;var Y=typeof w;return Y=="number"||Y=="symbol"||Y=="boolean"||w==null||Ru(w)?!0:qi.test(w)||!Yi.test(w)||R!=null&&w in Fo(R)}function Ay(w){var R=typeof w;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?w!=="__proto__":w===null}function tp(w){var R=Ys(w),Y=Qe[R];if(typeof Y!="function"||!(R in hr.prototype))return!1;if(w===Y)return!0;var de=Qg(Y);return!!de&&w===de[0]}function Xv(w){return!!Gm&&Gm in w}var Vg=$h?Nc:Jt;function dd(w){var R=w&&w.constructor,Y=typeof R=="function"&&R.prototype||Sc;return w===Y}function ta(w){return w===w&&!_s(w)}function $g(w,R){return function(Y){return Y==null?!1:Y[w]===R&&(R!==t||w in Fo(Y))}}function Jv(w){var R=R0(w,function(de){return Y.size===d&&Y.clear(),de}),Y=R.cache;return R}function l_(w,R){var Y=w[1],de=R[1],Re=Y|de,et=Re<(z|V|q),yt=de==q&&Y==X||de==q&&Y==le&&w[7].length<=R[8]||de==(q|le)&&R[7].length<=R[8]&&Y==X;if(!(et||yt))return w;de&z&&(w[2]=R[2],Re|=Y&z?0:Z);var It=R[3];if(It){var Kt=w[3];w[3]=Kt?ko(Kt,It,R[4]):It,w[4]=Kt?sh(w[3],p):R[4]}return It=R[5],It&&(Kt=w[5],w[5]=Kt?yo(Kt,It,R[6]):It,w[6]=Kt?sh(w[5],p):R[6]),It=R[7],It&&(w[7]=It),de&q&&(w[8]=w[8]==null?R[8]:Ws(w[8],R[8])),w[9]==null&&(w[9]=R[9]),w[0]=R[0],w[1]=Re,w}function fd(w){var R=[];if(w!=null)for(var Y in Fo(w))R.push(Y);return R}function eC(w){return Dl.call(w)}function tC(w,R,Y){return R=vs(R===t?w.length-1:R,0),function(){for(var de=arguments,Re=-1,et=vs(de.length-R,0),yt=tn(et);++Re<et;)yt[Re]=de[R+Re];Re=-1;for(var It=tn(R+1);++Re<R;)It[Re]=de[Re];return It[R]=Y(yt),gs(w,this,It)}}function x0(w,R){return R.length<2?w:oc(w,N(R,0,-1))}function Hg(w,R){for(var Y=w.length,de=Ws(R.length,Y),Re=Pr(w);de--;){var et=R[de];w[de]=_h(et,Y)?Re[et]:t}return w}function os(w,R){if(!(R==="constructor"&&typeof w[R]=="function")&&R!="__proto__")return w[R]}var nC=Jd(S),M0=Zh||function(w,R){return Yn.setTimeout(w,R)},hy=Jd(k);function w0(w,R,Y){var de=R+"";return hy(w,cy(de,S0(ly(de),Y)))}function Jd(w){var R=0,Y=0;return function(){var de=tl(),Re=Ce-(de-Y);if(Y=de,Re>0){if(++R>=Be)return arguments[0]}else R=0;return w.apply(t,arguments)}}function Vf(w,R){var Y=-1,de=w.length,Re=de-1;for(R=R===t?de:R;++Y<R;){var et=ld(Y,Re),yt=w[et];w[et]=w[Y],w[Y]=yt}return w.length=R,w}var Zg=Jv(function(w){var R=[];return w.charCodeAt(0)===46&&R.push(""),w.replace(Ui,function(Y,de,Re,et){R.push(Re?et.replace(Dn,"$1"):de||Y)}),R});function lc(w){if(typeof w=="string"||Ru(w))return w;var R=w+"";return R=="0"&&1/w==-Ve?"-0":R}function Ia(w){if(w!=null){try{return uh.call(w)}catch{}try{return w+""}catch{}}return""}function S0(w,R){return Ou(Bt,function(Y){var de="_."+Y[0];R&Y[1]&&!xA(w,de)&&w.push(de)}),w.sort()}function dy(w){if(w instanceof hr)return w.clone();var R=new Sa(w.__wrapped__,w.__chain__);return R.__actions__=Pr(w.__actions__),R.__index__=w.__index__,R.__values__=w.__values__,R}function u_(w,R,Y){(Y?du(w,R,Y):R===t)?R=1:R=vs(Pi(R),0);var de=w==null?0:w.length;if(!de||R<1)return[];for(var Re=0,et=0,yt=tn(Lf(de/R));Re<de;)yt[et++]=N(w,Re,Re+=R);return yt}function iC(w){for(var R=-1,Y=w==null?0:w.length,de=0,Re=[];++R<Y;){var et=w[R];et&&(Re[de++]=et)}return Re}function rC(){var w=arguments.length;if(!w)return[];for(var R=tn(w-1),Y=arguments[0],de=w;de--;)R[de-1]=arguments[de];return To(Cr(Y)?Pr(Y):[Y],Aa(R,1))}var fy=I(function(w,R){return qa(w)?ic(w,Aa(R,1,qa,!0)):[]}),c_=I(function(w,R){var Y=ss(R);return qa(Y)&&(Y=t),qa(w)?ic(w,Aa(R,1,qa,!0),sr(Y,2)):[]}),ef=I(function(w,R){var Y=ss(R);return qa(Y)&&(Y=t),qa(w)?ic(w,Aa(R,1,qa,!0),t,Y):[]});function Ta(w,R,Y){var de=w==null?0:w.length;return de?(R=Y||R===t?1:Pi(R),N(w,R<0?0:R,de)):[]}function oC(w,R,Y){var de=w==null?0:w.length;return de?(R=Y||R===t?1:Pi(R),R=de-R,N(w,0,R<0?0:R)):[]}function sC(w,R){return w&&w.length?tt(w,sr(R,3),!0,!0):[]}function ka(w,R){return w&&w.length?tt(w,sr(R,3),!0):[]}function o3(w,R,Y,de){var Re=w==null?0:w.length;return Re?(Y&&typeof Y!="number"&&du(w,R,Y)&&(Y=0,de=Re),id(w,R,Y,de)):[]}function Vs(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Re=Y==null?0:Pi(Y);return Re<0&&(Re=vs(de+Re,0)),kf(w,sr(R,3),Re)}function $f(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Re=de-1;return Y!==t&&(Re=Pi(Y),Re=Y<0?vs(de+Re,0):Ws(Re,de-1)),kf(w,sr(R,3),Re,!0)}function Us(w){var R=w==null?0:w.length;return R?Aa(w,1):[]}function fu(w){var R=w==null?0:w.length;return R?Aa(w,Ve):[]}function jA(w,R){var Y=w==null?0:w.length;return Y?(R=R===t?1:Pi(R),Aa(w,R)):[]}function E0(w){for(var R=-1,Y=w==null?0:w.length,de={};++R<Y;){var Re=w[R];de[Re[0]]=Re[1]}return de}function my(w){return w&&w.length?w[0]:t}function aC(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Re=Y==null?0:Pi(Y);return Re<0&&(Re=vs(de+Re,0)),MA(w,R,Re)}function Xg(w){var R=w==null?0:w.length;return R?N(w,0,-1):[]}var B0=I(function(w){var R=$o(w,pt);return R.length&&R[0]===w[0]?pl(R):[]}),yl=I(function(w){var R=ss(w),Y=$o(w,pt);return R===ss(Y)?R=t:Y.pop(),Y.length&&Y[0]===w[0]?pl(Y,sr(R,2)):[]}),Fc=I(function(w){var R=ss(w),Y=$o(w,pt);return R=typeof R=="function"?R:t,R&&Y.pop(),Y.length&&Y[0]===w[0]?pl(Y,t,R):[]});function np(w,R){return w==null?"":Xh.call(w,R)}function ss(w){var R=w==null?0:w.length;return R?w[R-1]:t}function A_(w,R,Y){var de=w==null?0:w.length;if(!de)return-1;var Re=de;return Y!==t&&(Re=Pi(Y),Re=Re<0?vs(de+Re,0):Ws(Re,de-1)),R===R?ry(w,R,Re):kf(w,Nd,Re,!0)}function md(w,R){return w&&w.length?Gf(w,Pi(R)):t}var uA=I(pd);function pd(w,R){return w&&w.length&&R&&R.length?Uc(w,R):w}function py(w,R,Y){return w&&w.length&&R&&R.length?Uc(w,R,sr(Y,2)):w}function ip(w,R,Y){return w&&w.length&&R&&R.length?Uc(w,R,t,Y):w}var cA=Kc(function(w,R){var Y=w==null?0:w.length,de=$d(w,R);return ad(w,$o(R,function(Re){return _h(Re,Y)?+Re:Re}).sort(or)),de});function lC(w,R){var Y=[];if(!(w&&w.length))return Y;var de=-1,Re=[],et=w.length;for(R=sr(R,3);++de<et;){var yt=w[de];R(yt,de,w)&&(Y.push(yt),Re.push(de))}return ad(w,Re),Y}function tf(w){return w==null?w:IA.call(w)}function Jg(w,R,Y){var de=w==null?0:w.length;return de?(Y&&typeof Y!="number"&&du(w,R,Y)?(R=0,Y=de):(R=R==null?0:Pi(R),Y=Y===t?de:Pi(Y)),N(w,R,Y)):[]}function e1(w,R){return se(w,R)}function O0(w,R,Y){return ce(w,R,sr(Y,2))}function h_(w,R){var Y=w==null?0:w.length;if(Y){var de=se(w,R);if(de<Y&&Nl(w[de],R))return de}return-1}function d_(w,R){return se(w,R,!0)}function nf(w,R,Y){return ce(w,R,sr(Y,2),!0)}function f_(w,R){var Y=w==null?0:w.length;if(Y){var de=se(w,R,!0)-1;if(Nl(w[de],R))return de}return-1}function t1(w){return w&&w.length?ye(w):[]}function m_(w,R){return w&&w.length?ye(w,sr(R,2)):[]}function s3(w){var R=w==null?0:w.length;return R?N(w,1,R):[]}function a3(w,R,Y){return w&&w.length?(R=Y||R===t?1:Pi(R),N(w,0,R<0?0:R)):[]}function Do(w,R,Y){var de=w==null?0:w.length;return de?(R=Y||R===t?1:Pi(R),R=de-R,N(w,R<0?0:R,de)):[]}function bs(w,R){return w&&w.length?tt(w,sr(R,3),!1,!0):[]}function Wr(w,R){return w&&w.length?tt(w,sr(R,3)):[]}var Kr=I(function(w){return Le(Aa(w,1,qa,!0))}),No=I(function(w){var R=ss(w);return qa(R)&&(R=t),Le(Aa(w,1,qa,!0),sr(R,2))}),AA=I(function(w){var R=ss(w);return R=typeof R=="function"?R:t,Le(Aa(w,1,qa,!0),t,R)});function Hf(w){return w&&w.length?Le(w):[]}function rp(w,R){return w&&w.length?Le(w,sr(R,2)):[]}function gy(w,R){return R=typeof R=="function"?R:t,w&&w.length?Le(w,t,R):[]}function xh(w){if(!(w&&w.length))return[];var R=0;return w=_o(w,function(Y){if(qa(Y))return R=vs(Y.length,R),!0}),Wd(R,function(Y){return $o(w,jh(Y))})}function ma(w,R){if(!(w&&w.length))return[];var Y=xh(w);return R==null?Y:$o(Y,function(de){return gs(R,t,de)})}var NA=I(function(w,R){return qa(w)?ic(w,R):[]}),Zf=I(function(w){return ft(_o(w,qa))}),uC=I(function(w){var R=ss(w);return qa(R)&&(R=t),ft(_o(w,qa),sr(R,2))}),hA=I(function(w){var R=ss(w);return R=typeof R=="function"?R:t,ft(_o(w,qa),t,R)}),I0=I(xh);function n1(w,R){return lt(w||[],R||[],ml)}function zc(w,R){return lt(w||[],R||[],b)}var yy=I(function(w){var R=w.length,Y=R>1?w[R-1]:t;return Y=typeof Y=="function"?(w.pop(),Y):t,ma(w,Y)});function op(w){var R=Qe(w);return R.__chain__=!0,R}function cC(w,R){return R(w),w}function Xf(w,R){return R(w)}var i1=Kc(function(w){var R=w.length,Y=R?w[0]:0,de=this.__wrapped__,Re=function(et){return $d(et,w)};return R>1||this.__actions__.length||!(de instanceof hr)||!_h(Y)?this.thru(Re):(de=de.slice(Y,+Y+(R?1:0)),de.__actions__.push({func:Xf,args:[Re],thisArg:t}),new Sa(de,this.__chain__).thru(function(et){return R&&!et.length&&et.push(t),et}))});function Jf(){return op(this)}function Da(){return new Sa(this.value(),this.__chain__)}function em(){this.__values__===t&&(this.__values__=wr(this.value()));var w=this.__index__>=this.__values__.length,R=w?t:this.__values__[this.__index__++];return{done:w,value:R}}function sp(){return this}function rf(w){for(var R,Y=this;Y instanceof Bc;){var de=dy(Y);de.__index__=0,de.__values__=t,R?Re.__wrapped__=de:R=de;var Re=de;Y=Y.__wrapped__}return Re.__wrapped__=w,R}function AC(){var w=this.__wrapped__;if(w instanceof hr){var R=w;return this.__actions__.length&&(R=new hr(this)),R=R.reverse(),R.__actions__.push({func:Xf,args:[tf],thisArg:t}),new Sa(R,this.__chain__)}return this.thru(tf)}function hC(){return rt(this.__wrapped__,this.__actions__)}var dC=Qs(function(w,R,Y){xr.call(w,Y)?++w[Y]:nc(w,Y,1)});function r1(w,R,Y){var de=Cr(w)?eA:Gr;return Y&&du(w,R,Y)&&(R=t),de(w,sr(R,3))}function fC(w,R){var Y=Cr(w)?_o:rd;return Y(w,sr(R,3))}var Ro=ud(Vs),T0=ud($f);function jc(w,R){return Aa(k0(w,R),1)}function p_(w,R){return Aa(k0(w,R),Ve)}function mC(w,R,Y){return Y=Y===t?1:Pi(Y),Aa(k0(w,R),Y)}function pC(w,R){var Y=Cr(w)?Ou:oA;return Y(w,sr(R,3))}function of(w,R){var Y=Cr(w)?nu:kc;return Y(w,sr(R,3))}var o1=Qs(function(w,R,Y){xr.call(w,Y)?w[Y].push(R):nc(w,Y,[R])});function vy(w,R,Y,de){w=cc(w)?w:fp(w),Y=Y&&!de?Pi(Y):0;var Re=w.length;return Y<0&&(Y=vs(Re+Y,0)),nm(w)?Y<=Re&&w.indexOf(R,Y)>-1:!!Re&&MA(w,R,Y)>-1}var Mh=I(function(w,R,Y){var de=-1,Re=typeof R=="function",et=cc(w)?tn(w.length):[];return oA(w,function(yt){et[++de]=Re?gs(R,yt,Y):Rc(yt,R,Y)}),et}),Cy=Qs(function(w,R,Y){nc(w,Y,R)});function k0(w,R){var Y=Cr(w)?$o:Pc;return Y(w,sr(R,3))}function gC(w,R,Y,de){return w==null?[]:(Cr(R)||(R=R==null?[]:[R]),Y=de?t:Y,Cr(Y)||(Y=Y==null?[]:[Y]),FA(w,R,Y))}var s1=Qs(function(w,R,Y){w[Y?0:1].push(R)},function(){return[[],[]]});function sf(w,R,Y){var de=Cr(w)?e0:Gd,Re=arguments.length<3;return de(w,sr(R,4),Y,Re,oA)}function by(w,R,Y){var de=Cr(w)?t0:Gd,Re=arguments.length<3;return de(w,sr(R,4),Y,Re,kc)}function l3(w,R){var Y=Cr(w)?_o:rd;return Y(w,Sy(sr(R,3)))}function u3(w){var R=Cr(w)?ph:u;return R(w)}function c3(w,R,Y){(Y?du(w,R,Y):R===t)?R=1:R=Pi(R);var de=Cr(w)?$m:m;return de(w,R)}function g_(w){var R=Cr(w)?td:K;return R(w)}function y_(w){if(w==null)return 0;if(cc(w))return nm(w)?Yh(w):w.length;var R=hu(w);return R==wt||R==Fn?w.size:sA(w).length}function D0(w,R,Y){var de=Cr(w)?n0:H;return Y&&du(w,R,Y)&&(R=t),de(w,sr(R,3))}var _y=I(function(w,R){if(w==null)return[];var Y=R.length;return Y>1&&du(w,R[0],R[1])?R=[]:Y>2&&du(R[0],R[1],R[2])&&(R=[R[0]]),FA(w,Aa(R,1),[])}),a1=A0||function(){return Yn.Date.now()};function v_(w,R){if(typeof R!="function")throw new kl(s);return w=Pi(w),function(){if(--w<1)return R.apply(this,arguments)}}function yC(w,R,Y){return R=Y?t:R,R=w&&R==null?w.length:R,da(w,q,t,t,t,t,R)}function vC(w,R){var Y;if(typeof R!="function")throw new kl(s);return w=Pi(w),function(){return--w>0&&(Y=R.apply(this,arguments)),w<=1&&(R=t),Y}}var xy=I(function(w,R,Y){var de=z;if(Y.length){var Re=sh(Y,fa(xy));de|=ee}return da(w,de,R,Y,Re)}),My=I(function(w,R,Y){var de=z|V;if(Y.length){var Re=sh(Y,fa(My));de|=ee}return da(R,de,w,Y,Re)});function ap(w,R,Y){R=Y?t:R;var de=da(w,X,t,t,t,t,t,R);return de.placeholder=ap.placeholder,de}function wy(w,R,Y){R=Y?t:R;var de=da(w,re,t,t,t,t,t,R);return de.placeholder=wy.placeholder,de}function gd(w,R,Y){var de,Re,et,yt,It,Kt,Sn=0,h=!1,l=!1,A=!0;if(typeof w!="function")throw new kl(s);R=vl(R)||0,_s(Y)&&(h=!!Y.leading,l="maxWait"in Y,et=l?vs(vl(Y.maxWait)||0,R):et,A="trailing"in Y?!!Y.trailing:A);function y(he){var me=de,be=Re;return de=Re=t,Sn=he,yt=w.apply(be,me),yt}function _(he){return Sn=he,It=M0(D,R),h?y(he):yt}function B(he){var me=he-Kt,be=he-Sn,we=R-me;return l?Ws(we,et-be):we}function O(he){var me=he-Kt,be=he-Sn;return Kt===t||me>=R||me<0||l&&be>=et}function D(){var he=a1();if(O(he))return F(he);It=M0(D,B(he))}function F(he){return It=t,A&&de?y(he):(de=Re=t,yt)}function W(){It!==t&&jt(It),Sn=0,de=Kt=Re=It=t}function te(){return It===t?yt:F(a1())}function ae(){var he=a1(),me=O(he);if(de=arguments,Re=this,Kt=he,me){if(It===t)return _(Kt);if(l)return jt(It),It=M0(D,R),y(Kt)}return It===t&&(It=M0(D,R)),yt}return ae.cancel=W,ae.flush=te,ae}var Po=I(function(w,R){return Zm(w,1,R)}),l1=I(function(w,R,Y){return Zm(w,vl(R)||0,Y)});function A3(w){return da(w,ue)}function R0(w,R){if(typeof w!="function"||R!=null&&typeof R!="function")throw new kl(s);var Y=function(){var de=arguments,Re=R?R.apply(this,de):de[0],et=Y.cache;if(et.has(Re))return et.get(Re);var yt=w.apply(this,de);return Y.cache=et.set(Re,yt)||et,yt};return Y.cache=new(R0.Cache||Kl),Y}R0.Cache=Kl;function Sy(w){if(typeof w!="function")throw new kl(s);return function(){var R=arguments;switch(R.length){case 0:return!w.call(this);case 1:return!w.call(this,R[0]);case 2:return!w.call(this,R[0],R[1]);case 3:return!w.call(this,R[0],R[1],R[2])}return!w.apply(this,R)}}function h3(w){return vC(2,w)}var d3=Tt(function(w,R){R=R.length==1&&Cr(R[0])?$o(R[0],Tl(sr())):$o(Aa(R,1),Tl(sr()));var Y=R.length;return I(function(de){for(var Re=-1,et=Ws(de.length,Y);++Re<et;)de[Re]=R[Re].call(this,de[Re]);return gs(w,this,de)})}),P0=I(function(w,R){var Y=sh(R,fa(P0));return da(w,ee,t,R,Y)}),lp=I(function(w,R){var Y=sh(R,fa(lp));return da(w,ne,t,R,Y)}),Ey=Kc(function(w,R){return da(w,le,t,t,t,R)});function u1(w,R){if(typeof w!="function")throw new kl(s);return R=R===t?R:Pi(R),I(w,R)}function wh(w,R){if(typeof w!="function")throw new kl(s);return R=R==null?0:vs(Pi(R),0),I(function(Y){var de=Y[R],Re=zt(Y,0,R);return de&&To(Re,de),gs(w,this,Re)})}function uc(w,R,Y){var de=!0,Re=!0;if(typeof w!="function")throw new kl(s);return _s(Y)&&(de="leading"in Y?!!Y.leading:de,Re="trailing"in Y?!!Y.trailing:Re),gd(w,R,{leading:de,maxWait:R,trailing:Re})}function Sh(w){return yC(w,1)}function up(w,R){return P0(_t(R),w)}function f3(){if(!arguments.length)return[];var w=arguments[0];return Cr(w)?w:[w]}function c1(w){return au(w,E)}function By(w,R){return R=typeof R=="function"?R:t,au(w,E,R)}function C_(w){return au(w,v|E)}function Oy(w,R){return R=typeof R=="function"?R:t,au(w,v|E,R)}function CC(w,R){return R==null||rA(w,R,Cl(R))}function Nl(w,R){return w===R||w!==w&&R!==R}var bC=Ho(LA),_C=Ho(function(w,R){return w>=R}),af=uu((function(){return arguments})())?uu:function(w){return pa(w)&&xr.call(w,"callee")&&!qd.call(w,"callee")},Cr=tn.isArray,U0=jr?Tl(jr):ea;function cc(w){return w!=null&&f1(w.length)&&!Nc(w)}function qa(w){return pa(w)&&cc(w)}function A1(w){return w===!0||w===!1||pa(w)&&li(w)==Ue}var tm=Qm||Jt,b_=Oo?Tl(Oo):yh;function oo(w){return pa(w)&&w.nodeType===1&&!F0(w)}function h1(w){if(w==null)return!0;if(cc(w)&&(Cr(w)||typeof w=="string"||typeof w.splice=="function"||tm(w)||vd(w)||af(w)))return!w.length;var R=hu(w);if(R==wt||R==Fn)return!w.size;if(dd(w))return!sA(w).length;for(var Y in w)if(xr.call(w,Y))return!1;return!0}function Eh(w,R){return Xr(w,R)}function Iy(w,R,Y){Y=typeof Y=="function"?Y:t;var de=Y?Y(w,R):t;return de===t?Xr(w,R,t,Y):!!de}function d1(w){if(!pa(w))return!1;var R=li(w);return R==He||R==Te||typeof w.message=="string"&&typeof w.name=="string"&&!F0(w)}function Ty(w){return typeof w=="number"&&Pl(w)}function Nc(w){if(!_s(w))return!1;var R=li(w);return R==Ct||R==vt||R==Rt||R==Wn}function L0(w){return typeof w=="number"&&w==Pi(w)}function f1(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=ut}function _s(w){var R=typeof w;return w!=null&&(R=="object"||R=="function")}function pa(w){return w!=null&&typeof w=="object"}var K0=Ko?Tl(Ko):zo;function xC(w,R){return w===R||As(w,R,ay(R))}function ky(w,R,Y){return Y=typeof Y=="function"?Y:t,As(w,R,ay(R),Y)}function as(w){return MC(w)&&w!=+w}function Ac(w){if(Vg(w))throw new yr(o);return od(w)}function Ra(w){return w===null}function m1(w){return w==null}function MC(w){return typeof w=="number"||pa(w)&&li(w)==Ft}function F0(w){if(!pa(w)||li(w)!=nn)return!1;var R=ru(w);if(R===null)return!0;var Y=xr.call(R,"constructor")&&R.constructor;return typeof Y=="function"&&Y instanceof Y&&uh.call(Y)==SA}var z0=ps?Tl(ps):sc;function Dy(w){return L0(w)&&w>=-ut&&w<=ut}var yd=oh?Tl(oh):vh;function nm(w){return typeof w=="string"||!Cr(w)&&pa(w)&&li(w)==Ln}function Ru(w){return typeof w=="symbol"||pa(w)&&li(w)==In}var vd=Il?Tl(Il):Nf;function Ry(w){return w===t}function wC(w){return pa(w)&&hu(w)==Tn}function Py(w){return pa(w)&&li(w)==je}var m3=Ho(hs),__=Ho(function(w,R){return w<=R});function wr(w){if(!w)return[];if(cc(w))return nm(w)?Ts(w):Pr(w);if(fl&&w[fl])return qh(w[fl]());var R=hu(w),Y=R==wt?Fm:R==Fn?s0:fp;return Y(w)}function mu(w){if(!w)return w===0?w:0;if(w=vl(w),w===Ve||w===-Ve){var R=w<0?-1:1;return R*mt}return w===w?w:0}function Pi(w){var R=mu(w),Y=R%1;return R===R?Y?R-Y:R:0}function dA(w){return w?ku(Pi(w),0,De):0}function vl(w){if(typeof w=="number")return w;if(Ru(w))return Pe;if(_s(w)){var R=typeof w.valueOf=="function"?w.valueOf():w;w=_s(R)?R+"":R}if(typeof w!="string")return w===0?w:+w;w=Mc(w);var Y=_A.test(w);return Y||Hi.test(w)?Rn(w.slice(2),Y?2:8):ja.test(w)?Pe:+w}function pu(w){return Ur(w,hc(w))}function sl(w){return w?ku(Pi(w),-ut,ut):w===0?w:0}function dr(w){return w==null?"":Se(w)}var SC=jo(function(w,R){if(dd(R)||cc(R)){Ur(R,Cl(R),w);return}for(var Y in R)xr.call(R,Y)&&ml(w,Y,R[Y])}),Pu=jo(function(w,R){Ur(R,hc(R),w)}),na=jo(function(w,R,Y,de){Ur(R,hc(R),w,de)}),Uy=jo(function(w,R,Y,de){Ur(R,Cl(R),w,de)}),GA=Kc($d);function Ly(w,R){var Y=ou(w);return R==null?Y:p0(Y,R)}var im=I(function(w,R){w=Fo(w);var Y=-1,de=R.length,Re=de>2?R[2]:t;for(Re&&du(R[0],R[1],Re)&&(de=1);++Y<de;)for(var et=R[Y],yt=hc(et),It=-1,Kt=yt.length;++It<Kt;){var Sn=yt[It],h=w[Sn];(h===t||Nl(h,Sc[Sn])&&!xr.call(w,Sn))&&(w[Sn]=et[Sn])}return w}),cp=I(function(w){return w.push(t,zA),gs(Ap,t,w)});function x_(w,R){return jd(w,sr(R,3),rc)}function j0(w,R){return jd(w,sr(R,3),Xm)}function fA(w,R){return w==null?w:gh(w,sr(R,3),hc)}function EC(w,R){return w==null?w:Hd(w,sr(R,3),hc)}function N0(w,R){return w&&rc(w,sr(R,3))}function Cd(w,R){return w&&Xm(w,sr(R,3))}function BC(w){return w==null?[]:il(w,Cl(w))}function Uu(w){return w==null?[]:il(w,hc(w))}function Gl(w,R,Y){var de=w==null?t:oc(w,R);return de===t?Y:de}function gu(w,R){return w!=null&&uy(w,R,lu)}function bd(w,R){return w!=null&&uy(w,R,rl)}var Ky=Ba(function(w,R,Y){R!=null&&typeof R.toString!="function"&&(R=Dl.call(R)),w[R]=Y},um(Lu)),OC=Ba(function(w,R,Y){R!=null&&typeof R.toString!="function"&&(R=Dl.call(R)),xr.call(w,R)?w[R].push(Y):w[R]=[Y]},sr),M_=I(Rc);function Cl(w){return cc(w)?jf(w):sA(w)}function hc(w){return cc(w)?jf(w,!0):Ng(w)}function w_(w,R){var Y={};return R=sr(R,3),rc(w,function(de,Re,et){nc(Y,R(de,Re,et),de)}),Y}function Fy(w,R){var Y={};return R=sr(R,3),rc(w,function(de,Re,et){nc(Y,Re,R(de,Re,et))}),Y}var lf=jo(function(w,R,Y){sd(w,R,Y)}),Ap=jo(function(w,R,Y,de){sd(w,R,Y,de)}),IC=Kc(function(w,R){var Y={};if(w==null)return Y;var de=!1;R=$o(R,function(et){return et=At(et,w),de||(de=et.length>1),et}),Ur(w,Wg(w),Y),de&&(Y=au(Y,v|M|E,Gg));for(var Re=R.length;Re--;)Je(Y,R[Re]);return Y});function G0(w,R){return hp(w,Sy(sr(R)))}var rm=Kc(function(w,R){return w==null?{}:Ch(w,R)});function hp(w,R){if(w==null)return{};var Y=$o(Wg(w),function(de){return[de]});return R=sr(R),ol(w,Y,function(de,Re){return R(de,Re[0])})}function S_(w,R,Y){R=At(R,w);var de=-1,Re=R.length;for(Re||(Re=1,w=t);++de<Re;){var et=w==null?t:w[lc(R[de])];et===t&&(de=Re,et=Y),w=Nc(et)?et.call(w):et}return w}function p1(w,R,Y){return w==null?w:b(w,R,Y)}function W0(w,R,Y,de){return de=typeof de=="function"?de:t,w==null?w:b(w,R,Y,de)}var dp=C0(Cl),om=C0(hc);function zy(w,R,Y){var de=Cr(w),Re=de||tm(w)||vd(w);if(R=sr(R,4),Y==null){var et=w&&w.constructor;Re?Y=de?new et:[]:_s(w)?Y=Nc(et)?ou(ru(w)):{}:Y={}}return(Re?Ou:rc)(w,function(yt,It,Kt){return R(Y,yt,It,Kt)}),Y}function jy(w,R){return w==null?!0:Je(w,R)}function TC(w,R,Y){return w==null?w:nt(w,R,_t(Y))}function kC(w,R,Y,de){return de=typeof de=="function"?de:t,w==null?w:nt(w,R,_t(Y),de)}function fp(w){return w==null?[]:o0(w,Cl(w))}function Ny(w){return w==null?[]:o0(w,hc(w))}function E_(w,R,Y){return Y===t&&(Y=R,R=t),Y!==t&&(Y=vl(Y),Y=Y===Y?Y:0),R!==t&&(R=vl(R),R=R===R?R:0),ku(vl(w),R,Y)}function g1(w,R,Y){return R=mu(R),Y===t?(Y=R,R=0):Y=mu(Y),w=vl(w),Js(w,R,Y)}function Gy(w,R,Y){if(Y&&typeof Y!="boolean"&&du(w,R,Y)&&(R=Y=t),Y===t&&(typeof R=="boolean"?(Y=R,R=t):typeof w=="boolean"&&(Y=w,w=t)),w===t&&R===t?(w=0,R=1):(w=mu(w),R===t?(R=w,w=0):R=mu(R)),w>R){var de=w;w=R,R=de}if(Y||w%1||R%1){var Re=tA();return Ws(w+Re*(R-w+qn("1e-"+((Re+"").length-1))),R)}return ld(w,R)}var y1=Du(function(w,R,Y){return R=R.toLowerCase(),w+(Y?B_(R):R)});function B_(w){return mA(dr(w).toLowerCase())}function Q0(w){return w=dr(w),w&&w.replace(fo,Pf).replace(ro,"")}function DC(w,R,Y){w=dr(w),R=Se(R);var de=w.length;Y=Y===t?de:ku(Pi(Y),0,de);var Re=Y;return Y-=R.length,Y>=0&&w.slice(Y,Re)==R}function RC(w){return w=dr(w),w&&xi.test(w)?w.replace(_n,ny):w}function O_(w){return w=dr(w),w&&Ki.test(w)?w.replace(Vi,"\\$&"):w}var I_=Du(function(w,R,Y){return w+(Y?"-":"")+R.toLowerCase()}),PC=Du(function(w,R,Y){return w+(Y?" ":"")+R.toLowerCase()}),mp=Lc("toLowerCase");function UC(w,R,Y){w=dr(w),R=Pi(R);var de=R?Yh(w):0;if(!R||de>=R)return w;var Re=(R-de)/2;return rs(Yd(Re),Y)+w+rs(Lf(Re),Y)}function T_(w,R,Y){w=dr(w),R=Pi(R);var de=R?Yh(w):0;return R&&de<R?w+rs(R-de,Y):w}function q0(w,R,Y){w=dr(w),R=Pi(R);var de=R?Yh(w):0;return R&&de<R?rs(R-de,Y)+w:w}function LC(w,R,Y){return Y||R==null?R=0:R&&(R=+R),nl(dr(w).replace(Ir,""),R||0)}function k_(w,R,Y){return(Y?du(w,R,Y):R===t)?R=1:R=Pi(R),ac(dr(w),R)}function sm(){var w=arguments,R=dr(w[0]);return w.length<3?R:R.replace(w[1],w[2])}var Wy=Du(function(w,R,Y){return w+(Y?"_":"")+R.toLowerCase()});function Qy(w,R,Y){return Y&&typeof Y!="number"&&du(w,R,Y)&&(R=Y=t),Y=Y===t?De:Y>>>0,Y?(w=dr(w),w&&(typeof R=="string"||R!=null&&!z0(R))&&(R=Se(R),!R&&Qh(w))?zt(Ts(w),0,Y):w.split(R,Y)):[]}var pp=Du(function(w,R,Y){return w+(Y?" ":"")+mA(R)});function D_(w,R,Y){return w=dr(w),Y=Y==null?0:ku(Pi(Y),0,w.length),R=Se(R),w.slice(Y,Y+R.length)==R}function KC(w,R,Y){var de=Qe.templateSettings;Y&&du(w,R,Y)&&(R=t),w=dr(w),R=na({},R,de,bh);var Re=na({},R.imports,de.imports,bh),et=Cl(Re),yt=o0(Re,et),It,Kt,Sn=0,h=R.interpolate||Xa,l="__p += '",A=Zr((R.escape||Xa).source+"|"+h.source+"|"+(h===Zn?er:Xa).source+"|"+(R.evaluate||Xa).source+"|$","g"),y="//# sourceURL="+(xr.call(R,"sourceURL")?(R.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++el+"]")+`
`;w.replace(A,function(O,D,F,W,te,ae){return F||(F=W),l+=w.slice(Sn,ae).replace(El,Lm),D&&(It=!0,l+=`' +
__e(`+D+`) +
'`),te&&(Kt=!0,l+=`';
`+te+`;
__p += '`),F&&(l+=`' +
((__t = (`+F+`)) == null ? '' : __t) +
'`),Sn=ae+O.length,O}),l+=`';
`;var _=xr.call(R,"variable")&&R.variable;if(!_)l=`with (obj) {
`+l+`
}
`;else if(lo.test(_))throw new yr(a);l=(Kt?l.replace(C,""):l).replace(Ut,"$1").replace(gn,"$1;"),l="function("+(_||"obj")+`) {
`+(_?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(It?", __e = _.escape":"")+(Kt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+l+`return __p
}`;var B=gp(function(){return Nr(et,y+"return "+l).apply(t,yt)});if(B.source=l,d1(B))throw B;return B}function uf(w){return dr(w).toLowerCase()}function cf(w){return dr(w).toUpperCase()}function am(w,R,Y){if(w=dr(w),w&&(Y||R===t))return Mc(w);if(!w||!(R=Se(R)))return w;var de=Ts(w),Re=Ts(R),et=Pm(de,Re),yt=Um(de,Re)+1;return zt(de,et,yt).join("")}function v1(w,R,Y){if(w=dr(w),w&&(Y||R===t))return w.slice(0,ah(w)+1);if(!w||!(R=Se(R)))return w;var de=Ts(w),Re=Um(de,Ts(R))+1;return zt(de,0,Re).join("")}function C1(w,R,Y){if(w=dr(w),w&&(Y||R===t))return w.replace(Ir,"");if(!w||!(R=Se(R)))return w;var de=Ts(w),Re=Pm(de,Ts(R));return zt(de,Re).join("")}function lm(w,R){var Y=ve,de=pe;if(_s(R)){var Re="separator"in R?R.separator:Re;Y="length"in R?Pi(R.length):Y,de="omission"in R?Se(R.omission):de}w=dr(w);var et=w.length;if(Qh(w)){var yt=Ts(w);et=yt.length}if(Y>=et)return w;var It=Y-Yh(de);if(It<1)return de;var Kt=yt?zt(yt,0,It).join(""):w.slice(0,It);if(Re===t)return Kt+de;if(yt&&(It+=Kt.length-It),z0(Re)){if(w.slice(It).search(Re)){var Sn,h=Kt;for(Re.global||(Re=Zr(Re.source,dr(Ai.exec(Re))+"g")),Re.lastIndex=0;Sn=Re.exec(h);)var l=Sn.index;Kt=Kt.slice(0,l===t?It:l)}}else if(w.indexOf(Se(Re),It)!=It){var A=Kt.lastIndexOf(Re);A>-1&&(Kt=Kt.slice(0,A))}return Kt+de}function p3(w){return w=dr(w),w&&Mt.test(w)?w.replace(bn,wc):w}var FC=Du(function(w,R,Y){return w+(Y?" ":"")+R.toUpperCase()}),mA=Lc("toUpperCase");function R_(w,R,Y){return w=dr(w),R=Y?t:R,R===t?Km(w)?l0(w):i0(w):w.match(R)||[]}var gp=I(function(w,R){try{return gs(w,t,R)}catch(Y){return d1(Y)?Y:new yr(Y)}}),qy=Kc(function(w,R){return Ou(R,function(Y){Y=lc(Y),nc(w,Y,xy(w[Y],w))}),w});function P_(w){var R=w==null?0:w.length,Y=sr();return w=R?$o(w,function(de){if(typeof de[1]!="function")throw new kl(s);return[Y(de[0]),de[1]]}):[],I(function(de){for(var Re=-1;++Re<R;){var et=w[Re];if(gs(et[0],this,de))return gs(et[1],this,de)}})}function g3(w){return Hm(au(w,v))}function um(w){return function(){return w}}function b1(w,R){return w==null||w!==w?R:w}var U_=cu(),Y0=cu(!0);function Lu(w){return w}function V0(w){return KA(typeof w=="function"?w:au(w,v))}function Yy(w){return Zd(au(w,v))}function zC(w,R){return Xd(w,au(R,v))}var L_=I(function(w,R){return function(Y){return Rc(Y,w,R)}}),Vy=I(function(w,R){return function(Y){return Rc(w,Y,R)}});function f(w,R,Y){var de=Cl(R),Re=il(R,de);Y==null&&!(_s(R)&&(Re.length||!de.length))&&(Y=R,R=w,w=this,Re=il(R,Cl(R)));var et=!(_s(Y)&&"chain"in Y)||!!Y.chain,yt=Nc(w);return Ou(Re,function(It){var Kt=R[It];w[It]=Kt,yt&&(w.prototype[It]=function(){var Sn=this.__chain__;if(et||Sn){var h=w(this.__wrapped__),l=h.__actions__=Pr(this.__actions__);return l.push({func:Kt,args:arguments,thisArg:w}),h.__chain__=Sn,h}return Kt.apply(w,To([this.value()],arguments))})}),w}function g(){return Yn._===this&&(Yn._=iu),this}function x(){}function T(w){return w=Pi(w),I(function(R){return Gf(R,w)})}var G=Au($o),J=Au(eA),xe=Au(n0);function qe(w){return _0(w)?jh(lc(w)):Cs(w)}function xt(w){return function(R){return w==null?t:oc(w,R)}}var Zt=jl(),un=jl(!0);function yn(){return[]}function Jt(){return!1}function on(){return{}}function Si(){return""}function ir(){return!0}function Go(w,R){if(w=Pi(w),w<1||w>ut)return[];var Y=De,de=Ws(w,De);R=sr(R),w-=De;for(var Re=Wd(de,R);++Y<w;)R(Y);return Re}function Lt(w){return Cr(w)?$o(w,lc):Ru(w)?[w]:Pr(Zg(dr(w)))}function kt(w){var R=++Kg;return dr(w)+R}var Vt=ha(function(w,R){return w+R},0),dn=Qf("ceil"),vi=ha(function(w,R){return w/R},1),xo=Qf("floor");function Gi(w){return w&&w.length?Dc(w,Lu,LA):t}function Tr(w,R){return w&&w.length?Dc(w,sr(R,2),LA):t}function Jr(w){return Gs(w,Lu)}function Uo(w,R){return Gs(w,sr(R,2))}function Af(w){return w&&w.length?Dc(w,Lu,hs):t}function K_(w,R){return w&&w.length?Dc(w,sr(R,2),hs):t}var IO=ha(function(w,R){return w*R},1),ZM=Qf("round"),y3=ha(function(w,R){return w-R},0);function v3(w){return w&&w.length?r0(w,Lu):0}function XM(w,R){return w&&w.length?r0(w,sr(R,2)):0}return Qe.after=v_,Qe.ary=yC,Qe.assign=SC,Qe.assignIn=Pu,Qe.assignInWith=na,Qe.assignWith=Uy,Qe.at=GA,Qe.before=vC,Qe.bind=xy,Qe.bindAll=qy,Qe.bindKey=My,Qe.castArray=f3,Qe.chain=op,Qe.chunk=u_,Qe.compact=iC,Qe.concat=rC,Qe.cond=P_,Qe.conforms=g3,Qe.constant=um,Qe.countBy=dC,Qe.create=Ly,Qe.curry=ap,Qe.curryRight=wy,Qe.debounce=gd,Qe.defaults=im,Qe.defaultsDeep=cp,Qe.defer=Po,Qe.delay=l1,Qe.difference=fy,Qe.differenceBy=c_,Qe.differenceWith=ef,Qe.drop=Ta,Qe.dropRight=oC,Qe.dropRightWhile=sC,Qe.dropWhile=ka,Qe.fill=o3,Qe.filter=fC,Qe.flatMap=jc,Qe.flatMapDeep=p_,Qe.flatMapDepth=mC,Qe.flatten=Us,Qe.flattenDeep=fu,Qe.flattenDepth=jA,Qe.flip=A3,Qe.flow=U_,Qe.flowRight=Y0,Qe.fromPairs=E0,Qe.functions=BC,Qe.functionsIn=Uu,Qe.groupBy=o1,Qe.initial=Xg,Qe.intersection=B0,Qe.intersectionBy=yl,Qe.intersectionWith=Fc,Qe.invert=Ky,Qe.invertBy=OC,Qe.invokeMap=Mh,Qe.iteratee=V0,Qe.keyBy=Cy,Qe.keys=Cl,Qe.keysIn=hc,Qe.map=k0,Qe.mapKeys=w_,Qe.mapValues=Fy,Qe.matches=Yy,Qe.matchesProperty=zC,Qe.memoize=R0,Qe.merge=lf,Qe.mergeWith=Ap,Qe.method=L_,Qe.methodOf=Vy,Qe.mixin=f,Qe.negate=Sy,Qe.nthArg=T,Qe.omit=IC,Qe.omitBy=G0,Qe.once=h3,Qe.orderBy=gC,Qe.over=G,Qe.overArgs=d3,Qe.overEvery=J,Qe.overSome=xe,Qe.partial=P0,Qe.partialRight=lp,Qe.partition=s1,Qe.pick=rm,Qe.pickBy=hp,Qe.property=qe,Qe.propertyOf=xt,Qe.pull=uA,Qe.pullAll=pd,Qe.pullAllBy=py,Qe.pullAllWith=ip,Qe.pullAt=cA,Qe.range=Zt,Qe.rangeRight=un,Qe.rearg=Ey,Qe.reject=l3,Qe.remove=lC,Qe.rest=u1,Qe.reverse=tf,Qe.sampleSize=c3,Qe.set=p1,Qe.setWith=W0,Qe.shuffle=g_,Qe.slice=Jg,Qe.sortBy=_y,Qe.sortedUniq=t1,Qe.sortedUniqBy=m_,Qe.split=Qy,Qe.spread=wh,Qe.tail=s3,Qe.take=a3,Qe.takeRight=Do,Qe.takeRightWhile=bs,Qe.takeWhile=Wr,Qe.tap=cC,Qe.throttle=uc,Qe.thru=Xf,Qe.toArray=wr,Qe.toPairs=dp,Qe.toPairsIn=om,Qe.toPath=Lt,Qe.toPlainObject=pu,Qe.transform=zy,Qe.unary=Sh,Qe.union=Kr,Qe.unionBy=No,Qe.unionWith=AA,Qe.uniq=Hf,Qe.uniqBy=rp,Qe.uniqWith=gy,Qe.unset=jy,Qe.unzip=xh,Qe.unzipWith=ma,Qe.update=TC,Qe.updateWith=kC,Qe.values=fp,Qe.valuesIn=Ny,Qe.without=NA,Qe.words=R_,Qe.wrap=up,Qe.xor=Zf,Qe.xorBy=uC,Qe.xorWith=hA,Qe.zip=I0,Qe.zipObject=n1,Qe.zipObjectDeep=zc,Qe.zipWith=yy,Qe.entries=dp,Qe.entriesIn=om,Qe.extend=Pu,Qe.extendWith=na,f(Qe,Qe),Qe.add=Vt,Qe.attempt=gp,Qe.camelCase=y1,Qe.capitalize=B_,Qe.ceil=dn,Qe.clamp=E_,Qe.clone=c1,Qe.cloneDeep=C_,Qe.cloneDeepWith=Oy,Qe.cloneWith=By,Qe.conformsTo=CC,Qe.deburr=Q0,Qe.defaultTo=b1,Qe.divide=vi,Qe.endsWith=DC,Qe.eq=Nl,Qe.escape=RC,Qe.escapeRegExp=O_,Qe.every=r1,Qe.find=Ro,Qe.findIndex=Vs,Qe.findKey=x_,Qe.findLast=T0,Qe.findLastIndex=$f,Qe.findLastKey=j0,Qe.floor=xo,Qe.forEach=pC,Qe.forEachRight=of,Qe.forIn=fA,Qe.forInRight=EC,Qe.forOwn=N0,Qe.forOwnRight=Cd,Qe.get=Gl,Qe.gt=bC,Qe.gte=_C,Qe.has=gu,Qe.hasIn=bd,Qe.head=my,Qe.identity=Lu,Qe.includes=vy,Qe.indexOf=aC,Qe.inRange=g1,Qe.invoke=M_,Qe.isArguments=af,Qe.isArray=Cr,Qe.isArrayBuffer=U0,Qe.isArrayLike=cc,Qe.isArrayLikeObject=qa,Qe.isBoolean=A1,Qe.isBuffer=tm,Qe.isDate=b_,Qe.isElement=oo,Qe.isEmpty=h1,Qe.isEqual=Eh,Qe.isEqualWith=Iy,Qe.isError=d1,Qe.isFinite=Ty,Qe.isFunction=Nc,Qe.isInteger=L0,Qe.isLength=f1,Qe.isMap=K0,Qe.isMatch=xC,Qe.isMatchWith=ky,Qe.isNaN=as,Qe.isNative=Ac,Qe.isNil=m1,Qe.isNull=Ra,Qe.isNumber=MC,Qe.isObject=_s,Qe.isObjectLike=pa,Qe.isPlainObject=F0,Qe.isRegExp=z0,Qe.isSafeInteger=Dy,Qe.isSet=yd,Qe.isString=nm,Qe.isSymbol=Ru,Qe.isTypedArray=vd,Qe.isUndefined=Ry,Qe.isWeakMap=wC,Qe.isWeakSet=Py,Qe.join=np,Qe.kebabCase=I_,Qe.last=ss,Qe.lastIndexOf=A_,Qe.lowerCase=PC,Qe.lowerFirst=mp,Qe.lt=m3,Qe.lte=__,Qe.max=Gi,Qe.maxBy=Tr,Qe.mean=Jr,Qe.meanBy=Uo,Qe.min=Af,Qe.minBy=K_,Qe.stubArray=yn,Qe.stubFalse=Jt,Qe.stubObject=on,Qe.stubString=Si,Qe.stubTrue=ir,Qe.multiply=IO,Qe.nth=md,Qe.noConflict=g,Qe.noop=x,Qe.now=a1,Qe.pad=UC,Qe.padEnd=T_,Qe.padStart=q0,Qe.parseInt=LC,Qe.random=Gy,Qe.reduce=sf,Qe.reduceRight=by,Qe.repeat=k_,Qe.replace=sm,Qe.result=S_,Qe.round=ZM,Qe.runInContext=Dt,Qe.sample=u3,Qe.size=y_,Qe.snakeCase=Wy,Qe.some=D0,Qe.sortedIndex=e1,Qe.sortedIndexBy=O0,Qe.sortedIndexOf=h_,Qe.sortedLastIndex=d_,Qe.sortedLastIndexBy=nf,Qe.sortedLastIndexOf=f_,Qe.startCase=pp,Qe.startsWith=D_,Qe.subtract=y3,Qe.sum=v3,Qe.sumBy=XM,Qe.template=KC,Qe.times=Go,Qe.toFinite=mu,Qe.toInteger=Pi,Qe.toLength=dA,Qe.toLower=uf,Qe.toNumber=vl,Qe.toSafeInteger=sl,Qe.toString=dr,Qe.toUpper=cf,Qe.trim=am,Qe.trimEnd=v1,Qe.trimStart=C1,Qe.truncate=lm,Qe.unescape=p3,Qe.uniqueId=kt,Qe.upperCase=FC,Qe.upperFirst=mA,Qe.each=pC,Qe.eachRight=of,Qe.first=my,f(Qe,(function(){var w={};return rc(Qe,function(R,Y){xr.call(Qe.prototype,Y)||(w[Y]=R)}),w})(),{chain:!1}),Qe.VERSION=i,Ou(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){Qe[w].placeholder=Qe}),Ou(["drop","take"],function(w,R){hr.prototype[w]=function(Y){Y=Y===t?1:vs(Pi(Y),0);var de=this.__filtered__&&!R?new hr(this):this.clone();return de.__filtered__?de.__takeCount__=Ws(Y,de.__takeCount__):de.__views__.push({size:Ws(Y,De),type:w+(de.__dir__<0?"Right":"")}),de},hr.prototype[w+"Right"]=function(Y){return this.reverse()[w](Y).reverse()}}),Ou(["filter","map","takeWhile"],function(w,R){var Y=R+1,de=Y==Oe||Y==Ee;hr.prototype[w]=function(Re){var et=this.clone();return et.__iteratees__.push({iteratee:sr(Re,3),type:Y}),et.__filtered__=et.__filtered__||de,et}}),Ou(["head","last"],function(w,R){var Y="take"+(R?"Right":"");hr.prototype[w]=function(){return this[Y](1).value()[0]}}),Ou(["initial","tail"],function(w,R){var Y="drop"+(R?"":"Right");hr.prototype[w]=function(){return this.__filtered__?new hr(this):this[Y](1)}}),hr.prototype.compact=function(){return this.filter(Lu)},hr.prototype.find=function(w){return this.filter(w).head()},hr.prototype.findLast=function(w){return this.reverse().find(w)},hr.prototype.invokeMap=I(function(w,R){return typeof w=="function"?new hr(this):this.map(function(Y){return Rc(Y,w,R)})}),hr.prototype.reject=function(w){return this.filter(Sy(sr(w)))},hr.prototype.slice=function(w,R){w=Pi(w);var Y=this;return Y.__filtered__&&(w>0||R<0)?new hr(Y):(w<0?Y=Y.takeRight(-w):w&&(Y=Y.drop(w)),R!==t&&(R=Pi(R),Y=R<0?Y.dropRight(-R):Y.take(R-w)),Y)},hr.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},hr.prototype.toArray=function(){return this.take(De)},rc(hr.prototype,function(w,R){var Y=/^(?:filter|find|map|reject)|While$/.test(R),de=/^(?:head|last)$/.test(R),Re=Qe[de?"take"+(R=="last"?"Right":""):R],et=de||/^find/.test(R);Re&&(Qe.prototype[R]=function(){var yt=this.__wrapped__,It=de?[1]:arguments,Kt=yt instanceof hr,Sn=It[0],h=Kt||Cr(yt),l=function(D){var F=Re.apply(Qe,To([D],It));return de&&A?F[0]:F};h&&Y&&typeof Sn=="function"&&Sn.length!=1&&(Kt=h=!1);var A=this.__chain__,y=!!this.__actions__.length,_=et&&!A,B=Kt&&!y;if(!et&&h){yt=B?yt:new hr(this);var O=w.apply(yt,It);return O.__actions__.push({func:Xf,args:[l],thisArg:t}),new Sa(O,A)}return _&&B?w.apply(this,It):(O=this.thru(l),_?de?O.value()[0]:O.value():O)})}),Ou(["pop","push","shift","sort","splice","unshift"],function(w){var R=Vh[w],Y=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",de=/^(?:pop|shift)$/.test(w);Qe.prototype[w]=function(){var Re=arguments;if(de&&!this.__chain__){var et=this.value();return R.apply(Cr(et)?et:[],Re)}return this[Y](function(yt){return R.apply(Cr(yt)?yt:[],Re)})}}),rc(hr.prototype,function(w,R){var Y=Qe[R];if(Y){var de=Y.name+"";xr.call(uo,de)||(uo[de]=[]),uo[de].push({name:R,func:Y})}}),uo[qs(t,V).name]=[{name:"wrapper",func:t}],hr.prototype.clone=kA,hr.prototype.reverse=fh,hr.prototype.value=DA,Qe.prototype.at=i1,Qe.prototype.chain=Jf,Qe.prototype.commit=Da,Qe.prototype.next=em,Qe.prototype.plant=rf,Qe.prototype.reverse=AC,Qe.prototype.toJSON=Qe.prototype.valueOf=Qe.prototype.value=hC,Qe.prototype.first=Qe.prototype.head,fl&&(Qe.prototype[fl]=sp),Qe}),lh=Nm();ni?((ni.exports=lh)._=lh,Oi._=lh):Yn._=lh}).call(Pue)})(Y3,Y3.exports)),Y3.exports}var oM=Uue();const Y9=xu(oM);function Lue(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var VO,Oz;function Kue(){if(Oz)return VO;Oz=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return VO=n,VO}var Fue=Kue();const Iz=xu(Fue);var Cf=Uint8Array,k2=Uint16Array,zue=Int32Array,IZ=new Cf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),TZ=new Cf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jue=new Cf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kZ=function(n,e){for(var t=new k2(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new zue(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},DZ=kZ(IZ,2),RZ=DZ.b,Nue=DZ.r;RZ[28]=258,Nue[258]=28;var Gue=kZ(TZ,0),Wue=Gue.b,V9=new k2(32768);for(var Za=0;Za<32768;++Za){var Hy=(Za&43690)>>1|(Za&21845)<<1;Hy=(Hy&52428)>>2|(Hy&13107)<<2,Hy=(Hy&61680)>>4|(Hy&3855)<<4,V9[Za]=((Hy&65280)>>8|(Hy&255)<<8)>>1}var C4=(function(n,e,t){for(var i=n.length,r=0,o=new k2(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new k2(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new k2(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var d=r<<4|n[r],p=e-n[r],v=s[n[r]-1]++<<p,M=v|(1<<p)-1;v<=M;++v)a[V9[v]>>c]=d}else for(a=new k2(i),r=0;r<i;++r)n[r]&&(a[r]=V9[s[n[r]-1]++]>>15-n[r]);return a}),sM=new Cf(288);for(var Za=0;Za<144;++Za)sM[Za]=8;for(var Za=144;Za<256;++Za)sM[Za]=9;for(var Za=256;Za<280;++Za)sM[Za]=7;for(var Za=280;Za<288;++Za)sM[Za]=8;var PZ=new Cf(32);for(var Za=0;Za<32;++Za)PZ[Za]=5;var Que=C4(sM,9,1),que=C4(PZ,5,1),$O=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},bp=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},HO=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Yue=function(n){return(n+7)/8|0},Vue=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Cf(n.subarray(e,t))},$ue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pf=function(n,e,t){var i=new Error(e||$ue[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,pf),!t)throw i;return i},jP=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new Cf(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new Cf(r*3));var d=function(He){var Ct=t.length;if(He>Ct){var vt=new Cf(Math.max(Ct*2,He));vt.set(t),t=vt}},p=e.f||0,v=e.p||0,M=e.b||0,E=e.l,P=e.d,U=e.m,z=e.n,V=r*8;do{if(!E){p=bp(n,v,1);var Z=bp(n,v+1,3);if(v+=3,Z)if(Z==1)E=Que,P=que,U=9,z=5;else if(Z==2){var ne=bp(n,v,31)+257,q=bp(n,v+10,15)+4,le=ne+bp(n,v+5,31)+1;v+=14;for(var ue=new Cf(le),ve=new Cf(19),pe=0;pe<q;++pe)ve[jue[pe]]=bp(n,v+pe*3,7);v+=q*3;for(var Be=$O(ve),Ce=(1<<Be)-1,Oe=C4(ve,Be,1),pe=0;pe<le;){var Fe=Oe[bp(n,v,Ce)];v+=Fe&15;var X=Fe>>4;if(X<16)ue[pe++]=X;else{var Ee=0,Ve=0;for(X==16?(Ve=3+bp(n,v,3),v+=2,Ee=ue[pe-1]):X==17?(Ve=3+bp(n,v,7),v+=3):X==18&&(Ve=11+bp(n,v,127),v+=7);Ve--;)ue[pe++]=Ee}}var ut=ue.subarray(0,ne),mt=ue.subarray(ne);U=$O(ut),z=$O(mt),E=C4(ut,U,1),P=C4(mt,z,1)}else pf(1);else{var X=Yue(v)+4,re=n[X-4]|n[X-3]<<8,ee=X+re;if(ee>r){c&&pf(0);break}a&&d(M+re),t.set(n.subarray(X,ee),M),e.b=M+=re,e.p=v=ee*8,e.f=p;continue}if(v>V){c&&pf(0);break}}a&&d(M+131072);for(var Pe=(1<<U)-1,De=(1<<z)-1,Xe=v;;Xe=v){var Ee=E[HO(n,v)&Pe],Ke=Ee>>4;if(v+=Ee&15,v>V){c&&pf(0);break}if(Ee||pf(2),Ke<256)t[M++]=Ke;else if(Ke==256){Xe=v,E=null;break}else{var Bt=Ke-254;if(Ke>264){var pe=Ke-257,ot=IZ[pe];Bt=bp(n,v,(1<<ot)-1)+RZ[pe],v+=ot}var Et=P[HO(n,v)&De],Rt=Et>>4;Et||pf(3),v+=Et&15;var mt=Wue[Rt];if(Rt>3){var ot=TZ[Rt];mt+=HO(n,v)&(1<<ot)-1,v+=ot}if(v>V){c&&pf(0);break}a&&d(M+131072);var Ue=M+Bt;if(M<mt){var ke=o-mt,Te=Math.min(mt,Ue);for(ke+M<0&&pf(3);M<Te;++M)t[M]=i[ke+M]}for(;M<Ue;++M)t[M]=t[M-mt]}}e.l=E,e.p=Xe,e.b=M,e.f=p,E&&(p=1,e.m=U,e.d=P,e.n=z)}while(!p);return M!=t.length&&s?Vue(t,0,M):t.subarray(0,M)},Hue=new Cf(0),Zue=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&pf(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Xue=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Jue=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&pf(6,"invalid zlib data"),(n[1]>>5&1)==1&&pf(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ece(n,e){return jP(n,{i:2},e,e)}function tce(n,e){var t=Zue(n);return t+8>n.length&&pf(6,"invalid gzip data"),jP(n.subarray(t,-8),{i:2},new Cf(Xue(n)),e)}function nce(n,e){return jP(n.subarray(Jue(n),-4),{i:2},e,e)}function ice(n,e){return n[0]==31&&n[1]==139&&n[2]==8?tce(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?ece(n,e):nce(n,e)}var rce=typeof TextDecoder<"u"&&new TextDecoder,oce=0;try{rce.decode(Hue,{stream:!0}),oce=1}catch{}var sce=Object.defineProperty,ace=Math.pow,oa=(n,e)=>sce(n,"name",{value:e,configurable:!0}),Vc=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(d){r(d)}},s=c=>{try{a(t.throw(c))}catch(d){r(d)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});oa((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:oa((o,s)=>{let a=document.createElement("img"),c=new AbortController,d=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(p=>{p.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):p.tileType===2?i="image/png":p.tileType===3?i="image/jpeg":p.tileType===4?i="image/webp":p.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,d).then(p=>{if(p){let v=new Blob([p.data],{type:i}),M=window.URL.createObjectURL(v);a.src=M}else a.style.display="none";a.cancel=void 0,s(void 0,a)}).catch(p=>{if(p.name!=="AbortError")throw p}),a},"createTile"),_removeTile:oa(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var lce=oa(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:oa(()=>i.abort(),"cancel")}},"v3compat"),UZ=class{constructor(e){this.tilev4=oa((t,i)=>Vc(this,null,function*(){if(t.type==="json"){let E=t.url.substr(10),P=this.tiles.get(E);if(P||(P=new H9(E),this.tiles.set(E,P)),this.metadata){let z=yield P.getTileJson(t.url);return i.signal.throwIfAborted(),{data:z}}let U=yield P.getHeader();return i.signal.throwIfAborted(),(U.minLon>=U.maxLon||U.minLat>=U.maxLat)&&console.error(`Bounds of PMTiles archive ${U.minLon},${U.minLat},${U.maxLon},${U.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:U.minZoom,maxzoom:U.maxZoom,bounds:[U.minLon,U.minLat,U.maxLon,U.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new H9(s),this.tiles.set(s,a));let c=o[2],d=o[3],p=o[4],v=yield a.getHeader(),M=yield a?.getZxy(+c,+d,+p,i.signal);if(i.signal.throwIfAborted(),M)return{data:new Uint8Array(M.data),cacheControl:M.cacheControl,expires:M.expires};if(v.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=lce(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};oa(UZ,"Protocol");var uce=UZ;function LZ(n,e){return(e>>>0)*4294967296+(n>>>0)}oa(LZ,"toNum");function KZ(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return LZ(n,r);throw new Error("Expected varint not more than 10 bytes")}oa(KZ,"readVarintRemainder");function v2(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,KZ(i,n))}oa(v2,"readVarint");function NP(n,e,t,i,r){return r===0?i!==0?[n-1-t,n-1-e]:[t,e]:[e,t]}oa(NP,"rotate");function FZ(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>=1<<n||t>=1<<n)throw new Error("tile x/y outside zoom level bounds");let i=((1<<n)*(1<<n)-1)/3,r=n-1,[o,s]=[e,t];for(let a=1<<r;a>0;a>>=1){let c=o&a,d=s&a;i+=(3*c^d)*(1<<r),[o,s]=NP(a,o,s,c,d),r--}return i}oa(FZ,"zxyToTileId");function zZ(n){let e=3*n+1;return e<4294967296?31-Math.clz32(e):63-Math.clz32(e/4294967296)}oa(zZ,"tileIdToZ");function cce(n){let e=zZ(n)>>1;if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let t=((1<<e)*(1<<e)-1)/3,i=n-t,r=0,o=0,s=1<<e;for(let a=1;a<s;a<<=1){let c=a&i/2,d=a&(i^c);[r,o]=NP(a,r,o,c,d),i=i/2,r+=c,o+=d}return[e,r,o]}oa(cce,"tileIdToZxy");var Ace=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(Ace||{});function L6(n,e){return Vc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return ice(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}oa(L6,"defaultDecompress");var hce=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(hce||{});function jZ(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}oa(jZ,"tileTypeExt");var dce=127;function NZ(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}oa(NZ,"findTile");var fce=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Vc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};oa(fce,"FileSource");var GZ=class{constructor(e,t=new Headers){var i,r;this.url=e,this.customHeaders=t,this.mustReload=!1;let o="";"navigator"in globalThis&&(o=(r=(i=globalThis.navigator)==null?void 0:i.userAgent)!=null?r:"");let s=o.indexOf("Windows")>-1,a=/Chrome|Chromium|Edg|OPR|Brave/.test(o);this.chromeWindowsNoCache=!1,s&&a&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Vc(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let d=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&d.status===416){let M=d.headers.get("Content-Range");if(!M||!M.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let E=+M.substr(8);d=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${E-1}`}})}let p=d.headers.get("Etag");if(p!=null&&p.startsWith("W/")&&(p=null),d.status===416||r&&p&&p!==r)throw this.mustReload=!0,new $9(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(d.status>=300)throw new Error(`Bad response code: ${d.status}`);let v=d.headers.get("Content-Length");if(d.status===200&&(!v||+v>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield d.arrayBuffer(),etag:p||void 0,cacheControl:d.headers.get("Cache-Control")||void 0,expires:d.headers.get("Expires")||void 0}})}};oa(GZ,"FetchSource");var mce=GZ;function hm(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*ace(2,32)+i}oa(hm,"getUint64");function WZ(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:hm(t,8),rootDirectoryLength:hm(t,16),jsonMetadataOffset:hm(t,24),jsonMetadataLength:hm(t,32),leafDirectoryOffset:hm(t,40),leafDirectoryLength:hm(t,48),tileDataOffset:hm(t,56),tileDataLength:hm(t,64),numAddressedTiles:hm(t,72),numTileEntries:hm(t,80),numTileContents:hm(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}oa(WZ,"bytesToHeader");function GP(n){let e={buf:new Uint8Array(n),pos:0},t=v2(e),i=[],r=0;for(let o=0;o<t;o++){let s=v2(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=v2(e);for(let o=0;o<t;o++)i[o].length=v2(e);for(let o=0;o<t;o++){let s=v2(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}oa(GP,"deserializeIndex");var QZ=class extends Error{};oa(QZ,"EtagMismatch");var $9=QZ;function WP(n,e){return Vc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,dce),r=WZ(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=GP(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}oa(WP,"getHeaderAndRoot");function QP(n,e,t,i,r){return Vc(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=GP(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}oa(QP,"getDirectory");var pce=class{constructor(e=100,t=!0,i=L6){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Vc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield WP(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Vc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield QP(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Vc(this,null,function*(){this.cache.delete(e.getKey())})}};oa(pce,"ResolvedValueCache");var qZ=class{constructor(e=100,t=!0,i=L6){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Vc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{WP(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Vc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,d)=>{QP(e,this.decompress,t,i,r).then(p=>{c(p),this.prune()}).catch(p=>{d(p)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Vc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};oa(qZ,"SharedPromiseCache");var gce=qZ,YZ=class{constructor(e,t,i){typeof e=="string"?this.source=new mce(e):this.source=e,i?this.decompress=i:this.decompress=L6,t?this.cache=t:this.cache=new gce}getHeader(){return Vc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Vc(this,null,function*(){let o=FZ(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let d=0;d<=3;d++){let p=yield this.cache.getDirectory(this.source,a,c,s),v=NZ(p,o);if(v){if(v.runLength>0){let M=yield this.source.getBytes(s.tileDataOffset+v.offset,v.length,r,s.etag);return{data:yield this.decompress(M.data,s.tileCompression),cacheControl:M.cacheControl,expires:M.expires}}a=s.leafDirectoryOffset+v.offset,c=v.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Vc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof $9)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return Vc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Vc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof $9)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Vc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=jZ(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};oa(YZ,"PMTiles");var H9=YZ,yce=8,vce={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Cce={"*":{type:"source"}},bce=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],_ce={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},xce={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Mce={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},wce={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Sce={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ece={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Bce={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Oce=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Ice={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tce={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kce={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Dce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Rce={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Pce={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Uce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Lce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kce={type:"array",value:"*"},Fce={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},zce={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},jce={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Nce={type:"array",value:"*",minimum:1},Gce={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Wce={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Qce={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},qce={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Yce=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Vce={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},$ce={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Hce={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Zce={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xce={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Jce={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},eAe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},tAe={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},nAe={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},iAe={"*":{type:"string"}},Xo={$version:yce,$root:vce,sources:Cce,source:bce,source_vector:_ce,source_raster:xce,source_raster_dem:Mce,source_geojson:wce,source_video:Sce,source_image:Ece,layer:Bce,layout:Oce,layout_background:Ice,layout_fill:Tce,layout_circle:kce,layout_heatmap:Dce,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Rce,layout_symbol:Pce,layout_raster:Uce,layout_hillshade:Lce,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Kce,filter_operator:Fce,geometry_type:zce,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:jce,expression:Nce,light:Gce,sky:Wce,terrain:Qce,projection:qce,paint:Yce,paint_fill:Vce,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:$ce,paint_circle:Hce,paint_heatmap:Zce,paint_symbol:Xce,paint_raster:Jce,paint_hillshade:eAe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:tAe,transition:nAe,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:iAe};const rAe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function oAe(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return rAe.forEach(i=>{i in e&&(t[i]=e[i])}),t}function sAe(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=oAe(n[t],e[n[t].ref]));return n}function Ss(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Ss(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!Ss(n[i],e[i]))return!1;return!0}return n===e}function fm(n,e){n.push(e)}function VZ(n,e,t){fm(t,{command:"addSource",args:[n,e[n]]})}function $Z(n,e,t){fm(e,{command:"removeSource",args:[n]}),t[n]=!0}function aAe(n,e,t,i){$Z(n,t,i),VZ(n,e,t)}function lAe(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!Ss(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!Ss(n[t][i],e[t][i]))return!1;return!0}function uAe(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||$Z(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?Ss(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&lAe(n,e,r)?fm(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):aAe(r,e,t,i)):VZ(r,e,t))}function nw(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(Ss(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||Ss(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function Tz(n){return n.id}function kz(n,e){return n[e.id]=e,n}function cAe(n,e,t){n=n||[],e=e||[];const i=n.map(Tz),r=e.map(Tz),o=n.reduce(kz,{}),s=e.reduce(kz,{}),a=i.slice(),c=Object.create(null);let d,p,v,M,E;for(let P=0,U=0;P<i.length;P++)d=i[P],Object.prototype.hasOwnProperty.call(s,d)?U++:(fm(t,{command:"removeLayer",args:[d]}),a.splice(a.indexOf(d,U),1));for(let P=0,U=0;P<r.length;P++)d=r[r.length-1-P],a[a.length-1-P]!==d&&(Object.prototype.hasOwnProperty.call(o,d)?(fm(t,{command:"removeLayer",args:[d]}),a.splice(a.lastIndexOf(d,a.length-U),1)):U++,M=a[a.length-P],fm(t,{command:"addLayer",args:[s[d],M]}),a.splice(a.length-P,0,d),c[d]=!0);for(let P=0;P<r.length;P++)if(d=r[P],p=o[d],v=s[d],!(c[d]||Ss(p,v))){if(!Ss(p.source,v.source)||!Ss(p["source-layer"],v["source-layer"])||!Ss(p.type,v.type)){fm(t,{command:"removeLayer",args:[d]}),M=a[a.lastIndexOf(d)+1],fm(t,{command:"addLayer",args:[v,M]});continue}nw(p.layout,v.layout,t,d,null,"setLayoutProperty"),nw(p.paint,v.paint,t,d,null,"setPaintProperty"),Ss(p.filter,v.filter)||fm(t,{command:"setFilter",args:[d,v.filter]}),(!Ss(p.minzoom,v.minzoom)||!Ss(p.maxzoom,v.maxzoom))&&fm(t,{command:"setLayerZoomRange",args:[d,v.minzoom,v.maxzoom]});for(E in p)Object.prototype.hasOwnProperty.call(p,E)&&(E==="layout"||E==="paint"||E==="filter"||E==="metadata"||E==="minzoom"||E==="maxzoom"||(E.indexOf("paint.")===0?nw(p[E],v[E],t,d,E.slice(6),"setPaintProperty"):Ss(p[E],v[E])||fm(t,{command:"setLayerProperty",args:[d,E,v[E]]})));for(E in v)!Object.prototype.hasOwnProperty.call(v,E)||Object.prototype.hasOwnProperty.call(p,E)||E==="layout"||E==="paint"||E==="filter"||E==="metadata"||E==="minzoom"||E==="maxzoom"||(E.indexOf("paint.")===0?nw(p[E],v[E],t,d,E.slice(6),"setPaintProperty"):Ss(p[E],v[E])||fm(t,{command:"setLayerProperty",args:[d,E,v[E]]}))}}function AAe(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Ss(n.version,e.version))return[{command:"setStyle",args:[e]}];Ss(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Ss(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),Ss(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Ss(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Ss(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Ss(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Ss(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Ss(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Ss(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Ss(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Ss(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Ss(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Ss(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Ss(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];uAe(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),cAe(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class Gn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function fx(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let sg=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},hAe=class HZ{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new HZ(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const K6={kind:"null"},ei={kind:"number"},co={kind:"string"},to={kind:"boolean"},Cg={kind:"color"},F6={kind:"projectionDefinition"},bb={kind:"object"},Vr={kind:"value"},dAe={kind:"error"},z6={kind:"collator"},j6={kind:"formatted"},N6={kind:"padding"},V4={kind:"colorArray"},G6={kind:"numberArray"},aM={kind:"resolvedImage"},W6={kind:"variableAnchorOffsetCollection"};function bf(n,e){return{kind:"array",itemType:n,N:e}}function ul(n){if(n.kind==="array"){const e=ul(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const fAe=[K6,ei,co,to,Cg,F6,j6,bb,bf(Vr),N6,G6,V4,aM,W6];function $4(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!$4(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of fAe)if(!$4(t,e))return null}}return`Expected ${ul(n)} but found ${ul(e)} instead.`}function qP(n,e){return e.some(t=>t.kind===n.kind)}function _b(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function Zy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const ZZ=.96422,XZ=1,JZ=.82521,eX=4/29,W2=6/29,tX=3*W2*W2,mAe=W2*W2*W2,pAe=Math.PI/180,gAe=180/Math.PI;function nX(n){return n=n%360,n<0&&(n+=360),n}function iX([n,e,t,i]){n=ZO(n),e=ZO(e),t=ZO(t);let r,o;const s=XO((.2225045*n+.7168786*e+.0606169*t)/XZ);n===e&&e===t?r=o=s:(r=XO((.4360747*n+.3850649*e+.1430804*t)/ZZ),o=XO((.0139322*n+.0971045*e+.7141733*t)/JZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function ZO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function XO(n){return n>mAe?Math.pow(n,1/3):n/tX+eX}function rX([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=XZ*e8(r),o=ZZ*e8(o),s=JZ*e8(s),[JO(3.1338561*o-1.6168667*r-.4906146*s),JO(-.9787684*o+1.9161415*r+.033454*s),JO(.0719453*o-.2289914*r+1.4052427*s),i]}function JO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function e8(n){return n>W2?n*n*n:tX*(n-eX)}function yAe(n){const[e,t,i,r]=iX(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?nX(Math.atan2(i,t)*gAe):NaN,o,e,r]}function vAe([n,e,t,i]){return n=isNaN(n)?0:n*pAe,rX([t,Math.cos(n)*e,Math.sin(n)*e,i])}function CAe([n,e,t,i]){n=nX(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const bAe=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function b4(n,e){return bAe(n,e)?n[e]:void 0}function _Ae(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=b4(xAe,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[iw(n.slice(s,s+=o)),iw(n.slice(s,s+=o)),iw(n.slice(s,s+=o)),iw(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,d,p,v,M,E,P,U,z,V]=o,Z=[d||" ",M||" ",U].join("");if(Z==="  "||Z==="  /"||Z===",,"||Z===",,,"){const X=[c,v,P].join(""),re=X==="%%%"?100:X===""?255:0;if(re){const ee=[C2(+a/re,0,1),C2(+p/re,0,1),C2(+E/re,0,1),z?Dz(+z,V):1];if(Rz(ee))return ee}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,d,p,v,M]=i,E=[s||" ",c||" ",p].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const P=[+o,C2(+a,0,100),C2(+d,0,100),v?Dz(+v,M):1];if(Rz(P))return CAe(P)}}}function iw(n){return parseInt(n.padEnd(2,n),16)/255}function Dz(n,e){return C2(e?n/100:n,0,1)}function C2(n,e,t){return Math.min(Math.max(e,n),t)}function Rz(n){return!n.some(Number.isNaN)}const xAe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Sv(n,e,t){return n+t*(e-n)}function mx(n,e,t){return n.map((i,r)=>Sv(i,e[r],t))}function MAe(n){return n==="rgb"||n==="hcl"||n==="lab"}let sa=class b2{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof b2)return e;if(typeof e!="string")return;const t=_Ae(e);if(t)return new b2(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",yAe(this.rgb))}get lab(){return this.overwriteGetter("lab",iX(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=mx(e.rgb,t.rgb,i);return new b2(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[d,p,v,M]=t.hcl;let E,P;if(!isNaN(o)&&!isNaN(d)){let X=d-o;d>o&&X>180?X-=360:d<o&&o-d>180&&(X+=360),E=o+i*X}else isNaN(o)?isNaN(d)?E=NaN:(E=d,(a===1||a===0)&&(P=p)):(E=o,(v===1||v===0)&&(P=s));const[U,z,V,Z]=vAe([E,P??Sv(s,p,i),Sv(a,v,i),Sv(c,M,i)]);return new b2(U,z,V,Z,!1)}case"lab":{const[o,s,a,c]=rX(mx(e.lab,t.lab,i));return new b2(o,s,a,c,!1)}}}};sa.black=new sa(0,0,0,1);sa.white=new sa(1,1,1,1);sa.transparent=new sa(0,0,0,0);sa.red=new sa(1,0,0,1);let YP=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const wAe=["bottom","center","top"];let Z9=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},Kx=class bS{constructor(e){this.sections=e}static fromString(e){return new bS([new Z9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof bS?e:bS.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},Rg=class V3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof V3)return e;if(typeof e=="number")return new V3([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new V3(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new V3(mx(e.values,t.values,i))}},Pg=class $3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof $3)return e;if(typeof e=="number")return new $3([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new $3(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new $3(mx(e.values,t.values,i))}},Bm=class H3{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof H3)return e;if(typeof e=="string"){const i=sa.parse(e);return i?new H3([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=sa.parse(i);if(!r)return;t.push(r)}return new H3(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(sa.interpolate(e.values[s],t.values[s],i,r));return new H3(o)}},_l=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const SAe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let Nv=class _S{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof _S)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!SAe.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new _S(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new _l(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new _l(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,d]=r[a+1],[p,v]=o[a+1];s.push([Sv(c,p,i),Sv(d,v,i)])}return new _S(s)}},$b=class oX{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new oX({name:e,available:!1}):null}},Fx=class _2{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new _2(e,t,i)}static parse(e){if(e instanceof _2)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new _2(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new _2(e.from,e.to,e.transition);if(typeof e=="string")return new _2(e,e,1)}};function sX(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function H4(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Fx||n instanceof sa||n instanceof YP||n instanceof Kx||n instanceof Rg||n instanceof Pg||n instanceof Bm||n instanceof Nv||n instanceof $b)return!0;if(Array.isArray(n)){for(const e of n)if(!H4(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!H4(n[e]))return!1;return!0}else return!1}function Wu(n){if(n===null)return K6;if(typeof n=="string")return co;if(typeof n=="boolean")return to;if(typeof n=="number")return ei;if(n instanceof sa)return Cg;if(n instanceof Fx)return F6;if(n instanceof YP)return z6;if(n instanceof Kx)return j6;if(n instanceof Rg)return N6;if(n instanceof Pg)return G6;if(n instanceof Bm)return V4;if(n instanceof Nv)return W6;if(n instanceof $b)return aM;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Wu(i);if(!t)t=r;else{if(t===r)continue;t=Vr;break}}return bf(t||Vr,e)}else return bb}function _4(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof sa||n instanceof Fx||n instanceof Kx||n instanceof Rg||n instanceof Pg||n instanceof Bm||n instanceof Nv||n instanceof $b?n.toString():JSON.stringify(n)}let sE=class aX{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!H4(e[1]))return t.error("invalid value");const i=e[1];let r=Wu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new aX(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const rw={string:co,number:ei,boolean:to,object:bb};let k1=class lX{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const d=e[1];if(typeof d!="string"||!(d in rw)||d==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=rw[d],i++}else a=Vr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=bf(a,c)}else{if(!rw[o])throw new Error(`Types doesn't contain name = ${o}`);r=rw[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Vr);if(!a)return null;s.push(a)}return new lX(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if($4(this.type,Wu(i))){if(t===this.args.length-1)throw new _l(`Expected value to be of type ${ul(this.type)}, but found ${ul(Wu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const Pz={"to-boolean":to,"to-color":Cg,"to-number":ei,"to-string":co};let D2=class uX{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!Pz[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=Pz[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Vr);if(!a)return null;o.push(a)}return new uX(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof sa)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=sX(t[0],t[1],t[2],t[3]),!i))return new sa(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new _l(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=Rg.parse(t);if(r)return r}throw new _l(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Pg.parse(t);if(r)return r}throw new _l(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Bm.parse(t);if(r)return r}throw new _l(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=Nv.parse(t);if(r)return r}throw new _l(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new _l(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Kx.fromString(_4(this.args[0].evaluate(e)));case"resolvedImage":return $b.fromString(_4(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return _4(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const EAe=["Unknown","Point","LineString","Polygon"];let cX=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?EAe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=sa.parse(e),this._parseColorCache.set(e,t)),t}},AX=class hX{constructor(e,t,i=[],r,o=new hAe,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new k1(o,[r]):s==="coerce"?new D2(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof sE)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new cX;try{s=new sE(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new hX(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new sg(i,e))}checkSubtype(e,t){const i=$4(e,t);return i&&this.error(i),i}},dX=class fX{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new fX(i,r):null}outputDefined(){return this.result.outputDefined()}},mX=class pX{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new pX(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},BAe=class gX{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ei),r=t.parse(e[2],2,bf(t.expectedType||Vr));if(!i||!r)return null;const o=r.type;return new gX(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new _l(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new _l(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new _l(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},OAe=class yX{constructor(e,t){this.type=to,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Vr),r=t.parse(e[2],2,Vr);return!i||!r?null:qP(i.type,[to,co,ei,K6,Vr])?new yX(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ul(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!_b(t,["boolean","string","number","null"]))throw new _l(`Expected first argument to be of type boolean, string, number or null, but found ${ul(Wu(t))} instead.`);if(!_b(i,["string","array"]))throw new _l(`Expected second argument to be of type array or string, but found ${ul(Wu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},IAe=class X9{constructor(e,t,i){this.type=ei,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Vr),r=t.parse(e[2],2,Vr);if(!i||!r)return null;if(!qP(i.type,[to,co,ei,K6,Vr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ul(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new X9(i,r,o):null}else return new X9(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!_b(t,["boolean","string","number","null"]))throw new _l(`Expected first argument to be of type boolean, string, number or null, but found ${ul(Wu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),_b(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(_b(i,["array"]))return i.indexOf(t,r);throw new _l(`Expected second argument to be of type array or string, but found ${ul(Wu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},TAe=class vX{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let d=2;d<e.length-1;d+=2){let p=e[d];const v=e[d+1];Array.isArray(p)||(p=[p]);const M=t.concat(d);if(p.length===0)return M.error("Expected at least one branch label.");for(const P of p){if(typeof P!="number"&&typeof P!="string")return M.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return M.error("Numeric branch labels must be integer values.");if(!i)i=Wu(P);else if(M.checkSubtype(i,Wu(P)))return null;if(typeof o[String(P)]<"u")return M.error("Branch labels must be unique.");o[String(P)]=s.length}const E=t.parse(v,d,r);if(!E)return null;r=r||E.type,s.push(E)}const a=t.parse(e[1],1,Vr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new vX(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Wu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},kAe=class CX{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,to);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new CX(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},DAe=class J9{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Vr),r=t.parse(e[2],2,ei);if(!i||!r)return null;if(!qP(i.type,[bf(Vr),co,Vr]))return t.error(`Expected first argument to be of type array or string, but found ${ul(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new J9(i.type,i,r,o):null}else return new J9(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),_b(t,["string"]))return[...t].slice(i,r).join("");if(_b(t,["array"]))return t.slice(i,r);throw new _l(`Expected first argument to be of type array or string, but found ${ul(Wu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function Q6(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new _l("Input is not a number.");return 0}let bX=class _X{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],d=s,p=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',d);const v=t.parse(c,p,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new _X(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=Q6(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function RAe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var t8,Uz;function PAe(){if(Uz)return t8;Uz=1,t8=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},t8}var UAe=PAe(),LAe=RAe(UAe);let U1=class eD{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=n8(t,e.base,i,r);else if(e.name==="linear")o=n8(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new LAe(s[0],s[1],s[2],s[3]).solve(n8(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const d=r[1];if(typeof d!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:d}}else if(r[0]==="cubic-bezier"){const d=r.slice(1);if(d.length!==4||d.some(p=>typeof p!="number"||p<0||p>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:d}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ei),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=V4?c=Cg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let d=0;d<s.length;d+=2){const p=s[d],v=s[d+1],M=d+3,E=d+4;if(typeof p!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const P=t.parse(v,E,c);if(!P)return null;c=c||P.type,a.push([p,P])}return!Zy(c,ei)&&!Zy(c,F6)&&!Zy(c,Cg)&&!Zy(c,N6)&&!Zy(c,G6)&&!Zy(c,V4)&&!Zy(c,W6)&&!Zy(c,bf(ei))?t.error(`Type ${ul(c)} is not interpolatable.`):new eD(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=Q6(t,r),a=t[s],c=t[s+1],d=eD.interpolationFactor(this.interpolation,r,a,c),p=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Sv(p,v,d);case"color":return sa.interpolate(p,v,d);case"padding":return Rg.interpolate(p,v,d);case"colorArray":return Bm.interpolate(p,v,d);case"numberArray":return Pg.interpolate(p,v,d);case"variableAnchorOffsetCollection":return Nv.interpolate(p,v,d);case"array":return mx(p,v,d);case"projectionDefinition":return Fx.interpolate(p,v,d)}case"interpolate-hcl":switch(this.type.kind){case"color":return sa.interpolate(p,v,d,"hcl");case"colorArray":return Bm.interpolate(p,v,d,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return sa.interpolate(p,v,d,"lab");case"colorArray":return Bm.interpolate(p,v,d,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function n8(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const KAe={color:sa.interpolate,number:Sv,padding:Rg.interpolate,numberArray:Pg.interpolate,colorArray:Bm.interpolate,variableAnchorOffsetCollection:Nv.interpolate,array:mx};let xX=class tD{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>$4(r,a.type))?new tD(Vr,o):new tD(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof $b&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function Lz(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function FAe(n,e,t){return e===t}function zAe(n,e,t){return e!==t}function jAe(n,e,t){return e<t}function NAe(n,e,t){return e>t}function GAe(n,e,t){return e<=t}function WAe(n,e,t){return e>=t}function MX(n,e,t,i){return i.compare(e,t)===0}function QAe(n,e,t,i){return!MX(n,e,t,i)}function qAe(n,e,t,i){return i.compare(e,t)<0}function YAe(n,e,t,i){return i.compare(e,t)>0}function VAe(n,e,t,i){return i.compare(e,t)<=0}function $Ae(n,e,t,i){return i.compare(e,t)>=0}function zx(n,e,t){const i=n!=="=="&&n!=="!=";return class wX{constructor(o,s,a){this.type=to,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Vr);if(!c)return null;if(!Lz(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${ul(c.type)}'.`);let d=s.parse(o[2],2,Vr);if(!d)return null;if(!Lz(a,d.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${ul(d.type)}'.`);if(c.type.kind!==d.type.kind&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error(`Cannot compare types '${ul(c.type)}' and '${ul(d.type)}'.`);i&&(c.type.kind==="value"&&d.type.kind!=="value"?c=new k1(d.type,[c]):c.type.kind!=="value"&&d.type.kind==="value"&&(d=new k1(c.type,[d])));let p=null;if(o.length===4){if(c.type.kind!=="string"&&d.type.kind!=="string"&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(p=s.parse(o[3],3,z6),!p)return null}return new wX(c,d,p)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Wu(s),d=Wu(a);if(c.kind!==d.kind||!(c.kind==="string"||c.kind==="number"))throw new _l(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${d.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Wu(s),d=Wu(a);if(c.kind!=="string"||d.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const HAe=zx("==",FAe,MX),ZAe=zx("!=",zAe,QAe),XAe=zx("<",jAe,qAe),JAe=zx(">",NAe,YAe),ehe=zx("<=",GAe,VAe),the=zx(">=",WAe,$Ae);let SX=class EX{constructor(e,t,i){this.type=z6,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,to);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,to);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,co),!s)?null:new EX(r,o,s)}evaluate(e){return new YP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},nhe=class BX{constructor(e,t,i,r,o){this.type=co,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,co),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,co),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ei),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ei),!c)?null:new BX(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},ihe=class OX{constructor(e){this.type=j6,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ei),!c))return null;let d=null;if(a["text-font"]&&(d=t.parse(a["text-font"],1,bf(co)),!d))return null;let p=null;if(a["text-color"]&&(p=t.parse(a["text-color"],1,Cg),!p))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!wAe.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,co),!v)return null}const M=r[r.length-1];M.scale=c,M.font=d,M.textColor=p,M.verticalAlign=v}else{const c=t.parse(e[s],1,Vr);if(!c)return null;const d=c.type.kind;if(d!=="string"&&d!=="value"&&d!=="null"&&d!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new OX(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Wu(r)===aM?new Z9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new Z9(_4(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Kx(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},rhe=class IX{constructor(e){this.type=aM,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,co);return i?new IX(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=$b.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},ohe=class TX{constructor(e){this.type=ei,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${ul(i.type)} instead.`):new TX(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new _l(`Expected value to be of type string or array, but found ${ul(Wu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const bg=8192;function she(n,e){const t=ahe(n[0]),i=uhe(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*bg),Math.round(i*r*bg)]}function VP(n,e){const t=Math.pow(2,e.z),i=(n[0]/bg+e.x)/t,r=(n[1]/bg+e.y)/t;return[lhe(i),che(r)]}function ahe(n){return(180+n)/360}function lhe(n){return n*360-180}function uhe(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function che(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function lM(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Z4(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Ahe(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function hhe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function q6(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return phe(o,r)===0?!1:!!(Kz(n,e,t,i)&&Kz(t,i,n,e))}function dhe(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(q6(n,e,i[r],i[r+1]))return!0;return!1}function jx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(hhe(n,r[o],r[o+1]))return t;Ahe(n,r[o],r[o+1])&&(i=!i)}return i}function fhe(n,e){for(const t of e)if(jx(n,t))return!0;return!1}function kX(n,e){for(const t of n)if(!jx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(dhe(n[t],n[t+1],e))return!1;return!0}function mhe(n,e){for(const t of e)if(kX(n,t))return!0;return!1}function phe(n,e){return n[0]*e[1]-n[1]*e[0]}function Kz(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],d=i[1]-t[1],p=r*d-c*o,v=s*d-c*a;return p>0&&v<0||p<0&&v>0}function $P(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=she(n[r][s],t);lM(e,a),o.push(a)}i.push(o)}return i}function DX(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=$P(n[r],e,t);i.push(o)}return i}function RX(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}lM(e,n)}function ghe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Fz(n,e,t,i){const r=Math.pow(2,i.z)*bg,o=[i.x*bg,i.y*bg],s=[];for(const a of n)for(const c of a){const d=[c.x+o[0],c.y+o[1]];RX(d,e,t,r),s.push(d)}return s}function zz(n,e,t,i){const r=Math.pow(2,i.z)*bg,o=[i.x*bg,i.y*bg],s=[];for(const a of n){const c=[];for(const d of a){const p=[d.x+o[0],d.y+o[1]];lM(e,p),c.push(p)}s.push(c)}if(e[2]-e[0]<=r/2){ghe(e);for(const a of s)for(const c of a)RX(c,e,t,r)}return s}function yhe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=$P(e.coordinates,i,r),s=Fz(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!jx(a,o))return!1}if(e.type==="MultiPolygon"){const o=DX(e.coordinates,i,r),s=Fz(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!fhe(a,o))return!1}return!0}function vhe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=$P(e.coordinates,i,r),s=zz(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!kX(a,o))return!1}if(e.type==="MultiPolygon"){const o=DX(e.coordinates,i,r),s=zz(n.geometry(),t,i,r);if(!Z4(t,i))return!1;for(const a of s)if(!mhe(a,o))return!1}return!0}let HP=class xS{constructor(e,t){this.type=to,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(H4(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new xS(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new xS(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new xS(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return yhe(e,this.geometries);if(e.geometryType()==="LineString")return vhe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},PX=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function Che(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=bhe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function bhe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const _he=6378.137,jz=1/298.257223563,Nz=jz*(2-jz),Gz=Math.PI/180;let ZP=class{constructor(e){const t=Gz*_he*1e3,i=Math.cos(e*Gz),r=1/(1-Nz*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Nz)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let d=e[c][0],p=e[c][1],v=this.wrap(e[c+1][0]-d)*this.kx,M=(e[c+1][1]-p)*this.ky,E=0;(v!==0||M!==0)&&(E=(this.wrap(t[0]-d)*this.kx*v+(t[1]-p)*this.ky*M)/(v*v+M*M),E>1?(d=e[c+1][0],p=e[c+1][1]):E>0&&(d+=v/this.kx*E,p+=M/this.ky*E)),v=this.wrap(t[0]-d)*this.kx,M=(t[1]-p)*this.ky;const P=v*v+M*M;P<i&&(i=P,r=d,o=p,s=c,a=E)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const nD=100,iD=50;function UX(n,e){return e[0]-n[0]}function aE(n){return n[1]-n[0]+1}function j1(n,e){return n[1]>=n[0]&&n[1]<e}function rD(n,e){if(n[0]>n[1])return[null,null];const t=aE(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function oD(n,e){if(!j1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)lM(t,n[i]);return t}function sD(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)lM(e,i);return e}function Wz(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function XP(n,e,t){if(!Wz(n)||!Wz(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function cb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function JP(n,e,t,i,r){const o=Math.min(cb(n,[t,i],r),cb(e,[t,i],r)),s=Math.min(cb(t,[n,e],r),cb(i,[n,e],r));return Math.min(o,s)}function xhe(n,e,t,i,r){if(!(j1(e,n.length)&&j1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],d=n[a+1];for(let p=i[0];p<i[1];++p){const v=t[p],M=t[p+1];if(q6(c,d,v,M))return 0;s=Math.min(s,JP(c,d,v,M,r))}}return s}function Mhe(n,e,t,i,r){if(!(j1(e,n.length)&&j1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function whe(n,e,t){if(jx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,cb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function She(n,e,t,i){if(!j1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(jx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let d=0,p=c.length,v=p-1;d<p;v=d++){const M=c[v],E=c[d];if(q6(s,a,M,E))return 0;r=Math.min(r,JP(s,a,M,E,i))}}return r}function Qz(n,e){for(const t of n)for(const i of t)if(jx(i,e,!0))return!0;return!1}function Ehe(n,e,t,i=1/0){const r=sD(n),o=sD(e);if(i!==1/0&&XP(r,o,t)>=i)return i;if(Z4(r,o)){if(Qz(n,e))return 0}else if(Qz(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,d=a.length,p=d-1;c<d;p=c++){const v=a[p],M=a[c];for(const E of e)for(let P=0,U=E.length,z=U-1;P<U;z=P++){const V=E[z],Z=E[P];if(q6(v,M,V,Z))return 0;s=Math.min(s,JP(v,M,V,Z,t))}}return s}function qz(n,e,t,i,r,o){if(!o)return;const s=XP(oD(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function ow(n,e,t,i,r,o,s){if(!o||!s)return;const a=XP(oD(i,o),oD(r,s),t);a<e&&n.push([a,o,s])}function lE(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new PX([[0,[0,n.length-1],[0,0]]],UX),a=sD(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const d=c[1],p=e?iD:nD;if(aE(d)<=p){if(!j1(d,n.length))return NaN;if(e){const v=She(n,d,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=d[0];v<=d[1];++v){const M=whe(n[v],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const v=rD(d,e);qz(s,o,i,n,a,v[0]),qz(s,o,i,n,a,v[1])}}return o}function uE(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new PX([[0,[0,n.length-1],[0,t.length-1]]],UX);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const d=c[1],p=c[2],v=e?iD:nD,M=i?iD:nD;if(aE(d)<=v&&aE(p)<=M){if(!j1(d,n.length)&&j1(p,t.length))return NaN;let E;if(e&&i)E=xhe(n,d,t,p,r),s=Math.min(s,E);else if(e&&!i){const P=n.slice(d[0],d[1]+1);for(let U=p[0];U<=p[1];++U)if(E=cb(t[U],P,r),s=Math.min(s,E),s===0)return s}else if(!e&&i){const P=t.slice(p[0],p[1]+1);for(let U=d[0];U<=d[1];++U)if(E=cb(n[U],P,r),s=Math.min(s,E),s===0)return s}else E=Mhe(n,d,t,p,r),s=Math.min(s,E)}else{const E=rD(d,e),P=rD(p,i);ow(a,s,r,n,t,E[0],P[0]),ow(a,s,r,n,t,E[0],P[1]),ow(a,s,r,n,t,E[1],P[0]),ow(a,s,r,n,t,E[1],P[1])}}return s}function Bhe(n,e){const t=n.geometry(),i=t.flat().map(s=>VP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new ZP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,uE(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,uE(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,lE(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function Ohe(n,e){const t=n.geometry(),i=t.flat().map(s=>VP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new ZP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,uE(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,uE(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,lE(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Ihe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=Che(t).map(s=>s.map(a=>a.map(c=>VP([c.x,c.y],n.canonical)))),r=new ZP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,lE([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,lE(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Ehe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function i8(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let eU=class MS{constructor(e,t){this.type=ei,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(H4(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new MS(i,i.features.map(r=>i8(r.geometry)).flat());if(i.type==="Feature")return new MS(i,i8(i.geometry));if("type"in i&&"coordinates"in i)return new MS(i,i8(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Bhe(e,this.geometries);if(e.geometryType()==="LineString")return Ohe(e,this.geometries);if(e.geometryType()==="Polygon")return Ihe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},tU=class LX{constructor(e){this.type=Vr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new LX(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:b4(i,this.key)}eachChild(){}outputDefined(){return!1}};const nU={"==":HAe,"!=":ZAe,">":JAe,"<":XAe,">=":the,"<=":ehe,array:k1,at:BAe,boolean:k1,case:kAe,coalesce:xX,collator:SX,format:ihe,image:rhe,in:OAe,"index-of":IAe,interpolate:U1,"interpolate-hcl":U1,"interpolate-lab":U1,length:ohe,let:dX,literal:sE,match:TAe,number:k1,"number-format":nhe,object:k1,slice:DAe,step:bX,string:k1,"to-boolean":D2,"to-color":D2,"to-number":D2,"to-string":D2,var:mX,within:HP,distance:eU,"global-state":tU};let Nx=class Z3{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=Z3.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([d])=>!Array.isArray(d)||d.length===e.length-1);let c=null;for(const[d,p]of a){c=new AX(t.registry,cE,t.path,null,t.scope);const v=[];let M=!1;for(let E=1;E<e.length;E++){const P=e[E],U=Array.isArray(d)?d[E-1]:d.type,z=c.parse(P,1+v.length,U);if(!z){M=!0;break}v.push(z)}if(!M){if(Array.isArray(d)&&d.length!==v.length){c.error(`Expected ${d.length} arguments, but found ${v.length} instead.`);continue}for(let E=0;E<v.length;E++){const P=Array.isArray(d)?d[E]:d.type,U=v[E];c.concat(E+1).checkSubtype(P,U.type)}if(c.errors.length===0)return new Z3(i,o,p,v)}}if(a.length===1)t.errors.push(...c.errors);else{const p=(a.length?a:s).map(([M])=>khe(M)).join(" | "),v=[];for(let M=1;M<e.length;M++){const E=t.parse(e[M],1+v.length);if(!E)return null;v.push(ul(E.type))}t.error(`Expected arguments of type ${p}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){Z3.definitions=t;for(const i in t)e[i]=Z3}};function Yz(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=sX(e,t,i,o);if(s)throw new _l(s);return new sa(e/255,t/255,i/255,o,!1)}function Vz(n,e){return n in e}function r8(n,e){const t=e[n];return typeof t>"u"?null:t}function The(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function QC(n){return{type:n}}Nx.register(nU,{error:[dAe,[co],(n,[e])=>{throw new _l(e.evaluate(n))}],typeof:[co,[Vr],(n,[e])=>ul(Wu(e.evaluate(n)))],"to-rgba":[bf(ei,4),[Cg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[Cg,[ei,ei,ei],Yz],rgba:[Cg,[ei,ei,ei,ei],Yz],has:{type:to,overloads:[[[co],(n,[e])=>Vz(e.evaluate(n),n.properties())],[[co,bb],(n,[e,t])=>Vz(e.evaluate(n),t.evaluate(n))]]},get:{type:Vr,overloads:[[[co],(n,[e])=>r8(e.evaluate(n),n.properties())],[[co,bb],(n,[e,t])=>r8(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Vr,[co],(n,[e])=>r8(e.evaluate(n),n.featureState||{})],properties:[bb,[],n=>n.properties()],"geometry-type":[co,[],n=>n.geometryType()],id:[Vr,[],n=>n.id()],zoom:[ei,[],n=>n.globals.zoom],"heatmap-density":[ei,[],n=>n.globals.heatmapDensity||0],elevation:[ei,[],n=>n.globals.elevation||0],"line-progress":[ei,[],n=>n.globals.lineProgress||0],accumulated:[Vr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ei,QC(ei),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ei,QC(ei),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ei,overloads:[[[ei,ei],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ei],(n,[e])=>-e.evaluate(n)]]},"/":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ei,[],()=>Math.LN2],pi:[ei,[],()=>Math.PI],e:[ei,[],()=>Math.E],"^":[ei,[ei,ei],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ei,[ei],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))],log2:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ei,[ei],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ei,[ei],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ei,[ei],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ei,[ei],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ei,[ei],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ei,[ei],(n,[e])=>Math.atan(e.evaluate(n))],min:[ei,QC(ei),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ei,QC(ei),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ei,[ei],(n,[e])=>Math.abs(e.evaluate(n))],round:[ei,[ei],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ei,[ei],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ei,[ei],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[to,[co,Vr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[to,[Vr],(n,[e])=>n.id()===e.value],"filter-type-==":[to,[co],(n,[e])=>n.geometryType()===e.value],"filter-<":[to,[co,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[to,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[to,[co,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[to,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[to,[co,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[to,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[to,[co,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[to,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[to,[Vr],(n,[e])=>e.value in n.properties()],"filter-has-id":[to,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[to,[bf(co)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[to,[bf(Vr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[to,[co,bf(Vr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[to,[co,bf(Vr)],(n,[e,t])=>The(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:to,overloads:[[[to,to],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[QC(to),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:to,overloads:[[[to,to],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[QC(to),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[to,[to],(n,[e])=>!e.evaluate(n)],"is-supported-script":[to,[co],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[co,[co],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[co,[co],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[co,QC(Vr),(n,e)=>e.map(t=>_4(t.evaluate(n))).join("")],"resolved-locale":[co,[z6],(n,[e])=>e.evaluate(n).resolvedLocale()]});function khe(n){return Array.isArray(n)?`(${n.map(ul).join(", ")})`:`(${ul(n.type)}...)`}function cE(n){if(n instanceof mX)return cE(n.boundExpression);if(n instanceof Nx&&n.name==="error")return!1;if(n instanceof SX)return!1;if(n instanceof HP)return!1;if(n instanceof eU)return!1;if(n instanceof tU)return!1;const e=n instanceof D2||n instanceof k1;let t=!0;return n.eachChild(i=>{e?t=t&&cE(i):t=t&&i instanceof sE}),t?Y6(n)&&V6(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function Y6(n){if(n instanceof Nx){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof HP||n instanceof eU)return!1;let e=!0;return n.eachChild(t=>{e&&!Y6(t)&&(e=!1)}),e}function X4(n){if(n instanceof Nx&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!X4(t)&&(e=!1)}),e}function V6(n,e){if(n instanceof Nx&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!V6(i,e)&&(t=!1)}),t}function aD(n){return{result:"success",value:n}}function x2(n){return{result:"error",value:n}}function AE(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function KX(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function iU(n){return!!n.expression&&n.expression.interpolated}function ho(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function uM(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Wu(n)===bb}function Dhe(n){return n}function Rhe(n){switch(n.type){case"color":return sa.parse;case"padding":return Rg.parse;case"numberArray":return Pg.parse;case"colorArray":return Bm.parse;default:return null}}function Phe(n){switch(n){case"exponential":return FX;case"interval":return Lhe;case"categorical":return Uhe;case"identity":return Khe;default:throw new Error(`Unknown function type "${n}"`)}}function rU(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(iU(e)?"exponential":"interval"),s=Rhe(e);if(s&&(n=fx({},n),n.stops&&(n.stops=n.stops.map(p=>[p[0],s(p[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!MAe(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=Phe(o);let c,d;if(o==="categorical"){c=Object.create(null);for(const p of n.stops)c[p[0]]=p[1];d=typeof n.stops[0][0]}if(t){const p={},v=[];for(let P=0;P<n.stops.length;P++){const U=n.stops[P],z=U[0].zoom;p[z]===void 0&&(p[z]={zoom:z,type:n.type,property:n.property,default:n.default,stops:[]},v.push(z)),p[z].stops.push([U[0].value,U[1]])}const M=[];for(const P of v)M.push([p[P].zoom,rU(p[P],e)]);const E={name:"linear"};return{kind:"composite",interpolationType:E,interpolationFactor:U1.interpolationFactor.bind(void 0,E),zoomStops:M.map(P=>P[0]),evaluate({zoom:P},U){return FX({stops:M,base:n.base},e,P).evaluate(P,U)}}}else if(r){const p=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:p,interpolationFactor:U1.interpolationFactor.bind(void 0,p),zoomStops:n.stops.map(v=>v[0]),evaluate:({zoom:v})=>a(n,e,v,c,d)}}else return{kind:"source",evaluate(p,v){const M=v&&v.properties?v.properties[n.property]:void 0;return M===void 0?cM(n.default,e.default):a(n,e,M,c,d)}}}function cM(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function Uhe(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return cM(o,n.default,e.default)}function Lhe(n,e,t){if(ho(t)!=="number")return cM(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=Q6(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function FX(n,e,t){const i=n.base!==void 0?n.base:1;if(ho(t)!=="number")return cM(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=Q6(n.stops.map(p=>p[0]),t),s=Fhe(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],d=KAe[e.type]||Dhe;return typeof a.evaluate=="function"?{evaluate(...p){const v=a.evaluate.apply(void 0,p),M=c.evaluate.apply(void 0,p);if(!(v===void 0||M===void 0))return d(v,M,s,n.colorSpace)}}:d(a,c,s,n.colorSpace)}function Khe(n,e,t){switch(e.type){case"color":t=sa.parse(t);break;case"formatted":t=Kx.fromString(t.toString());break;case"resolvedImage":t=$b.fromString(t.toString());break;case"padding":t=Rg.parse(t);break;case"colorArray":t=Bm.parse(t);break;case"numberArray":t=Pg.parse(t);break;default:ho(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return cM(t,n.default,e.default)}function Fhe(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let zX=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new cX,this._defaultValue=t?Ghe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=px(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=px(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new _l(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function AM(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in nU}function oU(n,e,t){const i=new AX(nU,cE,[],e?Nhe(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?aD(new zX(r,e,t)):x2(i.errors)}let lD=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!X4(t.expression),this.globalStateRefs=aU(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=px(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=px(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},uD=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!X4(t.expression),this.globalStateRefs=aU(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=px(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=px(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?U1.interpolationFactor(this.interpolationType,e,t,i):0}};function zhe(n){return n._styleExpression!==void 0}function sU(n,e,t){const i=oU(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=Y6(r);if(!o&&!AE(e))return x2([new sg("","data expressions not supported")]);const s=V6(r,["zoom"]);if(!s&&!KX(e))return x2([new sg("","zoom expressions not supported")]);const a=wS(r);if(!a&&!s)return x2([new sg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof sg)return x2([a]);if(a instanceof U1&&!iU(e))return x2([new sg("",'"interpolate" expressions cannot be used with this property')]);if(!a)return aD(o?new lD("constant",i.value,t):new lD("source",i.value,t));const c=a instanceof U1?a.interpolation:void 0;return aD(o?new uD("camera",i.value,a.labels,c,t):new uD("composite",i.value,a.labels,c,t))}class $6{constructor(e,t){this._parameters=e,this._specification=t,fx(this,rU(this._parameters,this._specification))}static deserialize(e){return new $6(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function jhe(n,e,t){if(uM(n))return new $6(n,e);if(AM(n)){const i=sU(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=sa.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=Rg.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=Pg.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=Bm.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=Nv.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=Fx.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function wS(n){let e=null;if(n instanceof dX)e=wS(n.result);else if(n instanceof xX){for(const t of n.args)if(e=wS(t),e)break}else(n instanceof bX||n instanceof U1)&&n.input instanceof Nx&&n.input.name==="zoom"&&(e=n);return e instanceof sg||n.eachChild(t=>{const i=wS(t);i instanceof sg?e=i:!e&&i?e=new sg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new sg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function aU(n,e=new Set){return n instanceof tU&&e.add(n.key),n.eachChild(t=>{aU(t,e)}),e}function Nhe(n){const e={color:Cg,string:co,number:ei,enum:co,boolean:to,formatted:j6,padding:N6,numberArray:G6,colorArray:V4,projectionDefinition:F6,resolvedImage:aM,variableAnchorOffsetCollection:W6};return n.type==="array"?bf(e[n.value]||Vr,n.length):e[n.type]}function Ghe(n){if(n.type==="color"&&uM(n.default))return new sa(0,0,0,0);switch(n.type){case"color":return sa.parse(n.default)||null;case"padding":return Rg.parse(n.default)||null;case"numberArray":return Pg.parse(n.default)||null;case"colorArray":return Bm.parse(n.default)||null;case"variableAnchorOffsetCollection":return Nv.parse(n.default)||null;case"projectionDefinition":return Fx.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function px(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function H6(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!H6(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function x4(n,e={}){if(H6(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return Qhe(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=x4(s,a),d=Whe(a);return d===!0?c:["case",d,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>x4(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",x4(["any",...r],{})]}case"in":{const[,r,...o]=t;return $z(r,o)}case"!in":{const[,r,...o]=t;return $z(r,o,!0)}case"has":return Hz(t[1]);case"!has":return["!",Hz(t[1])];default:return!0}}function Whe(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function Qhe(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function $z(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function Hz(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function J4(n){return typeof n=="object"?["literal",n]:n}function jX(n,e){let t=n.stops;if(!t)return qhe(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],NX(s[1])]:[s[0],J4(s[1])]),i?Yhe(n,e,t):o?$he(n,e,t):cD(n,e,t)}function qhe(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,J4(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function lU(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Yhe(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],d=c[0].zoom;i[d]===void 0&&(i[d]={zoom:d,type:n.type,property:n.property,default:n.default},r[d]=[],o.push(d)),r[d].push([c[0].value,c[1]])}if(cU({},e)==="exponential"){const a=[lU(n),["linear"],["zoom"]];for(const c of o){const d=cD(i[c],e,r[c]);Q2(a,c,d,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const d=cD(i[c],e,r[c]);Q2(a,c,d,!0)}return uU(a),a}}function Vhe(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Zz(n,e){const t=J4(Vhe(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function cD(n,e,t){const i=cU(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(Zz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)Q2(o,s[0],s[1],!1);return o.push(Zz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)Q2(o,s[0],s[1],!0);return uU(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,J4(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[lU(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)Q2(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,J4(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function $he(n,e,t,i=["zoom"]){const r=cU(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[lU(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)Q2(o,a[0],a[1],s);return uU(o),o}function uU(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function Q2(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function cU(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function NX(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function Hhe(n){for(let e=0;e<Xo.layout.length;e++)for(const t in Xo[Xo.layout[e]])if(t===n)return Xo[Xo.layout[e]][t];for(let e=0;e<Xo.paint.length;e++)for(const t in Xo[Xo.paint[e]])if(t===n)return Xo[Xo.paint[e]][t];return null}function Zhe(n,e){for(const t in n.sources)e(n.sources[t])}function M4(n,e){for(const t of n.layers)e(t)}function AU(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:Hhe(a),set(c){s[a]=c}})})}M4(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function GX(n){const e=n.key,t=n.value;return t?[new Gn(e,t,"constants have been deprecated as of v8")]:[]}function $l(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Ub(n){if(Array.isArray(n))return n.map(Ub);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Ub(n[t]);return e}return $l(n)}function bm(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const d=ho(t);if(d!=="object")return[new Gn(e,t,`object expected, ${d} found`)];for(const p in t){const v=p.split(".")[0],M=b4(i,v)||i["*"];let E;if(b4(r,v))E=r[v];else if(b4(i,v))E=a;else if(r["*"])E=r["*"];else if(i["*"])E=a;else{c.push(new Gn(e,t[p],`unknown property "${p}"`));continue}c=c.concat(E({key:(e&&`${e}.`)+p,value:t[p],valueSpec:M,style:o,styleSpec:s,object:t,objectKey:p,validateSpec:a},t))}for(const p in i)r[p]||i[p].required&&i[p].default===void 0&&t[p]===void 0&&c.push(new Gn(e,t,`missing required property "${p}"`));return c}function hU(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(ho(e)!=="array")return[new Gn(s,e,`array expected, ${ho(e)} found`)];if(t.length&&e.length!==t.length)return[new Gn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Gn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),ho(t.value)==="object"&&(c=t.value);let d=[];for(let p=0;p<e.length;p++)d=d.concat(a({array:e,arrayIndex:p,value:e[p],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${p}]`}));return d}function Z6(n){const e=n.key,t=n.value,i=n.valueSpec;let r=ho(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new Gn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new Gn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new Gn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function WX(n){const e=n.valueSpec,t=$l(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,d=ho(n.value.stops)==="array"&&ho(n.value.stops[0])==="array"&&ho(n.value.stops[0][0])==="object",p=bm({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:v,default:P}});return t==="identity"&&a&&p.push(new Gn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&p.push(new Gn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!iU(n.valueSpec)&&p.push(new Gn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!AE(n.valueSpec)?p.push(new Gn(n.key,n.value,"property functions not supported")):a&&!KX(n.valueSpec)&&p.push(new Gn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||d)&&n.value.property===void 0&&p.push(new Gn(n.key,n.value,'"property" property is required')),p;function v(U){if(t==="identity")return[new Gn(U.key,U.value,'identity function may not have a "stops" property')];let z=[];const V=U.value;return z=z.concat(hU({key:U.key,value:V,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:M})),ho(V)==="array"&&V.length===0&&z.push(new Gn(U.key,V,"array must have at least one stop")),z}function M(U){let z=[];const V=U.value,Z=U.key;if(ho(V)!=="array")return[new Gn(Z,V,`array expected, ${ho(V)} found`)];if(V.length!==2)return[new Gn(Z,V,`array length 2 expected, length ${V.length} found`)];if(d){if(ho(V[0])!=="object")return[new Gn(Z,V,`object expected, ${ho(V[0])} found`)];if(V[0].zoom===void 0)return[new Gn(Z,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new Gn(Z,V,"object stop key must have value")];if(s&&s>$l(V[0].zoom))return[new Gn(Z,V[0].zoom,"stop zoom values must appear in ascending order")];$l(V[0].zoom)!==s&&(s=$l(V[0].zoom),o=void 0,r={}),z=z.concat(bm({key:`${Z}[0]`,value:V[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Z6,value:E}}))}else z=z.concat(E({key:`${Z}[0]`,value:V[0],validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},V));return AM(Ub(V[1]))?z.concat([new Gn(`${Z}[1]`,V[1],"expressions are not allowed in function stops.")]):z.concat(U.validateSpec({key:`${Z}[1]`,value:V[1],valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function E(U,z){const V=ho(U.value),Z=$l(U.value),X=U.value!==null?U.value:z;if(!i)i=V;else if(V!==i)return[new Gn(U.key,X,`${V} stop domain type must match previous stop domain type ${i}`)];if(V!=="number"&&V!=="string"&&V!=="boolean")return[new Gn(U.key,X,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&t!=="categorical"){let re=`number expected, ${V} found`;return AE(e)&&t===void 0&&(re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Gn(U.key,X,re)]}return t==="categorical"&&V==="number"&&(!isFinite(Z)||Math.floor(Z)!==Z)?[new Gn(U.key,X,`integer expected, found ${Z}`)]:t!=="categorical"&&V==="number"&&o!==void 0&&Z<o?[new Gn(U.key,X,"stop domain values must appear in ascending order")]:(o=Z,t==="categorical"&&Z in r?[new Gn(U.key,X,"stop domain values must be unique")]:(r[Z]=!0,[]))}function P(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}function gx(n){const e=(n.expressionContext==="property"?sU:oU)(Ub(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new Gn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Gn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!X4(t))return[new Gn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!X4(t))return[new Gn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!V6(t,["zoom","feature-state"]))return[new Gn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Y6(t))return[new Gn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xhe(n){const e=n.value,t=n.key,i=ho(e);return i!=="boolean"?[new Gn(t,e,`boolean expected, ${i} found`)]:[]}function AD(n){const e=n.key,t=n.value,i=ho(t);return i!=="string"?[new Gn(e,t,`color expected, ${i} found`)]:sa.parse(String(t))?[]:[new Gn(e,t,`color expected, "${t}" found`)]}function e5(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf($l(t))===-1&&r.push(new Gn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf($l(t))===-1&&r.push(new Gn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function dU(n){return H6(Ub(n.value))?gx(fx({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):QX(n)}function QX(n){const e=n.value,t=n.key;if(ho(e)!=="array")return[new Gn(t,e,`array expected, ${ho(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new Gn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(e5({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),$l(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&$l(e[1])==="$type"&&o.push(new Gn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new Gn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=ho(e[1]),r!=="string"&&o.push(new Gn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=ho(e[s]),$l(e[1])==="$type"?o=o.concat(e5({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new Gn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(QX({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=ho(e[1]),e.length!==2?o.push(new Gn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new Gn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function qX(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const d=a.match(/^(.*)-transition$/);if(e==="paint"&&d&&c[d[1]]&&c[d[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const p=n.valueSpec||c[a];if(!p)return[new Gn(t,s,`unknown property "${a}"`)];let v;if(ho(s)==="string"&&AE(p)&&!p.tokens&&(v=/^{([^}]+)}$/.exec(s)))return[new Gn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(v[1])} }\`.`)];const M=[];return n.layerType==="symbol"&&a==="text-font"&&uM(Ub(s))&&$l(s.type)==="identity"&&M.push(new Gn(t,s,'"text-font" does not support identity functions')),M.concat(i({key:n.key,value:s,valueSpec:p,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function YX(n){return qX(n,"paint")}function VX(n){return qX(n,"layout")}function $X(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(ho(t)!=="object")return[new Gn(i,t,`object expected, ${ho(t)} found`)];!t.type&&!t.ref&&e.push(new Gn(i,t,'either "type" or "ref" is required'));let s=$l(t.type);const a=$l(t.ref);if(t.id){const c=$l(t.id);for(let d=0;d<n.arrayIndex;d++){const p=r.layers[d];$l(p.id)===c&&e.push(new Gn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${p.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(d=>{d in t&&e.push(new Gn(i,t[d],`"${d}" is prohibited for ref layers`))});let c;r.layers.forEach(d=>{$l(d.id)===a&&(c=d)}),c?c.ref?e.push(new Gn(i,t.ref,"ref cannot reference another ref layer")):s=$l(c.type):e.push(new Gn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new Gn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],d=c&&$l(c.type);c?d==="vector"&&s==="raster"?e.push(new Gn(i,t.source,`layer "${t.id}" requires a raster source`)):d!=="raster-dem"&&s==="hillshade"?e.push(new Gn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):d!=="raster-dem"&&s==="color-relief"?e.push(new Gn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):d==="raster"&&s!=="raster"?e.push(new Gn(i,t.source,`layer "${t.id}" requires a vector source`)):d==="vector"&&!t["source-layer"]?e.push(new Gn(i,t,`layer "${t.id}" must specify a "source-layer"`)):d==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new Gn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(d!=="geojson"||!c.lineMetrics)&&e.push(new Gn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Gn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(bm({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:dU,layout(c){return bm({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(d){return VX(fx({layerType:s},d))}}})},paint(c){return bm({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(d){return YX(fx({layerType:s},d))}}})}}})),e}function Lb(n){const e=n.value,t=n.key,i=ho(e);return i!=="string"?[new Gn(t,e,`string expected, ${i} found`)]:[]}function Jhe(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=ho(i);if(i===void 0)return a;if(c!=="object")return a.push(new Gn("source_raster_dem",i,`object expected, ${c} found`)),a;const p=$l(i.encoding)==="custom",v=["redFactor","greenFactor","blueFactor","baseShift"],M=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const E in i)!p&&v.includes(E)?a.push(new Gn(E,i[E],`In "${t}": "${E}" is only valid when "encoding" is set to "custom". ${M} encoding found`)):o[E]?a=a.concat(n.validateSpec({key:E,value:i[E],valueSpec:o[E],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new Gn(E,i[E],`unknown property "${E}"`));return a}const Xz={promoteId:ede};function HX(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new Gn(t,e,'"type" is required')];const s=$l(e.type);let a;switch(s){case"vector":case"raster":return a=bm({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:Xz,validateSpec:o}),a;case"raster-dem":return a=Jhe({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=bm({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:Xz}),e.cluster)for(const c in e.clusterProperties){const[d,p]=e.clusterProperties[c],v=typeof d=="string"?[d,["accumulated"],["get",c]]:d;a.push(...gx({key:`${t}.${c}.map`,value:p,expressionContext:"cluster-map"})),a.push(...gx({key:`${t}.${c}.reduce`,value:v,expressionContext:"cluster-reduce"}))}return a;case"video":return bm({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return bm({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new Gn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return e5({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ede({key:n,value:e}){if(ho(e)==="string")return Lb({key:n,value:e});{const t=[];for(const i in e)t.push(...Lb({key:`${n}.${i}`,value:e[i]}));return t}}function ZX(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=ho(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Gn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Gn(a,e[a],`unknown property "${a}"`)])}return o}function XX(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=ho(e);if(e===void 0)return[];if(o!=="object")return[new Gn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Gn(a,e[a],`unknown property "${a}"`)]);return s}function JX(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=ho(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Gn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Gn(a,e[a],`unknown property "${a}"`)]);return o}function tde(n){return Lb(n).length===0?[]:gx(n)}function nde(n){return Lb(n).length===0?[]:gx(n)}function ide(n){const e=n.key,t=n.value;if(ho(t)==="array"){if(t.length<1||t.length>4)return[new Gn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return Z6({key:e,value:t,valueSpec:{}})}function rde(n){const e=n.key,t=n.value;if(ho(t)==="array"){const r={type:"number"};if(t.length<1)return[new Gn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return Z6({key:e,value:t,valueSpec:{}})}function ode(n){const e=n.key,t=n.value;if(ho(t)==="array"){if(t.length<1)return[new Gn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(AD({key:`${e}[${o}]`,value:t[o]}));return r}else return AD({key:e,value:t})}function sde(n){const e=n.key,t=n.value,i=ho(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new Gn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(e5({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(hU({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function eJ(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new Gn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new Gn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(bm({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return Lb({key:i,value:t})}function ade(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=ho(e);if(e===void 0)return[];if(o!=="object")return[new Gn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Gn(a,e[a],`unknown property "${a}"`)]);return s}function lde(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=ho(t);return i==="array"&&!cde(t)&&!ude(t)?[new Gn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new Gn(e,t,`projection expected, invalid type "${i}" found`)]}function ude(n){return!!["interpolate","step","literal"].includes(n[0])}function cde(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function Ade(n){return!!n&&n.constructor===Object}function tJ(n){return Ade(n.value)?[]:[new Gn(n.key,n.value,`object expected, ${ho(n.value)} found`)]}const Jz={"*"(){return[]},array:hU,boolean:Xhe,number:Z6,color:AD,constants:GX,enum:e5,filter:dU,function:WX,layer:$X,object:bm,source:HX,light:ZX,sky:XX,terrain:JX,projection:ade,projectionDefinition:lde,string:Lb,formatted:tde,resolvedImage:nde,padding:ide,numberArray:rde,colorArray:ode,variableAnchorOffsetCollection:sde,sprite:eJ,state:tJ};function hE(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=hE,t.expression&&uM($l(e))?WX(n):t.expression&&AM(Ub(e))?gx(n):t.type&&Jz[t.type]?Jz[t.type](n):bm(fx({},n,{valueSpec:t.type?i[t.type]:t}))}function nJ(n){const e=n.value,t=n.key,i=Lb(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new Gn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new Gn(t,e,'"glyphs" url must include a "{range}" token'))),i}function eh(n,e=Xo){let t=[];return t=t.concat(hE({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:hE,objectElementValidators:{glyphs:nJ,"*"(){return[]}}})),n.constants&&(t=t.concat(GX({key:"constants",value:n.constants}))),iJ(t)}eh.source=qp(Qp(HX));eh.sprite=qp(Qp(eJ));eh.glyphs=qp(Qp(nJ));eh.light=qp(Qp(ZX));eh.sky=qp(Qp(XX));eh.terrain=qp(Qp(JX));eh.state=qp(Qp(tJ));eh.layer=qp(Qp($X));eh.filter=qp(Qp(dU));eh.paintProperty=qp(Qp(YX));eh.layoutProperty=qp(Qp(VX));function Qp(n){return function(e){return n(Object.assign({},e,{validateSpec:hE}))}}function iJ(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function qp(n){return function(...e){return iJ(n.apply(this,e))}}const hde=/("(?:[^\\"]|\\.)*")|[:,]/g;function dde(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const d=JSON.stringify(s,r);if(d===void 0)return d;const p=i-a.length-c;if(d.length<=p){const v=d.replace(hde,(M,E)=>E||`${M} `);if(v.length<=p)return v}if(r!=null&&(s=JSON.parse(d),r=void 0),typeof s=="object"&&s!==null){const v=a+t,M=[];let E=0,P,U;if(Array.isArray(s)){P="[",U="]";const{length:z}=s;for(;E<z;E++)M.push(o(s[E],v,E===z-1?0:1)||"null")}else{P="{",U="}";const z=Object.keys(s),{length:V}=z;for(;E<V;E++){const Z=z[E],X=`${JSON.stringify(Z)}: `,re=o(s[Z],v,X.length+(E===V-1?0:1));re!==void 0&&M.push(X+re)}}if(M.length>0)return[P,t+M.join(`,
${v}`),U].join(`
${a}`)}return d})(n,"",0)}function ej(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function fde(n,e=2){return n=ej(n,Xo.$root),n.layers&&(n.layers=n.layers.map(t=>ej(t,Xo.layer))),dde(n,{indent:e})}function o8(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function tj(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function hD(n,e){return typeof e=="string"&&e[0]==="@"?hD(n,n.constants[e]):e}function mde(n){return Array.isArray(n.stops)}function w3(n,e,t){n[t]=n[e],delete n[e]}function pde(n){n.version=8,Zhe(n,r=>{r.type==="video"&&r.url!==void 0&&w3(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),M4(n,r=>{o8(r,o=>{o["symbol-min-distance"]!==void 0&&w3(o,"symbol-min-distance","symbol-spacing")}),tj(r,o=>{o["background-image"]!==void 0&&w3(o,"background-image","background-pattern"),o["line-image"]!==void 0&&w3(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&w3(o,"fill-image","fill-pattern")})}),AU(n,{paint:!0,layout:!0},r=>{const o=hD(n,r.value);mde(o)&&o.stops.forEach(s=>{s[1]=hD(n,s[1])}),r.set(o)}),delete n.constants,M4(n,r=>{o8(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),tj(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}M4(n,r=>{o8(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function gde(n){const e=[];return M4(n,t=>{t.filter&&(t.filter=x4(t.filter))}),AU(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{AM(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s(jX(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(NX(r)))}),n}function yde(n){return JSON.parse(vde(JSON.stringify(n)))}function vde(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function Cde(n){let e=!1;if(n.version===7&&(n=pde(n),e=!0),n.version===8&&(e=!!gde(n),e=!0),AU(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(yde(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const Cm=Xo,bde={StyleExpression:zX,StylePropertyFunction:$6,ZoomConstantExpression:lD,ZoomDependentExpression:uD,createExpression:oU,createPropertyExpression:sU,isExpression:AM,isExpressionFilter:H6,isZoomExpression:zhe,normalizePropertyExpression:jhe},_de={convertFunction:jX,createFunction:rU,isFunction:uM},xde=8,Mde=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),wde={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},Sde=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Ede={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},encoding:{type:"enum",values:{mvt:{doc:"Mapbox Vector Tiles. See http://github.com/mapbox/vector-tile-spec for more info."},mlt:{doc:"MapLibre Vector Tiles. See https://github.com/maplibre/maplibre-tile-spec for more info."}},default:"mvt",doc:"The encoding used by this source. Mapbox Vector Tiles encoding is used by default.","sdk-support":{mvt:{android:"supported",ios:"supported",js:"supported"},mlt:{android:"https://github.com/maplibre/maplibre-native/issues/3721",ios:"https://github.com/maplibre/maplibre-native/issues/3721",js:"https://github.com/maplibre/maplibre-gl-js/issues/6258"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Bde={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Ode={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Ide={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},Tde={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},kde={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Dde={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},Rde=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Pde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Ude={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Lde={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Kde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Fde={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},zde=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),jde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Nde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Gde={type:"array",value:"*",doc:"A filter selects specific features from a layer."},Wde={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},Qde={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},qde={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Yde={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},Vde=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),$de={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},Hde={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Zde={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Xde={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Jde=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],efe={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},tfe={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"5.8.0",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},nfe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ife={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},rfe={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ofe={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},sfe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},afe={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},lfe={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},ufe={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Yr={$version:xde,$root:Mde,sources:wde,source:Sde,source_vector:Ede,source_raster:Bde,source_raster_dem:Ode,source_geojson:Ide,source_video:Tde,source_image:kde,layer:Dde,layout:Rde,layout_background:Pde,layout_fill:Ude,layout_circle:Lde,layout_heatmap:Kde,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:Fde,layout_symbol:zde,layout_raster:jde,layout_hillshade:Nde,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:Gde,filter_operator:Wde,geometry_type:Qde,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:qde,expression:Yde,expression_name:Vde,light:$de,sky:Hde,terrain:Zde,projection:Xde,paint:Jde,paint_fill:efe,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:tfe,paint_circle:nfe,paint_heatmap:ife,paint_symbol:rfe,paint_raster:ofe,paint_hillshade:sfe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:afe,transition:lfe,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:ufe};var SS={exports:{}};var cfe=SS.exports,nj;function Afe(){return nj||(nj=1,(function(n,e){(function(t,i){n.exports=i()})(cfe,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var d="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",p={};return i.shared(p),i.index(t,p),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(h,l,A,y){return new(A||(A=Promise))((function(_,B){function O(W){try{F(y.next(W))}catch(te){B(te)}}function D(W){try{F(y.throw(W))}catch(te){B(te)}}function F(W){var te;W.done?_(W.value):(te=W.value,te instanceof A?te:new A((function(ae){ae(te)}))).then(O,D)}F((y=y.apply(h,l||[])).next())}))}function c(h,l){this.x=h,this.y=l}function d(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var p,v;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,l){return this.clone()._rotateAround(h,l)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const l=h.x-this.x,A=h.y-this.y;return l*l+A*A},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,l){return Math.atan2(this.x*l-this.y*h,this.x*h+this.y*l)},_matMult(h){const l=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=l,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const l=Math.cos(h),A=Math.sin(h),y=A*this.x+l*this.y;return this.x=l*this.x-A*this.y,this.y=y,this},_rotateAround(h,l){const A=Math.cos(h),y=Math.sin(h),_=l.y+y*(this.x-l.x)+A*(this.y-l.y);return this.x=l.x+A*(this.x-l.x)-y*(this.y-l.y),this.y=_,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(h){if(h instanceof c)return h;if(Array.isArray(h))return new c(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new c(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var M=(function(){if(v)return p;function h(l,A,y,_){this.cx=3*l,this.bx=3*(y-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(_-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=A,this.p2x=y,this.p2y=_}return v=1,p=h,h.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,A){if(A===void 0&&(A=1e-6),l<0)return 0;if(l>1)return 1;for(var y=l,_=0;_<8;_++){var B=this.sampleCurveX(y)-l;if(Math.abs(B)<A)return y;var O=this.sampleCurveDerivativeX(y);if(Math.abs(O)<1e-6)break;y-=B/O}var D=0,F=1;for(y=l,_=0;_<20&&(B=this.sampleCurveX(y),!(Math.abs(B-l)<A));_++)l>B?D=y:F=y,y=.5*(F-D)+D;return y},solve:function(l,A){return this.sampleCurveY(this.solveCurveX(l,A))}},p})(),E=d(M);let P,U;function z(){return P==null&&(P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),P}function V(){if(U==null&&(U=!1,z())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let y=0;y<25;y++){const _=4*y;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(y%5,Math.floor(y/5),1,1)}const A=l.getImageData(0,0,5,5).data;for(let y=0;y<100;y++)if(y%4!=3&&A[y]!==y){U=!0;break}}}return U||!1}var Z=1e-6,X=typeof Float32Array<"u"?Float32Array:Array;function re(){var h=new X(9);return X!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function ee(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ne(){var h=new X(3);return X!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function q(h){var l=h[0],A=h[1],y=h[2];return Math.sqrt(l*l+A*A+y*y)}function le(h,l,A){var y=new X(3);return y[0]=h,y[1]=l,y[2]=A,y}function ue(h,l,A){return h[0]=l[0]+A[0],h[1]=l[1]+A[1],h[2]=l[2]+A[2],h}function ve(h,l,A){return h[0]=l[0]*A,h[1]=l[1]*A,h[2]=l[2]*A,h}function pe(h,l,A){var y=l[0],_=l[1],B=l[2],O=A[0],D=A[1],F=A[2];return h[0]=_*F-B*D,h[1]=B*O-y*F,h[2]=y*D-_*O,h}var Be,Ce=q;function Oe(h,l,A){var y=l[0],_=l[1],B=l[2],O=l[3];return h[0]=A[0]*y+A[4]*_+A[8]*B+A[12]*O,h[1]=A[1]*y+A[5]*_+A[9]*B+A[13]*O,h[2]=A[2]*y+A[6]*_+A[10]*B+A[14]*O,h[3]=A[3]*y+A[7]*_+A[11]*B+A[15]*O,h}function Fe(){var h=new X(4);return X!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Ee(h,l,A,y){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",B=Math.PI/360;l*=B,y*=B,A*=B;var O=Math.sin(l),D=Math.cos(l),F=Math.sin(A),W=Math.cos(A),te=Math.sin(y),ae=Math.cos(y);switch(_){case"xyz":h[0]=O*W*ae+D*F*te,h[1]=D*F*ae-O*W*te,h[2]=D*W*te+O*F*ae,h[3]=D*W*ae-O*F*te;break;case"xzy":h[0]=O*W*ae-D*F*te,h[1]=D*F*ae-O*W*te,h[2]=D*W*te+O*F*ae,h[3]=D*W*ae+O*F*te;break;case"yxz":h[0]=O*W*ae+D*F*te,h[1]=D*F*ae-O*W*te,h[2]=D*W*te-O*F*ae,h[3]=D*W*ae+O*F*te;break;case"yzx":h[0]=O*W*ae+D*F*te,h[1]=D*F*ae+O*W*te,h[2]=D*W*te-O*F*ae,h[3]=D*W*ae-O*F*te;break;case"zxy":h[0]=O*W*ae-D*F*te,h[1]=D*F*ae+O*W*te,h[2]=D*W*te+O*F*ae,h[3]=D*W*ae-O*F*te;break;case"zyx":h[0]=O*W*ae-D*F*te,h[1]=D*F*ae+O*W*te,h[2]=D*W*te-O*F*ae,h[3]=D*W*ae+O*F*te;break;default:throw new Error("Unknown angle order "+_)}return h}function Ve(){var h=new X(2);return X!=Float32Array&&(h[0]=0,h[1]=0),h}function ut(h,l){var A=new X(2);return A[0]=h,A[1]=l,A}ne(),Be=new X(4),X!=Float32Array&&(Be[0]=0,Be[1]=0,Be[2]=0,Be[3]=0),ne(),le(1,0,0),le(0,1,0),Fe(),Fe(),re(),Ve();const mt=8192;function Pe(h,l,A){return l*(mt/(h.tileSize*Math.pow(2,A-h.tileID.overscaledZ)))}function De(h,l){return(h%l+l)%l}function Xe(h,l,A){return h*(1-A)+l*A}function Ke(h){if(h<=0)return 0;if(h>=1)return 1;const l=h*h,A=l*h;return 4*(h<.5?A:3*(h-l)+A-.75)}function Bt(h,l,A,y){const _=new E(h,l,A,y);return B=>_.solve(B)}const ot=Bt(.25,.1,.25,1);function Et(h,l,A){return Math.min(A,Math.max(l,h))}function Rt(h,l,A){const y=A-l,_=((h-l)%y+y)%y+l;return _===l?A:_}function Ue(h,...l){for(const A of l)for(const y in A)h[y]=A[y];return h}let ke=1;function Te(h,l,A){const y={};for(const _ in h)y[_]=l.call(this,h[_],_,h);return y}function He(h,l,A){const y={};for(const _ in h)l.call(this,h[_],_,h)&&(y[_]=h[_]);return y}function Ct(h){return Array.isArray(h)?h.map(Ct):typeof h=="object"&&h?Te(h,Ct):h}const vt={};function wt(h){vt[h]||(typeof console<"u"&&console.warn(h),vt[h]=!0)}function Ft(h,l,A){return(A.y-h.y)*(l.x-h.x)>(l.y-h.y)*(A.x-h.x)}function Pt(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let nn=null;function Kn(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Wn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Mi(h,l,A,y,_){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const B=new VideoFrame(h,{timestamp:0});try{const O=B?.format;if(!O||!O.startsWith("BGR")&&!O.startsWith("RGB"))throw new Error(`Unrecognized format ${O}`);const D=O.startsWith("BGR"),F=new Uint8ClampedArray(y*_*4);if(yield B.copyTo(F,(function(W,te,ae,he,me){const be=4*Math.max(-te,0),we=(Math.max(0,ae)-ae)*he*4+be,Ie=4*he,ze=Math.max(0,te),ct=Math.max(0,ae);return{rect:{x:ze,y:ct,width:Math.min(W.width,te+he)-ze,height:Math.min(W.height,ae+me)-ct},layout:[{offset:we,stride:Ie}]}})(h,l,A,y,_)),D)for(let W=0;W<F.length;W+=4){const te=F[W];F[W]=F[W+2],F[W+2]=te}return F}finally{B.close()}}))}let Fn,Ln;function In(h,l,A,y){return h.addEventListener(l,A,y),{unsubscribe:()=>{h.removeEventListener(l,A,y)}}}function oi(h){return h*Math.PI/180}function Tn(h){return h/Math.PI*180}const je={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},$={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},j="AbortError";class Q extends Error{constructor(l=j){super(l instanceof Error?l.message:l),this.name=j,l instanceof Error&&l.stack&&(this.stack=l.stack)}}function Ae(h){return h.name===j}const Me={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ne(h){return Me.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const We="global-dispatcher";class it extends Error{constructor(l,A,y,_){super(`AJAXError: ${A} (${l}): ${y}`),this.status=l,this.statusText=A,this.url=y,this.body=_}}const bt=()=>Pt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ye=function(h,l){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const y=Ne(h.url);if(y)return y(h,l);if(Pt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:We},l)}if(!(/^file:/.test(A=h.url)||/^file:/.test(bt())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(y,_){return a(this,void 0,void 0,(function*(){const B=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:bt(),signal:_.signal});let O,D;y.type!=="json"||B.headers.has("Accept")||B.headers.set("Accept","application/json");try{O=yield fetch(B)}catch(W){throw Ae(W)?W:new it(0,W.message,y.url,new Blob)}if(!O.ok){const W=yield O.blob();throw new it(O.status,O.statusText,y.url,W)}D=y.type==="arrayBuffer"||y.type==="image"?O.arrayBuffer():y.type==="json"?O.json():O.text();const F=yield D;return _.signal.throwIfAborted(),{data:F,cacheControl:O.headers.get("Cache-Control"),expires:O.headers.get("Expires")}}))})(h,l);if(Pt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:We},l)}var A;return(function(y,_){return new Promise(((B,O)=>{var D;const F=new XMLHttpRequest;F.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(F.responseType="arraybuffer");for(const W in y.headers)F.setRequestHeader(W,y.headers[W]);y.type==="json"&&(F.responseType="text",!((D=y.headers)===null||D===void 0)&&D.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=y.credentials==="include",F.onerror=()=>{O(new Error(F.statusText))},F.onload=()=>{if(!_.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let W=F.response;if(y.type==="json")try{W=JSON.parse(F.response)}catch(te){return void O(te)}B({data:W,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const W=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});O(new it(F.status,F.statusText,y.url,W))}},_.signal.addEventListener("abort",(()=>{F.abort(),O(new Q(_.signal.reason))})),F.send(y.body)}))})(h,l)};function at(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const l=new URL(h),A=window.location;return l.protocol===A.protocol&&l.host===A.host}function C(h,l,A){A[h]&&A[h].indexOf(l)!==-1||(A[h]=A[h]||[],A[h].push(l))}function Ut(h,l,A){if(A&&A[h]){const y=A[h].indexOf(l);y!==-1&&A[h].splice(y,1)}}class gn{constructor(l,A={}){Ue(this,A),this.type=l}}class bn extends gn{constructor(l,A={}){super("error",Ue({error:l},A))}}class _n{on(l,A){return this._listeners=this._listeners||{},C(l,A,this._listeners),{unsubscribe:()=>{this.off(l,A)}}}off(l,A){return Ut(l,A,this._listeners),Ut(l,A,this._oneTimeListeners),this}once(l,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},C(l,A,this._oneTimeListeners),this):new Promise((y=>this.once(l,y)))}fire(l,A){typeof l=="string"&&(l=new gn(l,A||{}));const y=l.type;if(this.listens(y)){l.target=this;const _=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const D of _)D.call(this,l);const B=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const D of B)Ut(y,D,this._oneTimeListeners),D.call(this,l);const O=this._eventedParent;O&&(Ue(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),O.fire(l))}else l instanceof bn&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,A){return this._eventedParent=l,this._eventedParentData=A,this}}var Mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const xi=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ji(h,l){const A={};for(const y in h)y!=="ref"&&(A[y]=h[y]);return xi.forEach((y=>{y in l&&(A[y]=l[y])})),A}function Qn(h,l){if(Array.isArray(h)){if(!Array.isArray(l)||h.length!==l.length)return!1;for(let A=0;A<h.length;A++)if(!Qn(h[A],l[A]))return!1;return!0}if(typeof h=="object"&&h!==null&&l!==null){if(typeof l!="object"||Object.keys(h).length!==Object.keys(l).length)return!1;for(const A in h)if(!Qn(h[A],l[A]))return!1;return!0}return h===l}function Zn(h,l){h.push(l)}function Yi(h,l,A){Zn(A,{command:"addSource",args:[h,l[h]]})}function qi(h,l,A){Zn(l,{command:"removeSource",args:[h]}),A[h]=!0}function Ui(h,l,A,y){qi(h,A,y),Yi(h,l,A)}function Vi(h,l,A){let y;for(y in h[A])if(Object.prototype.hasOwnProperty.call(h[A],y)&&y!=="data"&&!Qn(h[A][y],l[A][y]))return!1;for(y in l[A])if(Object.prototype.hasOwnProperty.call(l[A],y)&&y!=="data"&&!Qn(h[A][y],l[A][y]))return!1;return!0}function Ki(h,l,A,y,_,B){h=h||{},l=l||{};for(const O in h)Object.prototype.hasOwnProperty.call(h,O)&&(Qn(h[O],l[O])||A.push({command:B,args:[y,O,l[O],_]}));for(const O in l)Object.prototype.hasOwnProperty.call(l,O)&&!Object.prototype.hasOwnProperty.call(h,O)&&(Qn(h[O],l[O])||A.push({command:B,args:[y,O,l[O],_]}))}function Ir(h){return h.id}function Eo(h,l){return h[l.id]=l,h}class cn{constructor(l,A,y,_){this.message=(l?`${l}: `:"")+y,_&&(this.identifier=_),A!=null&&A.__line__&&(this.line=A.__line__)}}function rr(h,...l){for(const A of l)for(const y in A)h[y]=A[y];return h}class Yo extends Error{constructor(l,A){super(A),this.message=A,this.key=l}}class aa{constructor(l,A=[]){this.parent=l,this.bindings={};for(const[y,_]of A)this.bindings[y]=_}concat(l){return new aa(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const lo={kind:"null"},Dn={kind:"number"},er={kind:"string"},Ai={kind:"boolean"},ja={kind:"color"},_A={kind:"projectionDefinition"},Sl={kind:"object"},Hi={kind:"value"},$u={kind:"collator"},fo={kind:"formatted"},Xa={kind:"padding"},El={kind:"colorArray"},Na={kind:"numberArray"},Lo={kind:"resolvedImage"},bc={kind:"variableAnchorOffsetCollection"};function Vo(h,l){return{kind:"array",itemType:h,N:l}}function vr(h){if(h.kind==="array"){const l=vr(h.itemType);return typeof h.N=="number"?`array<${l}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${l}>`}return h.kind}const Ga=[lo,Dn,er,Ai,ja,_A,fo,Sl,Vo(Hi),Xa,Na,El,Lo,bc];function es(h,l){if(l.kind==="error")return null;if(h.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!es(h.itemType,l.itemType))&&(typeof h.N!="number"||h.N===l.N))return null}else{if(h.kind===l.kind)return null;if(h.kind==="value"){for(const A of Ga)if(!es(A,l))return null}}return`Expected ${vr(h)} but found ${vr(l)} instead.`}function Mu(h,l){return l.some((A=>A.kind===h.kind))}function wu(h,l){return l.some((A=>A==="null"?h===null:A==="array"?Array.isArray(h):A==="object"?h&&!Array.isArray(h)&&typeof h=="object":A===typeof h))}function hl(h,l){return h.kind==="array"&&l.kind==="array"?h.itemType.kind===l.itemType.kind&&typeof h.N=="number":h.kind===l.kind}const Xc=.96422,dl=.82521,Wa=4/29,Ar=6/29,Hu=3*Ar*Ar,Bl=Ar*Ar*Ar,Ol=Math.PI/180,Su=180/Math.PI;function _c(h){return(h%=360)<0&&(h+=360),h}function zh([h,l,A,y]){let _,B;const O=xc((.2225045*(h=Zs(h))+.7168786*(l=Zs(l))+.0606169*(A=Zs(A)))/1);h===l&&l===A?_=B=O:(_=xc((.4360747*h+.3850649*l+.1430804*A)/Xc),B=xc((.0139322*h+.0971045*l+.7141733*A)/dl));const D=116*O-16;return[D<0?0:D,500*(_-O),200*(O-B),y]}function Zs(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function xc(h){return h>Bl?Math.pow(h,1/3):h/Hu+Wa}function Zl([h,l,A,y]){let _=(h+16)/116,B=isNaN(l)?_:_+l/500,O=isNaN(A)?_:_-A/200;return _=1*Xl(_),B=Xc*Xl(B),O=dl*Xl(O),[Jc(3.1338561*B-1.6168667*_-.4906146*O),Jc(-.9787684*B+1.9161415*_+.033454*O),Jc(.0719453*B-.2289914*_+1.4052427*O),y]}function Jc(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Xl(h){return h>Ar?h*h*h:Hu*(h-Wa)}const Jl=Object.hasOwn||function(h,l){return Object.prototype.hasOwnProperty.call(h,l)};function ms(h,l){return Jl(h,l)?h[l]:void 0}function Bo(h){return parseInt(h.padEnd(2,h),16)/255}function eu(h,l){return Eu(l?h/100:h,0,1)}function Eu(h,l,A){return Math.min(Math.max(l,h),A)}function Is(h){return!h.some(Number.isNaN)}const Bu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function tu(h,l,A){return h+A*(l-h)}function Zu(h,l,A){return h.map(((y,_)=>tu(y,l[_],A)))}class nr{constructor(l,A,y,_=1,B=!0){this.r=l,this.g=A,this.b=y,this.a=_,B||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,A,y,_]))}static parse(l){if(l instanceof nr)return l;if(typeof l!="string")return;const A=(function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=ms(Bu,y);if(_){const[O,D,F]=_;return[O/255,D/255,F/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const O=y.length<6?1:2;let D=1;return[Bo(y.slice(D,D+=O)),Bo(y.slice(D,D+=O)),Bo(y.slice(D,D+=O)),Bo(y.slice(D,D+O)||"ff")]}if(y.startsWith("rgb")){const O=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(O){const[D,F,W,te,ae,he,me,be,we,Ie,ze,ct]=O,Ge=[te||" ",me||" ",Ie].join("");if(Ge==="  "||Ge==="  /"||Ge===",,"||Ge===",,,"){const Ze=[W,he,we].join(""),ht=Ze==="%%%"?100:Ze===""?255:0;if(ht){const gt=[Eu(+F/ht,0,1),Eu(+ae/ht,0,1),Eu(+be/ht,0,1),ze?eu(+ze,ct):1];if(Is(gt))return gt}}return}}const B=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(B){const[O,D,F,W,te,ae,he,me,be]=B,we=[F||" ",te||" ",he].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Ie=[+D,Eu(+W,0,100),Eu(+ae,0,100),me?eu(+me,be):1];if(Is(Ie))return(function([ze,ct,Ge,Ze]){function ht(gt){const Gt=(gt+ze/30)%12,an=ct*Math.min(Ge,1-Ge);return Ge-an*Math.max(-1,Math.min(Gt-3,9-Gt,1))}return ze=_c(ze),ct/=100,Ge/=100,[ht(0),ht(8),ht(4),Ze]})(Ie)}}})(l);return A?new nr(...A,!1):void 0}get rgb(){const{r:l,g:A,b:y,a:_}=this,B=_||1/0;return this.overwriteGetter("rgb",[l/B,A/B,y/B,_])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[A,y,_,B]=zh(l),O=Math.sqrt(y*y+_*_);return[Math.round(1e4*O)?_c(Math.atan2(_,y)*Su):NaN,O,A,B]})(this.rgb))}get lab(){return this.overwriteGetter("lab",zh(this.rgb))}overwriteGetter(l,A){return Object.defineProperty(this,l,{value:A}),A}toString(){const[l,A,y,_]=this.rgb;return`rgba(${[l,A,y].map((B=>Math.round(255*B))).join(",")},${_})`}static interpolate(l,A,y,_="rgb"){switch(_){case"rgb":{const[B,O,D,F]=Zu(l.rgb,A.rgb,y);return new nr(B,O,D,F,!1)}case"hcl":{const[B,O,D,F]=l.hcl,[W,te,ae,he]=A.hcl;let me,be;if(isNaN(B)||isNaN(W))isNaN(B)?isNaN(W)?me=NaN:(me=W,D!==1&&D!==0||(be=te)):(me=B,ae!==1&&ae!==0||(be=O));else{let Ge=W-B;W>B&&Ge>180?Ge-=360:W<B&&B-W>180&&(Ge+=360),me=B+y*Ge}const[we,Ie,ze,ct]=(function([Ge,Ze,ht,gt]){return Ge=isNaN(Ge)?0:Ge*Ol,Zl([ht,Math.cos(Ge)*Ze,Math.sin(Ge)*Ze,gt])})([me,be??tu(O,te,y),tu(D,ae,y),tu(F,he,y)]);return new nr(we,Ie,ze,ct,!1)}case"lab":{const[B,O,D,F]=Zl(Zu(l.lab,A.lab,y));return new nr(B,O,D,F,!1)}}}}nr.black=new nr(0,0,0,1),nr.white=new nr(1,1,1,1),nr.transparent=new nr(0,0,0,0),nr.red=new nr(1,0,0,1);class Ja{constructor(l,A,y){this.sensitivity=l?A?"variant":"case":A?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,A){return this.collator.compare(l,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const ts=["bottom","center","top"];class Xu{constructor(l,A,y,_,B,O){this.text=l,this.image=A,this.scale=y,this.fontStack=_,this.textColor=B,this.verticalAlign=O}}class ns{constructor(l){this.sections=l}static fromString(l){return new ns([new Xu(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof ns?l:ns.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class mo{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof mo)return l;if(typeof l=="number")return new mo([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const A of l)if(typeof A!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new mo(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y){return new mo(Zu(l.values,A.values,y))}}class po{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof po)return l;if(typeof l=="number")return new po([l]);if(Array.isArray(l)){for(const A of l)if(typeof A!="number")return;return new po(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y){return new po(Zu(l.values,A.values,y))}}class wi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof wi)return l;if(typeof l=="string"){const y=nr.parse(l);return y?new wi([y]):void 0}if(!Array.isArray(l))return;const A=[];for(const y of l){if(typeof y!="string")return;const _=nr.parse(y);if(!_)return;A.push(_)}return new wi(A)}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y,_="rgb"){const B=[];if(l.values.length!=A.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${A.values.length}), cannot interpolate.`);for(let O=0;O<l.values.length;O++)B.push(nr.interpolate(l.values[O],A.values[O],y,_));return new wi(B)}}class ro extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const Xs=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class bo{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof bo)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let A=0;A<l.length;A+=2){const y=l[A],_=l[A+1];if(typeof y!="string"||!Xs.has(y)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new bo(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,A,y){const _=l.values,B=A.values;if(_.length!==B.length)throw new ro(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${A.toString()}`);const O=[];for(let D=0;D<_.length;D+=2){if(_[D]!==B[D])throw new ro(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${_[D]}, to[${D}]: ${B[D]}`);O.push(_[D]);const[F,W]=_[D+1],[te,ae]=B[D+1];O.push([tu(F,te,y),tu(W,ae,y)])}return new bo(O)}}class Ns{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Ns({name:l,available:!1}):null}}class Hr{constructor(l,A,y){this.from=l,this.to=A,this.transition=y}static interpolate(l,A,y){return new Hr(l,A,y)}static parse(l){return l instanceof Hr?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new Hr(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new Hr(l.from,l.to,l.transition):typeof l=="string"?new Hr(l,l,1):void 0}}function la(h,l,A,y){return typeof h=="number"&&h>=0&&h<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof A=="number"&&A>=0&&A<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[h,l,A,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[h,l,A,y]:[h,l,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function el(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Hr||h instanceof nr||h instanceof Ja||h instanceof ns||h instanceof mo||h instanceof po||h instanceof wi||h instanceof bo||h instanceof Ns)return!0;if(Array.isArray(h)){for(const l of h)if(!el(l))return!1;return!0}if(typeof h=="object"){for(const l in h)if(!el(h[l]))return!1;return!0}return!1}function Zi(h){if(h===null)return lo;if(typeof h=="string")return er;if(typeof h=="boolean")return Ai;if(typeof h=="number")return Dn;if(h instanceof nr)return ja;if(h instanceof Hr)return _A;if(h instanceof Ja)return $u;if(h instanceof ns)return fo;if(h instanceof mo)return Xa;if(h instanceof po)return Na;if(h instanceof wi)return El;if(h instanceof bo)return bc;if(h instanceof Ns)return Lo;if(Array.isArray(h)){const l=h.length;let A;for(const y of h){const _=Zi(y);if(A){if(A===_)continue;A=Hi;break}A=_}return Vo(A||Hi,l)}return Sl}function Rr(h){const l=typeof h;return h===null?"":l==="string"||l==="number"||l==="boolean"?String(h):h instanceof nr||h instanceof Hr||h instanceof ns||h instanceof mo||h instanceof po||h instanceof wi||h instanceof bo||h instanceof Ns?h.toString():JSON.stringify(h)}class ie{constructor(l,A){this.type=l,this.value=A}static parse(l,A){if(l.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!el(l[1]))return A.error("invalid value");const y=l[1];let _=Zi(y);const B=A.expectedType;return _.kind!=="array"||_.N!==0||!B||B.kind!=="array"||typeof B.N=="number"&&B.N!==0||(_=B),new ie(_,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const _e={string:er,number:Dn,boolean:Ai,object:Sl};class $e{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");let y,_=1;const B=l[0];if(B==="array"){let D,F;if(l.length>2){const W=l[1];if(typeof W!="string"||!(W in _e)||W==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);D=_e[W],_++}else D=Hi;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return A.error('The length argument to "array" must be a positive integer literal',2);F=l[2],_++}y=Vo(D,F)}else{if(!_e[B])throw new Error(`Types doesn't contain name = ${B}`);y=_e[B]}const O=[];for(;_<l.length;_++){const D=A.parse(l[_],_,Hi);if(!D)return null;O.push(D)}return new $e(y,O)}evaluate(l){for(let A=0;A<this.args.length;A++){const y=this.args[A].evaluate(l);if(!es(this.type,Zi(y)))return y;if(A===this.args.length-1)throw new ro(`Expected value to be of type ${vr(this.type)}, but found ${vr(Zi(y))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Ot={"to-boolean":Ai,"to-color":ja,"to-number":Dn,"to-string":er};class qn{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");const y=l[0];if(!Ot[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&l.length!==2)return A.error("Expected one argument.");const _=Ot[y],B=[];for(let O=1;O<l.length;O++){const D=A.parse(l[O],O,Hi);if(!D)return null;B.push(D)}return new qn(_,B)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let A,y;for(const _ of this.args){if(A=_.evaluate(l),y=null,A instanceof nr)return A;if(typeof A=="string"){const B=l.parseColor(A);if(B)return B}else if(Array.isArray(A)&&(y=A.length<3||A.length>4?`Invalid rgba value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:la(A[0],A[1],A[2],A[3]),!y))return new nr(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new ro(y||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const y of this.args){A=y.evaluate(l);const _=mo.parse(A);if(_)return _}throw new ro(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"numberArray":{let A;for(const y of this.args){A=y.evaluate(l);const _=po.parse(A);if(_)return _}throw new ro(`Could not parse numberArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"colorArray":{let A;for(const y of this.args){A=y.evaluate(l);const _=wi.parse(A);if(_)return _}throw new ro(`Could not parse colorArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const y of this.args){A=y.evaluate(l);const _=bo.parse(A);if(_)return _}throw new ro(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const y of this.args){if(A=y.evaluate(l),A===null)return 0;const _=Number(A);if(!isNaN(_))return _}throw new ro(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return ns.fromString(Rr(this.args[0].evaluate(l)));case"resolvedImage":return Ns.fromString(Rr(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return Rr(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Rn=["Unknown","Point","LineString","Polygon"];class Ti{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Rn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let A=this._parseColorCache.get(l);return A||(A=nr.parse(l),this._parseColorCache.set(l,A)),A}}class Ni{constructor(l,A,y=[],_,B=new aa,O=[]){this.registry=l,this.path=y,this.key=y.map((D=>`[${D}]`)).join(""),this.scope=B,this.errors=O,this.expectedType=_,this._isConstant=A}parse(l,A,y,_,B={}){return A?this.concat(A,y,_)._parse(l,B):this._parse(l,B)}_parse(l,A){function y(_,B,O){return O==="assert"?new $e(B,[_]):O==="coerce"?new qn(B,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const B=this.registry[_];if(B){let O=B.parse(l,this);if(!O)return null;if(this.expectedType){const D=this.expectedType,F=O.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||F.kind!=="value"){if(D.kind==="projectionDefinition"&&["string","array"].includes(F.kind)||["color","formatted","resolvedImage"].includes(D.kind)&&["value","string"].includes(F.kind)||["padding","numberArray"].includes(D.kind)&&["value","number","array"].includes(F.kind)||D.kind==="colorArray"&&["value","string","array"].includes(F.kind)||D.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(F.kind))O=y(O,D,A.typeAnnotation||"coerce");else if(this.checkSubtype(D,F))return null}else O=y(O,D,A.typeAnnotation||"assert")}if(!(O instanceof ie)&&O.type.kind!=="resolvedImage"&&this._isConstant(O)){const D=new Ti;try{O=new ie(O.type,O.evaluate(D))}catch(F){return this.error(F.message),null}}return O}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,A,y){const _=typeof l=="number"?this.path.concat(l):this.path,B=y?this.scope.concat(y):this.scope;return new Ni(this.registry,this._isConstant,_,A||null,B,this.errors)}error(l,...A){const y=`${this.key}${A.map((_=>`[${_}]`)).join("")}`;this.errors.push(new Yo(y,l))}checkSubtype(l,A){const y=es(l,A);return y&&this.error(y),y}}class Yn{constructor(l,A){this.type=A.type,this.bindings=[].concat(l),this.result=A}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const A of this.bindings)l(A[1]);l(this.result)}static parse(l,A){if(l.length<4)return A.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const y=[];for(let B=1;B<l.length-1;B+=2){const O=l[B];if(typeof O!="string")return A.error(`Expected string, but found ${typeof O} instead.`,B);if(/[^a-zA-Z0-9_]/.test(O))return A.error("Variable names must contain only alphanumeric characters or '_'.",B);const D=A.parse(l[B+1],B+1);if(!D)return null;y.push([O,D])}const _=A.parse(l[l.length-1],l.length-1,A.expectedType,y);return _?new Yn(y,_):null}outputDefined(){return this.result.outputDefined()}}class Oi{constructor(l,A){this.type=A.type,this.name=l,this.boundExpression=A}static parse(l,A){if(l.length!==2||typeof l[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const y=l[1];return A.scope.has(y)?new Oi(y,A.scope.get(y)):A.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class ni{constructor(l,A,y){this.type=l,this.index=A,this.input=y}static parse(l,A){if(l.length!==3)return A.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,Dn),_=A.parse(l[2],2,Vo(A.expectedType||Hi));return y&&_?new ni(_.type.itemType,y,_):null}evaluate(l){const A=this.index.evaluate(l),y=this.input.evaluate(l);if(A<0)throw new ro(`Array index out of bounds: ${A} < 0.`);if(A>=y.length)throw new ro(`Array index out of bounds: ${A} > ${y.length-1}.`);if(A!==Math.floor(A))throw new ro(`Array index must be an integer, but found ${A} instead.`);return y[A]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class si{constructor(l,A){this.type=Ai,this.needle=l,this.haystack=A}static parse(l,A){if(l.length!==3)return A.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,Hi),_=A.parse(l[2],2,Hi);return y&&_?Mu(y.type,[Ai,er,Dn,lo,Hi])?new si(y,_):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${vr(y.type)} instead`):null}evaluate(l){const A=this.needle.evaluate(l),y=this.haystack.evaluate(l);if(!y)return!1;if(!wu(A,["boolean","string","number","null"]))throw new ro(`Expected first argument to be of type boolean, string, number or null, but found ${vr(Zi(A))} instead.`);if(!wu(y,["string","array"]))throw new ro(`Expected second argument to be of type array or string, but found ${vr(Zi(y))} instead.`);return y.indexOf(A)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class mr{constructor(l,A,y){this.type=Dn,this.needle=l,this.haystack=A,this.fromIndex=y}static parse(l,A){if(l.length<=2||l.length>=5)return A.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,Hi),_=A.parse(l[2],2,Hi);if(!y||!_)return null;if(!Mu(y.type,[Ai,er,Dn,lo,Hi]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${vr(y.type)} instead`);if(l.length===4){const B=A.parse(l[3],3,Dn);return B?new mr(y,_,B):null}return new mr(y,_)}evaluate(l){const A=this.needle.evaluate(l),y=this.haystack.evaluate(l);if(!wu(A,["boolean","string","number","null"]))throw new ro(`Expected first argument to be of type boolean, string, number or null, but found ${vr(Zi(A))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),wu(y,["string"])){const B=y.indexOf(A,_);return B===-1?-1:[...y.slice(0,B)].length}if(wu(y,["array"]))return y.indexOf(A,_);throw new ro(`Expected second argument to be of type array or string, but found ${vr(Zi(y))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ii{constructor(l,A,y,_,B,O){this.inputType=l,this.type=A,this.input=y,this.cases=_,this.outputs=B,this.otherwise=O}static parse(l,A){if(l.length<5)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return A.error("Expected an even number of arguments.");let y,_;A.expectedType&&A.expectedType.kind!=="value"&&(_=A.expectedType);const B={},O=[];for(let W=2;W<l.length-1;W+=2){let te=l[W];const ae=l[W+1];Array.isArray(te)||(te=[te]);const he=A.concat(W);if(te.length===0)return he.error("Expected at least one branch label.");for(const be of te){if(typeof be!="number"&&typeof be!="string")return he.error("Branch labels must be numbers or strings.");if(typeof be=="number"&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return he.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof be=="number"&&Math.floor(be)!==be)return he.error("Numeric branch labels must be integer values.");if(y){if(he.checkSubtype(y,Zi(be)))return null}else y=Zi(be);if(B[String(be)]!==void 0)return he.error("Branch labels must be unique.");B[String(be)]=O.length}const me=A.parse(ae,W,_);if(!me)return null;_=_||me.type,O.push(me)}const D=A.parse(l[1],1,Hi);if(!D)return null;const F=A.parse(l[l.length-1],l.length-1,_);return F?D.type.kind!=="value"&&A.concat(1).checkSubtype(y,D.type)?null:new ii(y,_,D,B,O,F):null}evaluate(l){const A=this.input.evaluate(l);return(Zi(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class jr{constructor(l,A,y){this.type=l,this.branches=A,this.otherwise=y}static parse(l,A){if(l.length<4)return A.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return A.error("Expected an odd number of arguments.");let y;A.expectedType&&A.expectedType.kind!=="value"&&(y=A.expectedType);const _=[];for(let O=1;O<l.length-1;O+=2){const D=A.parse(l[O],O,Ai);if(!D)return null;const F=A.parse(l[O+1],O+1,y);if(!F)return null;_.push([D,F]),y=y||F.type}const B=A.parse(l[l.length-1],l.length-1,y);if(!B)return null;if(!y)throw new Error("Can't infer output type");return new jr(y,_,B)}evaluate(l){for(const[A,y]of this.branches)if(A.evaluate(l))return y.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[A,y]of this.branches)l(A),l(y);l(this.otherwise)}outputDefined(){return this.branches.every((([l,A])=>A.outputDefined()))&&this.otherwise.outputDefined()}}class Oo{constructor(l,A,y,_){this.type=l,this.input=A,this.beginIndex=y,this.endIndex=_}static parse(l,A){if(l.length<=2||l.length>=5)return A.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const y=A.parse(l[1],1,Hi),_=A.parse(l[2],2,Dn);if(!y||!_)return null;if(!Mu(y.type,[Vo(Hi),er,Hi]))return A.error(`Expected first argument to be of type array or string, but found ${vr(y.type)} instead`);if(l.length===4){const B=A.parse(l[3],3,Dn);return B?new Oo(y.type,y,_,B):null}return new Oo(y.type,y,_)}evaluate(l){const A=this.input.evaluate(l),y=this.beginIndex.evaluate(l);let _;if(this.endIndex&&(_=this.endIndex.evaluate(l)),wu(A,["string"]))return[...A].slice(y,_).join("");if(wu(A,["array"]))return A.slice(y,_);throw new ro(`Expected first argument to be of type array or string, but found ${vr(Zi(A))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Ko(h,l){const A=h.length-1;let y,_,B=0,O=A,D=0;for(;B<=O;)if(D=Math.floor((B+O)/2),y=h[D],_=h[D+1],y<=l){if(D===A||l<_)return D;B=D+1}else{if(!(y>l))throw new ro("Input is not a number.");O=D-1}return 0}class ps{constructor(l,A,y){this.type=l,this.input=A,this.labels=[],this.outputs=[];for(const[_,B]of y)this.labels.push(_),this.outputs.push(B)}static parse(l,A){if(l.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return A.error("Expected an even number of arguments.");const y=A.parse(l[1],1,Dn);if(!y)return null;const _=[];let B=null;A.expectedType&&A.expectedType.kind!=="value"&&(B=A.expectedType);for(let O=1;O<l.length;O+=2){const D=O===1?-1/0:l[O],F=l[O+1],W=O,te=O+1;if(typeof D!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(_.length&&_[_.length-1][0]>=D)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ae=A.parse(F,te,B);if(!ae)return null;B=B||ae.type,_.push([D,ae])}return new ps(B,y,_)}evaluate(l){const A=this.labels,y=this.outputs;if(A.length===1)return y[0].evaluate(l);const _=this.input.evaluate(l);if(_<=A[0])return y[0].evaluate(l);const B=A.length;return _>=A[B-1]?y[B-1].evaluate(l):y[Ko(A,_)].evaluate(l)}eachChild(l){l(this.input);for(const A of this.outputs)l(A)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function oh(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Il,gs,Yv=(function(){if(gs)return Il;function h(l,A,y,_){this.cx=3*l,this.bx=3*(y-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(_-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=A,this.p2x=y,this.p2y=_}return gs=1,Il=h,h.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,A){if(A===void 0&&(A=1e-6),l<0)return 0;if(l>1)return 1;for(var y=l,_=0;_<8;_++){var B=this.sampleCurveX(y)-l;if(Math.abs(B)<A)return y;var O=this.sampleCurveDerivativeX(y);if(Math.abs(O)<1e-6)break;y-=B/O}var D=0,F=1;for(y=l,_=0;_<20&&(B=this.sampleCurveX(y),!(Math.abs(B-l)<A));_++)l>B?D=y:F=y,y=.5*(F-D)+D;return y},solve:function(l,A){return this.sampleCurveY(this.solveCurveX(l,A))}},Il})(),Ou=oh(Yv);class nu{constructor(l,A,y,_,B){this.type=l,this.operator=A,this.interpolation=y,this.input=_,this.labels=[],this.outputs=[];for(const[O,D]of B)this.labels.push(O),this.outputs.push(D)}static interpolationFactor(l,A,y,_){let B=0;if(l.name==="exponential")B=eA(A,l.base,y,_);else if(l.name==="linear")B=eA(A,1,y,_);else if(l.name==="cubic-bezier"){const O=l.controlPoints;B=new Ou(O[0],O[1],O[2],O[3]).solve(eA(A,1,y,_))}return B}static parse(l,A){let[y,_,B,...O]=l;if(!Array.isArray(_)||_.length===0)return A.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const W=_[1];if(typeof W!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:W}}else{if(_[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const W=_.slice(1);if(W.length!==4||W.some((te=>typeof te!="number"||te<0||te>1)))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:W}}}if(l.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(B=A.parse(B,2,Dn),!B)return null;const D=[];let F=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||A.expectedType==El?A.expectedType&&A.expectedType.kind!=="value"&&(F=A.expectedType):F=ja;for(let W=0;W<O.length;W+=2){const te=O[W],ae=O[W+1],he=W+3,me=W+4;if(typeof te!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(D.length&&D[D.length-1][0]>=te)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',he);const be=A.parse(ae,me,F);if(!be)return null;F=F||be.type,D.push([te,be])}return hl(F,Dn)||hl(F,_A)||hl(F,ja)||hl(F,Xa)||hl(F,Na)||hl(F,El)||hl(F,bc)||hl(F,Vo(Dn))?new nu(F,y,_,B,D):A.error(`Type ${vr(F)} is not interpolatable.`)}evaluate(l){const A=this.labels,y=this.outputs;if(A.length===1)return y[0].evaluate(l);const _=this.input.evaluate(l);if(_<=A[0])return y[0].evaluate(l);const B=A.length;if(_>=A[B-1])return y[B-1].evaluate(l);const O=Ko(A,_),D=nu.interpolationFactor(this.interpolation,_,A[O],A[O+1]),F=y[O].evaluate(l),W=y[O+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return tu(F,W,D);case"color":return nr.interpolate(F,W,D);case"padding":return mo.interpolate(F,W,D);case"colorArray":return wi.interpolate(F,W,D);case"numberArray":return po.interpolate(F,W,D);case"variableAnchorOffsetCollection":return bo.interpolate(F,W,D);case"array":return Zu(F,W,D);case"projectionDefinition":return Hr.interpolate(F,W,D)}case"interpolate-hcl":switch(this.type.kind){case"color":return nr.interpolate(F,W,D,"hcl");case"colorArray":return wi.interpolate(F,W,D,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return nr.interpolate(F,W,D,"lab");case"colorArray":return wi.interpolate(F,W,D,"lab")}}}eachChild(l){l(this.input);for(const A of this.outputs)l(A)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function eA(h,l,A,y){const _=y-A,B=h-A;return _===0?0:l===1?B/_:(Math.pow(l,B)-1)/(Math.pow(l,_)-1)}const _o={color:nr.interpolate,number:tu,padding:mo.interpolate,numberArray:po.interpolate,colorArray:wi.interpolate,variableAnchorOffsetCollection:bo.interpolate,array:Zu};class xA{constructor(l,A){this.type=l,this.args=A}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");let y=null;const _=A.expectedType;_&&_.kind!=="value"&&(y=_);const B=[];for(const D of l.slice(1)){const F=A.parse(D,1+B.length,y,void 0,{typeAnnotation:"omit"});if(!F)return null;y=y||F.type,B.push(F)}if(!y)throw new Error("No output type");const O=_&&B.some((D=>es(_,D.type)));return new xA(O?Hi:y,B)}evaluate(l){let A,y=null,_=0;for(const B of this.args)if(_++,y=B.evaluate(l),y&&y instanceof Ns&&!y.available&&(A||(A=y.name),y=null,_===this.args.length&&(y=A)),y!==null)break;return y}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function zd(h,l){return h==="=="||h==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function $o(h,l,A,y){return y.compare(l,A)===0}function To(h,l,A){const y=h!=="=="&&h!=="!=";return class rJ{constructor(B,O,D){this.type=Ai,this.lhs=B,this.rhs=O,this.collator=D,this.hasUntypedArgument=B.type.kind==="value"||O.type.kind==="value"}static parse(B,O){if(B.length!==3&&B.length!==4)return O.error("Expected two or three arguments.");const D=B[0];let F=O.parse(B[1],1,Hi);if(!F)return null;if(!zd(D,F.type))return O.concat(1).error(`"${D}" comparisons are not supported for type '${vr(F.type)}'.`);let W=O.parse(B[2],2,Hi);if(!W)return null;if(!zd(D,W.type))return O.concat(2).error(`"${D}" comparisons are not supported for type '${vr(W.type)}'.`);if(F.type.kind!==W.type.kind&&F.type.kind!=="value"&&W.type.kind!=="value")return O.error(`Cannot compare types '${vr(F.type)}' and '${vr(W.type)}'.`);y&&(F.type.kind==="value"&&W.type.kind!=="value"?F=new $e(W.type,[F]):F.type.kind!=="value"&&W.type.kind==="value"&&(W=new $e(F.type,[W])));let te=null;if(B.length===4){if(F.type.kind!=="string"&&W.type.kind!=="string"&&F.type.kind!=="value"&&W.type.kind!=="value")return O.error("Cannot use collator to compare non-string types.");if(te=O.parse(B[3],3,$u),!te)return null}return new rJ(F,W,te)}evaluate(B){const O=this.lhs.evaluate(B),D=this.rhs.evaluate(B);if(y&&this.hasUntypedArgument){const F=Zi(O),W=Zi(D);if(F.kind!==W.kind||F.kind!=="string"&&F.kind!=="number")throw new ro(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${F.kind}, ${W.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const F=Zi(O),W=Zi(D);if(F.kind!=="string"||W.kind!=="string")return l(B,O,D)}return this.collator?A(B,O,D,this.collator.evaluate(B)):l(B,O,D)}eachChild(B){B(this.lhs),B(this.rhs),this.collator&&B(this.collator)}outputDefined(){return!0}}}const e0=To("==",(function(h,l,A){return l===A}),$o),t0=To("!=",(function(h,l,A){return l!==A}),(function(h,l,A,y){return!$o(0,l,A,y)})),n0=To("<",(function(h,l,A){return l<A}),(function(h,l,A,y){return y.compare(l,A)<0})),Vv=To(">",(function(h,l,A){return l>A}),(function(h,l,A,y){return y.compare(l,A)>0})),Tf=To("<=",(function(h,l,A){return l<=A}),(function(h,l,A,y){return y.compare(l,A)<=0})),i0=To(">=",(function(h,l,A){return l>=A}),(function(h,l,A,y){return y.compare(l,A)>=0}));class jd{constructor(l,A,y){this.type=$u,this.locale=y,this.caseSensitive=l,this.diacriticSensitive=A}static parse(l,A){if(l.length!==2)return A.error("Expected one argument.");const y=l[1];if(typeof y!="object"||Array.isArray(y))return A.error("Collator options argument must be an object.");const _=A.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,Ai);if(!_)return null;const B=A.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,Ai);if(!B)return null;let O=null;return y.locale&&(O=A.parse(y.locale,1,er),!O)?null:new jd(_,B,O)}evaluate(l){return new Ja(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class kf{constructor(l,A,y,_,B){this.type=er,this.number=l,this.locale=A,this.currency=y,this.minFractionDigits=_,this.maxFractionDigits=B}static parse(l,A){if(l.length!==3)return A.error("Expected two arguments.");const y=A.parse(l[1],1,Dn);if(!y)return null;const _=l[2];if(typeof _!="object"||Array.isArray(_))return A.error("NumberFormat options argument must be an object.");let B=null;if(_.locale&&(B=A.parse(_.locale,1,er),!B))return null;let O=null;if(_.currency&&(O=A.parse(_.currency,1,er),!O))return null;let D=null;if(_["min-fraction-digits"]&&(D=A.parse(_["min-fraction-digits"],1,Dn),!D))return null;let F=null;return _["max-fraction-digits"]&&(F=A.parse(_["max-fraction-digits"],1,Dn),!F)?null:new kf(y,B,O,D,F)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class MA{constructor(l){this.type=fo,this.sections=l}static parse(l,A){if(l.length<2)return A.error("Expected at least one argument.");const y=l[1];if(!Array.isArray(y)&&typeof y=="object")return A.error("First argument must be an image or text section.");const _=[];let B=!1;for(let O=1;O<=l.length-1;++O){const D=l[O];if(B&&typeof D=="object"&&!Array.isArray(D)){B=!1;let F=null;if(D["font-scale"]&&(F=A.parse(D["font-scale"],1,Dn),!F))return null;let W=null;if(D["text-font"]&&(W=A.parse(D["text-font"],1,Vo(er)),!W))return null;let te=null;if(D["text-color"]&&(te=A.parse(D["text-color"],1,ja),!te))return null;let ae=null;if(D["vertical-align"]){if(typeof D["vertical-align"]=="string"&&!ts.includes(D["vertical-align"]))return A.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${D["vertical-align"]}' instead.`);if(ae=A.parse(D["vertical-align"],1,er),!ae)return null}const he=_[_.length-1];he.scale=F,he.font=W,he.textColor=te,he.verticalAlign=ae}else{const F=A.parse(l[O],1,Hi);if(!F)return null;const W=F.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");B=!0,_.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new MA(_)}evaluate(l){return new ns(this.sections.map((A=>{const y=A.content.evaluate(l);return Zi(y)===Lo?new Xu("",y,null,null,null,A.verticalAlign?A.verticalAlign.evaluate(l):null):new Xu(Rr(y),null,A.scale?A.scale.evaluate(l):null,A.font?A.font.evaluate(l).join(","):null,A.textColor?A.textColor.evaluate(l):null,A.verticalAlign?A.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const A of this.sections)l(A.content),A.scale&&l(A.scale),A.font&&l(A.font),A.textColor&&l(A.textColor),A.verticalAlign&&l(A.verticalAlign)}outputDefined(){return!1}}class Df{constructor(l){this.type=Lo,this.input=l}static parse(l,A){if(l.length!==2)return A.error("Expected two arguments.");const y=A.parse(l[1],1,er);return y?new Df(y):A.error("No image name provided.")}evaluate(l){const A=this.input.evaluate(l),y=Ns.fromString(A);return y&&l.availableImages&&(y.available=l.availableImages.indexOf(A)>-1),y}eachChild(l){l(this.input)}outputDefined(){return!1}}class Nd{constructor(l){this.type=Dn,this.input=l}static parse(l,A){if(l.length!==2)return A.error(`Expected 1 argument, but found ${l.length-1} instead.`);const y=A.parse(l[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${vr(y.type)} instead.`):new Nd(y):null}evaluate(l){const A=this.input.evaluate(l);if(typeof A=="string")return[...A].length;if(Array.isArray(A))return A.length;throw new ro(`Expected value to be of type string or array, but found ${vr(Zi(A))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Gs=8192;function jh(h,l){const A=(180+h[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(A*_*Gs),Math.round(y*_*Gs)]}function Nh(h,l){const A=Math.pow(2,l.z);return[(_=(h[0]/Gs+l.x)/A,360*_-180),(y=(h[1]/Gs+l.y)/A,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,_}function Gd(h,l){h[0]=Math.min(h[0],l[0]),h[1]=Math.min(h[1],l[1]),h[2]=Math.max(h[2],l[0]),h[3]=Math.max(h[3],l[1])}function Gh(h,l){return!(h[0]<=l[0]||h[2]>=l[2]||h[1]<=l[1]||h[3]>=l[3])}function r0(h,l,A){const y=h[0]-l[0],_=h[1]-l[1],B=h[0]-A[0],O=h[1]-A[1];return y*O-B*_==0&&y*B<=0&&_*O<=0}function Wd(h,l,A,y){return(_=[y[0]-A[0],y[1]-A[1]])[0]*(B=[l[0]-h[0],l[1]-h[1]])[1]-_[1]*B[0]!=0&&!(!Pm(h,l,A,y)||!Pm(A,y,h,l));var _,B}function ty(h,l,A){for(const y of A)for(let _=0;_<y.length-1;++_)if(Wd(h,l,y[_],y[_+1]))return!0;return!1}function Mc(h,l,A=!1){let y=!1;for(const D of l)for(let F=0;F<D.length-1;F++){if(r0(h,D[F],D[F+1]))return A;(B=D[F])[1]>(_=h)[1]!=(O=D[F+1])[1]>_[1]&&_[0]<(O[0]-B[0])*(_[1]-B[1])/(O[1]-B[1])+B[0]&&(y=!y)}var _,B,O;return y}function Tl(h,l){for(const A of l)if(Mc(h,A))return!0;return!1}function o0(h,l){for(const A of h)if(!Mc(A,l))return!1;for(let A=0;A<h.length-1;++A)if(ty(h[A],h[A+1],l))return!1;return!0}function Rf(h,l){for(const A of l)if(o0(h,A))return!0;return!1}function Pm(h,l,A,y){const _=y[0]-A[0],B=y[1]-A[1],O=(h[0]-A[0])*B-_*(h[1]-A[1]),D=(l[0]-A[0])*B-_*(l[1]-A[1]);return O>0&&D<0||O<0&&D>0}function Um(h,l,A){const y=[];for(let _=0;_<h.length;_++){const B=[];for(let O=0;O<h[_].length;O++){const D=jh(h[_][O],A);Gd(l,D),B.push(D)}y.push(B)}return y}function Qd(h,l,A){const y=[];for(let _=0;_<h.length;_++){const B=Um(h[_],l,A);y.push(B)}return y}function Pf(h,l,A,y){if(h[0]<A[0]||h[0]>A[2]){const _=.5*y;let B=h[0]-A[0]>_?-y:A[0]-h[0]>_?y:0;B===0&&(B=h[0]-A[2]>_?-y:A[2]-h[0]>_?y:0),h[0]+=B}Gd(l,h)}function ny(h,l,A,y){const _=Math.pow(2,y.z)*Gs,B=[y.x*Gs,y.y*Gs],O=[];for(const D of h)for(const F of D){const W=[F.x+B[0],F.y+B[1]];Pf(W,l,A,_),O.push(W)}return O}function Lm(h,l,A,y){const _=Math.pow(2,y.z)*Gs,B=[y.x*Gs,y.y*Gs],O=[];for(const F of h){const W=[];for(const te of F){const ae=[te.x+B[0],te.y+B[1]];Gd(l,ae),W.push(ae)}O.push(W)}if(l[2]-l[0]<=_/2){(D=l)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const F of O)for(const W of F)Pf(W,l,A,_)}var D;return O}class Wh{constructor(l,A){this.type=Ai,this.geojson=l,this.geometries=A}static parse(l,A){if(l.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(el(l[1])){const y=l[1];if(y.type==="FeatureCollection"){const _=[];for(const B of y.features){const{type:O,coordinates:D}=B.geometry;O==="Polygon"&&_.push(D),O==="MultiPolygon"&&_.push(...D)}if(_.length)return new Wh(y,{type:"MultiPolygon",coordinates:_})}else if(y.type==="Feature"){const _=y.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Wh(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new Wh(y,y)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(A,y){const _=[1/0,1/0,-1/0,-1/0],B=[1/0,1/0,-1/0,-1/0],O=A.canonicalID();if(y.type==="Polygon"){const D=Um(y.coordinates,B,O),F=ny(A.geometry(),_,B,O);if(!Gh(_,B))return!1;for(const W of F)if(!Mc(W,D))return!1}if(y.type==="MultiPolygon"){const D=Qd(y.coordinates,B,O),F=ny(A.geometry(),_,B,O);if(!Gh(_,B))return!1;for(const W of F)if(!Tl(W,D))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(A,y){const _=[1/0,1/0,-1/0,-1/0],B=[1/0,1/0,-1/0,-1/0],O=A.canonicalID();if(y.type==="Polygon"){const D=Um(y.coordinates,B,O),F=Lm(A.geometry(),_,B,O);if(!Gh(_,B))return!1;for(const W of F)if(!o0(W,D))return!1}if(y.type==="MultiPolygon"){const D=Qd(y.coordinates,B,O),F=Lm(A.geometry(),_,B,O);if(!Gh(_,B))return!1;for(const W of F)if(!Rf(W,D))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Qh=class{constructor(h=[],l=(A,y)=>A<y?-1:A>y?1:0){if(this.data=h,this.length=this.data.length,this.compare=l,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:l,compare:A}=this,y=l[h];for(;h>0;){const _=h-1>>1,B=l[_];if(A(y,B)>=0)break;l[h]=B,h=_}l[h]=y}_down(h){const{data:l,compare:A}=this,y=this.length>>1,_=l[h];for(;h<y;){let B=1+(h<<1);const O=B+1;if(O<this.length&&A(l[O],l[B])<0&&(B=O),A(l[B],_)>=0)break;l[h]=l[B],h=B}l[h]=_}};function Km(h,l,A=0,y=h.length-1,_=Fm){for(;y>A;){if(y-A>600){const F=y-A+1,W=l-A+1,te=Math.log(F),ae=.5*Math.exp(2*te/3),he=.5*Math.sqrt(te*ae*(F-ae)/F)*(W-F/2<0?-1:1);Km(h,l,Math.max(A,Math.floor(l-W*ae/F+he)),Math.min(y,Math.floor(l+(F-W)*ae/F+he)),_)}const B=h[l];let O=A,D=y;for(qh(h,A,l),_(h[y],B)>0&&qh(h,A,y);O<D;){for(qh(h,O,D),O++,D--;_(h[O],B)<0;)O++;for(;_(h[D],B)>0;)D--}_(h[A],B)===0?qh(h,A,D):(D++,qh(h,D,y)),D<=l&&(A=D+1),l<=D&&(y=D-1)}}function qh(h,l,A){const y=h[l];h[l]=h[A],h[A]=y}function Fm(h,l){return h<l?-1:h>l?1:0}function Uf(h,l){if(h.length<=1)return[h];const A=[];let y,_;for(const B of h){const O=s0(B);O!==0&&(B.area=Math.abs(O),_===void 0&&(_=O<0),_===O<0?(y&&A.push(y),y=[B]):y.push(B))}if(y&&A.push(y),l>1)for(let B=0;B<A.length;B++)A[B].length<=l||(Km(A[B],l,1,A[B].length-1,sh),A[B]=A[B].slice(0,l));return A}function sh(h,l){return l.area-h.area}function s0(h){let l=0;for(let A,y,_=0,B=h.length,O=B-1;_<B;O=_++)A=h[_],y=h[O],l+=(y.x-A.x)*(A.y+y.y);return l}const iy=1/298.257223563,zm=iy*(2-iy),ry=Math.PI/180;class Yh{constructor(l){const A=6378.137*ry*1e3,y=Math.cos(l*ry),_=1/(1-zm*(1-y*y)),B=Math.sqrt(_);this.kx=A*B*y,this.ky=A*B*_*(1-zm)}distance(l,A){const y=this.wrap(l[0]-A[0])*this.kx,_=(l[1]-A[1])*this.ky;return Math.sqrt(y*y+_*_)}pointOnLine(l,A){let y,_,B,O,D=1/0;for(let F=0;F<l.length-1;F++){let W=l[F][0],te=l[F][1],ae=this.wrap(l[F+1][0]-W)*this.kx,he=(l[F+1][1]-te)*this.ky,me=0;ae===0&&he===0||(me=(this.wrap(A[0]-W)*this.kx*ae+(A[1]-te)*this.ky*he)/(ae*ae+he*he),me>1?(W=l[F+1][0],te=l[F+1][1]):me>0&&(W+=ae/this.kx*me,te+=he/this.ky*me)),ae=this.wrap(A[0]-W)*this.kx,he=(A[1]-te)*this.ky;const be=ae*ae+he*he;be<D&&(D=be,y=W,_=te,B=F,O=me)}return{point:[y,_],index:B,t:Math.max(0,Math.min(1,O))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function Ts(h,l){return l[0]-h[0]}function ah(h){return h[1]-h[0]+1}function wc(h,l){return h[1]>=h[0]&&h[1]<l}function jm(h,l){if(h[0]>h[1])return[null,null];const A=ah(h);if(l){if(A===2)return[h,null];const _=Math.floor(A/2);return[[h[0],h[0]+_],[h[0]+_,h[1]]]}if(A===1)return[h,null];const y=Math.floor(A/2)-1;return[[h[0],h[0]+y],[h[0]+y+1,h[1]]]}function a0(h,l){if(!wc(l,h.length))return[1/0,1/0,-1/0,-1/0];const A=[1/0,1/0,-1/0,-1/0];for(let y=l[0];y<=l[1];++y)Gd(A,h[y]);return A}function l0(h){const l=[1/0,1/0,-1/0,-1/0];for(const A of h)for(const y of A)Gd(l,y);return l}function Nm(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function lh(h,l,A){if(!Nm(h)||!Nm(l))return NaN;let y=0,_=0;return h[2]<l[0]&&(y=l[0]-h[2]),h[0]>l[2]&&(y=h[0]-l[2]),h[1]>l[3]&&(_=h[1]-l[3]),h[3]<l[1]&&(_=l[1]-h[3]),A.distance([0,0],[y,_])}function Dt(h,l,A){const y=A.pointOnLine(l,h);return A.distance(h,y.point)}function ln(h,l,A,y,_){const B=Math.min(Dt(h,[A,y],_),Dt(l,[A,y],_)),O=Math.min(Dt(A,[h,l],_),Dt(y,[h,l],_));return Math.min(B,O)}function tn(h,l,A,y,_){if(!wc(l,h.length)||!wc(y,A.length))return 1/0;let B=1/0;for(let O=l[0];O<l[1];++O){const D=h[O],F=h[O+1];for(let W=y[0];W<y[1];++W){const te=A[W],ae=A[W+1];if(Wd(D,F,te,ae))return 0;B=Math.min(B,ln(D,F,te,ae,_))}}return B}function yi(h,l,A,y,_){if(!wc(l,h.length)||!wc(y,A.length))return NaN;let B=1/0;for(let O=l[0];O<=l[1];++O)for(let D=y[0];D<=y[1];++D)if(B=Math.min(B,_.distance(h[O],A[D])),B===0)return B;return B}function yr(h,l,A){if(Mc(h,l,!0))return 0;let y=1/0;for(const _ of l){const B=_[0],O=_[_.length-1];if(B!==O&&(y=Math.min(y,Dt(h,[O,B],A)),y===0))return y;const D=A.pointOnLine(_,h);if(y=Math.min(y,A.distance(h,D.point)),y===0)return y}return y}function Nr(h,l,A,y){if(!wc(l,h.length))return NaN;for(let B=l[0];B<=l[1];++B)if(Mc(h[B],A,!0))return 0;let _=1/0;for(let B=l[0];B<l[1];++B){const O=h[B],D=h[B+1];for(const F of A)for(let W=0,te=F.length,ae=te-1;W<te;ae=W++){const he=F[ae],me=F[W];if(Wd(O,D,he,me))return 0;_=Math.min(_,ln(O,D,he,me,y))}}return _}function ys(h,l){for(const A of h)for(const y of A)if(Mc(y,l,!0))return!0;return!1}function Fo(h,l,A,y=1/0){const _=l0(h),B=l0(l);if(y!==1/0&&lh(_,B,A)>=y)return y;if(Gh(_,B)){if(ys(h,l))return 0}else if(ys(l,h))return 0;let O=1/0;for(const D of h)for(let F=0,W=D.length,te=W-1;F<W;te=F++){const ae=D[te],he=D[F];for(const me of l)for(let be=0,we=me.length,Ie=we-1;be<we;Ie=be++){const ze=me[Ie],ct=me[be];if(Wd(ae,he,ze,ct))return 0;O=Math.min(O,ln(ae,he,ze,ct,A))}}return O}function Zr(h,l,A,y,_,B){if(!B)return;const O=lh(a0(y,B),_,A);O<l&&h.push([O,B,[0,0]])}function wA(h,l,A,y,_,B,O){if(!B||!O)return;const D=lh(a0(y,B),a0(_,O),A);D<l&&h.push([D,B,O])}function kl(h,l,A,y,_=1/0){let B=Math.min(y.distance(h[0],A[0][0]),_);if(B===0)return B;const O=new Qh([[0,[0,h.length-1],[0,0]]],Ts),D=l0(A);for(;O.length>0;){const F=O.pop();if(F[0]>=B)continue;const W=F[1],te=l?50:100;if(ah(W)<=te){if(!wc(W,h.length))return NaN;if(l){const ae=Nr(h,W,A,y);if(isNaN(ae)||ae===0)return ae;B=Math.min(B,ae)}else for(let ae=W[0];ae<=W[1];++ae){const he=yr(h[ae],A,y);if(B=Math.min(B,he),B===0)return 0}}else{const ae=jm(W,l);Zr(O,B,y,h,D,ae[0]),Zr(O,B,y,h,D,ae[1])}}return B}function Vh(h,l,A,y,_,B=1/0){let O=Math.min(B,_.distance(h[0],A[0]));if(O===0)return O;const D=new Qh([[0,[0,h.length-1],[0,A.length-1]]],Ts);for(;D.length>0;){const F=D.pop();if(F[0]>=O)continue;const W=F[1],te=F[2],ae=l?50:100,he=y?50:100;if(ah(W)<=ae&&ah(te)<=he){if(!wc(W,h.length)&&wc(te,A.length))return NaN;let me;if(l&&y)me=tn(h,W,A,te,_),O=Math.min(O,me);else if(l&&!y){const be=h.slice(W[0],W[1]+1);for(let we=te[0];we<=te[1];++we)if(me=Dt(A[we],be,_),O=Math.min(O,me),O===0)return O}else if(!l&&y){const be=A.slice(te[0],te[1]+1);for(let we=W[0];we<=W[1];++we)if(me=Dt(h[we],be,_),O=Math.min(O,me),O===0)return O}else me=yi(h,W,A,te,_),O=Math.min(O,me)}else{const me=jm(W,l),be=jm(te,y);wA(D,O,_,h,A,me[0],be[0]),wA(D,O,_,h,A,me[0],be[1]),wA(D,O,_,h,A,me[1],be[0]),wA(D,O,_,h,A,me[1],be[1])}}return O}function u0(h){return h.type==="MultiPolygon"?h.coordinates.map((l=>({type:"Polygon",coordinates:l}))):h.type==="MultiLineString"?h.coordinates.map((l=>({type:"LineString",coordinates:l}))):h.type==="MultiPoint"?h.coordinates.map((l=>({type:"Point",coordinates:l}))):[h]}class Sc{constructor(l,A){this.type=Dn,this.geojson=l,this.geometries=A}static parse(l,A){if(l.length!==2)return A.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(el(l[1])){const y=l[1];if(y.type==="FeatureCollection")return new Sc(y,y.features.map((_=>u0(_.geometry))).flat());if(y.type==="Feature")return new Sc(y,u0(y.geometry));if("type"in y&&"coordinates"in y)return new Sc(y,u0(y))}return A.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(A,y){const _=A.geometry(),B=_.flat().map((F=>Nh([F.x,F.y],A.canonical)));if(_.length===0)return NaN;const O=new Yh(B[0][1]);let D=1/0;for(const F of y){switch(F.type){case"Point":D=Math.min(D,Vh(B,!1,[F.coordinates],!1,O,D));break;case"LineString":D=Math.min(D,Vh(B,!1,F.coordinates,!0,O,D));break;case"Polygon":D=Math.min(D,kl(B,!1,F.coordinates,O,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="LineString")return(function(A,y){const _=A.geometry(),B=_.flat().map((F=>Nh([F.x,F.y],A.canonical)));if(_.length===0)return NaN;const O=new Yh(B[0][1]);let D=1/0;for(const F of y){switch(F.type){case"Point":D=Math.min(D,Vh(B,!0,[F.coordinates],!1,O,D));break;case"LineString":D=Math.min(D,Vh(B,!0,F.coordinates,!0,O,D));break;case"Polygon":D=Math.min(D,kl(B,!0,F.coordinates,O,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(A,y){const _=A.geometry();if(_.length===0||_[0].length===0)return NaN;const B=Uf(_,0).map((F=>F.map((W=>W.map((te=>Nh([te.x,te.y],A.canonical))))))),O=new Yh(B[0][0][0][1]);let D=1/0;for(const F of y)for(const W of B){switch(F.type){case"Point":D=Math.min(D,kl([F.coordinates],!1,W,O,D));break;case"LineString":D=Math.min(D,kl(F.coordinates,!0,W,O,D));break;case"Polygon":D=Math.min(D,Fo(W,F.coordinates,O,D))}if(D===0)return D}return D})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class $h{constructor(l){this.type=Hi,this.key=l}static parse(l,A){if(l.length!==2)return A.error(`Expected 1 argument, but found ${l.length-1} instead.`);const y=l[1];return y==null?A.error("Global state property must be defined."):typeof y!="string"?A.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new $h(y)}evaluate(l){var A;const y=(A=l.globals)===null||A===void 0?void 0:A.globalState;return y&&Object.keys(y).length!==0?ms(y,this.key):null}eachChild(){}outputDefined(){return!1}}const uh={"==":e0,"!=":t0,">":Vv,"<":n0,">=":i0,"<=":Tf,array:$e,at:ni,boolean:$e,case:jr,coalesce:xA,collator:jd,format:MA,image:Df,in:si,"index-of":mr,interpolate:nu,"interpolate-hcl":nu,"interpolate-lab":nu,length:Nd,let:Yn,literal:ie,match:ii,number:$e,"number-format":kf,object:$e,slice:Oo,step:ps,string:$e,"to-boolean":qn,"to-color":qn,"to-number":qn,"to-string":qn,var:Oi,within:Wh,distance:Sc,"global-state":$h};class xr{constructor(l,A,y,_){this.name=l,this.type=A,this._evaluate=y,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,A){const y=l[0],_=xr.definitions[y];if(!_)return A.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const B=Array.isArray(_)?_[0]:_.type,O=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,D=O.filter((([W])=>!Array.isArray(W)||W.length===l.length-1));let F=null;for(const[W,te]of D){F=new Ni(A.registry,iu,A.path,null,A.scope);const ae=[];let he=!1;for(let me=1;me<l.length;me++){const be=l[me],we=Array.isArray(W)?W[me-1]:W.type,Ie=F.parse(be,1+ae.length,we);if(!Ie){he=!0;break}ae.push(Ie)}if(!he)if(Array.isArray(W)&&W.length!==ae.length)F.error(`Expected ${W.length} arguments, but found ${ae.length} instead.`);else{for(let me=0;me<ae.length;me++){const be=Array.isArray(W)?W[me]:W.type,we=ae[me];F.concat(me+1).checkSubtype(be,we.type)}if(F.errors.length===0)return new xr(y,B,te,ae)}}if(D.length===1)A.errors.push(...F.errors);else{const W=(D.length?D:O).map((([ae])=>{return he=ae,Array.isArray(he)?`(${he.map(vr).join(", ")})`:`(${vr(he.type)}...)`;var he})).join(" | "),te=[];for(let ae=1;ae<l.length;ae++){const he=A.parse(l[ae],1+te.length);if(!he)return null;te.push(vr(he.type))}A.error(`Expected arguments of type ${W}, but found (${te.join(", ")}) instead.`)}return null}static register(l,A){xr.definitions=A;for(const y in A)l[y]=xr}}function Kg(h,[l,A,y,_]){l=l.evaluate(h),A=A.evaluate(h),y=y.evaluate(h);const B=_?_.evaluate(h):1,O=la(l,A,y,B);if(O)throw new ro(O);return new nr(l/255,A/255,y/255,B,!1)}function Gm(h,l){return h in l}function Dl(h,l){const A=l[h];return A===void 0?null:A}function SA(h){return{type:h}}function iu(h){if(h instanceof Oi)return iu(h.boundExpression);if(h instanceof xr&&h.name==="error"||h instanceof jd||h instanceof Wh||h instanceof Sc||h instanceof $h)return!1;const l=h instanceof qn||h instanceof $e;let A=!0;return h.eachChild((y=>{A=l?A&&iu(y):A&&y instanceof ie})),!!A&&ch(h)&&Iu(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ch(h){if(h instanceof xr&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Wh||h instanceof Sc)return!1;let l=!0;return h.eachChild((A=>{l&&!ch(A)&&(l=!1)})),l}function EA(h){if(h instanceof xr&&h.name==="feature-state")return!1;let l=!0;return h.eachChild((A=>{l&&!EA(A)&&(l=!1)})),l}function Iu(h,l){if(h instanceof xr&&l.indexOf(h.name)>=0)return!1;let A=!0;return h.eachChild((y=>{A&&!Iu(y,l)&&(A=!1)})),A}function Hh(h){return{result:"success",value:h}}function Ah(h){return{result:"error",value:h}}function ru(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function c0(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function qd(h){return!!h.expression&&h.expression.interpolated}function lr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Wm(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&Zi(h)===Sl}function fl(h){return h}function BA(h,l){const A=h.stops&&typeof h.stops[0][0]=="object",y=A||!(A||h.property!==void 0),_=h.type||(qd(l)?"exponential":"interval"),B=(function(te){switch(te.type){case"color":return nr.parse;case"padding":return mo.parse;case"numberArray":return po.parse;case"colorArray":return wi.parse;default:return null}})(l);if(B&&((h=rr({},h)).stops&&(h.stops=h.stops.map((te=>[te[0],B(te[1])]))),h.default=B(h.default?h.default:l.default)),h.colorSpace&&(O=h.colorSpace)!=="rgb"&&O!=="hcl"&&O!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var O;const D=(function(te){switch(te){case"exponential":return Zh;case"interval":return A0;case"categorical":return oy;case"identity":return Lf;default:throw new Error(`Unknown function type "${te}"`)}})(_);let F,W;if(_==="categorical"){F=Object.create(null);for(const te of h.stops)F[te[0]]=te[1];W=typeof h.stops[0][0]}if(A){const te={},ae=[];for(let be=0;be<h.stops.length;be++){const we=h.stops[be],Ie=we[0].zoom;te[Ie]===void 0&&(te[Ie]={zoom:Ie,type:h.type,property:h.property,default:h.default,stops:[]},ae.push(Ie)),te[Ie].stops.push([we[0].value,we[1]])}const he=[];for(const be of ae)he.push([te[be].zoom,BA(te[be],l)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:nu.interpolationFactor.bind(void 0,me),zoomStops:he.map((be=>be[0])),evaluate:({zoom:be},we)=>Zh({stops:he,base:h.base},l,be).evaluate(be,we)}}if(y){const te=_==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:te,interpolationFactor:nu.interpolationFactor.bind(void 0,te),zoomStops:h.stops.map((ae=>ae[0])),evaluate:({zoom:ae})=>D(h,l,ae,F,W)}}return{kind:"source",evaluate(te,ae){const he=ae&&ae.properties?ae.properties[h.property]:void 0;return he===void 0?Rl(h.default,l.default):D(h,l,he,F,W)}}}function Rl(h,l,A){return h!==void 0?h:l!==void 0?l:A!==void 0?A:void 0}function oy(h,l,A,y,_){return Rl(typeof A===_?y[A]:void 0,h.default,l.default)}function A0(h,l,A){if(lr(A)!=="number")return Rl(h.default,l.default);const y=h.stops.length;if(y===1||A<=h.stops[0][0])return h.stops[0][1];if(A>=h.stops[y-1][0])return h.stops[y-1][1];const _=Ko(h.stops.map((B=>B[0])),A);return h.stops[_][1]}function Zh(h,l,A){const y=h.base!==void 0?h.base:1;if(lr(A)!=="number")return Rl(h.default,l.default);const _=h.stops.length;if(_===1||A<=h.stops[0][0])return h.stops[0][1];if(A>=h.stops[_-1][0])return h.stops[_-1][1];const B=Ko(h.stops.map((te=>te[0])),A),O=(function(te,ae,he,me){const be=me-he,we=te-he;return be===0?0:ae===1?we/be:(Math.pow(ae,we)-1)/(Math.pow(ae,be)-1)})(A,y,h.stops[B][0],h.stops[B+1][0]),D=h.stops[B][1],F=h.stops[B+1][1],W=_o[l.type]||fl;return typeof D.evaluate=="function"?{evaluate(...te){const ae=D.evaluate.apply(void 0,te),he=F.evaluate.apply(void 0,te);if(ae!==void 0&&he!==void 0)return W(ae,he,O,h.colorSpace)}}:W(D,F,O,h.colorSpace)}function Lf(h,l,A){switch(l.type){case"color":A=nr.parse(A);break;case"formatted":A=ns.fromString(A.toString());break;case"resolvedImage":A=Ns.fromString(A.toString());break;case"padding":A=mo.parse(A);break;case"colorArray":A=wi.parse(A);break;case"numberArray":A=po.parse(A);break;default:lr(A)===l.type||l.type==="enum"&&l.values[A]||(A=void 0)}return Rl(A,h.default,l.default)}xr.register(uh,{error:[{kind:"error"},[er],(h,[l])=>{throw new ro(l.evaluate(h))}],typeof:[er,[Hi],(h,[l])=>vr(Zi(l.evaluate(h)))],"to-rgba":[Vo(Dn,4),[ja],(h,[l])=>{const[A,y,_,B]=l.evaluate(h).rgb;return[255*A,255*y,255*_,B]}],rgb:[ja,[Dn,Dn,Dn],Kg],rgba:[ja,[Dn,Dn,Dn,Dn],Kg],has:{type:Ai,overloads:[[[er],(h,[l])=>Gm(l.evaluate(h),h.properties())],[[er,Sl],(h,[l,A])=>Gm(l.evaluate(h),A.evaluate(h))]]},get:{type:Hi,overloads:[[[er],(h,[l])=>Dl(l.evaluate(h),h.properties())],[[er,Sl],(h,[l,A])=>Dl(l.evaluate(h),A.evaluate(h))]]},"feature-state":[Hi,[er],(h,[l])=>Dl(l.evaluate(h),h.featureState||{})],properties:[Sl,[],h=>h.properties()],"geometry-type":[er,[],h=>h.geometryType()],id:[Hi,[],h=>h.id()],zoom:[Dn,[],h=>h.globals.zoom],"heatmap-density":[Dn,[],h=>h.globals.heatmapDensity||0],elevation:[Dn,[],h=>h.globals.elevation||0],"line-progress":[Dn,[],h=>h.globals.lineProgress||0],accumulated:[Hi,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Dn,SA(Dn),(h,l)=>{let A=0;for(const y of l)A+=y.evaluate(h);return A}],"*":[Dn,SA(Dn),(h,l)=>{let A=1;for(const y of l)A*=y.evaluate(h);return A}],"-":{type:Dn,overloads:[[[Dn,Dn],(h,[l,A])=>l.evaluate(h)-A.evaluate(h)],[[Dn],(h,[l])=>-l.evaluate(h)]]},"/":[Dn,[Dn,Dn],(h,[l,A])=>l.evaluate(h)/A.evaluate(h)],"%":[Dn,[Dn,Dn],(h,[l,A])=>l.evaluate(h)%A.evaluate(h)],ln2:[Dn,[],()=>Math.LN2],pi:[Dn,[],()=>Math.PI],e:[Dn,[],()=>Math.E],"^":[Dn,[Dn,Dn],(h,[l,A])=>Math.pow(l.evaluate(h),A.evaluate(h))],sqrt:[Dn,[Dn],(h,[l])=>Math.sqrt(l.evaluate(h))],log10:[Dn,[Dn],(h,[l])=>Math.log(l.evaluate(h))/Math.LN10],ln:[Dn,[Dn],(h,[l])=>Math.log(l.evaluate(h))],log2:[Dn,[Dn],(h,[l])=>Math.log(l.evaluate(h))/Math.LN2],sin:[Dn,[Dn],(h,[l])=>Math.sin(l.evaluate(h))],cos:[Dn,[Dn],(h,[l])=>Math.cos(l.evaluate(h))],tan:[Dn,[Dn],(h,[l])=>Math.tan(l.evaluate(h))],asin:[Dn,[Dn],(h,[l])=>Math.asin(l.evaluate(h))],acos:[Dn,[Dn],(h,[l])=>Math.acos(l.evaluate(h))],atan:[Dn,[Dn],(h,[l])=>Math.atan(l.evaluate(h))],min:[Dn,SA(Dn),(h,l)=>Math.min(...l.map((A=>A.evaluate(h))))],max:[Dn,SA(Dn),(h,l)=>Math.max(...l.map((A=>A.evaluate(h))))],abs:[Dn,[Dn],(h,[l])=>Math.abs(l.evaluate(h))],round:[Dn,[Dn],(h,[l])=>{const A=l.evaluate(h);return A<0?-Math.round(-A):Math.round(A)}],floor:[Dn,[Dn],(h,[l])=>Math.floor(l.evaluate(h))],ceil:[Dn,[Dn],(h,[l])=>Math.ceil(l.evaluate(h))],"filter-==":[Ai,[er,Hi],(h,[l,A])=>h.properties()[l.value]===A.value],"filter-id-==":[Ai,[Hi],(h,[l])=>h.id()===l.value],"filter-type-==":[Ai,[er],(h,[l])=>h.geometryType()===l.value],"filter-<":[Ai,[er,Hi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y<_}],"filter-id-<":[Ai,[Hi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A<y}],"filter->":[Ai,[er,Hi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y>_}],"filter-id->":[Ai,[Hi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A>y}],"filter-<=":[Ai,[er,Hi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y<=_}],"filter-id-<=":[Ai,[Hi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A<=y}],"filter->=":[Ai,[er,Hi],(h,[l,A])=>{const y=h.properties()[l.value],_=A.value;return typeof y==typeof _&&y>=_}],"filter-id->=":[Ai,[Hi],(h,[l])=>{const A=h.id(),y=l.value;return typeof A==typeof y&&A>=y}],"filter-has":[Ai,[Hi],(h,[l])=>l.value in h.properties()],"filter-has-id":[Ai,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Ai,[Vo(er)],(h,[l])=>l.value.indexOf(h.geometryType())>=0],"filter-id-in":[Ai,[Vo(Hi)],(h,[l])=>l.value.indexOf(h.id())>=0],"filter-in-small":[Ai,[er,Vo(Hi)],(h,[l,A])=>A.value.indexOf(h.properties()[l.value])>=0],"filter-in-large":[Ai,[er,Vo(Hi)],(h,[l,A])=>(function(y,_,B,O){for(;B<=O;){const D=B+O>>1;if(_[D]===y)return!0;_[D]>y?O=D-1:B=D+1}return!1})(h.properties()[l.value],A.value,0,A.value.length-1)],all:{type:Ai,overloads:[[[Ai,Ai],(h,[l,A])=>l.evaluate(h)&&A.evaluate(h)],[SA(Ai),(h,l)=>{for(const A of l)if(!A.evaluate(h))return!1;return!0}]]},any:{type:Ai,overloads:[[[Ai,Ai],(h,[l,A])=>l.evaluate(h)||A.evaluate(h)],[SA(Ai),(h,l)=>{for(const A of l)if(A.evaluate(h))return!0;return!1}]]},"!":[Ai,[Ai],(h,[l])=>!l.evaluate(h)],"is-supported-script":[Ai,[er],(h,[l])=>{const A=h.globals&&h.globals.isSupportedScript;return!A||A(l.evaluate(h))}],upcase:[er,[er],(h,[l])=>l.evaluate(h).toUpperCase()],downcase:[er,[er],(h,[l])=>l.evaluate(h).toLowerCase()],concat:[er,SA(Hi),(h,l)=>l.map((A=>Rr(A.evaluate(h)))).join("")],"resolved-locale":[er,[$u],(h,[l])=>l.evaluate(h).resolvedLocale()]});class Yd{constructor(l,A,y){this.expression=l,this._warningHistory={},this._evaluator=new Ti,this._defaultValue=A?(function(_){if(_.type==="color"&&Wm(_.default))return new nr(0,0,0,0);switch(_.type){case"color":return nr.parse(_.default)||null;case"padding":return mo.parse(_.default)||null;case"numberArray":return po.parse(_.default)||null;case"colorArray":return wi.parse(_.default)||null;case"variableAnchorOffsetCollection":return bo.parse(_.default)||null;case"projectionDefinition":return Hr.parse(_.default)||null;default:return _.default===void 0?null:_.default}})(A):null,this._enumValues=A&&A.type==="enum"?A.values:null,this._globalState=y}evaluateWithoutErrorHandling(l,A,y,_,B,O){return this._globalState&&(l=nl(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=A,this._evaluator.featureState=y,this._evaluator.canonical=_,this._evaluator.availableImages=B||null,this._evaluator.formattedSection=O,this.expression.evaluate(this._evaluator)}evaluate(l,A,y,_,B,O){this._globalState&&(l=nl(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=A||null,this._evaluator.featureState=y||null,this._evaluator.canonical=_,this._evaluator.availableImages=B||null,this._evaluator.formattedSection=O||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new ro(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function OA(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in uh}function Qm(h,l,A){const y=new Ni(uh,iu,[],l?(function(B){const O={color:ja,string:er,number:Dn,enum:er,boolean:Ai,formatted:fo,padding:Xa,numberArray:Na,colorArray:El,projectionDefinition:_A,resolvedImage:Lo,variableAnchorOffsetCollection:bc};return B.type==="array"?Vo(O[B.value]||Hi,B.length):O[B.type]})(l):void 0),_=y.parse(h,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Hh(new Yd(_,l,A)):Ah(y.errors)}class Pl{constructor(l,A,y){this.kind=l,this._styleExpression=A,this.isStateDependent=l!=="constant"&&!EA(A.expression),this.globalStateRefs=tl(A.expression),this._globalState=y}evaluateWithoutErrorHandling(l,A,y,_,B,O){return this._globalState&&(l=nl(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,A,y,_,B,O)}evaluate(l,A,y,_,B,O){return this._globalState&&(l=nl(l,this._globalState)),this._styleExpression.evaluate(l,A,y,_,B,O)}}class Xh{constructor(l,A,y,_,B){this.kind=l,this.zoomStops=y,this._styleExpression=A,this.isStateDependent=l!=="camera"&&!EA(A.expression),this.globalStateRefs=tl(A.expression),this.interpolationType=_,this._globalState=B}evaluateWithoutErrorHandling(l,A,y,_,B,O){return this._globalState&&(l=nl(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,A,y,_,B,O)}evaluate(l,A,y,_,B,O){return this._globalState&&(l=nl(l,this._globalState)),this._styleExpression.evaluate(l,A,y,_,B,O)}interpolationFactor(l,A,y){return this.interpolationType?nu.interpolationFactor(this.interpolationType,l,A,y):0}}function Jh(h,l,A){const y=Qm(h,l,A);if(y.result==="error")return y;const _=y.value.expression,B=ch(_);if(!B&&!ru(l))return Ah([new Yo("","data expressions not supported")]);const O=Iu(_,["zoom"]);if(!O&&!c0(l))return Ah([new Yo("","zoom expressions not supported")]);const D=Ws(_);return D||O?D instanceof Yo?Ah([D]):D instanceof nu&&!qd(l)?Ah([new Yo("",'"interpolate" expressions cannot be used with this property')]):Hh(D?new Xh(B?"camera":"composite",y.value,D.labels,D instanceof nu?D.interpolation:void 0,A):new Pl(B?"constant":"source",y.value,A)):Ah([new Yo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class vs{constructor(l,A){this._parameters=l,this._specification=A,rr(this,BA(this._parameters,this._specification))}static deserialize(l){return new vs(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Ws(h){let l=null;if(h instanceof Yn)l=Ws(h.result);else if(h instanceof xA){for(const A of h.args)if(l=Ws(A),l)break}else(h instanceof ps||h instanceof nu)&&h.input instanceof xr&&h.input.name==="zoom"&&(l=h);return l instanceof Yo||h.eachChild((A=>{const y=Ws(A);y instanceof Yo?l=y:!l&&y?l=new Yo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&y&&l!==y&&(l=new Yo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function tl(h,l=new Set){return h instanceof $h&&l.add(h.key),h.eachChild((A=>{tl(A,l)})),l}function nl(h,l){const{zoom:A,heatmapDensity:y,elevation:_,lineProgress:B,isSupportedScript:O,accumulated:D}=h??{};return{zoom:A,heatmapDensity:y,elevation:_,lineProgress:B,isSupportedScript:O,accumulated:D,globalState:l}}function tA(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const l of h.slice(1))if(!tA(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const IA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ul(h,l){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};tA(h)||(h=Ec(h));const A=Qm(h,IA,l);if(A.result==="error")throw new Error(A.value.map((y=>`${y.key}: ${y.message}`)).join(", "));return{filter:(y,_,B)=>A.value.evaluate(y,_,{},B),needGeometry:qm(h),getGlobalStateRefs:()=>tl(A.value.expression)}}function Ju(h,l){return h<l?-1:h>l?1:0}function qm(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let l=1;l<h.length;l++)if(qm(h[l]))return!0;return!1}function Ec(h){if(!h)return!0;const l=h[0];return h.length<=1?l!=="any":l==="=="?TA(h[1],h[2],"=="):l==="!="?uo(TA(h[1],h[2],"==")):l==="<"||l===">"||l==="<="||l===">="?TA(h[1],h[2],l):l==="any"?(A=h.slice(1),["any"].concat(A.map(Ec))):l==="all"?["all"].concat(h.slice(1).map(Ec)):l==="none"?["all"].concat(h.slice(1).map(Ec).map(uo)):l==="in"?Vd(h[1],h.slice(2)):l==="!in"?uo(Vd(h[1],h.slice(2))):l==="has"?ua(h[1]):l!=="!has"||uo(ua(h[1]));var A}function TA(h,l,A){switch(h){case"$type":return[`filter-type-${A}`,l];case"$id":return[`filter-id-${A}`,l];default:return[`filter-${A}`,h,l]}}function Vd(h,l){if(l.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((A=>typeof A!=typeof l[0]))?["filter-in-large",h,["literal",l.sort(Ju)]]:["filter-in-small",h,["literal",l]]}}function ua(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function uo(h){return["!",h]}function Lr(h){const l=typeof h;if(l==="number"||l==="boolean"||l==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let _="[";for(const B of h)_+=`${Lr(B)},`;return`${_}]`}const A=Object.keys(h).sort();let y="{";for(let _=0;_<A.length;_++)y+=`${JSON.stringify(A[_])}:${Lr(h[A[_]])},`;return`${y}}`}function hh(h){let l="";for(const A of xi)l+=`/${Lr(h[A])}`;return l}function ec(h){const l=h.value;return l?[new cn(h.key,l,"constants have been deprecated as of v8")]:[]}function ks(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Tu(h){if(Array.isArray(h))return h.map(Tu);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const l={};for(const A in h)l[A]=Tu(h[A]);return l}return ks(h)}function Ll(h){const l=h.key,A=h.value,y=h.valueSpec||{},_=h.objectElementValidators||{},B=h.style,O=h.styleSpec,D=h.validateSpec;let F=[];const W=lr(A);if(W!=="object")return[new cn(l,A,`object expected, ${W} found`)];for(const te in A){const ae=te.split(".")[0],he=ms(y,ae)||y["*"];let me;if(ms(_,ae))me=_[ae];else if(ms(y,ae))me=D;else if(_["*"])me=_["*"];else{if(!y["*"]){F.push(new cn(l,A[te],`unknown property "${te}"`));continue}me=D}F=F.concat(me({key:(l&&`${l}.`)+te,value:A[te],valueSpec:he,style:B,styleSpec:O,object:A,objectKey:te,validateSpec:D},A))}for(const te in y)_[te]||y[te].required&&y[te].default===void 0&&A[te]===void 0&&F.push(new cn(l,A,`missing required property "${te}"`));return F}function dh(h){const l=h.value,A=h.valueSpec,y=h.style,_=h.styleSpec,B=h.key,O=h.arrayElementValidator||h.validateSpec;if(lr(l)!=="array")return[new cn(B,l,`array expected, ${lr(l)} found`)];if(A.length&&l.length!==A.length)return[new cn(B,l,`array length ${A.length} expected, length ${l.length} found`)];if(A["min-length"]&&l.length<A["min-length"])return[new cn(B,l,`array length at least ${A["min-length"]} expected, length ${l.length} found`)];let D={type:A.value,values:A.values};_.$version<7&&(D.function=A.function),lr(A.value)==="object"&&(D=A.value);let F=[];for(let W=0;W<l.length;W++)F=F.concat(O({array:l,arrayIndex:W,value:l[W],valueSpec:D,validateSpec:h.validateSpec,style:y,styleSpec:_,key:`${B}[${W}]`}));return F}function nA(h){const l=h.key,A=h.value,y=h.valueSpec;let _=lr(A);return _==="number"&&A!=A&&(_="NaN"),_!=="number"?[new cn(l,A,`number expected, ${_} found`)]:"minimum"in y&&A<y.minimum?[new cn(l,A,`${A} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&A>y.maximum?[new cn(l,A,`${A} is greater than the maximum value ${y.maximum}`)]:[]}function Qe(h){const l=h.valueSpec,A=ks(h.value.type);let y,_,B,O={};const D=A!=="categorical"&&h.value.property===void 0,F=!D,W=lr(h.value.stops)==="array"&&lr(h.value.stops[0])==="array"&&lr(h.value.stops[0][0])==="object",te=Ll({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(me){if(A==="identity")return[new cn(me.key,me.value,'identity function may not have a "stops" property')];let be=[];const we=me.value;return be=be.concat(dh({key:me.key,value:we,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:ae})),lr(we)==="array"&&we.length===0&&be.push(new cn(me.key,we,"array must have at least one stop")),be},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:l,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return A==="identity"&&D&&te.push(new cn(h.key,h.value,'missing required property "property"')),A==="identity"||h.value.stops||te.push(new cn(h.key,h.value,'missing required property "stops"')),A==="exponential"&&h.valueSpec.expression&&!qd(h.valueSpec)&&te.push(new cn(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(F&&!ru(h.valueSpec)?te.push(new cn(h.key,h.value,"property functions not supported")):D&&!c0(h.valueSpec)&&te.push(new cn(h.key,h.value,"zoom functions not supported"))),A!=="categorical"&&!W||h.value.property!==void 0||te.push(new cn(h.key,h.value,'"property" property is required')),te;function ae(me){let be=[];const we=me.value,Ie=me.key;if(lr(we)!=="array")return[new cn(Ie,we,`array expected, ${lr(we)} found`)];if(we.length!==2)return[new cn(Ie,we,`array length 2 expected, length ${we.length} found`)];if(W){if(lr(we[0])!=="object")return[new cn(Ie,we,`object expected, ${lr(we[0])} found`)];if(we[0].zoom===void 0)return[new cn(Ie,we,"object stop key must have zoom")];if(we[0].value===void 0)return[new cn(Ie,we,"object stop key must have value")];if(B&&B>ks(we[0].zoom))return[new cn(Ie,we[0].zoom,"stop zoom values must appear in ascending order")];ks(we[0].zoom)!==B&&(B=ks(we[0].zoom),_=void 0,O={}),be=be.concat(Ll({key:`${Ie}[0]`,value:we[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:nA,value:he}}))}else be=be.concat(he({key:`${Ie}[0]`,value:we[0],validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},we));return OA(Tu(we[1]))?be.concat([new cn(`${Ie}[1]`,we[1],"expressions are not allowed in function stops.")]):be.concat(me.validateSpec({key:`${Ie}[1]`,value:we[1],valueSpec:l,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function he(me,be){const we=lr(me.value),Ie=ks(me.value),ze=me.value!==null?me.value:be;if(y){if(we!==y)return[new cn(me.key,ze,`${we} stop domain type must match previous stop domain type ${y}`)]}else y=we;if(we!=="number"&&we!=="string"&&we!=="boolean")return[new cn(me.key,ze,"stop domain value must be a number, string, or boolean")];if(we!=="number"&&A!=="categorical"){let ct=`number expected, ${we} found`;return ru(l)&&A===void 0&&(ct+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new cn(me.key,ze,ct)]}return A!=="categorical"||we!=="number"||isFinite(Ie)&&Math.floor(Ie)===Ie?A!=="categorical"&&we==="number"&&_!==void 0&&Ie<_?[new cn(me.key,ze,"stop domain values must appear in ascending order")]:(_=Ie,A==="categorical"&&Ie in O?[new cn(me.key,ze,"stop domain values must be unique")]:(O[Ie]=!0,[])):[new cn(me.key,ze,`integer expected, found ${Ie}`)]}}function ou(h){const l=(h.expressionContext==="property"?Jh:Qm)(Tu(h.value),h.valueSpec);if(l.result==="error")return l.value.map((y=>new cn(`${h.key}${y.key}`,h.value,y.message)));const A=l.value.expression||l.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!A.outputDefined())return[new cn(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!EA(A))return[new cn(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!EA(A))return[new cn(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Iu(A,["zoom","feature-state"]))return[new cn(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!ch(A))return[new cn(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bc(h){const l=h.key,A=h.value,y=lr(A);return y!=="string"?[new cn(l,A,`color expected, ${y} found`)]:nr.parse(String(A))?[]:[new cn(l,A,`color expected, "${A}" found`)]}function Sa(h){const l=h.key,A=h.value,y=h.valueSpec,_=[];return Array.isArray(y.values)?y.values.indexOf(ks(A))===-1&&_.push(new cn(l,A,`expected one of [${y.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(y.values).indexOf(ks(A))===-1&&_.push(new cn(l,A,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(A)} found`)),_}function hr(h){return tA(Tu(h.value))?ou(rr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):kA(h)}function kA(h){const l=h.value,A=h.key;if(lr(l)!=="array")return[new cn(A,l,`array expected, ${lr(l)} found`)];const y=h.styleSpec;let _,B=[];if(l.length<1)return[new cn(A,l,"filter array must have at least 1 element")];switch(B=B.concat(Sa({key:`${A}[0]`,value:l[0],valueSpec:y.filter_operator,style:h.style,styleSpec:h.styleSpec})),ks(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&ks(l[1])==="$type"&&B.push(new cn(A,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&B.push(new cn(A,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=lr(l[1]),_!=="string"&&B.push(new cn(`${A}[1]`,l[1],`string expected, ${_} found`)));for(let O=2;O<l.length;O++)_=lr(l[O]),ks(l[1])==="$type"?B=B.concat(Sa({key:`${A}[${O}]`,value:l[O],valueSpec:y.geometry_type,style:h.style,styleSpec:h.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&B.push(new cn(`${A}[${O}]`,l[O],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let O=1;O<l.length;O++)B=B.concat(kA({key:`${A}[${O}]`,value:l[O],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":_=lr(l[1]),l.length!==2?B.push(new cn(A,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&B.push(new cn(`${A}[1]`,l[1],`string expected, ${_} found`))}return B}function fh(h,l){const A=h.key,y=h.validateSpec,_=h.style,B=h.styleSpec,O=h.value,D=h.objectKey,F=B[`${l}_${h.layerType}`];if(!F)return[];const W=D.match(/^(.*)-transition$/);if(l==="paint"&&W&&F[W[1]]&&F[W[1]].transition)return y({key:A,value:O,valueSpec:B.transition,style:_,styleSpec:B});const te=h.valueSpec||F[D];if(!te)return[new cn(A,O,`unknown property "${D}"`)];let ae;if(lr(O)==="string"&&ru(te)&&!te.tokens&&(ae=/^{([^}]+)}$/.exec(O)))return[new cn(A,O,`"${D}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ae[1])} }\`.`)];const he=[];return h.layerType==="symbol"&&D==="text-font"&&Wm(Tu(O))&&ks(O.type)==="identity"&&he.push(new cn(A,O,'"text-font" does not support identity functions')),he.concat(y({key:h.key,value:O,valueSpec:te,style:_,styleSpec:B,expressionContext:"property",propertyType:l,propertyKey:D}))}function DA(h){return fh(h,"paint")}function RA(h){return fh(h,"layout")}function h0(h){let l=[];const A=h.value,y=h.key,_=h.style,B=h.styleSpec;if(lr(A)!=="object")return[new cn(y,A,`object expected, ${lr(A)} found`)];A.type||A.ref||l.push(new cn(y,A,'either "type" or "ref" is required'));let O=ks(A.type);const D=ks(A.ref);if(A.id){const F=ks(A.id);for(let W=0;W<h.arrayIndex;W++){const te=_.layers[W];ks(te.id)===F&&l.push(new cn(y,A.id,`duplicate layer id "${A.id}", previously used at line ${te.id.__line__}`))}}if("ref"in A){let F;["type","source","source-layer","filter","layout"].forEach((W=>{W in A&&l.push(new cn(y,A[W],`"${W}" is prohibited for ref layers`))})),_.layers.forEach((W=>{ks(W.id)===D&&(F=W)})),F?F.ref?l.push(new cn(y,A.ref,"ref cannot reference another ref layer")):O=ks(F.type):l.push(new cn(y,A.ref,`ref layer "${D}" not found`))}else if(O!=="background")if(A.source){const F=_.sources&&_.sources[A.source],W=F&&ks(F.type);F?W==="vector"&&O==="raster"?l.push(new cn(y,A.source,`layer "${A.id}" requires a raster source`)):W!=="raster-dem"&&O==="hillshade"||W!=="raster-dem"&&O==="color-relief"?l.push(new cn(y,A.source,`layer "${A.id}" requires a raster-dem source`)):W==="raster"&&O!=="raster"?l.push(new cn(y,A.source,`layer "${A.id}" requires a vector source`)):W!=="vector"||A["source-layer"]?W==="raster-dem"&&O!=="hillshade"&&O!=="color-relief"?l.push(new cn(y,A.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):O!=="line"||!A.paint||!A.paint["line-gradient"]||W==="geojson"&&F.lineMetrics||l.push(new cn(y,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new cn(y,A,`layer "${A.id}" must specify a "source-layer"`)):l.push(new cn(y,A.source,`source "${A.source}" not found`))}else l.push(new cn(y,A,'missing required property "source"'));return l=l.concat(Ll({key:y,value:A,valueSpec:B.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${y}.type`,value:A.type,valueSpec:B.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:A,objectKey:"type"}),filter:hr,layout:F=>Ll({layer:A,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":W=>RA(rr({layerType:O},W))}}),paint:F=>Ll({layer:A,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":W=>DA(rr({layerType:O},W))}})}})),l}function Oc(h){const l=h.value,A=h.key,y=lr(l);return y!=="string"?[new cn(A,l,`string expected, ${y} found`)]:[]}const Kf={promoteId:function({key:h,value:l}){if(lr(l)==="string")return Oc({key:h,value:l});{const A=[];for(const y in l)A.push(...Oc({key:`${h}.${y}`,value:l[y]}));return A}}};function mh(h){const l=h.value,A=h.key,y=h.styleSpec,_=h.style,B=h.validateSpec;if(!l.type)return[new cn(A,l,'"type" is required')];const O=ks(l.type);let D;switch(O){case"vector":case"raster":return D=Ll({key:A,value:l,valueSpec:y[`source_${O.replace("-","_")}`],style:h.style,styleSpec:y,objectElementValidators:Kf,validateSpec:B}),D;case"raster-dem":return D=(function(F){var W;const te=(W=F.sourceName)!==null&&W!==void 0?W:"",ae=F.value,he=F.styleSpec,me=he.source_raster_dem,be=F.style;let we=[];const Ie=lr(ae);if(ae===void 0)return we;if(Ie!=="object")return we.push(new cn("source_raster_dem",ae,`object expected, ${Ie} found`)),we;const ze=ks(ae.encoding)==="custom",ct=["redFactor","greenFactor","blueFactor","baseShift"],Ge=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const Ze in ae)!ze&&ct.includes(Ze)?we.push(new cn(Ze,ae[Ze],`In "${te}": "${Ze}" is only valid when "encoding" is set to "custom". ${Ge} encoding found`)):me[Ze]?we=we.concat(F.validateSpec({key:Ze,value:ae[Ze],valueSpec:me[Ze],validateSpec:F.validateSpec,style:be,styleSpec:he})):we.push(new cn(Ze,ae[Ze],`unknown property "${Ze}"`));return we})({sourceName:A,value:l,style:h.style,styleSpec:y,validateSpec:B}),D;case"geojson":if(D=Ll({key:A,value:l,valueSpec:y.source_geojson,style:_,styleSpec:y,validateSpec:B,objectElementValidators:Kf}),l.cluster)for(const F in l.clusterProperties){const[W,te]=l.clusterProperties[F],ae=typeof W=="string"?[W,["accumulated"],["get",F]]:W;D.push(...ou({key:`${A}.${F}.map`,value:te,expressionContext:"cluster-map"})),D.push(...ou({key:`${A}.${F}.reduce`,value:ae,expressionContext:"cluster-reduce"}))}return D;case"video":return Ll({key:A,value:l,valueSpec:y.source_video,style:_,validateSpec:B,styleSpec:y});case"image":return Ll({key:A,value:l,valueSpec:y.source_image,style:_,validateSpec:B,styleSpec:y});case"canvas":return[new cn(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Sa({key:`${A}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ca(h){const l=h.value,A=h.styleSpec,y=A.light,_=h.style;let B=[];const O=lr(l);if(l===void 0)return B;if(O!=="object")return B=B.concat([new cn("light",l,`object expected, ${O} found`)]),B;for(const D in l){const F=D.match(/^(.*)-transition$/);B=B.concat(F&&y[F[1]]&&y[F[1]].transition?h.validateSpec({key:D,value:l[D],valueSpec:A.transition,validateSpec:h.validateSpec,style:_,styleSpec:A}):y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],validateSpec:h.validateSpec,style:_,styleSpec:A}):[new cn(D,l[D],`unknown property "${D}"`)])}return B}function tc(h){const l=h.value,A=h.styleSpec,y=A.sky,_=h.style,B=lr(l);if(l===void 0)return[];if(B!=="object")return[new cn("sky",l,`object expected, ${B} found`)];let O=[];for(const D in l)O=O.concat(y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],style:_,styleSpec:A}):[new cn(D,l[D],`unknown property "${D}"`)]);return O}function d0(h){const l=h.value,A=h.styleSpec,y=A.terrain,_=h.style;let B=[];const O=lr(l);if(l===void 0)return B;if(O!=="object")return B=B.concat([new cn("terrain",l,`object expected, ${O} found`)]),B;for(const D in l)B=B.concat(y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],validateSpec:h.validateSpec,style:_,styleSpec:A}):[new cn(D,l[D],`unknown property "${D}"`)]);return B}function Fg(h){let l=[];const A=h.value,y=h.key;if(Array.isArray(A)){const _=[],B=[];for(const O in A)A[O].id&&_.includes(A[O].id)&&l.push(new cn(y,A,`all the sprites' ids must be unique, but ${A[O].id} is duplicated`)),_.push(A[O].id),A[O].url&&B.includes(A[O].url)&&l.push(new cn(y,A,`all the sprites' URLs must be unique, but ${A[O].url} is duplicated`)),B.push(A[O].url),l=l.concat(Ll({key:`${y}[${O}]`,value:A[O],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return l}return Oc({key:y,value:A})}function sy(h){return l=h.value,l&&l.constructor===Object?[]:[new cn(h.key,h.value,`object expected, ${lr(h.value)} found`)];var l}const zg={"*":()=>[],array:dh,boolean:function(h){const l=h.value,A=h.key,y=lr(l);return y!=="boolean"?[new cn(A,l,`boolean expected, ${y} found`)]:[]},number:nA,color:Bc,constants:ec,enum:Sa,filter:hr,function:Qe,layer:h0,object:Ll,source:mh,light:ca,sky:tc,terrain:d0,projection:function(h){const l=h.value,A=h.styleSpec,y=A.projection,_=h.style,B=lr(l);if(l===void 0)return[];if(B!=="object")return[new cn("projection",l,`object expected, ${B} found`)];let O=[];for(const D in l)O=O.concat(y[D]?h.validateSpec({key:D,value:l[D],valueSpec:y[D],style:_,styleSpec:A}):[new cn(D,l[D],`unknown property "${D}"`)]);return O},projectionDefinition:function(h){const l=h.key;let A=h.value;A=A instanceof String?A.valueOf():A;const y=lr(A);return y!=="array"||(function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"})(A)||(function(_){return!!["interpolate","step","literal"].includes(_[0])})(A)?["array","string"].includes(y)?[]:[new cn(l,A,`projection expected, invalid type "${y}" found`)]:[new cn(l,A,`projection expected, invalid array ${JSON.stringify(A)} found`)]},string:Oc,formatted:function(h){return Oc(h).length===0?[]:ou(h)},resolvedImage:function(h){return Oc(h).length===0?[]:ou(h)},padding:function(h){const l=h.key,A=h.value;if(lr(A)==="array"){if(A.length<1||A.length>4)return[new cn(l,A,`padding requires 1 to 4 values; ${A.length} values found`)];const y={type:"number"};let _=[];for(let B=0;B<A.length;B++)_=_.concat(h.validateSpec({key:`${l}[${B}]`,value:A[B],validateSpec:h.validateSpec,valueSpec:y}));return _}return nA({key:l,value:A,valueSpec:{}})},numberArray:function(h){const l=h.key,A=h.value;if(lr(A)==="array"){const y={type:"number"};if(A.length<1)return[new cn(l,A,"array length at least 1 expected, length 0 found")];let _=[];for(let B=0;B<A.length;B++)_=_.concat(h.validateSpec({key:`${l}[${B}]`,value:A[B],validateSpec:h.validateSpec,valueSpec:y}));return _}return nA({key:l,value:A,valueSpec:{}})},colorArray:function(h){const l=h.key,A=h.value;if(lr(A)==="array"){if(A.length<1)return[new cn(l,A,"array length at least 1 expected, length 0 found")];let y=[];for(let _=0;_<A.length;_++)y=y.concat(Bc({key:`${l}[${_}]`,value:A[_]}));return y}return Bc({key:l,value:A})},variableAnchorOffsetCollection:function(h){const l=h.key,A=h.value,y=lr(A),_=h.styleSpec;if(y!=="array"||A.length<1||A.length%2!=0)return[new cn(l,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let B=[];for(let O=0;O<A.length;O+=2)B=B.concat(Sa({key:`${l}[${O}]`,value:A[O],valueSpec:_.layout_symbol["text-anchor"]})),B=B.concat(dh({key:`${l}[${O+1}]`,value:A[O+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:_}));return B},sprite:Fg,state:sy};function Ds(h){const l=h.value,A=h.valueSpec,y=h.styleSpec;return h.validateSpec=Ds,A.expression&&Wm(ks(l))?Qe(h):A.expression&&OA(Tu(l))?ou(h):A.type&&zg[A.type]?zg[A.type](h):Ll(rr({},h,{valueSpec:A.type?y[A.type]:A}))}function Kl(h){const l=h.value,A=h.key,y=Oc(h);return y.length||(l.indexOf("{fontstack}")===-1&&y.push(new cn(A,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&y.push(new cn(A,l,'"glyphs" url must include a "{range}" token'))),y}function Fl(h,l=Mt){let A=[];return A=A.concat(Ds({key:"",value:h,valueSpec:l.$root,styleSpec:l,style:h,validateSpec:Ds,objectElementValidators:{glyphs:Kl,"*":()=>[]}})),h.constants&&(A=A.concat(ec({key:"constants",value:h.constants}))),f0(A)}function su(h){return function(l){return h(Object.assign({},l,{validateSpec:Ds}))}}function f0(h){return[].concat(h).sort(((l,A)=>l.line-A.line))}function zl(h){return function(...l){return f0(h.apply(this,l))}}Fl.source=zl(su(mh)),Fl.sprite=zl(su(Fg)),Fl.glyphs=zl(su(Kl)),Fl.light=zl(su(ca)),Fl.sky=zl(su(tc)),Fl.terrain=zl(su(d0)),Fl.state=zl(su(sy)),Fl.layer=zl(su(h0)),Fl.filter=zl(su(hr)),Fl.paintProperty=zl(su(DA)),Fl.layoutProperty=zl(su(RA));const Ff=Mt,Ic=Fl,zf=Ic.light,Ym=Ic.sky,Rs=Ic.paintProperty,iA=Ic.layoutProperty;function Vm(h,l){let A=!1;if(l&&l.length)for(const y of l)h.fire(new bn(new Error(y.message))),A=!0;return A}class ed{constructor(l,A,y){const _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const O=new Int32Array(this.arrayBuffer);l=O[0],this.d=(A=O[1])+2*(y=O[2]);for(let F=0;F<this.d*this.d;F++){const W=O[3+F],te=O[3+F+1];_.push(W===te?null:O.subarray(W,te))}const D=O[3+_.length+1];this.keys=O.subarray(O[3+_.length],D),this.bboxes=O.subarray(D),this.insert=this._insertReadonly}else{this.d=A+2*y;for(let O=0;O<this.d*this.d;O++)_.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=l,this.padding=y,this.scale=A/l,this.uid=0;const B=y/A*l;this.min=-B,this.max=l+B}insert(l,A,y,_,B){this._forEachCell(A,y,_,B,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(A),this.bboxes.push(y),this.bboxes.push(_),this.bboxes.push(B)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,A,y,_,B,O){this.cells[B].push(O)}query(l,A,y,_,B){const O=this.min,D=this.max;if(l<=O&&A<=O&&D<=y&&D<=_&&!B)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(l,A,y,_,this._queryCell,F,{},B),F}}_queryCell(l,A,y,_,B,O,D,F){const W=this.cells[B];if(W!==null){const te=this.keys,ae=this.bboxes;for(let he=0;he<W.length;he++){const me=W[he];if(D[me]===void 0){const be=4*me;(F?F(ae[be+0],ae[be+1],ae[be+2],ae[be+3]):l<=ae[be+2]&&A<=ae[be+3]&&y>=ae[be+0]&&_>=ae[be+1])?(D[me]=!0,O.push(te[me])):D[me]=!1}}}}_forEachCell(l,A,y,_,B,O,D,F){const W=this._convertToCellCoord(l),te=this._convertToCellCoord(A),ae=this._convertToCellCoord(y),he=this._convertToCellCoord(_);for(let me=W;me<=ae;me++)for(let be=te;be<=he;be++){const we=this.d*be+me;if((!F||F(this._convertFromCellCoord(me),this._convertFromCellCoord(be),this._convertFromCellCoord(me+1),this._convertFromCellCoord(be+1)))&&B.call(this,l,A,y,_,we,O,D,F))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,A=3+this.cells.length+1+1;let y=0;for(let O=0;O<this.cells.length;O++)y+=this.cells[O].length;const _=new Int32Array(A+y+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let B=A;for(let O=0;O<l.length;O++){const D=l[O];_[3+O]=B,_.set(D,B),B+=D.length}return _[3+l.length]=B,_.set(this.keys,B),B+=this.keys.length,_[3+l.length+1]=B,_.set(this.bboxes,B),B+=this.bboxes.length,_.buffer}static serialize(l,A){const y=l.toArrayBuffer();return A&&A.push(y),{buffer:y}}static deserialize(l){return new ed(l.buffer)}}const PA={};function jn(h,l,A={}){if(PA[h])throw new Error(`${h} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:h,writeable:!1}),PA[h]={klass:l,omit:A.omit||[],shallow:A.shallow||[]}}jn("Object",Object),jn("Set",Set),jn("TransferableGridIndex",ed),jn("Color",nr),jn("Error",Error),jn("AJAXError",it),jn("ResolvedImage",Ns),jn("StylePropertyFunction",vs),jn("StyleExpression",Yd,{omit:["_evaluator"]}),jn("ZoomDependentExpression",Xh),jn("ZoomConstantExpression",Pl),jn("CompoundExpression",xr,{omit:["_evaluate"]});for(const h in uh)uh[h]._classRegistryKey||jn(`Expression_${h}`,uh[h]);function jf(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function ph(h){return h.$name||h.constructor._classRegistryKey}function $m(h){return!(function(l){if(l===null||typeof l!="object")return!1;const A=ph(l);return!(!A||A==="Object")})(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||jf(h)||Kn(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function td(h,l){if($m(h))return(jf(h)||Kn(h))&&l&&l.push(h),ArrayBuffer.isView(h)&&l&&l.push(h.buffer),h instanceof ImageData&&l&&l.push(h.data.buffer),h;if(Array.isArray(h)){const B=[];for(const O of h)B.push(td(O,l));return B}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const A=ph(h);if(!A)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!PA[A])throw new Error(`${A} is not registered.`);const{klass:y}=PA[A],_=y.serialize?y.serialize(h,l):{};if(y.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const B in h){if(!h.hasOwnProperty(B)||PA[A].omit.indexOf(B)>=0)continue;const O=h[B];_[B]=PA[A].shallow.indexOf(B)>=0?O:td(O,l)}h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(_.$name=A),_}function nd(h){if($m(h))return h;if(Array.isArray(h))return h.map(nd);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const l=ph(h)||"Object";if(!PA[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:A}=PA[l];if(!A)throw new Error(`can't deserialize unregistered class ${l}`);if(A.deserialize)return A.deserialize(h);const y=Object.create(A.prototype);for(const _ of Object.keys(h)){if(_==="$name")continue;const B=h[_];y[_]=PA[l].shallow.indexOf(_)>=0?B:nd(B)}return y}class ml{constructor(){this.first=!0}update(l,A){const y=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=A),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=y,!0))}}function UA(h){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(h))}function m0(h){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(h))}function p0(h){return/\s/u.test(String.fromCodePoint(h))}function Tc(h){for(const l of h)if(m0(l.codePointAt(0)))return!0;return!1}function nc(h){for(const l of h)if(!au(l.codePointAt(0)))return!1;return!0}function $d(h){const l=h.map((A=>{try{return new RegExp(`\\p{sc=${A}}`,"u").source}catch{return null}})).filter((A=>A));return new RegExp(l.join("|"),"u")}const ku=$d(["Arab","Dupl","Mong","Ougr","Syrc"]);function au(h){return!ku.test(String.fromCodePoint(h))}function Hm(h){return!(m0(h)||(l=h,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(l))));var l}const rA=$d(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Zm(h){return rA.test(String.fromCodePoint(h))}function ic(h,l){return!(!l&&Zm(h)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(h)))}function oA(h){for(const l of h)if(Zm(l.codePointAt(0)))return!0;return!1}const kc=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(kc.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,l){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const A=h.pluginURL,y=new Promise((B=>{this.loadScriptResolve=B}));l(A);const _=new Promise((B=>setTimeout((()=>B()),this.TIMEOUT)));if(yield Promise.race([y,_]),this.isParsed()){const B={pluginStatus:"loaded",pluginURL:A};return this.setState(B),B}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${A}`)}))}};class Gr{constructor(l,A){this.isSupportedScript=Dc,this.zoom=l,A?(this.now=A.now||0,this.fadeDuration=A.fadeDuration||0,this.zoomHistory=A.zoomHistory||new ml,this.transition=A.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ml,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,A=l-Math.floor(l),y=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*A}}}function Dc(h){return(function(l,A){for(const y of l)if(!ic(y.codePointAt(0),A))return!1;return!0})(h,kc.getRTLTextPluginStatus()==="loaded")}const id="-transition";class rd{constructor(l,A,y){this.property=l,this.value=A,this.expression=(function(_,B,O){if(Wm(_))return new vs(_,B);if(OA(_)){const D=Jh(_,B,O);if(D.result==="error")throw new Error(D.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return D.value}{let D=_;return B.type==="color"&&typeof _=="string"?D=nr.parse(_):B.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?B.type!=="numberArray"||typeof _!="number"&&!Array.isArray(_)?B.type!=="colorArray"||typeof _!="string"&&!Array.isArray(_)?B.type==="variableAnchorOffsetCollection"&&Array.isArray(_)?D=bo.parse(_):B.type==="projectionDefinition"&&typeof _=="string"&&(D=Hr.parse(_)):D=wi.parse(_):D=po.parse(_):D=mo.parse(_),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>D}}})(A===void 0?l.specification.default:A,l.specification,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,A,y){return this.property.possiblyEvaluate(this,l,A,y)}}class Aa{constructor(l,A){this.property=l,this.value=new rd(l,void 0,A)}transitioned(l,A){return new Hd(this.property,this.value,A,Ue({},l.transition,this.transition),l.now)}untransitioned(){return new Hd(this.property,this.value,null,{},0)}}class gh{constructor(l,A){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=A}getValue(l){return Ct(this._values[l].value.value)}setValue(l,A){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Aa(this._values[l].property,this._globalState)),this._values[l].value=new rd(this._values[l].property,A===null?void 0:Ct(A),this._globalState)}getTransition(l){return Ct(this._values[l].transition)}setTransition(l,A){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Aa(this._values[l].property,this._globalState)),this._values[l].transition=Ct(A)||void 0}serialize(){const l={};for(const A of Object.keys(this._values)){const y=this.getValue(A);y!==void 0&&(l[A]=y);const _=this.getTransition(A);_!==void 0&&(l[`${A}${id}`]=_)}return l}transitioned(l,A){const y=new rc(this._properties);for(const _ of Object.keys(this._values))y._values[_]=this._values[_].transitioned(l,A._values[_]);return y}untransitioned(){const l=new rc(this._properties);for(const A of Object.keys(this._values))l._values[A]=this._values[A].untransitioned();return l}}class Hd{constructor(l,A,y,_,B){this.property=l,this.value=A,this.begin=B+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=y)}possiblyEvaluate(l,A,y){const _=l.now||0,B=this.value.possiblyEvaluate(l,A,y),O=this.prior;if(O){if(_>this.end)return this.prior=null,B;if(this.value.isDataDriven())return this.prior=null,B;if(_<this.begin)return O.possiblyEvaluate(l,A,y);{const D=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(O.possiblyEvaluate(l,A,y),B,Ke(D))}}return B}}class rc{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,A,y){const _=new oc(this._properties);for(const B of Object.keys(this._values))_._values[B]=this._values[B].possiblyEvaluate(l,A,y);return _}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Xm{constructor(l,A){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=A}hasValue(l){return this._values[l].value!==void 0}getValue(l){return Ct(this._values[l].value)}setValue(l,A){this._values[l]=new rd(this._values[l].property,A===null?void 0:Ct(A),this._globalState)}serialize(){const l={};for(const A of Object.keys(this._values)){const y=this.getValue(A);y!==void 0&&(l[A]=y)}return l}possiblyEvaluate(l,A,y){const _=new oc(this._properties);for(const B of Object.keys(this._values))_._values[B]=this._values[B].possiblyEvaluate(l,A,y);return _}}class il{constructor(l,A,y){this.property=l,this.value=A,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,A,y,_){return this.property.evaluate(this.value,this.parameters,l,A,y,_)}}class oc{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class mi{constructor(l){this.specification=l}possiblyEvaluate(l,A){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(A)}interpolate(l,A,y){const _=_o[this.specification.type];return _?_(l,A,y):l}}class li{constructor(l,A){this.specification=l,this.overrides=A}possiblyEvaluate(l,A,y,_){return new il(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(A,null,{},y,_)}:l.expression,A)}interpolate(l,A,y){if(l.value.kind!=="constant"||A.value.kind!=="constant")return l;if(l.value.value===void 0||A.value.value===void 0)return new il(this,{kind:"constant",value:void 0},l.parameters);const _=_o[this.specification.type];if(_){const B=_(l.value.value,A.value.value,y);return new il(this,{kind:"constant",value:B},l.parameters)}return l}evaluate(l,A,y,_,B,O){return l.kind==="constant"?l.value:l.evaluate(A,y,_,B,O)}}class LA extends li{possiblyEvaluate(l,A,y,_){if(l.value===void 0)return new il(this,{kind:"constant",value:void 0},A);if(l.expression.kind==="constant"){const B=l.expression.evaluate(A,null,{},y,_),O=l.property.specification.type==="resolvedImage"&&typeof B!="string"?B.name:B,D=this._calculate(O,O,O,A);return new il(this,{kind:"constant",value:D},A)}if(l.expression.kind==="camera"){const B=this._calculate(l.expression.evaluate({zoom:A.zoom-1}),l.expression.evaluate({zoom:A.zoom}),l.expression.evaluate({zoom:A.zoom+1}),A);return new il(this,{kind:"constant",value:B},A)}return new il(this,l.expression,A)}evaluate(l,A,y,_,B,O){if(l.kind==="source"){const D=l.evaluate(A,y,_,B,O);return this._calculate(D,D,D,A)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(A.zoom)-1},y,_),l.evaluate({zoom:Math.floor(A.zoom)},y,_),l.evaluate({zoom:Math.floor(A.zoom)+1},y,_),A):l.value}_calculate(l,A,y,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:A}:{from:y,to:A}}interpolate(l){return l}}class lu{constructor(l){this.specification=l}possiblyEvaluate(l,A,y,_){if(l.value!==void 0){if(l.expression.kind==="constant"){const B=l.expression.evaluate(A,null,{},y,_);return this._calculate(B,B,B,A)}return this._calculate(l.expression.evaluate(new Gr(Math.floor(A.zoom-1),A)),l.expression.evaluate(new Gr(Math.floor(A.zoom),A)),l.expression.evaluate(new Gr(Math.floor(A.zoom+1),A)),A)}}_calculate(l,A,y,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:A}:{from:y,to:A}}interpolate(l){return l}}class rl{constructor(l){this.specification=l}possiblyEvaluate(l,A,y,_){return!!l.expression.evaluate(A,null,{},y,_)}interpolate(){return!1}}class Js{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in l){const y=l[A];y.specification.overridable&&this.overridableProperties.push(A);const _=this.defaultPropertyValues[A]=new rd(y,void 0,void 0),B=this.defaultTransitionablePropertyValues[A]=new Aa(y,void 0);this.defaultTransitioningPropertyValues[A]=B.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=_.possiblyEvaluate({})}}}jn("DataDrivenProperty",li),jn("DataConstantProperty",mi),jn("CrossFadedDataDrivenProperty",LA),jn("CrossFadedProperty",lu),jn("ColorRampProperty",rl);class pl extends _n{constructor(l,A,y){if(super(),this.id=l.id,this.type=l.type,this._globalState=y,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=Ul(l.filter,y)),A.layout&&(this._unevaluatedLayout=new Xm(A.layout,y)),A.paint)){this._transitionablePaint=new gh(A.paint,y);for(const _ in l.paint)this.setPaintProperty(_,l.paint[_],{validate:!1});for(const _ in l.layout)this.setLayoutProperty(_,l.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new oc(A.paint)}}setFilter(l){this.filter=l,this._featureFilter=Ul(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;if(this._unevaluatedLayout)for(const A in this._unevaluatedLayout._values){const y=this._unevaluatedLayout._values[A];for(const _ of y.getGlobalStateRefs())l.add(_)}for(const A of this._featureFilter.getGlobalStateRefs())l.add(A);return l}getPaintAffectingGlobalStateRefs(){var l;const A=new globalThis.Map;if(this._transitionablePaint)for(const y in this._transitionablePaint._values){const _=this._transitionablePaint._values[y].value;for(const B of _.getGlobalStateRefs()){const O=(l=A.get(B))!==null&&l!==void 0?l:[];O.push({name:y,value:_.value}),A.set(B,O)}}return A}setLayoutProperty(l,A,y={}){A!=null&&this._validate(iA,`layers.${this.id}.layout.${l}`,l,A,y)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,A):this.visibility=A)}getPaintProperty(l){return l.endsWith(id)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,A,y={}){if(A!=null&&this._validate(Rs,`layers.${this.id}.paint.${l}`,l,A,y))return!1;if(l.endsWith(id))return this._transitionablePaint.setTransition(l.slice(0,-11),A||void 0),!1;{const _=this._transitionablePaint._values[l],B=_.property.specification["property-type"]==="cross-faded-data-driven",O=_.value.isDataDriven(),D=_.value;this._transitionablePaint.setValue(l,A),this._handleSpecialPaintPropertyUpdate(l);const F=this._transitionablePaint._values[l].value;return F.isDataDriven()||O||B||this._handleOverridablePaintPropertyUpdate(l,D,F)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,A,y){return!1}isHidden(l,A=!1){return!!(this.minzoom&&l<(A?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,A){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,A)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),He(l,((A,y)=>!(A===void 0||y==="layout"&&!Object.keys(A).length||y==="paint"&&!Object.keys(A).length)))}_validate(l,A,y,_,B={}){return(!B||B.validate!==!1)&&Vm(this,l.call(Ic,{key:A,layerType:this.type,objectKey:y,value:_,styleSpec:Mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const A=this.paint.get(l);if(A instanceof il&&ru(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}let jg;var Rc={get paint(){return jg=jg||new Js({"raster-opacity":new mi(Mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new mi(Mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mi(Mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mi(Mt.paint_raster["raster-brightness-max"]),"raster-saturation":new mi(Mt.paint_raster["raster-saturation"]),"raster-contrast":new mi(Mt.paint_raster["raster-contrast"]),"raster-resampling":new mi(Mt.paint_raster["raster-resampling"]),"raster-fade-duration":new mi(Mt.paint_raster["raster-fade-duration"])})}};class uu extends pl{constructor(l,A){super(l,Rc,A)}}const ea={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yh{constructor(l,A){this._structArray=l,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Xr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,A){return l._trim(),A&&(l.isTransferred=!0,A.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const A=Object.create(this.prototype);return A.arrayBuffer=l.arrayBuffer,A.length=l.length,A.capacity=l.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ri(h,l=1){let A=0,y=0;return{members:h.map((_=>{const B=ea[_.type].BYTES_PER_ELEMENT,O=A=zo(A,Math.max(l,B)),D=_.components||1;return y=Math.max(y,B),A+=B*D,{name:_.name,type:_.type,components:D,offset:O}})),size:zo(A,Math.max(y,l)),alignment:l}}function zo(h,l){return Math.ceil(h/l)*l}class As extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A){const y=this.length;return this.resize(y+1),this.emplace(y,l,A)}emplace(l,A,y){const _=2*l;return this.int16[_+0]=A,this.int16[_+1]=y,l}}As.prototype.bytesPerElement=4,jn("StructArrayLayout2i4",As);class od extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const B=3*l;return this.int16[B+0]=A,this.int16[B+1]=y,this.int16[B+2]=_,l}}od.prototype.bytesPerElement=6,jn("StructArrayLayout3i6",od);class sc extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_){const B=this.length;return this.resize(B+1),this.emplace(B,l,A,y,_)}emplace(l,A,y,_,B){const O=4*l;return this.int16[O+0]=A,this.int16[O+1]=y,this.int16[O+2]=_,this.int16[O+3]=B,l}}sc.prototype.bytesPerElement=8,jn("StructArrayLayout4i8",sc);class vh extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,B,O)}emplace(l,A,y,_,B,O,D){const F=6*l;return this.int16[F+0]=A,this.int16[F+1]=y,this.int16[F+2]=_,this.int16[F+3]=B,this.int16[F+4]=O,this.int16[F+5]=D,l}}vh.prototype.bytesPerElement=12,jn("StructArrayLayout2i4i12",vh);class Nf extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,B,O)}emplace(l,A,y,_,B,O,D){const F=4*l,W=8*l;return this.int16[F+0]=A,this.int16[F+1]=y,this.uint8[W+4]=_,this.uint8[W+5]=B,this.uint8[W+6]=O,this.uint8[W+7]=D,l}}Nf.prototype.bytesPerElement=8,jn("StructArrayLayout2i4ub8",Nf);class KA extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A){const y=this.length;return this.resize(y+1),this.emplace(y,l,A)}emplace(l,A,y){const _=2*l;return this.float32[_+0]=A,this.float32[_+1]=y,l}}KA.prototype.bytesPerElement=8,jn("StructArrayLayout2f8",KA);class sA extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O,D,F,W,te){const ae=this.length;return this.resize(ae+1),this.emplace(ae,l,A,y,_,B,O,D,F,W,te)}emplace(l,A,y,_,B,O,D,F,W,te,ae){const he=10*l;return this.uint16[he+0]=A,this.uint16[he+1]=y,this.uint16[he+2]=_,this.uint16[he+3]=B,this.uint16[he+4]=O,this.uint16[he+5]=D,this.uint16[he+6]=F,this.uint16[he+7]=W,this.uint16[he+8]=te,this.uint16[he+9]=ae,l}}sA.prototype.bytesPerElement=20,jn("StructArrayLayout10ui20",sA);class Ng extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O,D,F){const W=this.length;return this.resize(W+1),this.emplace(W,l,A,y,_,B,O,D,F)}emplace(l,A,y,_,B,O,D,F,W){const te=8*l;return this.uint16[te+0]=A,this.uint16[te+1]=y,this.uint16[te+2]=_,this.uint16[te+3]=B,this.uint16[te+4]=O,this.uint16[te+5]=D,this.uint16[te+6]=F,this.uint16[te+7]=W,l}}Ng.prototype.bytesPerElement=16,jn("StructArrayLayout8ui16",Ng);class hs extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O,D,F,W,te,ae,he){const me=this.length;return this.resize(me+1),this.emplace(me,l,A,y,_,B,O,D,F,W,te,ae,he)}emplace(l,A,y,_,B,O,D,F,W,te,ae,he,me){const be=12*l;return this.int16[be+0]=A,this.int16[be+1]=y,this.int16[be+2]=_,this.int16[be+3]=B,this.uint16[be+4]=O,this.uint16[be+5]=D,this.uint16[be+6]=F,this.uint16[be+7]=W,this.int16[be+8]=te,this.int16[be+9]=ae,this.int16[be+10]=he,this.int16[be+11]=me,l}}hs.prototype.bytesPerElement=24,jn("StructArrayLayout4i4ui4i24",hs);class Pc extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const B=3*l;return this.float32[B+0]=A,this.float32[B+1]=y,this.float32[B+2]=_,l}}Pc.prototype.bytesPerElement=12,jn("StructArrayLayout3f12",Pc);class Zd extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.uint32[1*l+0]=A,l}}Zd.prototype.bytesPerElement=4,jn("StructArrayLayout1ul4",Zd);class Xd extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O,D,F,W){const te=this.length;return this.resize(te+1),this.emplace(te,l,A,y,_,B,O,D,F,W)}emplace(l,A,y,_,B,O,D,F,W,te){const ae=10*l,he=5*l;return this.int16[ae+0]=A,this.int16[ae+1]=y,this.int16[ae+2]=_,this.int16[ae+3]=B,this.int16[ae+4]=O,this.int16[ae+5]=D,this.uint32[he+3]=F,this.uint16[ae+8]=W,this.uint16[ae+9]=te,l}}Xd.prototype.bytesPerElement=20,jn("StructArrayLayout6i1ul2ui20",Xd);class sd extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,B,O)}emplace(l,A,y,_,B,O,D){const F=6*l;return this.int16[F+0]=A,this.int16[F+1]=y,this.int16[F+2]=_,this.int16[F+3]=B,this.int16[F+4]=O,this.int16[F+5]=D,l}}sd.prototype.bytesPerElement=12,jn("StructArrayLayout2i2i2i12",sd);class Jm extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B){const O=this.length;return this.resize(O+1),this.emplace(O,l,A,y,_,B)}emplace(l,A,y,_,B,O){const D=4*l,F=8*l;return this.float32[D+0]=A,this.float32[D+1]=y,this.float32[D+2]=_,this.int16[F+6]=B,this.int16[F+7]=O,l}}Jm.prototype.bytesPerElement=16,jn("StructArrayLayout2f1f2i16",Jm);class Gf extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O){const D=this.length;return this.resize(D+1),this.emplace(D,l,A,y,_,B,O)}emplace(l,A,y,_,B,O,D){const F=16*l,W=4*l,te=8*l;return this.uint8[F+0]=A,this.uint8[F+1]=y,this.float32[W+1]=_,this.float32[W+2]=B,this.int16[te+6]=O,this.int16[te+7]=D,l}}Gf.prototype.bytesPerElement=16,jn("StructArrayLayout2ub2f2i16",Gf);class FA extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const B=3*l;return this.uint16[B+0]=A,this.uint16[B+1]=y,this.uint16[B+2]=_,l}}FA.prototype.bytesPerElement=6,jn("StructArrayLayout3ui6",FA);class Ch extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O,D,F,W,te,ae,he,me,be,we,Ie,ze){const ct=this.length;return this.resize(ct+1),this.emplace(ct,l,A,y,_,B,O,D,F,W,te,ae,he,me,be,we,Ie,ze)}emplace(l,A,y,_,B,O,D,F,W,te,ae,he,me,be,we,Ie,ze,ct){const Ge=24*l,Ze=12*l,ht=48*l;return this.int16[Ge+0]=A,this.int16[Ge+1]=y,this.uint16[Ge+2]=_,this.uint16[Ge+3]=B,this.uint32[Ze+2]=O,this.uint32[Ze+3]=D,this.uint32[Ze+4]=F,this.uint16[Ge+10]=W,this.uint16[Ge+11]=te,this.uint16[Ge+12]=ae,this.float32[Ze+7]=he,this.float32[Ze+8]=me,this.uint8[ht+36]=be,this.uint8[ht+37]=we,this.uint8[ht+38]=Ie,this.uint32[Ze+10]=ze,this.int16[Ge+22]=ct,l}}Ch.prototype.bytesPerElement=48,jn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ch);class ol extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y,_,B,O,D,F,W,te,ae,he,me,be,we,Ie,ze,ct,Ge,Ze,ht,gt,Gt,an,rn,mn,zn,vn){const sn=this.length;return this.resize(sn+1),this.emplace(sn,l,A,y,_,B,O,D,F,W,te,ae,he,me,be,we,Ie,ze,ct,Ge,Ze,ht,gt,Gt,an,rn,mn,zn,vn)}emplace(l,A,y,_,B,O,D,F,W,te,ae,he,me,be,we,Ie,ze,ct,Ge,Ze,ht,gt,Gt,an,rn,mn,zn,vn,sn){const $t=32*l,ri=16*l;return this.int16[$t+0]=A,this.int16[$t+1]=y,this.int16[$t+2]=_,this.int16[$t+3]=B,this.int16[$t+4]=O,this.int16[$t+5]=D,this.int16[$t+6]=F,this.int16[$t+7]=W,this.uint16[$t+8]=te,this.uint16[$t+9]=ae,this.uint16[$t+10]=he,this.uint16[$t+11]=me,this.uint16[$t+12]=be,this.uint16[$t+13]=we,this.uint16[$t+14]=Ie,this.uint16[$t+15]=ze,this.uint16[$t+16]=ct,this.uint16[$t+17]=Ge,this.uint16[$t+18]=Ze,this.uint16[$t+19]=ht,this.uint16[$t+20]=gt,this.uint16[$t+21]=Gt,this.uint16[$t+22]=an,this.uint32[ri+12]=rn,this.float32[ri+13]=mn,this.float32[ri+14]=zn,this.uint16[$t+30]=vn,this.uint16[$t+31]=sn,l}}ol.prototype.bytesPerElement=64,jn("StructArrayLayout8i15ui1ul2f2ui64",ol);class Cs extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.float32[1*l+0]=A,l}}Cs.prototype.bytesPerElement=4,jn("StructArrayLayout1f4",Cs);class Uc extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const B=3*l;return this.uint16[6*l+0]=A,this.float32[B+1]=y,this.float32[B+2]=_,l}}Uc.prototype.bytesPerElement=12,jn("StructArrayLayout1ui2f12",Uc);class ad extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A,y){const _=this.length;return this.resize(_+1),this.emplace(_,l,A,y)}emplace(l,A,y,_){const B=4*l;return this.uint32[2*l+0]=A,this.uint16[B+2]=y,this.uint16[B+3]=_,l}}ad.prototype.bytesPerElement=8,jn("StructArrayLayout1ul2ui8",ad);class ld extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,A){const y=this.length;return this.resize(y+1),this.emplace(y,l,A)}emplace(l,A,y){const _=2*l;return this.uint16[_+0]=A,this.uint16[_+1]=y,l}}ld.prototype.bytesPerElement=4,jn("StructArrayLayout2ui4",ld);class Wf extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const A=this.length;return this.resize(A+1),this.emplace(A,l)}emplace(l,A){return this.uint16[1*l+0]=A,l}}Wf.prototype.bytesPerElement=2,jn("StructArrayLayout1ui2",Wf);class ac extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,A,y,_){const B=this.length;return this.resize(B+1),this.emplace(B,l,A,y,_)}emplace(l,A,y,_,B){const O=4*l;return this.float32[O+0]=A,this.float32[O+1]=y,this.float32[O+2]=_,this.float32[O+3]=B,l}}ac.prototype.bytesPerElement=16,jn("StructArrayLayout4f16",ac);class I extends yh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}I.prototype.size=20;class u extends Xd{get(l){return new I(this,l)}}jn("CollisionBoxArray",u);class m extends yh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}m.prototype.size=48;class b extends Ch{get(l){return new m(this,l)}}jn("PlacedSymbolArray",b);class S extends yh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}S.prototype.size=64;class k extends ol{get(l){return new S(this,l)}}jn("SymbolInstanceArray",k);class K extends Cs{getoffsetX(l){return this.float32[1*l+0]}}jn("GlyphOffsetArray",K);class N extends od{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}jn("SymbolLineVertexArray",N);class H extends yh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}H.prototype.size=12;class se extends Uc{get(l){return new H(this,l)}}jn("TextAnchorOffsetArray",se);class ce extends yh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ce.prototype.size=8;class ye extends ad{get(l){return new ce(this,l)}}jn("FeatureIndexArray",ye);class ge extends As{}class Se extends As{}class Le extends As{}class Je extends vh{}class nt extends Nf{}class tt extends KA{}class rt extends sA{}class ft extends Ng{}class lt extends hs{}class pt extends Pc{}class _t extends Zd{}class At extends sd{}class Tt extends Gf{}class zt extends FA{}class jt extends ld{}const Wt=Ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:qt}=Wt;class fn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,A,y,_){const B=this.segments[this.segments.length-1];return l>fn.MAX_VERTEX_ARRAY_LENGTH&&wt(`Max vertices per segment is ${fn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${fn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!B||B.vertexLength+l>fn.MAX_VERTEX_ARRAY_LENGTH||B.sortKey!==_?this.createNewSegment(A,y,_):B}createNewSegment(l,A,y){const _={vertexOffset:l.length,primitiveOffset:A.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(_.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(l,A,y){return this.prepareSegment(0,l,A,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const A in l.vaos)l.vaos[A].destroy()}static simpleSegment(l,A,y,_){return new fn([{vertexOffset:l,primitiveOffset:A,vertexLength:y,primitiveLength:_,vaos:{},sortKey:0}])}}function Pn(h,l){return 256*(h=Et(Math.floor(h),0,255))+Et(Math.floor(l),0,255)}fn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,jn("SegmentVector",fn);const hn=Ri([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ui=Ri([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var or,go,ko,yo={exports:{}},Pr={exports:{}},Ur={exports:{}},Ea=(function(){if(ko)return yo.exports;ko=1;var h=(or||(or=1,Pr.exports=function(A,y){var _,B,O,D,F,W,te,ae;for(B=A.length-(_=3&A.length),O=y,F=3432918353,W=461845907,ae=0;ae<B;)te=255&A.charCodeAt(ae)|(255&A.charCodeAt(++ae))<<8|(255&A.charCodeAt(++ae))<<16|(255&A.charCodeAt(++ae))<<24,++ae,O=27492+(65535&(D=5*(65535&(O=(O^=te=(65535&(te=(te=(65535&te)*F+(((te>>>16)*F&65535)<<16)&4294967295)<<15|te>>>17))*W+(((te>>>16)*W&65535)<<16)&4294967295)<<13|O>>>19))+((5*(O>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(te=0,_){case 3:te^=(255&A.charCodeAt(ae+2))<<16;case 2:te^=(255&A.charCodeAt(ae+1))<<8;case 1:O^=te=(65535&(te=(te=(65535&(te^=255&A.charCodeAt(ae)))*F+(((te>>>16)*F&65535)<<16)&4294967295)<<15|te>>>17))*W+(((te>>>16)*W&65535)<<16)&4294967295}return O^=A.length,O=2246822507*(65535&(O^=O>>>16))+((2246822507*(O>>>16)&65535)<<16)&4294967295,O=3266489909*(65535&(O^=O>>>13))+((3266489909*(O>>>16)&65535)<<16)&4294967295,(O^=O>>>16)>>>0}),Pr.exports),l=(go||(go=1,Ur.exports=function(A,y){for(var _,B=A.length,O=y^B,D=0;B>=4;)_=1540483477*(65535&(_=255&A.charCodeAt(D)|(255&A.charCodeAt(++D))<<8|(255&A.charCodeAt(++D))<<16|(255&A.charCodeAt(++D))<<24))+((1540483477*(_>>>16)&65535)<<16),O=1540483477*(65535&O)+((1540483477*(O>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),B-=4,++D;switch(B){case 3:O^=(255&A.charCodeAt(D+2))<<16;case 2:O^=(255&A.charCodeAt(D+1))<<8;case 1:O=1540483477*(65535&(O^=255&A.charCodeAt(D)))+((1540483477*(O>>>16)&65535)<<16)}return O=1540483477*(65535&(O^=O>>>13))+((1540483477*(O>>>16)&65535)<<16),(O^=O>>>15)>>>0}),Ur.exports);return yo.exports=h,yo.exports.murmur3=h,yo.exports.murmur2=l,yo.exports})(),is=d(Ea);class Qs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,A,y,_){this.ids.push(jo(l)),this.positions.push(A,y,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=jo(l);let y=0,_=this.ids.length-1;for(;y<_;){const O=y+_>>1;this.ids[O]>=A?_=O:y=O+1}const B=[];for(;this.ids[y]===A;)B.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return B}static serialize(l,A){const y=new Float64Array(l.ids),_=new Uint32Array(l.positions);return Ps(y,_,0,y.length-1),A&&A.push(y.buffer,_.buffer),{ids:y,positions:_}}static deserialize(l){const A=new Qs;return A.ids=l.ids,A.positions=l.positions,A.indexed=!0,A}}function jo(h){const l=+h;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:is(String(h))}function Ps(h,l,A,y){for(;A<y;){const _=h[A+y>>1];let B=A-1,O=y+1;for(;;){do B++;while(h[B]<_);do O--;while(h[O]>_);if(B>=O)break;Qa(h,B,O),Qa(l,3*B,3*O),Qa(l,3*B+1,3*O+1),Qa(l,3*B+2,3*O+2)}O-A<y-O?(Ps(h,l,A,O),A=O+1):(Ps(h,l,O+1,y),y=O)}}function Qa(h,l,A){const y=h[l];h[l]=h[A],h[A]=y}jn("FeaturePositionMap",Qs);class gl{constructor(l,A){this.gl=l.gl,this.location=A}}class Lc extends gl{constructor(l,A){super(l,A),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Du extends gl{constructor(l,A){super(l,A),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class aA extends gl{constructor(l,A){super(l,A),this.current=nr.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const g0=new Float32Array(16);function ud(h){return[Pn(255*h.r,255*h.g),Pn(255*h.b,255*h.a)]}class cu{constructor(l,A,y){this.value=l,this.uniformNames=A.map((_=>`u_${_}`)),this.type=y}setUniform(l,A,y){l.set(y.constantOr(this.value))}getBinding(l,A,y){return this.type==="color"?new aA(l,A):new Lc(l,A)}}class qs{constructor(l,A){this.uniformNames=A.map((y=>`u_${y}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,A){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,A.y,A.height,A.width]}setUniform(l,A,y,_){let B=null;_==="u_pattern_to"?B=this.patternTo:_==="u_pattern_from"?B=this.patternFrom:_==="u_dasharray_to"?B=this.dashTo:_==="u_dasharray_from"?B=this.dashFrom:_==="u_pixel_ratio_to"?B=this.pixelRatioTo:_==="u_pixel_ratio_from"&&(B=this.pixelRatioFrom),B!==null&&l.set(B)}getBinding(l,A,y){return y.substr(0,9)==="u_pattern"||y.substr(0,12)==="u_dasharray_"?new Du(l,A):new Lc(l,A)}}class Ba{constructor(l,A,y,_){this.expression=l,this.type=y,this.maxValue=0,this.paintVertexAttributes=A.map((B=>({name:`a_${B}`,type:"Float32",components:y==="color"?2:1,offset:0}))),this.paintVertexArray=new _}populatePaintArray(l,A,y){const _=this.paintVertexArray.length,B=this.expression.evaluate(new Gr(0,y),A,{},y.canonical,[],y.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(_,l,B)}updatePaintArray(l,A,y,_,B){const O=this.expression.evaluate(new Gr(0,B),y,_);this._setPaintValue(l,A,O)}_setPaintValue(l,A,y){if(this.type==="color"){const _=ud(y);for(let B=l;B<A;B++)this.paintVertexArray.emplace(B,_[0],_[1])}else{for(let _=l;_<A;_++)this.paintVertexArray.emplace(_,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ha{constructor(l,A,y,_,B,O){this.expression=l,this.uniformNames=A.map((D=>`u_${D}_t`)),this.type=y,this.useIntegerZoom=_,this.zoom=B,this.maxValue=0,this.paintVertexAttributes=A.map((D=>({name:`a_${D}`,type:"Float32",components:y==="color"?4:2,offset:0}))),this.paintVertexArray=new O}populatePaintArray(l,A,y){const _=this.expression.evaluate(new Gr(this.zoom,y),A,{},y.canonical,[],y.formattedSection),B=this.expression.evaluate(new Gr(this.zoom+1,y),A,{},y.canonical,[],y.formattedSection),O=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(O,l,_,B)}updatePaintArray(l,A,y,_,B){const O=this.expression.evaluate(new Gr(this.zoom,B),y,_),D=this.expression.evaluate(new Gr(this.zoom+1,B),y,_);this._setPaintValue(l,A,O,D)}_setPaintValue(l,A,y,_){if(this.type==="color"){const B=ud(y),O=ud(_);for(let D=l;D<A;D++)this.paintVertexArray.emplace(D,B[0],B[1],O[0],O[1])}else{for(let B=l;B<A;B++)this.paintVertexArray.emplace(B,y,_);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,A){const y=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,_=Et(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,A,y){return new Lc(l,A)}}class Au{constructor(l,A,y,_,B,O){this.expression=l,this.type=A,this.useIntegerZoom=y,this.zoom=_,this.layerId=O,this.zoomInPaintVertexArray=new B,this.zoomOutPaintVertexArray=new B}populatePaintArray(l,A,y){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,this.getPositionIds(A),y)}updatePaintArray(l,A,y,_,B){this._setPaintValues(l,A,this.getPositionIds(y),B)}_setPaintValues(l,A,y,_){const B=this.getPositions(_);if(!B||!y)return;const O=B[y.min],D=B[y.mid],F=B[y.max];if(O&&D&&F)for(let W=l;W<A;W++)this.emplace(this.zoomInPaintVertexArray,W,D,O),this.emplace(this.zoomOutPaintVertexArray,W,D,F)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const A=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,A,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,A,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class rs extends Au{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return hn.members}emplace(l,A,y,_){l.emplace(A,y.tlbr[0],y.tlbr[1],y.tlbr[2],y.tlbr[3],_.tlbr[0],_.tlbr[1],_.tlbr[2],_.tlbr[3],y.pixelRatio,_.pixelRatio)}}class Oa extends Au{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return ui.members}emplace(l,A,y,_){l.emplace(A,0,y.y,y.height,y.width,0,_.y,_.height,_.width)}}class jl{constructor(l,A,y){this.binders={},this._buffers=[];const _=[];for(const B in l.paint._values){if(!y(B))continue;const O=l.paint.get(B);if(!(O instanceof il&&ru(O.property.specification)))continue;const D=y0(B,l.type),F=O.value,W=O.property.specification.type,te=O.property.useIntegerZoom,ae=O.property.specification["property-type"],he=ae==="cross-faded"||ae==="cross-faded-data-driven";if(F.kind==="constant")this.binders[B]=he?new qs(F.value,D):new cu(F.value,D,W),_.push(`/u_${B}`);else if(F.kind==="source"||he){const me=Qf(B,W,"source");this.binders[B]=he?B==="line-dasharray"?new Oa(F,W,te,A,me,l.id):new rs(F,W,te,A,me,l.id):new Ba(F,D,W,me),_.push(`/a_${B}`)}else{const me=Qf(B,W,"composite");this.binders[B]=new ha(F,D,W,te,A,me),_.push(`/z_${B}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){const A=this.binders[l];return A instanceof Ba||A instanceof ha?A.maxValue:0}populatePaintArrays(l,A,y){for(const _ in this.binders){const B=this.binders[_];(B instanceof Ba||B instanceof ha||B instanceof Au)&&B.populatePaintArray(l,A,y)}}setConstantPatternPositions(l,A){for(const y in this.binders){const _=this.binders[y];_ instanceof qs&&_.setConstantPatternPositions(l,A)}}setConstantDashPositions(l,A){for(const y in this.binders){const _=this.binders[y];_ instanceof qs&&_.setConstantDashPositions(l,A)}}updatePaintArrays(l,A,y,_,B){let O=!1;for(const D in l){const F=A.getPositions(D);for(const W of F){const te=y.feature(W.index);for(const ae in this.binders){const he=this.binders[ae];if((he instanceof Ba||he instanceof ha||he instanceof Au)&&he.expression.isStateDependent===!0){const me=_.paint.get(ae);he.expression=me.value,he.updatePaintArray(W.start,W.end,te,l[D],B),O=!0}}}}return O}defines(){const l=[];for(const A in this.binders){const y=this.binders[A];(y instanceof cu||y instanceof qs)&&l.push(...y.uniformNames.map((_=>`#define HAS_UNIFORM_${_}`)))}return l}getBinderAttributes(){const l=[];for(const A in this.binders){const y=this.binders[A];if(y instanceof Ba||y instanceof ha)for(let _=0;_<y.paintVertexAttributes.length;_++)l.push(y.paintVertexAttributes[_].name);else if(y instanceof Au){const _=y.getVertexAttributes();for(const B of _)l.push(B.name)}}return l}getBinderUniforms(){const l=[];for(const A in this.binders){const y=this.binders[A];if(y instanceof cu||y instanceof qs||y instanceof ha)for(const _ of y.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,A){const y=[];for(const _ in this.binders){const B=this.binders[_];if(B instanceof cu||B instanceof qs||B instanceof ha){for(const O of B.uniformNames)if(A[O]){const D=B.getBinding(l,A[O],O);y.push({name:O,property:_,binding:D})}}}return y}setUniforms(l,A,y,_){for(const{name:B,property:O,binding:D}of A)this.binders[O].setUniform(D,_,y.get(O),B)}updatePaintBuffers(l){this._buffers=[];for(const A in this.binders){const y=this.binders[A];if(l&&y instanceof Au){const _=l.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(y instanceof Ba||y instanceof ha)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(l){for(const A in this.binders){const y=this.binders[A];(y instanceof Ba||y instanceof ha||y instanceof Au)&&y.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const A=this.binders[l];(A instanceof Ba||A instanceof ha||A instanceof Au)&&A.destroy()}}}class Ho{constructor(l,A,y=()=>!0){this.programConfigurations={};for(const _ of l)this.programConfigurations[_.id]=new jl(_,A,y);this.needsUpload=!1,this._featureMap=new Qs,this._bufferOffset=0}populatePaintArrays(l,A,y,_){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(l,A,_);A.id!==void 0&&this._featureMap.add(A.id,y,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,A,y,_){for(const B of y)this.needsUpload=this.programConfigurations[B.id].updatePaintArrays(l,this._featureMap,A,B,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function y0(h,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${l}-`,"").replace(/-/g,"_")]}function Qf(h,l,A){const y={color:{source:KA,composite:ac},number:{source:Cs,composite:KA}},_=(function(B){return{"line-pattern":{source:rt,composite:rt},"fill-pattern":{source:rt,composite:rt},"fill-extrusion-pattern":{source:rt,composite:rt},"line-dasharray":{source:ft,composite:ft}}[B]})(h);return _&&_[A]||y[l][A]}jn("ConstantBinder",cu),jn("CrossFadedConstantBinder",qs),jn("SourceExpressionBinder",Ba),jn("CrossFadedPatternBinder",rs),jn("CrossFadedDasharrayBinder",Oa),jn("CompositeExpressionBinder",ha),jn("ProgramConfiguration",jl,{omit:["_buffers"]}),jn("ProgramConfigurationSet",Ho);const v0=Math.pow(2,14)-1,C0=-v0-1;function da(h){const l=mt/h.extent,A=h.loadGeometry();for(let y=0;y<A.length;y++){const _=A[y];for(let B=0;B<_.length;B++){const O=_[B],D=Math.round(O.x*l),F=Math.round(O.y*l);O.x=Et(D,C0,v0),O.y=Et(F,C0,v0),(D<O.x||D>O.x+1||F<O.y||F>O.y+1)&&wt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function bh(h,l){return{type:h.type,id:h.id,properties:h.properties,geometry:l?da(h):[]}}const zA=-32768;function Gg(h,l,A,y,_){h.emplaceBack(zA+8*l+y,zA+8*A+_)}class cd{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Se,this.indexArray=new zt,this.segments=new fn,this.programConfigurations=new Ho(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){const _=this.layers[0],B=[];let O=null,D=!1,F=_.type==="heatmap";if(_.type==="circle"){const te=_;O=te.layout.get("circle-sort-key"),D=!O.isConstant(),F=F||te.paint.get("circle-pitch-alignment")==="map"}const W=F?A.subdivisionGranularity.circle:1;for(const{feature:te,id:ae,index:he,sourceLayerIndex:me}of l){const be=this.layers[0]._featureFilter.needGeometry,we=bh(te,be);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),we,y))continue;const Ie=D?O.evaluate(we,{},y):void 0,ze={id:ae,properties:te.properties,type:te.type,sourceLayerIndex:me,index:he,geometry:be?we.geometry:da(te),patterns:{},sortKey:Ie};B.push(ze)}D&&B.sort(((te,ae)=>te.sortKey-ae.sortKey));for(const te of B){const{geometry:ae,index:he,sourceLayerIndex:me}=te,be=l[he].feature;this.addFeature(te,ae,he,y,W),A.featureIndex.insert(be,ae,he,me,this.index)}}update(l,A,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,qt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,A,y,_,B=1){let O;switch(B){case 1:O=[0,7];break;case 3:O=[0,2,5,7];break;case 5:O=[0,1,3,4,6,7];break;case 7:O=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${B}; valid values are 1, 3, 5, 7.`)}const D=O.length;for(const F of A)for(const W of F){const te=W.x,ae=W.y;if(te<0||te>=mt||ae<0||ae>=mt)continue;const he=this.segments.prepareSegment(D*D,this.layoutVertexArray,this.indexArray,l.sortKey),me=he.vertexLength;for(let be=0;be<D;be++)for(let we=0;we<D;we++)Gg(this.layoutVertexArray,te,ae,O[we],O[be]);for(let be=0;be<D-1;be++)for(let we=0;we<D-1;we++){const Ie=me+be*D+we,ze=me+(be+1)*D+we;this.indexArray.emplaceBack(Ie,ze+1,Ie+1),this.indexArray.emplaceBack(Ie,ze,ze+1)}he.vertexLength+=D*D,he.primitiveLength+=(D-1)*(D-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:{},canonical:_})}}function b0(h,l){for(let A=0;A<h.length;A++)if(hd(l,h[A]))return!0;for(let A=0;A<l.length;A++)if(hd(h,l[A]))return!0;return!!Wg(h,l)}function Ad(h,l,A){return!!hd(h,l)||!!Ys(l,h,A)}function Kc(h,l){if(h.length===1)return sr(l,h[0]);for(let A=0;A<l.length;A++){const y=l[A];for(let _=0;_<y.length;_++)if(hd(h,y[_]))return!0}for(let A=0;A<h.length;A++)if(sr(l,h[A]))return!0;for(let A=0;A<l.length;A++)if(Wg(h,l[A]))return!0;return!1}function qf(h,l,A){if(h.length>1){if(Wg(h,l))return!0;for(let y=0;y<l.length;y++)if(Ys(l[y],h,A))return!0}for(let y=0;y<h.length;y++)if(Ys(h[y],l,A))return!0;return!1}function Wg(h,l){if(h.length===0||l.length===0)return!1;for(let A=0;A<h.length-1;A++){const y=h[A],_=h[A+1];for(let B=0;B<l.length-1;B++)if(Qg(y,_,l[B],l[B+1]))return!0}return!1}function Qg(h,l,A,y){return Ft(h,A,y)!==Ft(l,A,y)&&Ft(h,l,A)!==Ft(h,l,y)}function Ys(h,l,A){const y=A*A;if(l.length===1)return h.distSqr(l[0])<y;for(let _=1;_<l.length;_++)if(fa(h,l[_-1],l[_])<y)return!0;return!1}function fa(h,l,A){const y=l.distSqr(A);if(y===0)return h.distSqr(l);const _=((h.x-l.x)*(A.x-l.x)+(h.y-l.y)*(A.y-l.y))/y;return h.distSqr(_<0?l:_>1?A:A.sub(l)._mult(_)._add(l))}function sr(h,l){let A,y,_,B=!1;for(let O=0;O<h.length;O++){A=h[O];for(let D=0,F=A.length-1;D<A.length;F=D++)y=A[D],_=A[F],y.y>l.y!=_.y>l.y&&l.x<(_.x-y.x)*(l.y-y.y)/(_.y-y.y)+y.x&&(B=!B)}return B}function hd(h,l){let A=!1;for(let y=0,_=h.length-1;y<h.length;_=y++){const B=h[y],O=h[_];B.y>l.y!=O.y>l.y&&l.x<(O.x-B.x)*(l.y-B.y)/(O.y-B.y)+B.x&&(A=!A)}return A}function ay(h,l,A){const y=A[0],_=A[2];if(h.x<y.x&&l.x<y.x||h.x>_.x&&l.x>_.x||h.y<y.y&&l.y<y.y||h.y>_.y&&l.y>_.y)return!1;const B=Ft(h,l,A[0]);return B!==Ft(h,l,A[1])||B!==Ft(h,l,A[2])||B!==Ft(h,l,A[3])}function lA(h,l,A){const y=l.paint.get(h).value;return y.kind==="constant"?y.value:A.programConfigurations.get(l.id).getMaxValue(h)}function Yf(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function ep(h,l,A,y,_){if(!l[0]&&!l[1])return h;const B=c.convert(l)._mult(_);A==="viewport"&&B._rotate(-y);const O=[];for(let D=0;D<h.length;D++)O.push(h[D].sub(B));return O}function qg(h){const l=[];for(let A=0;A<h.length;A++){const y=h[A],_=l.at(-1);(A===0||_&&!y.equals(_))&&l.push(y)}return l}function hu({queryGeometry:h,size:l},A){return Ad(h,A,l)}function r3({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_},B){return Ad(h,B,l*(A.projectTileCoordinates(B.x,B.y,y,_).signedDistanceFromCamera/A.cameraToCenterDistance))}function ly({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_},B){const O=A.projectTileCoordinates(B.x,B.y,y,_).signedDistanceFromCamera,D=l*(A.cameraToCenterDistance/O);return Ad(h,Yg(B,A,y,_),D)}function uy({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_},B){return Ad(h,Yg(B,A,y,_),l)}function $v({queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_,pitchAlignment:B="map",pitchScale:O="map"},D){const F=B==="map"?O==="map"?hu:r3:O==="map"?ly:uy,W={queryGeometry:h,size:l,transform:A,unwrappedTileID:y,getElevation:_};for(const te of D)for(const ae of te)if(F(W,ae))return!0;return!1}function Yg(h,l,A,y){const _=l.projectTileCoordinates(h.x,h.y,A,y).point;return new c((.5*_.x+.5)*l.width,(.5*-_.y+.5)*l.height)}let Hv,cy;jn("CircleBucket",cd,{omit:["layers"]});var Zv={get paint(){return cy=cy||new Js({"circle-radius":new li(Mt.paint_circle["circle-radius"]),"circle-color":new li(Mt.paint_circle["circle-color"]),"circle-blur":new li(Mt.paint_circle["circle-blur"]),"circle-opacity":new li(Mt.paint_circle["circle-opacity"]),"circle-translate":new mi(Mt.paint_circle["circle-translate"]),"circle-translate-anchor":new mi(Mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mi(Mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mi(Mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new li(Mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new li(Mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new li(Mt.paint_circle["circle-stroke-opacity"])})},get layout(){return Hv=Hv||new Js({"circle-sort-key":new li(Mt.layout_circle["circle-sort-key"])})}};class _h extends pl{constructor(l,A){super(l,Zv,A)}createBucket(l){return new cd(l)}queryRadius(l){const A=l;return lA("circle-radius",this,A)+lA("circle-stroke-width",this,A)+Yf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:B,pixelsToTileUnits:O,unwrappedTileID:D,getElevation:F}){const W=ep(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-B.bearingInRadians,O),te=this.paint.get("circle-radius").evaluate(A,y)+this.paint.get("circle-stroke-width").evaluate(A,y),ae=this.paint.get("circle-pitch-scale"),he=this.paint.get("circle-pitch-alignment");let me,be;return he==="map"?(me=W,be=te*O):(me=(function(we,Ie,ze,ct){return we.map((Ge=>Yg(Ge,Ie,ze,ct)))})(W,B,D,F),be=te),$v({queryGeometry:me,size:be,transform:B,unwrappedTileID:D,getElevation:F,pitchAlignment:he,pitchScale:ae},_)}}class du extends cd{}let _0;jn("HeatmapBucket",du,{omit:["layers"]});var Ay={get paint(){return _0=_0||new Js({"heatmap-radius":new li(Mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new li(Mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mi(Mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rl(Mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mi(Mt.paint_heatmap["heatmap-opacity"])})}};function tp(h,{width:l,height:A},y,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*A*y)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*A*y}`)}else _=new Uint8Array(l*A*y);return h.width=l,h.height=A,h.data=_,h}function Xv(h,{width:l,height:A},y){if(l===h.width&&A===h.height)return;const _=tp({},{width:l,height:A},y);Vg(h,_,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,l),height:Math.min(h.height,A)},y),h.width=l,h.height=A,h.data=_.data}function Vg(h,l,A,y,_,B){if(_.width===0||_.height===0)return l;if(_.width>h.width||_.height>h.height||A.x>h.width-_.width||A.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||y.x>l.width-_.width||y.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const O=h.data,D=l.data;if(O===D)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<_.height;F++){const W=((A.y+F)*h.width+A.x)*B,te=((y.y+F)*l.width+y.x)*B;for(let ae=0;ae<_.width*B;ae++)D[te+ae]=O[W+ae]}return l}class dd{constructor(l,A){tp(this,l,1,A)}resize(l){Xv(this,l,1)}clone(){return new dd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,A,y,_,B){Vg(l,A,y,_,B,1)}}class ta{constructor(l,A){tp(this,l,4,A)}resize(l){Xv(this,l,4)}replace(l,A){A?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,A,y,_,B){Vg(l,A,y,_,B,4)}setPixel(l,A,y){const _=4*(l*this.width+A);this.data[_+0]=Math.round(255*y.r/y.a),this.data[_+1]=Math.round(255*y.g/y.a),this.data[_+2]=Math.round(255*y.b/y.a),this.data[_+3]=Math.round(255*y.a)}}function $g(h){const l={},A=h.resolution||256,y=h.clips?h.clips.length:1,_=h.image||new ta({width:A,height:y});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const B=(O,D,F)=>{l[h.evaluationKey]=F;const W=h.expression.evaluate(l);_.setPixel(O/4/A,D/4,W)};if(h.clips)for(let O=0,D=0;O<y;++O,D+=4*A)for(let F=0,W=0;F<A;F++,W+=4){const te=F/(A-1),{start:ae,end:he}=h.clips[O];B(D,W,ae*(1-te)+he*te)}else for(let O=0,D=0;O<A;O++,D+=4)B(0,D,O/(A-1));return _}jn("AlphaImage",dd),jn("RGBAImage",ta);const Jv="big-fb";class l_ extends pl{createBucket(l){return new du(l)}constructor(l,A){super(l,Ay,A),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$g({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Jv)&&this.heatmapFbos.delete(Jv)}queryRadius(l){return lA("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:B,pixelsToTileUnits:O,unwrappedTileID:D,getElevation:F}){return $v({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(A,y)*O,transform:B,unwrappedTileID:D,getElevation:F},_)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let fd;var eC={get paint(){return fd=fd||new Js({"hillshade-illumination-direction":new mi(Mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new mi(Mt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new mi(Mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mi(Mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mi(Mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mi(Mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mi(Mt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new mi(Mt.paint_hillshade["hillshade-method"])})}};class tC extends pl{constructor(l,A){super(l,eC,A),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,A=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,_=this.paint.get("hillshade-shadow-color").values;const B=Math.max(l.length,A.length,y.length,_.length);l=l.concat(Array(B-l.length).fill(l.at(-1))),A=A.concat(Array(B-A.length).fill(A.at(-1))),y=y.concat(Array(B-y.length).fill(y.at(-1))),_=_.concat(Array(B-_.length).fill(_.at(-1)));const O=A.map(oi);return{directionRadians:l.map(oi),altitudeRadians:O,shadowColor:_,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let x0;var Hg={get paint(){return x0=x0||new Js({"color-relief-opacity":new mi(Mt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new rl(Mt["paint_color-relief"]["color-relief-color"])})}};class os{constructor(l,A,y,_){this.context=l,this.format=y,this.texture=l.gl.createTexture(),this.update(A,_)}update(l,A,y){const{width:_,height:B}=l,O=!(this.size&&this.size[0]===_&&this.size[1]===B||y),{context:D}=this,{gl:F}=D;if(this.useMipmap=!!(A&&A.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!A||A.premultiply!==!1)),O)this.size=[_,B],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Kn(l)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,l):F.texImage2D(F.TEXTURE_2D,0,this.format,_,B,0,this.format,F.UNSIGNED_BYTE,l.data);else{const{x:W,y:te}=y||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Kn(l)?F.texSubImage2D(F.TEXTURE_2D,0,W,te,F.RGBA,F.UNSIGNED_BYTE,l):F.texSubImage2D(F.TEXTURE_2D,0,W,te,_,B,F.RGBA,F.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,A,y){const{context:_}=this,{gl:B}=_;B.bindTexture(B.TEXTURE_2D,this.texture),y!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=B.LINEAR),l!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,l),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,y||l),this.filter=l),A!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,A),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,A),this.wrap=A)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class nC{constructor(l,A,y,_=1,B=1,O=1,D=0){if(this.uid=l,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void wt(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const F=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=B,this.blueFactor=O,this.baseShift=D;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let W=0;W<F;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx(F,W)]=this.data[this._idx(F-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,F)]=this.data[this._idx(W,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let W=0;W<F;W++)for(let te=0;te<F;te++){const ae=this.get(W,te);ae>this.max&&(this.max=ae),ae<this.min&&(this.min=ae)}}get(l,A){const y=new Uint8Array(this.data.buffer),_=4*this._idx(l,A);return this.unpack(y[_],y[_+1],y[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,A){if(l<-1||l>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(l+1)}unpack(l,A,y){return l*this.redFactor+A*this.greenFactor+y*this.blueFactor-this.baseShift}pack(l){return M0(l,this.getUnpackVector())}getPixels(){return new ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,A,y){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=A*this.dim,B=A*this.dim+this.dim,O=y*this.dim,D=y*this.dim+this.dim;switch(A){case-1:_=B-1;break;case 1:B=_+1}switch(y){case-1:O=D-1;break;case 1:D=O+1}const F=-A*this.dim,W=-y*this.dim;for(let te=O;te<D;te++)for(let ae=_;ae<B;ae++)this.data[this._idx(ae,te)]=l.data[this._idx(ae+F,te+W)]}}function M0(h,l){const A=l[0],y=l[1],_=l[2],B=l[3],O=Math.min(A,y,_),D=Math.round((h+B)/O);return{r:Math.floor(D*O/A)%256,g:Math.floor(D*O/y)%256,b:Math.floor(D*O/_)%256}}jn("DEMData",nC);class hy extends pl{constructor(l,A){super(l,Hg,A)}_createColorRamp(l){const A={elevationStops:[],colorStops:[]},y=this._transitionablePaint._values["color-relief-color"].value.expression;if(y instanceof Pl&&y._styleExpression.expression instanceof nu){this.colorRampExpression=y;const O=y._styleExpression.expression;A.elevationStops=O.labels,A.colorStops=[];for(const D of A.elevationStops)A.colorStops.push(O.evaluate({globals:{elevation:D}}))}if(A.elevationStops.length<1&&(A.elevationStops=[0],A.colorStops=[nr.transparent]),A.elevationStops.length<2&&(A.elevationStops.push(A.elevationStops[0]+1),A.colorStops.push(A.colorStops[0])),A.elevationStops.length<=l)return A;const _={elevationStops:[],colorStops:[]},B=(A.elevationStops.length-1)/(l-1);for(let O=0;O<A.elevationStops.length-.5;O+=B)_.elevationStops.push(A.elevationStops[Math.round(O)]),_.colorStops.push(A.colorStops[Math.round(O)]);return wt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${l}, provided: ${A.elevationStops.length}`),_}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,A,y){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const _=this._createColorRamp(A),B=new ta({width:_.colorStops.length,height:1}),O=new ta({width:_.colorStops.length,height:1});for(let D=0;D<_.elevationStops.length;D++){const F=M0(_.elevationStops[D],y);O.setPixel(0,D,new nr(F.r/255,F.g/255,F.b/255,1)),B.setPixel(0,D,_.colorStops[D])}return this.colorRampTextures={elevationTexture:new os(l,O,l.gl.RGBA),colorTexture:new os(l,B,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const w0=Ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:Jd}=w0;function Vf(h,l,A){const y=A.patternDependencies;let _=!1;for(const B of l){const O=B.paint.get(`${h}-pattern`);O.isConstant()||(_=!0);const D=O.constantOr(null);D&&(_=!0,y[D.to]=!0,y[D.from]=!0)}return _}function Zg(h,l,A,y,_){const{zoom:B}=y,O=_.patternDependencies;for(const D of l){const F=D.paint.get(`${h}-pattern`).value;if(F.kind!=="constant"){let W=F.evaluate({zoom:B-1},A,{},_.availableImages),te=F.evaluate({zoom:B},A,{},_.availableImages),ae=F.evaluate({zoom:B+1},A,{},_.availableImages);W=W&&W.name?W.name:W,te=te&&te.name?te.name:te,ae=ae&&ae.name?ae.name:ae,O[W]=!0,O[te]=!0,O[ae]=!0,A.patterns[D.id]={min:W,mid:te,max:ae}}}return A}function lc(h,l,A,y,_){let B;if(_===(function(O,D,F,W){let te=0;for(let ae=D,he=F-W;ae<F;ae+=W)te+=(O[he]-O[ae])*(O[ae+1]+O[he+1]),he=ae;return te})(h,l,A,y)>0)for(let O=l;O<A;O+=y)B=aC(O/y|0,h[O],h[O+1],B);else for(let O=A-y;O>=l;O-=y)B=aC(O/y|0,h[O],h[O+1],B);return B&&$f(B,B.next)&&(Xg(B),B=B.next),B}function Ia(h,l){if(!h)return h;l||(l=h);let A,y=h;do if(A=!1,y.steiner||!$f(y,y.next)&&Vs(y.prev,y,y.next)!==0)y=y.next;else{if(Xg(y),y=l=y.prev,y===y.next)break;A=!0}while(A||y!==l);return l}function S0(h,l,A,y,_,B,O){if(!h)return;!O&&B&&(function(F,W,te,ae){let he=F;do he.z===0&&(he.z=Ta(he.x,he.y,W,te,ae)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==F);he.prevZ.nextZ=null,he.prevZ=null,(function(me){let be,we=1;do{let Ie,ze=me;me=null;let ct=null;for(be=0;ze;){be++;let Ge=ze,Ze=0;for(let gt=0;gt<we&&(Ze++,Ge=Ge.nextZ,Ge);gt++);let ht=we;for(;Ze>0||ht>0&&Ge;)Ze!==0&&(ht===0||!Ge||ze.z<=Ge.z)?(Ie=ze,ze=ze.nextZ,Ze--):(Ie=Ge,Ge=Ge.nextZ,ht--),ct?ct.nextZ=Ie:me=Ie,Ie.prevZ=ct,ct=Ie;ze=Ge}ct.nextZ=null,we*=2}while(be>1)})(he)})(h,y,_,B);let D=h;for(;h.prev!==h.next;){const F=h.prev,W=h.next;if(B?u_(h,y,_,B):dy(h))l.push(F.i,h.i,W.i),Xg(h),h=W.next,D=W.next;else if((h=W)===D){O?O===1?S0(h=iC(Ia(h),l),l,A,y,_,B,2):O===2&&rC(h,l,A,y,_,B):S0(Ia(h),l,A,y,_,B,1);break}}}function dy(h){const l=h.prev,A=h,y=h.next;if(Vs(l,A,y)>=0)return!1;const _=l.x,B=A.x,O=y.x,D=l.y,F=A.y,W=y.y,te=Math.min(_,B,O),ae=Math.min(D,F,W),he=Math.max(_,B,O),me=Math.max(D,F,W);let be=y.next;for(;be!==l;){if(be.x>=te&&be.x<=he&&be.y>=ae&&be.y<=me&&ka(_,D,B,F,O,W,be.x,be.y)&&Vs(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function u_(h,l,A,y){const _=h.prev,B=h,O=h.next;if(Vs(_,B,O)>=0)return!1;const D=_.x,F=B.x,W=O.x,te=_.y,ae=B.y,he=O.y,me=Math.min(D,F,W),be=Math.min(te,ae,he),we=Math.max(D,F,W),Ie=Math.max(te,ae,he),ze=Ta(me,be,l,A,y),ct=Ta(we,Ie,l,A,y);let Ge=h.prevZ,Ze=h.nextZ;for(;Ge&&Ge.z>=ze&&Ze&&Ze.z<=ct;){if(Ge.x>=me&&Ge.x<=we&&Ge.y>=be&&Ge.y<=Ie&&Ge!==_&&Ge!==O&&ka(D,te,F,ae,W,he,Ge.x,Ge.y)&&Vs(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,Ze.x>=me&&Ze.x<=we&&Ze.y>=be&&Ze.y<=Ie&&Ze!==_&&Ze!==O&&ka(D,te,F,ae,W,he,Ze.x,Ze.y)&&Vs(Ze.prev,Ze,Ze.next)>=0))return!1;Ze=Ze.nextZ}for(;Ge&&Ge.z>=ze;){if(Ge.x>=me&&Ge.x<=we&&Ge.y>=be&&Ge.y<=Ie&&Ge!==_&&Ge!==O&&ka(D,te,F,ae,W,he,Ge.x,Ge.y)&&Vs(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;Ze&&Ze.z<=ct;){if(Ze.x>=me&&Ze.x<=we&&Ze.y>=be&&Ze.y<=Ie&&Ze!==_&&Ze!==O&&ka(D,te,F,ae,W,he,Ze.x,Ze.y)&&Vs(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.nextZ}return!0}function iC(h,l){let A=h;do{const y=A.prev,_=A.next.next;!$f(y,_)&&Us(y,A,A.next,_)&&E0(y,_)&&E0(_,y)&&(l.push(y.i,A.i,_.i),Xg(A),Xg(A.next),A=h=_),A=A.next}while(A!==h);return Ia(A)}function rC(h,l,A,y,_,B){let O=h;do{let D=O.next.next;for(;D!==O.prev;){if(O.i!==D.i&&o3(O,D)){let F=my(O,D);return O=Ia(O,O.next),F=Ia(F,F.next),S0(O,l,A,y,_,B,0),void S0(F,l,A,y,_,B,0)}D=D.next}O=O.next}while(O!==h)}function fy(h,l){let A=h.x-l.x;return A===0&&(A=h.y-l.y,A===0)&&(A=(h.next.y-h.y)/(h.next.x-h.x)-(l.next.y-l.y)/(l.next.x-l.x)),A}function c_(h,l){const A=(function(_,B){let O=B;const D=_.x,F=_.y;let W,te=-1/0;if($f(_,O))return O;do{if($f(_,O.next))return O.next;if(F<=O.y&&F>=O.next.y&&O.next.y!==O.y){const we=O.x+(F-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(we<=D&&we>te&&(te=we,W=O.x<O.next.x?O:O.next,we===D))return W}O=O.next}while(O!==B);if(!W)return null;const ae=W,he=W.x,me=W.y;let be=1/0;O=W;do{if(D>=O.x&&O.x>=he&&D!==O.x&&sC(F<me?D:te,F,he,me,F<me?te:D,F,O.x,O.y)){const we=Math.abs(F-O.y)/(D-O.x);E0(O,_)&&(we<be||we===be&&(O.x>W.x||O.x===W.x&&ef(W,O)))&&(W=O,be=we)}O=O.next}while(O!==ae);return W})(h,l);if(!A)return l;const y=my(A,h);return Ia(y,y.next),Ia(A,A.next)}function ef(h,l){return Vs(h.prev,h,l.prev)<0&&Vs(l.next,h,h.next)<0}function Ta(h,l,A,y,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-A)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-y)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function oC(h){let l=h,A=h;do(l.x<A.x||l.x===A.x&&l.y<A.y)&&(A=l),l=l.next;while(l!==h);return A}function sC(h,l,A,y,_,B,O,D){return(_-O)*(l-D)>=(h-O)*(B-D)&&(h-O)*(y-D)>=(A-O)*(l-D)&&(A-O)*(B-D)>=(_-O)*(y-D)}function ka(h,l,A,y,_,B,O,D){return!(h===O&&l===D)&&sC(h,l,A,y,_,B,O,D)}function o3(h,l){return h.next.i!==l.i&&h.prev.i!==l.i&&!(function(A,y){let _=A;do{if(_.i!==A.i&&_.next.i!==A.i&&_.i!==y.i&&_.next.i!==y.i&&Us(_,_.next,A,y))return!0;_=_.next}while(_!==A);return!1})(h,l)&&(E0(h,l)&&E0(l,h)&&(function(A,y){let _=A,B=!1;const O=(A.x+y.x)/2,D=(A.y+y.y)/2;do _.y>D!=_.next.y>D&&_.next.y!==_.y&&O<(_.next.x-_.x)*(D-_.y)/(_.next.y-_.y)+_.x&&(B=!B),_=_.next;while(_!==A);return B})(h,l)&&(Vs(h.prev,h,l.prev)||Vs(h,l.prev,l))||$f(h,l)&&Vs(h.prev,h,h.next)>0&&Vs(l.prev,l,l.next)>0)}function Vs(h,l,A){return(l.y-h.y)*(A.x-l.x)-(l.x-h.x)*(A.y-l.y)}function $f(h,l){return h.x===l.x&&h.y===l.y}function Us(h,l,A,y){const _=jA(Vs(h,l,A)),B=jA(Vs(h,l,y)),O=jA(Vs(A,y,h)),D=jA(Vs(A,y,l));return _!==B&&O!==D||!(_!==0||!fu(h,A,l))||!(B!==0||!fu(h,y,l))||!(O!==0||!fu(A,h,y))||!(D!==0||!fu(A,l,y))}function fu(h,l,A){return l.x<=Math.max(h.x,A.x)&&l.x>=Math.min(h.x,A.x)&&l.y<=Math.max(h.y,A.y)&&l.y>=Math.min(h.y,A.y)}function jA(h){return h>0?1:h<0?-1:0}function E0(h,l){return Vs(h.prev,h,h.next)<0?Vs(h,l,h.next)>=0&&Vs(h,h.prev,l)>=0:Vs(h,l,h.prev)<0||Vs(h,h.next,l)<0}function my(h,l){const A=B0(h.i,h.x,h.y),y=B0(l.i,l.x,l.y),_=h.next,B=l.prev;return h.next=l,l.prev=h,A.next=_,_.prev=A,y.next=A,A.prev=y,B.next=y,y.prev=B,y}function aC(h,l,A,y){const _=B0(h,l,A);return y?(_.next=y.next,_.prev=y,y.next.prev=_,y.next=_):(_.prev=_,_.next=_),_}function Xg(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function B0(h,l,A){return{i:h,x:l,y:A,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class yl{constructor(l,A){if(A>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=A}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class Fc{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}Fc.noSubdivision=new Fc({fill:new yl(0,0),line:new yl(0,0),tile:new yl(0,0),stencil:new yl(0,0),circle:1}),jn("SubdivisionGranularityExpression",yl),jn("SubdivisionGranularitySetting",Fc);const np=-32768,ss=32767;class A_{constructor(l,A){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=mt/l,this._canonical=A}_getKey(l,A){return(l+=32768)<<16|A+32768}_vertexToIndex(l,A){if(l<-32768||A<-32768||l>32767||A>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(l),_=0|Math.round(A),B=this._getKey(y,_);if(this._vertexDictionary.has(B))return this._vertexDictionary.get(B);const O=this._vertexBuffer.length/2;return this._vertexDictionary.set(B,O),this._vertexBuffer.push(y,_),O}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(_,B){const O=[];for(let D=0;D<B.length;D+=3){const F=B[D],W=B[D+1],te=B[D+2],ae=_[2*F],he=_[2*F+1];(_[2*W]-ae)*(_[2*te+1]-he)-(_[2*W+1]-he)*(_[2*te]-ae)>0?(O.push(F),O.push(te),O.push(W)):(O.push(F),O.push(W),O.push(te))}return O})(this._vertexBuffer,l);const A=[],y=l.length;for(let _=0;_<y;_+=3){const B=[l[_+0],l[_+1],l[_+2]],O=[this._vertexBuffer[2*l[_+0]+0],this._vertexBuffer[2*l[_+0]+1],this._vertexBuffer[2*l[_+1]+0],this._vertexBuffer[2*l[_+1]+1],this._vertexBuffer[2*l[_+2]+0],this._vertexBuffer[2*l[_+2]+1]];let D=1/0,F=1/0,W=-1/0,te=-1/0;for(let we=0;we<3;we++){const Ie=O[2*we],ze=O[2*we+1];D=Math.min(D,Ie),W=Math.max(W,Ie),F=Math.min(F,ze),te=Math.max(te,ze)}if(D===W||F===te)continue;const ae=Math.floor(D/this._granularityCellSize),he=Math.ceil(W/this._granularityCellSize),me=Math.floor(F/this._granularityCellSize),be=Math.ceil(te/this._granularityCellSize);if(ae!==he||me!==be)for(let we=me;we<be;we++){const Ie=this._scanlineGenerateVertexRingForCellRow(we,O,B);pd(this._vertexBuffer,Ie,A)}else A.push(...B)}return A}_scanlineGenerateVertexRingForCellRow(l,A,y){const _=l*this._granularityCellSize,B=_+this._granularityCellSize,O=[];for(let D=0;D<3;D++){const F=A[2*D],W=A[2*D+1],te=A[2*(D+1)%6],ae=A[(2*(D+1)+1)%6],he=A[2*(D+2)%6],me=A[(2*(D+2)+1)%6],be=te-F,we=ae-W,Ie=be===0,ze=we===0,ct=(_-W)/we,Ge=(B-W)/we,Ze=Math.min(ct,Ge),ht=Math.max(ct,Ge);if(!ze&&(Ze>=1||ht<=0)||ze&&(W<_||W>B)){ae>=_&&ae<=B&&O.push(y[(D+1)%3]);continue}!ze&&Ze>0&&O.push(this._vertexToIndex(F+be*Ze,W+we*Ze));const gt=F+be*Math.max(Ze,0),Gt=F+be*Math.min(ht,1);Ie||this._generateIntraEdgeVertices(O,F,W,te,ae,gt,Gt),!ze&&ht<1&&O.push(this._vertexToIndex(F+be*ht,W+we*ht)),(ze||ae>=_&&ae<=B)&&O.push(y[(D+1)%3]),!ze&&(ae<=_||ae>=B)&&this._generateInterEdgeVertices(O,F,W,te,ae,he,me,Gt,_,B)}return O}_generateIntraEdgeVertices(l,A,y,_,B,O,D){const F=_-A,W=B-y,te=W===0,ae=te?Math.min(A,_):Math.min(O,D),he=te?Math.max(A,_):Math.max(O,D),me=Math.floor(ae/this._granularityCellSize)+1,be=Math.ceil(he/this._granularityCellSize)-1;if(te?A<_:O<D)for(let we=me;we<=be;we++){const Ie=we*this._granularityCellSize;l.push(this._vertexToIndex(Ie,y+W*(Ie-A)/F))}else for(let we=be;we>=me;we--){const Ie=we*this._granularityCellSize;l.push(this._vertexToIndex(Ie,y+W*(Ie-A)/F))}}_generateInterEdgeVertices(l,A,y,_,B,O,D,F,W,te){const ae=B-y,he=O-_,me=D-B,be=(W-B)/me,we=(te-B)/me,Ie=Math.min(be,we),ze=Math.max(be,we),ct=_+he*Ie;let Ge=Math.floor(Math.min(ct,F)/this._granularityCellSize)+1,Ze=Math.ceil(Math.max(ct,F)/this._granularityCellSize)-1,ht=F<ct;const gt=me===0;if(gt&&(D===W||D===te))return;if(gt||Ie>=1||ze<=0){const an=y-D,rn=O+(A-O)*Math.min((W-D)/an,(te-D)/an);Ge=Math.floor(Math.min(rn,F)/this._granularityCellSize)+1,Ze=Math.ceil(Math.max(rn,F)/this._granularityCellSize)-1,ht=F<rn}const Gt=ae>0?te:W;if(ht)for(let an=Ge;an<=Ze;an++)l.push(this._vertexToIndex(an*this._granularityCellSize,Gt));else for(let an=Ze;an>=Ge;an--)l.push(this._vertexToIndex(an*this._granularityCellSize,Gt))}_generateOutline(l){const A=[];for(const y of l){const _=uA(y,this._granularity,!0),B=this._pointArrayToIndices(_),O=[];for(let D=1;D<B.length;D++)O.push(B[D-1]),O.push(B[D]);A.push(O)}return A}_handlePoles(l){let A=!1,y=!1;this._canonical&&(this._canonical.y===0&&(A=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(A||y)&&this._fillPoles(l,A,y)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let A=0;A<l.length;A+=2){const y=l[A+1];y===np&&(l[A+1]=-32767),y===ss&&(l[A+1]=32766)}}_generatePoleQuad(l,A,y,_,B,O){_>B!=(O===np)?(l.push(A),l.push(y),l.push(this._vertexToIndex(_,O)),l.push(y),l.push(this._vertexToIndex(B,O)),l.push(this._vertexToIndex(_,O))):(l.push(y),l.push(A),l.push(this._vertexToIndex(_,O)),l.push(this._vertexToIndex(B,O)),l.push(y),l.push(this._vertexToIndex(_,O)))}_fillPoles(l,A,y){const _=this._vertexBuffer,B=mt,O=l.length;for(let D=2;D<O;D+=3){const F=l[D-2],W=l[D-1],te=l[D],ae=_[2*F],he=_[2*F+1],me=_[2*W],be=_[2*W+1],we=_[2*te],Ie=_[2*te+1];A&&(he===0&&be===0&&this._generatePoleQuad(l,F,W,ae,me,np),be===0&&Ie===0&&this._generatePoleQuad(l,W,te,me,we,np),Ie===0&&he===0&&this._generatePoleQuad(l,te,F,we,ae,np)),y&&(he===B&&be===B&&this._generatePoleQuad(l,F,W,ae,me,ss),be===B&&Ie===B&&this._generatePoleQuad(l,W,te,me,we,ss),Ie===B&&he===B&&this._generatePoleQuad(l,te,F,we,ae,ss))}}_initializeVertices(l){for(let A=0;A<l.length;A+=2)this._vertexToIndex(l[A],l[A+1])}subdividePolygonInternal(l,A){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:_}=(function(D){const F=[],W=[];for(const te of D)if(te.length!==0){te!==D[0]&&F.push(W.length/2);for(let ae=0;ae<te.length;ae++)W.push(te[ae].x),W.push(te[ae].y)}return{flattened:W,holeIndices:F}})(l);let B;this._initializeVertices(y);try{const D=(function(W,te,ae=2){const he=te&&te.length,me=he?te[0]*ae:W.length;let be=lc(W,0,me,ae,!0);const we=[];if(!be||be.next===be.prev)return we;let Ie,ze,ct;if(he&&(be=(function(Ge,Ze,ht,gt){const Gt=[];for(let an=0,rn=Ze.length;an<rn;an++){const mn=lc(Ge,Ze[an]*gt,an<rn-1?Ze[an+1]*gt:Ge.length,gt,!1);mn===mn.next&&(mn.steiner=!0),Gt.push(oC(mn))}Gt.sort(fy);for(let an=0;an<Gt.length;an++)ht=c_(Gt[an],ht);return ht})(W,te,be,ae)),W.length>80*ae){Ie=W[0],ze=W[1];let Ge=Ie,Ze=ze;for(let ht=ae;ht<me;ht+=ae){const gt=W[ht],Gt=W[ht+1];gt<Ie&&(Ie=gt),Gt<ze&&(ze=Gt),gt>Ge&&(Ge=gt),Gt>Ze&&(Ze=Gt)}ct=Math.max(Ge-Ie,Ze-ze),ct=ct!==0?32767/ct:0}return S0(be,we,ae,Ie,ze,ct,0),we})(y,_),F=this._convertIndices(y,D);B=this._subdivideTrianglesScanline(F)}catch(D){console.error(D)}let O=[];return A&&(O=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(B),{verticesFlattened:this._vertexBuffer,indicesTriangles:B,indicesLineList:O}}_convertIndices(l,A){const y=[];for(let _=0;_<A.length;_++)y.push(this._vertexToIndex(l[2*A[_]],l[2*A[_]+1]));return y}_pointArrayToIndices(l){const A=[];for(let y=0;y<l.length;y++){const _=l[y];A.push(this._vertexToIndex(_.x,_.y))}return A}}function md(h,l,A,y=!0){return new A_(A,l).subdividePolygonInternal(h,y)}function uA(h,l,A=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const y=h[0],_=h[h.length-1],B=A&&(y.x!==_.x||y.y!==_.y);if(l<2)return B?[...h,h[0]]:[...h];const O=Math.floor(mt/l),D=[];D.push(new c(h[0].x,h[0].y));const F=h.length,W=B?F:F-1;for(let te=0;te<W;te++){const ae=h[te],he=te<F-1?h[te+1]:h[0],me=ae.x,be=ae.y,we=he.x,Ie=he.y,ze=me!==we,ct=be!==Ie;if(!ze&&!ct)continue;const Ge=we-me,Ze=Ie-be,ht=Math.abs(Ge),gt=Math.abs(Ze);let Gt=me,an=be;for(;;){const mn=Ge>0?(Math.floor(Gt/O)+1)*O:(Math.ceil(Gt/O)-1)*O,zn=Ze>0?(Math.floor(an/O)+1)*O:(Math.ceil(an/O)-1)*O,vn=Math.abs(Gt-mn),sn=Math.abs(an-zn),$t=Math.abs(Gt-we),ri=Math.abs(an-Ie),Xn=ze?vn/ht:Number.POSITIVE_INFINITY,ci=ct?sn/gt:Number.POSITIVE_INFINITY;if(($t<=vn||!ze)&&(ri<=sn||!ct))break;if(Xn<ci&&ze||!ct){Gt=mn,an+=Ze*Xn;const Hn=new c(Gt,Math.round(an));D[D.length-1].x===Hn.x&&D[D.length-1].y===Hn.y||D.push(Hn)}else{Gt+=Ge*ci,an=zn;const Hn=new c(Math.round(Gt),an);D[D.length-1].x===Hn.x&&D[D.length-1].y===Hn.y||D.push(Hn)}}const rn=new c(we,Ie);D[D.length-1].x===rn.x&&D[D.length-1].y===rn.y||D.push(rn)}return D}function pd(h,l,A){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,_=h[2*l[0]];for(let F=1;F<l.length;F++){const W=h[2*l[F]];W<_&&(_=W,y=F)}const B=l.length;let O=y,D=(O+1)%B;for(;;){const F=O-1>=0?O-1:B-1,W=(D+1)%B,te=h[2*l[F]],ae=h[2*l[W]],he=h[2*l[O]],me=h[2*l[O]+1],be=h[2*l[D]+1];let we=!1;if(te<ae)we=!0;else if(te>ae)we=!1;else{const Ie=be-me,ze=-(h[2*l[D]]-he),ct=me<be?1:-1;((te-he)*Ie+(h[2*l[F]+1]-me)*ze)*ct>((ae-he)*Ie+(h[2*l[W]+1]-me)*ze)*ct&&(we=!0)}if(we){const Ie=l[F],ze=l[O],ct=l[D];Ie!==ze&&Ie!==ct&&ze!==ct&&A.push(ct,ze,Ie),O--,O<0&&(O=B-1)}else{const Ie=l[W],ze=l[O],ct=l[D];Ie!==ze&&Ie!==ct&&ze!==ct&&A.push(ct,ze,Ie),D++,D>=B&&(D=0)}if(F===W)break}}function py(h,l,A,y,_,B,O,D,F){const W=_.length/2,te=O&&D&&F;if(W<fn.MAX_VERTEX_ARRAY_LENGTH){const ae=l.prepareSegment(W,A,y),he=ae.vertexLength;for(let we=0;we<B.length;we+=3)y.emplaceBack(he+B[we],he+B[we+1],he+B[we+2]);let me,be;ae.vertexLength+=W,ae.primitiveLength+=B.length/3,te&&(be=O.prepareSegment(W,A,D),me=be.vertexLength,be.vertexLength+=W);for(let we=0;we<_.length;we+=2)h(_[we],_[we+1]);if(te)for(let we=0;we<F.length;we++){const Ie=F[we];for(let ze=1;ze<Ie.length;ze+=2)D.emplaceBack(me+Ie[ze-1],me+Ie[ze]);be.primitiveLength+=Ie.length/2}}else(function(ae,he,me,be,we,Ie){const ze=[];for(let gt=0;gt<be.length/2;gt++)ze.push(-1);const ct={count:0};let Ge=0,Ze=ae.getOrCreateLatestSegment(he,me),ht=Ze.vertexLength;for(let gt=2;gt<we.length;gt+=3){const Gt=we[gt-2],an=we[gt-1],rn=we[gt];let mn=ze[Gt]<Ge,zn=ze[an]<Ge,vn=ze[rn]<Ge;Ze.vertexLength+((mn?1:0)+(zn?1:0)+(vn?1:0))>fn.MAX_VERTEX_ARRAY_LENGTH&&(Ze=ae.createNewSegment(he,me),Ge=ct.count,mn=!0,zn=!0,vn=!0,ht=0);const sn=ip(ze,be,Ie,ct,Gt,mn,Ze),$t=ip(ze,be,Ie,ct,an,zn,Ze),ri=ip(ze,be,Ie,ct,rn,vn,Ze);me.emplaceBack(ht+sn-Ge,ht+$t-Ge,ht+ri-Ge),Ze.primitiveLength++}})(l,A,y,_,B,h),te&&(function(ae,he,me,be,we,Ie){const ze=[];for(let gt=0;gt<be.length/2;gt++)ze.push(-1);const ct={count:0};let Ge=0,Ze=ae.getOrCreateLatestSegment(he,me),ht=Ze.vertexLength;for(let gt=0;gt<we.length;gt++){const Gt=we[gt];for(let an=1;an<we[gt].length;an+=2){const rn=Gt[an-1],mn=Gt[an];let zn=ze[rn]<Ge,vn=ze[mn]<Ge;Ze.vertexLength+((zn?1:0)+(vn?1:0))>fn.MAX_VERTEX_ARRAY_LENGTH&&(Ze=ae.createNewSegment(he,me),Ge=ct.count,zn=!0,vn=!0,ht=0);const sn=ip(ze,be,Ie,ct,rn,zn,Ze),$t=ip(ze,be,Ie,ct,mn,vn,Ze);me.emplaceBack(ht+sn-Ge,ht+$t-Ge),Ze.primitiveLength++}}})(O,A,D,_,F,h),l.forceNewSegmentOnNextPrepare(),O?.forceNewSegmentOnNextPrepare()}function ip(h,l,A,y,_,B,O){if(B){const D=y.count;return A(l[2*_],l[2*_+1]),h[_]=y.count,y.count++,O.vertexLength++,D}return h[_]}class cA{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Le,this.indexArray=new zt,this.indexArray2=new jt,this.programConfigurations=new Ho(l.layers,l.zoom),this.segments=new fn,this.segments2=new fn,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){this.hasDependencies=Vf("fill",this.layers,A);const _=this.layers[0].layout.get("fill-sort-key"),B=!_.isConstant(),O=[];for(const{feature:D,id:F,index:W,sourceLayerIndex:te}of l){const ae=this.layers[0]._featureFilter.needGeometry,he=bh(D,ae);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),he,y))continue;const me=B?_.evaluate(he,{},y,A.availableImages):void 0,be={id:F,properties:D.properties,type:D.type,sourceLayerIndex:te,index:W,geometry:ae?he.geometry:da(D),patterns:{},sortKey:me};O.push(be)}B&&O.sort(((D,F)=>D.sortKey-F.sortKey));for(const D of O){const{geometry:F,index:W,sourceLayerIndex:te}=D;if(this.hasDependencies){const ae=Zg("fill",this.layers,D,{zoom:this.zoom},A);this.patternFeatures.push(ae)}else this.addFeature(D,F,W,y,{},A.subdivisionGranularity);A.featureIndex.insert(l[W].feature,F,W,te,this.index)}}update(l,A,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y})}addFeatures(l,A,y){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,A,y,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Jd),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,A,y,_,B,O){for(const D of Uf(A,500)){const F=md(D,_,O.fill.getGranularityForZoomLevel(_.z)),W=this.layoutVertexArray;py(((te,ae)=>{W.emplaceBack(te,ae)}),this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:B,canonical:_})}}let lC,tf;jn("FillBucket",cA,{omit:["layers","patternFeatures"]});var Jg={get paint(){return tf=tf||new Js({"fill-antialias":new mi(Mt.paint_fill["fill-antialias"]),"fill-opacity":new li(Mt.paint_fill["fill-opacity"]),"fill-color":new li(Mt.paint_fill["fill-color"]),"fill-outline-color":new li(Mt.paint_fill["fill-outline-color"]),"fill-translate":new mi(Mt.paint_fill["fill-translate"]),"fill-translate-anchor":new mi(Mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new LA(Mt.paint_fill["fill-pattern"])})},get layout(){return lC=lC||new Js({"fill-sort-key":new li(Mt.layout_fill["fill-sort-key"])})}};class e1 extends pl{constructor(l,A){super(l,Jg,A)}recalculate(l,A){super.recalculate(l,A);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new cA(l)}queryRadius(){return Yf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:A,transform:y,pixelsToTileUnits:_}){return Kc(ep(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,_),A)}isTileClipped(){return!0}}const O0=Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),h_=Ri([{name:"a_centroid",components:2,type:"Int16"}],4),{members:d_}=O0;class nf{constructor(l,A,y,_,B){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=_,this._values=B,l.readFields(f_,this,A)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const A=l.readVarint()+l.pos,y=[];let _,B=1,O=0,D=0,F=0;for(;l.pos<A;){if(O<=0){const W=l.readVarint();B=7&W,O=W>>3}if(O--,B===1||B===2)D+=l.readSVarint(),F+=l.readSVarint(),B===1&&(_&&y.push(_),_=[]),_&&_.push(new c(D,F));else{if(B!==7)throw new Error(`unknown command ${B}`);_&&_.push(_[0].clone())}}return _&&y.push(_),y}bbox(){const l=this._pbf;l.pos=this._geometry;const A=l.readVarint()+l.pos;let y=1,_=0,B=0,O=0,D=1/0,F=-1/0,W=1/0,te=-1/0;for(;l.pos<A;){if(_<=0){const ae=l.readVarint();y=7&ae,_=ae>>3}if(_--,y===1||y===2)B+=l.readSVarint(),O+=l.readSVarint(),B<D&&(D=B),B>F&&(F=B),O<W&&(W=O),O>te&&(te=O);else if(y!==7)throw new Error(`unknown command ${y}`)}return[D,W,F,te]}toGeoJSON(l,A,y){const _=this.extent*Math.pow(2,y),B=this.extent*l,O=this.extent*A,D=this.loadGeometry();function F(he){return[360*(he.x+B)/_-180,360/Math.PI*Math.atan(Math.exp((1-2*(he.y+O)/_)*Math.PI))-90]}function W(he){return he.map(F)}let te;if(this.type===1){const he=[];for(const be of D)he.push(be[0]);const me=W(he);te=he.length===1?{type:"Point",coordinates:me[0]}:{type:"MultiPoint",coordinates:me}}else if(this.type===2){const he=D.map(W);te=he.length===1?{type:"LineString",coordinates:he[0]}:{type:"MultiLineString",coordinates:he}}else{if(this.type!==3)throw new Error("unknown feature type");{const he=t1(D),me=[];for(const be of he)me.push(be.map(W));te=me.length===1?{type:"Polygon",coordinates:me[0]}:{type:"MultiPolygon",coordinates:me}}}const ae={type:"Feature",geometry:te,properties:this.properties};return this.id!=null&&(ae.id=this.id),ae}}function f_(h,l,A){h===1?l.id=A.readVarint():h===2?(function(y,_){const B=y.readVarint()+y.pos;for(;y.pos<B;){const O=_._keys[y.readVarint()],D=_._values[y.readVarint()];_.properties[O]=D}})(A,l):h===3?l.type=A.readVarint():h===4&&(l._geometry=A.pos)}function t1(h){const l=h.length;if(l<=1)return[h];const A=[];let y,_;for(let B=0;B<l;B++){const O=m_(h[B]);O!==0&&(_===void 0&&(_=O<0),_===O<0?(y&&A.push(y),y=[h[B]]):y&&y.push(h[B]))}return y&&A.push(y),A}function m_(h){let l=0;for(let A,y,_=0,B=h.length,O=B-1;_<B;O=_++)A=h[_],y=h[O],l+=(y.x-A.x)*(A.y+y.y);return l}nf.types=["Unknown","Point","LineString","Polygon"];class s3{constructor(l,A){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(a3,this,A),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const A=this._pbf.readVarint()+this._pbf.pos;return new nf(this._pbf,A,this.extent,this._keys,this._values)}}function a3(h,l,A){h===15?l.version=A.readVarint():h===1?l.name=A.readString():h===5?l.extent=A.readVarint():h===2?l._features.push(A.pos):h===3?l._keys.push(A.readString()):h===4&&l._values.push((function(y){let _=null;const B=y.readVarint()+y.pos;for(;y.pos<B;){const O=y.readVarint()>>3;_=O===1?y.readString():O===2?y.readFloat():O===3?y.readDouble():O===4?y.readVarint64():O===5?y.readVarint():O===6?y.readSVarint():O===7?y.readBoolean():null}if(_==null)throw new Error("unknown feature value");return _})(A))}class Do{constructor(l,A){this.layers=l.readFields(bs,{},A)}}function bs(h,l,A){if(h===3){const y=new s3(A,A.readVarint()+A.pos);y.length&&(l[y.name]=y)}}const Wr=Math.pow(2,13);function Kr(h,l,A,y,_,B,O,D){h.emplaceBack(l,A,2*Math.floor(y*Wr)+O,_*Wr*2,B*Wr*2,Math.round(D))}class No{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Je,this.centroidVertexArray=new ge,this.indexArray=new zt,this.programConfigurations=new Ho(l.layers,l.zoom),this.segments=new fn,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){this.features=[],this.hasDependencies=Vf("fill-extrusion",this.layers,A);for(const{feature:_,id:B,index:O,sourceLayerIndex:D}of l){const F=this.layers[0]._featureFilter.needGeometry,W=bh(_,F);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),W,y))continue;const te={id:B,sourceLayerIndex:D,index:O,geometry:F?W.geometry:da(_),properties:_.properties,type:_.type,patterns:{}};this.hasDependencies?this.features.push(Zg("fill-extrusion",this.layers,te,{zoom:this.zoom},A)):this.addFeature(te,te.geometry,O,y,{},A.subdivisionGranularity),A.featureIndex.insert(_,te.geometry,O,D,this.index,!0)}}addFeatures(l,A,y){for(const _ of this.features){const{geometry:B}=_;this.addFeature(_,B,_.index,A,y,l.subdivisionGranularity)}}update(l,A,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,d_),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,h_.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,A,y,_,B,O){for(const D of Uf(A,500)){const F={x:0,y:0,sampleCount:0},W=this.layoutVertexArray.length;this.processPolygon(F,_,l,D,O);const te=this.layoutVertexArray.length-W,ae=Math.floor(F.x/F.sampleCount),he=Math.floor(F.y/F.sampleCount);for(let me=0;me<te;me++)this.centroidVertexArray.emplaceBack(ae,he)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:B,canonical:_})}processPolygon(l,A,y,_,B){if(_.length<1||rp(_[0]))return;for(const ae of _)ae.length!==0&&AA(l,ae);const O={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},D=B.fill.getGranularityForZoomLevel(A.z),F=nf.types[y.type]==="Polygon";for(const ae of _){if(ae.length===0||rp(ae))continue;const he=uA(ae,D,F);this._generateSideFaces(he,O)}if(!F)return;const W=md(_,A,D,!1),te=this.layoutVertexArray;py(((ae,he)=>{Kr(te,ae,he,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,W.verticesFlattened,W.indicesTriangles)}_generateSideFaces(l,A){let y=0;for(let _=1;_<l.length;_++){const B=l[_],O=l[_-1];if(Hf(B,O))continue;A.segment.vertexLength+4>fn.MAX_VERTEX_ARRAY_LENGTH&&(A.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const D=B.sub(O)._perp()._unit(),F=O.dist(B);y+F>32768&&(y=0),Kr(this.layoutVertexArray,B.x,B.y,D.x,D.y,0,0,y),Kr(this.layoutVertexArray,B.x,B.y,D.x,D.y,0,1,y),y+=F,Kr(this.layoutVertexArray,O.x,O.y,D.x,D.y,0,0,y),Kr(this.layoutVertexArray,O.x,O.y,D.x,D.y,0,1,y);const W=A.segment.vertexLength;this.indexArray.emplaceBack(W,W+2,W+1),this.indexArray.emplaceBack(W+1,W+2,W+3),A.segment.vertexLength+=4,A.segment.primitiveLength+=2}}}function AA(h,l){for(let A=0;A<l.length;A++){const y=l[A];A===l.length-1&&l[0].x===y.x&&l[0].y===y.y||(h.x+=y.x,h.y+=y.y,h.sampleCount++)}}function Hf(h,l){return h.x===l.x&&(h.x<0||h.x>mt)||h.y===l.y&&(h.y<0||h.y>mt)}function rp(h){return h.every((l=>l.x<0))||h.every((l=>l.x>mt))||h.every((l=>l.y<0))||h.every((l=>l.y>mt))}let gy;jn("FillExtrusionBucket",No,{omit:["layers","features"]});var xh={get paint(){return gy=gy||new Js({"fill-extrusion-opacity":new mi(Mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new li(Mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mi(Mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mi(Mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new LA(Mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new li(Mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new li(Mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mi(Mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ma extends pl{constructor(l,A){super(l,xh,A)}createBucket(l){return new No(l)}queryRadius(){return Yf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:B,pixelsToTileUnits:O,pixelPosMatrix:D}){const F=ep(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-B.bearingInRadians,O),W=this.paint.get("fill-extrusion-height").evaluate(A,y),te=this.paint.get("fill-extrusion-base").evaluate(A,y),ae=(function(me,be){const we=[];for(const Ie of me){const ze=[Ie.x,Ie.y,0,1];Oe(ze,ze,be),we.push(new c(ze[0]/ze[3],ze[1]/ze[3]))}return we})(F,D),he=(function(me,be,we,Ie){const ze=[],ct=[],Ge=Ie[8]*be,Ze=Ie[9]*be,ht=Ie[10]*be,gt=Ie[11]*be,Gt=Ie[8]*we,an=Ie[9]*we,rn=Ie[10]*we,mn=Ie[11]*we;for(const zn of me){const vn=[],sn=[];for(const $t of zn){const ri=$t.x,Xn=$t.y,ci=Ie[0]*ri+Ie[4]*Xn+Ie[12],Hn=Ie[1]*ri+Ie[5]*Xn+Ie[13],Li=Ie[2]*ri+Ie[6]*Xn+Ie[14],Mo=Ie[3]*ri+Ie[7]*Xn+Ie[15],Qr=Li+ht,ga=Mo+gt,Gc=ci+Gt,Wl=Hn+an,ya=Li+rn,ia=Mo+mn,Zo=new c((ci+Ge)/ga,(Hn+Ze)/ga);Zo.z=Qr/ga,vn.push(Zo);const Ya=new c(Gc/ia,Wl/ia);Ya.z=ya/ia,sn.push(Ya)}ze.push(vn),ct.push(sn)}return[ze,ct]})(_,te,W,D);return(function(me,be,we){let Ie=1/0;Kc(we,be)&&(Ie=Zf(we,be[0]));for(let ze=0;ze<be.length;ze++){const ct=be[ze],Ge=me[ze];for(let Ze=0;Ze<ct.length-1;Ze++){const ht=ct[Ze],gt=[ht,ct[Ze+1],Ge[Ze+1],Ge[Ze],ht];b0(we,gt)&&(Ie=Math.min(Ie,Zf(we,gt)))}}return Ie!==1/0&&Ie})(he[0],he[1],ae)}}function NA(h,l){return h.x*l.x+h.y*l.y}function Zf(h,l){if(h.length===1){let A=0;const y=l[A++];let _;for(;!_||y.equals(_);)if(_=l[A++],!_)return 1/0;for(;A<l.length;A++){const B=l[A],O=h[0],D=_.sub(y),F=B.sub(y),W=O.sub(y),te=NA(D,D),ae=NA(D,F),he=NA(F,F),me=NA(W,D),be=NA(W,F),we=te*he-ae*ae,Ie=(he*me-ae*be)/we,ze=(te*be-ae*me)/we,ct=y.z*(1-Ie-ze)+_.z*Ie+B.z*ze;if(isFinite(ct))return ct}return 1/0}{let A=1/0;for(const y of l)A=Math.min(A,y.z);return A}}const uC=Ri([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:hA}=uC,I0=Ri([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:n1}=I0,zc=Math.cos(Math.PI/180*37.5),yy=Math.pow(2,14)/.5;class op{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((A=>{this.gradients[A.id]={}})),this.layoutVertexArray=new nt,this.layoutVertexArray2=new tt,this.indexArray=new zt,this.programConfigurations=new Ho(l.layers,l.zoom),this.segments=new fn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id))}populate(l,A,y){this.hasDependencies=Vf("line",this.layers,A)||this.hasLineDasharray(this.layers);const _=this.layers[0].layout.get("line-sort-key"),B=!_.isConstant(),O=[];for(const{feature:D,id:F,index:W,sourceLayerIndex:te}of l){const ae=this.layers[0]._featureFilter.needGeometry,he=bh(D,ae);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom),he,y))continue;const me=B?_.evaluate(he,{},y):void 0,be={id:F,properties:D.properties,type:D.type,sourceLayerIndex:te,index:W,geometry:ae?he.geometry:da(D),patterns:{},dashes:{},sortKey:me};O.push(be)}B&&O.sort(((D,F)=>D.sortKey-F.sortKey));for(const D of O){const{geometry:F,index:W,sourceLayerIndex:te}=D;this.hasDependencies?(Vf("line",this.layers,A)?Zg("line",this.layers,D,{zoom:this.zoom},A):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,D,this.zoom,A),this.patternFeatures.push(D)):this.addFeature(D,F,W,y,{},{},A.subdivisionGranularity),A.featureIndex.insert(l[W].feature,F,W,te,this.index)}}update(l,A,y,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,A,this.stateDependentLayers,{imagePositions:y,dashPositions:_})}addFeatures(l,A,y,_){for(const B of this.patternFeatures)this.addFeature(B,B.geometry,B.index,A,y,_,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,n1)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,hA),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,A,y,_,B,O,D){const F=this.layers[0].layout,W=F.get("line-join").evaluate(l,{}),te=F.get("line-cap"),ae=F.get("line-miter-limit"),he=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const me of A)this.addLine(me,l,W,te,ae,he,_,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,y,{imagePositions:B,dashPositions:O,canonical:_})}addLine(l,A,y,_,B,O,D,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=uA(l,D?F.line.getGranularityForZoomLevel(D.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ge=0;Ge<l.length-1;Ge++)this.totalDistance+=l[Ge].dist(l[Ge+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const W=nf.types[A.type]==="Polygon";let te=l.length;for(;te>=2&&l[te-1].equals(l[te-2]);)te--;let ae=0;for(;ae<te-1&&l[ae].equals(l[ae+1]);)ae++;if(te<(W?3:2))return;y==="bevel"&&(B=1.05);const he=this.overscaling<=16?122880/(512*this.overscaling):0,me=this.segments.prepareSegment(10*te,this.layoutVertexArray,this.indexArray);let be,we,Ie,ze,ct;this.e1=this.e2=-1,W&&(be=l[te-2],ct=l[ae].sub(be)._unit()._perp());for(let Ge=ae;Ge<te;Ge++){if(Ie=Ge===te-1?W?l[ae+1]:void 0:l[Ge+1],Ie&&l[Ge].equals(Ie))continue;ct&&(ze=ct),be&&(we=be),be=l[Ge],ct=Ie?Ie.sub(be)._unit()._perp():ze,ze=ze||ct;let Ze=ze.add(ct);Ze.x===0&&Ze.y===0||Ze._unit();const ht=ze.x*ct.x+ze.y*ct.y,gt=Ze.x*ct.x+Ze.y*ct.y,Gt=gt!==0?1/gt:1/0,an=2*Math.sqrt(2-2*gt),rn=gt<zc&&we&&Ie,mn=ze.x*ct.y-ze.y*ct.x>0;if(rn&&Ge>ae){const sn=be.dist(we);if(sn>2*he){const $t=be.sub(be.sub(we)._mult(he/sn)._round());this.updateDistance(we,$t),this.addCurrentVertex($t,ze,0,0,me),we=$t}}const zn=we&&Ie;let vn=zn?y:W?"butt":_;if(zn&&vn==="round"&&(Gt<O?vn="miter":Gt<=2&&(vn="fakeround")),vn==="miter"&&Gt>B&&(vn="bevel"),vn==="bevel"&&(Gt>2&&(vn="flipbevel"),Gt<B&&(vn="miter")),we&&this.updateDistance(we,be),vn==="miter")Ze._mult(Gt),this.addCurrentVertex(be,Ze,0,0,me);else if(vn==="flipbevel"){if(Gt>100)Ze=ct.mult(-1);else{const sn=Gt*ze.add(ct).mag()/ze.sub(ct).mag();Ze._perp()._mult(sn*(mn?-1:1))}this.addCurrentVertex(be,Ze,0,0,me),this.addCurrentVertex(be,Ze.mult(-1),0,0,me)}else if(vn==="bevel"||vn==="fakeround"){const sn=-Math.sqrt(Gt*Gt-1),$t=mn?sn:0,ri=mn?0:sn;if(we&&this.addCurrentVertex(be,ze,$t,ri,me),vn==="fakeround"){const Xn=Math.round(180*an/Math.PI/20);for(let ci=1;ci<Xn;ci++){let Hn=ci/Xn;if(Hn!==.5){const Mo=Hn-.5;Hn+=Hn*Mo*(Hn-1)*((1.0904+ht*(ht*(3.55645-1.43519*ht)-3.2452))*Mo*Mo+(.848013+ht*(.215638*ht-1.06021)))}const Li=ct.sub(ze)._mult(Hn)._add(ze)._unit()._mult(mn?-1:1);this.addHalfVertex(be,Li.x,Li.y,!1,mn,0,me)}}Ie&&this.addCurrentVertex(be,ct,-$t,-ri,me)}else if(vn==="butt")this.addCurrentVertex(be,Ze,0,0,me);else if(vn==="square"){const sn=we?1:-1;this.addCurrentVertex(be,Ze,sn,sn,me)}else vn==="round"&&(we&&(this.addCurrentVertex(be,ze,0,0,me),this.addCurrentVertex(be,ze,1,1,me,!0)),Ie&&(this.addCurrentVertex(be,ct,-1,-1,me,!0),this.addCurrentVertex(be,ct,0,0,me)));if(rn&&Ge<te-1){const sn=be.dist(Ie);if(sn>2*he){const $t=be.add(Ie.sub(be)._mult(he/sn)._round());this.updateDistance(be,$t),this.addCurrentVertex($t,ct,0,0,me),be=$t}}}}addCurrentVertex(l,A,y,_,B,O=!1){const D=A.y*_-A.x,F=-A.y-A.x*_;this.addHalfVertex(l,A.x+A.y*y,A.y-A.x*y,O,!1,y,B),this.addHalfVertex(l,D,F,O,!0,-_,B),this.distance>yy/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,A,y,_,B,O))}addHalfVertex({x:l,y:A},y,_,B,O,D,F){const W=.5*(this.lineClips?this.scaledDistance*(yy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(B?1:0),(A<<1)+(O?1:0),Math.round(63*y)+128,Math.round(63*_)+128,1+(D===0?0:D<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const te=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,te,this.e2),F.primitiveLength++),O?this.e2=te:this.e1=te}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,A){this.distance+=l.dist(A),this.updateScaledDistance()}hasLineDasharray(l){for(const A of l){const y=A.paint.get("line-dasharray");if(y&&!y.isConstant())return!0}return!1}addLineDashDependencies(l,A,y,_){for(const B of l){const O=B.paint.get("line-dasharray");if(!O||O.value.kind==="constant")continue;const D=B.layout.get("line-cap")==="round",F={dasharray:O.value.evaluate({zoom:y-1},A,{}),round:D},W={dasharray:O.value.evaluate({zoom:y},A,{}),round:D},te={dasharray:O.value.evaluate({zoom:y+1},A,{}),round:D},ae=`${F.dasharray.join(",")},${F.round}`,he=`${W.dasharray.join(",")},${W.round}`,me=`${te.dasharray.join(",")},${te.round}`;_.dashDependencies[ae]=F,_.dashDependencies[he]=W,_.dashDependencies[me]=te,A.dashes[B.id]={min:ae,mid:he,max:me}}}}let cC,Xf;jn("LineBucket",op,{omit:["layers","patternFeatures"]});var i1={get paint(){return Xf=Xf||new Js({"line-opacity":new li(Mt.paint_line["line-opacity"]),"line-color":new li(Mt.paint_line["line-color"]),"line-translate":new mi(Mt.paint_line["line-translate"]),"line-translate-anchor":new mi(Mt.paint_line["line-translate-anchor"]),"line-width":new li(Mt.paint_line["line-width"]),"line-gap-width":new li(Mt.paint_line["line-gap-width"]),"line-offset":new li(Mt.paint_line["line-offset"]),"line-blur":new li(Mt.paint_line["line-blur"]),"line-dasharray":new LA(Mt.paint_line["line-dasharray"]),"line-pattern":new LA(Mt.paint_line["line-pattern"]),"line-gradient":new rl(Mt.paint_line["line-gradient"])})},get layout(){return cC=cC||new Js({"line-cap":new mi(Mt.layout_line["line-cap"]),"line-join":new li(Mt.layout_line["line-join"]),"line-miter-limit":new mi(Mt.layout_line["line-miter-limit"]),"line-round-limit":new mi(Mt.layout_line["line-round-limit"]),"line-sort-key":new li(Mt.layout_line["line-sort-key"])})}};class Jf extends li{possiblyEvaluate(l,A){return A=new Gr(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(l,A)}evaluate(l,A,y,_){return A=Ue({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(l,A,y,_)}}let Da;class em extends pl{constructor(l,A){super(l,i1,A),this.gradientVersion=0,Da||(Da=new Jf(i1.paint.properties["line-width"].specification),Da.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!(function(y){return y._styleExpression!==void 0})(A)&&A._styleExpression.expression instanceof ps,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,A){super.recalculate(l,A),this.paint._values["line-floorwidth"]=Da.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new op(l)}queryRadius(l){const A=l,y=sp(lA("line-width",this,A),lA("line-gap-width",this,A)),_=lA("line-offset",this,A);return y/2+Math.abs(_)+Yf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:A,featureState:y,geometry:_,transform:B,pixelsToTileUnits:O}){const D=ep(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-B.bearingInRadians,O),F=O/2*sp(this.paint.get("line-width").evaluate(A,y),this.paint.get("line-gap-width").evaluate(A,y)),W=this.paint.get("line-offset").evaluate(A,y);return W&&(_=(function(te,ae){const he=[];for(let me=0;me<te.length;me++){const be=qg(te[me]),we=[];for(let Ie=0;Ie<be.length;Ie++){const ze=be[Ie],ct=be[Ie-1],Ge=be[Ie+1],Ze=Ie===0?new c(0,0):ze.sub(ct)._unit()._perp(),ht=Ie===be.length-1?new c(0,0):Ge.sub(ze)._unit()._perp(),gt=Ze._add(ht)._unit(),Gt=gt.x*ht.x+gt.y*ht.y;Gt!==0&&gt._mult(1/Gt),we.push(gt._mult(ae)._add(ze))}he.push(we)}return he})(_,W*O)),(function(te,ae,he){for(let me=0;me<ae.length;me++){const be=ae[me];if(te.length>=3){for(let we=0;we<be.length;we++)if(hd(te,be[we]))return!0}if(qf(te,be,he))return!0}return!1})(D,_,F)}isTileClipped(){return!0}}function sp(h,l){return l>0?l+2*h:h}const rf=Ri([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),AC=Ri([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ri([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const hC=Ri([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ri([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dC=Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),r1=Ri([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function fC(h,l,A){return h.sections.forEach((y=>{y.text=(function(_,B,O){const D=B.layout.get("text-transform").evaluate(O,{});return D==="uppercase"?_=_.toLocaleUpperCase():D==="lowercase"&&(_=_.toLocaleLowerCase()),kc.applyArabicShaping&&(_=kc.applyArabicShaping(_)),_})(y.text,l,A)})),h}Ri([{name:"triangle",components:3,type:"Uint16"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ri([{type:"Float32",name:"offsetX"}]),Ri([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ri([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Ro=24;const T0={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},jc={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},p_={40:!0};function mC(h,l,A,y,_,B){if("fontStack"in l){const O=A[l.fontStack],D=O&&O[h];return D?D.metrics.advance*l.scale+_:0}{const O=y[l.imageName];return O?O.displaySize[0]*l.scale*Ro/B+_:0}}function pC(h,l,A,y){const _=Math.pow(h-l,2);return y?h<l?_/2:2*_:_+Math.abs(A)*A}function of(h,l,A){let y=0;return h===10&&(y-=1e4),A&&(y+=150),h!==40&&h!==65288||(y+=50),l!==41&&l!==65289||(y+=50),y}function o1(h,l,A,y,_,B){let O=null,D=pC(l,A,_,B);for(const F of y){const W=pC(l-F.x,A,_,B)+F.badness;W<=D&&(O=F,D=W)}return{index:h,x:l,priorBreak:O,badness:D}}function vy(h){return h?vy(h.priorBreak).concat(h.index):[]}class Mh{constructor(l="",A=[],y=[]){this.text=l,this.sections=A,this.sectionIndex=y,this.imageSectionID=null}static fromFeature(l,A){const y=new Mh;for(let _=0;_<l.sections.length;_++){const B=l.sections[_];B.image?y.addImageSection(B):y.addTextSection(B,A)}return y}length(){return[...this.text].length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}verticalizePunctuation(){this.text=(function(l){let A="",y={premature:!0,value:void 0};const _=l[Symbol.iterator]();let B=_.next();const O=l[Symbol.iterator]();O.next();let D=O.next();for(;!B.done;)A+=!D.done&&Hm(D.value.codePointAt(0))&&!T0[D.value]||!y.premature&&Hm(y.value.codePointAt(0))&&!T0[y.value]||!T0[B.value]?B.value:T0[B.value],y={value:B.value,premature:!1},B=_.next(),D=O.next();return A})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const l=this.text.match(/^\s*/),A=l?l[0].length:0,y=this.text.match(/\S\s*$/),_=y?y[0].length-1:0;this.text=this.text.substring(A,this.text.length-_),this.sectionIndex=this.sectionIndex.slice(A,this.sectionIndex.length-_)}substring(l,A){const y=[...this.text].slice(l,A).join(""),_=this.sectionIndex.slice(l,A);return new Mh(y,this.sections,_)}toCodeUnitIndex(l){return[...this.text].slice(0,l).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,A)=>Math.max(l,this.sections[A].scale)),0)}getMaxImageSize(l){let A=0,y=0;for(let _=0;_<this.length();_++){const B=this.getSection(_);if("imageName"in B){const O=l[B.imageName];if(!O)continue;const D=O.displaySize;A=Math.max(A,D[0]),y=Math.max(y,D[1])}}return{maxImageWidth:A,maxImageHeight:y}}addTextSection(l,A){this.text+=l.text,this.sections.push({scale:l.scale||1,verticalAlign:l.verticalAlign||"bottom",fontStack:l.fontStack||A});const y=this.sections.length-1;this.sectionIndex.push(...[...l.text].map((()=>y)))}addImageSection(l){const A=l.image?l.image.name:"";if(A.length===0)return void wt("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push({scale:1,verticalAlign:l.verticalAlign||"bottom",imageName:A}),this.sectionIndex.push(this.sections.length-1)):wt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(l,A,y,_,B){const O=[],D=this.determineAverageLineWidth(l,A,y,_,B),F=this.hasZeroWidthSpaces();let W=0,te=0;const ae=this.text[Symbol.iterator]();let he=ae.next();const me=this.text[Symbol.iterator]();me.next();let be=me.next();const we=this.text[Symbol.iterator]();we.next(),we.next();let Ie=we.next();for(;!he.done;){const ze=this.getSection(te),ct=he.value.codePointAt(0);if(p0(ct)||(W+=mC(ct,ze,y,_,l,B)),!be.done){const Ge=UA(ct),Ze=be.value.codePointAt(0);(jc[ct]||Ge||"imageName"in ze||!Ie.done&&p_[Ze])&&O.push(o1(te+1,W,D,O,of(ct,Ze,Ge&&F),!1))}te++,he=ae.next(),be=me.next(),Ie=we.next()}return vy(o1(this.length(),W,D,O,0,!0))}determineAverageLineWidth(l,A,y,_,B){let O=0,D=0;for(const F of this.text){const W=this.getSection(D);O+=mC(F.codePointAt(0),W,y,_,l,B),D++}return O/Math.max(1,Math.ceil(O/A))}}const Cy=4294967296,k0=1/Cy,gC=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class s1{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,A,y=this.length){for(;this.pos<y;){const _=this.readVarint(),B=_>>3,O=this.pos;this.type=7&_,l(B,A,this),this.pos===O&&this.skip(_)}return A}readMessage(l,A){return this.readFields(l,A,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Cy;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Cy;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const A=this.buf;let y,_;return _=A[this.pos++],y=127&_,_<128?y:(_=A[this.pos++],y|=(127&_)<<7,_<128?y:(_=A[this.pos++],y|=(127&_)<<14,_<128?y:(_=A[this.pos++],y|=(127&_)<<21,_<128?y:(_=A[this.pos],y|=(15&_)<<28,(function(B,O,D){const F=D.buf;let W,te;if(te=F[D.pos++],W=(112&te)>>4,te<128||(te=F[D.pos++],W|=(127&te)<<3,te<128)||(te=F[D.pos++],W|=(127&te)<<10,te<128)||(te=F[D.pos++],W|=(127&te)<<17,te<128)||(te=F[D.pos++],W|=(127&te)<<24,te<128)||(te=F[D.pos++],W|=(1&te)<<31,te<128))return sf(B,W,O);throw new Error("Expected varint not more than 10 bytes")})(y,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,A=this.pos;return this.pos=l,l-A>=12&&gC?gC.decode(this.buf.subarray(A,l)):(function(y,_,B){let O="",D=_;for(;D<B;){const F=y[D];let W,te,ae,he=null,me=F>239?4:F>223?3:F>191?2:1;if(D+me>B)break;me===1?F<128&&(he=F):me===2?(W=y[D+1],(192&W)==128&&(he=(31&F)<<6|63&W,he<=127&&(he=null))):me===3?(W=y[D+1],te=y[D+2],(192&W)==128&&(192&te)==128&&(he=(15&F)<<12|(63&W)<<6|63&te,(he<=2047||he>=55296&&he<=57343)&&(he=null))):me===4&&(W=y[D+1],te=y[D+2],ae=y[D+3],(192&W)==128&&(192&te)==128&&(192&ae)==128&&(he=(15&F)<<18|(63&W)<<12|(63&te)<<6|63&ae,(he<=65535||he>=1114112)&&(he=null))),he===null?(he=65533,me=1):he>65535&&(he-=65536,O+=String.fromCharCode(he>>>10&1023|55296),he=56320|1023&he),O+=String.fromCharCode(he),D+=me}return O})(this.buf,A,l)}readBytes(){const l=this.readVarint()+this.pos,A=this.buf.subarray(this.pos,l);return this.pos=l,A}readPackedVarint(l=[],A){const y=this.readPackedEnd();for(;this.pos<y;)l.push(this.readVarint(A));return l}readPackedSVarint(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const A=this.readPackedEnd();for(;this.pos<A;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const A=7&l;if(A===0)for(;this.buf[this.pos++]>127;);else if(A===2)this.pos=this.readVarint()+this.pos;else if(A===5)this.pos+=4;else{if(A!==1)throw new Error(`Unimplemented type: ${A}`);this.pos+=8}}writeTag(l,A){this.writeVarint(l<<3|A)}realloc(l){let A=this.length||16;for(;A<this.pos+l;)A*=2;if(A!==this.length){const y=new Uint8Array(A);y.set(this.buf),this.buf=y,this.dataView=new DataView(y.buffer),this.length=A}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*k0),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*k0),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(A,y){let _,B;if(A>=0?(_=A%4294967296|0,B=A/4294967296|0):(_=~(-A%4294967296),B=~(-A/4294967296),4294967295^_?_=_+1|0:(_=0,B=B+1|0)),A>=18446744073709552e3||A<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");y.realloc(10),(function(O,D,F){F.buf[F.pos++]=127&O|128,O>>>=7,F.buf[F.pos++]=127&O|128,O>>>=7,F.buf[F.pos++]=127&O|128,O>>>=7,F.buf[F.pos++]=127&O|128,F.buf[F.pos]=127&(O>>>=7)})(_,0,y),(function(O,D){const F=(7&O)<<4;D.buf[D.pos++]|=F|((O>>>=3)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O|((O>>>=7)?128:0),O&&(D.buf[D.pos++]=127&O)))))})(B,y)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const A=this.pos;this.pos=(function(_,B,O){for(let D,F,W=0;W<B.length;W++){if(D=B.charCodeAt(W),D>55295&&D<57344){if(!F){D>56319||W+1===B.length?(_[O++]=239,_[O++]=191,_[O++]=189):F=D;continue}if(D<56320){_[O++]=239,_[O++]=191,_[O++]=189,F=D;continue}D=F-55296<<10|D-56320|65536,F=null}else F&&(_[O++]=239,_[O++]=191,_[O++]=189,F=null);D<128?_[O++]=D:(D<2048?_[O++]=D>>6|192:(D<65536?_[O++]=D>>12|224:(_[O++]=D>>18|240,_[O++]=D>>12&63|128),_[O++]=D>>6&63|128),_[O++]=63&D|128)}return O})(this.buf,l,this.pos);const y=this.pos-A;y>=128&&by(A,y,this),this.pos=A-1,this.writeVarint(y),this.pos+=y}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const A=l.length;this.writeVarint(A),this.realloc(A);for(let y=0;y<A;y++)this.buf[this.pos++]=l[y]}writeRawMessage(l,A){this.pos++;const y=this.pos;l(A,this);const _=this.pos-y;_>=128&&by(y,_,this),this.pos=y-1,this.writeVarint(_),this.pos+=_}writeMessage(l,A,y){this.writeTag(l,2),this.writeRawMessage(A,y)}writePackedVarint(l,A){A.length&&this.writeMessage(l,l3,A)}writePackedSVarint(l,A){A.length&&this.writeMessage(l,u3,A)}writePackedBoolean(l,A){A.length&&this.writeMessage(l,y_,A)}writePackedFloat(l,A){A.length&&this.writeMessage(l,c3,A)}writePackedDouble(l,A){A.length&&this.writeMessage(l,g_,A)}writePackedFixed32(l,A){A.length&&this.writeMessage(l,D0,A)}writePackedSFixed32(l,A){A.length&&this.writeMessage(l,_y,A)}writePackedFixed64(l,A){A.length&&this.writeMessage(l,a1,A)}writePackedSFixed64(l,A){A.length&&this.writeMessage(l,v_,A)}writeBytesField(l,A){this.writeTag(l,2),this.writeBytes(A)}writeFixed32Field(l,A){this.writeTag(l,5),this.writeFixed32(A)}writeSFixed32Field(l,A){this.writeTag(l,5),this.writeSFixed32(A)}writeFixed64Field(l,A){this.writeTag(l,1),this.writeFixed64(A)}writeSFixed64Field(l,A){this.writeTag(l,1),this.writeSFixed64(A)}writeVarintField(l,A){this.writeTag(l,0),this.writeVarint(A)}writeSVarintField(l,A){this.writeTag(l,0),this.writeSVarint(A)}writeStringField(l,A){this.writeTag(l,2),this.writeString(A)}writeFloatField(l,A){this.writeTag(l,5),this.writeFloat(A)}writeDoubleField(l,A){this.writeTag(l,1),this.writeDouble(A)}writeBooleanField(l,A){this.writeVarintField(l,+A)}}function sf(h,l,A){return A?4294967296*l+(h>>>0):4294967296*(l>>>0)+(h>>>0)}function by(h,l,A){const y=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));A.realloc(y);for(let _=A.pos-1;_>=h;_--)A.buf[_+y]=A.buf[_]}function l3(h,l){for(let A=0;A<h.length;A++)l.writeVarint(h[A])}function u3(h,l){for(let A=0;A<h.length;A++)l.writeSVarint(h[A])}function c3(h,l){for(let A=0;A<h.length;A++)l.writeFloat(h[A])}function g_(h,l){for(let A=0;A<h.length;A++)l.writeDouble(h[A])}function y_(h,l){for(let A=0;A<h.length;A++)l.writeBoolean(h[A])}function D0(h,l){for(let A=0;A<h.length;A++)l.writeFixed32(h[A])}function _y(h,l){for(let A=0;A<h.length;A++)l.writeSFixed32(h[A])}function a1(h,l){for(let A=0;A<h.length;A++)l.writeFixed64(h[A])}function v_(h,l){for(let A=0;A<h.length;A++)l.writeSFixed64(h[A])}function yC(h,l,A){h===1&&A.readMessage(vC,l)}function vC(h,l,A){if(h===3){const{id:y,bitmap:_,width:B,height:O,left:D,top:F,advance:W}=A.readMessage(xy,{});l.push({id:y,bitmap:new dd({width:B+6,height:O+6},_),metrics:{width:B,height:O,left:D,top:F,advance:W}})}}function xy(h,l,A){h===1?l.id=A.readVarint():h===2?l.bitmap=A.readBytes():h===3?l.width=A.readVarint():h===4?l.height=A.readVarint():h===5?l.left=A.readSVarint():h===6?l.top=A.readSVarint():h===7&&(l.advance=A.readVarint())}function My(h){let l=0,A=0;for(const O of h)l+=O.w*O.h,A=Math.max(A,O.w);h.sort(((O,D)=>D.h-O.h));const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),A),h:1/0}];let _=0,B=0;for(const O of h)for(let D=y.length-1;D>=0;D--){const F=y[D];if(!(O.w>F.w||O.h>F.h)){if(O.x=F.x,O.y=F.y,B=Math.max(B,O.y+O.h),_=Math.max(_,O.x+O.w),O.w===F.w&&O.h===F.h){const W=y.pop();W&&D<y.length&&(y[D]=W)}else O.h===F.h?(F.x+=O.w,F.w-=O.w):O.w===F.w?(F.y+=O.h,F.h-=O.h):(y.push({x:F.x+O.w,y:F.y,w:F.w-O.w,h:O.h}),F.y+=O.h,F.h-=O.h);break}}return{w:_,h:B,fill:l/(_*B)||0}}class ap{constructor(l,{pixelRatio:A,version:y,stretchX:_,stretchY:B,content:O,textFitWidth:D,textFitHeight:F}){this.paddedRect=l,this.pixelRatio=A,this.stretchX=_,this.stretchY=B,this.content=O,this.version=y,this.textFitWidth=D,this.textFitHeight=F}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class wy{constructor(l,A){const y={},_={};this.haveRenderCallbacks=[];const B=[];this.addImages(l,y,B),this.addImages(A,_,B);const{w:O,h:D}=My(B),F=new ta({width:O||1,height:D||1});for(const W in l){const te=l[W],ae=y[W].paddedRect;ta.copy(te.data,F,{x:0,y:0},{x:ae.x+1,y:ae.y+1},te.data)}for(const W in A){const te=A[W],ae=_[W].paddedRect,he=ae.x+1,me=ae.y+1,be=te.data.width,we=te.data.height;ta.copy(te.data,F,{x:0,y:0},{x:he,y:me},te.data),ta.copy(te.data,F,{x:0,y:we-1},{x:he,y:me-1},{width:be,height:1}),ta.copy(te.data,F,{x:0,y:0},{x:he,y:me+we},{width:be,height:1}),ta.copy(te.data,F,{x:be-1,y:0},{x:he-1,y:me},{width:1,height:we}),ta.copy(te.data,F,{x:0,y:0},{x:he+be,y:me},{width:1,height:we})}this.image=F,this.iconPositions=y,this.patternPositions=_}addImages(l,A,y){for(const _ in l){const B=l[_],O={x:0,y:0,w:B.data.width+2,h:B.data.height+2};y.push(O),A[_]=new ap(O,B),B.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,A){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in l.updatedImages)this.patchUpdatedImage(this.iconPositions[y],l.getImage(y),A),this.patchUpdatedImage(this.patternPositions[y],l.getImage(y),A)}patchUpdatedImage(l,A,y){if(!l||!A||l.version===A.version)return;l.version=A.version;const[_,B]=l.tl;y.update(A.data,void 0,{x:_,y:B})}}var gd;function Po(h,l,A,y,_,B,O,D,F,W,te,ae,he,me,be){const we=Mh.fromFeature(h,_);let Ie;ae===s.aA.vertical&&we.verticalizePunctuation();let ze=we.determineLineBreaks(W,B,l,y,me);const{processBidirectionalText:ct,processStyledBidirectionalText:Ge}=kc;if(ct&&we.sections.length===1){Ie=[],ze=ze.map((Gt=>we.toCodeUnitIndex(Gt)));const gt=ct(we.toString(),ze);for(const Gt of gt){const an=[...Gt].map((()=>0));Ie.push(new Mh(Gt,we.sections,an))}}else if(Ge){Ie=[],ze=ze.map((rn=>we.toCodeUnitIndex(rn)));let gt=0;const Gt=[];for(const rn of we.text)Gt.push(...Array(rn.length).fill(we.sectionIndex[gt])),gt++;const an=Ge(we.text,Gt,ze);for(const rn of an){const mn=[];let zn="";for(const vn of rn[0])mn.push(rn[1][zn.length]),zn+=vn;Ie.push(new Mh(rn[0],we.sections,mn))}}else Ie=(function(gt,Gt){const an=[];let rn=0;for(const mn of Gt)an.push(gt.substring(rn,mn)),rn=mn;return rn<gt.length()&&an.push(gt.substring(rn,gt.length())),an})(we,ze);const Ze=[],ht={positionedLines:Ze,text:we.toString(),top:te[1],bottom:te[1],left:te[0],right:te[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return(function(gt,Gt,an,rn,mn,zn,vn,sn,$t,ri,Xn,ci){let Hn=0,Li=0,Mo=0,Qr=0;const ga=sn==="right"?1:sn==="left"?0:.5,Gc=Ro/ci;let Wl=0;for(const Zo of mn){Zo.trim();const Ya=Zo.getMaxScale(),al={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Wl]=al;const $s=al.positionedGlyphs;let Bh=0;if(!Zo.length()){Li+=zn,++Wl;continue}const Wc=A3(rn,Zo,Gc);let Oh=0;for(const Ku of Zo.text){const Pa=Zo.getSection(Oh),Ql=Ku.codePointAt(0),Va=Sy($t,Xn,Ql),Fu={glyph:Ql,imageName:null,x:Hn,y:Li+-17,vertical:Va,scale:1,fontStack:"",sectionIndex:Zo.getSectionIndex(Oh),metrics:null,rect:null};let _1;if("fontStack"in Pa){if(_1=h3(Pa,Ql,Va,Wc,Gt,an),!_1)continue;Fu.fontStack=Pa.fontStack}else{if(gt.iconsInText=!0,Pa.scale*=Gc,_1=d3(Pa,Va,Ya,Wc,rn),!_1)continue;Bh=Math.max(Bh,_1.imageOffset),Fu.imageName=Pa.imageName}const{rect:yp,metrics:C3,baselineOffset:$y}=_1;Fu.y+=$y,Fu.scale=Pa.scale,Fu.metrics=C3,Fu.rect=yp,$s.push(Fu),Va?(gt.verticalizable=!0,Hn+=("imageName"in Pa?C3.advance:Ro)*Pa.scale+ri):Hn+=C3.advance*Pa.scale+ri,Oh++}$s.length!==0&&(Mo=Math.max(Hn-ri,Mo),P0($s,0,$s.length-1,ga)),Hn=0,al.lineOffset=Math.max(Bh,(Ya-1)*Ro);const cm=zn*Ya+Bh;Li+=cm,Qr=Math.max(cm,Qr),++Wl}const{horizontalAlign:ya,verticalAlign:ia}=l1(vn);(function(Zo,Ya,al,$s,Bh,Wc,Oh,cm,Ku){const Pa=(Ya-al)*Bh;let Ql=0;Ql=Wc!==Oh?-cm*$s- -17:-$s*Ku*Oh+.5*Oh;for(const Va of Zo)for(const Fu of Va.positionedGlyphs)Fu.x+=Pa,Fu.y+=Ql})(gt.positionedLines,ga,ya,ia,Mo,Qr,zn,Li,mn.length),gt.top+=-ia*Li,gt.bottom=gt.top+Li,gt.left+=-ya*Mo,gt.right=gt.left+Mo})(ht,l,A,y,Ie,O,D,F,ae,W,he,be),!(function(gt){for(const Gt of gt)if(Gt.positionedGlyphs.length!==0)return!1;return!0})(Ze)&&ht}function l1(h){let l=.5,A=.5;switch(h){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:l,verticalAlign:A}}function A3(h,l,A){const y=l.getMaxScale()*Ro,{maxImageWidth:_,maxImageHeight:B}=l.getMaxImageSize(h),O=Math.max(y,B*A);return{verticalLineContentWidth:Math.max(y,_*A),horizontalLineContentHeight:O}}function R0(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function Sy(h,l,A){return!(h===s.aA.horizontal||!l&&!m0(A)||l&&(p0(A)||(y=A,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function h3(h,l,A,y,_,B){const O=B[h.fontStack],D=(function(W,te,ae,he){if(W&&W.rect)return W;const me=te[ae.fontStack],be=me&&me[he];return be?{rect:null,metrics:be.metrics}:null})(O&&O[l],_,h,l);if(D===null)return null;let F;if(A)F=y.verticalLineContentWidth-h.scale*Ro;else{const W=R0(h.verticalAlign);F=(y.horizontalLineContentHeight-h.scale*Ro)*W}return{rect:D.rect,metrics:D.metrics,baselineOffset:F}}function d3(h,l,A,y,_){const B=_[h.imageName];if(!B)return null;const O=B.paddedRect,D=B.displaySize,F={width:D[0],height:D[1],left:1,top:-3,advance:l?D[1]:D[0]};let W;if(l)W=y.verticalLineContentWidth-D[1]*h.scale;else{const te=R0(h.verticalAlign);W=(y.horizontalLineContentHeight-D[1]*h.scale)*te}return{rect:O,metrics:F,baselineOffset:W,imageOffset:(l?D[0]:D[1])*h.scale-Ro*A}}function P0(h,l,A,y){if(y===0)return;const _=h[A],B=(h[A].x+_.metrics.advance*_.scale)*y;for(let O=l;O<=A;O++)h[O].x-=B}function lp(h,l,A){const{horizontalAlign:y,verticalAlign:_}=l1(A),B=l[0]-h.displaySize[0]*y,O=l[1]-h.displaySize[1]*_;return{image:h,top:O,bottom:O+h.displaySize[1],left:B,right:B+h.displaySize[0]}}function Ey(h){var l,A;let y=h.left,_=h.top,B=h.right-y,O=h.bottom-_;const D=(l=h.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",F=(A=h.image.textFitHeight)!==null&&A!==void 0?A:"stretchOrShrink",W=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(F==="proportional"){if(D==="stretchOnly"&&B/O<W||D==="proportional"){const te=Math.ceil(O*W);y*=te/B,B=te}}else if(D==="proportional"&&F==="stretchOnly"&&W!==0&&B/O>W){const te=Math.ceil(B/W);_*=te/O,O=te}return{x1:y,y1:_,x2:y+B,y2:_+O}}function u1(h,l,A,y,_,B){const O=h.image;let D;if(O.content){const Ie=O.content,ze=O.pixelRatio||1;D=[Ie[0]/ze,Ie[1]/ze,O.displaySize[0]-Ie[2]/ze,O.displaySize[1]-Ie[3]/ze]}const F=l.left*B,W=l.right*B;let te,ae,he,me;A==="width"||A==="both"?(me=_[0]+F-y[3],ae=_[0]+W+y[1]):(me=_[0]+(F+W-O.displaySize[0])/2,ae=me+O.displaySize[0]);const be=l.top*B,we=l.bottom*B;return A==="height"||A==="both"?(te=_[1]+be-y[0],he=_[1]+we+y[2]):(te=_[1]+(be+we-O.displaySize[1])/2,he=te+O.displaySize[1]),{image:O,top:te,right:ae,bottom:he,left:me,collisionPadding:D}}jn("ImagePosition",ap),jn("ImageAtlas",wy),s.aA=void 0,(gd=s.aA||(s.aA={}))[gd.none=0]="none",gd[gd.horizontal=1]="horizontal",gd[gd.vertical=2]="vertical",gd[gd.horizontalOnly=3]="horizontalOnly";const wh=128,uc=32640;function Sh(h,l){const{expression:A}=l;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Gr(h+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:_}=A;let B=0;for(;B<y.length&&y[B]<=h;)B++;B=Math.max(0,B-1);let O=B;for(;O<y.length&&y[O]<h+1;)O++;O=Math.min(y.length-1,O);const D=y[B],F=y[O];return A.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:F,interpolationType:_}:{kind:"camera",minZoom:D,maxZoom:F,minSize:A.evaluate(new Gr(D)),maxSize:A.evaluate(new Gr(F)),interpolationType:_}}}function up(h,l,A){let y="never";const _=h.get(l);return _?y=_:h.get(A)&&(y="always"),y}const f3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function c1(h,l,A,y,_,B,O,D,F,W,te,ae,he){const me=D?Math.min(uc,Math.round(D[0])):0,be=D?Math.min(uc,Math.round(D[1])):0;h.emplaceBack(l,A,Math.round(32*y),Math.round(32*_),B,O,(me<<1)+(F?1:0),be,16*W,16*te,256*ae,256*he)}function By(h,l,A){h.emplaceBack(l.x,l.y,A),h.emplaceBack(l.x,l.y,A),h.emplaceBack(l.x,l.y,A),h.emplaceBack(l.x,l.y,A)}function C_(h){for(const l of h.sections)if(oA(l.text))return!0;return!1}class Oy{constructor(l){this.layoutVertexArray=new lt,this.indexArray=new zt,this.programConfigurations=l,this.segments=new fn,this.dynamicLayoutVertexArray=new pt,this.opacityVertexArray=new _t,this.hasVisibleVertices=!1,this.placedSymbolArray=new b}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,A,y,_){this.isEmpty()||(y&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,rf.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,AC.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,f3,!0),this.opacityVertexBuffer.itemSize=1),(y||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}jn("SymbolBuffers",Oy);class CC{constructor(l,A,y){this.layoutVertexArray=new l,this.layoutAttributes=A,this.indexArray=new y,this.segments=new fn,this.collisionVertexArray=new Tt}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,hC.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}jn("CollisionBuffers",CC);class Nl{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((O=>O.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sh(this.zoom,A["text-size"]),this.iconSizeData=Sh(this.zoom,A["icon-size"]);const y=this.layers[0].layout,_=y.get("symbol-sort-key"),B=y.get("symbol-z-order");this.canOverlap=up(y,"text-overlap","text-allow-overlap")!=="never"||up(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=B!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(B==="viewport-y"||B==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map((O=>s.aA[O]))),this.stateDependentLayerIds=this.layers.filter((O=>O.isStateDependent())).map((O=>O.id)),this.sourceID=l.sourceID}createArrays(){this.text=new Oy(new Ho(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new Oy(new Ho(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new K,this.lineVertexArray=new N,this.symbolInstances=new k,this.textAnchorOffsets=new se}calculateGlyphDependencies(l,A,y,_,B){for(const O of l)if(A[O.codePointAt(0)]=!0,(y||_)&&B){const D=T0[O];D&&(A[D.codePointAt(0)]=!0)}}populate(l,A,y){const _=this.layers[0],B=_.layout,O=B.get("text-font"),D=B.get("text-field"),F=B.get("icon-image"),W=(D.value.kind!=="constant"||D.value.value instanceof ns&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),te=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,ae=B.get("symbol-sort-key");if(this.features=[],!W&&!te)return;const he=A.iconDependencies,me=A.glyphDependencies,be=A.availableImages,we=new Gr(this.zoom);for(const{feature:Ie,id:ze,index:ct,sourceLayerIndex:Ge}of l){const Ze=_._featureFilter.needGeometry,ht=bh(Ie,Ze);if(!_._featureFilter.filter(we,ht,y))continue;let gt,Gt;if(Ze||(ht.geometry=da(Ie)),W){const rn=_.getValueAndResolveTokens("text-field",ht,y,be),mn=ns.factory(rn),zn=this.hasRTLText=this.hasRTLText||C_(mn);(!zn||kc.getRTLTextPluginStatus()==="unavailable"||zn&&kc.isParsed())&&(gt=fC(mn,_,ht))}if(te){const rn=_.getValueAndResolveTokens("icon-image",ht,y,be);Gt=rn instanceof Ns?rn:Ns.fromString(rn)}if(!gt&&!Gt)continue;const an=this.sortFeaturesByKey?ae.evaluate(ht,{},y):void 0;if(this.features.push({id:ze,text:gt,icon:Gt,index:ct,sourceLayerIndex:Ge,geometry:ht.geometry,properties:Ie.properties,type:nf.types[Ie.type],sortKey:an}),Gt&&(he[Gt.name]=!0),gt){const rn=O.evaluate(ht,{},y).join(","),mn=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.aA.vertical)>=0;for(const zn of gt.sections)if(zn.image)he[zn.image.name]=!0;else{const vn=Tc(gt.toString()),sn=zn.fontStack||rn,$t=me[sn]=me[sn]||{};this.calculateGlyphDependencies(zn.text,$t,mn,this.allowVerticalPlacement,vn)}}}B.get("symbol-placement")==="line"&&(this.features=(function(Ie){const ze={},ct={},Ge=[];let Ze=0;function ht(rn){Ge.push(Ie[rn]),Ze++}function gt(rn,mn,zn){const vn=ct[rn];return delete ct[rn],ct[mn]=vn,Ge[vn].geometry[0].pop(),Ge[vn].geometry[0]=Ge[vn].geometry[0].concat(zn[0]),vn}function Gt(rn,mn,zn){const vn=ze[mn];return delete ze[mn],ze[rn]=vn,Ge[vn].geometry[0].shift(),Ge[vn].geometry[0]=zn[0].concat(Ge[vn].geometry[0]),vn}function an(rn,mn,zn){const vn=zn?mn[0][mn[0].length-1]:mn[0][0];return`${rn}:${vn.x}:${vn.y}`}for(let rn=0;rn<Ie.length;rn++){const mn=Ie[rn],zn=mn.geometry,vn=mn.text?mn.text.toString():null;if(!vn){ht(rn);continue}const sn=an(vn,zn),$t=an(vn,zn,!0);if(sn in ct&&$t in ze&&ct[sn]!==ze[$t]){const ri=Gt(sn,$t,zn),Xn=gt(sn,$t,Ge[ri].geometry);delete ze[sn],delete ct[$t],ct[an(vn,Ge[Xn].geometry,!0)]=Xn,Ge[ri].geometry=null}else sn in ct?gt(sn,$t,zn):$t in ze?Gt(sn,$t,zn):(ht(rn),ze[sn]=Ze-1,ct[$t]=Ze-1)}return Ge.filter((rn=>rn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Ie,ze)=>Ie.sortKey-ze.sortKey))}update(l,A,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,A,this.layers,{imagePositions:y}),this.icon.programConfigurations.updatePaintArrays(l,A,this.layers,{imagePositions:y}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,A){const y=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(A[l.segment+1]),B=l.dist(A[l.segment]);const O={};for(let D=l.segment+1;D<A.length;D++)O[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:_},D<A.length-1&&(_+=A[D+1].dist(A[D]));for(let D=l.segment||0;D>=0;D--)O[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:B},D>0&&(B+=A[D-1].dist(A[D]));for(let D=0;D<A.length;D++){const F=O[D];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(l,A,y,_,B,O,D,F,W,te,ae,he){const me=l.indexArray,be=l.layoutVertexArray,we=l.segments.prepareSegment(4*A.length,be,me,this.canOverlap?O.sortKey:void 0),Ie=this.glyphOffsetArray.length,ze=we.vertexLength,ct=this.allowVerticalPlacement&&D===s.aA.vertical?Math.PI/2:0,Ge=O.text&&O.text.sections;for(let Ze=0;Ze<A.length;Ze++){const{tl:ht,tr:gt,bl:Gt,br:an,tex:rn,pixelOffsetTL:mn,pixelOffsetBR:zn,minFontScaleX:vn,minFontScaleY:sn,glyphOffset:$t,isSDF:ri,sectionIndex:Xn}=A[Ze],ci=we.vertexLength,Hn=$t[1];c1(be,F.x,F.y,ht.x,Hn+ht.y,rn.x,rn.y,y,ri,mn.x,mn.y,vn,sn),c1(be,F.x,F.y,gt.x,Hn+gt.y,rn.x+rn.w,rn.y,y,ri,zn.x,mn.y,vn,sn),c1(be,F.x,F.y,Gt.x,Hn+Gt.y,rn.x,rn.y+rn.h,y,ri,mn.x,zn.y,vn,sn),c1(be,F.x,F.y,an.x,Hn+an.y,rn.x+rn.w,rn.y+rn.h,y,ri,zn.x,zn.y,vn,sn),By(l.dynamicLayoutVertexArray,F,ct),me.emplaceBack(ci,ci+2,ci+1),me.emplaceBack(ci+1,ci+2,ci+3),we.vertexLength+=4,we.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($t[0]),Ze!==A.length-1&&Xn===A[Ze+1].sectionIndex||l.programConfigurations.populatePaintArrays(be.length,O,O.index,{imagePositions:{},canonical:he,formattedSection:Ge&&Ge[Xn]})}l.placedSymbolArray.emplaceBack(F.x,F.y,Ie,this.glyphOffsetArray.length-Ie,ze,W,te,F.segment,y?y[0]:0,y?y[1]:0,_[0],_[1],D,0,!1,0,ae)}_addCollisionDebugVertex(l,A,y,_,B,O){return A.emplaceBack(0,0),l.emplaceBack(y.x,y.y,_,B,Math.round(O.x),Math.round(O.y))}addCollisionDebugVertices(l,A,y,_,B,O,D){const F=B.segments.prepareSegment(4,B.layoutVertexArray,B.indexArray),W=F.vertexLength,te=B.layoutVertexArray,ae=B.collisionVertexArray,he=D.anchorX,me=D.anchorY;this._addCollisionDebugVertex(te,ae,O,he,me,new c(l,A)),this._addCollisionDebugVertex(te,ae,O,he,me,new c(y,A)),this._addCollisionDebugVertex(te,ae,O,he,me,new c(y,_)),this._addCollisionDebugVertex(te,ae,O,he,me,new c(l,_)),F.vertexLength+=4;const be=B.indexArray;be.emplaceBack(W,W+1),be.emplaceBack(W+1,W+2),be.emplaceBack(W+2,W+3),be.emplaceBack(W+3,W),F.primitiveLength+=4}addDebugCollisionBoxes(l,A,y,_){for(let B=l;B<A;B++){const O=this.collisionBoxArray.get(B);this.addCollisionDebugVertices(O.x1,O.y1,O.x2,O.y2,_?this.textCollisionBox:this.iconCollisionBox,O.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new CC(At,dC.members,jt),this.iconCollisionBox=new CC(At,dC.members,jt);for(let l=0;l<this.symbolInstances.length;l++){const A=this.symbolInstances.get(l);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(l,A,y,_,B,O,D,F,W){const te={};for(let ae=A;ae<y;ae++){const he=l.get(ae);te.textBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},te.textFeatureIndex=he.featureIndex;break}for(let ae=_;ae<B;ae++){const he=l.get(ae);te.verticalTextBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},te.verticalTextFeatureIndex=he.featureIndex;break}for(let ae=O;ae<D;ae++){const he=l.get(ae);te.iconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},te.iconFeatureIndex=he.featureIndex;break}for(let ae=F;ae<W;ae++){const he=l.get(ae);te.verticalIconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},te.verticalIconFeatureIndex=he.featureIndex;break}return te}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const y=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,A){const y=l.placedSymbolArray.get(A),_=y.vertexStartIndex+4*y.numGlyphs;for(let B=y.vertexStartIndex;B<_;B+=4)l.indexArray.emplaceBack(B,B+2,B+1),l.indexArray.emplaceBack(B+1,B+2,B+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(l),y=Math.cos(l),_=[],B=[],O=[];for(let D=0;D<this.symbolInstances.length;++D){O.push(D);const F=this.symbolInstances.get(D);_.push(0|Math.round(A*F.anchorX+y*F.anchorY)),B.push(F.featureIndex)}return O.sort(((D,F)=>_[D]-_[F]||B[F]-B[D])),O}addToSortKeyRanges(l,A){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===A?y.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const y=this.symbolInstances.get(A);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach(((_,B,O)=>{_>=0&&O.indexOf(_)===B&&this.addIndicesForPlacedSymbol(this.text,_)})),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let bC,_C;jn("SymbolBucket",Nl,{omit:["layers","collisionBoxArray","features","compareText"]}),Nl.MAX_GLYPHS=65535,Nl.addDynamicAttributes=By;var af={get paint(){return _C=_C||new Js({"icon-opacity":new li(Mt.paint_symbol["icon-opacity"]),"icon-color":new li(Mt.paint_symbol["icon-color"]),"icon-halo-color":new li(Mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new li(Mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new li(Mt.paint_symbol["icon-halo-blur"]),"icon-translate":new mi(Mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new mi(Mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new li(Mt.paint_symbol["text-opacity"]),"text-color":new li(Mt.paint_symbol["text-color"],{runtimeType:ja,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new li(Mt.paint_symbol["text-halo-color"]),"text-halo-width":new li(Mt.paint_symbol["text-halo-width"]),"text-halo-blur":new li(Mt.paint_symbol["text-halo-blur"]),"text-translate":new mi(Mt.paint_symbol["text-translate"]),"text-translate-anchor":new mi(Mt.paint_symbol["text-translate-anchor"])})},get layout(){return bC=bC||new Js({"symbol-placement":new mi(Mt.layout_symbol["symbol-placement"]),"symbol-spacing":new mi(Mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mi(Mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new li(Mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mi(Mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mi(Mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new mi(Mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new mi(Mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new mi(Mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mi(Mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new li(Mt.layout_symbol["icon-size"]),"icon-text-fit":new mi(Mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mi(Mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new li(Mt.layout_symbol["icon-image"]),"icon-rotate":new li(Mt.layout_symbol["icon-rotate"]),"icon-padding":new li(Mt.layout_symbol["icon-padding"]),"icon-keep-upright":new mi(Mt.layout_symbol["icon-keep-upright"]),"icon-offset":new li(Mt.layout_symbol["icon-offset"]),"icon-anchor":new li(Mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mi(Mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mi(Mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mi(Mt.layout_symbol["text-rotation-alignment"]),"text-field":new li(Mt.layout_symbol["text-field"]),"text-font":new li(Mt.layout_symbol["text-font"]),"text-size":new li(Mt.layout_symbol["text-size"]),"text-max-width":new li(Mt.layout_symbol["text-max-width"]),"text-line-height":new mi(Mt.layout_symbol["text-line-height"]),"text-letter-spacing":new li(Mt.layout_symbol["text-letter-spacing"]),"text-justify":new li(Mt.layout_symbol["text-justify"]),"text-radial-offset":new li(Mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mi(Mt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new li(Mt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new li(Mt.layout_symbol["text-anchor"]),"text-max-angle":new mi(Mt.layout_symbol["text-max-angle"]),"text-writing-mode":new mi(Mt.layout_symbol["text-writing-mode"]),"text-rotate":new li(Mt.layout_symbol["text-rotate"]),"text-padding":new mi(Mt.layout_symbol["text-padding"]),"text-keep-upright":new mi(Mt.layout_symbol["text-keep-upright"]),"text-transform":new li(Mt.layout_symbol["text-transform"]),"text-offset":new li(Mt.layout_symbol["text-offset"]),"text-allow-overlap":new mi(Mt.layout_symbol["text-allow-overlap"]),"text-overlap":new mi(Mt.layout_symbol["text-overlap"]),"text-ignore-placement":new mi(Mt.layout_symbol["text-ignore-placement"]),"text-optional":new mi(Mt.layout_symbol["text-optional"])})}};class Cr{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:lo,this.defaultValue=l}evaluate(l){if(l.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(l.formattedSection))return A.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}jn("FormatSectionOverride",Cr,{omit:["defaultValue"]});class U0 extends pl{constructor(l,A){super(l,af,A)}recalculate(l,A){if(super.recalculate(l,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const _=[];for(const B of y)_.indexOf(B)<0&&_.push(B);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,A,y,_){const B=this.layout.get(l).evaluate(A,{},y,_),O=this._unevaluatedLayout._values[l];return O.isDataDriven()||OA(O.value)||!B?B:(function(D,F){return F.replace(/{([^{}]+)}/g,((W,te)=>D&&te in D?String(D[te]):""))})(A.properties,B)}createBucket(l){return new Nl(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of af.paint.overridableProperties){if(!U0.hasPaintOverride(this.layout,l))continue;const A=this.paint.get(l),y=new Cr(A),_=new Yd(y,A.property.specification);let B=null;B=A.value.kind==="constant"||A.value.kind==="source"?new Pl("source",_):new Xh("composite",_,A.value.zoomStops),this.paint._values[l]=new il(A.property,B,A.parameters)}}_handleOverridablePaintPropertyUpdate(l,A,y){return!(!this.layout||A.isDataDriven()||y.isDataDriven())&&U0.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,A){const y=l.get("text-field"),_=af.paint.properties[A];let B=!1;const O=D=>{for(const F of D)if(_.overrides&&_.overrides.hasOverride(F))return void(B=!0)};if(y.value.kind==="constant"&&y.value.value instanceof ns)O(y.value.value.sections);else if(y.value.kind==="source"||y.value.kind==="composite"){const D=W=>{B||(W instanceof ie&&Zi(W.value)===fo?O(W.value.sections):W instanceof MA?O(W.sections):W.eachChild(D))},F=y.value;F._styleExpression&&D(F._styleExpression.expression)}return B}}let cc;var qa={get paint(){return cc=cc||new Js({"background-color":new mi(Mt.paint_background["background-color"]),"background-pattern":new lu(Mt.paint_background["background-pattern"]),"background-opacity":new mi(Mt.paint_background["background-opacity"])})}};class A1 extends pl{constructor(l,A){super(l,qa,A)}}class tm extends pl{constructor(l,A){super(l,{},A),this.onAdd=y=>{this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)},this.onRemove=y=>{this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class b_{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const oo={once:!0},h1=63710088e-1;class Eh{constructor(l,A){if(isNaN(l)||isNaN(A))throw new Error(`Invalid LngLat object: (${l}, ${A})`);if(this.lng=+l,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Eh(Rt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const A=Math.PI/180,y=this.lat*A,_=l.lat*A,B=Math.sin(y)*Math.sin(_)+Math.cos(y)*Math.cos(_)*Math.cos((l.lng-this.lng)*A);return h1*Math.acos(Math.min(B,1))}static convert(l){if(l instanceof Eh)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Eh(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Eh(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Iy=2*Math.PI*h1;function d1(h){return Iy*Math.cos(h*Math.PI/180)}function Ty(h){return(180+h)/360}function Nc(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function L0(h,l){return h/d1(l)}function f1(h){return 360*h-180}function _s(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function pa(h,l){return h*d1(_s(l))}class K0{constructor(l,A,y=0){this.x=+l,this.y=+A,this.z=+y}static fromLngLat(l,A=0){const y=Eh.convert(l);return new K0(Ty(y.lng),Nc(y.lat),L0(A,y.lat))}toLngLat(){return new Eh(f1(this.x),_s(this.y))}toAltitude(){return pa(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Iy*(l=_s(this.y),1/Math.cos(l*Math.PI/180));var l}}function xC(h,l,A){var y=2*Math.PI*6378137/256/Math.pow(2,A);return[h*y-2*Math.PI*6378137/2,l*y-2*Math.PI*6378137/2]}class ky{constructor(l,A,y){if(!(function(_,B,O){return!(_<0||_>25||O<0||O>=Math.pow(2,_)||B<0||B>=Math.pow(2,_))})(l,A,y))throw new Error(`x=${A}, y=${y}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=A,this.y=y,this.key=Ra(0,l,l,A,y)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,A,y){const _=(function(O,D,F){var W=xC(256*O,256*(D=Math.pow(2,F)-D-1),F),te=xC(256*(O+1),256*(D+1),F);return W[0]+","+W[1]+","+te[0]+","+te[1]})(this.x,this.y,this.z),B=(function(O,D,F){let W,te="";for(let ae=O;ae>0;ae--)W=1<<ae-1,te+=(D&W?1:0)+(F&W?2:0);return te})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){const A=this.z-l.z;return A>0&&l.x===this.x>>A&&l.y===this.y>>A}getTilePoint(l){const A=Math.pow(2,this.z);return new c((l.x*A-this.x)*mt,(l.y*A-this.y)*mt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class as{constructor(l,A){this.wrap=l,this.canonical=A,this.key=Ra(l,A.z,A.z,A.x,A.y)}}class Ac{constructor(l,A,y,_,B){if(this.terrainRttPosMatrix32f=null,l<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${y}`);this.overscaledZ=l,this.wrap=A,this.canonical=new ky(y,+_,+B),this.key=Ra(A,l,y,_,B)}clone(){return new Ac(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-l;return l>this.canonical.z?new Ac(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ac(l,this.wrap,l,this.canonical.x>>A,this.canonical.y>>A)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,A){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-l;return l>this.canonical.z?Ra(this.wrap*+A,l,this.canonical.z,this.canonical.x,this.canonical.y):Ra(this.wrap*+A,l,l,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const A=this.canonical.z-l.canonical.z;return!(A<0)&&l.canonical.x===this.canonical.x>>A&&l.canonical.y===this.canonical.y>>A}children(l){if(this.overscaledZ>=l)return[new Ac(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,y=2*this.canonical.x,_=2*this.canonical.y;return[new Ac(A,this.wrap,A,y,_),new Ac(A,this.wrap,A,y+1,_),new Ac(A,this.wrap,A,y,_+1),new Ac(A,this.wrap,A,y+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Ac(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Ac(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new as(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new K0(l.x-this.wrap,l.y))}}function Ra(h,l,A,y,_){(h*=2)<0&&(h=-1*h-1);const B=1<<A;return(B*B*h+B*_+y).toString(36)+A.toString(36)+l.toString(36)}function m1(h,l){return l?h.properties[l]:h.id}function MC(h,l){const A={id:h.id};if(l.removeAllProperties&&(delete h.removeProperties,delete h.addOrUpdateProperties,delete l.removeProperties),l.removeProperties)for(const y of l.removeProperties){const _=h.addOrUpdateProperties.findIndex((B=>B.key===y));_>-1&&h.addOrUpdateProperties.splice(_,1)}return(h.removeAllProperties||l.removeAllProperties)&&(A.removeAllProperties=!0),(h.removeProperties||l.removeProperties)&&(A.removeProperties=[...h.removeProperties||[],...l.removeProperties||[]]),(h.addOrUpdateProperties||l.addOrUpdateProperties)&&(A.addOrUpdateProperties=[...h.addOrUpdateProperties||[],...l.addOrUpdateProperties||[]]),(h.newGeometry||l.newGeometry)&&(A.newGeometry=l.newGeometry||h.newGeometry),A}function F0(h){var l,A;if(!h)return{};const y={};return y.removeAll=h.removeAll,y.remove=new Set(h.remove||[]),y.add=new Map((l=h.add)===null||l===void 0?void 0:l.map((_=>[_.id,_]))),y.update=new Map((A=h.update)===null||A===void 0?void 0:A.map((_=>[_.id,_]))),y}jn("CanonicalTileID",ky),jn("OverscaledTileID",Ac,{omit:["terrainRttPosMatrix32f"]});class z0{constructor(l){this._stringToNumber={},this._numberToString=[];for(let A=0;A<l.length;A++){const y=l[A];this._stringToNumber[y]=A,this._numberToString[A]=y}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class Dy{constructor(l,A,y,_,B){this.type="Feature",this._vectorTileFeature=l,this._x=y,this._y=_,this._z=A,this.properties=l.properties,this.id=B}projectPoint(l,A,y,_){return[360*(l.x+A)/_-180,360/Math.PI*Math.atan(Math.exp((1-2*(l.y+y)/_)*Math.PI))-90]}projectLine(l,A,y,_){return l.map((B=>this.projectPoint(B,A,y,_)))}get geometry(){if(this._geometry)return this._geometry;const l=this._vectorTileFeature,A=l.extent*Math.pow(2,this._z),y=l.extent*this._x,_=l.extent*this._y,B=l.loadGeometry();switch(l.type){case 1:{const O=[];for(const F of B)O.push(F[0]);const D=this.projectLine(O,y,_,A);this._geometry=O.length===1?{type:"Point",coordinates:D[0]}:{type:"MultiPoint",coordinates:D};break}case 2:{const O=B.map((D=>this.projectLine(D,y,_,A)));this._geometry=O.length===1?{type:"LineString",coordinates:O[0]}:{type:"MultiLineString",coordinates:O};break}case 3:{const O=t1(B),D=[];for(const F of O)D.push(F.map((W=>this.projectLine(W,y,_,A))));this._geometry=D.length===1?{type:"Polygon",coordinates:D[0]}:{type:"MultiPolygon",coordinates:D};break}default:throw new Error(`unknown feature type: ${l.type}`)}return this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&A!=="_x"&&A!=="_y"&&A!=="_z"&&(l[A]=this[A]);return l}}class yd{_name;dataBuffer;nullabilityBuffer;_size;constructor(l,A,y){this._name=l,this.dataBuffer=A,typeof y=="number"?this._size=y:(this.nullabilityBuffer=y,this._size=y.size())}getValue(l){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(l)?null:this.getValueFromBuffer(l)}has(l){return this.nullabilityBuffer&&this.nullabilityBuffer.get(l)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class nm extends yd{}class Ru extends nm{getValueFromBuffer(l){return this.dataBuffer[l]}}class vd extends nm{getValueFromBuffer(l){return this.dataBuffer[l]}}class Ry extends yd{delta;constructor(l,A,y,_){super(l,A,_),this.delta=y}}class wC extends Ry{constructor(l,A,y,_){super(l,Int32Array.of(A),y,_)}getValueFromBuffer(l){return this.dataBuffer[0]+l*this.delta}}class Py extends yd{constructor(l,A,y){super(l,Int32Array.of(A),y)}getValueFromBuffer(l){return this.dataBuffer[0]}}class m3{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(l,A,y,_,B=4096){this._name=l,this._geometryVector=A,this._idVector=y,this._propertyVectors=_,this._extent=B}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(l){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((A=>[A.name,A])))),this.propertyVectorsMap.get(l)}*[Symbol.iterator](){const l=this.geometryVector[Symbol.iterator]();let A=0;for(;A<this.numFeatures;){let y;this.idVector&&(y=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(A)):this.idVector.getValue(A));const _=l?.next().value,B={};for(const O of this.propertyVectors){if(!O)continue;const D=O.name,F=O.getValue(A);F!==null&&(B[D]=F)}A++,yield{id:y,geometry:_,properties:B}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const l=[],A=this.geometryVector.getGeometries();for(let y=0;y<this.numFeatures;y++){let _;this.idVector&&(_=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(y)):this.idVector.getValue(y));const B={coordinates:A[y],type:this.geometryVector.geometryType(y)},O={};for(const D of this.propertyVectors){if(!D)continue;const F=D.name,W=D.getValue(y);W!==null&&(O[F]=W)}l.push({id:_,geometry:B,properties:O})}return l}containsMaxSaveIntegerValues(l){return l instanceof Ru||l instanceof Py&&l instanceof wC||l instanceof vd}}class __{value;constructor(l){this.value=l}get(){return this.value}set(l){this.value=l}increment(){return this.value++}add(l){this.value+=l}}var wr,mu,Pi,dA,vl,pu,sl,dr,SC,Pu;function na(h,l,A){const y=new Int32Array(A);let _=0,B=l.get();for(let O=0;O<y.length;O++){let D=h[B++],F=127&D;D<128||(D=h[B++],F|=(127&D)<<7,D<128||(D=h[B++],F|=(127&D)<<14,D<128||(D=h[B++],F|=(127&D)<<21,D<128||(D=h[B++],F|=(15&D)<<28)))),y[_++]=F}return l.set(B),y}function Uy(h,l,A){const y=new BigInt64Array(A);for(let _=0;_<y.length;_++)y[_]=x_(h,l);return y}function GA(h,l){let A,y;return y=h[l.get()],l.increment(),A=127&y,y<128?A:(y=h[l.get()],l.increment(),A|=(127&y)<<7,y<128?A:(y=h[l.get()],l.increment(),A|=(127&y)<<14,y<128?A:(y=h[l.get()],l.increment(),A|=(127&y)<<21,y<128?A:(y=h[l.get()],A|=(15&y)<<28,(function(_,B,O){let D,F;if(F=B[O.get()],O.increment(),D=(112&F)>>4,F<128||(F=B[O.get()],O.increment(),D|=(127&F)<<3,F<128)||(F=B[O.get()],O.increment(),D|=(127&F)<<10,F<128)||(F=B[O.get()],O.increment(),D|=(127&F)<<17,F<128)||(F=B[O.get()],O.increment(),D|=(127&F)<<24,F<128)||(F=B[O.get()],O.increment(),D|=(1&F)<<31,F<128))return 4294967296*D+(_>>>0);throw new Error("Expected varint not more than 10 bytes")})(A,h,l)))))}function Ly(h,l,A,y){throw new Error("FastPFor is not implemented yet.")}function im(h){return h>>>1^-(1&h)}function cp(h){return h>>1n^-(1n&h)}function x_(h,l){let A=0n,y=0,_=l.get();for(;_<h.length;){const B=h[_++];if(A|=BigInt(127&B)<<BigInt(y),!(128&B))break;if(y+=7,y>=64)throw new Error("Varint too long")}return l.set(_),A}function j0(h,l,A){const y=new Int32Array(A);let _=0;for(let B=0;B<l;B++){const O=h[B];y.fill(h[B+l],_,_+O),_+=O}return y}function fA(h,l,A){const y=new BigInt64Array(A);let _=0;for(let B=0;B<l;B++){const O=Number(h[B]);y.fill(h[B+l],_,_+O),_+=O}return y}function EC(h,l,A){const y=new Float64Array(A);let _=0;for(let B=0;B<l;B++){const O=h[B];y.fill(h[B+l],_,_+O),_+=O}return y}function N0(h){const l=h.length/4*4;let A=1;if(l>=4)for(let y=h[0];A<l-4;A+=4)y=h[A]+=y,y=h[A+1]+=y,y=h[A+2]+=y,y=h[A+3]+=y;for(;A!=h.length;)h[A]+=h[A-1],++A}function Cd(h){h[0]=h[0]>>>1^-(1&h[0]),h[1]=h[1]>>>1^-(1&h[1]);const l=h.length/4*4;let A=2;if(l>=4)for(;A<l-4;A+=4){const y=h[A],_=h[A+1],B=h[A+2],O=h[A+3];h[A]=(y>>>1^-(1&y))+h[A-2],h[A+1]=(_>>>1^-(1&_))+h[A-1],h[A+2]=(B>>>1^-(1&B))+h[A],h[A+3]=(O>>>1^-(1&O))+h[A+1]}for(;A!=h.length;A+=2)h[A]=(h[A]>>>1^-(1&h[A]))+h[A-2],h[A+1]=(h[A+1]>>>1^-(1&h[A+1]))+h[A-1]}(function(h){h.NONE="NONE",h.DELTA="DELTA",h.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",h.RLE="RLE",h.MORTON="MORTON",h.PDE="PDE"})(wr||(wr={})),(function(h){h.NONE="NONE",h.FAST_PFOR="FAST_PFOR",h.VARINT="VARINT",h.ALP="ALP"})(mu||(mu={})),(function(h){h.PRESENT="PRESENT",h.DATA="DATA",h.OFFSET="OFFSET",h.LENGTH="LENGTH"})(Pi||(Pi={}));class BC{_dictionaryType;_offsetType;_lengthType;constructor(l,A,y){this._dictionaryType=l,this._offsetType=A,this._lengthType=y}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Uu(h,l){const A=(function(y,_){const B=y[_.get()],O=Object.values(Pi)[B>>4];let D=null;switch(O){case Pi.DATA:D=new BC(Object.values(dA)[15&B]);break;case Pi.OFFSET:D=new BC(null,Object.values(vl)[15&B]);break;case Pi.LENGTH:D=new BC(null,null,Object.values(pu)[15&B])}_.increment();const F=y[_.get()],W=Object.values(wr)[F>>5],te=Object.values(wr)[F>>2&7],ae=Object.values(mu)[3&F];_.increment();const he=na(y,_,2),me=he[0];return{physicalStreamType:O,logicalStreamType:D,logicalLevelTechnique1:W,logicalLevelTechnique2:te,physicalLevelTechnique:ae,numValues:me,byteLength:he[1],decompressedCount:me}})(h,l);return A.logicalLevelTechnique1===wr.MORTON?(function(y,_,B){const O=na(_,B,2);return{physicalStreamType:y.physicalStreamType,logicalStreamType:y.logicalStreamType,logicalLevelTechnique1:y.logicalLevelTechnique1,logicalLevelTechnique2:y.logicalLevelTechnique2,physicalLevelTechnique:y.physicalLevelTechnique,numValues:y.numValues,byteLength:y.byteLength,decompressedCount:y.decompressedCount,numBits:O[0],coordinateShift:O[1]}})(A,h,l):wr.RLE!==A.logicalLevelTechnique1&&wr.RLE!==A.logicalLevelTechnique2||mu.NONE===A.physicalLevelTechnique?A:(function(y,_,B){const O=na(_,B,2);return{physicalStreamType:y.physicalStreamType,logicalStreamType:y.logicalStreamType,logicalLevelTechnique1:y.logicalLevelTechnique1,logicalLevelTechnique2:y.logicalLevelTechnique2,physicalLevelTechnique:y.physicalLevelTechnique,numValues:y.numValues,byteLength:y.byteLength,decompressedCount:O[1],runs:O[0],numRleValues:O[1]}})(A,h,l)}(function(h){h.NONE="NONE",h.SINGLE="SINGLE",h.SHARED="SHARED",h.VERTEX="VERTEX",h.MORTON="MORTON",h.FSST="FSST"})(dA||(dA={})),(function(h){h.VERTEX="VERTEX",h.INDEX="INDEX",h.STRING="STRING",h.KEY="KEY"})(vl||(vl={})),(function(h){h.VAR_BINARY="VAR_BINARY",h.GEOMETRIES="GEOMETRIES",h.PARTS="PARTS",h.RINGS="RINGS",h.TRIANGLES="TRIANGLES",h.SYMBOL="SYMBOL",h.DICTIONARY="DICTIONARY"})(pu||(pu={})),(function(h){h[h.FLAT=0]="FLAT",h[h.CONST=1]="CONST",h[h.SEQUENCE=2]="SEQUENCE",h[h.DICTIONARY=3]="DICTIONARY",h[h.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(sl||(sl={}));class Gl{values;_size;constructor(l,A){this.values=l,this._size=A}get(l){const A=Math.floor(l/8);return(this.values[A]>>l%8&1)==1}set(l,A){const y=Math.floor(l/8);this.values[y]=this.values[y]|(A?1:0)<<l%8}getInt(l){const A=Math.floor(l/8);return this.values[A]>>l%8&1}size(){return this._size}getBuffer(){return this.values}}function gu(h,l,A,y,_){return(function(B,O,D){switch(O.logicalLevelTechnique1){case wr.DELTA:return O.logicalLevelTechnique2===wr.RLE?(function(F,W,te){const ae=new Int32Array(te);let he=0,me=0;for(let be=0;be<W;be++){const we=F[be],Ie=im(F[be+W]);for(let ze=0;ze<we;ze++)me+=Ie,ae[he++]=me}return ae})(B,O.runs,O.numRleValues):((function(F){F[0]=F[0]>>>1^-(1&F[0]);const W=F.length/4*4;let te=1;if(W>=4)for(;te<W-4;te+=4){const ae=F[te],he=F[te+1],me=F[te+2],be=F[te+3];F[te]=(ae>>>1^-(1&ae))+F[te-1],F[te+1]=(he>>>1^-(1&he))+F[te],F[te+2]=(me>>>1^-(1&me))+F[te+1],F[te+3]=(be>>>1^-(1&be))+F[te+2]}for(;te!=F.length;++te)F[te]=(F[te]>>>1^-(1&F[te]))+F[te-1]})(B),B);case wr.RLE:return(function(F,W,te){return te?(function(ae,he,me){const be=new Int32Array(me);let we=0;for(let Ie=0;Ie<he;Ie++){const ze=ae[Ie];let ct=ae[Ie+he];ct=ct>>>1^-(1&ct),be.fill(ct,we,we+ze),we+=ze}return be})(F,W.runs,W.numRleValues):j0(F,W.runs,W.numRleValues)})(B,O,D);case wr.MORTON:return N0(B),B;case wr.COMPONENTWISE_DELTA:return Cd(B),B;case wr.NONE:return D&&(function(F){for(let W=0;W<F.length;W++){const te=F[W];F[W]=te>>>1^-(1&te)}})(B),B;default:throw new Error(`The specified Logical level technique is not supported: ${O.logicalLevelTechnique1}`)}})(Ky(h,l,A),A,y)}function bd(h,l,A){return(function(y,_){if(_.logicalLevelTechnique1===wr.DELTA&&_.logicalLevelTechnique2===wr.NONE)return(function(O){const D=new Int32Array(O.length+1);D[0]=0,D[1]=im(O[0]);let F=D[1],W=2;for(;W!=D.length;++W){const te=O[W-1];F+=te>>>1^-(1&te),D[W]=D[W-1]+F}return D})(y);if(_.logicalLevelTechnique1===wr.RLE&&_.logicalLevelTechnique2===wr.NONE)return(function(O,D,F){const W=new Int32Array(F+1);W[0]=0;let te=1,ae=W[0];for(let he=0;he<D;he++){const me=O[he],be=O[he+D];for(let we=te;we<te+me;we++)W[we]=be+ae,ae=W[we];te+=me}return W})(y,_.runs,_.numRleValues);if(_.logicalLevelTechnique1===wr.NONE&&_.logicalLevelTechnique2===wr.NONE){(function(O){let D=0;for(let F=0;F<O.length;F++)O[F]+=D,D=O[F]})(y);const B=new Int32Array(_.numValues+1);return B[0]=0,B.set(y,1),B}if(_.logicalLevelTechnique1===wr.DELTA&&_.logicalLevelTechnique2===wr.RLE){const B=(function(O,D,F){const W=new Int32Array(F+1);W[0]=0;let te=1,ae=W[0];for(let he=0;he<D;he++){const me=O[he];let be=O[he+D];be=be>>>1^-(1&be);for(let we=te;we<te+me;we++)W[we]=be+ae,ae=W[we];te+=me}return W})(y,_.runs,_.numRleValues);return N0(B),B}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Ky(h,l,A),A)}function Ky(h,l,A){const y=A.physicalLevelTechnique;if(y===mu.FAST_PFOR)return Ly();if(y===mu.VARINT)return na(h,l,A.numValues);if(y===mu.NONE){const _=l.get();l.add(A.byteLength);const B=h.subarray(_,l.get());return new Int32Array(B)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function OC(h,l,A,y){const _=Ky(h,l,A);if(_.length===1){const B=_[0];return y?im(B):B}return y?(function(B){return im(B[1])})(_):(function(B){return B[1]})(_)}function M_(h,l,A){return(function(y){if(y.length==2){const _=im(y[1]);return[_,_]}return[im(y[2]),im(y[3])]})(Ky(h,l,A))}function Cl(h,l,A){return(function(y){if(y.length==2){const _=cp(y[1]);return[_,_]}return[cp(y[2]),cp(y[3])]})(Uy(h,l,A.numValues))}function hc(h,l,A,y){return(function(_,B,O){switch(B.logicalLevelTechnique1){case wr.DELTA:return B.logicalLevelTechnique2===wr.RLE?(function(D,F,W){const te=new BigInt64Array(W);let ae=0,he=0n;for(let me=0;me<F;me++){const be=Number(D[me]),we=cp(D[me+F]);for(let Ie=0;Ie<be;Ie++)he+=we,te[ae++]=he}return te})(_,B.runs,B.numRleValues):((function(D){D[0]=D[0]>>1n^-(1n&D[0]);const F=D.length/4*4;let W=1;if(F>=4)for(;W<F-4;W+=4){const te=D[W],ae=D[W+1],he=D[W+2],me=D[W+3];D[W]=(te>>1n^-(1n&te))+D[W-1],D[W+1]=(ae>>1n^-(1n&ae))+D[W],D[W+2]=(he>>1n^-(1n&he))+D[W+1],D[W+3]=(me>>1n^-(1n&me))+D[W+2]}for(;W!=D.length;++W)D[W]=(D[W]>>1n^-(1n&D[W]))+D[W-1]})(_),_);case wr.RLE:return(function(D,F,W){return W?(function(te,ae,he){const me=new BigInt64Array(he);let be=0;for(let we=0;we<ae;we++){const Ie=Number(te[we]);let ze=te[we+ae];ze=ze>>1n^-(1n&ze),me.fill(ze,be,be+Ie),be+=Ie}return me})(D,F.runs,F.numRleValues):fA(D,F.runs,F.numRleValues)})(_,B,O);case wr.NONE:return O&&(function(D){for(let F=0;F<D.length;F++){const W=D[F];D[F]=W>>1n^-(1n&W)}})(_),_;default:throw new Error(`The specified Logical level technique is not supported: ${B.logicalLevelTechnique1}`)}})(Uy(h,l,A.numValues),A,y)}function w_(h,l,A,y){const _=Uy(h,l,A.numValues);if(_.length===1){const B=_[0];return y?cp(B):B}return y?(function(B){return cp(B[1])})(_):(function(B){return B[1]})(_)}function Fy(h,l,A,y,_){return(function(B,O,D,F){switch(O.logicalLevelTechnique1){case wr.DELTA:return O.logicalLevelTechnique2===wr.RLE&&(B=j0(B,O.runs,O.numRleValues)),(function(W,te){const ae=new Int32Array(W.size());let he=0;W.get(0)?(ae[0]=W.get(0)?te[0]>>>1^-(1&te[0]):0,he=1):ae[0]=0;let me=1;for(;me!=ae.length;++me)ae[me]=W.get(me)?ae[me-1]+(te[he]>>>1^-(1&te[he++])):ae[me-1];return ae})(F,B);case wr.RLE:return(function(W,te,ae,he){const me=te;return ae?(function(be,we,Ie){const ze=new Int32Array(be.size());let ct=0;for(let Ge=0;Ge<Ie;Ge++){const Ze=we[Ge];let ht=we[Ge+Ie];ht=ht>>>1^-(1&ht);for(let gt=ct;gt<ct+Ze;gt++)be.get(gt)?ze[gt]=ht:(ze[gt]=0,ct++);ct+=Ze}return ze})(he,W,me.runs):(function(be,we,Ie){const ze=new Int32Array(be.size());let ct=0;for(let Ge=0;Ge<Ie;Ge++){const Ze=we[Ge],ht=we[Ge+Ie];for(let gt=ct;gt<ct+Ze;gt++)be.get(gt)?ze[gt]=ht:(ze[gt]=0,ct++);ct+=Ze}return ze})(he,W,me.runs)})(B,O,D,F);case wr.MORTON:return N0(B),B;case wr.COMPONENTWISE_DELTA:return Cd(B),B;case wr.NONE:return B=D?(function(W,te){const ae=new Int32Array(W.size());let he=0,me=0;for(;me!=ae.length;++me)if(W.get(me)){const be=te[he++];ae[me]=be>>>1^-(1&be)}else ae[me]=0;return ae})(F,B):(function(W,te){const ae=new Int32Array(W.size());let he=0,me=0;for(;me!=ae.length;++me)ae[me]=W.get(me)?te[he++]:0;return ae})(F,B),B;default:throw new Error("The specified Logical level technique is not supported")}})(A.physicalLevelTechnique===mu.FAST_PFOR?Ly():na(h,l,A.numValues),A,y,_)}function lf(h,l,A,y){const _=h.logicalLevelTechnique1;if(_===wr.RLE)return h.runs===1?sl.CONST:sl.FLAT;const B=l instanceof Gl?l.size():l;if(_===wr.DELTA&&h.logicalLevelTechnique2===wr.RLE){const O=h.runs,D=2;if(h.numRleValues!==B)return sl.FLAT;if(O===1)return sl.SEQUENCE;if(O===2){const F=y.get();let W;if(h.physicalLevelTechnique===mu.VARINT)W=na(A,y,4);else{const te=y.get();W=new Int32Array(A.buffer,A.byteOffset+te,4)}if(y.set(F),W[2]===D&&W[3]===D)return sl.SEQUENCE}}return h.numValues===1?sl.CONST:sl.FLAT}class Ap extends nm{getValueFromBuffer(l){return this.dataBuffer[l]}}class IC extends Ry{constructor(l,A,y,_){super(l,BigInt64Array.of(A),y,_)}getValueFromBuffer(l){return this.dataBuffer[0]+BigInt(l)*this.delta}}class G0{_geometryOffsets;_partOffsets;_ringOffsets;constructor(l,A,y){this._geometryOffsets=l,this._partOffsets=A,this._ringOffsets=y}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function rm(h,l,A){return{x:hp(h,l)-A,y:hp(h>>1,l)-A}}function hp(h,l){let A=0;for(let y=0;y<l;y++)A|=(h&1<<2*y)>>y;return A}(function(h){h[h.POINT=0]="POINT",h[h.LINESTRING=1]="LINESTRING",h[h.POLYGON=2]="POLYGON",h[h.MULTIPOINT=3]="MULTIPOINT",h[h.MULTILINESTRING=4]="MULTILINESTRING",h[h.MULTIPOLYGON=5]="MULTIPOLYGON"})(dr||(dr={})),(function(h){h[h.POINT=0]="POINT",h[h.LINESTRING=1]="LINESTRING",h[h.POLYGON=2]="POLYGON"})(SC||(SC={})),(function(h){h[h.MORTON=0]="MORTON",h[h.VEC_2=1]="VEC_2",h[h.VEC_3=2]="VEC_3"})(Pu||(Pu={}));class S_{createPoint(l){return[[l]]}createMultiPoint(l){return l.map((A=>[A]))}createLineString(l){return[l]}createMultiLineString(l){return l}createPolygon(l,A){return[l].concat(A)}createMultiPolygon(l){return l.flat()}}function p1(h){const l=new Array(h.numGeometries);let A=1,y=1,_=1,B=0;const O=new S_;let D=0,F=0;const W=h.mortonSettings,te=h.topologyVector,ae=te.geometryOffsets,he=te.partOffsets,me=te.ringOffsets,be=h.vertexOffsets,we=h.containsPolygonGeometry(),Ie=h.vertexBuffer;for(let ze=0;ze<h.numGeometries;ze++){const ct=h.geometryType(ze);if(ct===dr.POINT){if(be&&be.length!==0)if(h.vertexBufferType===Pu.VEC_2){const Ge=2*be[F++],Ze=new c(Ie[Ge],Ie[Ge+1]);l[B++]=O.createPoint(Ze)}else{const Ge=rm(Ie[be[F++]],W.numBits,W.coordinateShift),Ze=new c(Ge.x,Ge.y);l[B++]=O.createPoint(Ze)}else{const Ge=new c(Ie[D++],Ie[D++]);l[B++]=O.createPoint(Ge)}ae&&_++,he&&A++,me&&y++}else if(ct===dr.MULTIPOINT){const Ge=ae[_]-ae[_-1];_++;const Ze=new Array(Ge);if(be&&be.length!==0){for(let ht=0;ht<Ge;ht++){const gt=2*be[F++];Ze[ht]=new c(Ie[gt],Ie[gt+1])}l[B++]=O.createMultiPoint(Ze)}else{for(let ht=0;ht<Ge;ht++){const gt=Ie[D++],Gt=Ie[D++];Ze[ht]=new c(gt,Gt)}l[B++]=O.createMultiPoint(Ze)}}else if(ct===dr.LINESTRING){let Ge,Ze=0;we?(Ze=me[y]-me[y-1],y++):Ze=he[A]-he[A-1],A++,be&&be.length!==0?(Ge=h.vertexBufferType===Pu.VEC_2?jy(Ie,be,F,Ze,!1):TC(Ie,be,F,Ze,!1,W),F+=Ze):(Ge=zy(Ie,D,Ze,!1),D+=2*Ze),l[B++]=O.createLineString(Ge),ae&&_++}else if(ct===dr.POLYGON){const Ge=he[A]-he[A-1];A++;const Ze=new Array(Ge-1);let ht=me[y]-me[y-1];if(y++,be&&be.length!==0){const gt=h.vertexBufferType===Pu.VEC_2?dp(Ie,be,F,ht):om(Ie,be,F,ht,0,W);F+=ht;for(let Gt=0;Gt<Ze.length;Gt++)ht=me[y]-me[y-1],y++,Ze[Gt]=h.vertexBufferType===Pu.VEC_2?dp(Ie,be,F,ht):om(Ie,be,F,ht,0,W),F+=ht;l[B++]=O.createPolygon(gt,Ze)}else{const gt=W0(Ie,D,ht);D+=2*ht;for(let Gt=0;Gt<Ze.length;Gt++)ht=me[y]-me[y-1],y++,Ze[Gt]=W0(Ie,D,ht),D+=2*ht;l[B++]=O.createPolygon(gt,Ze)}ae&&_++}else if(ct===dr.MULTILINESTRING){const Ge=ae[_]-ae[_-1];_++;const Ze=new Array(Ge);if(be&&be.length!==0){for(let ht=0;ht<Ge;ht++){let gt=0;we?(gt=me[y]-me[y-1],y++):gt=he[A]-he[A-1],A++;const Gt=h.vertexBufferType===Pu.VEC_2?jy(Ie,be,F,gt,!1):TC(Ie,be,F,gt,!1,W);Ze[ht]=Gt,F+=gt}l[B++]=O.createMultiLineString(Ze)}else{for(let ht=0;ht<Ge;ht++){let gt=0;we?(gt=me[y]-me[y-1],y++):gt=he[A]-he[A-1],A++,Ze[ht]=zy(Ie,D,gt,!1),D+=2*gt}l[B++]=O.createMultiLineString(Ze)}}else{if(ct!==dr.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Ge=ae[_]-ae[_-1];_++;const Ze=new Array(Ge);let ht=0;if(be&&be.length!==0){for(let gt=0;gt<Ge;gt++){const Gt=he[A]-he[A-1];A++;const an=new Array(Gt-1);ht=me[y]-me[y-1],y++;const rn=h.vertexBufferType===Pu.VEC_2?dp(Ie,be,F,ht):om(Ie,be,F,ht,0,W);F+=ht;for(let mn=0;mn<an.length;mn++)ht=me[y]-me[y-1],y++,an[mn]=h.vertexBufferType===Pu.VEC_2?dp(Ie,be,F,ht):om(Ie,be,F,ht,0,W),F+=ht;Ze[gt]=O.createPolygon(rn,an)}l[B++]=O.createMultiPolygon(Ze)}else{for(let gt=0;gt<Ge;gt++){const Gt=he[A]-he[A-1];A++;const an=new Array(Gt-1);ht=me[y]-me[y-1],y++;const rn=W0(Ie,D,ht);D+=2*ht;for(let mn=0;mn<an.length;mn++){const zn=me[y]-me[y-1];y++,an[mn]=W0(Ie,D,zn),D+=2*zn}Ze[gt]=O.createPolygon(rn,an)}l[B++]=O.createMultiPolygon(Ze)}}}}return l}function W0(h,l,A){return zy(h,l,A,!0)}function dp(h,l,A,y){return jy(h,l,A,y,!0)}function om(h,l,A,y,_,B){return TC(h,l,A,y,!0,B)}function zy(h,l,A,y){const _=new Array(y?A+1:A);for(let B=0;B<2*A;B+=2)_[B/2]=new c(h[l+B],h[l+B+1]);return y&&(_[_.length-1]=_[0]),_}function jy(h,l,A,y,_){const B=new Array(_?y+1:y);for(let O=0;O<2*y;O+=2){const D=2*l[A+O/2];B[O/2]=new c(h[D],h[D+1])}return _&&(B[B.length-1]=B[0]),B}function TC(h,l,A,y,_,B){const O=new Array(_?y+1:y);for(let D=0;D<y;D++){const F=rm(h[l[A+D]],B.numBits,B.coordinateShift);O[D]=new c(F.x,F.y)}return _&&(O[O.length-1]=O[0]),O}class kC{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(l,A,y,_,B){this._vertexBufferType=l,this._topologyVector=A,this._vertexOffsets=y,this._vertexBuffer=_,this._mortonSettings=B}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const l=p1(this);let A=0;for(;A<this.numGeometries;)yield{coordinates:l[A],type:this.geometryType(A)},A++}getSimpleEncodedVertex(l){const A=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[A],this.vertexBuffer[A+1]]}getVertex(l){if(this.vertexOffsets&&this.mortonSettings){const y=rm(this.vertexBuffer[this.vertexOffsets[l]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[y.x,y.y]}const A=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[A],this.vertexBuffer[A+1]]}getGeometries(){return p1(this)}get mortonSettings(){return this._mortonSettings}}class fp extends kC{_numGeometries;_geometryType;constructor(l,A,y,_,B,O,D){super(y,_,B,O,D),this._numGeometries=l,this._geometryType=A}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===dr.POLYGON||this._geometryType===dr.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Ny extends kC{_geometryTypes;constructor(l,A,y,_,B,O){super(l,y,_,B,O),this._geometryTypes=A}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===dr.POLYGON||this.geometryType(l)===dr.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class E_{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(l,A,y,_){this._triangleOffsets=l,this._indexBuffer=A,this._vertexBuffer=y,this._topologyVector=_}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const l=new Array(this.numGeometries),A=this._topologyVector,y=A.partOffsets,_=A.ringOffsets,B=A.geometryOffsets;let O=0,D=1,F=1,W=1;for(let te=0;te<this.numGeometries;te++)switch(this.geometryType(te)){case dr.POLYGON:{const ae=y[D]-y[D-1];D++;const he=[];for(let me=0;me<ae;me++){const be=_[F]-_[F-1];F++;const we=[];for(let Ie=0;Ie<be;Ie++){const ze=this._vertexBuffer[O++],ct=this._vertexBuffer[O++];we.push(new c(ze,ct))}we.length>0&&we.push(we[0]),he.push(we)}l[te]=he,B&&W++}break;case dr.MULTIPOLYGON:{const ae=B[W]-B[W-1];W++;const he=[];for(let me=0;me<ae;me++){const be=y[D]-y[D-1];D++;for(let we=0;we<be;we++){const Ie=_[F]-_[F-1];F++;const ze=[];for(let ct=0;ct<Ie;ct++){const Ge=this._vertexBuffer[O++],Ze=this._vertexBuffer[O++];ze.push(new c(Ge,Ze))}ze.length>0&&ze.push(ze[0]),he.push(ze)}}l[te]=he}}return l}[Symbol.iterator](){return null}}function g1(h,l,A,y,_,B){return new Gy(h,l,A,y,_,B)}class Gy extends E_{_numGeometries;_geometryType;constructor(l,A,y,_,B,O){super(y,_,B,O),this._numGeometries=l,this._geometryType=A}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function y1(h,l,A,y,_){return new B_(h,l,A,y,_)}class B_ extends E_{_geometryTypes;constructor(l,A,y,_,B){super(A,y,_,B),this._geometryTypes=l}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function Q0(h,l,A,y,_){const B=Uu(h,A);let O=null,D=null,F=null,W=null,te=null,ae=null,he=null,me=null;if(lf(B,y,h,A)===sl.CONST){const we=OC(h,A,B,!1);for(let Ie=0;Ie<l-1;Ie++){const ze=Uu(h,A);switch(ze.physicalStreamType){case Pi.LENGTH:switch(ze.logicalStreamType.lengthType){case pu.GEOMETRIES:O=bd(h,A,ze);break;case pu.PARTS:D=bd(h,A,ze);break;case pu.RINGS:F=bd(h,A,ze);break;case pu.TRIANGLES:he=bd(h,A,ze)}break;case Pi.OFFSET:switch(ze.logicalStreamType.offsetType){case vl.VERTEX:W=gu(h,A,ze,!1);break;case vl.INDEX:me=gu(h,A,ze,!1)}break;case Pi.DATA:dA.VERTEX===ze.logicalStreamType.dictionaryType?te=gu(h,A,ze,!0):(ae={numBits:ze.numBits,coordinateShift:ze.coordinateShift},te=gu(h,A,ze,!1))}}return me!==null?O!=null||D!=null?g1(y,we,he,me,te,new G0(O,D,F)):g1(y,we,he,me,te):ae===null?(function(Ie,ze,ct,Ge,Ze){return new fp(Ie,ze,Pu.VEC_2,ct,Ge,Ze)})(y,we,new G0(O,D,F),W,te):(function(Ie,ze,ct,Ge,Ze,ht){return new fp(Ie,ze,Pu.MORTON,ct,Ge,Ze,ht)})(y,we,new G0(O,D,F),W,te,ae)}const be=gu(h,A,B,!1);for(let we=0;we<l-1;we++){const Ie=Uu(h,A);switch(Ie.physicalStreamType){case Pi.LENGTH:switch(Ie.logicalStreamType.lengthType){case pu.GEOMETRIES:O=gu(h,A,Ie,!1);break;case pu.PARTS:D=gu(h,A,Ie,!1);break;case pu.RINGS:F=gu(h,A,Ie,!1);break;case pu.TRIANGLES:he=bd(h,A,Ie)}break;case Pi.OFFSET:switch(Ie.logicalStreamType.offsetType){case vl.VERTEX:W=gu(h,A,Ie,!1);break;case vl.INDEX:me=gu(h,A,Ie,!1)}break;case Pi.DATA:dA.VERTEX===Ie.logicalStreamType.dictionaryType?te=gu(h,A,Ie,!0):(ae={numBits:Ie.numBits,coordinateShift:Ie.coordinateShift},te=gu(h,A,Ie,!1))}}return me!==null&&D===null?y1(be,he,me,te):(O!==null?(O=DC(be,O,2),D!==null&&F!==null?(D=RC(be,O,D,!1),F=(function(we,Ie,ze,ct){const Ge=new Int32Array(ze[ze.length-1]+1);let Ze=0;Ge[0]=Ze;let ht=1,gt=1,Gt=0;for(let an=0;an<we.length;an++){const rn=we[an],mn=Ie[an+1]-Ie[an];if(rn!==0&&rn!==3)for(let zn=0;zn<mn;zn++){const vn=ze[ht]-ze[ht-1];ht++;for(let sn=0;sn<vn;sn++)Ze=Ge[gt++]=Ze+ct[Gt++]}else for(let zn=0;zn<mn;zn++)Ge[gt++]=++Ze,ht++}return Ge})(be,O,D,F)):D!==null&&(D=(function(we,Ie,ze){const ct=new Int32Array(Ie[Ie.length-1]+1);let Ge=0;ct[0]=Ge;let Ze=1,ht=0;for(let gt=0;gt<we.length;gt++){const Gt=we[gt],an=Ie[gt+1]-Ie[gt];if(Gt===4||Gt===1)for(let rn=0;rn<an;rn++)Ge=ct[Ze++]=Ge+ze[ht++];else for(let rn=0;rn<an;rn++)ct[Ze++]=++Ge}return ct})(be,O,D))):D!==null&&F!==null?(D=DC(be,D,1),F=RC(be,D,F,!0)):D!==null&&(D=DC(be,D,0)),me!==null?y1(be,he,me,te,new G0(O,D,F)):ae===null?(function(we,Ie,ze,ct){return new Ny(Pu.VEC_2,we,Ie,ze,ct)})(be,new G0(O,D,F),W,te):(function(we,Ie,ze,ct,Ge){return new Ny(Pu.MORTON,we,Ie,ze,ct,Ge)})(be,new G0(O,D,F),W,te,ae))}function DC(h,l,A){const y=new Int32Array(h.length+1);let _=0;y[0]=_;let B=0;for(let O=0;O<h.length;O++)_=y[O+1]=_+(h[O]>A?l[B++]:1);return y}function RC(h,l,A,y){const _=new Int32Array(l[l.length-1]+1);let B=0;_[0]=B;let O=1,D=0;for(let F=0;F<h.length;F++){const W=h[F],te=l[F+1]-l[F];if(W===5||W===2||y&&(W===4||W===1))for(let ae=0;ae<te;ae++)B=_[O++]=B+A[D++];else for(let ae=0;ae<te;ae++)_[O++]=++B}return _}class O_ extends yd{dataVector;constructor(l,A,y){super(l,A.getBuffer(),y),this.dataVector=A}getValueFromBuffer(l){return this.dataVector.get(l)}}class I_ extends nm{getValueFromBuffer(l){return this.dataBuffer[l]}}class PC extends yd{constructor(l,A,y){super(l,BigInt64Array.of(A),y)}getValueFromBuffer(l){return this.dataBuffer[0]}}function mp(h,l,A){return UC(h,Math.ceil(l/8),A)}function UC(h,l,A){const y=new Uint8Array(l);let _=0;for(;_<l;){const B=h[A.increment()];if(B<=127){const O=B+3,D=h[A.increment()],F=_+O;y.fill(D,_,F),_=F}else{const O=256-B;for(let D=0;D<O;D++)y[_++]=h[A.increment()]}}return y}const T_=new TextDecoder;function q0(h,l,A){return A-l>=12?T_.decode(h.subarray(l,A)):(function(y,_,B){let O="",D=_;for(;D<B;){const F=y[D];let W,te,ae,he=null,me=F>239?4:F>223?3:F>191?2:1;if(D+me>B)break;me===1?F<128&&(he=F):me===2?(W=y[D+1],(192&W)==128&&(he=(31&F)<<6|63&W,he<=127&&(he=null))):me===3?(W=y[D+1],te=y[D+2],(192&W)==128&&(192&te)==128&&(he=(15&F)<<12|(63&W)<<6|63&te,(he<=2047||he>=55296&&he<=57343)&&(he=null))):me===4&&(W=y[D+1],te=y[D+2],ae=y[D+3],(192&W)==128&&(192&te)==128&&(192&ae)==128&&(he=(15&F)<<18|(63&W)<<12|(63&te)<<6|63&ae,(he<=65535||he>=1114112)&&(he=null))),he===null?(he=65533,me=1):he>65535&&(he-=65536,O+=String.fromCharCode(he>>>10&1023|55296),he=56320|1023&he),O+=String.fromCharCode(he),D+=me}return O})(h,l,A)}class LC extends yd{offsetBuffer;constructor(l,A,y,_){super(l,y,_),this.offsetBuffer=A}}class k_ extends LC{textEncoder;constructor(l,A,y,_){super(l,A,y,_??A.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(l){return q0(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class sm extends LC{indexBuffer;textEncoder;constructor(l,A,y,_,B){super(l,y,_,B??A.length),this.indexBuffer=A,this.indexBuffer=A,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const A=this.indexBuffer[l];return q0(this.dataBuffer,this.offsetBuffer[A],this.offsetBuffer[A+1])}}class Wy extends LC{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(l,A,y,_,B,O,D){super(l,y,_,D),this.indexBuffer=A,this.symbolOffsetBuffer=B,this.symbolTableBuffer=O,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(y,_,B){const O=[],D=new Array(_.length).fill(0);for(let F=1;F<_.length;F++)D[F]=D[F-1]+_[F-1];for(let F=0;F<B.length;F++)if(B[F]===255)O.push(B[++F]);else{const W=_[B[F]],te=D[B[F]];for(let ae=0;ae<W;ae++)O.push(y[te+ae])}return new Uint8Array(O)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const A=this.indexBuffer[l];return q0(this.decodedDictionary,this.offsetBuffer[A],this.offsetBuffer[A+1])}offsetToLengthBuffer(l){const A=new Uint32Array(l.length-1);let y=l[0];for(let _=1;_<l.length;_++){const B=l[_];A[_-1]=B-y,y=B}return A}}function Qy(h,l,A,y,_,B){return A.type==="scalarType"?(function(O,D,F,W,te,ae){let he=null,me=0;if(O===0)return null;if(ae.nullable){const we=Uu(D,F);me=we.numValues;const Ie=F.get(),ze=mp(D,me,F);F.set(Ie+we.byteLength),he=new Gl(ze,we.numValues)}const be=he??W;switch(te.physicalType){case 4:case 3:return(function(we,Ie,ze,ct,Ge){const Ze=Uu(we,Ie),ht=lf(Ze,Ge,we,Ie),gt=ct.physicalType===3;if(ht===sl.FLAT){const Gt=pp(Ge)?Fy(we,Ie,Ze,gt,Ge):gu(we,Ie,Ze,gt);return new Ru(ze.name,Gt,Ge)}if(ht===sl.SEQUENCE){const Gt=M_(we,Ie,Ze);return new wC(ze.name,Gt[0],Gt[1],Ze.numRleValues)}{const Gt=OC(we,Ie,Ze,gt);return new Py(ze.name,Gt,Ge)}})(D,F,ae,te,be);case 9:return(function(we,Ie,ze,ct,Ge){let Ze=null,ht=null,gt=null,Gt=null,an=null,rn=null,mn=null,zn=null;for(let vn=0;vn<ct;vn++){const sn=Uu(Ie,ze);if(sn.byteLength!==0)switch(sn.physicalStreamType){case Pi.PRESENT:{const $t=mp(Ie,sn.numValues,ze);rn=new Gl($t,sn.numValues);break}case Pi.OFFSET:ht=Ge!=null||rn!=null?Fy(Ie,ze,sn,!1,Ge??rn):gu(Ie,ze,sn,!1);break;case Pi.LENGTH:{const $t=bd(Ie,ze,sn);pu.DICTIONARY===sn.logicalStreamType.lengthType?Ze=$t:pu.SYMBOL===sn.logicalStreamType.lengthType?Gt=$t:mn=$t;break}case Pi.DATA:{const $t=Ie.subarray(ze.get(),ze.get()+sn.byteLength);ze.add(sn.byteLength);const ri=sn.logicalStreamType.dictionaryType;dA.FSST===ri?an=$t:dA.SINGLE===ri||dA.SHARED===ri?gt=$t:dA.NONE===ri&&(zn=$t);break}}}return(function(vn,sn,$t,ri,Xn,ci,Hn){return sn?new Wy(vn,$t,ri,Xn,ci,sn,Hn):null})(we,an,ht,Ze,gt,Gt,Ge??rn)??(function(vn,sn,$t,ri,Xn){return sn?Xn?new sm(vn,$t,ri,sn,Xn):new sm(vn,$t,ri,sn):null})(we,gt,ht,Ze,Ge??rn)??(function(vn,sn,$t,ri,Xn){if(!sn||!$t)return null;if(ri)return Xn?new sm(vn,ri,sn,$t,Xn):new sm(vn,ri,sn,$t);if(Xn&&Xn.size()!==sn.length-1){const ci=new Int32Array(Xn.size());let Hn=0;for(let Li=0;Li<Xn.size();Li++)ci[Li]=Xn.get(Li)?Hn++:0;return new sm(vn,ci,sn,$t,Xn)}return Xn?new k_(vn,sn,$t,Xn):new k_(vn,sn,$t)})(we,mn,zn,ht,Ge??rn)})(ae.name,D,F,ae.nullable?O-1:O,he);case 0:return(function(we,Ie,ze,ct,Ge){const Ze=Uu(we,Ie),ht=Ze.numValues,gt=Ie.get(),Gt=pp(Ge)?(function(rn,mn,zn,vn){const sn=UC(rn,Math.ceil(mn/8),zn),$t=new Gl(sn,mn),ri=vn.size(),Xn=new Gl(new Uint8Array(ri),ri);let ci=0;for(let Hn=0;Hn<vn.size();Hn++){const Li=!!vn.get(Hn)&&$t.get(ci++);Xn.set(Hn,Li)}return Xn.getBuffer()})(we,ht,Ie,Ge):mp(we,ht,Ie);Ie.set(gt+Ze.byteLength);const an=new Gl(Gt,ht);return new O_(ze.name,an,Ge)})(D,F,ae,0,be);case 6:case 5:return(function(we,Ie,ze,ct,Ge){const Ze=Uu(we,Ie),ht=lf(Ze,ct,we,Ie),gt=Ge.physicalType===5;if(ht===sl.FLAT){const Gt=pp(ct)?(function(an,rn,mn,zn,vn){return(function(sn,$t,ri,Xn){switch($t.logicalLevelTechnique1){case wr.DELTA:return $t.logicalLevelTechnique2===wr.RLE&&(sn=fA(sn,$t.runs,$t.numRleValues)),(function(ci,Hn){const Li=new BigInt64Array(ci.size());let Mo=0;ci.get(0)?(Li[0]=ci.get(0)?Hn[0]>>1n^-(1n&Hn[0]):0n,Mo=1):Li[0]=0n;let Qr=1;for(;Qr!=Li.length;++Qr)Li[Qr]=ci.get(Qr)?Li[Qr-1]+(Hn[Mo]>>1n^-(1n&Hn[Mo++])):Li[Qr-1];return Li})(Xn,sn);case wr.RLE:return(function(ci,Hn,Li,Mo){const Qr=Hn;return Li?(function(ga,Gc,Wl){const ya=new BigInt64Array(ga.size());let ia=0;for(let Zo=0;Zo<Wl;Zo++){const Ya=Number(Gc[Zo]);let al=Gc[Zo+Wl];al=al>>1n^-(1n&al);for(let $s=ia;$s<ia+Ya;$s++)ga.get($s)?ya[$s]=al:(ya[$s]=0n,ia++);ia+=Ya}return ya})(Mo,ci,Qr.runs):(function(ga,Gc,Wl){const ya=new BigInt64Array(ga.size());let ia=0;for(let Zo=0;Zo<Wl;Zo++){const Ya=Number(Gc[Zo]),al=Gc[Zo+Wl];for(let $s=ia;$s<ia+Ya;$s++)ga.get($s)?ya[$s]=al:(ya[$s]=0n,ia++);ia+=Ya}return ya})(Mo,ci,Qr.runs)})(sn,$t,ri,Xn);case wr.NONE:return sn=ri?(function(ci,Hn){const Li=new BigInt64Array(ci.size());let Mo=0,Qr=0;for(;Qr!=Li.length;++Qr)if(ci.get(Qr)){const ga=Hn[Mo++];Li[Qr]=ga>>1n^-(1n&ga)}else Li[Qr]=0n;return Li})(Xn,sn):(function(ci,Hn){const Li=new BigInt64Array(ci.size());let Mo=0,Qr=0;for(;Qr!=Li.length;++Qr)Li[Qr]=ci.get(Qr)?Hn[Mo++]:0n;return Li})(Xn,sn),sn;default:throw new Error("The specified Logical level technique is not supported")}})(Uy(an,rn,mn.numValues),mn,zn,vn)})(we,Ie,Ze,gt,ct):hc(we,Ie,Ze,gt);return new Ap(ze.name,Gt,ct)}if(ht===sl.SEQUENCE){const Gt=Cl(we,Ie,Ze);return new IC(ze.name,Gt[0],Gt[1],Ze.numRleValues)}{const Gt=w_(we,Ie,Ze,gt);return new PC(ze.name,Gt,ct)}})(D,F,ae,be,te);case 7:return(function(we,Ie,ze,ct){const Ge=Uu(we,Ie),Ze=pp(ct)?(function(ht,gt,Gt,an){const rn=gt.get(),mn=rn+an*Float32Array.BYTES_PER_ELEMENT,zn=new Uint8Array(ht.subarray(rn,mn)).buffer,vn=new Float32Array(zn);gt.set(mn);const sn=Gt.size(),$t=new Float32Array(sn);let ri=0;for(let Xn=0;Xn<sn;Xn++)$t[Xn]=Gt.get(Xn)?vn[ri++]:0;return $t})(we,Ie,ct,Ge.numValues):(function(ht,gt,Gt){const an=gt.get(),rn=an+Gt*Float32Array.BYTES_PER_ELEMENT,mn=new Uint8Array(ht.subarray(an,rn)).buffer,zn=new Float32Array(mn);return gt.set(rn),zn})(we,Ie,Ge.numValues);return new I_(ze.name,Ze,ct)})(D,F,ae,be);case 8:return(function(we,Ie,ze,ct){const Ge=Uu(we,Ie),Ze=pp(ct)?(function(ht,gt,Gt,an){const rn=gt.get(),mn=rn+an*Float64Array.BYTES_PER_ELEMENT,zn=new Uint8Array(ht.subarray(rn,mn)).buffer,vn=new Float64Array(zn);gt.set(mn);const sn=Gt.size(),$t=new Float64Array(sn);let ri=0;for(let Xn=0;Xn<sn;Xn++)$t[Xn]=Gt.get(Xn)?vn[ri++]:0;return $t})(we,Ie,ct,Ge.numValues):(function(ht,gt,Gt){const an=gt.get(),rn=an+Gt*Float64Array.BYTES_PER_ELEMENT,mn=new Uint8Array(ht.subarray(an,rn)).buffer,zn=new Float64Array(mn);return gt.set(rn),zn})(we,Ie,Ge.numValues);return new vd(ze.name,Ze,ct)})(D,F,ae,be);default:throw new Error(`The specified data type for the field is currently not supported: ${te}`)}})(y,h,l,_,A.scalarType,A):y!=1?null:(function(O,D,F,W){let te=null,ae=null,he=null,me=null,be=!1;for(;!be;){const ct=Uu(O,D);switch(ct.physicalStreamType){case Pi.LENGTH:pu.DICTIONARY===ct.logicalStreamType.lengthType?te=bd(O,D,ct):he=bd(O,D,ct);break;case Pi.DATA:dA.SINGLE===ct.logicalStreamType.dictionaryType||dA.SHARED===ct.logicalStreamType.dictionaryType?(ae=O.subarray(D.get(),D.get()+ct.byteLength),be=!0):me=O.subarray(D.get(),D.get()+ct.byteLength),D.add(ct.byteLength)}}const we=F.complexType.children,Ie=[];let ze=0;for(const ct of we){const Ge=na(O,D,1)[0];if(Ge==0)continue;const Ze=`${F.name}${ct.name==="default"?"":":"+ct.name}`;if(Ge!==2||ct.type!=="scalarField"||ct.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const ht=Uu(O,D),gt=mp(O,ht.numValues,D),Gt=Uu(O,D),an=Gt.decompressedCount!==W?Fy(O,D,Gt,!1,new Gl(gt,ht.numValues)):gu(O,D,Gt,!1);Ie[ze++]=me?new Wy(Ze,an,te,ae,he,me,new Gl(gt,ht.numValues)):new sm(Ze,an,te,ae,new Gl(gt,ht.numValues))}return Ie})(h,l,A,_)}function pp(h){return h instanceof Gl}function D_(h){if(h.name==="id")return!1;if(h.type==="scalarType"){const l=h.scalarType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(l.type==="logicalType")return!1}else if(h.type==="complexType"){const l=h.complexType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",h),!1}const KC=new TextDecoder;function uf(h,l){const A=na(h,l,1)[0];if(A===0)return"";const y=l.get(),_=h.subarray(y,y+A);return l.add(A),KC.decode(_)}function cf(h,l){const A=na(h,l,1)[0]>>>0,y=!!(4&A),_=!!(2&A),B=na(h,l,1)[0]>>>0,O={};if(1&A&&(O.nullable=!0),_){const D={};if(y?(D.type="logicalType",D.logicalType=B):(D.type="physicalType",D.physicalType=B),8&A){const F=na(h,l,1)[0]>>>0;D.children=new Array(F);for(let W=0;W<F;W++)D.children[W]=cf(h,l)}O.type="complexField",O.complexField=D}else{const D={};y?(D.type="logicalType",D.logicalType=B):(D.type="physicalType",D.physicalType=B),O.type="scalarField",O.scalarField=D}return O}function am(h,l){const A=na(h,l,1)[0]>>>0,y=(function(_){switch(_){case 0:case 1:case 2:case 3:{const B={};B.nullable=!!(1&_),B.columnScope=0;const O={};return O.physicalType=_>1?6:4,O.type="physicalType",B.scalarType=O,B.type="scalarType",B}case 4:{const B={nullable:!1,columnScope:0},O={type:"physicalType",physicalType:0};return B.type="complexType",B.complexType=O,B}case 30:{const B={nullable:!1,columnScope:0},O={type:"physicalType",physicalType:1};return B.type="complexType",B.complexType=O,B}default:return(function(B){let O=null;switch(B){case 10:case 11:O=0;break;case 12:case 13:O=1;break;case 14:case 15:O=2;break;case 16:case 17:O=3;break;case 18:case 19:O=4;break;case 20:case 21:O=5;break;case 22:case 23:O=6;break;case 24:case 25:O=7;break;case 26:case 27:O=8;break;case 28:case 29:O=9;break;default:return null}const D={};D.nullable=!!(1&B),D.columnScope=0;const F={type:"physicalType"};return F.physicalType=O,D.type="scalarType",D.scalarType=F,D})(_)}})(A);if(!y)throw new Error(`Unsupported column type code: ${A}`);if((function(_){return _>=10})(A)?y.name=uf(h,l):A>=0&&A<=3?y.name="id":A===4&&(y.name="geometry"),(function(_){return _===30})(A)){const _=na(h,l,1)[0]>>>0,B=y.complexType;B.children=new Array(_);for(let O=0;O<_;O++)B.children[O]=cf(h,l)}return y}function v1(h,l){const A={featureTables:[]},y={};y.name=uf(h,l);const _=na(h,l,1)[0]>>>0,B=na(h,l,1)[0]>>>0;y.columns=new Array(B);for(let O=0;O<B;O++)y.columns[O]=am(h,l);return A.featureTables.push(y),[A,_]}function C1(h,l,A,y,_,B,O=!1){const D=l.scalarType.physicalType,F=lf(_,B,h,A);if(D===4)switch(F){case sl.FLAT:{const W=gu(h,A,_,!1);return new Ru(y,W,B)}case sl.SEQUENCE:{const W=M_(h,A,_);return new wC(y,W[0],W[1],_.numRleValues)}case sl.CONST:{const W=OC(h,A,_,!1);return new Py(y,W,B)}}else switch(F){case sl.FLAT:{if(O){const te=(function(ae,he,me,be){const we=(function(Ie,ze,ct){const Ge=new Float64Array(ze);for(let Ze=0;Ze<ze;Ze++)Ge[Ze]=GA(Ie,ct);return Ge})(ae,me.numValues,he);return(function(Ie,ze,ct){switch(ze.logicalLevelTechnique1){case wr.DELTA:return ze.logicalLevelTechnique2===wr.RLE&&(Ie=EC(Ie,ze.runs,ze.numRleValues)),(function(Ge){Ge[0]=Ge[0]%2==1?(Ge[0]+1)/-2:Ge[0]/2;const Ze=Ge.length/4*4;let ht=1;if(Ze>=4)for(;ht<Ze-4;ht+=4){const gt=Ge[ht],Gt=Ge[ht+1],an=Ge[ht+2],rn=Ge[ht+3];Ge[ht]=(gt%2==1?(gt+1)/-2:gt/2)+Ge[ht-1],Ge[ht+1]=(Gt%2==1?(Gt+1)/-2:Gt/2)+Ge[ht],Ge[ht+2]=(an%2==1?(an+1)/-2:an/2)+Ge[ht+1],Ge[ht+3]=(rn%2==1?(rn+1)/-2:rn/2)+Ge[ht+2]}for(;ht!=Ge.length;++ht)Ge[ht]=(Ge[ht]%2==1?(Ge[ht]+1)/-2:Ge[ht]/2)+Ge[ht-1]})(Ie),Ie;case wr.RLE:return(function(Ge,Ze,ht){return EC(Ge,Ze.runs,Ze.numRleValues)})(Ie,ze);case wr.NONE:return Ie;default:throw new Error(`The specified Logical level technique is not supported: ${ze.logicalLevelTechnique1}`)}})(we,me)})(h,A,_);return new vd(y,te,B)}const W=hc(h,A,_,!1);return new Ap(y,W,B)}case sl.SEQUENCE:{const W=Cl(h,A,_);return new IC(y,W[0],W[1],_.numRleValues)}case sl.CONST:{const W=w_(h,A,_,!1);return new PC(y,W,B)}}throw new Error("Vector type not supported for id column.")}class lm{constructor(l,A){var y;switch(this._featureData=l,this.properties=this._featureData.properties||{},(y=this._featureData.geometry)===null||y===void 0?void 0:y.type){case dr.POINT:case dr.MULTIPOINT:this.type=1;break;case dr.LINESTRING:case dr.MULTILINESTRING:this.type=2;break;case dr.POLYGON:case dr.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=A,this.id=Number(this._featureData.id)}loadGeometry(){const l=[];for(const A of this._featureData.geometry.coordinates){const y=[];for(const _ of A)y.push(new c(_.x,_.y));l.push(y)}return l}}class p3{constructor(l){this.features=[],this.featureTable=l,this.name=l.name,this.extent=l.extent,this.version=2,this.features=l.getFeatures(),this.length=this.features.length}feature(l){return new lm(this.features[l],this.extent)}}class FC{constructor(l){this.layers={};const A=(function(y,_,B=!0){const O=new __(0),D=[];for(;O.get()<y.length;){const F=na(y,O,1)[0]>>>0,W=O.get()+F;if(W>y.length)throw new Error(`Block overruns tile: ${W} > ${y.length}`);if(na(y,O,1)[0]>>>0!=1){O.set(W);continue}const te=v1(y,O),ae=te[1],he=te[0].featureTables[0];let me=null,be=null;const we=[];let Ie=0;for(const ct of he.columns){const Ge=ct.name;if(Ge==="id"){let Ze=null;if(ct.nullable){const gt=Uu(y,O),Gt=O.get(),an=mp(y,gt.numValues,O);O.set(Gt+gt.byteLength),Ze=new Gl(an,gt.numValues)}const ht=Uu(y,O);Ie=ht.decompressedCount,me=C1(y,ct,O,Ge,ht,Ze??Ie,B)}else if(Ge==="geometry"){const Ze=na(y,O,1)[0];if(Ie===0){const ht=O.get();Ie=Uu(y,O).decompressedCount,O.set(ht)}be=Q0(y,Ze,O,Ie)}else{const Ze=D_(ct)?na(y,O,1)[0]:1;if(Ze===0&&ct.type==="scalarType")continue;const ht=Qy(y,O,ct,Ze,Ie);if(ht)if(Array.isArray(ht))for(const gt of ht)we.push(gt);else we.push(ht)}}const ze=new m3(he.name,be,me,we,ae);D.push(ze),O.set(W)}return D})(new Uint8Array(l));this.layers=A.reduce(((y,_)=>Object.assign(Object.assign({},y),{[_.name]:new p3(_)})),{})}}class mA{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const A=new mA;return A.extend(l(new c(this.minX,this.minY))),A.extend(l(new c(this.maxX,this.minY))),A.extend(l(new c(this.minX,this.maxY))),A.extend(l(new c(this.maxX,this.maxY))),A}static fromPoints(l){const A=new mA;for(const y of l)A.extend(y);return A}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class R_{constructor(l,A){this.feature=l,this.type=l.type,this.properties=l.tags?l.tags:{},this.extent=A,"id"in l&&(typeof l.id=="string"?this.id=parseInt(l.id,10):typeof l.id!="number"||isNaN(l.id)||(this.id=l.id))}loadGeometry(){const l=[],A=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const y of A){const _=[];for(const B of y)_.push(new c(B[0],B[1]));l.push(_)}return l}}const gp="_geojsonTileLayer";function qy(h,l){l.writeVarintField(15,h.version||1),l.writeStringField(1,h.name||""),l.writeVarintField(5,h.extent||4096);const A={keys:[],values:[],keycache:{},valuecache:{}};for(let B=0;B<h.length;B++)A.feature=h.feature(B),l.writeMessage(2,P_,A);const y=A.keys;for(const B of y)l.writeStringField(3,B);const _=A.values;for(const B of _)l.writeMessage(4,Y0,B)}function P_(h,l){if(!h.feature)return;const A=h.feature;A.id!==void 0&&l.writeVarintField(1,A.id),l.writeMessage(2,g3,h),l.writeVarintField(3,A.type),l.writeMessage(4,U_,A)}function g3(h,l){for(const A in h.feature?.properties){let y=h.feature.properties[A],_=h.keycache[A];if(y===null)continue;_===void 0&&(h.keys.push(A),_=h.keys.length-1,h.keycache[A]=_),l.writeVarint(_),typeof y!="string"&&typeof y!="boolean"&&typeof y!="number"&&(y=JSON.stringify(y));const B=typeof y+":"+y;let O=h.valuecache[B];O===void 0&&(h.values.push(y),O=h.values.length-1,h.valuecache[B]=O),l.writeVarint(O)}}function um(h,l){return(l<<3)+(7&h)}function b1(h){return h<<1^h>>31}function U_(h,l){const A=h.loadGeometry(),y=h.type;let _=0,B=0;for(const O of A){let D=1;y===1&&(D=O.length),l.writeVarint(um(1,D));const F=y===3?O.length-1:O.length;for(let W=0;W<F;W++){W===1&&y!==1&&l.writeVarint(um(2,F-1));const te=O[W].x-_,ae=O[W].y-B;l.writeVarint(b1(te)),l.writeVarint(b1(ae)),_+=te,B+=ae}h.type===3&&l.writeVarint(um(7,1))}}function Y0(h,l){const A=typeof h;A==="string"?l.writeStringField(1,h):A==="boolean"?l.writeBooleanField(7,h):A==="number"&&(h%1!=0?l.writeDoubleField(3,h):h<0?l.writeSVarintField(6,h):l.writeVarintField(5,h))}class Lu{constructor(l,A){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new ed(mt,16,0),this.grid3D=new ed(mt,16,0),this.featureIndexArray=new ye,this.promoteId=A}insert(l,A,y,_,B,O){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,_,B);const F=O?this.grid3D:this.grid;for(let W=0;W<A.length;W++){const te=A[W],ae=[1/0,1/0,-1/0,-1/0];for(let he=0;he<te.length;he++){const me=te[he];ae[0]=Math.min(ae[0],me.x),ae[1]=Math.min(ae[1],me.y),ae[2]=Math.max(ae[2],me.x),ae[3]=Math.max(ae[3],me.y)}ae[0]<mt&&ae[1]<mt&&ae[2]>=0&&ae[3]>=0&&F.insert(D,ae[0],ae[1],ae[2],ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Do(new s1(this.rawTileData)).layers:new FC(this.rawTileData).layers,this.sourceLayerCoder=new z0(this.vtLayers?Object.keys(this.vtLayers).sort():[gp])),this.vtLayers}query(l,A,y,_){this.loadVTLayers();const B=l.params,O=mt/l.tileSize/l.scale,D=Ul(B.filter,B.globalState),F=l.queryGeometry,W=l.queryPadding*O,te=mA.fromPoints(F),ae=this.grid.query(te.minX-W,te.minY-W,te.maxX+W,te.maxY+W),he=mA.fromPoints(l.cameraQueryGeometry).expandBy(W),me=this.grid3D.query(he.minX,he.minY,he.maxX,he.maxY,((Ie,ze,ct,Ge)=>(function(Ze,ht,gt,Gt,an){for(const mn of Ze)if(ht<=mn.x&&gt<=mn.y&&Gt>=mn.x&&an>=mn.y)return!0;const rn=[new c(ht,gt),new c(ht,an),new c(Gt,an),new c(Gt,gt)];if(Ze.length>2){for(const mn of rn)if(hd(Ze,mn))return!0}for(let mn=0;mn<Ze.length-1;mn++)if(ay(Ze[mn],Ze[mn+1],rn))return!0;return!1})(l.cameraQueryGeometry,Ie-W,ze-W,ct+W,Ge+W)));for(const Ie of me)ae.push(Ie);ae.sort(Yy);const be={};let we;for(let Ie=0;Ie<ae.length;Ie++){const ze=ae[Ie];if(ze===we)continue;we=ze;const ct=this.featureIndexArray.get(ze);let Ge=null;this.loadMatchingFeature(be,ct.bucketIndex,ct.sourceLayerIndex,ct.featureIndex,D,B.layers,B.availableImages,A,y,_,((Ze,ht,gt)=>(Ge||(Ge=da(Ze)),ht.queryIntersectsFeature({queryGeometry:F,feature:Ze,featureState:gt,geometry:Ge,zoom:this.z,transform:l.transform,pixelsToTileUnits:O,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return be}loadMatchingFeature(l,A,y,_,B,O,D,F,W,te,ae){const he=this.bucketLayerIDs[A];if(O&&!he.some((Ie=>O.has(Ie))))return;const me=this.sourceLayerCoder.decode(y),be=this.vtLayers[me].feature(_);if(B.needGeometry){const Ie=bh(be,!0);if(!B.filter(new Gr(this.tileID.overscaledZ),Ie,this.tileID.canonical))return}else if(!B.filter(new Gr(this.tileID.overscaledZ),be))return;const we=this.getId(be,me);for(let Ie=0;Ie<he.length;Ie++){const ze=he[Ie];if(O&&!O.has(ze))continue;const ct=F[ze];if(!ct)continue;let Ge={};we&&te&&(Ge=te.getState(ct.sourceLayer||gp,we));const Ze=Ue({},W[ze]);Ze.paint=V0(Ze.paint,ct.paint,be,Ge,D),Ze.layout=V0(Ze.layout,ct.layout,be,Ge,D);const ht=!ae||ae(be,ct,Ge);if(!ht)continue;const gt=new Dy(be,this.z,this.x,this.y,we);gt.layer=Ze;let Gt=l[ze];Gt===void 0&&(Gt=l[ze]=[]),Gt.push({featureIndex:_,feature:gt,intersectionZ:ht})}}lookupSymbolFeatures(l,A,y,_,B,O,D,F){const W={};this.loadVTLayers();const te=Ul(B.filterSpec,B.globalState);for(const ae of l)this.loadMatchingFeature(W,y,_,ae,te,O,D,F,A);return W}hasLayer(l){for(const A of this.bucketLayerIDs)for(const y of A)if(l===y)return!0;return!1}getId(l,A){var y;let _=l.id;return this.promoteId&&(_=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((y=l.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(_=Number(l.properties.cluster_id))),_}}function V0(h,l,A,y,_){return Te(h,((B,O)=>{const D=l instanceof oc?l.get(O):null;return D&&D.evaluate?D.evaluate(A,y,_):D}))}function Yy(h,l){return l-h}function zC(h,l,A,y,_){const B=[];for(let O=0;O<h.length;O++){const D=h[O];let F;for(let W=0;W<D.length-1;W++){let te=D[W],ae=D[W+1];te.x<l&&ae.x<l||(te.x<l?te=new c(l,te.y+(l-te.x)/(ae.x-te.x)*(ae.y-te.y))._round():ae.x<l&&(ae=new c(l,te.y+(l-te.x)/(ae.x-te.x)*(ae.y-te.y))._round()),te.y<A&&ae.y<A||(te.y<A?te=new c(te.x+(A-te.y)/(ae.y-te.y)*(ae.x-te.x),A)._round():ae.y<A&&(ae=new c(te.x+(A-te.y)/(ae.y-te.y)*(ae.x-te.x),A)._round()),te.x>=y&&ae.x>=y||(te.x>=y?te=new c(y,te.y+(y-te.x)/(ae.x-te.x)*(ae.y-te.y))._round():ae.x>=y&&(ae=new c(y,te.y+(y-te.x)/(ae.x-te.x)*(ae.y-te.y))._round()),te.y>=_&&ae.y>=_||(te.y>=_?te=new c(te.x+(_-te.y)/(ae.y-te.y)*(ae.x-te.x),_)._round():ae.y>=_&&(ae=new c(te.x+(_-te.y)/(ae.y-te.y)*(ae.x-te.x),_)._round()),F&&te.equals(F[F.length-1])||(F=[te],B.push(F)),F.push(ae)))))}}return B}function L_(h,l,A,y,_){switch(l){case 1:return(function(B,O,D,F){const W=[];for(const te of B)for(const ae of te){const he=F===0?ae.x:ae.y;he>=O&&he<=D&&W.push([ae])}return W})(h,A,y,_);case 2:return f(h,A,y,_,!1);case 3:return f(h,A,y,_,!0)}return[]}function Vy(h,l,A,y,_){const B=y===0?g:x;let O=[];const D=[];for(let te=0;te<h.length-1;te++){const ae=h[te],he=h[te+1],me=y===0?ae.x:ae.y,be=y===0?he.x:he.y;let we=!1;me<l?be>l&&O.push(B(ae,he,l)):me>A?be<A&&O.push(B(ae,he,A)):O.push(ae),be<l&&me>=l&&(O.push(B(ae,he,l)),we=!0),be>A&&me<=A&&(O.push(B(ae,he,A)),we=!0),!_&&we&&(D.push(O),O=[])}const F=h.length-1,W=y===0?h[F].x:h[F].y;return W>=l&&W<=A&&O.push(h[F]),_&&O.length>0&&!O[0].equals(O[O.length-1])&&O.push(new c(O[0].x,O[0].y)),O.length>0&&D.push(O),D}function f(h,l,A,y,_){const B=[];for(const O of h){const D=Vy(O,l,A,y,_);D.length>0&&B.push(...D)}return B}function g(h,l,A){return new c(A,h.y+(A-h.x)/(l.x-h.x)*(l.y-h.y))}function x(h,l,A){return new c(h.x+(A-h.y)/(l.y-h.y)*(l.x-h.x),A)}jn("FeatureIndex",Lu,{omit:["rawTileData","sourceLayerCoder"]});class T extends c{constructor(l,A,y,_){super(l,A),this.angle=y,_!==void 0&&(this.segment=_)}clone(){return new T(this.x,this.y,this.angle,this.segment)}}function G(h,l,A,y,_){if(l.segment===void 0||A===0)return!0;let B=l,O=l.segment+1,D=0;for(;D>-A/2;){if(O--,O<0)return!1;D-=h[O].dist(B),B=h[O]}D+=h[O].dist(h[O+1]),O++;const F=[];let W=0;for(;D<A/2;){const te=h[O],ae=h[O+1];if(!ae)return!1;let he=h[O-1].angleTo(te)-te.angleTo(ae);for(he=Math.abs((he+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:D,angleDelta:he}),W+=he;D-F[0].distance>y;)W-=F.shift().angleDelta;if(W>_)return!1;O++,D+=te.dist(ae)}return!0}function J(h){let l=0;for(let A=0;A<h.length-1;A++)l+=h[A].dist(h[A+1]);return l}function xe(h,l,A){return h?.6*l*A:0}function qe(h,l){return Math.max(h?h.right-h.left:0,l?l.right-l.left:0)}function xt(h,l,A,y,_,B){const O=xe(A,_,B),D=qe(A,y)*B;let F=0;const W=J(h)/2;for(let te=0;te<h.length-1;te++){const ae=h[te],he=h[te+1],me=ae.dist(he);if(F+me>W){const be=(W-F)/me,we=_o.number(ae.x,he.x,be),Ie=_o.number(ae.y,he.y,be),ze=new T(we,Ie,he.angleTo(ae),te);return ze._round(),!O||G(h,ze,D,O,l)?ze:void 0}F+=me}}function Zt(h,l,A,y,_,B,O,D,F){const W=xe(y,B,O),te=qe(y,_),ae=te*O,he=h[0].x===0||h[0].x===F||h[0].y===0||h[0].y===F;return l-ae<l/4&&(l=ae+l/4),un(h,he?l/2*D%l:(te/2+2*B)*O*D%l,l,W,A,ae,he,!1,F)}function un(h,l,A,y,_,B,O,D,F){const W=B/2,te=J(h);let ae=0,he=l-A,me=[];for(let be=0;be<h.length-1;be++){const we=h[be],Ie=h[be+1],ze=we.dist(Ie),ct=Ie.angleTo(we);for(;he+A<ae+ze;){he+=A;const Ge=(he-ae)/ze,Ze=_o.number(we.x,Ie.x,Ge),ht=_o.number(we.y,Ie.y,Ge);if(Ze>=0&&Ze<F&&ht>=0&&ht<F&&he-W>=0&&he+W<=te){const gt=new T(Ze,ht,ct,be);gt._round(),y&&!G(h,gt,B,y,_)||me.push(gt)}}ae+=ze}return D||me.length||O||(me=un(h,ae/2,A,y,_,B,O,!0,F)),me}function yn(h,l,A,y){const _=[],B=h.image,O=B.pixelRatio,D=B.paddedRect.w-2,F=B.paddedRect.h-2;let W={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const te=B.stretchX||[[0,D]],ae=B.stretchY||[[0,F]],he=($t,ri)=>$t+ri[1]-ri[0],me=te.reduce(he,0),be=ae.reduce(he,0),we=D-me,Ie=F-be;let ze=0,ct=me,Ge=0,Ze=be,ht=0,gt=we,Gt=0,an=Ie;if(B.content&&y){const $t=B.content,ri=$t[2]-$t[0],Xn=$t[3]-$t[1];(B.textFitWidth||B.textFitHeight)&&(W=Ey(h)),ze=Jt(te,0,$t[0]),Ge=Jt(ae,0,$t[1]),ct=Jt(te,$t[0],$t[2]),Ze=Jt(ae,$t[1],$t[3]),ht=$t[0]-ze,Gt=$t[1]-Ge,gt=ri-ct,an=Xn-Ze}const rn=W.x1,mn=W.y1,zn=W.x2-rn,vn=W.y2-mn,sn=($t,ri,Xn,ci)=>{const Hn=Si($t.stretch-ze,ct,zn,rn),Li=ir($t.fixed-ht,gt,$t.stretch,me),Mo=Si(ri.stretch-Ge,Ze,vn,mn),Qr=ir(ri.fixed-Gt,an,ri.stretch,be),ga=Si(Xn.stretch-ze,ct,zn,rn),Gc=ir(Xn.fixed-ht,gt,Xn.stretch,me),Wl=Si(ci.stretch-Ge,Ze,vn,mn),ya=ir(ci.fixed-Gt,an,ci.stretch,be),ia=new c(Hn,Mo),Zo=new c(ga,Mo),Ya=new c(ga,Wl),al=new c(Hn,Wl),$s=new c(Li/O,Qr/O),Bh=new c(Gc/O,ya/O),Wc=l*Math.PI/180;if(Wc){const Ku=Math.sin(Wc),Pa=Math.cos(Wc),Ql=[Pa,-Ku,Ku,Pa];ia._matMult(Ql),Zo._matMult(Ql),al._matMult(Ql),Ya._matMult(Ql)}const Oh=$t.stretch+$t.fixed,cm=ri.stretch+ri.fixed;return{tl:ia,tr:Zo,bl:al,br:Ya,tex:{x:B.paddedRect.x+1+Oh,y:B.paddedRect.y+1+cm,w:Xn.stretch+Xn.fixed-Oh,h:ci.stretch+ci.fixed-cm},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$s,pixelOffsetBR:Bh,minFontScaleX:gt/O/zn,minFontScaleY:an/O/vn,isSDF:A}};if(y&&(B.stretchX||B.stretchY)){const $t=on(te,we,me),ri=on(ae,Ie,be);for(let Xn=0;Xn<$t.length-1;Xn++){const ci=$t[Xn],Hn=$t[Xn+1];for(let Li=0;Li<ri.length-1;Li++)_.push(sn(ci,ri[Li],Hn,ri[Li+1]))}}else _.push(sn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:F+1}));return _}function Jt(h,l,A){let y=0;for(const _ of h)y+=Math.max(l,Math.min(A,_[1]))-Math.max(l,Math.min(A,_[0]));return y}function on(h,l,A){const y=[{fixed:-1,stretch:0}];for(const[_,B]of h){const O=y[y.length-1];y.push({fixed:_-O.stretch,stretch:O.stretch}),y.push({fixed:_-O.stretch,stretch:O.stretch+(B-_)})}return y.push({fixed:l+1,stretch:A}),y}function Si(h,l,A,y){return h/l*A+y}function ir(h,l,A,y){return h-l*A/y}jn("Anchor",T);class Go{constructor(l,A,y,_,B,O,D,F,W,te){var ae;if(this.boxStartIndex=l.length,W){let he=O.top,me=O.bottom;const be=O.collisionPadding;be&&(he-=be[1],me+=be[3]);let we=me-he;we>0&&(we=Math.max(10,we),this.circleDiameter=we)}else{const he=!((ae=O.image)===null||ae===void 0)&&ae.content&&(O.image.textFitWidth||O.image.textFitHeight)?Ey(O):{x1:O.left,y1:O.top,x2:O.right,y2:O.bottom};he.y1=he.y1*D-F[0],he.y2=he.y2*D+F[2],he.x1=he.x1*D-F[3],he.x2=he.x2*D+F[1];const me=O.collisionPadding;if(me&&(he.x1-=me[0]*D,he.y1-=me[1]*D,he.x2+=me[2]*D,he.y2+=me[3]*D),te){const be=new c(he.x1,he.y1),we=new c(he.x2,he.y1),Ie=new c(he.x1,he.y2),ze=new c(he.x2,he.y2),ct=te*Math.PI/180;be._rotate(ct),we._rotate(ct),Ie._rotate(ct),ze._rotate(ct),he.x1=Math.min(be.x,we.x,Ie.x,ze.x),he.x2=Math.max(be.x,we.x,Ie.x,ze.x),he.y1=Math.min(be.y,we.y,Ie.y,ze.y),he.y2=Math.max(be.y,we.y,Ie.y,ze.y)}l.emplaceBack(A.x,A.y,he.x1,he.y1,he.x2,he.y2,y,_,B)}this.boxEndIndex=l.length}}class Lt{constructor(l=[],A=(y,_)=>y<_?-1:y>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=A,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:A,compare:y}=this,_=A[l];for(;l>0;){const B=l-1>>1,O=A[B];if(y(_,O)>=0)break;A[l]=O,l=B}A[l]=_}_down(l){const{data:A,compare:y}=this,_=this.length>>1,B=A[l];for(;l<_;){let O=1+(l<<1);const D=O+1;if(D<this.length&&y(A[D],A[O])<0&&(O=D),y(A[O],B)>=0)break;A[l]=A[O],l=O}A[l]=B}}function kt(h,l=1,A=!1){const y=mA.fromPoints(h[0]),_=Math.min(y.width(),y.height());let B=_/2;const O=new Lt([],Vt),{minX:D,minY:F,maxX:W,maxY:te}=y;if(_===0)return new c(D,F);for(let me=D;me<W;me+=_)for(let be=F;be<te;be+=_)O.push(new dn(me+B,be+B,B,h));let ae=(function(me){let be=0,we=0,Ie=0;const ze=me[0];for(let ct=0,Ge=ze.length,Ze=Ge-1;ct<Ge;Ze=ct++){const ht=ze[ct],gt=ze[Ze],Gt=ht.x*gt.y-gt.x*ht.y;we+=(ht.x+gt.x)*Gt,Ie+=(ht.y+gt.y)*Gt,be+=3*Gt}return new dn(we/be,Ie/be,0,me)})(h),he=O.length;for(;O.length;){const me=O.pop();(me.d>ae.d||!ae.d)&&(ae=me,A&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,he)),me.max-ae.d<=l||(B=me.h/2,O.push(new dn(me.p.x-B,me.p.y-B,B,h)),O.push(new dn(me.p.x+B,me.p.y-B,B,h)),O.push(new dn(me.p.x-B,me.p.y+B,B,h)),O.push(new dn(me.p.x+B,me.p.y+B,B,h)),he+=4)}return A&&(console.log(`num probes: ${he}`),console.log(`best distance: ${ae.d}`)),ae.p}function Vt(h,l){return l.max-h.max}function dn(h,l,A,y){this.p=new c(h,l),this.h=A,this.d=(function(_,B){let O=!1,D=1/0;for(let F=0;F<B.length;F++){const W=B[F];for(let te=0,ae=W.length,he=ae-1;te<ae;he=te++){const me=W[te],be=W[he];me.y>_.y!=be.y>_.y&&_.x<(be.x-me.x)*(_.y-me.y)/(be.y-me.y)+me.x&&(O=!O),D=Math.min(D,fa(_,me,be))}}return(O?1:-1)*Math.sqrt(D)})(this.p,y),this.max=this.d+this.h*Math.SQRT2}var vi;s.aQ=void 0,(vi=s.aQ||(s.aQ={}))[vi.center=1]="center",vi[vi.left=2]="left",vi[vi.right=3]="right",vi[vi.top=4]="top",vi[vi.bottom=5]="bottom",vi[vi["top-left"]=6]="top-left",vi[vi["top-right"]=7]="top-right",vi[vi["bottom-left"]=8]="bottom-left",vi[vi["bottom-right"]=9]="bottom-right";const xo=Number.POSITIVE_INFINITY;function Gi(h,l){return l[1]!==xo?(function(A,y,_){let B=0,O=0;switch(y=Math.abs(y),_=Math.abs(_),A){case"top-right":case"top-left":case"top":O=_-7;break;case"bottom-right":case"bottom-left":case"bottom":O=7-_}switch(A){case"top-right":case"bottom-right":case"right":B=-y;break;case"top-left":case"bottom-left":case"left":B=y}return[B,O]})(h,l[0],l[1]):(function(A,y){let _=0,B=0;y<0&&(y=0);const O=y/Math.SQRT2;switch(A){case"top-right":case"top-left":B=O-7;break;case"bottom-right":case"bottom-left":B=7-O;break;case"bottom":B=7-y;break;case"top":B=y-7}switch(A){case"top-right":case"bottom-right":_=-O;break;case"top-left":case"bottom-left":_=O;break;case"left":_=y;break;case"right":_=-y}return[_,B]})(h,l[0])}function Tr(h,l,A){var y;const _=h.layout,B=(y=_.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(l,{},A);if(B){const D=B.values,F=[];for(let W=0;W<D.length;W+=2){const te=F[W]=D[W],ae=D[W+1].map((he=>he*Ro));te.startsWith("top")?ae[1]-=7:te.startsWith("bottom")&&(ae[1]+=7),F[W+1]=ae}return new bo(F)}const O=_.get("text-variable-anchor");if(O){let D;D=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},A)*Ro,xo]:_.get("text-offset").evaluate(l,{},A).map((W=>W*Ro));const F=[];for(const W of O)F.push(W,Gi(W,D));return new bo(F)}return null}function Jr(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Uo(h,l,A,y,_,B,O,D,F,W,te,ae){let he=B.textMaxSize.evaluate(l,{});he===void 0&&(he=O);const me=h.layers[0].layout,be=me.get("icon-offset").evaluate(l,{},te),we=K_(A.horizontal),Ie=O/24,ze=h.tilePixelRatio*Ie,ct=h.tilePixelRatio*he/24,Ge=h.tilePixelRatio*D,Ze=h.tilePixelRatio*me.get("symbol-spacing"),ht=me.get("text-padding")*h.tilePixelRatio,gt=(function(Xn,ci,Hn,Li=1){const Mo=Xn.get("icon-padding").evaluate(ci,{},Hn),Qr=Mo&&Mo.values;return[Qr[0]*Li,Qr[1]*Li,Qr[2]*Li,Qr[3]*Li]})(me,l,te,h.tilePixelRatio),Gt=me.get("text-max-angle")/180*Math.PI,an=me.get("text-rotation-alignment")!=="viewport"&&me.get("symbol-placement")!=="point",rn=me.get("icon-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point",mn=me.get("symbol-placement"),zn=Ze/2,vn=me.get("icon-text-fit");let sn;y&&vn!=="none"&&(h.allowVerticalPlacement&&A.vertical&&(sn=u1(y,A.vertical,vn,me.get("icon-text-fit-padding"),be,Ie)),we&&(y=u1(y,we,vn,me.get("icon-text-fit-padding"),be,Ie)));const $t=te?ae.line.getGranularityForZoomLevel(te.z):1,ri=(Xn,ci)=>{ci.x<0||ci.x>=mt||ci.y<0||ci.y>=mt||(function(Hn,Li,Mo,Qr,ga,Gc,Wl,ya,ia,Zo,Ya,al,$s,Bh,Wc,Oh,cm,Ku,Pa,Ql,Va,Fu,_1,yp,C3){const $y=Hn.addToLineVertexArray(Li,Mo);let jC,F_,z_,j_,DF=0,RF=0,PF=0,UF=0,TO=-1,kO=-1;const x1={};let LF=is("");if(Hn.allowVerticalPlacement&&Qr.vertical){const pA=ya.layout.get("text-rotate").evaluate(Va,{},yp)+90;z_=new Go(ia,Li,Zo,Ya,al,Qr.vertical,$s,Bh,Wc,pA),Wl&&(j_=new Go(ia,Li,Zo,Ya,al,Wl,cm,Ku,Wc,pA))}if(ga){const pA=ya.layout.get("icon-rotate").evaluate(Va,{}),hf=ya.layout.get("icon-text-fit")!=="none",NC=yn(ga,pA,_1,hf),Cp=Wl?yn(Wl,pA,_1,hf):void 0;F_=new Go(ia,Li,Zo,Ya,al,ga,cm,Ku,!1,pA),DF=4*NC.length;const GC=Hn.iconSizeData;let $0=null;GC.kind==="source"?($0=[wh*ya.layout.get("icon-size").evaluate(Va,{})],$0[0]>uc&&wt(`${Hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):GC.kind==="composite"&&($0=[wh*Fu.compositeIconSizes[0].evaluate(Va,{},yp),wh*Fu.compositeIconSizes[1].evaluate(Va,{},yp)],($0[0]>uc||$0[1]>uc)&&wt(`${Hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Hn.addSymbols(Hn.icon,NC,$0,Ql,Pa,Va,s.aA.none,Li,$y.lineStartIndex,$y.lineLength,-1,yp),TO=Hn.icon.placedSymbolArray.length-1,Cp&&(RF=4*Cp.length,Hn.addSymbols(Hn.icon,Cp,$0,Ql,Pa,Va,s.aA.vertical,Li,$y.lineStartIndex,$y.lineLength,-1,yp),kO=Hn.icon.placedSymbolArray.length-1)}const KF=Object.keys(Qr.horizontal);for(const pA of KF){const hf=Qr.horizontal[pA];if(!jC){LF=is(hf.text);const Cp=ya.layout.get("text-rotate").evaluate(Va,{},yp);jC=new Go(ia,Li,Zo,Ya,al,hf,$s,Bh,Wc,Cp)}const NC=hf.positionedLines.length===1;if(PF+=Af(Hn,Li,hf,Gc,ya,Wc,Va,Oh,$y,Qr.vertical?s.aA.horizontal:s.aA.horizontalOnly,NC?KF:[pA],x1,TO,Fu,yp),NC)break}Qr.vertical&&(UF+=Af(Hn,Li,Qr.vertical,Gc,ya,Wc,Va,Oh,$y,s.aA.vertical,["vertical"],x1,kO,Fu,yp));const Dae=jC?jC.boxStartIndex:Hn.collisionBoxArray.length,Rae=jC?jC.boxEndIndex:Hn.collisionBoxArray.length,Pae=z_?z_.boxStartIndex:Hn.collisionBoxArray.length,Uae=z_?z_.boxEndIndex:Hn.collisionBoxArray.length,Lae=F_?F_.boxStartIndex:Hn.collisionBoxArray.length,Kae=F_?F_.boxEndIndex:Hn.collisionBoxArray.length,Fae=j_?j_.boxStartIndex:Hn.collisionBoxArray.length,zae=j_?j_.boxEndIndex:Hn.collisionBoxArray.length;let vp=-1;const JM=(pA,hf)=>pA&&pA.circleDiameter?Math.max(pA.circleDiameter,hf):hf;vp=JM(jC,vp),vp=JM(z_,vp),vp=JM(F_,vp),vp=JM(j_,vp);const FF=vp>-1?1:0;FF&&(vp*=C3/Ro),Hn.glyphOffsetArray.length>=Nl.MAX_GLYPHS&&wt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Va.sortKey!==void 0&&Hn.addToSortKeyRanges(Hn.symbolInstances.length,Va.sortKey);const jae=Tr(ya,Va,yp),[Nae,Gae]=(function(pA,hf){const NC=pA.length,Cp=hf?.values;if(Cp?.length>0)for(let GC=0;GC<Cp.length;GC+=2){const $0=Cp[GC+1];pA.emplaceBack(s.aQ[Cp[GC]],$0[0],$0[1])}return[NC,pA.length]})(Hn.textAnchorOffsets,jae);Hn.symbolInstances.emplaceBack(Li.x,Li.y,x1.right>=0?x1.right:-1,x1.center>=0?x1.center:-1,x1.left>=0?x1.left:-1,x1.vertical||-1,TO,kO,LF,Dae,Rae,Pae,Uae,Lae,Kae,Fae,zae,Zo,PF,UF,DF,RF,FF,0,$s,vp,Nae,Gae)})(h,ci,Xn,A,y,_,sn,h.layers[0],h.collisionBoxArray,l.index,l.sourceLayerIndex,h.index,ze,[ht,ht,ht,ht],an,F,Ge,gt,rn,be,l,B,W,te,O)};if(mn==="line")for(const Xn of zC(l.geometry,0,0,mt,mt)){const ci=uA(Xn,$t),Hn=Zt(ci,Ze,Gt,A.vertical||we,y,24,ct,h.overscaling,mt);for(const Li of Hn)we&&IO(h,we.text,zn,Li)||ri(ci,Li)}else if(mn==="line-center"){for(const Xn of l.geometry)if(Xn.length>1){const ci=uA(Xn,$t),Hn=xt(ci,Gt,A.vertical||we,y,24,ct);Hn&&ri(ci,Hn)}}else if(l.type==="Polygon")for(const Xn of Uf(l.geometry,0)){const ci=kt(Xn,16);ri(uA(Xn[0],$t,!0),new T(ci.x,ci.y,0))}else if(l.type==="LineString")for(const Xn of l.geometry){const ci=uA(Xn,$t);ri(ci,new T(ci[0].x,ci[0].y,0))}else if(l.type==="Point")for(const Xn of l.geometry)for(const ci of Xn)ri([ci],new T(ci.x,ci.y,0))}function Af(h,l,A,y,_,B,O,D,F,W,te,ae,he,me,be){const we=(function(ct,Ge,Ze,ht,gt,Gt,an,rn){const mn=ht.layout.get("text-rotate").evaluate(Gt,{})*Math.PI/180,zn=[];for(const vn of Ge.positionedLines)for(const sn of vn.positionedGlyphs){if(!sn.rect)continue;const $t=sn.rect||{};let ri=4,Xn=!0,ci=1,Hn=0;const Li=(gt||rn)&&sn.vertical,Mo=sn.metrics.advance*sn.scale/2;if(rn&&Ge.verticalizable&&(Hn=vn.lineOffset/2-(sn.imageName?-(Ro-sn.metrics.width*sn.scale)/2:(sn.scale-1)*Ro)),sn.imageName){const Ku=an[sn.imageName];Xn=Ku.sdf,ci=Ku.pixelRatio,ri=1/ci}const Qr=gt?[sn.x+Mo,sn.y]:[0,0];let ga=gt?[0,0]:[sn.x+Mo+Ze[0],sn.y+Ze[1]-Hn],Gc=[0,0];Li&&(Gc=ga,ga=[0,0]);const Wl=sn.metrics.isDoubleResolution?2:1,ya=(sn.metrics.left-ri)*sn.scale-Mo+ga[0],ia=(-sn.metrics.top-ri)*sn.scale+ga[1],Zo=ya+$t.w/Wl*sn.scale/ci,Ya=ia+$t.h/Wl*sn.scale/ci,al=new c(ya,ia),$s=new c(Zo,ia),Bh=new c(ya,Ya),Wc=new c(Zo,Ya);if(Li){const Ku=new c(-Mo,Mo- -17),Pa=-Math.PI/2,Ql=12-Mo,Va=new c(22-Ql,-(sn.imageName?Ql:0)),Fu=new c(...Gc);al._rotateAround(Pa,Ku)._add(Va)._add(Fu),$s._rotateAround(Pa,Ku)._add(Va)._add(Fu),Bh._rotateAround(Pa,Ku)._add(Va)._add(Fu),Wc._rotateAround(Pa,Ku)._add(Va)._add(Fu)}if(mn){const Ku=Math.sin(mn),Pa=Math.cos(mn),Ql=[Pa,-Ku,Ku,Pa];al._matMult(Ql),$s._matMult(Ql),Bh._matMult(Ql),Wc._matMult(Ql)}const Oh=new c(0,0),cm=new c(0,0);zn.push({tl:al,tr:$s,bl:Bh,br:Wc,tex:$t,writingMode:Ge.writingMode,glyphOffset:Qr,sectionIndex:sn.sectionIndex,isSDF:Xn,pixelOffsetTL:Oh,pixelOffsetBR:cm,minFontScaleX:0,minFontScaleY:0})}return zn})(0,A,D,_,B,O,y,h.allowVerticalPlacement),Ie=h.textSizeData;let ze=null;Ie.kind==="source"?(ze=[wh*_.layout.get("text-size").evaluate(O,{})],ze[0]>uc&&wt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ie.kind==="composite"&&(ze=[wh*me.compositeTextSizes[0].evaluate(O,{},be),wh*me.compositeTextSizes[1].evaluate(O,{},be)],(ze[0]>uc||ze[1]>uc)&&wt(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,we,ze,D,B,O,W,l,F.lineStartIndex,F.lineLength,he,be);for(const ct of te)ae[ct]=h.text.placedSymbolArray.length-1;return 4*we.length}function K_(h){for(const l in h)return h[l];return null}function IO(h,l,A,y){const _=h.compareText;if(l in _){const B=_[l];for(let O=B.length-1;O>=0;O--)if(y.dist(B[O])<A)return!0}else _[l]=[];return _[l].push(y),!1}const ZM=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class y3{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,y]=new Uint8Array(l,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=y>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const B=ZM[15&y];if(!B)throw new Error("Unrecognized array type.");const[O]=new Uint16Array(l,2,1),[D]=new Uint32Array(l,4,1);return new y3(D,O,B,l)}constructor(l,A=64,y=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=y,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const B=ZM.indexOf(this.ArrayType),O=2*l*this.ArrayType.BYTES_PER_ELEMENT,D=l*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-D%8)%8;if(B<0)throw new Error(`Unexpected typed array class: ${y}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+F,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+O+D+F),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+F,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+B]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=l)}add(l,A){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=l,this.coords[this._pos++]=A,y}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return v3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,A,y,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:B,coords:O,nodeSize:D}=this,F=[0,B.length-1,0],W=[];for(;F.length;){const te=F.pop()||0,ae=F.pop()||0,he=F.pop()||0;if(ae-he<=D){for(let Ie=he;Ie<=ae;Ie++){const ze=O[2*Ie],ct=O[2*Ie+1];ze>=l&&ze<=y&&ct>=A&&ct<=_&&W.push(B[Ie])}continue}const me=he+ae>>1,be=O[2*me],we=O[2*me+1];be>=l&&be<=y&&we>=A&&we<=_&&W.push(B[me]),(te===0?l<=be:A<=we)&&(F.push(he),F.push(me-1),F.push(1-te)),(te===0?y>=be:_>=we)&&(F.push(me+1),F.push(ae),F.push(1-te))}return W}within(l,A,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:B,nodeSize:O}=this,D=[0,_.length-1,0],F=[],W=y*y;for(;D.length;){const te=D.pop()||0,ae=D.pop()||0,he=D.pop()||0;if(ae-he<=O){for(let Ie=he;Ie<=ae;Ie++)Y(B[2*Ie],B[2*Ie+1],l,A)<=W&&F.push(_[Ie]);continue}const me=he+ae>>1,be=B[2*me],we=B[2*me+1];Y(be,we,l,A)<=W&&F.push(_[me]),(te===0?l-y<=be:A-y<=we)&&(D.push(he),D.push(me-1),D.push(1-te)),(te===0?l+y>=be:A+y>=we)&&(D.push(me+1),D.push(ae),D.push(1-te))}return F}}function v3(h,l,A,y,_,B){if(_-y<=A)return;const O=y+_>>1;XM(h,l,O,y,_,B),v3(h,l,A,y,O-1,1-B),v3(h,l,A,O+1,_,1-B)}function XM(h,l,A,y,_,B){for(;_>y;){if(_-y>600){const W=_-y+1,te=A-y+1,ae=Math.log(W),he=.5*Math.exp(2*ae/3),me=.5*Math.sqrt(ae*he*(W-he)/W)*(te-W/2<0?-1:1);XM(h,l,A,Math.max(y,Math.floor(A-te*he/W+me)),Math.min(_,Math.floor(A+(W-te)*he/W+me)),B)}const O=l[2*A+B];let D=y,F=_;for(w(h,l,y,A),l[2*_+B]>O&&w(h,l,y,_);D<F;){for(w(h,l,D,F),D++,F--;l[2*D+B]<O;)D++;for(;l[2*F+B]>O;)F--}l[2*y+B]===O?w(h,l,y,F):(F++,w(h,l,F,_)),F<=A&&(y=F+1),A<=F&&(_=F-1)}}function w(h,l,A,y){R(h,A,y),R(l,2*A,2*y),R(l,2*A+1,2*y+1)}function R(h,l,A){const y=h[l];h[l]=h[A],h[A]=y}function Y(h,l,A,y){const _=h-A,B=l-y;return _*_+B*B}var de;s.cI=void 0,(de=s.cI||(s.cI={})).create="create",de.load="load",de.fullLoad="fullLoad";let Re=null,et=[];const yt=1e3/60,It="loadTime",Kt="fullLoadTime",Sn={mark(h){performance.mark(h)},frame(h){const l=h;Re!=null&&et.push(l-Re),Re=l},clearMetrics(){Re=null,et=[],performance.clearMeasures(It),performance.clearMeasures(Kt);for(const h in s.cI)performance.clearMarks(s.cI[h])},getPerformanceMetrics(){performance.measure(It,s.cI.create,s.cI.load),performance.measure(Kt,s.cI.create,s.cI.fullLoad);const h=performance.getEntriesByName(It)[0].duration,l=performance.getEntriesByName(Kt)[0].duration,A=et.length,y=1/(et.reduce(((B,O)=>B+O),0)/A/1e3),_=et.filter((B=>B>yt)).reduce(((B,O)=>B+(O-yt)/yt),0);return{loadTime:h,fullLoadTime:l,fps:y,percentDroppedFrames:_/(A+_)*100,totalFrames:A}}};s.$=z,s.A=X,s.B=Vm,s.C=Ic,s.D=mi,s.E=_n,s.F=function([h,l,A]){return l+=90,l*=Math.PI/180,A*=Math.PI/180,{x:h*Math.cos(l)*Math.sin(A),y:h*Math.sin(l)*Math.sin(A),z:h*Math.cos(A)}},s.G=_o,s.H=Gr,s.I=ap,s.J=Ym,s.K=function(h){if(nn==null){const l=h.navigator?h.navigator.userAgent:null;nn=!!h.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return nn},s.L=class{constructor(h,l){this.target=h,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new b_((()=>this.process())),this.subscription=In(this.target,"message",(A=>this.receive(A)),!1),this.globalScope=Pt(self)?h:window}registerMessageHandler(h,l){this.messageHandlers[h]=l}unregisterMessageHandler(h){delete this.messageHandlers[h]}sendAsync(h,l){return new Promise(((A,y)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),B=l?In(l.signal,"abort",(()=>{B?.unsubscribe(),delete this.resolveRejects[_];const F={id:_,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)}),oo):null;this.resolveRejects[_]={resolve:F=>{B?.unsubscribe(),A(F)},reject:F=>{B?.unsubscribe(),y(F)}};const O=[],D=Object.assign(Object.assign({},h),{id:_,sourceMapId:this.mapId,origin:location.origin,data:td(h.data,O)});this.target.postMessage(D,{transfer:O})}))}receive(h){const l=h.data,A=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[A];const y=this.abortControllers[A];return delete this.abortControllers[A],void(y&&y.abort())}if(Pt(self)||l.mustQueue)return this.tasks[A]=l,this.taskQueue.push(A),void this.invoker.trigger();this.processTask(A,l)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),l=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(h,l)}processTask(h,l){return a(this,void 0,void 0,(function*(){if(l.type==="<response>"){const _=this.resolveRejects[h];return delete this.resolveRejects[h],_?void(l.error?_.reject(nd(l.error)):_.resolve(nd(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const A=nd(l.data),y=new AbortController;this.abortControllers[h]=y;try{const _=yield this.messageHandlers[l.type](l.sourceMapId,A,y);this.completeTask(h,null,_)}catch(_){this.completeTask(h,_)}}))}completeTask(h,l,A){const y=[];delete this.abortControllers[h];const _={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?td(l):null,data:td(A,y)};this.target.postMessage(_,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.M=We,s.N=function(){var h=new X(16);return X!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},s.O=function(h,l,A){var y,_,B,O,D,F,W,te,ae,he,me,be,we=A[0],Ie=A[1],ze=A[2];return l===h?(h[12]=l[0]*we+l[4]*Ie+l[8]*ze+l[12],h[13]=l[1]*we+l[5]*Ie+l[9]*ze+l[13],h[14]=l[2]*we+l[6]*Ie+l[10]*ze+l[14],h[15]=l[3]*we+l[7]*Ie+l[11]*ze+l[15]):(_=l[1],B=l[2],O=l[3],D=l[4],F=l[5],W=l[6],te=l[7],ae=l[8],he=l[9],me=l[10],be=l[11],h[0]=y=l[0],h[1]=_,h[2]=B,h[3]=O,h[4]=D,h[5]=F,h[6]=W,h[7]=te,h[8]=ae,h[9]=he,h[10]=me,h[11]=be,h[12]=y*we+D*Ie+ae*ze+l[12],h[13]=_*we+F*Ie+he*ze+l[13],h[14]=B*we+W*Ie+me*ze+l[14],h[15]=O*we+te*Ie+be*ze+l[15]),h},s.P=c,s.Q=function(h,l,A){var y=A[0],_=A[1],B=A[2];return h[0]=l[0]*y,h[1]=l[1]*y,h[2]=l[2]*y,h[3]=l[3]*y,h[4]=l[4]*_,h[5]=l[5]*_,h[6]=l[6]*_,h[7]=l[7]*_,h[8]=l[8]*B,h[9]=l[9]*B,h[10]=l[10]*B,h[11]=l[11]*B,h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},s.R=ta,s.S=function(h,l,A){var y=l[0],_=l[1],B=l[2],O=l[3],D=l[4],F=l[5],W=l[6],te=l[7],ae=l[8],he=l[9],me=l[10],be=l[11],we=l[12],Ie=l[13],ze=l[14],ct=l[15],Ge=A[0],Ze=A[1],ht=A[2],gt=A[3];return h[0]=Ge*y+Ze*D+ht*ae+gt*we,h[1]=Ge*_+Ze*F+ht*he+gt*Ie,h[2]=Ge*B+Ze*W+ht*me+gt*ze,h[3]=Ge*O+Ze*te+ht*be+gt*ct,h[4]=(Ge=A[4])*y+(Ze=A[5])*D+(ht=A[6])*ae+(gt=A[7])*we,h[5]=Ge*_+Ze*F+ht*he+gt*Ie,h[6]=Ge*B+Ze*W+ht*me+gt*ze,h[7]=Ge*O+Ze*te+ht*be+gt*ct,h[8]=(Ge=A[8])*y+(Ze=A[9])*D+(ht=A[10])*ae+(gt=A[11])*we,h[9]=Ge*_+Ze*F+ht*he+gt*Ie,h[10]=Ge*B+Ze*W+ht*me+gt*ze,h[11]=Ge*O+Ze*te+ht*be+gt*ct,h[12]=(Ge=A[12])*y+(Ze=A[13])*D+(ht=A[14])*ae+(gt=A[15])*we,h[13]=Ge*_+Ze*F+ht*he+gt*Ie,h[14]=Ge*B+Ze*W+ht*me+gt*ze,h[15]=Ge*O+Ze*te+ht*be+gt*ct,h},s.T=os,s.U=function(h,l){const A={};for(let y=0;y<l.length;y++){const _=l[y];_ in h&&(A[_]=h[_])}return A},s.V=Eh,s.W=Rt,s.X=Nc,s.Y=Ty,s.Z=Ae,s._=a,s.a=Q,s.a$=pa,s.a0=V,s.a1=Mi,s.a2=Ac,s.a3=f1,s.a4=_s,s.a5=mt,s.a6=function(h,l,A){if(!h)return l||{};if(!l)return h||{};const y=F0(h),_=F0(l);(function(O,D){D.removeAll&&(O.add.clear(),O.update.clear(),O.remove.clear(),D.remove.clear());for(const F of D.remove)O.add.delete(F),O.update.delete(F);for(const[F,W]of D.update){const te=O.update.get(F);te&&(D.update.set(F,MC(te,W)),O.update.delete(F))}})(y,_);const B={};if((y.removeAll||_.removeAll)&&(B.removeAll=!0),B.remove=new Set([...y.remove,..._.remove]),B.add=new Map([...y.add,..._.add]),B.update=new Map([...y.update,..._.update]),B.remove.size&&B.add.size)for(const O of B.add.keys())B.remove.delete(O);return(function(O){const D={};return O.removeAll&&(D.removeAll=O.removeAll),O.remove&&(D.remove=Array.from(O.remove)),O.add&&(D.add=Array.from(O.add.values())),O.update&&(D.update=Array.from(O.update.values())),D})(B)},s.a7=function(h,l){if(h==null||h.type==null)return!0;if(h.type==="Feature")return m1(h,l)!=null;if(h.type==="FeatureCollection"){const A=new Set;for(const y of h.features){const _=m1(y,l);if(_==null||A.has(_))return!1;A.add(_)}return!0}return!1},s.a8=function(h,l){const A=new Map;if(!(h==null||h.type==null))if(h.type==="Feature")A.set(m1(h,l),h);else for(const y of h.features)A.set(m1(y,l),y);return A},s.a9=function(h,l,A){var y,_;if(l.removeAll)h.clear();else if(l.remove)for(const B of l.remove)h.delete(B);if(l.add)for(const B of l.add){const O=m1(B,A);O!=null&&h.set(O,B)}if(l.update)for(const B of l.update){let O=h.get(B.id);if(!O)continue;const D=!!B.newGeometry,F=B.removeAllProperties||((y=B.removeProperties)===null||y===void 0?void 0:y.length)>0||((_=B.addOrUpdateProperties)===null||_===void 0?void 0:_.length)>0;if((D||F)&&(O=Object.assign({},O),h.set(B.id,O),D&&(O.geometry=B.newGeometry),F)){if(O.properties=B.removeAllProperties?{}:Object.assign({},O.properties||{}),B.removeProperties)for(const W of B.removeProperties)delete O.properties[W];if(B.addOrUpdateProperties)for(const{key:W,value:te}of B.addOrUpdateProperties)O.properties[W]=te}}},s.aB=function(h,{uSize:l,uSizeT:A},{lowerSize:y,upperSize:_}){return h.kind==="source"?y/wh:h.kind==="composite"?_o.number(y/wh,_/wh,A):l},s.aC=function(h,l){var A=l[0],y=l[1],_=l[2],B=l[3],O=l[4],D=l[5],F=l[6],W=l[7],te=l[8],ae=l[9],he=l[10],me=l[11],be=l[12],we=l[13],Ie=l[14],ze=l[15],ct=A*D-y*O,Ge=A*F-_*O,Ze=A*W-B*O,ht=y*F-_*D,gt=y*W-B*D,Gt=_*W-B*F,an=te*we-ae*be,rn=te*Ie-he*be,mn=te*ze-me*be,zn=ae*Ie-he*we,vn=ae*ze-me*we,sn=he*ze-me*Ie,$t=ct*sn-Ge*vn+Ze*zn+ht*mn-gt*rn+Gt*an;return $t?(h[0]=(D*sn-F*vn+W*zn)*($t=1/$t),h[1]=(_*vn-y*sn-B*zn)*$t,h[2]=(we*Gt-Ie*gt+ze*ht)*$t,h[3]=(he*gt-ae*Gt-me*ht)*$t,h[4]=(F*mn-O*sn-W*rn)*$t,h[5]=(A*sn-_*mn+B*rn)*$t,h[6]=(Ie*Ze-be*Gt-ze*Ge)*$t,h[7]=(te*Gt-he*Ze+me*Ge)*$t,h[8]=(O*vn-D*mn+W*an)*$t,h[9]=(y*mn-A*vn-B*an)*$t,h[10]=(be*gt-we*Ze+ze*ct)*$t,h[11]=(ae*Ze-te*gt-me*ct)*$t,h[12]=(D*rn-O*zn-F*an)*$t,h[13]=(A*zn-y*rn+_*an)*$t,h[14]=(we*Ge-be*ht-Ie*ct)*$t,h[15]=(te*ht-ae*Ge+he*ct)*$t,h):null},s.aD=Ve,s.aE=function(h){var l=h[0],A=h[1];return Math.sqrt(l*l+A*A)},s.aF=function(h){return h[0]=0,h[1]=0,h},s.aG=function(h,l,A){return h[0]=l[0]*A,h[1]=l[1]*A,h},s.aH=By,s.aI=Oe,s.aJ=function(h,l,A,y){const _=l.y-h.y,B=l.x-h.x,O=y.y-A.y,D=y.x-A.x,F=O*B-D*_;if(F===0)return null;const W=(D*(h.y-A.y)-O*(h.x-A.x))/F;return new c(h.x+W*B,h.y+W*_)},s.aK=zC,s.aL=b0,s.aM=function(h){let l=1/0,A=1/0,y=-1/0,_=-1/0;for(const B of h)l=Math.min(l,B.x),A=Math.min(A,B.y),y=Math.max(y,B.x),_=Math.max(_,B.y);return[l,A,y,_]},s.aN=Ro,s.aO=Pe,s.aP=function(h,l,A,y,_=!1){if(!A[0]&&!A[1])return[0,0];const B=_?y==="map"?-h.bearingInRadians:0:y==="viewport"?h.bearingInRadians:0;if(B){const O=Math.sin(B),D=Math.cos(B);A=[A[0]*D-A[1]*O,A[0]*O+A[1]*D]}return[_?A[0]:Pe(l,A[0],h.zoom),_?A[1]:Pe(l,A[1],h.zoom)]},s.aR=up,s.aS=Jr,s.aT=l1,s.aU=y3,s.aV=Ri,s.aW=Fc,s.aX=ge,s.aY=fn,s.aZ=zt,s.a_=Tn,s.aa=gp,s.ab=K0,s.ac=mA,s.ad=25,s.ae=ky,s.af=h=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((A=>{l.onloadstart=()=>{A(l)};for(const y of h){const _=window.document.createElement("source");at(y)||(l.crossOrigin="Anonymous"),_.src=y,l.appendChild(_)}}))},s.ag=cn,s.ah=function(){return ke++},s.ai=u,s.aj=Nl,s.ak=Ul,s.al=bh,s.am=Dy,s.an=function(h){const l={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((A,y,_,B)=>{const O=_||B;return l[y]=!O||O.toLowerCase(),""})),l["max-age"]){const A=parseInt(l["max-age"],10);isNaN(A)?delete l["max-age"]:l["max-age"]=A}return l},s.ao=Et,s.ap=85.051129,s.aq=oi,s.ar=function(h){return Math.pow(2,h)},s.as=ee,s.at=L0,s.au=function(h){return Math.log(h)/Math.LN2},s.av=function(h){var l=h[0],A=h[1];return l*l+A*A},s.aw=function(h){if(!h.length)return new Set;const l=Math.max(...h.map((F=>F.canonical.z)));let A=1/0,y=-1/0,_=1/0,B=-1/0;const O=[];for(const F of h){const{x:W,y:te,z:ae}=F.canonical,he=Math.pow(2,l-ae),me=W*he,be=te*he;O.push({id:F,x:me,y:be}),me<A&&(A=me),me>y&&(y=me),be<_&&(_=be),be>B&&(B=be)}const D=new Set;for(const F of O)F.x!==A&&F.x!==y&&F.y!==_&&F.y!==B||D.add(F.id);return D},s.ax=function(h,l){const A=Math.abs(2*h.wrap)-+(h.wrap<0),y=Math.abs(2*l.wrap)-+(l.wrap<0);return h.overscaledZ-l.overscaledZ||y-A||l.canonical.y-h.canonical.y||l.canonical.x-h.canonical.x},s.ay=class{constructor(h,l){this.max=h,this.onRemove=l,this.reset()}reset(){for(const h in this.data)for(const l of this.data[h])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(h,l,A){const y=h.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const _={value:l,timeout:void 0};if(A!==void 0&&(_.timeout=setTimeout((()=>{this.remove(h,_)}),A)),this.data[y].push(_),this.order.push(y),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(h){return h.wrapped().key in this.data}getAndRemove(h){return this.has(h)?this._getAndRemoveByKey(h.wrapped().key):null}_getAndRemoveByKey(h){const l=this.data[h].shift();return l.timeout&&clearTimeout(l.timeout),this.data[h].length===0&&delete this.data[h],this.order.splice(this.order.indexOf(h),1),l.value}getByKey(h){const l=this.data[h];return l?l[0].value:null}get(h){return this.has(h)?this.data[h.wrapped().key][0].value:null}remove(h,l){if(!this.has(h))return this;const A=h.wrapped().key,y=l===void 0?0:this.data[A].indexOf(l),_=this.data[A][y];return this.data[A].splice(y,1),_.timeout&&clearTimeout(_.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(_.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(h){for(this.max=h;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(h){const l=[];for(const A in this.data)for(const y of this.data[A])h(y.value)||l.push(y);for(const A of l)this.remove(A.value.tileID,A)}},s.az=function(h,l){let A=0,y=0;if(h.kind==="constant")y=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:_,minZoom:B,maxZoom:O}=h,D=_?Et(nu.interpolationFactor(_,l,B,O),0,1):0;h.kind==="camera"?y=_o.number(h.minSize,h.maxSize,D):A=D}return{uSizeT:A,uSize:y}},s.b=Kn,s.b$=class extends gl{constructor(h,l){super(h,l),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},s.b0=ve,s.b1=ue,s.b2=function(h){var l=new X(3);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l},s.b3=function(h,l,A){return h[0]=l[0]-A[0],h[1]=l[1]-A[1],h[2]=l[2]-A[2],h},s.b4=function(h,l){var A=l[0],y=l[1],_=l[2],B=A*A+y*y+_*_;return B>0&&(B=1/Math.sqrt(B)),h[0]=l[0]*B,h[1]=l[1]*B,h[2]=l[2]*B,h},s.b5=pe,s.b6=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]},s.b7=function(h,l,A){return h[0]=l[0]*A[0],h[1]=l[1]*A[1],h[2]=l[2]*A[2],h[3]=l[3]*A[3],h},s.b8=q,s.b9=function(h,l,A){const y=l[0]*A[0]+l[1]*A[1]+l[2]*A[2];return y===0?null:(-(h[0]*A[0]+h[1]*A[1]+h[2]*A[2])-A[3])/y},s.bA=function(){return new Float64Array(3)},s.bB=function(h,l,A,y){return h[0]=l[0]+A[0]*y,h[1]=l[1]+A[1]*y,h[2]=l[2]+A[2]*y,h},s.bC=Ee,s.bD=function(h,l,A){var y=A[0],_=A[1],B=A[2],O=A[3],D=l[0],F=l[1],W=l[2],te=_*W-B*F,ae=B*D-y*W,he=y*F-_*D;return h[0]=D+O*(te+=te)+_*(he+=he)-B*(ae+=ae),h[1]=F+O*ae+B*te-y*he,h[2]=W+O*he+y*ae-_*te,h},s.bE=function(h,l,A){const y=(function(F){var W=F[3],te=F[4],ae=F[5],he=F[6],me=F[7],be=F[8];return F[0]*(be*te-ae*me)+F[1]*(-be*W+ae*he)+F[2]*(me*W-te*he)})([h[0],h[1],h[2],l[0],l[1],l[2],A[0],A[1],A[2]]);if(y===0)return null;const _=pe([],[l[0],l[1],l[2]],[A[0],A[1],A[2]]),B=pe([],[A[0],A[1],A[2]],[h[0],h[1],h[2]]),O=pe([],[h[0],h[1],h[2]],[l[0],l[1],l[2]]),D=ve([],_,-h[3]);return ue(D,D,ve([],B,-l[3])),ue(D,D,ve([],O,-A[3])),ve(D,D,1/y),D},s.bF=h1,s.bG=function(){return new Float64Array(4)},s.bH=function(h,l,A,y){var _=[],B=[];return _[0]=l[0]-A[0],_[1]=l[1]-A[1],_[2]=l[2]-A[2],B[0]=_[0]*Math.cos(y)-_[1]*Math.sin(y),B[1]=_[0]*Math.sin(y)+_[1]*Math.cos(y),B[2]=_[2],h[0]=B[0]+A[0],h[1]=B[1]+A[1],h[2]=B[2]+A[2],h},s.bI=function(h,l,A,y){var _=[],B=[];return _[0]=l[0]-A[0],_[1]=l[1]-A[1],_[2]=l[2]-A[2],B[0]=_[0],B[1]=_[1]*Math.cos(y)-_[2]*Math.sin(y),B[2]=_[1]*Math.sin(y)+_[2]*Math.cos(y),h[0]=B[0]+A[0],h[1]=B[1]+A[1],h[2]=B[2]+A[2],h},s.bJ=function(h,l,A,y){var _=[],B=[];return _[0]=l[0]-A[0],_[1]=l[1]-A[1],_[2]=l[2]-A[2],B[0]=_[2]*Math.sin(y)+_[0]*Math.cos(y),B[1]=_[1],B[2]=_[2]*Math.cos(y)-_[0]*Math.sin(y),h[0]=B[0]+A[0],h[1]=B[1]+A[1],h[2]=B[2]+A[2],h},s.bK=function(h,l,A){var y=Math.sin(A),_=Math.cos(A),B=l[0],O=l[1],D=l[2],F=l[3],W=l[8],te=l[9],ae=l[10],he=l[11];return l!==h&&(h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=B*_-W*y,h[1]=O*_-te*y,h[2]=D*_-ae*y,h[3]=F*_-he*y,h[8]=B*y+W*_,h[9]=O*y+te*_,h[10]=D*y+ae*_,h[11]=F*y+he*_,h},s.bL=function(h,l){const A=De(h,360),y=De(l,360),_=y-A,B=y>A?_-360:_+360;return Math.abs(_)<Math.abs(B)?_:B},s.bM=function(h){return h[0]=0,h[1]=0,h[2]=0,h},s.bN=function(h,l,A,y){const _=Math.sqrt(h*h+l*l),B=Math.sqrt(A*A+y*y);h/=_,l/=_,A/=B,y/=B;const O=Math.acos(h*A+l*y);return-l*A+h*y>0?O:-O},s.bO=function(h,l){const A=De(h,2*Math.PI),y=De(l,2*Math.PI);return Math.min(Math.abs(A-y),Math.abs(A-y+2*Math.PI),Math.abs(A-y-2*Math.PI))},s.bP=function(){const h={},l=Mt.$version;for(const A in Mt.$root){const y=Mt.$root[A];if(y.required){let _=null;_=A==="version"?l:y.type==="array"?[]:{},_!=null&&(h[A]=_)}}return h},s.bQ=bt,s.bR=ml,s.bS=function h(l,A){if(Array.isArray(l)){if(!Array.isArray(A)||l.length!==A.length)return!1;for(let y=0;y<l.length;y++)if(!h(l[y],A[y]))return!1;return!0}if(typeof l=="object"&&l!==null&&A!==null){if(typeof A!="object"||Object.keys(l).length!==Object.keys(A).length)return!1;for(const y in l)if(!h(l[y],A[y]))return!1;return!0}return l===A},s.bT=function(h){h=h.slice();const l=Object.create(null);for(let A=0;A<h.length;A++)l[h[A].id]=h[A];for(let A=0;A<h.length;A++)"ref"in h[A]&&(h[A]=ji(h[A],l[h[A].ref]));return h},s.bU=function(h,l){if(h.type==="custom")return new tm(h,l);switch(h.type){case"background":return new A1(h,l);case"circle":return new _h(h,l);case"color-relief":return new hy(h,l);case"fill":return new e1(h,l);case"fill-extrusion":return new ma(h,l);case"heatmap":return new l_(h,l);case"hillshade":return new tC(h,l);case"line":return new em(h,l);case"raster":return new uu(h,l);case"symbol":return new U0(h,l)}},s.bV=h=>h.type==="raster",s.bW=Ct,s.bX=function(h,l){if(!h)return[{command:"setStyle",args:[l]}];let A=[];try{if(!Qn(h.version,l.version))return[{command:"setStyle",args:[l]}];Qn(h.center,l.center)||A.push({command:"setCenter",args:[l.center]}),Qn(h.state,l.state)||A.push({command:"setGlobalState",args:[l.state]}),Qn(h.centerAltitude,l.centerAltitude)||A.push({command:"setCenterAltitude",args:[l.centerAltitude]}),Qn(h.zoom,l.zoom)||A.push({command:"setZoom",args:[l.zoom]}),Qn(h.bearing,l.bearing)||A.push({command:"setBearing",args:[l.bearing]}),Qn(h.pitch,l.pitch)||A.push({command:"setPitch",args:[l.pitch]}),Qn(h.roll,l.roll)||A.push({command:"setRoll",args:[l.roll]}),Qn(h.sprite,l.sprite)||A.push({command:"setSprite",args:[l.sprite]}),Qn(h.glyphs,l.glyphs)||A.push({command:"setGlyphs",args:[l.glyphs]}),Qn(h.transition,l.transition)||A.push({command:"setTransition",args:[l.transition]}),Qn(h.light,l.light)||A.push({command:"setLight",args:[l.light]}),Qn(h.terrain,l.terrain)||A.push({command:"setTerrain",args:[l.terrain]}),Qn(h.sky,l.sky)||A.push({command:"setSky",args:[l.sky]}),Qn(h.projection,l.projection)||A.push({command:"setProjection",args:[l.projection]});const y={},_=[];(function(O,D,F,W){let te;for(te in D=D||{},O=O||{})Object.prototype.hasOwnProperty.call(O,te)&&(Object.prototype.hasOwnProperty.call(D,te)||qi(te,F,W));for(te in D)Object.prototype.hasOwnProperty.call(D,te)&&(Object.prototype.hasOwnProperty.call(O,te)?Qn(O[te],D[te])||(O[te].type==="geojson"&&D[te].type==="geojson"&&Vi(O,D,te)?Zn(F,{command:"setGeoJSONSourceData",args:[te,D[te].data]}):Ui(te,D,F,W)):Yi(te,D,F))})(h.sources,l.sources,_,y);const B=[];h.layers&&h.layers.forEach((O=>{"source"in O&&y[O.source]?A.push({command:"removeLayer",args:[O.id]}):B.push(O)})),A=A.concat(_),(function(O,D,F){D=D||[];const W=(O=O||[]).map(Ir),te=D.map(Ir),ae=O.reduce(Eo,{}),he=D.reduce(Eo,{}),me=W.slice(),be=Object.create(null);let we,Ie,ze,ct,Ge;for(let Ze=0,ht=0;Ze<W.length;Ze++)we=W[Ze],Object.prototype.hasOwnProperty.call(he,we)?ht++:(Zn(F,{command:"removeLayer",args:[we]}),me.splice(me.indexOf(we,ht),1));for(let Ze=0,ht=0;Ze<te.length;Ze++)we=te[te.length-1-Ze],me[me.length-1-Ze]!==we&&(Object.prototype.hasOwnProperty.call(ae,we)?(Zn(F,{command:"removeLayer",args:[we]}),me.splice(me.lastIndexOf(we,me.length-ht),1)):ht++,ct=me[me.length-Ze],Zn(F,{command:"addLayer",args:[he[we],ct]}),me.splice(me.length-Ze,0,we),be[we]=!0);for(let Ze=0;Ze<te.length;Ze++)if(we=te[Ze],Ie=ae[we],ze=he[we],!be[we]&&!Qn(Ie,ze))if(Qn(Ie.source,ze.source)&&Qn(Ie["source-layer"],ze["source-layer"])&&Qn(Ie.type,ze.type)){for(Ge in Ki(Ie.layout,ze.layout,F,we,null,"setLayoutProperty"),Ki(Ie.paint,ze.paint,F,we,null,"setPaintProperty"),Qn(Ie.filter,ze.filter)||Zn(F,{command:"setFilter",args:[we,ze.filter]}),Qn(Ie.minzoom,ze.minzoom)&&Qn(Ie.maxzoom,ze.maxzoom)||Zn(F,{command:"setLayerZoomRange",args:[we,ze.minzoom,ze.maxzoom]}),Ie)Object.prototype.hasOwnProperty.call(Ie,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Ki(Ie[Ge],ze[Ge],F,we,Ge.slice(6),"setPaintProperty"):Qn(Ie[Ge],ze[Ge])||Zn(F,{command:"setLayerProperty",args:[we,Ge,ze[Ge]]}));for(Ge in ze)Object.prototype.hasOwnProperty.call(ze,Ge)&&!Object.prototype.hasOwnProperty.call(Ie,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Ki(Ie[Ge],ze[Ge],F,we,Ge.slice(6),"setPaintProperty"):Qn(Ie[Ge],ze[Ge])||Zn(F,{command:"setLayerProperty",args:[we,Ge,ze[Ge]]}))}else Zn(F,{command:"removeLayer",args:[we]}),ct=me[me.lastIndexOf(we)+1],Zn(F,{command:"addLayer",args:[ze,ct]})})(B,l.layers,A)}catch(y){console.warn("Unable to compute style diff:",y),A=[{command:"setStyle",args:[l]}]}return A},s.bY=function(h){const l=[],A=h.id;return A===void 0&&l.push({message:`layers.${A}: missing required property "id"`}),h.render===void 0&&l.push({message:`layers.${A}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&l.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),l},s.bZ=Te,s.b_=He,s.ba=Ce,s.bb=function(h,l,A){return h[0]=l[0]*A,h[1]=l[1]*A,h[2]=l[2]*A,h[3]=l[3]*A,h},s.bc=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]+h[3]},s.bd=as,s.be=Ra,s.bf=function(h,l,A,y,_){var B=1/Math.tan(l/2);if(h[0]=B/A,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=B,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,_!=null&&_!==1/0){var O=1/(y-_);h[10]=(_+y)*O,h[14]=2*_*y*O}else h[10]=-1,h[14]=-2*y;return h},s.bg=function(h){var l=new X(16);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],l},s.bh=function(h,l,A){var y=Math.sin(A),_=Math.cos(A),B=l[0],O=l[1],D=l[2],F=l[3],W=l[4],te=l[5],ae=l[6],he=l[7];return l!==h&&(h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=B*_+W*y,h[1]=O*_+te*y,h[2]=D*_+ae*y,h[3]=F*_+he*y,h[4]=W*_-B*y,h[5]=te*_-O*y,h[6]=ae*_-D*y,h[7]=he*_-F*y,h},s.bi=function(h,l,A){var y=Math.sin(A),_=Math.cos(A),B=l[4],O=l[5],D=l[6],F=l[7],W=l[8],te=l[9],ae=l[10],he=l[11];return l!==h&&(h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[4]=B*_+W*y,h[5]=O*_+te*y,h[6]=D*_+ae*y,h[7]=F*_+he*y,h[8]=W*_-B*y,h[9]=te*_-O*y,h[10]=ae*_-D*y,h[11]=he*_-F*y,h},s.bj=function(){const h=new Float32Array(16);return ee(h),h},s.bk=function(){const h=new Float64Array(16);return ee(h),h},s.bl=function(){return new Float64Array(16)},s.bm=function(h,l,A){const y=new Float64Array(4);return Ee(y,h,l-90,A),y},s.bn=function(h,l,A,y){var _,B,O,D,F,W=l[0],te=l[1],ae=l[2],he=l[3],me=A[0],be=A[1],we=A[2],Ie=A[3];return(B=W*me+te*be+ae*we+he*Ie)<0&&(B=-B,me=-me,be=-be,we=-we,Ie=-Ie),1-B>Z?(_=Math.acos(B),O=Math.sin(_),D=Math.sin((1-y)*_)/O,F=Math.sin(y*_)/O):(D=1-y,F=y),h[0]=D*W+F*me,h[1]=D*te+F*be,h[2]=D*ae+F*we,h[3]=D*he+F*Ie,h},s.bo=function(h){const l=new Float64Array(9);(function(B,O){var D=O[0],F=O[1],W=O[2],te=O[3],ae=D+D,he=F+F,me=W+W,be=D*ae,we=F*ae,Ie=F*he,ze=W*ae,ct=W*he,Ge=W*me,Ze=te*ae,ht=te*he,gt=te*me;B[0]=1-Ie-Ge,B[3]=we-gt,B[6]=ze+ht,B[1]=we+gt,B[4]=1-be-Ge,B[7]=ct-Ze,B[2]=ze-ht,B[5]=ct+Ze,B[8]=1-be-Ie})(l,h);const A=Tn(-Math.asin(Et(l[2],-1,1)));let y,_;return Math.hypot(l[5],l[8])<.001?(y=0,_=-Tn(Math.atan2(l[3],l[4]))):(y=Tn(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),_=Tn(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:y,pitch:A+90,bearing:_}},s.bp=function(h,l){return h.roll==l.roll&&h.pitch==l.pitch&&h.bearing==l.bearing},s.bq=nr,s.br=Lc,s.bs=np,s.bt=ss,s.bu=yl,s.bv=Xe,s.bw=Ke,s.bx=Hr,s.by=function(h,l,A,y,_){return Xe(y,_,Et((h-l)/(A-l),0,1))},s.bz=De,s.c=Me,s.c$=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},s.c0=aA,s.c1=class extends gl{constructor(h,l){super(h,l),this.current=g0}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let l=1;l<16;l++)if(h[l]!==this.current[l]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},s.c2=Du,s.c3=class extends gl{constructor(h,l){super(h,l),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},s.c4=class extends gl{constructor(h,l){super(h,l),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},s.c5=re,s.c6=function(h,l){var A=Math.sin(l),y=Math.cos(l);return h[0]=y,h[1]=A,h[2]=0,h[3]=-A,h[4]=y,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},s.c7=function(h,l,A){var y=l[0],_=l[1],B=l[2];return h[0]=y*A[0]+_*A[3]+B*A[6],h[1]=y*A[1]+_*A[4]+B*A[7],h[2]=y*A[2]+_*A[5]+B*A[8],h},s.c8=function(h,l,A,y,_,B,O){var D=1/(l-A),F=1/(y-_),W=1/(B-O);return h[0]=-2*D,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*F,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*W,h[11]=0,h[12]=(l+A)*D,h[13]=(_+y)*F,h[14]=(O+B)*W,h[15]=1,h},s.c9=class extends gl{constructor(h,l){super(h,l),this.current=new Array}set(h){if(h!=this.current){this.current=h;const l=new Float32Array(4*h.length);for(let A=0;A<h.length;A++)l[4*A]=h[A].r,l[4*A+1]=h[A].g,l[4*A+2]=h[A].b,l[4*A+3]=h[A].a;this.gl.uniform4fv(this.location,l)}}},s.cA=function(h,l){return $[l]&&(h instanceof MouseEvent||h instanceof WheelEvent)},s.cB=function(h,l){return je[l]&&"touches"in h},s.cC=function(h){return je[h]||$[h]},s.cD=function(h,l,A){var y=l[0],_=l[1];return h[0]=A[0]*y+A[4]*_+A[12],h[1]=A[1]*y+A[5]*_+A[13],h},s.cE=function(h,l){const{x:A,y}=K0.fromLngLat(l);return!(h<0||h>25||y<0||y>=1||A<0||A>=1)},s.cF=function(h,l){return h[0]=l[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=l[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=l[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},s.cG=class extends od{},s.cH=Sn,s.cJ=it,s.cK=function(h,l){Me.REGISTERED_PROTOCOLS[h]=l},s.cL=function(h){delete Me.REGISTERED_PROTOCOLS[h]},s.cM=function(h,l){const A={};for(let _=0;_<h.length;_++){const B=l&&l[h[_].id]||hh(h[_]);l&&(l[h[_].id]=B);let O=A[B];O||(O=A[B]=[]),O.push(h[_])}const y=[];for(const _ in A)y.push(A[_]);return y},s.cN=jn,s.cO=z0,s.cP=Lu,s.cQ=wy,s.cR=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=mt/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const l=h.bucket.layers[0],A=l.layout,y=l._unevaluatedLayout._values,_={layoutIconSize:y["icon-size"].possiblyEvaluate(new Gr(h.bucket.zoom+1),h.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new Gr(h.bucket.zoom+1),h.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new Gr(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:W,maxZoom:te}=h.bucket.textSizeData;_.compositeTextSizes=[y["text-size"].possiblyEvaluate(new Gr(W),h.canonical),y["text-size"].possiblyEvaluate(new Gr(te),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:W,maxZoom:te}=h.bucket.iconSizeData;_.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new Gr(W),h.canonical),y["icon-size"].possiblyEvaluate(new Gr(te),h.canonical)]}const B=A.get("text-line-height")*Ro,O=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",D=A.get("text-keep-upright"),F=A.get("text-size");for(const W of h.bucket.features){const te=A.get("text-font").evaluate(W,{},h.canonical).join(","),ae=F.evaluate(W,{},h.canonical),he=_.layoutTextSize.evaluate(W,{},h.canonical),me=_.layoutIconSize.evaluate(W,{},h.canonical),be={horizontal:{},vertical:void 0},we=W.text;let Ie,ze=[0,0];if(we){const Ze=we.toString(),ht=A.get("text-letter-spacing").evaluate(W,{},h.canonical)*Ro,gt=nc(Ze)?ht:0,Gt=A.get("text-anchor").evaluate(W,{},h.canonical),an=Tr(l,W,h.canonical);if(!an){const vn=A.get("text-radial-offset").evaluate(W,{},h.canonical);ze=vn?Gi(Gt,[vn*Ro,xo]):A.get("text-offset").evaluate(W,{},h.canonical).map((sn=>sn*Ro))}let rn=O?"center":A.get("text-justify").evaluate(W,{},h.canonical);const mn=A.get("symbol-placement")==="point"?A.get("text-max-width").evaluate(W,{},h.canonical)*Ro:1/0,zn=()=>{h.bucket.allowVerticalPlacement&&Tc(Ze)&&(be.vertical=Po(we,h.glyphMap,h.glyphPositions,h.imagePositions,te,mn,B,Gt,"left",gt,ze,s.aA.vertical,!0,he,ae))};if(!O&&an){const vn=new Set;if(rn==="auto")for(let $t=0;$t<an.values.length;$t+=2)vn.add(Jr(an.values[$t]));else vn.add(rn);let sn=!1;for(const $t of vn)if(!be.horizontal[$t])if(sn)be.horizontal[$t]=be.horizontal[0];else{const ri=Po(we,h.glyphMap,h.glyphPositions,h.imagePositions,te,mn,B,"center",$t,gt,ze,s.aA.horizontal,!1,he,ae);ri&&(be.horizontal[$t]=ri,sn=ri.positionedLines.length===1)}zn()}else{rn==="auto"&&(rn=Jr(Gt));const vn=Po(we,h.glyphMap,h.glyphPositions,h.imagePositions,te,mn,B,Gt,rn,gt,ze,s.aA.horizontal,!1,he,ae);vn&&(be.horizontal[rn]=vn),zn(),Tc(Ze)&&O&&D&&(be.vertical=Po(we,h.glyphMap,h.glyphPositions,h.imagePositions,te,mn,B,Gt,rn,gt,ze,s.aA.vertical,!1,he,ae))}}let ct=!1;if(W.icon&&W.icon.name){const Ze=h.imageMap[W.icon.name];Ze&&(Ie=lp(h.imagePositions[W.icon.name],A.get("icon-offset").evaluate(W,{},h.canonical),A.get("icon-anchor").evaluate(W,{},h.canonical)),ct=!!Ze.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=ct:h.bucket.sdfIcons!==ct&&wt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==h.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Ge=K_(be.horizontal)||be.vertical;h.bucket.iconsInText=!!Ge&&Ge.iconsInText,(Ge||Ie)&&Uo(h.bucket,W,be,Ie,h.imageMap,_,he,me,ze,ct,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},s.cS=cA,s.cT=No,s.cU=op,s.cV=function(h){const l=new s1;return(function(A,y){for(const _ in A.layers)y.writeMessage(3,qy,A.layers[_])})(h,l),l.finish()},s.cW=function(h,l,A,y,_,B){let O=L_(h,l,A,_,0);return O=L_(O,l,y,B,1),O},s.cX=class{constructor(h){this.maxEntries=h,this.map=new Map}get(h){const l=this.map.get(h);return l!==void 0&&(this.map.delete(h),this.map.set(h,l)),l}set(h,l){if(this.map.has(h))this.map.delete(h);else if(this.map.size>=this.maxEntries){const A=this.map.keys().next().value;this.map.delete(A)}this.map.set(h,l)}clear(){this.map.clear()}},s.cY=Do,s.cZ=s1,s.c_=FC,s.ca=class extends gl{constructor(h,l){super(h,l),this.current=new Array}set(h){if(h!=this.current){this.current=h;const l=new Float32Array(h);this.gl.uniform1fv(this.location,l)}}},s.cb=class extends Jm{},s.cc=r1,s.cd=class extends FA{},s.ce=Jv,s.cf=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},s.cg=$g,s.ch=function(h,l,A){var y=l[0],_=l[1],B=l[2],O=A[3]*y+A[7]*_+A[11]*B+A[15];return h[0]=(A[0]*y+A[4]*_+A[8]*B+A[12])/(O=O||1),h[1]=(A[1]*y+A[5]*_+A[9]*B+A[13])/O,h[2]=(A[2]*y+A[6]*_+A[10]*B+A[14])/O,h},s.ci=class extends sc{},s.cj=class extends Wf{},s.ck=function(h,l){return h[0]===l[0]&&h[1]===l[1]&&h[2]===l[2]&&h[3]===l[3]&&h[4]===l[4]&&h[5]===l[5]&&h[6]===l[6]&&h[7]===l[7]&&h[8]===l[8]&&h[9]===l[9]&&h[10]===l[10]&&h[11]===l[11]&&h[12]===l[12]&&h[13]===l[13]&&h[14]===l[14]&&h[15]===l[15]},s.cl=function(h,l){var A=h[0],y=h[1],_=h[2],B=h[3],O=h[4],D=h[5],F=h[6],W=h[7],te=h[8],ae=h[9],he=h[10],me=h[11],be=h[12],we=h[13],Ie=h[14],ze=h[15],ct=l[0],Ge=l[1],Ze=l[2],ht=l[3],gt=l[4],Gt=l[5],an=l[6],rn=l[7],mn=l[8],zn=l[9],vn=l[10],sn=l[11],$t=l[12],ri=l[13],Xn=l[14],ci=l[15];return Math.abs(A-ct)<=Z*Math.max(1,Math.abs(A),Math.abs(ct))&&Math.abs(y-Ge)<=Z*Math.max(1,Math.abs(y),Math.abs(Ge))&&Math.abs(_-Ze)<=Z*Math.max(1,Math.abs(_),Math.abs(Ze))&&Math.abs(B-ht)<=Z*Math.max(1,Math.abs(B),Math.abs(ht))&&Math.abs(O-gt)<=Z*Math.max(1,Math.abs(O),Math.abs(gt))&&Math.abs(D-Gt)<=Z*Math.max(1,Math.abs(D),Math.abs(Gt))&&Math.abs(F-an)<=Z*Math.max(1,Math.abs(F),Math.abs(an))&&Math.abs(W-rn)<=Z*Math.max(1,Math.abs(W),Math.abs(rn))&&Math.abs(te-mn)<=Z*Math.max(1,Math.abs(te),Math.abs(mn))&&Math.abs(ae-zn)<=Z*Math.max(1,Math.abs(ae),Math.abs(zn))&&Math.abs(he-vn)<=Z*Math.max(1,Math.abs(he),Math.abs(vn))&&Math.abs(me-sn)<=Z*Math.max(1,Math.abs(me),Math.abs(sn))&&Math.abs(be-$t)<=Z*Math.max(1,Math.abs(be),Math.abs($t))&&Math.abs(we-ri)<=Z*Math.max(1,Math.abs(we),Math.abs(ri))&&Math.abs(Ie-Xn)<=Z*Math.max(1,Math.abs(Ie),Math.abs(Xn))&&Math.abs(ze-ci)<=Z*Math.max(1,Math.abs(ze),Math.abs(ci))},s.cm=function(h,l){return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},s.cn=h=>h.type==="symbol",s.co=h=>h.type==="circle",s.cp=h=>h.type==="heatmap",s.cq=h=>h.type==="line",s.cr=h=>h.type==="fill",s.cs=h=>h.type==="fill-extrusion",s.ct=h=>h.type==="hillshade",s.cu=h=>h.type==="color-relief",s.cv=h=>h.type==="background",s.cw=h=>h.type==="custom",s.cx=Bt,s.cy=function(h,l,A){const y=ut(l.x-A.x,l.y-A.y),_=ut(h.x-A.x,h.y-A.y),B=Math.atan2(y[0]*_[1]-y[1]*_[0],(function(O,D){return O[0]*D[0]+O[1]*D[1]})(y,_));return Tn(B)},s.cz=ot,s.d=at,s.d0=function(h,l,A,y,_){return a(this,void 0,void 0,(function*(){if(V())try{return yield Mi(h,l,A,y,_)}catch{}return(function(B,O,D,F,W){const te=B.width,ae=B.height;Fn&&Ln||(Fn=new OffscreenCanvas(te,ae),Ln=Fn.getContext("2d",{willReadFrequently:!0})),Fn.width=te,Fn.height=ae,Ln.drawImage(B,0,0,te,ae);const he=Ln.getImageData(O,D,F,W);return Ln.clearRect(0,0,te,ae),he.data})(h,l,A,y,_)}))},s.d1=nC,s.d2=d,s.d3=class{constructor(h,l){this.layers={[gp]:this},this.name=gp,this.version=l?l.version:1,this.extent=l?l.extent:4096,this.length=h.length,this.features=h}feature(h){return new R_(this.features[h],this.extent)}},s.d4=Qm,s.d5=kc,s.e=Ue,s.f=h=>a(void 0,void 0,void 0,(function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(l)}catch(A){throw new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=Ne,s.h=h=>new Promise(((l,A)=>{const y=new Image;y.onload=()=>{l(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame((()=>{y.src=Wn}))},y.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(h)],{type:"image/png"});y.src=h.byteLength?URL.createObjectURL(_):Wn})),s.i=Pt,s.j=(h,l)=>Ye(Ue(h,{type:"json"}),l),s.k=bn,s.l=gn,s.m=Ye,s.n=(h,l)=>Ye(Ue(h,{type:"arrayBuffer"}),l),s.o=function(h){return new s1(h).readFields(yC,[])},s.p=My,s.q=function(h){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(h))},s.r=dd,s.s=In,s.t=Js,s.u=Mt,s.v=Ff,s.w=wt,s.x=gh,s.y=zf,s.z=id})),r("worker",["./shared"],(function(s){class a{constructor($,j){this.keyCache={},$&&this.replace($,j)}replace($,j){this._layerConfigs={},this._layers={},this.update($,[],j)}update($,j,Q){for(const Me of $){this._layerConfigs[Me.id]=Me;const Ne=this._layers[Me.id]=s.bU(Me,Q);Ne._featureFilter=s.ak(Ne.filter,Q),this.keyCache[Me.id]&&delete this.keyCache[Me.id]}for(const Me of j)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const Ae=s.cM(Object.values(this._layerConfigs),this.keyCache);for(const Me of Ae){const Ne=Me.map((C=>this._layers[C.id])),We=Ne[0];if(We.visibility==="none")continue;const it=We.source||"";let bt=this.familiesBySource[it];bt||(bt=this.familiesBySource[it]={});const Ye=We.sourceLayer||s.aa;let at=bt[Ye];at||(at=bt[Ye]=[]),at.push(Ne)}}}class c{constructor($){const j={},Q=[];for(const We in $){const it=$[We],bt=j[We]={};for(const Ye in it){const at=it[+Ye];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const C={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};Q.push(C),bt[Ye]={rect:C,metrics:at.metrics}}}const{w:Ae,h:Me}=s.p(Q),Ne=new s.r({width:Ae||1,height:Me||1});for(const We in $){const it=$[We];for(const bt in it){const Ye=it[+bt];if(!Ye||Ye.bitmap.width===0||Ye.bitmap.height===0)continue;const at=j[We][bt].rect;s.r.copy(Ye.bitmap,Ne,{x:0,y:0},{x:at.x+1,y:at.y+1},Ye.bitmap)}}this.image=Ne,this.positions=j}}s.cN("GlyphAtlas",c);class d{constructor($){this.tileID=new s.a2($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[]}parse($,j,Q,Ae,Me){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=$,this.collisionBoxArray=new s.ai;const Ne=new s.cO(Object.keys($.layers).sort()),We=new s.cP(this.tileID,this.promoteId);We.bucketLayerIDs=[];const it={},bt={featureIndex:We,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Q,subdivisionGranularity:Me},Ye=j.familiesBySource[this.source];for(const Vi in Ye){const Ki=$.layers[Vi];if(!Ki)continue;Ki.version===1&&s.w(`Vector tile source "${this.source}" layer "${Vi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ir=Ne.encode(Vi),Eo=[];for(let cn=0;cn<Ki.length;cn++){const rr=Ki.feature(cn),Yo=We.getId(rr,Vi);Eo.push({feature:rr,id:Yo,index:cn,sourceLayerIndex:Ir})}for(const cn of Ye[Vi]){const rr=cn[0];rr.source!==this.source&&s.w(`layer.source = ${rr.source} does not equal this.source = ${this.source}`),rr.isHidden(this.zoom,!0)||(p(cn,this.zoom,Q),(it[rr.id]=rr.createBucket({index:We.bucketLayerIDs.length,layers:cn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ir,sourceID:this.source})).populate(Eo,bt,this.tileID.canonical),We.bucketLayerIDs.push(cn.map((Yo=>Yo.id))))}}const at=s.bZ(bt.glyphDependencies,(Vi=>Object.keys(Vi).map(Number)));this.inFlightDependencies.forEach((Vi=>Vi?.abort())),this.inFlightDependencies=[];let C=Promise.resolve({});if(Object.keys(at).length){const Vi=new AbortController;this.inFlightDependencies.push(Vi),C=Ae.sendAsync({type:"GG",data:{stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"}},Vi)}const Ut=Object.keys(bt.iconDependencies);let gn=Promise.resolve({});if(Ut.length){const Vi=new AbortController;this.inFlightDependencies.push(Vi),gn=Ae.sendAsync({type:"GI",data:{icons:Ut,source:this.source,tileID:this.tileID,type:"icons"}},Vi)}const bn=Object.keys(bt.patternDependencies);let _n=Promise.resolve({});if(bn.length){const Vi=new AbortController;this.inFlightDependencies.push(Vi),_n=Ae.sendAsync({type:"GI",data:{icons:bn,source:this.source,tileID:this.tileID,type:"patterns"}},Vi)}const Mt=bt.dashDependencies;let xi=Promise.resolve({});if(Object.keys(Mt).length){const Vi=new AbortController;this.inFlightDependencies.push(Vi),xi=Ae.sendAsync({type:"GDA",data:{dashes:Mt}},Vi)}const[ji,Qn,Zn,Yi]=yield Promise.all([C,gn,_n,xi]),qi=new c(ji),Ui=new s.cQ(Qn,Zn);for(const Vi in it){const Ki=it[Vi];Ki instanceof s.aj?(p(Ki.layers,this.zoom,Q),s.cR({bucket:Ki,glyphMap:ji,glyphPositions:qi.positions,imageMap:Qn,imagePositions:Ui.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:bt.subdivisionGranularity})):Ki.hasDependencies&&(Ki instanceof s.cS||Ki instanceof s.cT||Ki instanceof s.cU)&&(p(Ki.layers,this.zoom,Q),Ki.addFeatures(bt,this.tileID.canonical,Ui.patternPositions,Yi))}return this.status="done",{buckets:Object.values(it).filter((Vi=>!Vi.isEmpty())),featureIndex:We,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qi.image,imageAtlas:Ui,dashPositions:Yi,glyphMap:this.returnDependencies?ji:null,iconMap:this.returnDependencies?Qn:null,glyphPositions:this.returnDependencies?qi.positions:null}}))}}function p(je,$,j){const Q=new s.H($);for(const Ae of je)Ae.recalculate(Q,j)}class v{constructor($,j,Q,Ae,Me){this.type=$,this.properties=Q||{},this.extent=Me,this.pointsArray=j,this.id=Ae}loadGeometry(){return this.pointsArray.map(($=>$.map((j=>new s.P(j.x,j.y)))))}}class M{constructor($,j,Q){this.version=2,this._myFeatures=$,this.name=j,this.length=$.length,this.extent=Q}feature($){return this._myFeatures[$]}}class E{constructor(){this.layers={}}addLayer($){this.layers[$.name]=$}}function P(je){let $=s.cV(je);return $.byteOffset===0&&$.byteLength===$.buffer.byteLength||($=new Uint8Array($)),{vectorTile:je,rawData:$.buffer}}function U(je,$,j){const{extent:Q}=je,Ae=Math.pow(2,j.z-$.z),Me=(j.x-$.x*Ae)*Q,Ne=(j.y-$.y*Ae)*Q,We=[];for(let it=0;it<je.length;it++){const bt=je.feature(it);let Ye=bt.loadGeometry();for(const C of Ye)for(const Ut of C)Ut.x=Ut.x*Ae-Me,Ut.y=Ut.y*Ae-Ne;const at=128;Ye=s.cW(Ye,bt.type,-at,-at,Q+at,Q+at),Ye.length!==0&&We.push(new v(bt.type,Ye,bt.properties,bt.id,Q))}return new M(We,je.name,Q)}class z{constructor($,j,Q){this.actor=$,this.layerIndex=j,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new s.cX(1e3)}loadVectorTile($,j){return s._(this,void 0,void 0,(function*(){const Q=yield s.n($.request,j);try{return{vectorTile:$.encoding!=="mlt"?new s.cY(new s.cZ(Q.data)):new s.c_(Q.data),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(Ae){const Me=new Uint8Array(Q.data);let Ne=`Unable to parse the tile at ${$.request.url}, `;throw Ne+=Me[0]===31&&Me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ae.message}`,new Error(Ne)}}))}loadTile($){return s._(this,void 0,void 0,(function*(){const{uid:j,overzoomParameters:Q}=$;Q&&($.request=Q.overzoomRequest);const Ae=!!($&&$.request&&$.request.collectResourceTiming)&&new s.c$($.request),Me=new d($);this.loading[j]=Me;const Ne=new AbortController;Me.abort=Ne;try{const We=yield this.loadVectorTile($,Ne);if(delete this.loading[j],!We)return null;if(Q){const C=this._getOverzoomTile($,We.vectorTile);We.rawData=C.rawData,We.vectorTile=C.vectorTile}const it=We.rawData,bt={};We.expires&&(bt.expires=We.expires),We.cacheControl&&(bt.cacheControl=We.cacheControl);const Ye={};if(Ae){const C=Ae.finish();C&&(Ye.resourceTiming=JSON.parse(JSON.stringify(C)))}Me.vectorTile=We.vectorTile;const at=Me.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity);this.loaded[j]=Me,this.fetching[j]={rawTileData:it,cacheControl:bt,resourceTiming:Ye};try{const C=yield at;return s.e({rawTileData:it.slice(0),encoding:$.encoding},C,bt,Ye)}finally{delete this.fetching[j]}}catch(We){throw delete this.loading[j],Me.status="done",this.loaded[j]=Me,We}}))}_getOverzoomTile($,j){const{tileID:Q,source:Ae,overzoomParameters:Me}=$,{maxZoomTileID:Ne}=Me,We=`${Ne.key}_${Q.key}`,it=this.overzoomedTileResultCache.get(We);if(it)return it;const bt=new E,Ye=this.layerIndex.familiesBySource[Ae];for(const C in Ye){const Ut=j.layers[C];if(!Ut)continue;const gn=U(Ut,Ne,Q.canonical);gn.length>0&&bt.addLayer(gn)}const at=P(bt);return this.overzoomedTileResultCache.set(We,at),at}reloadTile($){return s._(this,void 0,void 0,(function*(){const j=$.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Q=this.loaded[j];if(Q.showCollisionBoxes=$.showCollisionBoxes,Q.status==="parsing"){const Ae=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity);let Me;if(this.fetching[j]){const{rawTileData:Ne,cacheControl:We,resourceTiming:it}=this.fetching[j];delete this.fetching[j],Me=s.e({rawTileData:Ne.slice(0),encoding:$.encoding},Ae,We,it)}else Me=Ae;return Me}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity)}))}abortTile($){return s._(this,void 0,void 0,(function*(){const j=this.loading,Q=$.uid;j&&j[Q]&&j[Q].abort&&(j[Q].abort.abort(),delete j[Q])}))}removeTile($){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[$.uid]&&delete this.loaded[$.uid]}))}}class V{constructor(){this.loaded={}}loadTile($){return s._(this,void 0,void 0,(function*(){const{uid:j,encoding:Q,rawImageData:Ae,redFactor:Me,greenFactor:Ne,blueFactor:We,baseShift:it}=$,bt=Ae.width+2,Ye=Ae.height+2,at=s.b(Ae)?new s.R({width:bt,height:Ye},yield s.d0(Ae,-1,-1,bt,Ye)):Ae,C=new s.d1(j,at,Q,Me,Ne,We,it);return this.loaded=this.loaded||{},this.loaded[j]=C,C}))}removeTile($){const j=this.loaded,Q=$.uid;j&&j[Q]&&delete j[Q]}}var Z,X,re=(function(){if(X)return Z;function je(j,Q){if(j.length!==0){$(j[0],Q);for(var Ae=1;Ae<j.length;Ae++)$(j[Ae],!Q)}}function $(j,Q){for(var Ae=0,Me=0,Ne=0,We=j.length,it=We-1;Ne<We;it=Ne++){var bt=(j[Ne][0]-j[it][0])*(j[it][1]+j[Ne][1]),Ye=Ae+bt;Me+=Math.abs(Ae)>=Math.abs(bt)?Ae-Ye+bt:bt-Ye+Ae,Ae=Ye}Ae+Me>=0!=!!Q&&j.reverse()}return X=1,Z=function j(Q,Ae){var Me,Ne=Q&&Q.type;if(Ne==="FeatureCollection")for(Me=0;Me<Q.features.length;Me++)j(Q.features[Me],Ae);else if(Ne==="GeometryCollection")for(Me=0;Me<Q.geometries.length;Me++)j(Q.geometries[Me],Ae);else if(Ne==="Feature")j(Q.geometry,Ae);else if(Ne==="Polygon")je(Q.coordinates,Ae);else if(Ne==="MultiPolygon")for(Me=0;Me<Q.coordinates.length;Me++)je(Q.coordinates[Me],Ae);return Q}})(),ee=s.d2(re);const ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:je=>je},q=Math.fround||(le=new Float32Array(1),je=>(le[0]=+je,le[0]));var le;class ue{constructor($){this.options=Object.assign(Object.create(ne),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){const{log:j,minZoom:Q,maxZoom:Ae}=this.options;j&&console.time("total time");const Me=`prepare ${$.length} points`;j&&console.time(Me),this.points=$;const Ne=[];for(let it=0;it<$.length;it++){const bt=$[it];if(!bt.geometry)continue;const[Ye,at]=bt.geometry.coordinates,C=q(Be(Ye)),Ut=q(Ce(at));Ne.push(C,Ut,1/0,it,-1,1),this.options.reduce&&Ne.push(0)}let We=this.trees[Ae+1]=this._createTree(Ne);j&&console.timeEnd(Me);for(let it=Ae;it>=Q;it--){const bt=+Date.now();We=this.trees[it]=this._createTree(this._cluster(We,it)),j&&console.log("z%d: %d clusters in %dms",it,We.numItems,+Date.now()-bt)}return j&&console.timeEnd("total time"),this}getClusters($,j){let Q=(($[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,$[1]));let Me=$[2]===180?180:(($[2]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)Q=-180,Me=180;else if(Q>Me){const at=this.getClusters([Q,Ae,180,Ne],j),C=this.getClusters([-180,Ae,Me,Ne],j);return at.concat(C)}const We=this.trees[this._limitZoom(j)],it=We.range(Be(Q),Ce(Ne),Be(Me),Ce(Ae)),bt=We.data,Ye=[];for(const at of it){const C=this.stride*at;Ye.push(bt[C+5]>1?ve(bt,C,this.clusterProps):this.points[bt[C+3]])}return Ye}getChildren($){const j=this._getOriginId($),Q=this._getOriginZoom($),Ae="No cluster with the specified id.",Me=this.trees[Q];if(!Me)throw new Error(Ae);const Ne=Me.data;if(j*this.stride>=Ne.length)throw new Error(Ae);const We=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),it=Me.within(Ne[j*this.stride],Ne[j*this.stride+1],We),bt=[];for(const Ye of it){const at=Ye*this.stride;Ne[at+4]===$&&bt.push(Ne[at+5]>1?ve(Ne,at,this.clusterProps):this.points[Ne[at+3]])}if(bt.length===0)throw new Error(Ae);return bt}getLeaves($,j,Q){const Ae=[];return this._appendLeaves(Ae,$,j=j||10,Q=Q||0,0),Ae}getTile($,j,Q){const Ae=this.trees[this._limitZoom($)],Me=Math.pow(2,$),{extent:Ne,radius:We}=this.options,it=We/Ne,bt=(Q-it)/Me,Ye=(Q+1+it)/Me,at={features:[]};return this._addTileFeatures(Ae.range((j-it)/Me,bt,(j+1+it)/Me,Ye),Ae.data,j,Q,Me,at),j===0&&this._addTileFeatures(Ae.range(1-it/Me,bt,1,Ye),Ae.data,Me,Q,Me,at),j===Me-1&&this._addTileFeatures(Ae.range(0,bt,it/Me,Ye),Ae.data,-1,Q,Me,at),at.features.length?at:null}getClusterExpansionZoom($){let j=this._getOriginZoom($)-1;for(;j<=this.options.maxZoom;){const Q=this.getChildren($);if(j++,Q.length!==1)break;$=Q[0].properties.cluster_id}return j}_appendLeaves($,j,Q,Ae,Me){const Ne=this.getChildren(j);for(const We of Ne){const it=We.properties;if(it&&it.cluster?Me+it.point_count<=Ae?Me+=it.point_count:Me=this._appendLeaves($,it.cluster_id,Q,Ae,Me):Me<Ae?Me++:$.push(We),$.length===Q)break}return Me}_createTree($){const j=new s.aU($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<$.length;Q+=this.stride)j.add($[Q],$[Q+1]);return j.finish(),j.data=$,j}_addTileFeatures($,j,Q,Ae,Me,Ne){for(const We of $){const it=We*this.stride,bt=j[it+5]>1;let Ye,at,C;if(bt)Ye=pe(j,it,this.clusterProps),at=j[it],C=j[it+1];else{const bn=this.points[j[it+3]];Ye=bn.properties;const[_n,Mt]=bn.geometry.coordinates;at=Be(_n),C=Ce(Mt)}const Ut={type:1,geometry:[[Math.round(this.options.extent*(at*Me-Q)),Math.round(this.options.extent*(C*Me-Ae))]],tags:Ye};let gn;gn=bt||this.options.generateId?j[it+3]:this.points[j[it+3]].id,gn!==void 0&&(Ut.id=gn),Ne.features.push(Ut)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,j){const{radius:Q,extent:Ae,reduce:Me,minPoints:Ne}=this.options,We=Q/(Ae*Math.pow(2,j)),it=$.data,bt=[],Ye=this.stride;for(let at=0;at<it.length;at+=Ye){if(it[at+2]<=j)continue;it[at+2]=j;const C=it[at],Ut=it[at+1],gn=$.within(it[at],it[at+1],We),bn=it[at+5];let _n=bn;for(const Mt of gn){const xi=Mt*Ye;it[xi+2]>j&&(_n+=it[xi+5])}if(_n>bn&&_n>=Ne){let Mt,xi=C*bn,ji=Ut*bn,Qn=-1;const Zn=(at/Ye<<5)+(j+1)+this.points.length;for(const Yi of gn){const qi=Yi*Ye;if(it[qi+2]<=j)continue;it[qi+2]=j;const Ui=it[qi+5];xi+=it[qi]*Ui,ji+=it[qi+1]*Ui,it[qi+4]=Zn,Me&&(Mt||(Mt=this._map(it,at,!0),Qn=this.clusterProps.length,this.clusterProps.push(Mt)),Me(Mt,this._map(it,qi)))}it[at+4]=Zn,bt.push(xi/_n,ji/_n,1/0,Zn,-1,_n),Me&&bt.push(Qn)}else{for(let Mt=0;Mt<Ye;Mt++)bt.push(it[at+Mt]);if(_n>1)for(const Mt of gn){const xi=Mt*Ye;if(!(it[xi+2]<=j)){it[xi+2]=j;for(let ji=0;ji<Ye;ji++)bt.push(it[xi+ji])}}}}return bt}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,j,Q){if($[j+5]>1){const Ne=this.clusterProps[$[j+6]];return Q?Object.assign({},Ne):Ne}const Ae=this.points[$[j+3]].properties,Me=this.options.map(Ae);return Q&&Me===Ae?Object.assign({},Me):Me}}function ve(je,$,j){return{type:"Feature",id:je[$+3],properties:pe(je,$,j),geometry:{type:"Point",coordinates:[(Q=je[$],360*(Q-.5)),Oe(je[$+1])]}};var Q}function pe(je,$,j){const Q=je[$+5],Ae=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,Me=je[$+6],Ne=Me===-1?{}:Object.assign({},j[Me]);return Object.assign(Ne,{cluster:!0,cluster_id:je[$+3],point_count:Q,point_count_abbreviated:Ae})}function Be(je){return je/360+.5}function Ce(je){const $=Math.sin(je*Math.PI/180),j=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return j<0?0:j>1?1:j}function Oe(je){const $=(180-360*je)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function Fe(je,$,j,Q){let Ae=Q;const Me=$+(j-$>>1);let Ne,We=j-$;const it=je[$],bt=je[$+1],Ye=je[j],at=je[j+1];for(let C=$+3;C<j;C+=3){const Ut=Ee(je[C],je[C+1],it,bt,Ye,at);if(Ut>Ae)Ne=C,Ae=Ut;else if(Ut===Ae){const gn=Math.abs(C-Me);gn<We&&(Ne=C,We=gn)}}Ae>Q&&(Ne-$>3&&Fe(je,$,Ne,Q),je[Ne+2]=Ae,j-Ne>3&&Fe(je,Ne,j,Q))}function Ee(je,$,j,Q,Ae,Me){let Ne=Ae-j,We=Me-Q;if(Ne!==0||We!==0){const it=((je-j)*Ne+($-Q)*We)/(Ne*Ne+We*We);it>1?(j=Ae,Q=Me):it>0&&(j+=Ne*it,Q+=We*it)}return Ne=je-j,We=$-Q,Ne*Ne+We*We}function Ve(je,$,j,Q){const Ae={id:je??null,type:$,geometry:j,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if($==="Point"||$==="MultiPoint"||$==="LineString")ut(Ae,j);else if($==="Polygon")ut(Ae,j[0]);else if($==="MultiLineString")for(const Me of j)ut(Ae,Me);else if($==="MultiPolygon")for(const Me of j)ut(Ae,Me[0]);return Ae}function ut(je,$){for(let j=0;j<$.length;j+=3)je.minX=Math.min(je.minX,$[j]),je.minY=Math.min(je.minY,$[j+1]),je.maxX=Math.max(je.maxX,$[j]),je.maxY=Math.max(je.maxY,$[j+1])}function mt(je,$,j,Q){if(!$.geometry)return;const Ae=$.geometry.coordinates;if(Ae&&Ae.length===0)return;const Me=$.geometry.type,Ne=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2);let We=[],it=$.id;if(j.promoteId?it=$.properties[j.promoteId]:j.generateId&&(it=Q||0),Me==="Point")Pe(Ae,We);else if(Me==="MultiPoint")for(const bt of Ae)Pe(bt,We);else if(Me==="LineString")De(Ae,We,Ne,!1);else if(Me==="MultiLineString"){if(j.lineMetrics){for(const bt of Ae)We=[],De(bt,We,Ne,!1),je.push(Ve(it,"LineString",We,$.properties));return}Xe(Ae,We,Ne,!1)}else if(Me==="Polygon")Xe(Ae,We,Ne,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(const bt of $.geometry.geometries)mt(je,{id:it,geometry:bt,properties:$.properties},j,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of Ae){const Ye=[];Xe(bt,Ye,Ne,!0),We.push(Ye)}}je.push(Ve(it,Me,We,$.properties))}function Pe(je,$){$.push(Ke(je[0]),Bt(je[1]),0)}function De(je,$,j,Q){let Ae,Me,Ne=0;for(let it=0;it<je.length;it++){const bt=Ke(je[it][0]),Ye=Bt(je[it][1]);$.push(bt,Ye,0),it>0&&(Ne+=Q?(Ae*Ye-bt*Me)/2:Math.sqrt(Math.pow(bt-Ae,2)+Math.pow(Ye-Me,2))),Ae=bt,Me=Ye}const We=$.length-3;$[2]=1,Fe($,0,We,j),$[We+2]=1,$.size=Math.abs(Ne),$.start=0,$.end=$.size}function Xe(je,$,j,Q){for(let Ae=0;Ae<je.length;Ae++){const Me=[];De(je[Ae],Me,j,Q),$.push(Me)}}function Ke(je){return je/360+.5}function Bt(je){const $=Math.sin(je*Math.PI/180),j=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return j<0?0:j>1?1:j}function ot(je,$,j,Q,Ae,Me,Ne,We){if(Q/=$,Me>=(j/=$)&&Ne<Q)return je;if(Ne<j||Me>=Q)return null;const it=[];for(const bt of je){const Ye=bt.geometry;let at=bt.type;const C=Ae===0?bt.minX:bt.minY,Ut=Ae===0?bt.maxX:bt.maxY;if(C>=j&&Ut<Q){it.push(bt);continue}if(Ut<j||C>=Q)continue;let gn=[];if(at==="Point"||at==="MultiPoint")Et(Ye,gn,j,Q,Ae);else if(at==="LineString")Rt(Ye,gn,j,Q,Ae,!1,We.lineMetrics);else if(at==="MultiLineString")ke(Ye,gn,j,Q,Ae,!1);else if(at==="Polygon")ke(Ye,gn,j,Q,Ae,!0);else if(at==="MultiPolygon")for(const bn of Ye){const _n=[];ke(bn,_n,j,Q,Ae,!0),_n.length&&gn.push(_n)}if(gn.length){if(We.lineMetrics&&at==="LineString"){for(const bn of gn)it.push(Ve(bt.id,at,bn,bt.tags));continue}at!=="LineString"&&at!=="MultiLineString"||(gn.length===1?(at="LineString",gn=gn[0]):at="MultiLineString"),at!=="Point"&&at!=="MultiPoint"||(at=gn.length===3?"Point":"MultiPoint"),it.push(Ve(bt.id,at,gn,bt.tags))}}return it.length?it:null}function Et(je,$,j,Q,Ae){for(let Me=0;Me<je.length;Me+=3){const Ne=je[Me+Ae];Ne>=j&&Ne<=Q&&Te($,je[Me],je[Me+1],je[Me+2])}}function Rt(je,$,j,Q,Ae,Me,Ne){let We=Ue(je);const it=Ae===0?He:Ct;let bt,Ye,at=je.start;for(let _n=0;_n<je.length-3;_n+=3){const Mt=je[_n],xi=je[_n+1],ji=je[_n+2],Qn=je[_n+3],Zn=je[_n+4],Yi=Ae===0?Mt:xi,qi=Ae===0?Qn:Zn;let Ui=!1;Ne&&(bt=Math.sqrt(Math.pow(Mt-Qn,2)+Math.pow(xi-Zn,2))),Yi<j?qi>j&&(Ye=it(We,Mt,xi,Qn,Zn,j),Ne&&(We.start=at+bt*Ye)):Yi>Q?qi<Q&&(Ye=it(We,Mt,xi,Qn,Zn,Q),Ne&&(We.start=at+bt*Ye)):Te(We,Mt,xi,ji),qi<j&&Yi>=j&&(Ye=it(We,Mt,xi,Qn,Zn,j),Ui=!0),qi>Q&&Yi<=Q&&(Ye=it(We,Mt,xi,Qn,Zn,Q),Ui=!0),!Me&&Ui&&(Ne&&(We.end=at+bt*Ye),$.push(We),We=Ue(je)),Ne&&(at+=bt)}let C=je.length-3;const Ut=je[C],gn=je[C+1],bn=Ae===0?Ut:gn;bn>=j&&bn<=Q&&Te(We,Ut,gn,je[C+2]),C=We.length-3,Me&&C>=3&&(We[C]!==We[0]||We[C+1]!==We[1])&&Te(We,We[0],We[1],We[2]),We.length&&$.push(We)}function Ue(je){const $=[];return $.size=je.size,$.start=je.start,$.end=je.end,$}function ke(je,$,j,Q,Ae,Me){for(const Ne of je)Rt(Ne,$,j,Q,Ae,Me,!1)}function Te(je,$,j,Q){je.push($,j,Q)}function He(je,$,j,Q,Ae,Me){const Ne=(Me-$)/(Q-$);return Te(je,Me,j+(Ae-j)*Ne,1),Ne}function Ct(je,$,j,Q,Ae,Me){const Ne=(Me-j)/(Ae-j);return Te(je,$+(Q-$)*Ne,Me,1),Ne}function vt(je,$){const j=[];for(let Q=0;Q<je.length;Q++){const Ae=je[Q],Me=Ae.type;let Ne;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Ne=wt(Ae.geometry,$);else if(Me==="MultiLineString"||Me==="Polygon"){Ne=[];for(const We of Ae.geometry)Ne.push(wt(We,$))}else if(Me==="MultiPolygon"){Ne=[];for(const We of Ae.geometry){const it=[];for(const bt of We)it.push(wt(bt,$));Ne.push(it)}}j.push(Ve(Ae.id,Me,Ne,Ae.tags))}return j}function wt(je,$){const j=[];j.size=je.size,je.start!==void 0&&(j.start=je.start,j.end=je.end);for(let Q=0;Q<je.length;Q+=3)j.push(je[Q]+$,je[Q+1],je[Q+2]);return j}function Ft(je,$){if(je.transformed)return je;const j=1<<je.z,Q=je.x,Ae=je.y;for(const Me of je.features){const Ne=Me.geometry,We=Me.type;if(Me.geometry=[],We===1)for(let it=0;it<Ne.length;it+=2)Me.geometry.push(Pt(Ne[it],Ne[it+1],$,j,Q,Ae));else for(let it=0;it<Ne.length;it++){const bt=[];for(let Ye=0;Ye<Ne[it].length;Ye+=2)bt.push(Pt(Ne[it][Ye],Ne[it][Ye+1],$,j,Q,Ae));Me.geometry.push(bt)}}return je.transformed=!0,je}function Pt(je,$,j,Q,Ae,Me){return[Math.round(j*(je*Q-Ae)),Math.round(j*($*Q-Me))]}function nn(je,$,j,Q,Ae){const Me=$===Ae.maxZoom?0:Ae.tolerance/((1<<$)*Ae.extent),Ne={features:[],numPoints:0,numSimplified:0,numFeatures:je.length,source:null,x:j,y:Q,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const We of je)Kn(Ne,We,Me,Ae);return Ne}function Kn(je,$,j,Q){const Ae=$.geometry,Me=$.type,Ne=[];if(je.minX=Math.min(je.minX,$.minX),je.minY=Math.min(je.minY,$.minY),je.maxX=Math.max(je.maxX,$.maxX),je.maxY=Math.max(je.maxY,$.maxY),Me==="Point"||Me==="MultiPoint")for(let We=0;We<Ae.length;We+=3)Ne.push(Ae[We],Ae[We+1]),je.numPoints++,je.numSimplified++;else if(Me==="LineString")Wn(Ne,Ae,je,j,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(let We=0;We<Ae.length;We++)Wn(Ne,Ae[We],je,j,Me==="Polygon",We===0);else if(Me==="MultiPolygon")for(let We=0;We<Ae.length;We++){const it=Ae[We];for(let bt=0;bt<it.length;bt++)Wn(Ne,it[bt],je,j,!0,bt===0)}if(Ne.length){let We=$.tags||null;if(Me==="LineString"&&Q.lineMetrics){We={};for(const bt in $.tags)We[bt]=$.tags[bt];We.mapbox_clip_start=Ae.start/Ae.size,We.mapbox_clip_end=Ae.end/Ae.size}const it={geometry:Ne,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:We};$.id!==null&&(it.id=$.id),je.features.push(it)}}function Wn(je,$,j,Q,Ae,Me){const Ne=Q*Q;if(Q>0&&$.size<(Ae?Ne:Q))return void(j.numPoints+=$.length/3);const We=[];for(let it=0;it<$.length;it+=3)(Q===0||$[it+2]>Ne)&&(j.numSimplified++,We.push($[it],$[it+1])),j.numPoints++;Ae&&(function(it,bt){let Ye=0;for(let at=0,C=it.length,Ut=C-2;at<C;Ut=at,at+=2)Ye+=(it[at]-it[Ut])*(it[at+1]+it[Ut+1]);if(Ye>0===bt)for(let at=0,C=it.length;at<C/2;at+=2){const Ut=it[at],gn=it[at+1];it[at]=it[C-2-at],it[at+1]=it[C-1-at],it[C-2-at]=Ut,it[C-1-at]=gn}})(We,Me),je.push(We)}const Mi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Fn{constructor($,j){const Q=(j=this.options=(function(Me,Ne){for(const We in Ne)Me[We]=Ne[We];return Me})(Object.create(Mi),j)).debug;if(Q&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ae=(function(Me,Ne){const We=[];if(Me.type==="FeatureCollection")for(let it=0;it<Me.features.length;it++)mt(We,Me.features[it],Ne,it);else mt(We,Me.type==="Feature"?Me:{geometry:Me},Ne);return We})($,j);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ae=(function(Me,Ne){const We=Ne.buffer/Ne.extent;let it=Me;const bt=ot(Me,1,-1-We,We,0,-1,2,Ne),Ye=ot(Me,1,1-We,2+We,0,-1,2,Ne);return(bt||Ye)&&(it=ot(Me,1,-We,1+We,0,-1,2,Ne)||[],bt&&(it=vt(bt,1).concat(it)),Ye&&(it=it.concat(vt(Ye,-1)))),it})(Ae,j),Ae.length&&this.splitTile(Ae,0,0,0),Q&&(Ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile($,j,Q,Ae,Me,Ne,We){const it=[$,j,Q,Ae],bt=this.options,Ye=bt.debug;for(;it.length;){Ae=it.pop(),Q=it.pop(),j=it.pop(),$=it.pop();const at=1<<j,C=Ln(j,Q,Ae);let Ut=this.tiles[C];if(!Ut&&(Ye>1&&console.time("creation"),Ut=this.tiles[C]=nn($,j,Q,Ae,bt),this.tileCoords.push({z:j,x:Q,y:Ae}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,Q,Ae,Ut.numFeatures,Ut.numPoints,Ut.numSimplified),console.timeEnd("creation"));const Ui=`z${j}`;this.stats[Ui]=(this.stats[Ui]||0)+1,this.total++}if(Ut.source=$,Me==null){if(j===bt.indexMaxZoom||Ut.numPoints<=bt.indexMaxPoints)continue}else{if(j===bt.maxZoom||j===Me)continue;if(Me!=null){const Ui=Me-j;if(Q!==Ne>>Ui||Ae!==We>>Ui)continue}}if(Ut.source=null,$.length===0)continue;Ye>1&&console.time("clipping");const gn=.5*bt.buffer/bt.extent,bn=.5-gn,_n=.5+gn,Mt=1+gn;let xi=null,ji=null,Qn=null,Zn=null,Yi=ot($,at,Q-gn,Q+_n,0,Ut.minX,Ut.maxX,bt),qi=ot($,at,Q+bn,Q+Mt,0,Ut.minX,Ut.maxX,bt);$=null,Yi&&(xi=ot(Yi,at,Ae-gn,Ae+_n,1,Ut.minY,Ut.maxY,bt),ji=ot(Yi,at,Ae+bn,Ae+Mt,1,Ut.minY,Ut.maxY,bt),Yi=null),qi&&(Qn=ot(qi,at,Ae-gn,Ae+_n,1,Ut.minY,Ut.maxY,bt),Zn=ot(qi,at,Ae+bn,Ae+Mt,1,Ut.minY,Ut.maxY,bt),qi=null),Ye>1&&console.timeEnd("clipping"),it.push(xi||[],j+1,2*Q,2*Ae),it.push(ji||[],j+1,2*Q,2*Ae+1),it.push(Qn||[],j+1,2*Q+1,2*Ae),it.push(Zn||[],j+1,2*Q+1,2*Ae+1)}}getTile($,j,Q){$=+$,j=+j,Q=+Q;const Ae=this.options,{extent:Me,debug:Ne}=Ae;if($<0||$>24)return null;const We=1<<$,it=Ln($,j=j+We&We-1,Q);if(this.tiles[it])return Ft(this.tiles[it],Me);Ne>1&&console.log("drilling down to z%d-%d-%d",$,j,Q);let bt,Ye=$,at=j,C=Q;for(;!bt&&Ye>0;)Ye--,at>>=1,C>>=1,bt=this.tiles[Ln(Ye,at,C)];return bt&&bt.source?(Ne>1&&(console.log("found parent tile z%d-%d-%d",Ye,at,C),console.time("drilling down")),this.splitTile(bt.source,Ye,at,C,$,j,Q),Ne>1&&console.timeEnd("drilling down"),this.tiles[it]?Ft(this.tiles[it],Me):null):null}}function Ln(je,$,j){return 32*((1<<je)*j+$)+je}class In extends z{constructor($,j,Q,Ae=oi){super($,j,Q),this._dataUpdateable=new Map,this._createGeoJSONIndex=Ae}loadVectorTile($,j){return s._(this,void 0,void 0,(function*(){const Q=$.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ae=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);return Ae?P(new s.d3(Ae.features,{version:2,extent:s.a5})):null}))}loadData($){return s._(this,void 0,void 0,(function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();const Q=this._startPerformance($);this._pendingRequest=new AbortController;try{(!this._pendingData||$.request||$.data||$.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON($,this._pendingRequest));const Ae=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Ae,$),this.loaded={};const Me={};return this._finishPerformance(Q,$,Me),Me}catch(Ae){if(delete this._pendingRequest,s.Z(Ae))return{abandoned:!0};throw Ae}}))}_startPerformance($){var j;if(!((j=$?.request)===null||j===void 0)&&j.collectResourceTiming)return new s.c$($.request)}_finishPerformance($,j,Q){if(!$)return;const Ae=$.finish();Ae&&(Q.resourceTiming={},Q.resourceTiming[j.source]=JSON.parse(JSON.stringify(Ae)))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile($){const j=this.loaded;return j&&j[$.uid]?super.reloadTile($):this.loadTile($)}loadAndProcessGeoJSON($,j){return s._(this,void 0,void 0,(function*(){let Q;if($.request?Q=yield this.loadGeoJSONFromUrl($.request,$.promoteId,j):$.data?Q=this._loadGeoJSONFromObject($.data,$.promoteId):$.dataDiff&&(Q=this._loadGeoJSONFromDiff($.dataDiff,$.promoteId,$.source)),delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);return ee(Q,!0),$.filter&&(Q=this._filterGeoJSON(Q,$.filter)),Q}))}loadGeoJSONFromUrl($,j,Q){return s._(this,void 0,void 0,(function*(){const Ae=yield s.j($,Q);return this._dataUpdateable=s.a7(Ae.data,j)?s.a8(Ae.data,j):void 0,Ae.data}))}_loadGeoJSONFromObject($,j){return this._dataUpdateable=s.a7($,j)?s.a8($,j):void 0,$}_loadGeoJSONFromDiff($,j,Q){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Q}`);s.a9(this._dataUpdateable,$,j);const Ae=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Ae)}_filterGeoJSON($,j){const Q=s.d4(j,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map((Me=>`${Me.key}: ${Me.message}`)).join(", "));const Ae=$.features.filter((Me=>Q.value.evaluate({zoom:0},Me)));return this._toFeatureCollection(Ae)}_toFeatureCollection($){return{type:"FeatureCollection",features:$}}removeSource($){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom($){return this._geoJSONIndex.getClusterExpansionZoom($.clusterId)}getClusterChildren($){return this._geoJSONIndex.getChildren($.clusterId)}getClusterLeaves($){return this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset)}}function oi(je,$){return $.cluster?new ue((function({superclusterOptions:j,clusterProperties:Q}){if(!Q||!j)return j;const Ae={},Me={},Ne={accumulated:null,zoom:0},We={properties:null},it=Object.keys(Q);for(const bt of it){const[Ye,at]=Q[bt],C=s.d4(at),Ut=s.d4(typeof Ye=="string"?[Ye,["accumulated"],["get",bt]]:Ye);Ae[bt]=C.value,Me[bt]=Ut.value}return j.map=bt=>{We.properties=bt;const Ye={};for(const at of it)Ye[at]=Ae[at].evaluate(Ne,We);return Ye},j.reduce=(bt,Ye)=>{We.properties=Ye;for(const at of it)Ne.accumulated=bt[at],bt[at]=Me[at].evaluate(Ne,We)},j})($)).load(je.features):(function(j,Q){return new Fn(j,Q)})(je,$.geojsonVtOptions)}class Tn{constructor($){this.self=$,this.actor=new s.L($),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(j,Q)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=Q},this.self.addProtocol=s.cK,this.self.removeProtocol=s.cL,this.self.registerRTLTextPlugin=j=>{s.d5.setMethods(j)},this.actor.registerMessageHandler("LDT",((j,Q)=>this._getDEMWorkerSource(j,Q.source).loadTile(Q))),this.actor.registerMessageHandler("RDT",((j,Q)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(j,Q.source).removeTile(Q)})))),this.actor.registerMessageHandler("GCEZ",((j,Q)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterExpansionZoom(Q)})))),this.actor.registerMessageHandler("GCC",((j,Q)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterChildren(Q)})))),this.actor.registerMessageHandler("GCL",((j,Q)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterLeaves(Q)})))),this.actor.registerMessageHandler("LD",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).loadData(Q))),this.actor.registerMessageHandler("GD",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).getData())),this.actor.registerMessageHandler("LT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).loadTile(Q))),this.actor.registerMessageHandler("RT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).reloadTile(Q))),this.actor.registerMessageHandler("AT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).abortTile(Q))),this.actor.registerMessageHandler("RMT",((j,Q)=>this._getWorkerSource(j,Q.type,Q.source).removeTile(Q))),this.actor.registerMessageHandler("RS",((j,Q)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[j]||!this.workerSources[j][Q.type]||!this.workerSources[j][Q.type][Q.source])return;const Ae=this.workerSources[j][Q.type][Q.source];delete this.workerSources[j][Q.type][Q.source],Ae.removeSource!==void 0&&Ae.removeSource(Q)})))),this.actor.registerMessageHandler("RM",(j=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],this.globalStates.delete(j)})))),this.actor.registerMessageHandler("SR",((j,Q)=>s._(this,void 0,void 0,(function*(){this.referrer=Q})))),this.actor.registerMessageHandler("SRPS",((j,Q)=>this._syncRTLPluginState(j,Q))),this.actor.registerMessageHandler("IS",((j,Q)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(Q)})))),this.actor.registerMessageHandler("SI",((j,Q)=>this._setImages(j,Q))),this.actor.registerMessageHandler("UL",((j,Q)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(j).update(Q.layers,Q.removedIds,this._getGlobalState(j))})))),this.actor.registerMessageHandler("UGS",((j,Q)=>s._(this,void 0,void 0,(function*(){const Ae=this._getGlobalState(j);for(const Me in Q)Ae[Me]=Q[Me]})))),this.actor.registerMessageHandler("SL",((j,Q)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(j).replace(Q,this._getGlobalState(j))}))))}_getGlobalState($){let j=this.globalStates.get($);return j||(j={},this.globalStates.set($,j)),j}_setImages($,j){return s._(this,void 0,void 0,(function*(){this.availableImages[$]=j;for(const Q in this.workerSources[$]){const Ae=this.workerSources[$][Q];for(const Me in Ae)Ae[Me].availableImages=j}}))}_syncRTLPluginState($,j){return s._(this,void 0,void 0,(function*(){return yield s.d5.syncState(j,this.self.importScripts)}))}_getAvailableImages($){let j=this.availableImages[$];return j||(j=[]),j}_getLayerIndex($){let j=this.layerIndexes[$];return j||(j=this.layerIndexes[$]=new a),j}_getWorkerSource($,j,Q){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][j]||(this.workerSources[$][j]={}),!this.workerSources[$][j][Q]){const Ae={sendAsync:(Me,Ne)=>(Me.targetMapId=$,this.actor.sendAsync(Me,Ne))};switch(j){case"vector":this.workerSources[$][j][Q]=new z(Ae,this._getLayerIndex($),this._getAvailableImages($));break;case"geojson":this.workerSources[$][j][Q]=new In(Ae,this._getLayerIndex($),this._getAvailableImages($));break;default:this.workerSources[$][j][Q]=new this.externalWorkerSourceTypes[j](Ae,this._getLayerIndex($),this._getAvailableImages($))}}return this.workerSources[$][j][Q]}_getDEMWorkerSource($,j){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][j]||(this.demWorkerSources[$][j]=new V),this.demWorkerSources[$][j]}}return s.i(self)&&(self.worker=new Tn(self)),Tn})),r("index",["exports","./shared"],(function(s,a){var c="5.14.0";function d(){var I=new a.A(4);return a.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let p,v,M;const E={frame(I,u,m){const b=requestAnimationFrame((k=>{S(),u(k)})),{unsubscribe:S}=a.s(I.signal,"abort",(()=>{S(),cancelAnimationFrame(b),m(new a.a(I.signal.reason))}),!1)},frameAsync(I){return new Promise(((u,m)=>{this.frame(I,u,m)}))},getImageData(I,u=0){return this.getImageCanvasContext(I).getImageData(-u,-u,I.width+2*u,I.height+2*u)},getImageCanvasContext(I){const u=window.document.createElement("canvas"),m=u.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return u.width=I.width,u.height=I.height,m.drawImage(I,0,0,I.width,I.height),m},resolveURL:I=>(p||(p=document.createElement("a")),p.href=I,p.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return M!==void 0?M:!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)},set prefersReducedMotion(I){M=I}},P=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(I){this._frozenAt=I}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function U(){return P.getCurrentTime()}class z{static testProp(u){if(!z.docStyle)return u[0];for(let m=0;m<u.length;m++)if(u[m]in z.docStyle)return u[m];return u[0]}static create(u,m,b){const S=window.document.createElement(u);return m!==void 0&&(S.className=m),b&&b.appendChild(S),S}static createNS(u,m){return window.document.createElementNS(u,m)}static disableDrag(){z.docStyle&&z.selectProp&&(z.userSelect=z.docStyle[z.selectProp],z.docStyle[z.selectProp]="none")}static enableDrag(){z.docStyle&&z.selectProp&&(z.docStyle[z.selectProp]=z.userSelect)}static setTransform(u,m){u.style[z.transformProp]=m}static addEventListener(u,m,b,S={}){u.addEventListener(m,b,"passive"in S?S:S.capture)}static removeEventListener(u,m,b,S={}){u.removeEventListener(m,b,"passive"in S?S:S.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",z.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",z.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",z.suppressClickInternal,!0)}),0)}static getScale(u){const m=u.getBoundingClientRect();return{x:m.width/u.offsetWidth||1,y:m.height/u.offsetHeight||1,boundingClientRect:m}}static getPoint(u,m,b){const S=m.boundingClientRect;return new a.P((b.clientX-S.left)/m.x-u.clientLeft,(b.clientY-S.top)/m.y-u.clientTop)}static mousePos(u,m){const b=z.getScale(u);return z.getPoint(u,b,m)}static touchPos(u,m){const b=[],S=z.getScale(u);for(let k=0;k<m.length;k++)b.push(z.getPoint(u,S,m[k]));return b}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}static sanitize(u){const m=new DOMParser().parseFromString(u,"text/html").body||document.createElement("body"),b=m.querySelectorAll("script");for(const S of b)S.remove();return z.clean(m),m.innerHTML}static isPossiblyDangerous(u,m){const b=m.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(u)||!b.includes("javascript:")&&!b.includes("data:"))||!!u.startsWith("on")||void 0}static clean(u){const m=u.children;for(const b of m)z.removeAttributes(b),z.clean(b)}static removeAttributes(u){for(const{name:m,value:b}of u.attributes)z.isPossiblyDangerous(m,b)&&u.removeAttribute(m)}}z.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,z.selectProp=z.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),z.transformProp=z.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(I){!re&&X&&(ee?ne(I):Z=I)}};let Z,X,re=!1,ee=!1;function ne(I){const u=I.createTexture();I.bindTexture(I.TEXTURE_2D,u);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,X),I.isContextLost())return;V.supported=!0}catch{}I.deleteTexture(u),re=!0}var q;typeof document<"u"&&(X=document.createElement("img"),X.onload=()=>{Z&&ne(Z),Z=null,ee=!0},X.onerror=()=>{re=!0,Z=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(I){let u,m,b,S;I.resetRequestQueue=()=>{u=[],m=0,b=0,S={}},I.addThrottleControl=H=>{const se=b++;return S[se]=H,se},I.removeThrottleControl=H=>{delete S[H],K()},I.getImage=(H,se,ce=!0)=>new Promise(((ye,ge)=>{V.supported&&(H.headers||(H.headers={}),H.headers.accept="image/webp,*/*"),a.e(H,{type:"image"}),u.push({abortController:se,requestParameters:H,supportImageRefresh:ce,state:"queued",onError:Se=>{ge(Se)},onSuccess:Se=>{ye(Se)}}),K()}));const k=H=>a._(this,void 0,void 0,(function*(){H.state="running";const{requestParameters:se,supportImageRefresh:ce,onError:ye,onSuccess:ge,abortController:Se}=H,Le=ce===!1&&!a.i(self)&&!a.g(se.url)&&(!se.headers||Object.keys(se.headers).reduce(((tt,rt)=>tt&&rt==="accept"),!0));m++;const Je=Le?N(se,Se):a.m(se,Se);try{const tt=yield Je;delete H.abortController,H.state="completed",tt.data instanceof HTMLImageElement||a.b(tt.data)?ge(tt):tt.data&&ge({data:yield(nt=tt.data,typeof createImageBitmap=="function"?a.f(nt):a.h(nt)),cacheControl:tt.cacheControl,expires:tt.expires})}catch(tt){delete H.abortController,ye(tt)}finally{m--,K()}var nt})),K=()=>{const H=(()=>{for(const se of Object.keys(S))if(S[se]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let se=m;se<H&&u.length>0;se++){const ce=u.shift();ce.abortController.signal.aborted?se--:k(ce)}},N=(H,se)=>new Promise(((ce,ye)=>{const ge=new Image,Se=H.url,Le=H.credentials;Le&&Le==="include"?ge.crossOrigin="use-credentials":(Le&&Le==="same-origin"||!a.d(Se))&&(ge.crossOrigin="anonymous"),se.signal.addEventListener("abort",(()=>{ge.src="",ye(new a.a(se.signal.reason))})),ge.fetchPriority="high",ge.onload=()=>{ge.onerror=ge.onload=null,ce({data:ge})},ge.onerror=()=>{ge.onerror=ge.onload=null,se.signal.aborted||ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ge.src=Se}))})(q||(q={})),q.resetRequestQueue();class le{constructor(u){this._transformRequestFn=u??null}transformRequest(u,m){return this._transformRequestFn&&this._transformRequestFn(u,m)||{url:u}}setTransformRequest(u){this._transformRequestFn=u}}function ue(I){const u=[];if(typeof I=="string")u.push({id:"default",url:I});else if(I&&I.length>0){const m=[];for(const{id:b,url:S}of I){const k=`${b}${S}`;m.indexOf(k)===-1&&(m.push(k),u.push({id:b,url:S}))}}return u}function ve(I,u,m){try{const b=new URL(I);return b.pathname+=`${u}${m}`,b.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function pe(I){const{userImage:u}=I;return!!(u&&u.render&&u.render())&&(I.data.replace(new Uint8Array(u.data.buffer)),!0)}class Be extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const u of Object.keys(this.images))this.removeImage(u);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,promiseResolve:b}of this.requestors)b(this._getImagesForIds(m));this.requestors=[]}}getImage(u){const m=this.images[u];if(m&&!m.data&&m.spriteData){const b=m.spriteData;m.data=new a.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),m.spriteData=null}return m}addImage(u,m){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let b=!0;const S=m.data||m.spriteData;return this._validateStretch(m.stretchX,S&&S.width)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,S&&S.height)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new a.k(new Error(`Image "${u}" has invalid "content" value`))),b=!1),b}_validateStretch(u,m){if(!u)return!0;let b=0;for(const S of u){if(S[0]<b||S[1]<S[0]||m<S[1])return!1;b=S[1]}return!0}_validateContent(u,m){if(!u)return!0;if(u.length!==4)return!1;const b=m.spriteData,S=b&&b.width||m.data.width,k=b&&b.height||m.data.height;return!(u[0]<0||S<u[0]||u[1]<0||k<u[1]||u[2]<0||S<u[2]||u[3]<0||k<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,m,b=!0){const S=this.getImage(u);if(b&&(S.data.width!==m.data.width||S.data.height!==m.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=S.version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise(((m,b)=>{let S=!0;if(!this.isLoaded())for(const k of u)this.images[k]||(S=!1);this.isLoaded()||S?m(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:m})}))}_getImagesForIds(u){const m={};for(const b of u){let S=this.getImage(b);S||(this.fire(new a.l("styleimagemissing",{id:b})),S=this.getImage(b)),S?m[b]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,textFitWidth:S.textFitWidth,textFitHeight:S.textFitHeight,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:a.w(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return m}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],b=this.getImage(u);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const S={w:b.data.width+2,h:b.data.height+2,x:0,y:0},k=new a.I(S,b);this.patterns[u]={bin:S,position:k}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(u,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const k in this.patterns)u.push(this.patterns[k].bin);const{w:m,h:b}=a.p(u),S=this.atlasImage;S.resize({width:m||1,height:b||1});for(const k in this.patterns){const{bin:K}=this.patterns[k],N=K.x+1,H=K.y+1,se=this.getImage(k).data,ce=se.width,ye=se.height;a.R.copy(se,S,{x:0,y:0},{x:N,y:H},{width:ce,height:ye}),a.R.copy(se,S,{x:0,y:ye-1},{x:N,y:H-1},{width:ce,height:1}),a.R.copy(se,S,{x:0,y:0},{x:N,y:H+ye},{width:ce,height:1}),a.R.copy(se,S,{x:ce-1,y:0},{x:N-1,y:H},{width:1,height:ye}),a.R.copy(se,S,{x:0,y:0},{x:N+ce,y:H},{width:1,height:ye})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.getImage(m);b||a.w(`Image with ID: "${m}" was not found`),pe(b)&&this.updateImage(m,b)}}cloneImages(){const u={};for(const m in this.images){const b=this.images[m];u[m]=Object.assign(Object.assign({},b),{data:b.data?b.data.clone():null})}return u}}const Ce=1e20;function Oe(I,u,m,b,S,k,K,N,H){for(let se=u;se<u+b;se++)Fe(I,m*k+se,k,S,K,N,H);for(let se=m;se<m+S;se++)Fe(I,se*k+u,1,b,K,N,H)}function Fe(I,u,m,b,S,k,K){k[0]=0,K[0]=-Ce,K[1]=Ce,S[0]=I[u];for(let N=1,H=0,se=0;N<b;N++){S[N]=I[u+N*m];const ce=N*N;do{const ye=k[H];se=(S[N]-S[ye]+ce-ye*ye)/(N-ye)/2}while(se<=K[H]&&--H>-1);H++,k[H]=N,K[H]=se,K[H+1]=Ce}for(let N=0,H=0;N<b;N++){for(;K[H+1]<N;)H++;const se=k[H],ce=N-se;I[u+N*m]=S[se]+ce*ce}}const Ee=a.v.layout_symbol["text-font"].default.join(",");class Ve{constructor(u,m,b){this.requestManager=u,this.localIdeographFontFamily=m,this.entries={},this.lang=b}setURL(u){this.url=u}getGlyphs(u){return a._(this,void 0,void 0,(function*(){const m=[];for(const k in u)for(const K of u[k])m.push(this._getAndCacheGlyphsPromise(k,K));const b=yield Promise.all(m),S={};for(const{stack:k,id:K,glyph:N}of b)S[k]||(S[k]={}),S[k][K]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};return S}))}_getAndCacheGlyphsPromise(u,m){return a._(this,void 0,void 0,(function*(){let b=this.entries[u];b||(b=this.entries[u]={glyphs:{},requests:{},ranges:{}});let S=b.glyphs[m];return S!==void 0?{stack:u,id:m,glyph:S}:!this.url||this._charUsesLocalIdeographFontFamily(m)?(S=b.glyphs[m]=this._drawGlyph(b,u,m),{stack:u,id:m,glyph:S}):yield this._downloadAndCacheRangePromise(u,m)}))}_downloadAndCacheRangePromise(u,m){return a._(this,void 0,void 0,(function*(){const b=this.entries[u],S=Math.floor(m/256);if(b.ranges[S])return{stack:u,id:m,glyph:null};if(!b.requests[S]){const k=Ve.loadGlyphRange(u,S,this.url,this.requestManager);b.requests[S]=k}try{const k=yield b.requests[S];for(const K in k)b.glyphs[+K]=k[+K];return b.ranges[S]=!0,{stack:u,id:m,glyph:k[m]||null}}catch(k){const K=b.glyphs[m]=this._drawGlyph(b,u,m);return this._warnOnMissingGlyphRange(K,S,m,k),{stack:u,id:m,glyph:K}}}))}_warnOnMissingGlyphRange(u,m,b,S){const k=256*m,K=k+255,N=b.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${m}, ${k}-${K}. Rendering codepoint U+${N} locally instead. ${S}`)}_charUsesLocalIdeographFontFamily(u){return!!this.localIdeographFontFamily&&a.q(u)}_drawGlyph(u,m,b){const S=m===Ee&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(b),k=S?"ideographTinySDF":"tinySDF";u[k]||(u[k]=this._createTinySDF(S?this.localIdeographFontFamily:m));const K=u[k].draw(String.fromCodePoint(b));return{id:b,bitmap:new a.r({width:K.width||60,height:K.height||60},K.data),metrics:{width:K.glyphWidth/2||24,height:K.glyphHeight/2||24,left:K.glyphLeft/2+.5||0,top:K.glyphTop/2-27.5||-8,advance:K.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(u){const m=u?u.split(","):[];m.push("sans-serif");const b=m.map((S=>/[-\w]+/.test(S)?S:`'${CSS.escape(S)}'`)).join(",");return new Ve.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:b,fontWeight:this._fontWeight(m[0]),fontStyle:this._fontStyle(m[0]),lang:this.lang})}_fontStyle(u){return/italic/i.test(u)?"italic":/oblique/i.test(u)?"oblique":"normal"}_fontWeight(u){const m={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let b;for(const[S,k]of Object.entries(m))new RegExp(`\\b${S}\\b`,"i").test(u)&&(b=`${k}`);return b}destroy(){for(const u in this.entries){const m=this.entries[u];m.tinySDF&&(m.tinySDF=null),m.ideographTinySDF&&(m.ideographTinySDF=null),m.glyphs={},m.requests={},m.ranges={}}this.entries={}}}Ve.loadGlyphRange=function(I,u,m,b){return a._(this,void 0,void 0,(function*(){const S=256*u,k=S+255,K=b.transformRequest(m.replace("{fontstack}",I).replace("{range}",`${S}-${k}`),"Glyphs"),N=yield a.n(K,new AbortController);if(!N||!N.data)throw new Error(`Could not load glyph range. range: ${u}, ${S}-${k}`);const H={};for(const se of a.o(N.data))H[se.id]=se;return H}))},Ve.TinySDF=class{constructor({fontSize:I=24,buffer:u=3,radius:m=8,cutoff:b=.25,fontFamily:S="sans-serif",fontWeight:k="normal",fontStyle:K="normal",lang:N=null}={}){this.buffer=u,this.cutoff=b,this.radius=m,this.lang=N;const H=this.size=I+4*u,se=this._createCanvas(H),ce=this.ctx=se.getContext("2d",{willReadFrequently:!0});ce.font=`${K} ${k} ${I}px ${S}`,ce.textBaseline="alphabetic",ce.textAlign="left",ce.fillStyle="black",this.gridOuter=new Float64Array(H*H),this.gridInner=new Float64Array(H*H),this.f=new Float64Array(H),this.z=new Float64Array(H+1),this.v=new Uint16Array(H)}_createCanvas(I){const u=document.createElement("canvas");return u.width=u.height=I,u}draw(I){const{width:u,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,actualBoundingBoxLeft:S,actualBoundingBoxRight:k}=this.ctx.measureText(I),K=Math.ceil(m),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-S))),H=Math.min(this.size-this.buffer,K+Math.ceil(b)),se=N+2*this.buffer,ce=H+2*this.buffer,ye=Math.max(se*ce,0),ge=new Uint8ClampedArray(ye),Se={data:ge,width:se,height:ce,glyphWidth:N,glyphHeight:H,glyphTop:K,glyphLeft:0,glyphAdvance:u};if(N===0||H===0)return Se;const{ctx:Le,buffer:Je,gridInner:nt,gridOuter:tt}=this;this.lang&&(Le.lang=this.lang),Le.clearRect(Je,Je,N,H),Le.fillText(I,Je,Je+K);const rt=Le.getImageData(Je,Je,N,H);tt.fill(Ce,0,ye),nt.fill(0,0,ye);for(let ft=0;ft<H;ft++)for(let lt=0;lt<N;lt++){const pt=rt.data[4*(ft*N+lt)+3]/255;if(pt===0)continue;const _t=(ft+Je)*se+lt+Je;if(pt===1)tt[_t]=0,nt[_t]=Ce;else{const At=.5-pt;tt[_t]=At>0?At*At:0,nt[_t]=At<0?At*At:0}}Oe(tt,0,0,se,ce,se,this.f,this.v,this.z),Oe(nt,Je,Je,N,H,se,this.f,this.v,this.z);for(let ft=0;ft<ye;ft++){const lt=Math.sqrt(tt[ft])-Math.sqrt(nt[ft]);ge[ft]=Math.round(255-255*(lt/this.radius+this.cutoff))}return Se}};class ut{constructor(){this.specification=a.u.light.position}possiblyEvaluate(u,m){return a.F(u.expression.evaluate(m))}interpolate(u,m,b){return{x:a.G.number(u.x,m.x,b),y:a.G.number(u.y,m.y,b),z:a.G.number(u.z,m.z,b)}}}let mt;class Pe extends a.E{constructor(u){super(),mt=mt||new a.t({anchor:new a.D(a.u.light.anchor),position:new ut,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(mt,void 0),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(a.y,u,m))for(const b in u){const S=u[b];b.endsWith(a.z)?this._transitionable.setTransition(b.slice(0,-a.z.length),S):this._transitionable.setValue(b,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,b){return(!b||b.validate!==!1)&&a.B(this,u.call(a.C,{value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}const De=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class Xe extends a.E{constructor(u){super(),this._transitionable=new a.x(De,void 0),this.setSky(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(u,m={}){if(!this._validate(a.J,u,m)){u||(u={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const b in u){const S=u[b];b.endsWith(a.z)?this._transitionable.setTransition(b.slice(0,-a.z.length),S):this._transitionable.setValue(b,S)}}}getSky(){return this._transitionable.serialize()}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,b={}){return b?.validate!==!1&&a.B(this,u.call(a.C,a.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(u){return u<60?0:u<70?(u-60)/10:1}}class Ke{constructor(u,m){this.width=u,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,m){const b=u.join(",")+String(m);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(u,m)),this.dashEntry[b]}getDashRanges(u,m,b){const S=[];let k=u.length%2==1?-u[u.length-1]*b:0,K=u[0]*b,N=!0;S.push({left:k,right:K,isDash:N,zeroLength:u[0]===0});let H=u[0];for(let se=1;se<u.length;se++){N=!N;const ce=u[se];k=H*b,H+=ce,K=H*b,S.push({left:k,right:K,isDash:N,zeroLength:ce===0})}return S}addRoundDash(u,m,b){const S=m/2;for(let k=-b;k<=b;k++){const K=this.width*(this.nextRow+b+k);let N=0,H=u[N];for(let se=0;se<this.width;se++){se/H.right>1&&(H=u[++N]);const ce=Math.abs(se-H.left),ye=Math.abs(se-H.right),ge=Math.min(ce,ye);let Se;const Le=k/b*(S+1);if(H.isDash){const Je=S-Math.abs(Le);Se=Math.sqrt(ge*ge+Je*Je)}else Se=S-Math.sqrt(ge*ge+Le*Le);this.data[K+se]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(u){for(let N=u.length-1;N>=0;--N){const H=u[N],se=u[N+1];H.zeroLength?u.splice(N,1):se&&se.isDash===H.isDash&&(se.left=H.left,u.splice(N,1))}const m=u[0],b=u[u.length-1];m.isDash===b.isDash&&(m.left=b.left-this.width,b.right=m.right+this.width);const S=this.width*this.nextRow;let k=0,K=u[k];for(let N=0;N<this.width;N++){N/K.right>1&&(K=u[++k]);const H=Math.abs(N-K.left),se=Math.abs(N-K.right),ce=Math.min(H,se);this.data[S+N]=Math.max(0,Math.min(255,(K.isDash?ce:-ce)+128))}}addDash(u,m){const b=m?7:0,S=2*b+1;if(this.nextRow+S>this.height)return a.w("LineAtlas out of space"),null;let k=0;for(let N=0;N<u.length;N++)k+=u[N];if(k!==0){const N=this.width/k,H=this.getDashRanges(u,this.width,N);m?this.addRoundDash(H,N,b):this.addRegularDash(H)}const K={y:this.nextRow+b,height:2*b,width:k};return this.nextRow+=S,this.dirty=!0,K}bind(u){const m=u.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}const Bt="maplibre_preloaded_worker_pool";class ot{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ot.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Bt]}numActive(){return Object.keys(this.active).length}}const Et=Math.floor(E.hardwareConcurrency/2);let Rt,Ue;function ke(){return Rt||(Rt=new ot),Rt}ot.workerCount=a.K(globalThis)?Math.max(Math.min(Et,3),1):1;class Te{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=m;const b=this.workerPool.acquire(m);for(let S=0;S<b.length;S++){const k=new a.L(b[S],m);k.name=`Worker ${S}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,m){const b=[];for(const S of this.actors)b.push(S.sendAsync({type:u,data:m}));return Promise.all(b)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach((m=>{m.remove()})),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,m){for(const b of this.actors)b.registerMessageHandler(u,m)}unregisterMessageHandler(u){for(const m of this.actors)m.unregisterMessageHandler(u)}}function He(){return Ue||(Ue=new Te(ke(),a.M),Ue.registerMessageHandler("GR",((I,u,m)=>a.m(u,m)))),Ue}function Ct(I,u){const m=a.N();return a.O(m,m,[1,1,0]),a.Q(m,m,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?a.S(m,m,I.calculatePosMatrix(u.toUnwrapped())):m}function vt(I,u,m,b,S,k,K){var N;const H=(function(ge,Se,Le){if(ge)for(const Je of ge){const nt=Se[Je];if(nt&&nt.source===Le&&nt.type==="fill-extrusion")return!0}else for(const Je in Se){const nt=Se[Je];if(nt.source===Le&&nt.type==="fill-extrusion")return!0}return!1})((N=S?.layers)!==null&&N!==void 0?N:null,u,I.id),se=k.maxPitchScaleFactor(),ce=I.tilesIn(b,se,H);ce.sort(wt);const ye=[];for(const ge of ce)ye.push({wrappedTileID:ge.tileID.wrapped().key,queryResults:ge.tile.queryRenderedFeatures(u,m,I.getState(),ge.queryGeometry,ge.cameraQueryGeometry,ge.scale,S,k,se,Ct(k,ge.tileID),K?(Se,Le)=>K(ge.tileID,Se,Le):void 0)});return(function(ge,Se){for(const Le in ge)for(const Je of ge[Le])Ft(Je,Se);return ge})((function(ge){const Se={},Le={};for(const Je of ge){const nt=Je.queryResults,tt=Je.wrappedTileID,rt=Le[tt]=Le[tt]||{};for(const ft in nt){const lt=nt[ft],pt=rt[ft]=rt[ft]||{},_t=Se[ft]=Se[ft]||[];for(const At of lt)pt[At.featureIndex]||(pt[At.featureIndex]=!0,_t.push(At))}}return Se})(ye),I)}function wt(I,u){const m=I.tileID,b=u.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}function Ft(I,u){const m=I.feature,b=u.getFeatureState(m.layer["source-layer"],m.id);m.source=m.layer.source,m.layer["source-layer"]&&(m.sourceLayer=m.layer["source-layer"]),m.state=b}function Pt(I,u,m){return a._(this,void 0,void 0,(function*(){let b=I;if(I.url?b=(yield a.j(u.transformRequest(I.url,"Source"),m)).data:yield E.frameAsync(m),!b)return null;const S=a.U(a.e(b,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in b&&b.vector_layers&&(S.vectorLayerIds=b.vector_layers.map((k=>k.id))),S}))}class nn{constructor(u,m){u&&(m?this.setSouthWest(u).setNorthEast(m):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.V?new a.V(u.lng,u.lat):a.V.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.V?new a.V(u.lng,u.lat):a.V.convert(u),this}extend(u){const m=this._sw,b=this._ne;let S,k;if(u instanceof a.V)S=u,k=u;else{if(!(u instanceof nn))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(nn.convert(u)):this.extend(a.V.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.V.convert(u)):this;if(S=u._sw,k=u._ne,!S||!k)return this}return m||b?(m.lng=Math.min(S.lng,m.lng),m.lat=Math.min(S.lat,m.lat),b.lng=Math.max(k.lng,b.lng),b.lat=Math.max(k.lat,b.lat)):(this._sw=new a.V(S.lng,S.lat),this._ne=new a.V(k.lng,k.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:m,lat:b}=a.V.convert(u);let S=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&S}intersects(u){if(!((u=nn.convert(u)).getNorth()>=this.getSouth()&&u.getSouth()<=this.getNorth()))return!1;const m=a.W(this.getWest(),-180,180),b=a.W(this.getEast(),-180,180),S=a.W(u.getWest(),-180,180),k=a.W(u.getEast(),-180,180),K=m>=b,N=S>=k;return!(!K||!N)||(K?k>=m||S<=b:N?b>=S||m<=k:S<=b&&k>=m)}static convert(u){return u instanceof nn?u:u&&new nn(u)}static fromLngLat(u,m=0){const b=360*m/40075017,S=b/Math.cos(Math.PI/180*u.lat);return new nn(new a.V(u.lng-S,u.lat-b),new a.V(u.lng+S,u.lat+b))}adjustAntiMeridian(){const u=new a.V(this._sw.lng,this._sw.lat),m=new a.V(this._ne.lng,this._ne.lat);return new nn(u,u.lng>m.lng?new a.V(m.lng+360,m.lat):m)}}class Kn{constructor(u,m,b){this.bounds=nn.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),b=Math.floor(a.Y(this.bounds.getWest())*m),S=Math.floor(a.X(this.bounds.getNorth())*m),k=Math.ceil(a.Y(this.bounds.getEast())*m),K=Math.ceil(a.X(this.bounds.getSouth())*m);return u.x>=b&&u.x<k&&u.y>=S&&u.y<K}}class Wn extends a.E{constructor(u,m,b,S){if(super(),this.id=u,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(m,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),u&&(a.e(this,u),u.bounds&&(this.tileBounds=new Kn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,a.Z(u)||this.fire(new a.k(u))}}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(m,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(u)};b.request.collectResourceTiming=this._collectResourceTiming;let S="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise(((k,K)=>{u.reloadPromise={resolve:k,reject:K}}))}else u.actor=this.dispatcher.getActor(),S="LT";u.abortController=new AbortController;try{const k=yield u.actor.sendAsync({type:S,data:b},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,k)}catch(k){if(delete u.abortController,u.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(u,null)}}))}_getOverzoomParameters(u){if(u.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const m=u.tileID.scaledTo(this.maxzoom).canonical,b=m.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:m,overzoomRequest:this.map._requestManager.transformRequest(b,"Tile")}}_afterTileLoadWorkerResponse(u,m){if(m&&m.resourceTiming&&(u.resourceTiming=m.resourceTiming),m&&this.map._refreshExpiredTiles&&u.setExpiryData(m),u.loadVectorData(m,this.map.painter),u.reloadPromise){const b=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(b.resolve).catch(b.reject)}}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Mi extends a.E{constructor(u,m,b,S){super(),this.id=u,this.dispatcher=b,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},m),a.e(this,a.U(m,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(u=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const m=yield Pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,m&&(a.e(this,m),m.bounds&&(this.tileBounds=new Kn(m.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:u})))}catch(m){this._tileJSONRequest=null,this._loaded=!0,a.Z(m)||this.fire(new a.k(m))}}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load(!0)}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const b=yield q.getImage(this.map._requestManager.transformRequest(m,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(b&&b.data){this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&u.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const S=this.map.painter.context,k=S.gl,K=b.data;u.texture=this.map.painter.getTileTexture(K.width),u.texture?u.texture.update(K,{useMipmap:!0}):(u.texture=new a.T(S,K,k.RGBA,{useMipmap:!0}),u.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST)),u.state="loaded"}}catch(b){if(delete u.abortController,u.aborted)u.state="unloaded";else if(b)throw u.state="errored",b}}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)}))}hasTransition(){return!1}}class Fn extends Mi{constructor(u,m,b,S){super(u,m,b,S),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b=this.map._requestManager.transformRequest(m,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const S=yield q.getImage(b,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(S&&S.data){const k=S.data;this.map._refreshExpiredTiles&&(S.cacheControl||S.expires)&&u.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const K=a.b(k)&&a.$()?k:yield this.readImageNow(k),N={type:this.type,uid:u.uid,source:this.id,rawImageData:K,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const H=yield u.actor.sendAsync({type:"LDT",data:N});u.dem=H,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(S){if(delete u.abortController,u.aborted)u.state="unloaded";else if(S)throw u.state="errored",S}}))}readImageNow(u){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.a0()){const m=u.width+2,b=u.height+2;try{return new a.R({width:m,height:b},yield a.a1(u,-1,-1,m,b))}catch{}}return E.getImageData(u,1)}))}_getNeighboringTiles(u){const m=u.canonical,b=Math.pow(2,m.z),S=(m.x-1+b)%b,k=m.x===0?u.wrap-1:u.wrap,K=(m.x+1+b)%b,N=m.x+1===b?u.wrap+1:u.wrap,H={};return H[new a.a2(u.overscaledZ,k,m.z,S,m.y).key]={backfilled:!1},H[new a.a2(u.overscaledZ,N,m.z,K,m.y).key]={backfilled:!1},m.y>0&&(H[new a.a2(u.overscaledZ,k,m.z,S,m.y-1).key]={backfilled:!1},H[new a.a2(u.overscaledZ,u.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},H[new a.a2(u.overscaledZ,N,m.z,K,m.y-1).key]={backfilled:!1}),m.y+1<b&&(H[new a.a2(u.overscaledZ,k,m.z,S,m.y+1).key]={backfilled:!1},H[new a.a2(u.overscaledZ,u.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},H[new a.a2(u.overscaledZ,N,m.z,K,m.y+1).key]={backfilled:!1}),H}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))}))}}function Ln(I){return I.type==="GeometryCollection"?I.geometries.map((u=>u.coordinates)).flat(1/0):I.coordinates.flat(1/0)}function In(I){const u=new nn;let m;switch(I.type){case"FeatureCollection":m=I.features.map((b=>Ln(b.geometry))).flat(1/0);break;case"Feature":m=Ln(I.geometry);break;default:m=Ln(I)}if(m.length==0)return u;for(let b=0;b<m.length-1;b+=2)u.extend([m[b],m[b+1]]);return u}class oi extends a.E{constructor(u,m,b,S){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:m.data},this.actor=b.getActor(),this.setEventedParent(S),this._data=typeof m.data=="string"?{url:m.data}:{geojson:m.data},this._options=a.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId,m.clusterMaxZoom!==void 0&&this.maxzoom<=m.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${m.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(m.buffer!==void 0?m.buffer:128),tolerance:this._pixelsToTileUnits(m.tolerance!==void 0?m.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(m.clusterMaxZoom),minPoints:Math.max(2,m.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(m.clusterRadius||50),log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(u){return u*(a.a5/this.tileSize)}_getClusterMaxZoom(u){const m=u?Math.round(u):this.maxzoom-1;return Number.isInteger(u)||u===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${u}" rounded to "${m}"`),m}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(u){this.map=u,this.load()}setData(u,m){this._data=typeof u=="string"?{url:u}:{geojson:u},this._pendingWorkerUpdate={data:u};const b=this._updateWorkerData();return m?b:this}updateData(u,m){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,u);const b=this._updateWorkerData();return m?b:this}getData(){return a._(this,void 0,void 0,(function*(){const u=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:u})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return In(yield this.getData())}))}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(u.clusterRadius)),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(u.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,m,b){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:m,offset:b}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:u,diff:m}=this._pendingWorkerUpdate,b=a.e({type:this.type},this.workerOptions);u!==void 0?(typeof u=="string"?(b.request=this.map._requestManager.transformRequest(E.resolveURL(u),"Source"),b.request.collectResourceTiming=this._collectResourceTiming):b.data=u,this._pendingWorkerUpdate.data=void 0):m&&(b.dataDiff=m,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const S=yield this.actor.sendAsync({type:"LD",data:b});if(this._isUpdatingWorker=!1,this._removed||S.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));m&&this._applyDiff(m);let k=null;S.resourceTiming&&S.resourceTiming[this.id]&&(k=S.resourceTiming[this.id].slice(0));const K={dataType:"source"};this._collectResourceTiming&&k&&k.length>0&&a.e(K,{resourceTiming:k}),this.fire(new a.l("data",Object.assign(Object.assign({},K),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},K),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(m)})))}catch(S){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(S))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(u){const m=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!a.a7(this._data.geojson,m))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:a.a8(this._data.geojson,m)}}this._data.updateable&&a.a9(this._data.updateable,u,m)}_getShouldReloadTileOptions(u){if(this._options.cluster||!u||u.removeAll)return;const{add:m=[],update:b=[],remove:S=[]}=u||{},k=new Set([...b.map((K=>K.id)),...S]);for(const K of k.values())if(typeof K!="number"&&this.promoteId==null)return void a.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...b.map((K=>K.newGeometry)),...m.map((K=>K.geometry))].filter(Boolean).map((K=>In(K))),prevIds:k}}shouldReloadTile(u,{nextBounds:m,prevIds:b}){if(!u.latestFeatureIndex)return u.state!=="unloaded";const S=u.latestFeatureIndex.loadVTLayers();for(let H=0;H<u.latestFeatureIndex.featureIndexArray.length;H++){const se=u.latestFeatureIndex.featureIndexArray.get(H),ce=S[a.aa].feature(se.featureIndex),ye=u.latestFeatureIndex.getId(ce,a.aa);if(b.has(ye))return!0}const{buffer:k,extent:K}=this.workerOptions.geojsonVtOptions,N=(function({x:H,y:se,z:ce},ye=0){const ge=a.a3((H-ye)/Math.pow(2,ce)),Se=a.a4((se+1+ye)/Math.pow(2,ce)),Le=a.a3((H+1+ye)/Math.pow(2,ce)),Je=a.a4((se-ye)/Math.pow(2,ce));return new nn([ge,Se],[Le,Je])})(u.tileID.canonical,k/K);for(const H of m)if(N.intersects(H))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(u){return a._(this,void 0,void 0,(function*(){const m=u.actor?"RT":"LT";u.actor=this.actor;const b={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};u.abortController=new AbortController;const S=yield this.actor.sendAsync({type:m,data:b},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(S,this.map.painter,m==="RT")}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Tn extends a.E{constructor(u,m,b,S){super(),this.flippedWindingOrder=!1,this.id=u,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=m}load(u){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const m=yield q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,m&&m.data&&(this.image=m.data,u&&(this.coordinates=u),this._finishLoading())}catch(m){this._request=null,this._loaded=!0,a.Z(m)||this.fire(new a.k(m))}}))}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const m=u.map(a.ab.fromLngLat);var b;return this.tileID=(function(S){const k=a.ac.fromPoints(S),K=k.width(),N=k.height(),H=Math.max(K,N),se=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),ce=Math.pow(2,se);return new a.ae(se,Math.floor((k.minX+k.maxX)/2*ce),Math.floor((k.minY+k.maxY)/2*ce))})(m),this.terrainTileRanges=this._getOverlappingTileRanges(m),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=m.map((S=>this.tileID.getTilePoint(S)._round())),this.flippedWindingOrder=((b=this.tileCoords)[1].x-b[0].x)*(b[2].y-b[0].y)-(b[1].y-b[0].y)*(b[2].x-b[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this.texture||(this.texture=new a.T(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let b=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,b=!0)}b&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(u){const{minX:m,minY:b,maxX:S,maxY:k}=a.ac.fromPoints(u),K={};for(let N=0;N<=a.ad;N++){const H=Math.pow(2,N),se=Math.floor(m*H),ce=Math.floor(b*H),ye=Math.floor(S*H),ge=Math.floor(k*H);K[N]={minTileX:se,minTileY:ce,maxTileX:ye,maxTileY:ge}}return K}}class je extends Tn{constructor(u,m,b,S){super(u,m,b,S),this.roundZoom=!0,this.type="video",this.options=m}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const m of u.urls)this.urls.push(this.map._requestManager.transformRequest(m,"Source").url);try{const m=yield a.af(this.urls);if(this._loaded=!0,!m)return;this.video=m,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(m){this.fire(new a.k(m))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const m=this.video.seekable;u<m.start(0)||u>m.end(0)?this.fire(new a.k(new a.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,m=u.gl;this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(u,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let b=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,b=!0)}b&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class $ extends Tn{constructor(u,m,b,S){super(u,m,b,S),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some((k=>!Array.isArray(k)||k.length!==2||k.some((K=>typeof K!="number"))))||this.fire(new a.k(new a.ag(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ag(`sources.${u}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new a.k(new a.ag(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ag(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ag(`sources.${u}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const m=this.map.painter.context,b=m.gl;this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(m,this.canvas,b.RGBA,{premultiply:!0}),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE));let S=!1;for(const k in this.tiles){const K=this.tiles[k];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture,S=!0)}S&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const j={},Q=I=>{switch(I){case"geojson":return oi;case"image":return Tn;case"raster":return Mi;case"raster-dem":return Fn;case"vector":return Wn;case"video":return je;case"canvas":return $}return j[I]},Ae="RTLPluginLoaded";class Me extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=He()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch((m=>{throw this.status="error",m}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return a._(this,arguments,void 0,(function*(m,b=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(m),!this.url)throw new Error(`requested url ${m} is invalid`);if(this.status==="unavailable"){if(!b)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Ae))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ne=null;function We(){return Ne||(Ne=new Me),Ne}var it,bt;(function(I){I[I.Base=0]="Base",I[I.Parent=1]="Parent"})(it||(it={})),(function(I){I[I.Departing=0]="Departing",I[I.Incoming=1]="Incoming"})(bt||(bt={}));class Ye{constructor(u,m){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=u,this.uid=a.ah(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(u){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(u||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:u,fadingDirection:m,fadingParentID:b,fadeEndTime:S}){this.resetFadeLogic(),this.fadingRole=u,this.fadingDirection=m,this.fadingParentID=b,this.fadeEndTime=S}setSelfFadeLogic(u){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=u}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=U(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,m,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData,this.latestFeatureIndex.encoding=u.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=(function(S,k){const K={};if(!k)return K;for(const N of S){const H=N.layerIds.map((se=>k.getLayer(se))).filter(Boolean);if(H.length!==0){N.layers=H,N.stateDependentLayerIds&&(N.stateDependentLayers=N.stateDependentLayerIds.map((se=>H.filter((ce=>ce.id===se))[0])));for(const se of H)K[se.id]=N}}return K})(u.buckets,m?.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const k=this.buckets[S];if(k instanceof a.aj){if(this.hasSymbolBuckets=!0,!b)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const k=this.buckets[S];if(k instanceof a.aj&&k.hasRTLText){this.hasRTLText=!0,We().lazyLoad();break}}this.queryPadding=0;for(const S in this.buckets){const k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(S).queryRadius(k))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage),this.dashPositions=u.dashPositions}else this.collisionBoxArray=new a.ai}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const b in this.buckets){const S=this.buckets[b];S.uploadPending()&&S.upload(u)}const m=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(u,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(u,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,m,b,S,k,K,N,H,se,ce,ye){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:k,scale:K,tileSize:this.tileSize,pixelPosMatrix:ce,transform:H,params:N,queryPadding:this.queryPadding*se,getElevation:ye},u,m,b):{}}querySourceFeatures(u,m){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const S=b.loadVTLayers(),k=m&&m.sourceLayer?m.sourceLayer:"",K=S[a.aa]||S[k];if(!K)return;const N=a.ak(m?.filter,m?.globalState),{z:H,x:se,y:ce}=this.tileID.canonical,ye={z:H,x:se,y:ce};for(let ge=0;ge<K.length;ge++){const Se=K.feature(ge);if(N.needGeometry){const nt=a.al(Se,!0);if(!N.filter(new a.H(this.tileID.overscaledZ),nt,this.tileID.canonical))continue}else if(!N.filter(new a.H(this.tileID.overscaledZ),Se))continue;const Le=b.getId(Se,k),Je=new a.am(Se,H,se,ce,Le);Je.tile=ye,u.push(Je)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const m=this.expirationTime;if(u.cacheControl){const b=a.an(u.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const b=Date.now();let S=!1;if(this.expirationTime>b)S=!1;else if(m)if(this.expirationTime<m)S=!0;else{const k=this.expirationTime-m;k?this.expirationTime=b+Math.max(k,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!m.style.hasLayer(S))continue;const k=this.buckets[S],K=k.layers[0].sourceLayer||a.aa,N=b[K],H=u[K];if(!N||!H||Object.keys(H).length===0)continue;k.update(H,N,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const se=m&&m.style&&m.style.getLayer(S);se&&(this.queryPadding=Math.max(this.queryPadding,se.queryRadius(k)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(u){this.symbolFadeHoldUntil=U()+u}setDependencies(u,m){const b={};for(const S of m)b[S]=!0;this.dependencies[u]=b}hasDependency(u,m){for(const b of u){const S=this.dependencies[b];if(S){for(const k of m)if(S[k])return!0}}return!1}}class at{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,m,b){const S=String(m);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][S]=this.stateChanges[u][S]||{},a.e(this.stateChanges[u][S],b),this.deletedStates[u]===null){this.deletedStates[u]={};for(const k in this.state[u])k!==S&&(this.deletedStates[u][k]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][S]===null){this.deletedStates[u][S]={};for(const k in this.state[u][S])b[k]||(this.deletedStates[u][S][k]=null)}else for(const k in b)this.deletedStates[u]&&this.deletedStates[u][S]&&this.deletedStates[u][S][k]===null&&delete this.deletedStates[u][S][k]}removeFeatureState(u,m,b){if(this.deletedStates[u]===null)return;const S=String(m);if(this.deletedStates[u]=this.deletedStates[u]||{},b&&m!==void 0)this.deletedStates[u][S]!==null&&(this.deletedStates[u][S]=this.deletedStates[u][S]||{},this.deletedStates[u][S][b]=null);else if(m!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][S])for(b in this.deletedStates[u][S]={},this.stateChanges[u][S])this.deletedStates[u][S][b]=null;else this.deletedStates[u][S]=null;else this.deletedStates[u]=null}getState(u,m){const b=String(m),S=a.e({},(this.state[u]||{})[b],(this.stateChanges[u]||{})[b]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const k=this.deletedStates[u][m];if(k===null)return{};for(const K in k)delete S[K]}return S}initializeTileState(u,m){u.setFeatureState(this.state,m)}coalesceChanges(u,m){const b={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const k={};for(const K in this.stateChanges[S])this.state[S][K]||(this.state[S][K]={}),a.e(this.state[S][K],this.stateChanges[S][K]),k[K]=this.state[S][K];b[S]=k}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const k={};if(this.deletedStates[S]===null)for(const K in this.state[S])k[K]={},this.state[S][K]={};else for(const K in this.deletedStates[S]){if(this.deletedStates[S][K]===null)this.state[S][K]={};else for(const N of Object.keys(this.deletedStates[S][K]))delete this.state[S][K][N];k[K]=this.state[S][K]}b[S]=b[S]||{},a.e(b[S],k)}this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0&&u.setFeatureState(b,m)}}const C=89.25;function Ut(I,u){const m=a.ao(u.lat,-a.ap,a.ap);return new a.P(a.Y(u.lng)*I,a.X(m)*I)}function gn(I,u){return new a.ab(u.x/I,u.y/I).toLngLat()}function bn(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(a.aq(90-I.pitch)),Math.tan(a.aq(C-I.pitch)))}function _n(I,u){const m=I.canonical,b=u/a.ar(m.z),S=m.x+Math.pow(2,m.z)*I.wrap,k=a.as(new Float64Array(16));return a.O(k,k,[S*b,m.y*b,0]),a.Q(k,k,[b/a.a5,b/a.a5,1]),k}function Mt(I,u,m,b,S){const k=a.ab.fromLngLat(I,u),K=S*a.at(1,I.lat),{x:N,y:H,z:se}=xi(m,b);return new a.ab(k.x+K*-N,k.y+K*-H,k.z+K*-se)}function xi(I,u){const m=a.aq(I),b=a.aq(u),S=Math.cos(-m),k=Math.sin(m);return{x:k*Math.sin(b),y:-k*Math.cos(b),z:S}}function ji(I,u,m){const b=u.intersectsFrustum(I);if(!m||b===0)return b;const S=u.intersectsPlane(m);return S===0?0:b===2&&S===2?2:1}function Qn(I,u,m){let b=0;const S=(m-u)/10;for(let k=0;k<10;k++)b+=S*Math.pow(Math.cos(u+(k+.5)/10*(m-u)),I);return b}function Zn(I,u){return function(m,b,S,k,K){const N=2*((I-1)/a.au(Math.cos(a.aq(C-K))/Math.cos(a.aq(C)))-1),H=Math.acos(S/k),se=2*Qn(N-1,0,a.aq(K/2)),ce=Math.min(a.aq(C),H+a.aq(K/2)),ye=Qn(N-1,Math.min(ce,H-a.aq(K/2)),ce),ge=Math.atan(b/S),Se=Math.hypot(b,S);let Le=m;return Le+=a.au(k/Se/Math.max(.5,Math.cos(a.aq(K/2)))),Le+=N*a.au(Math.cos(ge))/2,Le-=a.au(Math.max(1,ye/se/u))/2,Le}}const Yi=Zn(9.314,3);function qi(I,u){const m=(u.roundZoom?Math.round:Math.floor)(I.zoom+a.au(I.tileSize/u.tileSize));return Math.max(0,m)}function Ui(I,u){const m=I.getCameraFrustum(),b=I.getClippingPlane(),S=I.screenPointToMercatorCoordinate(I.getCameraPoint()),k=a.ab.fromLngLat(I.center,I.elevation);S.z=k.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const K=I.getCoveringTilesDetailsProvider(),N=K.allowVariableZoom(I,u),H=qi(I,u),se=u.minzoom||0,ce=u.maxzoom!==void 0?u.maxzoom:I.maxZoom,ye=Math.min(Math.max(0,H),ce),ge=Math.pow(2,ye),Se=[ge*S.x,ge*S.y,0],Le=[ge*k.x,ge*k.y,0],Je=Math.hypot(k.x-S.x,k.y-S.y),nt=Math.abs(k.z-S.z),tt=Math.hypot(Je,nt),rt=pt=>({zoom:0,x:0,y:0,wrap:pt,fullyVisible:!1}),ft=[],lt=[];if(I.renderWorldCopies&&K.allowWorldCopies())for(let pt=1;pt<=3;pt++)ft.push(rt(-pt)),ft.push(rt(pt));for(ft.push(rt(0));ft.length>0;){const pt=ft.pop(),_t=pt.x,At=pt.y;let Tt=pt.fullyVisible;const zt={x:_t,y:At,z:pt.zoom},jt=K.getTileBoundingVolume(zt,pt.wrap,I.elevation,u);if(!Tt){const Pn=ji(m,jt,b);if(Pn===0)continue;Tt=Pn===2}const Wt=K.distanceToTile2d(S.x,S.y,zt,jt);let qt=H;N&&(qt=(u.calculateTileZoom||Yi)(I.zoom+a.au(I.tileSize/u.tileSize),Wt,nt,tt,I.fov)),qt=(u.roundZoom?Math.round:Math.floor)(qt),qt=Math.max(0,qt);const fn=Math.min(qt,ce);if(pt.wrap=K.getWrap(k,zt,pt.wrap),pt.zoom>=fn){if(pt.zoom<se)continue;const Pn=ye-pt.zoom,hn=Se[0]-.5-(_t<<Pn),ui=Se[1]-.5-(At<<Pn),or=u.reparseOverscaled?Math.max(pt.zoom,qt):pt.zoom;lt.push({tileID:new a.a2(pt.zoom===ce?or:pt.zoom,pt.wrap,pt.zoom,_t,At),distanceSq:a.av([Le[0]-.5-_t,Le[1]-.5-At]),tileDistanceToCamera:Math.sqrt(hn*hn+ui*ui)})}else for(let Pn=0;Pn<4;Pn++)ft.push({zoom:pt.zoom+1,x:(_t<<1)+Pn%2,y:(At<<1)+(Pn>>1),wrap:pt.wrap,fullyVisible:Tt})}return lt.sort(((pt,_t)=>pt.distanceSq-_t.distanceSq)).map((pt=>pt.tileID))}const Vi=a.ac.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function Ki(I){return I==="raster"||I==="image"||I==="video"}function Ir(I,u,m,b,S,k,K){if(!u.hasData())return!1;const{tileID:N,fadingRole:H,fadingDirection:se,fadingParentID:ce}=u;if(H===it.Base&&se===bt.Incoming&&ce)return m[ce.key]=ce,!0;const ye=Math.max(N.overscaledZ-S,k);for(let ge=N.overscaledZ-1;ge>=ye;ge--){const Se=N.scaledTo(ge),Le=I.getLoadedTile(Se);if(Le)return u.setCrossFadeLogic({fadingRole:it.Base,fadingDirection:bt.Incoming,fadingParentID:Le.tileID,fadeEndTime:b+K}),Le.setCrossFadeLogic({fadingRole:it.Parent,fadingDirection:bt.Departing,fadeEndTime:b+K}),m[Se.key]=Se,!0}return!1}function Eo(I,u,m,b,S,k){if(!u.hasData())return!1;const K=u.tileID.children(S);let N=cn(I,u,K,m,b,S,k);if(N)return!0;for(const H of K)cn(I,u,H.children(S),m,b,S,k)&&(N=!0);return N}function cn(I,u,m,b,S,k,K){if(m[0].overscaledZ>=k)return!1;let N=!1;for(const H of m){const se=I.getLoadedTile(H);if(!se)continue;const{fadingRole:ce,fadingDirection:ye,fadingParentID:ge}=se;ce===it.Base&&ye===bt.Departing&&ge||(se.setCrossFadeLogic({fadingRole:it.Base,fadingDirection:bt.Departing,fadingParentID:u.tileID,fadeEndTime:S+K}),u.setCrossFadeLogic({fadingRole:it.Parent,fadingDirection:bt.Incoming,fadeEndTime:S+K})),b[H.key]=H,N=!0}return N}function rr(I,u,m,b){const S=I.tileID;return!!I.selfFading||!I.hasData()&&!!u.has(S)&&(I.setSelfFadeLogic(m+b),!0)}function Yo(I,u){var m;I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let b=u.tileID.canonical.x-I.tileID.canonical.x;const S=u.tileID.canonical.y-I.tileID.canonical.y,k=Math.pow(2,I.tileID.canonical.z),K=u.tileID.key;b===0&&S===0||Math.abs(S)>1||(Math.abs(b)>1&&(Math.abs(b+k)===1?b+=k:Math.abs(b-k)===1&&(b-=k)),u.dem&&I.dem&&(I.dem.backfillBorder(u.dem,b,S),!((m=I.neighboringTiles)===null||m===void 0)&&m[K]&&(I.neighboringTiles[K].backfilled=!0)))}class aa{constructor(){this._tiles={}}handleWrapJump(u){const m={};for(const b in this._tiles){const S=this._tiles[b];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),m[S.tileID.key]=S}this._tiles=m}setFeatureState(u,m){for(const b in this._tiles)this._tiles[b].setFeatureState(u,m)}getAllTiles(){return Object.values(this._tiles)}getAllIds(u=!1){return u?Object.values(this._tiles).map((m=>m.tileID)).sort(a.ax).map((m=>m.key)):Object.keys(this._tiles)}getTileById(u){return this._tiles[u]}setTile(u,m){this._tiles[u]=m}deleteTileById(u){delete this._tiles[u]}getLoadedTile(u){const m=this.getTileById(u.key);return m?.hasData()?m:null}isIdRenderable(u,m=!1){var b;return(b=this.getTileById(u))===null||b===void 0?void 0:b.isRenderable(m)}getRenderableIds(u=0,m){const b=[];for(const S of this.getAllIds())this.isIdRenderable(S,m)&&b.push(this.getTileById(S));return m?b.sort(((S,k)=>{const K=S.tileID,N=k.tileID,H=new a.P(K.canonical.x,K.canonical.y)._rotate(-u),se=new a.P(N.canonical.x,N.canonical.y)._rotate(-u);return K.overscaledZ-N.overscaledZ||se.y-H.y||se.x-H.x})).map((S=>S.tileID.key)):b.map((S=>S.tileID)).sort(a.ax).map((S=>S.key))}}class lo extends a.E{constructor(u,m,b){super(),this.id=u,this.dispatcher=b,this.on("data",(S=>this._dataHandler(S))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((S,k,K,N)=>{const H=new(Q(k.type))(S,k,K,N);if(H.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${H.id}`);return H})(u,m,b,this),this._inViewTiles=new aa,this._outOfViewCache=new a.ay(0,(S=>this._unloadTile(S))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new at,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){for(const m of this._inViewTiles.getAllTiles())m.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u),this._inViewTiles=new aa}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u of this._inViewTiles.getAllTiles())if(u.state!=="loaded"&&u.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,m,b){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,m,b)}catch(S){u.state="errored",S.status!==404?this._source.fire(new a.k(S,{tile:u})):this.update(this.transform,this.terrain)}}))}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new a.l("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const m of this._inViewTiles.getAllTiles())m.upload(u),m.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(u){var m;return this._inViewTiles.getRenderableIds((m=this.transform)===null||m===void 0?void 0:m.bearingInRadians,u)}hasRenderableParent(u){const m=u.overscaledZ-1;if(m>=this._source.minzoom){const b=this.getLoadedTile(u.scaledTo(m));if(b)return this._inViewTiles.isIdRenderable(b.tileID.key)}return!1}reload(u,m=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const b of this._inViewTiles.getAllIds()){const S=this._inViewTiles.getTileById(b);m&&!this._source.shouldReloadTile(S,m)||(u?this._reloadTile(b,"expired"):S.state!=="errored"&&this._reloadTile(b,"reloading"))}}}_reloadTile(u,m){return a._(this,void 0,void 0,(function*(){const b=this._inViewTiles.getTileById(u);b&&(b.state!=="loading"&&(b.state=m),yield this._loadTile(b,u,m))}))}_tileLoaded(u,m,b){u.timeAdded=U(),u.selfFading&&(u.fadeEndTime=u.timeAdded+this._rasterFadeDuration),b==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(m,u),this.getSource().type==="raster-dem"&&u.dem&&(function(S,k){var K,N;const H=k.getRenderableIds();for(const se of H){if(!S.neighboringTiles||!S.neighboringTiles[se])continue;const ce=k.getTileById(se);S.neighboringTiles[se].backfilled||Yo(S,ce),!((N=(K=ce.neighboringTiles)===null||K===void 0?void 0:K[S.tileID.key])===null||N===void 0)&&N.backfilled||Yo(ce,S)}})(u,this._inViewTiles),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:u,coord:u.tileID}))}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._inViewTiles.getTileById(u)}_retainLoadedChildren(u,m){const b=this._getLoadedDescendents(m),S=new Set;for(const k of m){const K=b[k.key];if(!K?.length){S.add(k);continue}const N=k.overscaledZ+lo.maxOverzooming,H=K.filter((ye=>ye.tileID.overscaledZ<=N));if(!H.length){S.add(k);continue}const se=Math.min(...H.map((ye=>ye.tileID.overscaledZ))),ce=H.filter((ye=>ye.tileID.overscaledZ===se)).map((ye=>ye.tileID));for(const ye of ce)u[ye.key]=ye;this._areDescendentsComplete(ce,se,k.overscaledZ)||S.add(k)}return S}_getLoadedDescendents(u){var m;const b={};for(const S of this._inViewTiles.getAllTiles().filter((k=>k.hasData())))for(const k of u)S.tileID.isChildOf(k)&&(b[m=k.key]||(b[m]=[])).push(S);return b}_areDescendentsComplete(u,m,b){return u.length===1&&u[0].isOverscaled()?u[0].overscaledZ===m:Math.pow(4,m-b)===u.length}getLoadedTile(u){return this._inViewTiles.getLoadedTile(u)}updateCacheSize(u){const m=Math.ceil(u.width/this._source.tileSize)+1,b=Math.ceil(u.height/this._source.tileSize)+1,S=Math.floor(m*b*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._outOfViewCache.setMaxSize(k)}handleWrapJump(u){const m=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);this._prevLng=u,m&&(this._inViewTiles.handleWrapJump(m),this._resetTileReloadTimers())}update(u,m){if(!this._sourceLoaded||this._paused)return;let b;this.transform=u,this.terrain=m,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?b=u.getVisibleUnwrappedCoordinates(this._source.tileID).map((H=>new a.a2(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y))):(b=Ui(u,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?u.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(b=b.filter((H=>this._source.hasTile(H))))):b=[],this.usedForTerrain&&(b=this._addTerrainIdealTiles(b));const S=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=qi(u,this._source),K=this._updateRetainedTiles(b,k),N=Ki(this._source.type);N&&this._rasterFadeDuration>0&&!m&&(function(H,se,ce,ye,ge,Se,Le){const Je=U(),nt=a.aw(se);for(const tt of se){const rt=H.getTileById(tt.key);rt.fadingDirection!==bt.Departing&&rt.fadeOpacity!==0||rt.resetFadeLogic(),Ir(H,rt,ce,Je,ye,ge,Le)||Eo(H,rt,ce,Je,Se,Le)||rr(rt,nt,Je,Le)||rt.resetFadeLogic()}})(this._inViewTiles,b,K,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),N?this._cleanUpRasterTiles(K):this._cleanUpVectorTiles(K)}_cleanUpRasterTiles(u){for(const m of this._inViewTiles.getAllIds())u[m]||this._removeTile(m)}_cleanUpVectorTiles(u){for(const m of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(m);u[m]?b.clearSymbolFadeHold():b.hasSymbolBuckets?b.holdingForSymbolFade()?b.symbolFadeFinished()&&this._removeTile(m):b.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(m)}}_addTerrainIdealTiles(u){const m=[];for(const b of u)if(b.canonical.z>this._source.minzoom){const S=b.scaledTo(b.canonical.z-1);m.push(S);const k=b.scaledTo(Math.max(this._source.minzoom,Math.min(b.canonical.z,5)));m.push(k)}return u.concat(m)}releaseSymbolFadeTiles(){for(const u of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(u).holdingForSymbolFade()&&this._removeTile(u)}_updateRetainedTiles(u,m){var b;const S=new Set;for(const se of u)this._addTile(se).hasData()||S.add(se);const k=u.reduce(((se,ce)=>(se[ce.key]=ce,se)),{}),K=this._retainLoadedChildren(k,S),N={},H=Math.max(m-lo.maxUnderzooming,this._source.minzoom);for(const se of K){let ce=this._inViewTiles.getTileById(se.key),ye=ce?.wasRequested();for(let ge=se.overscaledZ-1;ge>=H;--ge){const Se=se.scaledTo(ge);if(N[Se.key])break;if(N[Se.key]=!0,ce=this.getTile(Se),!ce&&ye&&(ce=this._addTile(Se)),ce){const Le=ce.hasData();if((Le||!(!((b=this.map)===null||b===void 0)&&b.cancelPendingTileRequestsWhileZooming)||ye)&&(k[Se.key]=Se),ye=ce.wasRequested(),Le)break}}}return k}_addTile(u){let m=this._inViewTiles.getTileById(u.key);if(m)return m;m=this._outOfViewCache.getAndRemove(u),m&&(m.resetFadeLogic(),this._setTileReloadTimer(u.key,m),m.tileID=u,this._state.initializeTileState(m,this.map?this.map.painter:null));const b=m;return m||(m=new Ye(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(m,u.key,m.state)),m.uses++,this._inViewTiles.setTile(u.key,m),b||this._source.fire(new a.l("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(u,m){this._clearTileReloadTimer(u);const b=m.getExpiryTimeout();b&&(this._timers[u]=setTimeout((()=>{this._reloadTile(u,"expired"),delete this._timers[u]}),b))}_clearTileReloadTimer(u){const m=this._timers[u];m&&(clearTimeout(m),delete this._timers[u])}_resetTileReloadTimers(){for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(u);this._setTileReloadTimer(u,m)}}refreshTiles(u){for(const m of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(m);(this._inViewTiles.isIdRenderable(m)||b.state=="errored")&&u.some((S=>S.equals(b.tileID.canonical)))&&this._reloadTile(m,"expired")}}_removeTile(u){const m=this._inViewTiles.getTileById(u);m&&(m.uses--,this._inViewTiles.deleteTileById(u),this._clearTileReloadTimer(u),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._outOfViewCache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}_dataHandler(u){u.dataType==="source"&&(u.sourceDataType!=="metadata"?u.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(u.sourceDataChanged,u.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u of this._inViewTiles.getAllIds())this._removeTile(u);this._outOfViewCache.reset()}tilesIn(u,m,b){const S=[],k=this.transform;if(!k)return S;const K=k.getCoveringTilesDetailsProvider().allowWorldCopies(),N=b?k.getCameraQueryGeometry(u):u,H=Se=>k.screenPointToMercatorCoordinate(Se,this.terrain),se=this.transformBbox(u,H,!K),ce=this.transformBbox(N,H,!K),ye=this.getIds(),ge=a.ac.fromPoints(ce);for(let Se=0;Se<ye.length;Se++){const Le=this._inViewTiles.getTileById(ye[Se]);if(Le.holdingForSymbolFade())continue;const Je=K?[Le.tileID]:[Le.tileID.unwrapTo(-1),Le.tileID.unwrapTo(0)],nt=Math.pow(2,k.zoom-Le.tileID.overscaledZ),tt=m*Le.queryPadding*a.a5/Le.tileSize/nt;for(const rt of Je){const ft=ge.map((lt=>rt.getTilePoint(new a.ab(lt.x,lt.y))));if(ft.expandBy(tt),ft.intersects(Vi)){const lt=se.map((_t=>rt.getTilePoint(_t))),pt=ce.map((_t=>rt.getTilePoint(_t)));S.push({tile:Le,tileID:K?rt:rt.unwrapTo(0),queryGeometry:lt,cameraQueryGeometry:pt,scale:nt})}}}return S}transformBbox(u,m,b){let S=u.map(m);if(b){const k=a.ac.fromPoints(u);k.shrinkBy(.001*Math.min(k.width(),k.height()));const K=k.map(m);a.ac.fromPoints(S).covers(K)||(S=S.map((N=>N.x>.5?new a.ab(N.x-1,N.y,N.z):N)))}return S}getVisibleCoordinates(u){const m=this.getRenderableIds(u).map((b=>this._inViewTiles.getTileById(b).tileID));return this.transform&&this.transform.populateCache(m),m}hasTransition(){return!!this._source.hasTransition()||!(!Ki(this._source.type)||!(function(u,m){if(m<=0)return!1;const b=U();for(const S of u.getAllTiles())if(S.fadeEndTime>=b)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(u){this._rasterFadeDuration=u}setFeatureState(u,m,b){this._state.updateState(u=u||a.aa,m,b)}removeFeatureState(u,m,b){this._state.removeFeatureState(u=u||a.aa,m,b)}getFeatureState(u,m){return this._state.getState(u=u||a.aa,m)}setDependencies(u,m,b){const S=this._inViewTiles.getTileById(u);S&&S.setDependencies(m,b)}reloadTilesForDependencies(u,m){for(const b of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(b).hasDependency(u,m)&&this._reloadTile(b,"reloading");this._outOfViewCache.filter((b=>!b.hasDependency(u,m)))}areTilesLoaded(){for(const u of this._inViewTiles.getAllTiles())if(u.state!=="loaded"&&u.state!=="errored")return!1;return!0}}lo.maxUnderzooming=10,lo.maxOverzooming=3;class Dn{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ao(u,0,1);let m=1,b=this._distances[m];const S=u*this.paddedLength+this.padding;for(;b<S&&m<this._distances.length;)b=this._distances[++m];const k=m-1,K=this._distances[k],N=b-K,H=N>0?(S-K)/N:0;return this.points[k].mult(1-H).add(this.points[m].mult(H))}}function er(I,u){let m=!0;return I==="always"||I!=="never"&&u!=="never"||(m=!1),m}class Ai{constructor(u,m,b){const S=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(u/b),this.yCellCount=Math.ceil(m/b);for(let K=0;K<this.xCellCount*this.yCellCount;K++)S.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,b,S,k){this._forEachCell(m,b,S,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(S),this.bboxes.push(k)}insertCircle(u,m,b,S){this._forEachCell(m-S,b-S,m+S,b+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(b),this.circles.push(S)}_insertBoxCell(u,m,b,S,k,K){this.boxCells[k].push(K)}_insertCircleCell(u,m,b,S,k,K){this.circleCells[k].push(K)}_query(u,m,b,S,k,K,N){if(b<0||u>this.width||S<0||m>this.height)return[];const H=[];if(u<=0&&m<=0&&this.width<=b&&this.height<=S){if(k)return[{key:null,x1:u,y1:m,x2:b,y2:S}];for(let se=0;se<this.boxKeys.length;se++)H.push({key:this.boxKeys[se],x1:this.bboxes[4*se],y1:this.bboxes[4*se+1],x2:this.bboxes[4*se+2],y2:this.bboxes[4*se+3]});for(let se=0;se<this.circleKeys.length;se++){const ce=this.circles[3*se],ye=this.circles[3*se+1],ge=this.circles[3*se+2];H.push({key:this.circleKeys[se],x1:ce-ge,y1:ye-ge,x2:ce+ge,y2:ye+ge})}}else this._forEachCell(u,m,b,S,this._queryCell,H,{hitTest:k,overlapMode:K,seenUids:{box:{},circle:{}}},N);return H}query(u,m,b,S){return this._query(u,m,b,S,!1,null)}hitTest(u,m,b,S,k,K){return this._query(u,m,b,S,!0,k,K).length>0}hitTestCircle(u,m,b,S,k){const K=u-b,N=u+b,H=m-b,se=m+b;if(N<0||K>this.width||se<0||H>this.height)return!1;const ce=[];return this._forEachCell(K,H,N,se,this._queryCellCircle,ce,{hitTest:!0,overlapMode:S,circle:{x:u,y:m,radius:b},seenUids:{box:{},circle:{}}},k),ce.length>0}_queryCell(u,m,b,S,k,K,N,H){const{seenUids:se,hitTest:ce,overlapMode:ye}=N,ge=this.boxCells[k];if(ge!==null){const Le=this.bboxes;for(const Je of ge)if(!se.box[Je]){se.box[Je]=!0;const nt=4*Je,tt=this.boxKeys[Je];if(u<=Le[nt+2]&&m<=Le[nt+3]&&b>=Le[nt+0]&&S>=Le[nt+1]&&(!H||H(tt))&&(!ce||!er(ye,tt.overlapMode))&&(K.push({key:tt,x1:Le[nt],y1:Le[nt+1],x2:Le[nt+2],y2:Le[nt+3]}),ce))return!0}}const Se=this.circleCells[k];if(Se!==null){const Le=this.circles;for(const Je of Se)if(!se.circle[Je]){se.circle[Je]=!0;const nt=3*Je,tt=this.circleKeys[Je];if(this._circleAndRectCollide(Le[nt],Le[nt+1],Le[nt+2],u,m,b,S)&&(!H||H(tt))&&(!ce||!er(ye,tt.overlapMode))){const rt=Le[nt],ft=Le[nt+1],lt=Le[nt+2];if(K.push({key:tt,x1:rt-lt,y1:ft-lt,x2:rt+lt,y2:ft+lt}),ce)return!0}}}return!1}_queryCellCircle(u,m,b,S,k,K,N,H){const{circle:se,seenUids:ce,overlapMode:ye}=N,ge=this.boxCells[k];if(ge!==null){const Le=this.bboxes;for(const Je of ge)if(!ce.box[Je]){ce.box[Je]=!0;const nt=4*Je,tt=this.boxKeys[Je];if(this._circleAndRectCollide(se.x,se.y,se.radius,Le[nt+0],Le[nt+1],Le[nt+2],Le[nt+3])&&(!H||H(tt))&&!er(ye,tt.overlapMode))return K.push(!0),!0}}const Se=this.circleCells[k];if(Se!==null){const Le=this.circles;for(const Je of Se)if(!ce.circle[Je]){ce.circle[Je]=!0;const nt=3*Je,tt=this.circleKeys[Je];if(this._circlesCollide(Le[nt],Le[nt+1],Le[nt+2],se.x,se.y,se.radius)&&(!H||H(tt))&&!er(ye,tt.overlapMode))return K.push(!0),!0}}}_forEachCell(u,m,b,S,k,K,N,H){const se=this._convertToXCellCoord(u),ce=this._convertToYCellCoord(m),ye=this._convertToXCellCoord(b),ge=this._convertToYCellCoord(S);for(let Se=se;Se<=ye;Se++)for(let Le=ce;Le<=ge;Le++)if(k.call(this,u,m,b,S,this.xCellCount*Le+Se,K,N,H))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,b,S,k,K){const N=S-u,H=k-m,se=b+K;return se*se>N*N+H*H}_circleAndRectCollide(u,m,b,S,k,K,N){const H=(K-S)/2,se=Math.abs(u-(S+H));if(se>H+b)return!1;const ce=(N-k)/2,ye=Math.abs(m-(k+ce));if(ye>ce+b)return!1;if(se<=H||ye<=ce)return!0;const ge=se-H,Se=ye-ce;return ge*ge+Se*Se<=b*b}}function ja(I,u,m){const b=a.N();if(!I){const{vecSouth:ye,vecEast:ge}=Sl(u),Se=d();Se[0]=ge[0],Se[1]=ge[1],Se[2]=ye[0],Se[3]=ye[1],S=Se,(ce=(K=(k=Se)[0])*(se=k[3])-(H=k[2])*(N=k[1]))&&(S[0]=se*(ce=1/ce),S[1]=-N*ce,S[2]=-H*ce,S[3]=K*ce),b[0]=Se[0],b[1]=Se[1],b[4]=Se[2],b[5]=Se[3]}var S,k,K,N,H,se,ce;return a.Q(b,b,[1/m,1/m,1]),b}function _A(I,u,m,b){if(I){const S=a.N();if(!u){const{vecSouth:k,vecEast:K}=Sl(m);S[0]=K[0],S[1]=K[1],S[4]=k[0],S[5]=k[1]}return a.Q(S,S,[b,b,1]),S}return m.pixelsToClipSpaceMatrix}function Sl(I){const u=Math.cos(I.rollInRadians),m=Math.sin(I.rollInRadians),b=Math.cos(I.pitchInRadians),S=Math.cos(I.bearingInRadians),k=Math.sin(I.bearingInRadians),K=a.aD();K[0]=-S*b*m-k*u,K[1]=-k*b*m+S*u;const N=a.aE(K);N<1e-9?a.aF(K):a.aG(K,K,1/N);const H=a.aD();H[0]=S*b*u-k*m,H[1]=k*b*u+S*m;const se=a.aE(H);return se<1e-9?a.aF(H):a.aG(H,H,1/se),{vecEast:H,vecSouth:K}}function Hi(I,u,m,b){let S;b?(S=[I,u,b(I,u),1],a.aI(S,S,m)):(S=[I,u,0,1],Wa(S,S,m));const k=S[3];return{point:new a.P(S[0]/k,S[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}function $u(I,u){return .5+I/u*.5}function fo(I,u){return I.x>=-u[0]&&I.x<=u[0]&&I.y>=-u[1]&&I.y<=u[1]}function Xa(I,u,m,b,S,k,K,N,H,se,ce,ye,ge){const Se=m?I.textSizeData:I.iconSizeData,Le=a.az(Se,u.transform.zoom),Je=[256/u.width*2+1,256/u.height*2+1],nt=m?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;nt.clear();const tt=I.lineVertexArray,rt=m?I.text.placedSymbolArray:I.icon.placedSymbolArray,ft=u.transform.width/u.transform.height;let lt=!1;for(let pt=0;pt<rt.length;pt++){const _t=rt.get(pt);if(_t.hidden||_t.writingMode===a.aA.vertical&&!lt){dl(_t.numGlyphs,nt);continue}lt=!1;const At=new a.P(_t.anchorX,_t.anchorY),Tt={getElevation:ge,pitchedLabelPlaneMatrix:b,lineVertexArray:tt,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:u.transform,tileAnchorPoint:At,unwrappedTileID:H,width:se,height:ce,translation:ye},zt=es(_t.anchorX,_t.anchorY,Tt);if(!fo(zt.point,Je)){dl(_t.numGlyphs,nt);continue}const jt=$u(u.transform.cameraToCenterDistance,zt.signedDistanceFromCamera),Wt=a.aB(Se,Le,_t),qt=k?Wt*u.transform.getPitchedTextCorrection(_t.anchorX,_t.anchorY,H)/jt:Wt*jt,fn=Lo({projectionContext:Tt,pitchedLabelPlaneMatrixInverse:S,symbol:_t,fontSize:qt,flip:!1,keepUpright:K,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:nt,aspectRatio:ft,rotateToLine:N});lt=fn.useVertical,(fn.notEnoughRoom||lt||fn.needsFlipping&&Lo({projectionContext:Tt,pitchedLabelPlaneMatrixInverse:S,symbol:_t,fontSize:qt,flip:!0,keepUpright:K,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:nt,aspectRatio:ft,rotateToLine:N}).notEnoughRoom)&&dl(_t.numGlyphs,nt)}m?I.text.dynamicLayoutVertexBuffer.updateData(nt):I.icon.dynamicLayoutVertexBuffer.updateData(nt)}function El(I,u,m,b,S,k,K,N){const H=k.glyphStartIndex+k.numGlyphs,se=k.lineStartIndex,ce=k.lineStartIndex+k.lineLength,ye=u.getoffsetX(k.glyphStartIndex),ge=u.getoffsetX(H-1),Se=hl(I*ye,m,b,S,k.segment,se,ce,N,K);if(!Se)return null;const Le=hl(I*ge,m,b,S,k.segment,se,ce,N,K);return Le?N.projectionCache.anyProjectionOccluded?null:{first:Se,last:Le}:null}function Na(I,u,m,b){return I===a.aA.horizontal&&Math.abs(m.y-u.y)>Math.abs(m.x-u.x)*b?{useVertical:!0}:(I===a.aA.vertical?u.y<m.y:u.x>m.x)?{needsFlipping:!0}:null}function Lo(I){const{projectionContext:u,pitchedLabelPlaneMatrixInverse:m,symbol:b,fontSize:S,flip:k,keepUpright:K,glyphOffsetArray:N,dynamicLayoutVertexArray:H,aspectRatio:se,rotateToLine:ce}=I,ye=S/24,ge=b.lineOffsetX*ye,Se=b.lineOffsetY*ye;let Le;if(b.numGlyphs>1){const Je=b.glyphStartIndex+b.numGlyphs,nt=b.lineStartIndex,tt=b.lineStartIndex+b.lineLength,rt=El(ye,N,ge,Se,k,b,ce,u);if(!rt)return{notEnoughRoom:!0};const ft=Ga(rt.first.point.x,rt.first.point.y,u,m),lt=Ga(rt.last.point.x,rt.last.point.y,u,m);if(K&&!k){const pt=Na(b.writingMode,ft,lt,se);if(pt)return pt}Le=[rt.first];for(let pt=b.glyphStartIndex+1;pt<Je-1;pt++){const _t=hl(ye*N.getoffsetX(pt),ge,Se,k,b.segment,nt,tt,u,ce);if(!_t)return{notEnoughRoom:!0};Le.push(_t)}Le.push(rt.last)}else{if(K&&!k){const nt=vr(u.tileAnchorPoint.x,u.tileAnchorPoint.y,u).point,tt=b.lineStartIndex+b.segment+1,rt=new a.P(u.lineVertexArray.getx(tt),u.lineVertexArray.gety(tt)),ft=vr(rt.x,rt.y,u),lt=ft.signedDistanceFromCamera>0?ft.point:bc(u.tileAnchorPoint,rt,nt,1,u),pt=Ga(nt.x,nt.y,u,m),_t=Ga(lt.x,lt.y,u,m),At=Na(b.writingMode,pt,_t,se);if(At)return At}const Je=hl(ye*N.getoffsetX(b.glyphStartIndex),ge,Se,k,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,u,ce);if(!Je||u.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Le=[Je]}for(const Je of Le)a.aH(H,Je.point,Je.angle);return{}}function bc(I,u,m,b,S){const k=I.add(I.sub(u)._unit()),K=vr(k.x,k.y,S).point,N=m.sub(K);return m.add(N._mult(b/N.mag()))}function Vo(I,u,m){const b=u.projectionCache;if(b.projections[I])return b.projections[I];const S=new a.P(u.lineVertexArray.getx(I),u.lineVertexArray.gety(I)),k=vr(S.x,S.y,u);if(k.signedDistanceFromCamera>0)return b.projections[I]=k.point,b.anyProjectionOccluded=b.anyProjectionOccluded||k.isOccluded,k.point;const K=I-m.direction;return bc(m.distanceFromAnchor===0?u.tileAnchorPoint:new a.P(u.lineVertexArray.getx(K),u.lineVertexArray.gety(K)),S,m.previousVertex,m.absOffsetX-m.distanceFromAnchor+1,u)}function vr(I,u,m){const b=I+m.translation[0],S=u+m.translation[1];let k;return m.pitchWithMap?(k=Hi(b,S,m.pitchedLabelPlaneMatrix,m.getElevation),k.isOccluded=!1):(k=m.transform.projectTileCoordinates(b,S,m.unwrappedTileID,m.getElevation),k.point.x=(.5*k.point.x+.5)*m.width,k.point.y=(.5*-k.point.y+.5)*m.height),k}function Ga(I,u,m,b){if(m.pitchWithMap){const S=[I,u,0,1];return a.aI(S,S,b),m.transform.projectTileCoordinates(S[0]/S[3],S[1]/S[3],m.unwrappedTileID,m.getElevation).point}return{x:I/m.width*2-1,y:1-u/m.height*2}}function es(I,u,m){return m.transform.projectTileCoordinates(I,u,m.unwrappedTileID,m.getElevation)}function Mu(I,u,m){return I._unit()._perp()._mult(u*m)}function wu(I,u,m,b,S,k,K,N,H){if(N.projectionCache.offsets[I])return N.projectionCache.offsets[I];const se=m.add(u);if(I+H.direction<b||I+H.direction>=S)return N.projectionCache.offsets[I]=se,se;const ce=Vo(I+H.direction,N,H),ye=Mu(ce.sub(m),K,H.direction),ge=m.add(ye),Se=ce.add(ye);return N.projectionCache.offsets[I]=a.aJ(k,se,ge,Se)||se,N.projectionCache.offsets[I]}function hl(I,u,m,b,S,k,K,N,H){const se=b?I-u:I+u;let ce=se>0?1:-1,ye=0;b&&(ce*=-1,ye=Math.PI),ce<0&&(ye+=Math.PI);let ge,Se=ce>0?k+S:k+S+1;N.projectionCache.cachedAnchorPoint?ge=N.projectionCache.cachedAnchorPoint:(ge=vr(N.tileAnchorPoint.x,N.tileAnchorPoint.y,N).point,N.projectionCache.cachedAnchorPoint=ge);let Le,Je,nt=ge,tt=ge,rt=0,ft=0;const lt=Math.abs(se),pt=[];let _t;for(;rt+ft<=lt;){if(Se+=ce,Se<k||Se>=K)return null;rt+=ft,tt=nt,Je=Le;const zt={absOffsetX:lt,direction:ce,distanceFromAnchor:rt,previousVertex:tt};if(nt=Vo(Se,N,zt),m===0)pt.push(tt),_t=nt.sub(tt);else{let jt;const Wt=nt.sub(tt);jt=Wt.mag()===0?Mu(Vo(Se+ce,N,zt).sub(nt),m,ce):Mu(Wt,m,ce),Je||(Je=tt.add(jt)),Le=wu(Se,jt,nt,k,K,Je,m,N,zt),pt.push(Je),_t=Le.sub(Je)}ft=_t.mag()}const At=_t._mult((lt-rt)/ft)._add(Je||tt),Tt=ye+Math.atan2(nt.y-tt.y,nt.x-tt.x);return pt.push(At),{point:At,angle:H?Tt:0,path:pt}}const Xc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dl(I,u){for(let m=0;m<I;m++){const b=u.length;u.resize(b+4),u.float32.set(Xc,3*b)}}function Wa(I,u,m){const b=u[0],S=u[1];return I[0]=m[0]*b+m[4]*S+m[12],I[1]=m[1]*b+m[5]*S+m[13],I[3]=m[3]*b+m[7]*S+m[15],I}const Ar=100;class Hu{constructor(u,m=new Ai(u.width+200,u.height+200,25),b=new Ai(u.width+200,u.height+200,25)){this.transform=u,this.grid=m,this.ignoredGrid=b,this.pitchFactor=Math.cos(u.pitch*Math.PI/180)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Ar,this.screenBottomBoundary=u.height+Ar,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,m,b,S,k,K,N,H,se,ce,ye,ge){const Se=this.projectAndGetPerspectiveRatio(u.anchorPointX+H[0],u.anchorPointY+H[1],k,ce,ge),Le=b*Se.perspectiveRatio;let Je;if(K||N)Je=this._projectCollisionBox(u,Le,S,k,K,N,H,Se,ce,ye,ge);else{const _t=Se.x+(ye?ye.x*Le:0),At=Se.y+(ye?ye.y*Le:0);Je={allPointsOccluded:!1,box:[_t+u.x1*Le,At+u.y1*Le,_t+u.x2*Le,At+u.y2*Le]}}const[nt,tt,rt,ft]=Je.box,lt=K?Je.allPointsOccluded:Se.isOccluded;let pt=lt;return pt||(pt=Se.perspectiveRatio<this.perspectiveRatioCutoff),pt||(pt=!this.isInsideGrid(nt,tt,rt,ft)),pt||m!=="always"&&this.grid.hitTest(nt,tt,rt,ft,m,se)?{box:[nt,tt,rt,ft],placeable:!1,offscreen:!1,occluded:lt}:{box:[nt,tt,rt,ft],placeable:!0,offscreen:this.isOffscreen(nt,tt,rt,ft),occluded:lt}}placeCollisionCircles(u,m,b,S,k,K,N,H,se,ce,ye,ge,Se,Le){const Je=[],nt=new a.P(m.anchorX,m.anchorY),tt=this.getPerspectiveRatio(nt.x,nt.y,K,Le),rt=(se?k*this.transform.getPitchedTextCorrection(m.anchorX,m.anchorY,K)/tt:k*tt)/a.aN,ft={getElevation:Le,pitchedLabelPlaneMatrix:N,lineVertexArray:b,pitchWithMap:se,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:nt,unwrappedTileID:K,width:this.transform.width,height:this.transform.height,translation:Se},lt=El(rt,S,m.lineOffsetX*rt,m.lineOffsetY*rt,!1,m,!1,ft);let pt=!1,_t=!1,At=!0;if(lt){const Tt=.5*ye*tt+ge,zt=new a.P(-100,-100),jt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Wt=new Dn,qt=lt.first,fn=lt.last;let Pn=[];for(let or=qt.path.length-1;or>=1;or--)Pn.push(qt.path[or]);for(let or=1;or<fn.path.length;or++)Pn.push(fn.path[or]);const hn=2.5*Tt;if(se){const or=this.projectPathToScreenSpace(Pn,ft);Pn=or.some((go=>go.signedDistanceFromCamera<=0))?[]:or.map((go=>go.point))}let ui=[];if(Pn.length>0){const or=Pn[0].clone(),go=Pn[0].clone();for(let ko=1;ko<Pn.length;ko++)or.x=Math.min(or.x,Pn[ko].x),or.y=Math.min(or.y,Pn[ko].y),go.x=Math.max(go.x,Pn[ko].x),go.y=Math.max(go.y,Pn[ko].y);ui=or.x>=zt.x&&go.x<=jt.x&&or.y>=zt.y&&go.y<=jt.y?[Pn]:go.x<zt.x||or.x>jt.x||go.y<zt.y||or.y>jt.y?[]:a.aK([Pn],zt.x,zt.y,jt.x,jt.y)}for(const or of ui){Wt.reset(or,.25*Tt);let go=0;go=Wt.length<=.5*Tt?1:Math.ceil(Wt.paddedLength/hn)+1;for(let ko=0;ko<go;ko++){const yo=ko/Math.max(go-1,1),Pr=Wt.lerp(yo),Ur=Pr.x+Ar,Ea=Pr.y+Ar;Je.push(Ur,Ea,Tt,0);const is=Ur-Tt,Qs=Ea-Tt,jo=Ur+Tt,Ps=Ea+Tt;if(At=At&&this.isOffscreen(is,Qs,jo,Ps),_t=_t||this.isInsideGrid(is,Qs,jo,Ps),u!=="always"&&this.grid.hitTestCircle(Ur,Ea,Tt,u,ce)&&(pt=!0,!H))return{circles:[],offscreen:!1,collisionDetected:pt}}}}return{circles:!H&&pt||!_t||tt<this.perspectiveRatioCutoff?[]:Je,offscreen:At,collisionDetected:pt}}projectPathToScreenSpace(u,m){const b=(function(S,k){const K=a.N();return a.aC(K,k.pitchedLabelPlaneMatrix),S.map((N=>{const H=Hi(N.x,N.y,K,k.getElevation),se=k.transform.projectTileCoordinates(H.point.x,H.point.y,k.unwrappedTileID,k.getElevation);return se.point.x=(.5*se.point.x+.5)*k.width,se.point.y=(.5*-se.point.y+.5)*k.height,se}))})(u,m);return(function(S){let k=0,K=0,N=0,H=0;for(let se=0;se<S.length;se++)S[se].isOccluded?(N=se+1,H=0):(H++,H>K&&(K=H,k=N));return S.slice(k,k+K)})(b)}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[],b=new a.ac;for(const ye of u){const ge=new a.P(ye.x+Ar,ye.y+Ar);b.extend(ge),m.push(ge)}const{minX:S,minY:k,maxX:K,maxY:N}=b,H=this.grid.query(S,k,K,N).concat(this.ignoredGrid.query(S,k,K,N)),se={},ce={};for(const ye of H){const ge=ye.key;if(se[ge.bucketInstanceId]===void 0&&(se[ge.bucketInstanceId]={}),se[ge.bucketInstanceId][ge.featureIndex])continue;const Se=[new a.P(ye.x1,ye.y1),new a.P(ye.x2,ye.y1),new a.P(ye.x2,ye.y2),new a.P(ye.x1,ye.y2)];a.aL(m,Se)&&(se[ge.bucketInstanceId][ge.featureIndex]=!0,ce[ge.bucketInstanceId]===void 0&&(ce[ge.bucketInstanceId]=[]),ce[ge.bucketInstanceId].push(ge.featureIndex))}return ce}insertCollisionBox(u,m,b,S,k,K){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:k,collisionGroupID:K,overlapMode:m},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,b,S,k,K){const N=b?this.ignoredGrid:this.grid,H={bucketInstanceId:S,featureIndex:k,collisionGroupID:K,overlapMode:m};for(let se=0;se<u.length;se+=4)N.insertCircle(H,u[se],u[se+1],u[se+2])}projectAndGetPerspectiveRatio(u,m,b,S,k){if(k){let K;S?(K=[u,m,S(u,m),1],a.aI(K,K,k)):(K=[u,m,0,1],Wa(K,K,k));const N=K[3];return{x:(K[0]/N+1)/2*this.transform.width+Ar,y:(-K[1]/N+1)/2*this.transform.height+Ar,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N*.5,isOccluded:!1,signedDistanceFromCamera:N}}{const K=this.transform.projectTileCoordinates(u,m,b,S);return{x:(K.point.x+1)/2*this.transform.width+Ar,y:(1-K.point.y)/2*this.transform.height+Ar,perspectiveRatio:.5+this.transform.cameraToCenterDistance/K.signedDistanceFromCamera*.5,isOccluded:K.isOccluded,signedDistanceFromCamera:K.signedDistanceFromCamera}}}getPerspectiveRatio(u,m,b,S){const k=this.transform.projectTileCoordinates(u,m,b,S);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(u,m,b,S){return b<Ar||u>=this.screenRightBoundary||S<Ar||m>this.screenBottomBoundary}isInsideGrid(u,m,b,S){return b>=0&&u<this.gridRightBoundary&&S>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=a.as([]);return a.O(u,u,[-100,-100,0]),u}_projectCollisionBox(u,m,b,S,k,K,N,H,se,ce,ye){let ge=1,Se=0,Le=0,Je=1;const nt=u.anchorPointX+N[0],tt=u.anchorPointY+N[1];if(K&&!k){const Pn=this.projectAndGetPerspectiveRatio(nt+1,tt,S,se,ye),hn=Pn.x-H.x,ui=Math.atan((Pn.y-H.y)/hn)+(hn<0?Math.PI:0),or=Math.sin(ui),go=Math.cos(ui);ge=go,Se=or,Le=-or,Je=go}else if(!K&&k){const Pn=Sl(this.transform);ge=Pn.vecEast[0],Se=Pn.vecEast[1],Le=Pn.vecSouth[0],Je=Pn.vecSouth[1]}let rt=H.x,ft=H.y,lt=m;k&&(rt=nt,ft=tt,lt=Math.pow(2,-(this.transform.zoom-b.overscaledZ)),lt*=this.transform.getPitchedTextCorrection(nt,tt,S),ce||(lt*=a.ao(.5+H.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ce&&(rt+=ge*ce.x*lt+Le*ce.y*lt,ft+=Se*ce.x*lt+Je*ce.y*lt);const pt=u.x1*lt,_t=u.x2*lt,At=(pt+_t)/2,Tt=u.y1*lt,zt=u.y2*lt,jt=(Tt+zt)/2,Wt=[{offsetX:pt,offsetY:Tt},{offsetX:At,offsetY:Tt},{offsetX:_t,offsetY:Tt},{offsetX:_t,offsetY:jt},{offsetX:_t,offsetY:zt},{offsetX:At,offsetY:zt},{offsetX:pt,offsetY:zt},{offsetX:pt,offsetY:jt}];let qt=[];for(const{offsetX:Pn,offsetY:hn}of Wt)qt.push(new a.P(rt+ge*Pn+Le*hn,ft+Se*Pn+Je*hn));let fn=!1;if(k){const Pn=qt.map((hn=>this.projectAndGetPerspectiveRatio(hn.x,hn.y,S,se,ye)));fn=Pn.some((hn=>!hn.isOccluded)),qt=Pn.map((hn=>new a.P(hn.x,hn.y)))}else fn=!0;return{box:a.aM(qt),allPointsOccluded:!fn}}}class Bl{constructor(u,m,b,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):S&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Ol{constructor(u,m,b,S,k){this.text=new Bl(u?u.text:null,m,b,k),this.icon=new Bl(u?u.icon:null,m,S,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Su{constructor(u,m,b){this.text=u,this.icon=m,this.skipFade=b}}class _c{constructor(u,m,b,S,k){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=S,this.tileID=k}}class zh{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[u]}}function Zs(I,u,m,b,S){const{horizontalAlign:k,verticalAlign:K}=a.aT(I);return new a.P(-(k-.5)*u+b[0]*S,-(K-.5)*m+b[1]*S)}class xc{constructor(u,m,b,S,k){this.transform=u.clone(),this.terrain=m,this.collisionIndex=new Hu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new zh(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(u){const m=this.terrain;return m?(b,S)=>m.getElevation(u,b,S):null}getBucketParts(u,m,b,S){const k=b.getBucket(m),K=b.latestFeatureIndex;if(!k||!K||m.id!==k.layerIds[0])return;const N=b.collisionBoxArray,H=k.layers[0].layout,se=k.layers[0].paint,ce=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),ye=b.tileSize/a.a5,ge=b.tileID.toUnwrapped(),Se=H.get("text-rotation-alignment")==="map",Le=a.aO(b,1,this.transform.zoom),Je=a.aP(this.collisionIndex.transform,b,se.get("text-translate"),se.get("text-translate-anchor")),nt=a.aP(this.collisionIndex.transform,b,se.get("icon-translate"),se.get("icon-translate-anchor")),tt=ja(Se,this.transform,Le);this.retainedQueryData[k.bucketInstanceId]=new _c(k.bucketInstanceId,K,k.sourceLayerIndex,k.index,b.tileID);const rt={bucket:k,layout:H,translationText:Je,translationIcon:nt,unwrappedTileID:ge,pitchedLabelPlaneMatrix:tt,scale:ce,textPixelRatio:ye,holdingForFade:b.holdingForSymbolFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:a.az(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(S)for(const ft of k.sortKeyRanges){const{sortKey:lt,symbolInstanceStart:pt,symbolInstanceEnd:_t}=ft;u.push({sortKey:lt,symbolInstanceStart:pt,symbolInstanceEnd:_t,parameters:rt})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(u,m,b,S,k,K,N,H,se,ce,ye,ge,Se,Le,Je,nt,tt,rt,ft,lt){const pt=a.aQ[u.textAnchor],_t=[u.textOffset0,u.textOffset1],At=Zs(pt,b,S,_t,k),Tt=this.collisionIndex.placeCollisionBox(m,ge,H,se,ce,N,K,nt,ye.predicate,ft,At,lt);if((!rt||this.collisionIndex.placeCollisionBox(rt,ge,H,se,ce,N,K,tt,ye.predicate,ft,At,lt).placeable)&&Tt.placeable){let zt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(zt=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),Se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Se.crossTileID]={textOffset:_t,width:b,height:S,anchor:pt,textBoxScale:k,prevAnchor:zt},this.markUsedJustification(Le,pt,Se,Je),Le.allowVerticalPlacement&&(this.markUsedOrientation(Le,Je,Se),this.placedOrientations[Se.crossTileID]=Je),{shift:At,placedGlyphBoxes:Tt}}}placeLayerBucketPart(u,m,b){const{bucket:S,layout:k,translationText:K,translationIcon:N,unwrappedTileID:H,pitchedLabelPlaneMatrix:se,textPixelRatio:ce,holdingForFade:ye,collisionBoxArray:ge,partiallyEvaluatedTextSize:Se,collisionGroup:Le}=u.parameters,Je=k.get("text-optional"),nt=k.get("icon-optional"),tt=a.aR(k,"text-overlap","text-allow-overlap"),rt=tt==="always",ft=a.aR(k,"icon-overlap","icon-allow-overlap"),lt=ft==="always",pt=k.get("text-rotation-alignment")==="map",_t=k.get("text-pitch-alignment")==="map",At=k.get("icon-text-fit")!=="none",Tt=k.get("symbol-z-order")==="viewport-y",zt=rt&&(lt||!S.hasIconData()||nt),jt=lt&&(rt||!S.hasTextData()||Je);!S.collisionArrays&&ge&&S.deserializeCollisionBoxes(ge);const Wt=this.retainedQueryData[S.bucketInstanceId].tileID,qt=this._getTerrainElevationFunc(Wt),fn=this.transform.getFastPathSimpleProjectionMatrix(Wt),Pn=(hn,ui,or)=>{var go,ko;if(m[hn.crossTileID])return;if(ye)return void(this.placements[hn.crossTileID]=new Su(!1,!1,!1));let yo=!1,Pr=!1,Ur=!0,Ea=null,is={box:null,placeable:!1,offscreen:null,occluded:!1},Qs={placeable:!1},jo=null,Ps=null,Qa=null,gl=0,Lc=0,Du=0;ui.textFeatureIndex?gl=ui.textFeatureIndex:hn.useRuntimeCollisionCircles&&(gl=hn.featureIndex),ui.verticalTextFeatureIndex&&(Lc=ui.verticalTextFeatureIndex);const aA=ui.textBox;if(aA){const qs=rs=>{let Oa=a.aA.horizontal;if(S.allowVerticalPlacement&&!rs&&this.prevPlacement){const jl=this.prevPlacement.placedOrientations[hn.crossTileID];jl&&(this.placedOrientations[hn.crossTileID]=jl,Oa=jl,this.markUsedOrientation(S,Oa,hn))}return Oa},Ba=(rs,Oa)=>{if(S.allowVerticalPlacement&&hn.numVerticalGlyphVertices>0&&ui.verticalTextBox){for(const jl of S.writingModes)if(jl===a.aA.vertical?(is=Oa(),Qs=is):is=rs(),is&&is.placeable)break}else is=rs()},ha=hn.textAnchorOffsetStartIndex,Au=hn.textAnchorOffsetEndIndex;if(Au===ha){const rs=(Oa,jl)=>{const Ho=this.collisionIndex.placeCollisionBox(Oa,tt,ce,Wt,H,_t,pt,K,Le.predicate,qt,void 0,fn);return Ho&&Ho.placeable&&(this.markUsedOrientation(S,jl,hn),this.placedOrientations[hn.crossTileID]=jl),Ho};Ba((()=>rs(aA,a.aA.horizontal)),(()=>{const Oa=ui.verticalTextBox;return S.allowVerticalPlacement&&hn.numVerticalGlyphVertices>0&&Oa?rs(Oa,a.aA.vertical):{box:null,offscreen:null}})),qs(is&&is.placeable)}else{let rs=a.aQ[(ko=(go=this.prevPlacement)===null||go===void 0?void 0:go.variableOffsets[hn.crossTileID])===null||ko===void 0?void 0:ko.anchor];const Oa=(Ho,y0,Qf)=>{const v0=Ho.x2-Ho.x1,C0=Ho.y2-Ho.y1,da=hn.textBoxScale,bh=At&&ft==="never"?y0:null;let zA=null,Gg=tt==="never"?1:2,cd="never";rs&&Gg++;for(let b0=0;b0<Gg;b0++){for(let Ad=ha;Ad<Au;Ad++){const Kc=S.textAnchorOffsets.get(Ad);if(rs&&Kc.textAnchor!==rs)continue;const qf=this.attemptAnchorPlacement(Kc,Ho,v0,C0,da,pt,_t,ce,Wt,H,Le,cd,hn,S,Qf,K,N,bh,qt);if(qf&&(zA=qf.placedGlyphBoxes,zA&&zA.placeable))return yo=!0,Ea=qf.shift,zA}rs?rs=null:cd=tt}return b&&!zA&&(zA={box:this.collisionIndex.placeCollisionBox(aA,"always",ce,Wt,H,_t,pt,K,Le.predicate,qt,void 0,fn).box,offscreen:!1,placeable:!1,occluded:!1}),zA};Ba((()=>Oa(aA,ui.iconBox,a.aA.horizontal)),(()=>{const Ho=ui.verticalTextBox;return S.allowVerticalPlacement&&(!is||!is.placeable)&&hn.numVerticalGlyphVertices>0&&Ho?Oa(Ho,ui.verticalIconBox,a.aA.vertical):{box:null,occluded:!0,offscreen:null}})),is&&(yo=is.placeable,Ur=is.offscreen);const jl=qs(is&&is.placeable);if(!yo&&this.prevPlacement){const Ho=this.prevPlacement.variableOffsets[hn.crossTileID];Ho&&(this.variableOffsets[hn.crossTileID]=Ho,this.markUsedJustification(S,Ho.anchor,hn,jl))}}}if(jo=is,yo=jo&&jo.placeable,Ur=jo&&jo.offscreen,hn.useRuntimeCollisionCircles&&hn.centerJustifiedTextSymbolIndex>=0){const qs=S.text.placedSymbolArray.get(hn.centerJustifiedTextSymbolIndex),Ba=a.aB(S.textSizeData,Se,qs),ha=k.get("text-padding");Ps=this.collisionIndex.placeCollisionCircles(tt,qs,S.lineVertexArray,S.glyphOffsetArray,Ba,H,se,b,_t,Le.predicate,hn.collisionCircleDiameter,ha,K,qt),Ps.circles.length&&Ps.collisionDetected&&!b&&a.w("Collisions detected, but collision boxes are not shown"),yo=rt||Ps.circles.length>0&&!Ps.collisionDetected,Ur=Ur&&Ps.offscreen}if(ui.iconFeatureIndex&&(Du=ui.iconFeatureIndex),ui.iconBox){const qs=Ba=>this.collisionIndex.placeCollisionBox(Ba,ft,ce,Wt,H,_t,pt,N,Le.predicate,qt,At&&Ea?Ea:void 0,fn);Qs&&Qs.placeable&&ui.verticalIconBox?(Qa=qs(ui.verticalIconBox),Pr=Qa.placeable):(Qa=qs(ui.iconBox),Pr=Qa.placeable),Ur=Ur&&Qa.offscreen}const g0=Je||hn.numHorizontalGlyphVertices===0&&hn.numVerticalGlyphVertices===0,ud=nt||hn.numIconVertices===0;g0||ud?ud?g0||(Pr=Pr&&yo):yo=Pr&&yo:Pr=yo=Pr&&yo;const cu=Pr&&Qa.placeable;if(yo&&jo.placeable&&this.collisionIndex.insertCollisionBox(jo.box,tt,k.get("text-ignore-placement"),S.bucketInstanceId,Qs&&Qs.placeable&&Lc?Lc:gl,Le.ID),cu&&this.collisionIndex.insertCollisionBox(Qa.box,ft,k.get("icon-ignore-placement"),S.bucketInstanceId,Du,Le.ID),Ps&&yo&&this.collisionIndex.insertCollisionCircles(Ps.circles,tt,k.get("text-ignore-placement"),S.bucketInstanceId,gl,Le.ID),b&&this.storeCollisionData(S.bucketInstanceId,or,ui,jo,Qa,Ps),hn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[hn.crossTileID]=new Su((yo||zt)&&!jo?.occluded,(Pr||jt)&&!Qa?.occluded,Ur||S.justReloaded),m[hn.crossTileID]=!0};if(Tt){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const hn=S.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ui=hn.length-1;ui>=0;--ui){const or=hn[ui];Pn(S.symbolInstances.get(or),S.collisionArrays[or],or)}}else for(let hn=u.symbolInstanceStart;hn<u.symbolInstanceEnd;hn++)Pn(S.symbolInstances.get(hn),S.collisionArrays[hn],hn);S.justReloaded=!1}storeCollisionData(u,m,b,S,k,K){if(b.textBox||b.iconBox){let N,H;this.collisionBoxArrays.has(u)?N=this.collisionBoxArrays.get(u):(N=new Map,this.collisionBoxArrays.set(u,N)),N.has(m)?H=N.get(m):(H={text:null,icon:null},N.set(m,H)),b.textBox&&(H.text=S.box),b.iconBox&&(H.icon=k.box)}if(K){let N=this.collisionCircleArrays[u];N===void 0&&(N=this.collisionCircleArrays[u]=[]);for(let H=0;H<K.circles.length;H+=4)N.push(K.circles[H+0]-Ar),N.push(K.circles[H+1]-Ar),N.push(K.circles[H+2]),N.push(K.collisionDetected?1:0)}}markUsedJustification(u,m,b,S){let k;k=S===a.aA.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[a.aS(m)];const K=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const N of K)N>=0&&(u.text.placedSymbolArray.get(N).crossTileID=k>=0&&N!==k?0:b.crossTileID)}markUsedOrientation(u,m,b){const S=m===a.aA.horizontal||m===a.aA.horizontalOnly?m:0,k=m===a.aA.vertical?m:0,K=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const N of K)u.text.placedSymbolArray.get(N).placedOrientation=S;b.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const S=m?m.symbolFadeChange(u):1,k=m?m.opacities:{},K=m?m.variableOffsets:{},N=m?m.placedOrientations:{};for(const H in this.placements){const se=this.placements[H],ce=k[H];ce?(this.opacities[H]=new Ol(ce,S,se.text,se.icon),b=b||se.text!==ce.text.placed||se.icon!==ce.icon.placed):(this.opacities[H]=new Ol(null,S,se.text,se.icon,se.skipFade),b=b||se.text||se.icon)}for(const H in k){const se=k[H];if(!this.opacities[H]){const ce=new Ol(se,S,!1,!1);ce.isHidden()||(this.opacities[H]=ce,b=b||se.text.placed||se.icon.placed)}}for(const H in K)this.variableOffsets[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.variableOffsets[H]=K[H]);for(const H in N)this.placedOrientations[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.placedOrientations[H]=N[H]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const b={};for(const S of m){const k=S.getBucket(u);k&&S.latestFeatureIndex&&u.id===k.layerIds[0]&&this.updateBucketOpacities(k,S.tileID,b,S.collisionBoxArray)}}updateBucketOpacities(u,m,b,S){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const k=u.layers[0],K=k.layout,N=new Ol(null,0,!1,!1,!0),H=K.get("text-allow-overlap"),se=K.get("icon-allow-overlap"),ce=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ye=K.get("text-rotation-alignment")==="map",ge=K.get("text-pitch-alignment")==="map",Se=K.get("icon-text-fit")!=="none",Le=new Ol(null,0,H&&(se||!u.hasIconData()||K.get("icon-optional")),se&&(H||!u.hasTextData()||K.get("text-optional")),!0);!u.collisionArrays&&S&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(S);const Je=(tt,rt,ft)=>{for(let lt=0;lt<rt/4;lt++)tt.opacityVertexArray.emplaceBack(ft);tt.hasVisibleVertices=tt.hasVisibleVertices||ft!==Bu},nt=this.collisionBoxArrays.get(u.bucketInstanceId);for(let tt=0;tt<u.symbolInstances.length;tt++){const rt=u.symbolInstances.get(tt),{numHorizontalGlyphVertices:ft,numVerticalGlyphVertices:lt,crossTileID:pt}=rt;let _t=this.opacities[pt];b[pt]?_t=N:_t||(_t=Le,this.opacities[pt]=_t),b[pt]=!0;const At=rt.numIconVertices>0,Tt=this.placedOrientations[rt.crossTileID],zt=Tt===a.aA.vertical,jt=Tt===a.aA.horizontal||Tt===a.aA.horizontalOnly;if(ft>0||lt>0){const qt=Is(_t.text);Je(u.text,ft,zt?Bu:qt),Je(u.text,lt,jt?Bu:qt);const fn=_t.text.isHidden();[rt.rightJustifiedTextSymbolIndex,rt.centerJustifiedTextSymbolIndex,rt.leftJustifiedTextSymbolIndex].forEach((ui=>{ui>=0&&(u.text.placedSymbolArray.get(ui).hidden=fn||zt?1:0)})),rt.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(rt.verticalPlacedTextSymbolIndex).hidden=fn||jt?1:0);const Pn=this.variableOffsets[rt.crossTileID];Pn&&this.markUsedJustification(u,Pn.anchor,rt,Tt);const hn=this.placedOrientations[rt.crossTileID];hn&&(this.markUsedJustification(u,"left",rt,hn),this.markUsedOrientation(u,hn,rt))}if(At){const qt=Is(_t.icon),fn=!(Se&&rt.verticalPlacedIconSymbolIndex&&zt);rt.placedIconSymbolIndex>=0&&(Je(u.icon,rt.numIconVertices,fn?qt:Bu),u.icon.placedSymbolArray.get(rt.placedIconSymbolIndex).hidden=_t.icon.isHidden()),rt.verticalPlacedIconSymbolIndex>=0&&(Je(u.icon,rt.numVerticalIconVertices,fn?Bu:qt),u.icon.placedSymbolArray.get(rt.verticalPlacedIconSymbolIndex).hidden=_t.icon.isHidden())}const Wt=nt&&nt.has(tt)?nt.get(tt):{text:null,icon:null};if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const qt=u.collisionArrays[tt];if(qt){let fn=new a.P(0,0);if(qt.textBox||qt.verticalTextBox){let Pn=!0;if(ce){const hn=this.variableOffsets[pt];hn?(fn=Zs(hn.anchor,hn.width,hn.height,hn.textOffset,hn.textBoxScale),ye&&fn._rotate(ge?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Pn=!1}if(qt.textBox||qt.verticalTextBox){let hn;qt.textBox&&(hn=zt),qt.verticalTextBox&&(hn=jt),Zl(u.textCollisionBox.collisionVertexArray,_t.text.placed,!Pn||hn,Wt.text,fn.x,fn.y)}}if(qt.iconBox||qt.verticalIconBox){const Pn=!!(!jt&&qt.verticalIconBox);let hn;qt.iconBox&&(hn=Pn),qt.verticalIconBox&&(hn=!Pn),Zl(u.iconCollisionBox.collisionVertexArray,_t.icon.placed,hn,Wt.icon,Se?fn.x:0,Se?fn.y:0)}}}}if(u.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);u.bucketInstanceId in this.collisionCircleArrays&&(u.collisionCircleArray=this.collisionCircleArrays[u.bucketInstanceId],delete this.collisionCircleArrays[u.bucketInstanceId])}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>u}setStale(){this.stale=!0}}function Zl(I,u,m,b,S,k){b&&b.length!==0||(b=[0,0,0,0]);const K=b[0]-Ar,N=b[1]-Ar,H=b[2]-Ar,se=b[3]-Ar;I.emplaceBack(u?1:0,m?1:0,S||0,k||0,K,N),I.emplaceBack(u?1:0,m?1:0,S||0,k||0,H,N),I.emplaceBack(u?1:0,m?1:0,S||0,k||0,H,se),I.emplaceBack(u?1:0,m?1:0,S||0,k||0,K,se)}const Jc=Math.pow(2,25),Xl=Math.pow(2,24),Jl=Math.pow(2,17),ms=Math.pow(2,16),Bo=Math.pow(2,9),eu=Math.pow(2,8),Eu=Math.pow(2,1);function Is(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const u=I.placed?1:0,m=Math.floor(127*I.opacity);return m*Jc+u*Xl+m*Jl+u*ms+m*Bo+u*eu+m*Eu+u}const Bu=0;class tu{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,m,b,S,k){const K=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(K,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,K.sort(((N,H)=>N.sortKey-H.sortKey)));this._currentPartIndex<K.length;)if(m.placeLayerBucketPart(K[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,k())return!0;return!1}}class Zu{constructor(u,m,b,S,k,K,N,H){this.placement=new xc(u,m,K,N,H),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(u,m,b){const S=U(),k=()=>!this._forceFullPlacement&&U()-S>2;for(;this._currentPlacementIndex>=0;){const K=m[u[this._currentPlacementIndex]],N=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=N)&&(!K.maxzoom||K.maxzoom>N)){if(this._inProgressLayer||(this._inProgressLayer=new tu(K)),this._inProgressLayer.continuePlacement(b[K.source],this.placement,this._showCollisionBoxes,K,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const nr=512/a.a5/2;class Ja{constructor(u,m,b){this.tileID=u,this.bucketInstanceId=b,this._symbolsByKey={};const S=new Map;for(let k=0;k<m.length;k++){const K=m.get(k),N=K.key,H=S.get(N);H?H.push(K):S.set(N,[K])}for(const[k,K]of S){const N={positions:K.map((H=>({x:Math.floor(H.anchorX*nr),y:Math.floor(H.anchorY*nr)}))),crossTileIDs:K.map((H=>H.crossTileID))};if(N.positions.length>128){const H=new a.aU(N.positions.length,16,Uint16Array);for(const{x:se,y:ce}of N.positions)H.add(se,ce);H.finish(),delete N.positions,N.index=H}this._symbolsByKey[k]=N}}getScaledCoordinates(u,m){const{x:b,y:S,z:k}=this.tileID.canonical,{x:K,y:N,z:H}=m.canonical,se=nr/Math.pow(2,H-k),ce=(N*a.a5+u.anchorY)*se,ye=S*a.a5*nr;return{x:Math.floor((K*a.a5+u.anchorX)*se-b*a.a5*nr),y:Math.floor(ce-ye)}}findMatches(u,m,b){const S=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let k=0;k<u.length;k++){const K=u.get(k);if(K.crossTileID)continue;const N=this._symbolsByKey[K.key];if(!N)continue;const H=this.getScaledCoordinates(K,m);if(N.index){const se=N.index.range(H.x-S,H.y-S,H.x+S,H.y+S).sort();for(const ce of se){const ye=N.crossTileIDs[ce];if(!b[ye]){b[ye]=!0,K.crossTileID=ye;break}}}else if(N.positions)for(let se=0;se<N.positions.length;se++){const ce=N.positions[se],ye=N.crossTileIDs[se];if(Math.abs(ce.x-H.x)<=S&&Math.abs(ce.y-H.y)<=S&&!b[ye]){b[ye]=!0,K.crossTileID=ye;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:u})=>u))}}class ts{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Xu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const b in this.indexes){const S=this.indexes[b],k={};for(const K in S){const N=S[K];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+m),k[N.tileID.key]=N}this.indexes[b]=k}this.lng=u}addBucket(u,m,b){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let k=0;k<m.symbolInstances.length;k++)m.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const S=this.usedCrossTileIDs[u.overscaledZ];for(const k in this.indexes){const K=this.indexes[k];if(Number(k)>u.overscaledZ)for(const N in K){const H=K[N];H.tileID.isChildOf(u)&&H.findMatches(m.symbolInstances,u,S)}else{const N=K[u.scaledTo(Number(k)).key];N&&N.findMatches(m.symbolInstances,u,S)}}for(let k=0;k<m.symbolInstances.length;k++){const K=m.symbolInstances.get(k);K.crossTileID||(K.crossTileID=b.generate(),S[K.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Ja(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const b of m.getCrossTileIDsLists())for(const S of b)delete this.usedCrossTileIDs[u][S]}removeStaleBuckets(u){let m=!1;for(const b in this.indexes){const S=this.indexes[b];for(const k in S)u[S[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,S[k]),delete S[k],m=!0)}return m}}class ns{constructor(){this.layerIndexes={},this.crossTileIDs=new ts,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,b){let S=this.layerIndexes[u.id];S===void 0&&(S=this.layerIndexes[u.id]=new Xu);let k=!1;const K={};S.handleWrapJump(b);for(const N of m){const H=N.getBucket(u);H&&u.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(N.tileID,H,this.crossTileIDs)&&(k=!0),K[H.bucketInstanceId]=!0)}return S.removeStaleBuckets(K)&&(k=!0),k}pruneUnusedLayers(u){const m={};u.forEach((b=>{m[b]=!0}));for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}var mo="void main() {fragColor=vec4(1.0);}";const po={prelude:wi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:wi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:wi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:wi(mo,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:wi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:wi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wi(mo,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:wi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:wi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:wi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:wi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:wi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:wi(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:wi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:wi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:wi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:wi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:wi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wi(I,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=u.match(/in ([\w]+) ([\w]+)/g),S=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=k?k.concat(S):S,N={};return{fragmentSource:I=I.replace(m,((H,se,ce,ye,ge)=>(N[ge]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
in ${ce} ${ye} ${ge};
#else
uniform ${ce} ${ye} u_${ge};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ge}
    ${ce} ${ye} ${ge} = u_${ge};
#endif
`))),vertexSource:u=u.replace(m,((H,se,ce,ye,ge)=>{const Se=ye==="float"?"vec2":"vec4",Le=ge.match(/color/)?"color":Se;return N[ge]?se==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
in ${ce} ${Se} a_${ge};
out ${ce} ${ye} ${ge};
#else
uniform ${ce} ${ye} u_${ge};
#endif
`:Le==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = a_${ge};
#else
    ${ce} ${ye} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = unpack_mix_${Le}(a_${ge}, u_${ge}_t);
#else
    ${ce} ${ye} ${ge} = u_${ge};
#endif
`:se==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
in ${ce} ${Se} a_${ge};
#else
uniform ${ce} ${ye} u_${ge};
#endif
`:Le==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ce} ${ye} ${ge} = a_${ge};
#else
    ${ce} ${ye} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ce} ${ye} ${ge} = unpack_mix_${Le}(a_${ge}, u_${ge}_t);
#else
    ${ce} ${ye} ${ge} = u_${ge};
#endif
`})),staticAttributes:b,staticUniforms:K}}class ro{constructor(u,m,b){this.vertexBuffer=u,this.indexBuffer=m,this.segments=b}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Xs=a.aV([{name:"a_pos",type:"Int16",components:2}]);const bo="#define PROJECTION_MERCATOR",Ns="mercator";class Hr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ns}get shaderDefine(){return bo}get shaderPreludeCode(){return po.projectionMercator}get vertexShaderPreludeCode(){return po.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(u){}getMeshFromTileID(u,m,b,S,k){if(this._cachedMesh)return this._cachedMesh;const K=new a.aX;K.emplaceBack(0,0),K.emplaceBack(a.a5,0),K.emplaceBack(0,a.a5),K.emplaceBack(a.a5,a.a5);const N=u.createVertexBuffer(K,Xs.members),H=a.aY.simpleSegment(0,0,4,2),se=new a.aZ;se.emplaceBack(1,0,2),se.emplaceBack(1,2,3);const ce=u.createIndexBuffer(se);return this._cachedMesh=new ro(N,ce,H),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(u){}}class la{constructor(u=0,m=0,b=0,S=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=b,this.right=S}interpolate(u,m,b){return m.top!=null&&u.top!=null&&(this.top=a.G.number(u.top,m.top,b)),m.bottom!=null&&u.bottom!=null&&(this.bottom=a.G.number(u.bottom,m.bottom,b)),m.left!=null&&u.left!=null&&(this.left=a.G.number(u.left,m.left,b)),m.right!=null&&u.right!=null&&(this.right=a.G.number(u.right,m.right,b)),this}getCenter(u,m){const b=a.ao((this.left+u-this.right)/2,0,u),S=a.ao((this.top+m-this.bottom)/2,0,m);return new a.P(b,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new la(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function el(I,u){if(!I.renderWorldCopies||I.lngRange)return;const m=u.lng-I.center.lng;u.lng+=m>180?-360:m<-180?360:0}function Zi(I){return Math.max(0,Math.floor(I))}class Rr{constructor(u,m){var b;this.applyConstrain=(S,k)=>this._constrainOverride!==null?this._constrainOverride(S,k):this._callbacks.defaultConstrain(S,k),this._callbacks=u,this._tileSize=512,this._renderWorldCopies=m?.renderWorldCopies===void 0||!!m?.renderWorldCopies,this._minZoom=m?.minZoom||0,this._maxZoom=m?.maxZoom||22,this._minPitch=m?.minPitch==null?0:m?.minPitch,this._maxPitch=m?.maxPitch==null?60:m?.maxPitch,this._constrainOverride=(b=m?.constrainOverride)!==null&&b!==void 0?b:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Zi(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new la,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(u,m,b){this._constrainOverride=u.constrainOverride,this._latRange=u.latRange,this._lngRange=u.lngRange,this._width=u.width,this._height=u.height,this._center=u.center,this._elevation=u.elevation,this._minElevationForCurrentTile=u.minElevationForCurrentTile,this._zoom=u.zoom,this._tileZoom=Zi(this._zoom),this._scale=a.ar(this._zoom),this._bearingInRadians=u.bearingInRadians,this._fovInRadians=u.fovInRadians,this._pitchInRadians=u.pitchInRadians,this._rollInRadians=u.rollInRadians,this._unmodified=u.unmodified,this._edgeInsets=new la(u.padding.top,u.padding.bottom,u.padding.left,u.padding.right),this._minZoom=u.minZoom,this._maxZoom=u.maxZoom,this._minPitch=u.minPitch,this._maxPitch=u.maxPitch,this._renderWorldCopies=u.renderWorldCopies,this._cameraToCenterDistance=u.cameraToCenterDistance,this._nearZ=u.nearZ,this._farZ=u.farZ,this._autoCalculateNearFarZ=!b&&u.autoCalculateNearFarZ,m&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(u){this._minElevationForCurrentTile=u}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(u){this._minZoom!==u&&(this._minZoom=u,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(u){this._minPitch!==u&&(this._minPitch=u,this.setPitch(Math.max(this.pitch,u)))}get maxPitch(){return this._maxPitch}setMaxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.setPitch(Math.min(this.pitch,u)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get constrainOverride(){return this._constrainOverride}setConstrainOverride(u){u===void 0&&(u=null),this._constrainOverride!==u&&(this._constrainOverride=u,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(u){const m=a.W(u,-180,180)*Math.PI/180;var b,S,k,K,N,H,se,ce,ye;this._bearingInRadians!==m&&(this._unmodified=!1,this._bearingInRadians=m,this._calcMatrices(),this._rotationMatrix=d(),b=this._rotationMatrix,k=-this._bearingInRadians,K=(S=this._rotationMatrix)[0],N=S[1],H=S[2],se=S[3],ce=Math.sin(k),ye=Math.cos(k),b[0]=K*ye+H*ce,b[1]=N*ye+se*ce,b[2]=K*-ce+H*ye,b[3]=N*-ce+se*ye)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(u){const m=a.ao(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==m&&(this._unmodified=!1,this._pitchInRadians=m,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(u){const m=u/180*Math.PI;this._rollInRadians!==m&&(this._unmodified=!1,this._rollInRadians=m,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.a_(this._fovInRadians)}setFov(u){u=a.ao(u,.1,150),this.fov!==u&&(this._unmodified=!1,this._fovInRadians=a.aq(u),this._calcMatrices())}get zoom(){return this._zoom}setZoom(u){const m=this.applyConstrain(this._center,u).zoom;this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this._tileZoom=Math.max(0,Math.floor(m)),this._scale=a.ar(m),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(u){u!==this._elevation&&(this._elevation=u,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(u,m){this._autoCalculateNearFarZ=!1,this._nearZ=u,this._farZ=m,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,b){this._unmodified=!1,this._edgeInsets.interpolate(u,m,b),this.constrainInternal(),this._calcMatrices()}resize(u,m,b=!0){this._width=u,this._height=m,b&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new nn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(u){u?(this._lngRange=[u.getWest(),u.getEast()],this._latRange=[u.getSouth(),u.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ap,a.ap])}getCameraQueryGeometry(u,m){if(m.length===1)return[m[0],u];{const{minX:b,minY:S,maxX:k,maxY:K}=a.ac.fromPoints(m).extend(u);return[new a.P(b,S),new a.P(k,S),new a.P(k,K),new a.P(b,K),new a.P(b,S)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:m,zoom:b}=this.applyConstrain(this.center,this.zoom);this.setCenter(m),this.setZoom(b),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let u=a.as(new Float64Array(16));a.Q(u,u,[this._width/2,-this._height/2,1]),a.O(u,u,[1,-1,0]),this._clipSpaceToPixelsMatrix=u,u=a.as(new Float64Array(16)),a.Q(u,u,[1,-1,1]),a.O(u,u,[-1,-1,0]),a.Q(u,u,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=u,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(u,m,b,S){const k=b!==void 0?b:this.bearing,K=S=S!==void 0?S:this.pitch,{distanceToCenter:N,clampedElevation:H}=this._distanceToCenterFromAltElevationPitch(m,this.elevation,K),{x:se,y:ce}=xi(K,k),ye=a.ab.fromLngLat(u,m);let ge,Se,Le=a.a$(1,ye.y),Je=0;do{if(Je+=1,Je>10)break;Se=N/Le,ge=new a.ab(ye.x+se*Se,ye.y+ce*Se),Le=1/ge.meterInMercatorCoordinateUnits()}while(Math.abs(N-Se*Le)>1e-12);return{center:ge.toLngLat(),elevation:H,zoom:a.au(this.height/2/Math.tan(this.fovInRadians/2)/Se/this.tileSize)}}recalculateZoomAndCenter(u){if(this.elevation-u==0)return;const m=1/this.worldSize,b=a.at(1,this.center.lat)*this.worldSize,S=a.ab.fromLngLat(this.center,this.elevation),k=S.x/m,K=S.y/m,N=S.z/m,H=this.pitch,se=this.bearing,{x:ce,y:ye,z:ge}=xi(H,se),Se=this.cameraToCenterDistance,Le=k+Se*-ce,Je=K+Se*-ye,nt=N+Se*ge,{distanceToCenter:tt,clampedElevation:rt}=this._distanceToCenterFromAltElevationPitch(nt/b,u,H),ft=tt*b,lt=new a.ab((Le+ce*ft)*m,(Je+ye*ft)*m,0).toLngLat(),pt=a.at(1,lt.lat),_t=a.au(this.height/2/Math.tan(this.fovInRadians/2)/tt/pt/this.tileSize);this._elevation=rt,this._center=lt,this.setZoom(_t)}_distanceToCenterFromAltElevationPitch(u,m,b){const S=-Math.cos(a.aq(b)),k=u-m;let K,N=m;return S*k>=0||Math.abs(S)<.1?(K=1e4,N=u+K*S):K=-k/S,{distanceToCenter:K,clampedElevation:N}}getCameraPoint(){const u=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(u*Math.sin(this.rollInRadians),u*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const u=a.at(1,this.center.lat)*this.worldSize;return Mt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/u).toLngLat()}getMercatorTileCoordinates(u){if(!u)return[0,0,1,1];const m=u.canonical.z>=0?1<<u.canonical.z:Math.pow(2,u.canonical.z);return[u.canonical.x/m,u.canonical.y/m,1/m/a.a5,1/m/a.a5]}}class ie{constructor(u,m){this.min=u,this.max=m,this.center=a.b0([],a.b1([],this.min,this.max),.5)}quadrant(u){const m=[u%2==0,u<2],b=a.b2(this.min),S=a.b2(this.max);for(let k=0;k<m.length;k++)b[k]=m[k]?this.min[k]:this.center[k],S[k]=m[k]?this.center[k]:this.max[k];return S[2]=this.max[2],new ie(b,S)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersectsFrustum(u){let m=!0;for(let b=0;b<u.planes.length;b++){const S=this.intersectsPlane(u.planes[b]);if(S===0)return 0;S===1&&(m=!1)}return m?2:u.aabb.min[0]>this.max[0]||u.aabb.min[1]>this.max[1]||u.aabb.min[2]>this.max[2]||u.aabb.max[0]<this.min[0]||u.aabb.max[1]<this.min[1]||u.aabb.max[2]<this.min[2]?0:1}intersectsPlane(u){let m=u[3],b=u[3];for(let S=0;S<3;S++)u[S]>0?(m+=u[S]*this.min[S],b+=u[S]*this.max[S]):(b+=u[S]*this.min[S],m+=u[S]*this.max[S]);return m>=0?2:b<0?0:1}}class _e{distanceToTile2d(u,m,b,S){const k=S.distanceX([u,m]),K=S.distanceY([u,m]);return Math.hypot(k,K)}getWrap(u,m,b){return b}getTileBoundingVolume(u,m,b,S){var k,K;let N=0,H=0;if(S?.terrain){const ce=new a.a2(u.z,m,u.z,u.x,u.y),ye=S.terrain.getMinMaxElevation(ce);N=(k=ye.minElevation)!==null&&k!==void 0?k:Math.min(0,b),H=(K=ye.maxElevation)!==null&&K!==void 0?K:Math.max(0,b)}const se=1<<u.z;return new ie([m+u.x/se,u.y/se,N],[m+(u.x+1)/se,(u.y+1)/se,H])}allowVariableZoom(u,m){const b=u.fov*(Math.abs(Math.cos(u.rollInRadians))*u.height+Math.abs(Math.sin(u.rollInRadians))*u.width)/u.height,S=a.ao(78.5-b/2,0,60);return!!m.terrain||u.pitch>S}allowWorldCopies(){return!0}prepareNextFrame(){}}class $e{constructor(u,m,b){this.points=u,this.planes=m,this.aabb=b}static fromInvProjectionMatrix(u,m=1,b=0,S,k){const K=k?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],N=Math.pow(2,b),H=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ge=>(function(Se,Le,Je,nt){const tt=a.aI([],Se,Le),rt=1/tt[3]/Je*nt;return a.b7(tt,tt,[rt,rt,1/tt[3],rt])})(ge,u,m,N)));S&&(function(ge,Se,Le,Je){const nt=Je?4:0,tt=Je?0:4;let rt=0;const ft=[],lt=[];for(let At=0;At<4;At++){const Tt=a.b3([],ge[At+tt],ge[At+nt]),zt=a.b8(Tt);a.b0(Tt,Tt,1/zt),ft.push(zt),lt.push(Tt)}for(let At=0;At<4;At++){const Tt=a.b9(ge[At+nt],lt[At],Le);rt=Tt!==null&&Tt>=0?Math.max(rt,Tt):Math.max(rt,ft[At])}const pt=(function(At,Tt){const zt=a.b3([],At[Tt[0]],At[Tt[1]]),jt=a.b3([],At[Tt[2]],At[Tt[1]]),Wt=[0,0,0,0];return a.b4(Wt,a.b5([],zt,jt)),Wt[3]=-a.b6(Wt,At[Tt[0]]),Wt})(ge,Se),_t=(function(At,Tt){const zt=a.ba(At),jt=a.bb([],At,1/zt),Wt=a.b3([],Tt,a.b0([],jt,a.b6(Tt,jt))),qt=a.ba(Wt);if(qt>0){const fn=Math.sqrt(1-jt[3]*jt[3]),Pn=a.b0([],jt,-jt[3]),hn=a.b1([],Pn,a.b0([],Wt,fn/qt));return a.bc(Tt,hn)}return null})(Le,pt);if(_t!==null){const At=_t/a.b6(lt[0],pt);rt=Math.min(rt,At)}for(let At=0;At<4;At++){const Tt=Math.min(rt,ft[At]);ge[At+tt]=[ge[At+nt][0]+lt[At][0]*Tt,ge[At+nt][1]+lt[At][1]*Tt,ge[At+nt][2]+lt[At][2]*Tt,1]}})(H,K[0],S,k);const se=K.map((ge=>{const Se=a.b3([],H[ge[0]],H[ge[1]]),Le=a.b3([],H[ge[2]],H[ge[1]]),Je=a.b4([],a.b5([],Se,Le)),nt=-a.b6(Je,H[ge[1]]);return Je.concat(nt)})),ce=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ye=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ge of H)for(let Se=0;Se<3;Se++)ce[Se]=Math.min(ce[Se],ge[Se]),ye[Se]=Math.max(ye[Se],ge[Se]);return new $e(H,se,new ie(ce,ye))}}class Ot{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,b){return this._helper.interpolatePadding(u,m,b)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m,b=!0){this._helper.resize(u,m,b)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u,m){}constructor(u){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(m,b)=>{b=a.ao(+b,this.minZoom,this.maxZoom);const S={center:new a.V(m.lng,m.lat),zoom:b};let k=this._helper._lngRange;if(!this._helper._renderWorldCopies&&k===null){const lt=179.9999999999;k=[-lt,lt]}const K=this.tileSize*a.ar(S.zoom);let N=0,H=K,se=0,ce=K,ye=0,ge=0;const{x:Se,y:Le}=this.size;if(this._helper._latRange){const lt=this._helper._latRange;N=a.X(lt[1])*K,H=a.X(lt[0])*K,H-N<Le&&(ye=Le/(H-N))}k&&(se=a.W(a.Y(k[0])*K,0,K),ce=a.W(a.Y(k[1])*K,0,K),ce<se&&(ce+=K),ce-se<Se&&(ge=Se/(ce-se)));const{x:Je,y:nt}=Ut(K,m);let tt,rt;const ft=Math.max(ge||0,ye||0);if(ft){const lt=new a.P(ge?(ce+se)/2:Je,ye?(H+N)/2:nt);return S.center=gn(K,lt).wrap(),S.zoom+=a.au(ft),S}if(this._helper._latRange){const lt=Le/2;nt-lt<N&&(rt=N+lt),nt+lt>H&&(rt=H-lt)}if(k){const lt=(se+ce)/2;let pt=Je;this._helper._renderWorldCopies&&(pt=a.W(Je,lt-K/2,lt+K/2));const _t=Se/2;pt-_t<se&&(tt=se+_t),pt+_t>ce&&(tt=ce-_t)}if(tt!==void 0||rt!==void 0){const lt=new a.P(tt??Je,rt??nt);S.center=gn(K,lt).wrap()}return S},this.applyConstrain=(m,b)=>this._helper.applyConstrain(m,b),this._helper=new Rr({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,b)=>this.defaultConstrain(m,b)},u),this._coveringTilesDetailsProvider=new _e}clone(){const u=new Ot;return u.apply(this),u}apply(u,m,b){this._helper.apply(u,m,b)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(u){const m=[new a.bd(0,u)];if(this._helper._renderWorldCopies){const b=this.screenPointToMercatorCoordinate(new a.P(0,0)),S=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),k=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),K=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),N=Math.floor(Math.min(b.x,S.x,k.x,K.x)),H=Math.floor(Math.max(b.x,S.x,k.x,K.x)),se=1;for(let ce=N-se;ce<=H+se;ce++)ce!==0&&m.push(new a.bd(ce,u))}return m}getCameraFrustum(){return $e.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){const m=this.screenPointToLocation(this.centerPoint,u),b=u?u.getElevationForLngLatZoom(m,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(b)}setLocationAtPoint(u,m){const b=a.at(this.elevation,this.center.lat),S=this.screenPointToMercatorCoordinateAtZ(m,b),k=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,b),K=a.ab.fromLngLat(u),N=new a.ab(K.x-(S.x-k.x),K.y-(S.y-k.y));this.setCenter(N?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(u,m){return m?this.coordinatePoint(a.ab.fromLngLat(u),m.getElevationForLngLat(u),this._pixelMatrix3D):this.coordinatePoint(a.ab.fromLngLat(u))}screenPointToLocation(u,m){var b;return(b=this.screenPointToMercatorCoordinate(u,m))===null||b===void 0?void 0:b.toLngLat()}screenPointToMercatorCoordinate(u,m){if(m){const b=m.pointCoordinate(u);if(b!=null)return b}return this.screenPointToMercatorCoordinateAtZ(u)}screenPointToMercatorCoordinateAtZ(u,m){const b=m||0,S=[u.x,u.y,0,1],k=[u.x,u.y,1,1];a.aI(S,S,this._pixelMatrixInverse),a.aI(k,k,this._pixelMatrixInverse);const K=S[3],N=k[3],H=S[1]/K,se=k[1]/N,ce=S[2]/K,ye=k[2]/N,ge=ce===ye?0:(b-ce)/(ye-ce);return new a.ab(a.G.number(S[0]/K,k[0]/N,ge)/this.worldSize,a.G.number(H,se,ge)/this.worldSize,b)}coordinatePoint(u,m=0,b=this._pixelMatrix){const S=[u.x*this.worldSize,u.y*this.worldSize,m,1];return a.aI(S,S,b),new a.P(S[0]/S[3],S[1]/S[3])}getBounds(){const u=Math.max(0,this._helper._height/2-bn(this));return new nn().extend(this.screenPointToLocation(new a.P(0,u))).extend(this.screenPointToLocation(new a.P(this._helper._width,u))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(u,m){return m?m.pointCoordinate(u)!=null:u.y>this.height/2-bn(this)}calculatePosMatrix(u,m=!1,b){var S;const k=(S=u.key)!==null&&S!==void 0?S:a.be(u.wrap,u.canonical.z,u.canonical.z,u.canonical.x,u.canonical.y),K=m?this._alignedPosMatrixCache:this._posMatrixCache;if(K.has(k)){const se=K.get(k);return b?se.f32:se.f64}const N=_n(u,this.worldSize);a.S(N,m?this._alignedProjMatrix:this._viewProjMatrix,N);const H={f64:N,f32:new Float32Array(N)};return K.set(k,H),b?H.f32:H.f64}calculateFogMatrix(u){const m=u.key,b=this._fogMatrixCacheF32;if(b.has(m))return b.get(m);const S=_n(u,this.worldSize);return a.S(S,this._fogMatrix,S),b.set(m,new Float32Array(S)),b.get(m)}calculateCenterFromCameraLngLatAlt(u,m,b,S){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,b,S)}_calculateNearFarZIfNeeded(u,m,b){if(!this._helper.autoCalculateNearFarZ)return;const S=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),k=u-S*this._helper._pixelPerMeter/Math.cos(m),K=S<0?k:u,N=Math.PI/2+this.pitchInRadians,H=a.aq(this.fov)*(Math.abs(Math.cos(a.aq(this.roll)))*this.height+Math.abs(Math.sin(a.aq(this.roll)))*this.width)/this.height*(.5+b.y/this.height),se=Math.sin(H)*K/Math.sin(a.ao(Math.PI-N-H,.01,Math.PI-.01)),ce=bn(this),ye=Math.atan(ce/this._helper.cameraToCenterDistance),ge=a.aq(.75),Se=ye>ge?2*ye*(.5+b.y/(2*ce)):ge,Le=Math.sin(Se)*K/Math.sin(a.ao(Math.PI-N-Se,.01,Math.PI-.01)),Je=Math.min(se,Le);this._helper._farZ=1.01*(Math.cos(Math.PI/2-m)*Je+K),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const u=this.centerOffset,m=Ut(this.worldSize,this.center),b=m.x,S=m.y;this._helper._pixelPerMeter=a.at(1,this.center.lat)*this.worldSize;const k=a.aq(Math.min(this.pitch,C)),K=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(k));let N;this._calculateNearFarZIfNeeded(K,k,u),N=new Float64Array(16),a.bf(N,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aC(this._invProjMatrix,N),N[8]=2*-u.x/this._helper._width,N[9]=2*u.y/this._helper._height,this._projectionMatrix=a.bg(N),a.Q(N,N,[1,-1,1]),a.O(N,N,[0,0,-this._helper.cameraToCenterDistance]),a.bh(N,N,-this.rollInRadians),a.bi(N,N,this.pitchInRadians),a.bh(N,N,-this.bearingInRadians),a.O(N,N,[-b,-S,0]),this._mercatorMatrix=a.Q([],N,[this.worldSize,this.worldSize,this.worldSize]),a.Q(N,N,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,N),a.O(N,N,[0,0,-this.elevation]),this._viewProjMatrix=N,this._invViewProjMatrix=a.aC([],N);const H=[0,0,-1,1];a.aI(H,H,this._invViewProjMatrix),this._cameraPosition=[H[0]/H[3],H[1]/H[3],H[2]/H[3]],this._fogMatrix=new Float64Array(16),a.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,K,this._helper._farZ),this._fogMatrix[8]=2*-u.x/this.width,this._fogMatrix[9]=2*u.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-b,-S,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,N);const se=this._helper._width%2/2,ce=this._helper._height%2/2,ye=Math.cos(this.bearingInRadians),ge=Math.sin(-this.bearingInRadians),Se=b-Math.round(b)+ye*se+ge*ce,Le=S-Math.round(S)+ye*ce+ge*se,Je=new Float64Array(N);if(a.O(Je,Je,[Se>.5?Se-1:Se,Le>.5?Le-1:Le,0]),this._alignedProjMatrix=Je,N=a.aC(new Float64Array(16),this._pixelMatrix),!N)throw new Error("failed to invert matrix");this._pixelMatrixInverse=N,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const u=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.aI(m,m,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const u=a.at(1,this.center.lat)*this.worldSize;return Mt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/u).toLngLat()}lngLatToCameraDepth(u,m){const b=a.ab.fromLngLat(u),S=[b.x*this.worldSize,b.y*this.worldSize,m,1];return a.aI(S,S,this._viewProjMatrix),S[2]/S[3]}getProjectionData(u){const{overscaledTileID:m,aligned:b,applyTerrainMatrix:S}=u,k=this._helper.getMercatorTileCoordinates(m),K=m?this.calculatePosMatrix(m,b,!0):null;let N;return N=m&&m.terrainRttPosMatrix32f&&S?m.terrainRttPosMatrix32f:K||a.bj(),{mainMatrix:N,tileMercatorCoords:k,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:N}}isLocationOccluded(u){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(u,m,b){return 1}transformLightDirection(u){return a.b2(u)}getRayDirectionFromPixel(u){throw new Error("Not implemented.")}projectTileCoordinates(u,m,b,S){const k=this.calculatePosMatrix(b);let K;S?(K=[u,m,S(u,m),1],a.aI(K,K,k)):(K=[u,m,0,1],Wa(K,K,k));const N=K[3];return{point:new a.P(K[0]/N,K[1]/N),signedDistanceFromCamera:N,isOccluded:!1}}populateCache(u){for(const m of u)this.calculatePosMatrix(m)}getMatrixForModel(u,m){const b=a.ab.fromLngLat(u,m),S=b.meterInMercatorCoordinateUnits(),k=a.bk();return a.O(k,k,[b.x,b.y,b.z]),a.bh(k,k,Math.PI),a.bi(k,k,Math.PI/2),a.Q(k,k,[-S,S,S]),k}getProjectionDataForCustomLayer(u=!0){const m=new a.a2(0,0,0,0,0),b=this.getProjectionData({overscaledTileID:m,applyGlobeMatrix:u}),S=_n(m,this.worldSize);a.S(S,this._viewProjMatrix,S),b.tileMercatorCoords=[0,0,1,1];const k=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],K=a.bl();return a.Q(K,S,k),b.fallbackMatrix=K,b.mainMatrix=K,b}getFastPathSimpleProjectionMatrix(u){return this.calculatePosMatrix(u)}}function qn(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Rn(I){if(I.useSlerp)if(I.k<1){const u=a.bm(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),m=a.bm(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),b=new Float64Array(4);a.bn(b,u,m,I.k);const S=a.bo(b);I.tr.setRoll(S.roll),I.tr.setPitch(S.pitch),I.tr.setBearing(S.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(a.G.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(a.G.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(a.G.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function Ti(I,u,m,b,S){const k=S.padding,K=Ut(S.worldSize,m.getNorthWest()),N=Ut(S.worldSize,m.getNorthEast()),H=Ut(S.worldSize,m.getSouthEast()),se=Ut(S.worldSize,m.getSouthWest()),ce=a.aq(-b),ye=K.rotate(ce),ge=N.rotate(ce),Se=H.rotate(ce),Le=se.rotate(ce),Je=new a.P(Math.max(ye.x,ge.x,Le.x,Se.x),Math.max(ye.y,ge.y,Le.y,Se.y)),nt=new a.P(Math.min(ye.x,ge.x,Le.x,Se.x),Math.min(ye.y,ge.y,Le.y,Se.y)),tt=Je.sub(nt),rt=(S.width-(k.left+k.right+u.left+u.right))/tt.x,ft=(S.height-(k.top+k.bottom+u.top+u.bottom))/tt.y;if(ft<0||rt<0)return void qn();const lt=Math.min(a.au(S.scale*Math.min(rt,ft)),I.maxZoom),pt=a.P.convert(I.offset),_t=new a.P((u.left-u.right)/2,(u.top-u.bottom)/2).rotate(a.aq(b)),At=pt.add(_t).mult(S.scale/a.ar(lt));return{center:gn(S.worldSize,K.add(H).div(2).sub(At)),zoom:lt,bearing:b}}class Ni{get useGlobeControls(){return!1}handlePanInertia(u,m){const b=u.mag(),S=Math.abs(bn(m));return{easingOffset:u.mult(Math.min(.75*S/b,1)),easingCenter:m.center}}handleMapControlsRollPitchBearingZoom(u,m){u.bearingDelta&&m.setBearing(m.bearing+u.bearingDelta),u.pitchDelta&&m.setPitch(m.pitch+u.pitchDelta),u.rollDelta&&m.setRoll(m.roll+u.rollDelta),u.zoomDelta&&m.setZoom(m.zoom+u.zoomDelta)}handleMapControlsPan(u,m,b){u.around.distSqr(m.centerPoint)<.01||m.setLocationAtPoint(b,u.around)}cameraForBoxAndBearing(u,m,b,S,k){return Ti(u,m,b,S,k)}handleJumpToCenterZoom(u,m){u.zoom!==(m.zoom!==void 0?+m.zoom:u.zoom)&&u.setZoom(+m.zoom),m.center!==void 0&&u.setCenter(a.V.convert(m.center))}handleEaseTo(u,m){const b=u.zoom,S=u.padding,k={roll:u.roll,pitch:u.pitch,bearing:u.bearing},K={roll:m.roll===void 0?u.roll:m.roll,pitch:m.pitch===void 0?u.pitch:m.pitch,bearing:m.bearing===void 0?u.bearing:m.bearing},N=m.zoom!==void 0,H=!u.isPaddingEqual(m.padding);let se=!1;const ce=N?+m.zoom:u.zoom;let ye=u.centerPoint.add(m.offsetAsPoint);const ge=u.screenPointToLocation(ye),{center:Se,zoom:Le}=u.applyConstrain(a.V.convert(m.center||ge),ce??b);el(u,Se);const Je=Ut(u.worldSize,ge),nt=Ut(u.worldSize,Se).sub(Je),tt=a.ar(Le-b);return se=Le!==b,{easeFunc:rt=>{if(se&&u.setZoom(a.G.number(b,Le,rt)),a.bp(k,K)||Rn({startEulerAngles:k,endEulerAngles:K,tr:u,k:rt,useSlerp:k.roll!=K.roll}),H&&(u.interpolatePadding(S,m.padding,rt),ye=u.centerPoint.add(m.offsetAsPoint)),m.around)u.setLocationAtPoint(m.around,m.aroundPoint);else{const ft=a.ar(u.zoom-b),lt=Le>b?Math.min(2,tt):Math.max(.5,tt),pt=Math.pow(lt,1-rt),_t=gn(u.worldSize,Je.add(nt.mult(rt*pt)).mult(ft));u.setLocationAtPoint(u.renderWorldCopies?_t.wrap():_t,ye)}},isZooming:se,elevationCenter:Se}}handleFlyTo(u,m){const b=m.zoom!==void 0,S=u.zoom,k=u.applyConstrain(a.V.convert(m.center||m.locationAtOffset),b?+m.zoom:S),K=k.center,N=k.zoom;el(u,K);const H=Ut(u.worldSize,m.locationAtOffset),se=Ut(u.worldSize,K).sub(H),ce=se.mag(),ye=a.ar(N-S);let ge;if(m.minZoom!==void 0){const Se=Math.min(+m.minZoom,S,N),Le=u.applyConstrain(K,Se).zoom;ge=a.ar(Le-S)}return{easeFunc:(Se,Le,Je,nt)=>{u.setZoom(Se===1?N:S+a.au(Le));const tt=Se===1?K:gn(u.worldSize,H.add(se.mult(Je)).mult(Le));u.setLocationAtPoint(u.renderWorldCopies?tt.wrap():tt,nt)},scaleOfZoom:ye,targetCenter:K,scaleOfMinZoom:ge,pixelPathLength:ce}}}class Yn{constructor(u,m,b){this.blendFunction=u,this.blendColor=m,this.mask=b}}Yn.Replace=[1,0],Yn.disabled=new Yn(Yn.Replace,a.bq.transparent,[!1,!1,!1,!1]),Yn.unblended=new Yn(Yn.Replace,a.bq.transparent,[!0,!0,!0,!0]),Yn.alphaBlended=new Yn([1,771],a.bq.transparent,[!0,!0,!0,!0]);const Oi=2305;class ni{constructor(u,m,b){this.enable=u,this.mode=m,this.frontFace=b}}ni.disabled=new ni(!1,1029,Oi),ni.backCCW=new ni(!0,1029,Oi),ni.frontCCW=new ni(!0,1028,Oi);class si{constructor(u,m,b){this.func=u,this.mask=m,this.range=b}}si.ReadOnly=!1,si.ReadWrite=!0,si.disabled=new si(519,si.ReadOnly,[0,1]);const mr=7680;class ii{constructor(u,m,b,S,k,K){this.test=u,this.ref=m,this.mask=b,this.fail=S,this.depthFail=k,this.pass=K}}ii.disabled=new ii({func:519,mask:0},0,0,mr,mr,mr);const jr=new WeakMap;function Oo(I){var u;if(jr.has(I))return jr.get(I);{const m=(u=I.getParameter(I.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return jr.set(I,m),m}}class Ko{get awaitingQuery(){return!!this._readbackQueue}constructor(u){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=u;const m=u.context,b=m.gl;this._texFormat=b.RGBA,this._texType=b.UNSIGNED_BYTE;const S=new a.aX;S.emplaceBack(-1,-1),S.emplaceBack(2,-1),S.emplaceBack(-1,2);const k=new a.aZ;k.emplaceBack(0,1,2),this._fullscreenTriangle=new ro(m.createVertexBuffer(S,Xs.members),m.createIndexBuffer(k),a.aY.simpleSegment(0,0,S.length,k.length)),this._resultBuffer=new Uint8Array(4),m.activeTexture.set(b.TEXTURE1);const K=b.createTexture();b.bindTexture(b.TEXTURE_2D,K),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texImage2D(b.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=m.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(K),Oo(b)&&(this._pbo=b.createBuffer(),b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.bufferData(b.PIXEL_PACK_BUFFER,4,b.STREAM_READ),b.bindBuffer(b.PIXEL_PACK_BUFFER,null))}destroy(){const u=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),u.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(u,m){const b=this._updateCount;return this._readbackQueue?b>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():b>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(u,m),this._updateCount++,this._measuredError}_bindFramebuffer(){const u=this._cachedRenderContext.context,m=u.gl;u.activeTexture.set(m.TEXTURE1),m.bindTexture(m.TEXTURE_2D,this._fbo.colorAttachment.get()),u.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(u,m){const b=this._cachedRenderContext.context,S=b.gl;if(this._bindFramebuffer(),b.viewport.set([0,0,this._texWidth,this._texHeight]),b.clear({color:a.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(b,S.TRIANGLES,si.disabled,ii.disabled,Yn.unblended,ni.disabled,((k,K)=>({u_input:k,u_output_expected:K}))(u,m),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Oo(S)){S.bindBuffer(S.PIXEL_PACK_BUFFER,this._pbo),S.readBuffer(S.COLOR_ATTACHMENT0),S.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),S.bindBuffer(S.PIXEL_PACK_BUFFER,null);const k=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);S.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:k}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const u=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Oo(u)){const m=u.clientWaitSync(this._readbackQueue.sync,0,0);if(m===u.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(m===u.TIMEOUT_EXPIRED)return;u.bindBuffer(u.PIXEL_PACK_BUFFER,this._pbo),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),u.bindBuffer(u.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),u.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ko._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(u){let m=0;return m+=u[0]/256,m+=u[1]/65536,m+=u[2]/16777216,u[3]<127&&(m=-m),m/128}}const ps=a.a5/128;function oh(I,u){const m=I.granularity!==void 0?Math.max(I.granularity,1):1,b=m+(I.generateBorders?2:0),S=m+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),k=b+1,K=S+1,N=I.generateBorders?-1:0,H=I.generateBorders||I.extendToNorthPole?-1:0,se=m+(I.generateBorders?1:0),ce=m+(I.generateBorders||I.extendToSouthPole?1:0),ye=k*K,ge=b*S*6,Se=k*K>65536;if(Se&&u==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Le=Se||u==="32bit",Je=new Int16Array(2*ye);let nt=0;for(let ft=H;ft<=ce;ft++)for(let lt=N;lt<=se;lt++){let pt=lt/m*a.a5;lt===-1&&(pt=-ps),lt===m+1&&(pt=a.a5+ps);let _t=ft/m*a.a5;ft===-1&&(_t=I.extendToNorthPole?a.bs:-ps),ft===m+1&&(_t=I.extendToSouthPole?a.bt:a.a5+ps),Je[nt++]=pt,Je[nt++]=_t}const tt=Le?new Uint32Array(ge):new Uint16Array(ge);let rt=0;for(let ft=0;ft<S;ft++)for(let lt=0;lt<b;lt++){const pt=lt+1+ft*k,_t=lt+(ft+1)*k,At=lt+1+(ft+1)*k;tt[rt++]=lt+ft*k,tt[rt++]=_t,tt[rt++]=pt,tt[rt++]=pt,tt[rt++]=_t,tt[rt++]=At}return{vertices:Je.buffer.slice(0),indices:tt.buffer.slice(0),uses32bitIndices:Le}}const Il=new a.aW({fill:new a.bu(128,2),line:new a.bu(512,0),tile:new a.bu(128,32),stencil:new a.bu(128,1),circle:3});class gs{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return po.projectionGlobe}get vertexShaderPreludeCode(){return po.projectionMercator.vertexSource}get subdivisionGranularity(){return Il}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(u){this._errorMeasurement||(this._errorMeasurement=new Ko(u));const m=a.X(this._errorQueryLatitudeDegrees),b=2*Math.atan(Math.exp(Math.PI-m*Math.PI*2))-.5*Math.PI,S=this._errorMeasurement.updateErrorLoop(m,b),k=U();S!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=S,this._errorMeasurementLastChangeTime=k);const K=Math.min(Math.max((k-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bw(K))}_getMeshKey(u){return`${u.granularity.toString(36)}_${u.generateBorders?"b":""}${u.extendToNorthPole?"n":""}${u.extendToSouthPole?"s":""}`}getMeshFromTileID(u,m,b,S,k){const K=(k==="stencil"?Il.stencil:Il.tile).getGranularityForZoomLevel(m.z);return this._getMesh(u,{granularity:K,generateBorders:b,extendToNorthPole:m.y===0&&S,extendToSouthPole:m.y===(1<<m.z)-1&&S})}_getMesh(u,m){const b=this._getMeshKey(m);if(b in this._tileMeshCache)return this._tileMeshCache[b];const S=(function(k,K){const N=oh(K,"16bit"),H=a.aX.deserialize({arrayBuffer:N.vertices,length:N.vertices.byteLength/2/2}),se=a.aZ.deserialize({arrayBuffer:N.indices,length:N.indices.byteLength/2/3});return new ro(k.createVertexBuffer(H,Xs.members),k.createIndexBuffer(se),a.aY.simpleSegment(0,0,H.length,se.length))})(u,m);return this._tileMeshCache[b]=S,S}recalculate(u){}hasTransition(){const u=U();let m=!1;return m=m||(u-this._errorMeasurementLastChangeTime)/1e3<.7,m=m||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,m}setErrorQueryLatitudeDegrees(u){this._errorQueryLatitudeDegrees=u}}const Yv=new a.t({type:new a.D(a.u.projection.type)});class Ou extends a.E{constructor(u){super(),this._transitionable=new a.x(Yv,void 0),this.setProjection(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new Hr,this._verticalPerspectiveProjection=new gs}get transitionState(){const u=this.properties.get("type");if(typeof u=="string"&&u==="mercator")return 0;if(typeof u=="string"&&u==="vertical-perspective")return 1;if(u instanceof a.bx){if(u.from==="vertical-perspective"&&u.to==="mercator")return 1-u.transition;if(u.from==="mercator"&&u.to==="vertical-perspective")return u.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(u){this._mercatorProjection.updateGPUdependent(u),this._verticalPerspectiveProjection.updateGPUdependent(u)}getMeshFromTileID(u,m,b,S,k){return this.currentProjection.getMeshFromTileID(u,m,b,S,k)}setProjection(u){this._transitionable.setValue("type",u?.type||"mercator")}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}setErrorQueryLatitudeDegrees(u){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(u),this._mercatorProjection.setErrorQueryLatitudeDegrees(u)}}function nu(I){const u=xA(I.worldSize,I.center.lat);return 2*Math.PI*u}function eA(I,u,m,b,S){const k=1/(1<<S),K=u/a.a5*k+b*k,N=a.bz((I/a.a5*k+m*k)*Math.PI*2+Math.PI,2*Math.PI),H=2*Math.atan(Math.exp(Math.PI-K*Math.PI*2))-.5*Math.PI,se=Math.cos(H),ce=new Float64Array(3);return ce[0]=Math.sin(N)*se,ce[1]=Math.sin(H),ce[2]=Math.cos(N)*se,ce}function _o(I){return(function(u,m){const b=Math.cos(m),S=new Float64Array(3);return S[0]=Math.sin(u)*b,S[1]=Math.sin(m),S[2]=Math.cos(u)*b,S})(I.lng*Math.PI/180,I.lat*Math.PI/180)}function xA(I,u){return I/(2*Math.PI)/Math.cos(u*Math.PI/180)}function zd(I){const u=Math.asin(I[1])/Math.PI*180,m=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(m>1e-6){const b=I[0]/m,S=Math.acos(I[2]/m),k=(b>0?S:-S)/Math.PI*180;return new a.V(a.W(k,-180,180),u)}return new a.V(0,u)}function $o(I){return Math.cos(I*Math.PI/180)}function To(I,u){const m=$o(I),b=$o(u);return a.au(b/m)}function e0(I,u){const m=I.rotate(u.bearingInRadians),b=u.zoom+To(u.center.lat,0),S=a.bv(1/$o(u.center.lat),1/$o(Math.min(Math.abs(u.center.lat),60)),a.by(b,7,3,0,1)),k=360/nu({worldSize:u.worldSize,center:{lat:u.center.lat}});return new a.V(u.center.lng-m.x*k*S,a.ao(u.center.lat+m.y*k,-a.ap,a.ap))}function t0(I){const u=.5*I,m=Math.sin(u),b=Math.cos(u);return Math.log(m+b)-Math.log(b-m)}function n0(I,u,m,b){const S=I.lat+m*b;if(Math.abs(m)>1){const k=(Math.sign(I.lat+m)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,K=Math.abs(I.lat+m)*Math.PI/180,N=t0(k+b*(K-k)),H=t0(k),se=t0(K);return new a.V(I.lng+u*((N-H)/(se-H)),S)}return new a.V(I.lng+u*b,S)}class Vv{constructor(u){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=u}swapBuffers(){if(!this._hadAnyChanges)return;const u=this._cachePrevious;this._cachePrevious=this._cache,this._cache=u,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(u,m,b,S){const k=`${u.z}_${u.x}_${u.y}_${S?.terrain?"t":""}`,K=this._cache.get(k);if(K)return K;const N=this._cachePrevious.get(k);if(N)return this._cache.set(k,N),N;const H=this._boundingVolumeFactory(u,m,b,S);return this._cache.set(k,H),this._hadAnyChanges=!0,H}}class Tf{constructor(u,m,b,S){this.min=b,this.max=S,this.points=u,this.planes=m}static fromAabb(u,m){const b=[];for(let S=0;S<8;S++)b.push([1&~S?u[0]:m[0],(S>>1&1)==1?m[1]:u[1],(S>>2&1)==1?m[2]:u[2]]);return new Tf(b,[[-1,0,0,m[0]],[1,0,0,-u[0]],[0,-1,0,m[1]],[0,1,0,-u[1]],[0,0,-1,m[2]],[0,0,1,-u[2]]],u,m)}static fromCenterSizeAngles(u,m,b){const S=a.bC([],b[0],b[1],b[2]),k=a.bD([],[m[0],0,0],S),K=a.bD([],[0,m[1],0],S),N=a.bD([],[0,0,m[2]],S),H=[...u],se=[...u];for(let ye=0;ye<8;ye++)for(let ge=0;ge<3;ge++){const Se=u[ge]+k[ge]*(1&~ye?-1:1)+K[ge]*((ye>>1&1)==1?1:-1)+N[ge]*((ye>>2&1)==1?1:-1);H[ge]=Math.min(H[ge],Se),se[ge]=Math.max(se[ge],Se)}const ce=[];for(let ye=0;ye<8;ye++){const ge=[...u];a.b1(ge,ge,a.b0([],k,1&~ye?-1:1)),a.b1(ge,ge,a.b0([],K,(ye>>1&1)==1?1:-1)),a.b1(ge,ge,a.b0([],N,(ye>>2&1)==1?1:-1)),ce.push(ge)}return new Tf(ce,[[...k,-a.b6(k,ce[0])],[...K,-a.b6(K,ce[0])],[...N,-a.b6(N,ce[0])],[-k[0],-k[1],-k[2],-a.b6(k,ce[7])],[-K[0],-K[1],-K[2],-a.b6(K,ce[7])],[-N[0],-N[1],-N[2],-a.b6(N,ce[7])]],H,se)}intersectsFrustum(u){let m=!0;const b=this.points.length,S=this.planes.length,k=u.planes.length,K=u.points.length;for(let N=0;N<k;N++){const H=u.planes[N];let se=0;for(let ce=0;ce<b;ce++){const ye=this.points[ce];H[0]*ye[0]+H[1]*ye[1]+H[2]*ye[2]+H[3]>=0&&se++}if(se===0)return 0;se<b&&(m=!1)}if(m)return 2;for(let N=0;N<S;N++){const H=this.planes[N];let se=0;for(let ce=0;ce<K;ce++){const ye=u.points[ce];H[0]*ye[0]+H[1]*ye[1]+H[2]*ye[2]+H[3]>=0&&se++}if(se===0)return 0}return 1}intersectsPlane(u){const m=this.points.length;let b=0;for(let S=0;S<m;S++){const k=this.points[S];u[0]*k[0]+u[1]*k[1]+u[2]*k[2]+u[3]>=0&&b++}return b===m?2:b===0?0:1}}function i0(I,u,m){const b=I-u;return b<0?-b:Math.max(0,b-m)}function jd(I,u,m,b,S){const k=I-m;let K;return K=k<0?Math.min(-k,1+k-S):k>1?Math.min(Math.max(k-S,0),1-k):0,Math.max(K,i0(u,b,S))}class kf{constructor(){this._boundingVolumeCache=new Vv(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(u,m,b,S){const k=1<<b.z,K=1/k,N=b.x/k,H=b.y/k;let se=2;return se=Math.min(se,jd(u,m,N,H,K)),se=Math.min(se,jd(u,m,N+.5,-H-K,K)),se=Math.min(se,jd(u,m,N+.5,2-H-K,K)),se}getWrap(u,m,b){const S=1<<m.z,k=1/S,K=m.x/S,N=i0(u.x,K,k),H=i0(u.x,K-1,k),se=i0(u.x,K+1,k),ce=Math.min(N,H,se);return ce===se?1:ce===H?-1:0}allowVariableZoom(u,m){return qi(u,m)>4}allowWorldCopies(){return!1}getTileBoundingVolume(u,m,b,S){return this._boundingVolumeCache.getTileBoundingVolume(u,m,b,S)}_computeTileBoundingVolume(u,m,b,S){var k,K;let N=0,H=0;if(S?.terrain){const se=new a.a2(u.z,m,u.z,u.x,u.y),ce=S.terrain.getMinMaxElevation(se);N=(k=ce.minElevation)!==null&&k!==void 0?k:Math.min(0,b),H=(K=ce.maxElevation)!==null&&K!==void 0?K:Math.max(0,b)}if(N/=a.bF,H/=a.bF,N+=1,H+=1,u.z<=0)return Tf.fromAabb([-H,-H,-H],[H,H,H]);if(u.z===1)return Tf.fromAabb([u.x===0?-H:0,u.y===0?0:-H,-H],[u.x===0?0:H,u.y===0?H:0,H]);{const se=[eA(0,0,u.x,u.y,u.z),eA(a.a5,0,u.x,u.y,u.z),eA(a.a5,a.a5,u.x,u.y,u.z),eA(0,a.a5,u.x,u.y,u.z)],ce=[];for(const Wt of se)ce.push(a.b0([],Wt,H));if(H!==N)for(const Wt of se)ce.push(a.b0([],Wt,N));u.y===0&&ce.push([0,1,0]),u.y===(1<<u.z)-1&&ce.push([0,-1,0]);const ye=[1,1,1],ge=[-1,-1,-1];for(const Wt of ce)for(let qt=0;qt<3;qt++)ye[qt]=Math.min(ye[qt],Wt[qt]),ge[qt]=Math.max(ge[qt],Wt[qt]);const Se=eA(a.a5/2,a.a5/2,u.x,u.y,u.z),Le=a.b5([],[0,1,0],Se);a.b4(Le,Le);const Je=a.b5([],Se,Le);a.b4(Je,Je);const nt=a.b5([],se[2],se[1]);a.b4(nt,nt);const tt=a.b5([],se[0],se[3]);a.b4(tt,tt),ce.push(a.b0([],Se,H)),u.y>=(1<<u.z)/2&&ce.push(a.b0([],eA(a.a5/2,0,u.x,u.y,u.z),H)),u.y<(1<<u.z)/2&&ce.push(a.b0([],eA(a.a5/2,a.a5,u.x,u.y,u.z),H));const rt=MA(Se,ce),ft=MA(Je,ce),lt=[-Se[0],-Se[1],-Se[2],rt.max],pt=[Se[0],Se[1],Se[2],-rt.min],_t=[-Je[0],-Je[1],-Je[2],ft.max],At=[Je[0],Je[1],Je[2],-ft.min],Tt=[...nt,0],zt=[...tt,0],jt=[];return u.y===0?jt.push(a.bE(zt,Tt,lt),a.bE(zt,Tt,pt)):jt.push(a.bE(_t,Tt,lt),a.bE(_t,Tt,pt),a.bE(_t,zt,lt),a.bE(_t,zt,pt)),u.y===(1<<u.z)-1?jt.push(a.bE(zt,Tt,lt),a.bE(zt,Tt,pt)):jt.push(a.bE(At,Tt,lt),a.bE(At,Tt,pt),a.bE(At,zt,lt),a.bE(At,zt,pt)),new Tf(jt,[lt,pt,_t,At,Tt,zt],ye,ge)}}}function MA(I,u){let m=1/0,b=-1/0;for(const S of u){const k=a.b6(I,S);m=Math.min(m,k),b=Math.max(b,k)}return{min:m,max:b}}class Df{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,b){return this._helper.interpolatePadding(u,m,b)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m){this._helper.resize(u,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(u){}constructor(u){this._cachedClippingPlane=a.bG(),this._projectionMatrix=a.bk(),this._globeViewProjMatrix32f=a.bj(),this._globeViewProjMatrixNoCorrection=a.bk(),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),this._globeProjMatrixInverted=a.bk(),this._cameraPosition=a.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(m,b)=>{const S=a.ao(m.lat,-a.ap,a.ap),k=a.ao(+b,this.minZoom+To(0,S),this.maxZoom);return{center:new a.V(m.lng,S),zoom:k}},this.applyConstrain=(m,b)=>this._helper.applyConstrain(m,b),this._helper=new Rr({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,b)=>this.defaultConstrain(m,b)},u),this._coveringTilesDetailsProvider=new kf}clone(){const u=new Df;return u.apply(this),u}apply(u,m){this._globeLatitudeErrorCorrectionRadians=m||0,this._helper.apply(u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const u=a.bA();return u[0]=this._cameraPosition[0],u[1]=this._cameraPosition[1],u[2]=this._cameraPosition[2],u}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(u){const{overscaledTileID:m,applyGlobeMatrix:b}=u,S=this._helper.getMercatorTileCoordinates(m);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:S,clippingPlane:this._cachedClippingPlane,projectionTransition:b?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(u){const m=this.pitchInRadians,b=this.cameraToCenterDistance/u,S=Math.sin(m)*b,k=Math.cos(m)*b+1,K=1/Math.sqrt(S*S+k*k)*1;let N=-S,H=k;const se=Math.sqrt(N*N+H*H);N/=se,H/=se;const ce=[0,N,H];a.bH(ce,ce,[0,0,0],-this.bearingInRadians),a.bI(ce,ce,[0,0,0],-1*this.center.lat*Math.PI/180),a.bJ(ce,ce,[0,0,0],this.center.lng*Math.PI/180);const ye=1/a.b8(ce);return a.b0(ce,ce,ye),[...ce,-K*ye]}isLocationOccluded(u){return!this.isSurfacePointVisible(_o(u))}transformLightDirection(u){const m=this._helper._center.lng*Math.PI/180,b=this._helper._center.lat*Math.PI/180,S=Math.cos(b),k=[Math.sin(m)*S,Math.sin(b),Math.cos(m)*S],K=[k[2],0,-k[0]],N=[0,0,0];a.b5(N,K,k),a.b4(K,K),a.b4(N,N);const H=[0,0,0];return a.b4(H,[K[0]*u[0]+N[0]*u[1]+k[0]*u[2],K[1]*u[0]+N[1]*u[1]+k[1]*u[2],K[2]*u[0]+N[2]*u[1]+k[2]*u[2]]),H}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(u,m,b){const S=(function(N,H,se){const ce=1/(1<<se.z);return new a.ab(N/a.a5*ce+se.x*ce,H/a.a5*ce+se.y*ce)})(u,m,b.canonical),k=(K=S.y,[a.bz(S.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-K*Math.PI*2))-.5*Math.PI]);var K;return this.getCircleRadiusCorrection()/Math.cos(k[1])}projectTileCoordinates(u,m,b,S){const k=b.canonical,K=eA(u,m,k.x,k.y,k.z),N=1+(S?S(u,m):0)/a.bF,H=[K[0]*N,K[1]*N,K[2]*N,1];a.aI(H,H,this._globeViewProjMatrixNoCorrection);const se=this._cachedClippingPlane,ce=se[0]*K[0]+se[1]*K[1]+se[2]*K[2]+se[3]<0;return{point:new a.P(H[0]/H[3],H[1]/H[3]),signedDistanceFromCamera:H[3],isOccluded:ce}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const u=xA(this.worldSize,this.center.lat),m=a.bl(),b=a.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*u),a.bf(m,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const S=this.centerOffset;m[8]=2*-S.x/this._helper._width,m[9]=2*S.y/this._helper._height,this._projectionMatrix=a.bg(m),this._globeProjMatrixInverted=a.bl(),a.aC(this._globeProjMatrixInverted,m),a.O(m,m,[0,0,-this.cameraToCenterDistance]),a.bh(m,m,this.rollInRadians),a.bi(m,m,-this.pitchInRadians),a.bh(m,m,this.bearingInRadians),a.O(m,m,[0,0,-u]);const k=a.bA();k[0]=u,k[1]=u,k[2]=u,a.bi(b,m,this.center.lat*Math.PI/180),a.bK(b,b,-this.center.lng*Math.PI/180),a.Q(b,b,k),this._globeViewProjMatrixNoCorrection=b,a.bi(m,m,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bK(m,m,-this.center.lng*Math.PI/180),a.Q(m,m,k),this._globeViewProjMatrix32f=new Float32Array(m),this._globeViewProjMatrixNoCorrectionInverted=a.bl(),a.aC(this._globeViewProjMatrixNoCorrectionInverted,b);const K=a.bA();this._cameraPosition=a.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/u,a.bH(this._cameraPosition,this._cameraPosition,K,-this.rollInRadians),a.bI(this._cameraPosition,this._cameraPosition,K,this.pitchInRadians),a.bH(this._cameraPosition,this._cameraPosition,K,-this.bearingInRadians),a.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bI(this._cameraPosition,this._cameraPosition,K,-this.center.lat*Math.PI/180),a.bJ(this._cameraPosition,this._cameraPosition,K,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(u);const N=a.bg(this._globeViewProjMatrixNoCorrectionInverted);a.Q(N,N,[1,1,-1]),this._cachedFrustum=$e.fromInvProjectionMatrix(N,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(u){a.w("calculateFogMatrix is not supported on globe projection.");const m=a.bl();return a.as(m),m}getVisibleUnwrappedCoordinates(u){return[new a.bd(0,u)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(u){u&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,m){if(!this._globeViewProjMatrixNoCorrection)return 1;const b=_o(u);a.b0(b,b,1+m/a.bF);const S=a.bG();return a.aI(S,[b[0],b[1],b[2],1],this._globeViewProjMatrixNoCorrection),S[2]/S[3]}populateCache(u){}getBounds(){const u=.5*this.width,m=.5*this.height,b=[new a.P(0,0),new a.P(u,0),new a.P(this.width,0),new a.P(this.width,m),new a.P(this.width,this.height),new a.P(u,this.height),new a.P(0,this.height),new a.P(0,m)],S=[];for(const ye of b)S.push(this.unprojectScreenPoint(ye));let k=0,K=0,N=0,H=0;const se=this.center;for(const ye of S){const ge=a.bL(se.lng,ye.lng),Se=a.bL(se.lat,ye.lat);ge<K&&(K=ge),ge>k&&(k=ge),Se<H&&(H=Se),Se>N&&(N=Se)}const ce=[se.lng+K,se.lat+H,se.lng+k,se.lat+N];return this.isSurfacePointOnScreen([0,1,0])&&(ce[3]=90,ce[0]=-180,ce[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ce[1]=-90,ce[0]=-180,ce[2]=180),new nn(ce)}calculateCenterFromCameraLngLatAlt(u,m,b,S){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,b,S)}setLocationAtPoint(u,m){const b=_o(this.unprojectScreenPoint(m)),S=_o(u),k=a.bA();a.bM(k);const K=a.bA();a.bJ(K,b,k,-this.center.lng*Math.PI/180),a.bI(K,K,k,this.center.lat*Math.PI/180);const N=S[0]*S[0]+S[2]*S[2],H=K[0]*K[0];if(N<H)return;const se=Math.sqrt(N-H),ce=-se,ye=a.bN(S[0],S[2],K[0],se),ge=a.bN(S[0],S[2],K[0],ce),Se=a.bA();a.bJ(Se,S,k,-ye);const Le=a.bN(Se[1],Se[2],K[1],K[2]),Je=a.bA();a.bJ(Je,S,k,-ge);const nt=a.bN(Je[1],Je[2],K[1],K[2]),tt=.5*Math.PI,rt=Le>=-tt&&Le<=tt,ft=nt>=-tt&&nt<=tt;let lt,pt;if(rt&&ft){const zt=this.center.lng*Math.PI/180,jt=this.center.lat*Math.PI/180;a.bO(ye,zt)+a.bO(Le,jt)<a.bO(ge,zt)+a.bO(nt,jt)?(lt=ye,pt=Le):(lt=ge,pt=nt)}else if(rt)lt=ye,pt=Le;else{if(!ft)return;lt=ge,pt=nt}const _t=lt/Math.PI*180,At=pt/Math.PI*180,Tt=this.center.lat;this.setCenter(new a.V(_t,a.ao(At,-90,90))),this.setZoom(this.zoom+To(Tt,this.center.lat))}locationToScreenPoint(u,m){const b=_o(u);if(m){const S=m.getElevationForLngLatZoom(u,this._helper._tileZoom);a.b0(b,b,1+S/a.bF)}return this._projectSurfacePointToScreen(b)}_projectSurfacePointToScreen(u){const m=a.bG();return a.aI(m,[...u,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],new a.P((.5*m[0]+.5)*this.width,(.5*-m[1]+.5)*this.height)}screenPointToMercatorCoordinate(u,m){if(m){const b=m.pointCoordinate(u);if(b)return b}return a.ab.fromLngLat(this.unprojectScreenPoint(u))}screenPointToLocation(u,m){var b;return(b=this.screenPointToMercatorCoordinate(u,m))===null||b===void 0?void 0:b.toLngLat()}isPointOnMapSurface(u,m){const b=this._cameraPosition,S=this.getRayDirectionFromPixel(u);return!!this.rayPlanetIntersection(b,S)}getRayDirectionFromPixel(u){const m=a.bG();m[0]=u.x/this.width*2-1,m[1]=-1*(u.y/this.height*2-1),m[2]=1,m[3]=1,a.aI(m,m,this._globeViewProjMatrixNoCorrectionInverted),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3];const b=a.bA();b[0]=m[0]-this._cameraPosition[0],b[1]=m[1]-this._cameraPosition[1],b[2]=m[2]-this._cameraPosition[2];const S=a.bA();return a.b4(S,b),S}isSurfacePointVisible(u){const m=this._cachedClippingPlane;return m[0]*u[0]+m[1]*u[1]+m[2]*u[2]+m[3]>=0}isSurfacePointOnScreen(u){if(!this.isSurfacePointVisible(u))return!1;const m=a.bG();return a.aI(m,[...u,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3],m[0]>-1&&m[0]<1&&m[1]>-1&&m[1]<1&&m[2]>-1&&m[2]<1}rayPlanetIntersection(u,m){const b=a.b6(u,m),S=a.bA(),k=a.bA();a.b0(k,m,b),a.b3(S,u,k);const K=1-a.b6(S,S);if(K<0)return null;const N=a.b6(u,u)-1,H=-b+(b<0?1:-1)*Math.sqrt(K),se=N/H,ce=H;return{tMin:Math.min(se,ce),tMax:Math.max(se,ce)}}unprojectScreenPoint(u){const m=this._cameraPosition,b=this.getRayDirectionFromPixel(u),S=this.rayPlanetIntersection(m,b);if(S){const ce=a.bA();a.b1(ce,m,[b[0]*S.tMin,b[1]*S.tMin,b[2]*S.tMin]);const ye=a.bA();return a.b4(ye,ce),zd(ye)}const k=this._cachedClippingPlane,K=k[0]*b[0]+k[1]*b[1]+k[2]*b[2],N=-a.bc(k,m)/K,H=a.bA();if(N>0)a.b1(H,m,[b[0]*N,b[1]*N,b[2]*N]);else{const ce=a.bA();a.b1(ce,m,[2*b[0],2*b[1],2*b[2]]);const ye=a.bc(this._cachedClippingPlane,ce);a.b3(H,ce,[this._cachedClippingPlane[0]*ye,this._cachedClippingPlane[1]*ye,this._cachedClippingPlane[2]*ye])}const se=(function(ce){const ye=a.bA();return ye[0]=ce[0]*-ce[3],ye[1]=ce[1]*-ce[3],ye[2]=ce[2]*-ce[3],{center:ye,radius:Math.sqrt(1-ce[3]*ce[3])}})(k);return zd((function(ce,ye,ge){const Se=a.bA();a.b3(Se,ge,ce);const Le=a.bA();return a.bB(Le,ce,Se,ye/a.ba(Se)),Le})(se.center,se.radius,H))}getMatrixForModel(u,m){const b=a.V.convert(u),S=1/a.bF,k=a.bk();return a.bK(k,k,b.lng/180*Math.PI),a.bi(k,k,-b.lat/180*Math.PI),a.O(k,k,[0,0,1+m/a.bF]),a.bi(k,k,.5*Math.PI),a.Q(k,k,[S,S,S]),k}getProjectionDataForCustomLayer(u=!0){const m=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:u});return m.tileMercatorCoords=[0,0,1,1],m}getFastPathSimpleProjectionMatrix(u){}}class Nd{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(u){this._helper.setMinZoom(u)}setMaxZoom(u){this._helper.setMaxZoom(u)}setMinPitch(u){this._helper.setMinPitch(u)}setMaxPitch(u){this._helper.setMaxPitch(u)}setRenderWorldCopies(u){this._helper.setRenderWorldCopies(u)}setBearing(u){this._helper.setBearing(u)}setPitch(u){this._helper.setPitch(u)}setRoll(u){this._helper.setRoll(u)}setFov(u){this._helper.setFov(u)}setZoom(u){this._helper.setZoom(u)}setCenter(u){this._helper.setCenter(u)}setElevation(u){this._helper.setElevation(u)}setMinElevationForCurrentTile(u){this._helper.setMinElevationForCurrentTile(u)}setPadding(u){this._helper.setPadding(u)}interpolatePadding(u,m,b){return this._helper.interpolatePadding(u,m,b)}isPaddingEqual(u){return this._helper.isPaddingEqual(u)}resize(u,m,b=!0){this._helper.resize(u,m,b)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(u){this._helper.setMaxBounds(u)}setConstrainOverride(u){this._helper.setConstrainOverride(u)}overrideNearFarZ(u,m){this._helper.overrideNearFarZ(u,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(u){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),u)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(u,m){this._globeness=u,this._globeLatitudeErrorCorrectionRadians=m,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(u){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(m,b)=>this.currentTransform.defaultConstrain(m,b),this.applyConstrain=(m,b)=>this._helper.applyConstrain(m,b),this._helper=new Rr({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,b)=>this.defaultConstrain(m,b)},u),this._globeness=1,this._mercatorTransform=new Ot,this._verticalPerspectiveTransform=new Df}clone(){const u=new Nd;return u._globeness=this._globeness,u._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,u.apply(this),u}apply(u){this._helper.apply(u),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(u){const m=this._mercatorTransform.getProjectionData(u),b=this._verticalPerspectiveTransform.getProjectionData(u);return{mainMatrix:this.isGlobeRendering?b.mainMatrix:m.mainMatrix,clippingPlane:b.clippingPlane,tileMercatorCoords:b.tileMercatorCoords,projectionTransition:u.applyGlobeMatrix?this._globeness:0,fallbackMatrix:m.fallbackMatrix}}isLocationOccluded(u){return this.currentTransform.isLocationOccluded(u)}transformLightDirection(u){return this.currentTransform.transformLightDirection(u)}getPixelScale(){return a.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(u,m,b){const S=this._mercatorTransform.getPitchedTextCorrection(u,m,b),k=this._verticalPerspectiveTransform.getPitchedTextCorrection(u,m,b);return a.bv(S,k,this._globeness)}projectTileCoordinates(u,m,b,S){return this.currentTransform.projectTileCoordinates(u,m,b,S)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(u){return this.currentTransform.calculateFogMatrix(u)}getVisibleUnwrappedCoordinates(u){return this.currentTransform.getVisibleUnwrappedCoordinates(u)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(u){this._mercatorTransform.recalculateZoomAndCenter(u),this._verticalPerspectiveTransform.recalculateZoomAndCenter(u)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(u,m){return this.currentTransform.lngLatToCameraDepth(u,m)}populateCache(u){this._mercatorTransform.populateCache(u),this._verticalPerspectiveTransform.populateCache(u)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(u,m,b,S){return this._helper.calculateCenterFromCameraLngLatAlt(u,m,b,S)}setLocationAtPoint(u,m){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(u,m),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(u,m),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(u,m){return this.currentTransform.locationToScreenPoint(u,m)}screenPointToMercatorCoordinate(u,m){return this.currentTransform.screenPointToMercatorCoordinate(u,m)}screenPointToLocation(u,m){return this.currentTransform.screenPointToLocation(u,m)}isPointOnMapSurface(u,m){return this.currentTransform.isPointOnMapSurface(u,m)}getRayDirectionFromPixel(u){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(u)}getMatrixForModel(u,m){return this.currentTransform.getMatrixForModel(u,m)}getProjectionDataForCustomLayer(u=!0){const m=this._mercatorTransform.getProjectionDataForCustomLayer(u);if(!this.isGlobeRendering)return m;const b=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(u);return b.fallbackMatrix=m.mainMatrix,b}getFastPathSimpleProjectionMatrix(u){return this.currentTransform.getFastPathSimpleProjectionMatrix(u)}}class Gs{get useGlobeControls(){return!0}handlePanInertia(u,m){const b=e0(u,m);return Math.abs(b.lng-m.center.lng)>180&&(b.lng=m.center.lng+179.5*Math.sign(b.lng-m.center.lng)),{easingCenter:b,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(u,m){const b=u.around,S=m.screenPointToLocation(b);u.bearingDelta&&m.setBearing(m.bearing+u.bearingDelta),u.pitchDelta&&m.setPitch(m.pitch+u.pitchDelta),u.rollDelta&&m.setRoll(m.roll+u.rollDelta);const k=m.zoom;u.zoomDelta&&m.setZoom(m.zoom+u.zoomDelta);const K=m.zoom-k;if(K===0)return;const N=a.bL(m.center.lng,S.lng),H=N/(Math.abs(N/180)+1),se=a.bL(m.center.lat,S.lat),ce=m.getRayDirectionFromPixel(b),ye=m.cameraPosition,ge=-1*a.b6(ye,ce),Se=a.bA();a.b1(Se,ye,[ce[0]*ge,ce[1]*ge,ce[2]*ge]);const Le=a.b8(Se)-1,Je=Math.exp(.5*-Math.max(Le-.3,0)),nt=xA(m.worldSize,m.center.lat)/Math.min(m.width,m.height),tt=a.by(nt,.9,.5,1,.25),rt=(1-a.ar(-K))*Math.min(Je,tt),ft=m.center.lat,lt=m.zoom,pt=new a.V(m.center.lng+H*rt,a.ao(m.center.lat+se*rt,-a.ap,a.ap));m.setLocationAtPoint(S,b);const _t=m.center,At=a.by(Math.abs(N),45,85,0,1),Tt=a.by(nt,.75,.35,0,1),zt=Math.pow(Math.max(At,Tt),.25),jt=a.bL(_t.lng,pt.lng),Wt=a.bL(_t.lat,pt.lat);m.setCenter(new a.V(_t.lng+jt*zt,_t.lat+Wt*zt).wrap()),m.setZoom(lt+To(ft,m.center.lat))}handleMapControlsPan(u,m,b){if(!u.panDelta)return;const S=m.center.lat,k=m.zoom;m.setCenter(e0(u.panDelta,m).wrap()),m.setZoom(k+To(S,m.center.lat))}cameraForBoxAndBearing(u,m,b,S,k){const K=Ti(u,m,b,S,k),N=m.left/k.width*2-1,H=(k.width-m.right)/k.width*2-1,se=m.top/k.height*-2+1,ce=(k.height-m.bottom)/k.height*-2+1,ye=a.bL(b.getWest(),b.getEast())<0,ge=ye?b.getEast():b.getWest(),Se=ye?b.getWest():b.getEast(),Le=Math.max(b.getNorth(),b.getSouth()),Je=Math.min(b.getNorth(),b.getSouth()),nt=ge+.5*a.bL(ge,Se),tt=Le+.5*a.bL(Le,Je),rt=k.clone();rt.setCenter(K.center),rt.setBearing(K.bearing),rt.setPitch(0),rt.setRoll(0),rt.setZoom(K.zoom);const ft=rt.modelViewProjectionMatrix,lt=[_o(b.getNorthWest()),_o(b.getNorthEast()),_o(b.getSouthWest()),_o(b.getSouthEast()),_o(new a.V(Se,tt)),_o(new a.V(ge,tt)),_o(new a.V(nt,Le)),_o(new a.V(nt,Je))],pt=_o(K.center);let _t=Number.POSITIVE_INFINITY;for(const At of lt)N<0&&(_t=Gs.getLesserNonNegativeNonNull(_t,Gs.solveVectorScale(At,pt,ft,"x",N))),H>0&&(_t=Gs.getLesserNonNegativeNonNull(_t,Gs.solveVectorScale(At,pt,ft,"x",H))),se>0&&(_t=Gs.getLesserNonNegativeNonNull(_t,Gs.solveVectorScale(At,pt,ft,"y",se))),ce<0&&(_t=Gs.getLesserNonNegativeNonNull(_t,Gs.solveVectorScale(At,pt,ft,"y",ce)));if(Number.isFinite(_t)&&_t!==0)return K.zoom=rt.zoom+a.au(_t),K;qn()}handleJumpToCenterZoom(u,m){const b=u.center.lat,S=u.applyConstrain(m.center?a.V.convert(m.center):u.center,u.zoom).center;u.setCenter(S.wrap());const k=m.zoom!==void 0?+m.zoom:u.zoom+To(b,S.lat);u.zoom!==k&&u.setZoom(k)}handleEaseTo(u,m){const b=u.zoom,S=u.center,k=u.padding,K={roll:u.roll,pitch:u.pitch,bearing:u.bearing},N={roll:m.roll===void 0?u.roll:m.roll,pitch:m.pitch===void 0?u.pitch:m.pitch,bearing:m.bearing===void 0?u.bearing:m.bearing},H=m.zoom!==void 0,se=!u.isPaddingEqual(m.padding);let ce=!1;const ye=m.center?a.V.convert(m.center):S,ge=u.applyConstrain(ye,b).center;el(u,ge);const Se=u.clone();Se.setCenter(ge),Se.setZoom(H?+m.zoom:b+To(S.lat,ye.lat)),Se.setBearing(m.bearing);const Le=new a.P(a.ao(u.centerPoint.x+m.offsetAsPoint.x,0,u.width),a.ao(u.centerPoint.y+m.offsetAsPoint.y,0,u.height));Se.setLocationAtPoint(ge,Le);const Je=(m.offset&&m.offsetAsPoint.mag())>0?Se.center:ge,nt=H?+m.zoom:b+To(S.lat,Je.lat),tt=b+To(S.lat,0),rt=nt+To(Je.lat,0),ft=a.bL(S.lng,Je.lng),lt=a.bL(S.lat,Je.lat),pt=a.ar(rt-tt);return ce=nt!==b,{easeFunc:_t=>{if(a.bp(K,N)||Rn({startEulerAngles:K,endEulerAngles:N,tr:u,k:_t,useSlerp:K.roll!=N.roll}),se&&u.interpolatePadding(k,m.padding,_t),m.around)a.w("Easing around a point is not supported under globe projection."),u.setLocationAtPoint(m.around,m.aroundPoint);else{const At=rt>tt?Math.min(2,pt):Math.max(.5,pt),Tt=Math.pow(At,1-_t),zt=n0(S,ft,lt,_t*Tt);u.setCenter(zt.wrap())}if(ce){const At=a.G.number(tt,rt,_t)+To(0,u.center.lat);u.setZoom(At)}},isZooming:ce,elevationCenter:Je}}handleFlyTo(u,m){const b=m.zoom!==void 0,S=u.center,k=u.zoom,K=u.padding,N=!u.isPaddingEqual(m.padding),H=u.applyConstrain(a.V.convert(m.center||m.locationAtOffset),k).center,se=b?+m.zoom:u.zoom+To(u.center.lat,H.lat),ce=u.clone();ce.setCenter(H),ce.setZoom(se),ce.setBearing(m.bearing);const ye=new a.P(a.ao(u.centerPoint.x+m.offsetAsPoint.x,0,u.width),a.ao(u.centerPoint.y+m.offsetAsPoint.y,0,u.height));ce.setLocationAtPoint(H,ye);const ge=ce.center;el(u,ge);const Se=(function(lt,pt,_t){const At=_o(pt),Tt=_o(_t),zt=a.b6(At,Tt),jt=Math.acos(zt),Wt=nu(lt);return jt/(2*Math.PI)*Wt})(u,S,ge),Le=k+To(S.lat,0),Je=se+To(ge.lat,0),nt=a.ar(Je-Le);let tt;if(typeof m.minZoom=="number"){const lt=+m.minZoom+To(ge.lat,0),pt=Math.min(lt,Le,Je)+To(0,ge.lat),_t=u.applyConstrain(ge,pt).zoom+To(ge.lat,0);tt=a.ar(_t-Le)}const rt=a.bL(S.lng,ge.lng),ft=a.bL(S.lat,ge.lat);return{easeFunc:(lt,pt,_t,At)=>{const Tt=n0(S,rt,ft,_t);N&&u.interpolatePadding(K,m.padding,lt);const zt=lt===1?ge:Tt;u.setCenter(zt.wrap());const jt=Le+a.au(pt);u.setZoom(lt===1?se:jt+To(0,zt.lat))},scaleOfZoom:nt,targetCenter:ge,scaleOfMinZoom:tt,pixelPathLength:Se}}static solveVectorScale(u,m,b,S,k){const K=S==="x"?[b[0],b[4],b[8],b[12]]:[b[1],b[5],b[9],b[13]],N=[b[3],b[7],b[11],b[15]],H=u[0]*K[0]+u[1]*K[1]+u[2]*K[2],se=u[0]*N[0]+u[1]*N[1]+u[2]*N[2],ce=m[0]*K[0]+m[1]*K[1]+m[2]*K[2],ye=m[0]*N[0]+m[1]*N[1]+m[2]*N[2];return ce+k*se===H+k*ye||N[3]*(H-ce)+K[3]*(ye-se)+H*ye==ce*se?null:(ce+K[3]-k*ye-k*N[3])/(ce-H-k*ye+k*se)}static getLesserNonNegativeNonNull(u,m){return m!==null&&m>=0&&m<u?m:u}}class jh{constructor(u){this._globe=u,this._mercatorCameraHelper=new Ni,this._verticalPerspectiveCameraHelper=new Gs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(u,m){return this.currentHelper.handlePanInertia(u,m)}handleMapControlsRollPitchBearingZoom(u,m){return this.currentHelper.handleMapControlsRollPitchBearingZoom(u,m)}handleMapControlsPan(u,m,b){this.currentHelper.handleMapControlsPan(u,m,b)}cameraForBoxAndBearing(u,m,b,S,k){return this.currentHelper.cameraForBoxAndBearing(u,m,b,S,k)}handleJumpToCenterZoom(u,m){this.currentHelper.handleJumpToCenterZoom(u,m)}handleEaseTo(u,m){return this.currentHelper.handleEaseTo(u,m)}handleFlyTo(u,m){return this.currentHelper.handleFlyTo(u,m)}}const Nh=(I,u)=>a.B(I,u&&u.filter((m=>m.identifier!=="source.canvas"))),Gd=a.bP();class Gh extends a.E{constructor(u,m={}){var b,S;super(),this._rtlPluginLoaded=()=>{for(const K in this.tileManagers){const N=this.tileManagers[K].getSource().type;N!=="vector"&&N!=="geojson"||this.tileManagers[K].reload()}},this.map=u,this.dispatcher=new Te(ke(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",((K,N)=>this.getGlyphs(K,N))),this.dispatcher.registerMessageHandler("GI",((K,N)=>this.getImages(K,N))),this.dispatcher.registerMessageHandler("GDA",((K,N)=>this.getDashes(K,N))),this.imageManager=new Be,this.imageManager.setEventedParent(this);const k=((b=u._container)===null||b===void 0?void 0:b.lang)||typeof document<"u"&&((S=document.documentElement)===null||S===void 0?void 0:S.lang)||void 0;this.glyphManager=new Ve(u._requestManager,m.localIdeographFontFamily,k),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new ns,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bQ()),We().on(Ae,this._rtlPluginLoaded),this.on("data",(K=>{if(K.dataType!=="source"||K.sourceDataType!=="metadata")return;const N=this.tileManagers[K.sourceId];if(!N)return;const H=N.getSource();if(H&&H.vectorLayerIds)for(const se in this._layers){const ce=this._layers[se];ce.source===H.id&&this._validateLayer(ce)}}))}_setInitialValues(){var u;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((u=this.crossTileSymbolIndex)===null||u===void 0?void 0:u.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(u,m){var b,S,k;this._checkLoaded();const K=m===null?(k=(S=(b=this.stylesheet.state)===null||b===void 0?void 0:b[u])===null||S===void 0?void 0:S.default)!==null&&k!==void 0?k:null:m;if(a.bS(K,this._globalState[u]))return this;this._globalState[u]=K,this._applyGlobalStateChanges([u])}getGlobalState(){return this._globalState}setGlobalState(u){this._checkLoaded();const m=[];for(const b in u)!a.bS(this._globalState[b],u[b].default)&&(m.push(b),this._globalState[b]=u[b].default);this._applyGlobalStateChanges(m)}_applyGlobalStateChanges(u){if(u.length===0)return;const m=new Set,b={};for(const S of u){b[S]=this._globalState[S];for(const k in this._layers){const K=this._layers[k],N=K.getLayoutAffectingGlobalStateRefs(),H=K.getPaintAffectingGlobalStateRefs();if(N.has(S)&&m.add(K.source),H.has(S))for(const{name:se,value:ce}of H.get(S))this._updatePaintProperty(K,se,ce)}}this.dispatcher.broadcast("UGS",b);for(const S in this.tileManagers)m.has(S)&&(this._reloadSource(S),this._changed=!0)}loadURL(u,m={},b){this.fire(new a.l("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const S=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController;const k=this._loadStyleRequest;a.j(S,this._loadStyleRequest).then((K=>{this._loadStyleRequest=null,this._load(K.data,m,b)})).catch((K=>{this._loadStyleRequest=null,K&&!k.signal.aborted&&this.fire(new a.k(K))}))}loadJSON(u,m={},b){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,m.validate=m.validate!==!1,this._load(u,m,b)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Gd,{validate:!1})}_load(u,m,b){var S,k;let K=m.transformStyle?m.transformStyle(b,u):u;if(!m.validate||!Nh(this,a.C(K))){K=Object.assign({},K),this._loaded=!0,this.stylesheet=K;for(const N in K.sources)this.addSource(N,K.sources[N],{validate:!1});K.sprite?this._loadSprite(K.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(K.glyphs),this._createLayers(),this.light=new Pe(this.stylesheet.light),this._setProjectionInternal(((S=this.stylesheet.projection)===null||S===void 0?void 0:S.type)||"mercator"),this.sky=new Xe(this.stylesheet.sky),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var u,m,b;const S=a.bT(this.stylesheet.layers);this.setGlobalState((u=this.stylesheet.state)!==null&&u!==void 0?u:null),this.dispatcher.broadcast("SL",S),this._order=S.map((k=>k.id)),this._layers={},this._serializedLayers=null;for(const k of S){const K=a.bU(k,this._globalState);if(K.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=K,a.bV(K)&&this.tileManagers[K.source]){const N=(b=(m=k.paint)===null||m===void 0?void 0:m["raster-fade-duration"])!==null&&b!==void 0?b:K.paint.get("raster-fade-duration");this.tileManagers[K.source].setRasterFadeDuration(N)}}}_loadSprite(u,m=!1,b=void 0){this.imageManager.setLoaded(!1);const S=new AbortController;let k;this._spriteRequest=S,(function(K,N,H,se){return a._(this,void 0,void 0,(function*(){const ce=ue(K),ye=H>1?"@2x":"",ge={},Se={};for(const{id:Le,url:Je}of ce){const nt=N.transformRequest(ve(Je,ye,".json"),"SpriteJSON");ge[Le]=a.j(nt,se);const tt=N.transformRequest(ve(Je,ye,".png"),"SpriteImage");Se[Le]=q.getImage(tt,se)}return yield Promise.all([...Object.values(ge),...Object.values(Se)]),(function(Le,Je){return a._(this,void 0,void 0,(function*(){const nt={};for(const tt in Le){nt[tt]={};const rt=E.getImageCanvasContext((yield Je[tt]).data),ft=(yield Le[tt]).data;for(const lt in ft){const{width:pt,height:_t,x:At,y:Tt,sdf:zt,pixelRatio:jt,stretchX:Wt,stretchY:qt,content:fn,textFitWidth:Pn,textFitHeight:hn}=ft[lt];nt[tt][lt]={data:null,pixelRatio:jt,sdf:zt,stretchX:Wt,stretchY:qt,content:fn,textFitWidth:Pn,textFitHeight:hn,spriteData:{width:pt,height:_t,x:At,y:Tt,context:rt}}}}return nt}))})(ge,Se)}))})(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((K=>{if(this._spriteRequest=null,K)for(const N in K){this._spritesImagesIds[N]=[];const H=this._spritesImagesIds[N]?this._spritesImagesIds[N].filter((se=>!(se in K))):[];for(const se of H)this.imageManager.removeImage(se),this._changedImages[se]=!0;for(const se in K[N]){const ce=N==="default"?se:`${N}:${se}`;this._spritesImagesIds[N].push(ce),ce in this.imageManager.images?this.imageManager.updateImage(ce,K[N][se],!1):this.imageManager.addImage(ce,K[N][se]),m&&(this._changedImages[ce]=!0)}}})).catch((K=>{this._spriteRequest=null,k=K,S.signal.aborted||this.fire(new a.k(k))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),b&&b(k)}))}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(u){const m=this.tileManagers[u.source];if(!m)return;const b=u.sourceLayer;if(!b)return;const S=m.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(b)===-1)&&this.fire(new a.k(new Error(`Source layer "${b}" does not exist on source "${S.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.tileManagers)if(!this.tileManagers[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u,m=!1){const b=this._serializedAllLayers();if(!u||u.length===0)return Object.values(m?a.bW(b):b);const S=[];for(const k of u)if(b[k]){const K=m?a.bW(b[k]):b[k];S.push(K)}return S}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const m=Object.keys(this._layers);for(const b of m){const S=this._layers[b];S.type!=="custom"&&(u[b]=S.serialize())}return u}hasTransitions(){var u,m,b;if(!((u=this.light)===null||u===void 0)&&u.hasTransition()||!((m=this.sky)===null||m===void 0)&&m.hasTransition()||!((b=this.projection)===null||b===void 0)&&b.hasTransition())return!0;for(const S in this.tileManagers)if(this.tileManagers[S].hasTransition())return!0;for(const S in this._layers)if(this._layers[S].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const m=this._changed;if(m){const S=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(S.length||k.length)&&this._updateWorkerLayers(S,k);for(const K in this._updatedSources){const N=this._updatedSources[K];if(N==="reload")this._reloadSource(K);else{if(N!=="clear")throw new Error(`Invalid action ${N}`);this._clearSource(K)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const K in this._updatedPaintProps)this._layers[K].updateTransitions(u);this.light.updateTransitions(u),this.sky.updateTransitions(u),this._resetUpdates()}const b={};for(const S in this.tileManagers){const k=this.tileManagers[S];b[S]=k.used,k.used=!1}for(const S of this._order){const k=this._layers[S];k.recalculate(u,this._availableImages),!k.isHidden(u.zoom)&&k.source&&(this.tileManagers[k.source].used=!0)}for(const S in b){const k=this.tileManagers[S];!!b[S]!=!!k.used&&k.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(u),this.sky.recalculate(u),this.projection.recalculate(u),this.z=u.zoom,m&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this.tileManagers)this.tileManagers[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u,!1),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,m={}){var b;this._checkLoaded();const S=this.serialize();if(u=m.transformStyle?m.transformStyle(S,u):u,((b=m.validate)===null||b===void 0||b)&&Nh(this,a.C(u)))return!1;(u=a.bW(u)).layers=a.bT(u.layers);const k=a.bX(S,u),K=this._getOperationsToPerform(k);if(K.unimplemented.length>0)throw new Error(`Unimplemented: ${K.unimplemented.join(", ")}.`);if(K.operations.length===0)return!1;for(const N of K.operations)N();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const m=[],b=[];for(const S of u)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":m.push((()=>this.addLayer.apply(this,S.args)));break;case"removeLayer":m.push((()=>this.removeLayer.apply(this,S.args)));break;case"setPaintProperty":m.push((()=>this.setPaintProperty.apply(this,S.args)));break;case"setLayoutProperty":m.push((()=>this.setLayoutProperty.apply(this,S.args)));break;case"setFilter":m.push((()=>this.setFilter.apply(this,S.args)));break;case"addSource":m.push((()=>this.addSource.apply(this,S.args)));break;case"removeSource":m.push((()=>this.removeSource.apply(this,S.args)));break;case"setLayerZoomRange":m.push((()=>this.setLayerZoomRange.apply(this,S.args)));break;case"setLight":m.push((()=>this.setLight.apply(this,S.args)));break;case"setGeoJSONSourceData":m.push((()=>this.setGeoJSONSourceData.apply(this,S.args)));break;case"setGlyphs":m.push((()=>this.setGlyphs.apply(this,S.args)));break;case"setSprite":m.push((()=>this.setSprite.apply(this,S.args)));break;case"setTerrain":m.push((()=>this.map.setTerrain.apply(this,S.args)));break;case"setSky":m.push((()=>this.setSky.apply(this,S.args)));break;case"setProjection":this.setProjection.apply(this,S.args);break;case"setGlobalState":m.push((()=>this.setGlobalState.apply(this,S.args)));break;case"setTransition":m.push((()=>{}));break;default:b.push(S.command)}return{operations:m,unimplemented:b}}addImage(u,m){if(this.getImage(u))return this.fire(new a.k(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,m),this._afterImageUpdated(u)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.k(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,m,b={}){if(this._checkLoaded(),this.tileManagers[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(a.C.source,`sources.${u}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const S=this.tileManagers[u]=new lo(u,m,this.dispatcher);S.style=this,S.setEventedParent(this,(()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:u}))),S.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.tileManagers[u]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===u)return this.fire(new a.k(new Error(`Source "${u}" cannot be removed while layer "${b}" is using it.`)));const m=this.tileManagers[u];delete this.tileManagers[u],delete this._updatedSources[u],m.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,m){if(this._checkLoaded(),this.tileManagers[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const b=this.tileManagers[u].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(m),this._changed=!0}getSource(u){return this.tileManagers[u]&&this.tileManagers[u].getSource()}addLayer(u,m,b={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new a.k(new Error(`Layer "${S}" already exists on this map.`)));let k;if(u.type==="custom"){if(Nh(this,a.bY(u)))return;k=a.bU(u,this._globalState)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(S,u.source),u=a.bW(u),u=a.e(u,{source:S})),this._validate(a.C.layer,`layers.${S}`,u,{arrayIndex:-1},b))return;k=a.bU(u,this._globalState),this._validateLayer(k),k.setEventedParent(this,{layer:{id:S}})}const K=m?this._order.indexOf(m):this._order.length;if(m&&K===-1)this.fire(new a.k(new Error(`Cannot add layer "${S}" before non-existing layer "${m}".`)));else{if(this._order.splice(K,0,S),this._layerOrderChanged=!0,this._layers[S]=k,this._removedLayers[S]&&k.source&&k.type!=="custom"){const N=this._removedLayers[S];delete this._removedLayers[S],N.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.tileManagers[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.k(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const b=this._order.indexOf(u);this._order.splice(b,1);const S=m?this._order.indexOf(m):this._order.length;m&&S===-1?this.fire(new a.k(new Error(`Cannot move layer "${u}" before non-existing layer "${m}".`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${u}".`)));m.setEventedParent(null);const b=this._order.indexOf(u);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,m,b){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===m&&S.maxzoom===b||(m!=null&&(S.minzoom=m),b!=null&&(S.maxzoom=b),this._updateLayer(S)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,m,b={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!a.bS(S.filter,m))return m==null?(S.setFilter(void 0),void this._updateLayer(S)):void(this._validate(a.C.filter,`layers.${S.id}.filter`,m,null,b)||(S.setFilter(a.bW(m)),this._updateLayer(S)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.bW(this.getLayer(u).filter)}setLayoutProperty(u,m,b,S={}){this._checkLoaded();const k=this.getLayer(u);k?a.bS(k.getLayoutProperty(m),b)||(k.setLayoutProperty(m,b,S),this._updateLayer(k)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,m){const b=this.getLayer(u);if(b)return b.getLayoutProperty(m);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,m,b,S={}){this._checkLoaded();const k=this.getLayer(u);k?a.bS(k.getPaintProperty(m),b)||this._updatePaintProperty(k,m,b,S):this.fire(new a.k(new Error(`Cannot style non-existing layer "${u}".`)))}_updatePaintProperty(u,m,b,S={}){u.setPaintProperty(m,b,S)&&this._updateLayer(u),a.bV(u)&&m==="raster-fade-duration"&&this.tileManagers[u.source].setRasterFadeDuration(b),this._changed=!0,this._updatedPaintProps[u.id]=!0,this._serializedLayers=null}getPaintProperty(u,m){return this.getLayer(u).getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const b=u.source,S=u.sourceLayer,k=this.tileManagers[b];if(k===void 0)return void this.fire(new a.k(new Error(`The source '${b}' does not exist in the map's style.`)));const K=k.getSource().type;K==="geojson"&&S?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):K!=="vector"||S?(u.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),k.setFeatureState(S,u.id,m)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,m){this._checkLoaded();const b=u.source,S=this.tileManagers[b];if(S===void 0)return void this.fire(new a.k(new Error(`The source '${b}' does not exist in the map's style.`)));const k=S.getSource().type,K=k==="vector"?u.sourceLayer:void 0;k!=="vector"||K?m&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(K,u.id,m):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const m=u.source,b=u.sourceLayer,S=this.tileManagers[m];if(S!==void 0)return S.getSource().type!=="vector"||b?(u.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),S.getFeatureState(b,u.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.bZ(this.tileManagers,(k=>k.serialize())),m=this._serializeByIds(this._order,!0),b=this.map.getTerrain()||void 0,S=this.stylesheet;return a.b_({version:S.version,name:S.name,metadata:S.metadata,light:S.light,sky:S.sky,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,projection:S.projection,sources:u,layers:m,terrain:b},(k=>k!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.tileManagers[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.tileManagers[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const m=K=>this._layers[K].type==="fill-extrusion",b={},S=[];for(let K=this._order.length-1;K>=0;K--){const N=this._order[K];if(m(N)){b[N]=K;for(const H of u){const se=H[N];if(se)for(const ce of se)S.push(ce)}}}S.sort(((K,N)=>N.intersectionZ-K.intersectionZ));const k=[];for(let K=this._order.length-1;K>=0;K--){const N=this._order[K];if(m(N))for(let H=S.length-1;H>=0;H--){const se=S[H].feature;if(b[se.layer.id]<K)break;k.push(se),S.pop()}else for(const H of u){const se=H[N];if(se)for(const ce of se)k.push(ce.feature)}}return k}queryRenderedFeatures(u,m,b){m&&m.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",m.filter,null,m);const S={};if(m&&m.layers){if(!(Array.isArray(m.layers)||m.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const se of m.layers){const ce=this._layers[se];if(!ce)return this.fire(new a.k(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];S[ce.source]=!0}}const k=[];m.availableImages=this._availableImages;const K=this._serializedAllLayers(),N=m.layers instanceof Set?m.layers:Array.isArray(m.layers)?new Set(m.layers):null,H=Object.assign(Object.assign({},m),{layers:N,globalState:this._globalState});for(const se in this.tileManagers)m.layers&&!S[se]||k.push(vt(this.tileManagers[se],this._layers,K,u,H,b,this.map.terrain?(ce,ye,ge)=>this.map.terrain.getElevation(ce,ye,ge):void 0));return this.placement&&k.push((function(se,ce,ye,ge,Se,Le,Je){const nt={},tt=Le.queryRenderedSymbols(ge),rt=[];for(const ft of Object.keys(tt).map(Number))rt.push(Je[ft]);rt.sort(wt);for(const ft of rt){const lt=ft.featureIndex.lookupSymbolFeatures(tt[ft.bucketInstanceId],ce,ft.bucketIndex,ft.sourceLayerIndex,{filterSpec:Se.filter,globalState:Se.globalState},Se.layers,Se.availableImages,se);for(const pt in lt){const _t=nt[pt]=nt[pt]||[],At=lt[pt];At.sort(((Tt,zt)=>{const jt=ft.featureSortOrder;if(jt){const Wt=jt.indexOf(Tt.featureIndex);return jt.indexOf(zt.featureIndex)-Wt}return zt.featureIndex-Tt.featureIndex}));for(const Tt of At)_t.push(Tt)}}return(function(ft,lt,pt){for(const _t in ft)for(const At of ft[_t])Ft(At,pt[lt[_t].source]);return ft})(nt,se,ye)})(this._layers,K,this.tileManagers,u,H,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(u,m){m?.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",m.filter,null,m);const b=this.tileManagers[u];return b?(function(S,k){const K=S.getRenderableIds().map((se=>S.getTileByID(se))),N=[],H={};for(let se=0;se<K.length;se++){const ce=K[se],ye=ce.tileID.canonical.key;H[ye]||(H[ye]=!0,ce.querySourceFeatures(N,k))}return N})(b,m?Object.assign(Object.assign({},m),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const b=this.light.getLight();let S=!1;for(const K in u)if(!a.bS(u[K],b[K])){S=!0;break}if(!S)return;const k={now:U(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,m),this.light.updateTransitions(k)}getProjection(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.projection}setProjection(u){if(this._checkLoaded(),this.projection){if(this.projection.name===u.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=u,this._setProjectionInternal(u.type)}getSky(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.sky}setSky(u,m={}){this._checkLoaded();const b=this.getSky();let S=!1;if(!u&&!b)return;if(u&&!b)S=!0;else if(!u&&b)S=!0;else for(const K in u)if(!a.bS(u[K],b[K])){S=!0;break}if(!S)return;const k={now:U(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=u,this.sky.setSky(u,m),this.sky.updateTransitions(k)}_setProjectionInternal(u){const m=(function(b,S){const k={constrainOverride:S};if(Array.isArray(b)){const K=new Ou({type:b});return{projection:K,transform:new Nd(k),cameraHelper:new jh(K)}}switch(b){case"mercator":return{projection:new Hr,transform:new Ot(k),cameraHelper:new Ni};case"globe":{const K=new Ou({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:K,transform:new Nd(k),cameraHelper:new jh(K)}}case"vertical-perspective":return{projection:new gs,transform:new Df(k),cameraHelper:new Gs};default:return a.w(`Unknown projection name: ${b}. Falling back to mercator projection.`),{projection:new Hr,transform:new Ot(k),cameraHelper:new Ni}}})(u,this.map.transformConstrain);this.projection=m.projection,this.map.migrateProjection(m.transform,m.cameraHelper);for(const b in this.tileManagers)this.tileManagers[b].reload()}_validate(u,m,b,S,k={}){return(!k||k.validate!==!1)&&Nh(this,u.call(a.C,a.e({key:m,style:this.serialize(),value:b,styleSpec:a.u},S)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),We().off(Ae,this._rtlPluginLoaded);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.tileManagers){const b=this.tileManagers[m];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.tileManagers[u].clearTiles()}_reloadSource(u){this.tileManagers[u].resume(),this.tileManagers[u].reload()}_updateSources(u){for(const m in this.tileManagers)this.tileManagers[m].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.tileManagers)this._reloadSource(u)}_updatePlacement(u,m,b,S,k=!1){let K=!1,N=!1;const H={};for(const se of this._order){const ce=this._layers[se];if(ce.type!=="symbol")continue;if(!H[ce.source]){const ge=this.tileManagers[ce.source];H[ce.source]=ge.getRenderableIds(!0).map((Se=>ge.getTileByID(Se))).sort(((Se,Le)=>Le.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(Le.tileID)?-1:1)))}const ye=this.crossTileSymbolIndex.addLayer(ce,H[ce.source],u.center.lng);K=K||ye}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U(),u.zoom))&&(this.pauseablePlacement=new Zu(u,this.map.terrain,this._order,k,m,b,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,H),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U()),N=!0),K&&this.pauseablePlacement.placement.setStale()),N||K)for(const se of this._order){const ce=this._layers[se];ce.type==="symbol"&&this.placement.updateLayerOpacities(ce,H[ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U())}_releaseSymbolFadeTiles(){for(const u in this.tileManagers)this.tileManagers[u].releaseSymbolFadeTiles()}getImages(u,m){return a._(this,void 0,void 0,(function*(){const b=yield this.imageManager.getImages(m.icons);this._updateTilesForChangedImages();const S=this.tileManagers[m.source];return S&&S.setDependencies(m.tileID.key,m.type,m.icons),b}))}getGlyphs(u,m){return a._(this,void 0,void 0,(function*(){const b=yield this.glyphManager.getGlyphs(m.stacks),S=this.tileManagers[m.source];return S&&S.setDependencies(m.tileID.key,m.type,[""]),b}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,m={}){this._checkLoaded(),u&&this._validate(a.C.glyphs,"glyphs",u,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}getDashes(u,m){return a._(this,void 0,void 0,(function*(){const b={};for(const[S,k]of Object.entries(m.dashes))b[S]=this.lineAtlas.getDash(k.dasharray,k.round);return b}))}addSprite(u,m,b={},S){this._checkLoaded();const k=[{id:u,url:m}],K=[...ue(this.stylesheet.sprite),...k];this._validate(a.C.sprite,"sprite",K,null,b)||(this.stylesheet.sprite=K,this._loadSprite(k,!0,S))}removeSprite(u){this._checkLoaded();const m=ue(this.stylesheet.sprite);if(m.find((b=>b.id===u))){if(this._spritesImagesIds[u])for(const b of this._spritesImagesIds[u])this.imageManager.removeImage(b),this._changedImages[b]=!0;m.splice(m.findIndex((b=>b.id===u)),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return ue(this.stylesheet.sprite)}setSprite(u,m={},b){this._checkLoaded(),u&&this._validate(a.C.sprite,"sprite",u,null,m)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,b):(this._unloadSprite(),b&&b(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const u in this.tileManagers){const m=this.tileManagers[u];m.setEventedParent(null),m.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const u in this._layers){const m=this._layers[u];m.setEventedParent(null),m.onRemove&&m.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var r0=a.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Wd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,m,b,S,k,K,N,H,se){this.context=u;let ce=this.boundPaintVertexBuffers.length!==S.length;for(let ye=0;!ce&&ye<S.length;ye++)this.boundPaintVertexBuffers[ye]!==S[ye]&&(ce=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||ce||this.boundIndexBuffer!==k||this.boundVertexOffset!==K||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==H||this.boundDynamicVertexBuffer3!==se?this.freshBind(m,b,S,k,K,N,H,se):(u.bindVertexArray.set(this.vao),N&&N.bind(),k&&k.dynamicDraw&&k.bind(),H&&H.bind(),se&&se.bind())}freshBind(u,m,b,S,k,K,N,H){const se=u.numAttributes,ce=this.context,ye=ce.gl;this.vao&&this.destroy(),this.vao=ce.createVertexArray(),ce.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=S,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=K,this.boundDynamicVertexBuffer2=N,this.boundDynamicVertexBuffer3=H,m.enableAttributes(ye,u);for(const ge of b)ge.enableAttributes(ye,u);K&&K.enableAttributes(ye,u),N&&N.enableAttributes(ye,u),H&&H.enableAttributes(ye,u),m.bind(),m.setVertexAttribPointers(ye,u,k);for(const ge of b)ge.bind(),ge.setVertexAttribPointers(ye,u,k);K&&(K.bind(),K.setVertexAttribPointers(ye,u,k)),S&&S.bind(),N&&(N.bind(),N.setVertexAttribPointers(ye,u,k)),H&&(H.bind(),H.setVertexAttribPointers(ye,u,k)),ce.currentNumAttributes=se}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ty=(I,u,m,b,S)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:u,u_fog_color:m?m.properties.get("fog-color"):a.bq.white,u_fog_ground_blend:m?m.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:S?0:m?m.calculateFogBlendOpacity(b):0,u_horizon_color:m?m.properties.get("horizon-color"):a.bq.white,u_horizon_fog_blend:m?m.properties.get("horizon-fog-blend"):1,u_is_globe_mode:S?1:0}),Mc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Tl(I){const u=[];for(let m=0;m<I.length;m++){if(I[m]===null)continue;const b=I[m].split(" ");u.push(b.pop())}return u}class o0{constructor(u,m,b,S,k,K,N,H,se=[]){const ce=u.gl;this.program=ce.createProgram();const ye=Tl(m.staticAttributes),ge=b?b.getBinderAttributes():[],Se=ye.concat(ge),Le=po.prelude.staticUniforms?Tl(po.prelude.staticUniforms):[],Je=N.staticUniforms?Tl(N.staticUniforms):[],nt=m.staticUniforms?Tl(m.staticUniforms):[],tt=b?b.getBinderUniforms():[],rt=Le.concat(Je).concat(nt).concat(tt),ft=[];for(const jt of rt)ft.indexOf(jt)<0&&ft.push(jt);const lt=b?b.defines():[];Oo(ce)&&lt.unshift("#version 300 es"),k&&lt.push("#define OVERDRAW_INSPECTOR;"),K&&lt.push("#define TERRAIN3D;"),H&&lt.push(H),se&&lt.push(...se);let pt=lt.concat(po.prelude.fragmentSource,N.fragmentSource,m.fragmentSource).join(`
`),_t=lt.concat(po.prelude.vertexSource,N.vertexSource,m.vertexSource).join(`
`);Oo(ce)||(pt=(function(jt){return jt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(pt),_t=(function(jt){return jt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(_t));const At=ce.createShader(ce.FRAGMENT_SHADER);if(ce.isContextLost())return void(this.failedToCreate=!0);if(ce.shaderSource(At,pt),ce.compileShader(At),!ce.getShaderParameter(At,ce.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ce.getShaderInfoLog(At)}`);ce.attachShader(this.program,At);const Tt=ce.createShader(ce.VERTEX_SHADER);if(ce.isContextLost())return void(this.failedToCreate=!0);if(ce.shaderSource(Tt,_t),ce.compileShader(Tt),!ce.getShaderParameter(Tt,ce.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ce.getShaderInfoLog(Tt)}`);ce.attachShader(this.program,Tt),this.attributes={};const zt={};this.numAttributes=Se.length;for(let jt=0;jt<this.numAttributes;jt++)Se[jt]&&(ce.bindAttribLocation(this.program,jt,Se[jt]),this.attributes[Se[jt]]=jt);if(ce.linkProgram(this.program),!ce.getProgramParameter(this.program,ce.LINK_STATUS))throw new Error(`Program failed to link: ${ce.getProgramInfoLog(this.program)}`);ce.deleteShader(Tt),ce.deleteShader(At);for(let jt=0;jt<ft.length;jt++){const Wt=ft[jt];if(Wt&&!zt[Wt]){const qt=ce.getUniformLocation(this.program,Wt);qt&&(zt[Wt]=qt)}}this.fixedUniforms=S(u,zt),this.terrainUniforms=((jt,Wt)=>({u_depth:new a.b$(jt,Wt.u_depth),u_terrain:new a.b$(jt,Wt.u_terrain),u_terrain_dim:new a.br(jt,Wt.u_terrain_dim),u_terrain_matrix:new a.c1(jt,Wt.u_terrain_matrix),u_terrain_unpack:new a.c2(jt,Wt.u_terrain_unpack),u_terrain_exaggeration:new a.br(jt,Wt.u_terrain_exaggeration)}))(u,zt),this.projectionUniforms=((jt,Wt)=>({u_projection_matrix:new a.c1(jt,Wt.u_projection_matrix),u_projection_tile_mercator_coords:new a.c2(jt,Wt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c2(jt,Wt.u_projection_clipping_plane),u_projection_transition:new a.br(jt,Wt.u_projection_transition),u_projection_fallback_matrix:new a.c1(jt,Wt.u_projection_fallback_matrix)}))(u,zt),this.binderUniforms=b?b.getUniforms(u,zt):[]}draw(u,m,b,S,k,K,N,H,se,ce,ye,ge,Se,Le,Je,nt,tt,rt,ft){const lt=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(b),u.setStencilMode(S),u.setColorMode(k),u.setCullFace(K),H){u.activeTexture.set(lt.TEXTURE2),lt.bindTexture(lt.TEXTURE_2D,H.depthTexture),u.activeTexture.set(lt.TEXTURE3),lt.bindTexture(lt.TEXTURE_2D,H.texture);for(const _t in this.terrainUniforms)this.terrainUniforms[_t].set(H[_t])}if(se)for(const _t in se)this.projectionUniforms[Mc[_t]].set(se[_t]);if(N)for(const _t in this.fixedUniforms)this.fixedUniforms[_t].set(N[_t]);nt&&nt.setUniforms(u,this.binderUniforms,Le,{zoom:Je});let pt=0;switch(m){case lt.LINES:pt=2;break;case lt.TRIANGLES:pt=3;break;case lt.LINE_STRIP:pt=1}for(const _t of Se.get()){const At=_t.vaos||(_t.vaos={});(At[ce]||(At[ce]=new Wd)).bind(u,this,ye,nt?nt.getPaintVertexBuffers():[],ge,_t.vertexOffset,tt,rt,ft),lt.drawElements(m,_t.primitiveLength*pt,lt.UNSIGNED_SHORT,_t.primitiveOffset*pt*2)}}}function Rf(I,u,m){const b=1/a.aO(m,1,u.transform.tileZoom),S=Math.pow(2,m.tileID.overscaledZ),k=m.tileSize*Math.pow(2,u.transform.tileZoom)/S,K=k*(m.tileID.canonical.x+m.tileID.wrap*S),N=k*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[b,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[K>>16,N>>16],u_pixel_coord_lower:[65535&K,65535&N]}}const Pm=(I,u,m,b)=>{const S=I.style.light,k=S.properties.get("position"),K=[k.x,k.y,k.z],N=a.c5();S.properties.get("anchor")==="viewport"&&a.c6(N,I.transform.bearingInRadians),a.c7(K,K,N);const H=I.transform.transformLightDirection(K),se=S.properties.get("color");return{u_lightpos:K,u_lightpos_globe:H,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+u,u_opacity:m,u_fill_translate:b}},Um=(I,u,m,b,S,k,K)=>a.e(Pm(I,u,m,b),Rf(k,I,K),{u_height_factor:-Math.pow(2,S.overscaledZ)/K.tileSize/8}),Qd=(I,u,m,b)=>a.e(Rf(u,I,m),{u_fill_translate:b}),Pf=(I,u)=>({u_world:I,u_fill_translate:u}),ny=(I,u,m,b,S)=>a.e(Qd(I,u,m,S),{u_world:b}),Lm=(I,u,m,b,S)=>{const k=I.transform;let K,N,H=0;if(m.paint.get("circle-pitch-alignment")==="map"){const se=a.aO(u,1,k.zoom);K=!0,N=[se,se],H=se/(a.a5*Math.pow(2,u.tileID.overscaledZ))*2*Math.PI*S}else K=!1,N=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+K,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:N,u_globe_extrude_scale:H,u_translate:b}},Wh=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),Qh=I=>({u_viewport_size:[I.width,I.height]}),Km=(I,u=1)=>({u_color:I,u_overlay:0,u_overlay_scale:u}),qh=(I,u,m,b)=>{const S=a.aO(I,1,u)/(a.a5*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*b;return{u_extrude_scale:a.aO(I,1,u),u_intensity:m,u_globe_extrude_scale:S}},Fm=(I,u,m,b)=>{const S=a.N();a.c8(S,0,I.width,I.height,0,0,1);const k=I.context.gl;return{u_matrix:S,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:m,u_color_ramp:b,u_opacity:u.paint.get("heatmap-opacity")}},Uf=(I,u,m)=>{const b=m.paint.get("hillshade-accent-color");let S;switch(m.paint.get("hillshade-method")){case"basic":S=4;break;case"combined":S=1;break;case"igor":S=2;break;case"multidirectional":S=3;break;default:S=0}const k=m.getIlluminationProperties();for(let K=0;K<k.directionRadians.length;K++)m.paint.get("hillshade-illumination-anchor")==="viewport"&&(k.directionRadians[K]+=I.transform.bearingInRadians);return{u_image:0,u_latrange:s0(0,u.tileID),u_exaggeration:m.paint.get("hillshade-exaggeration"),u_altitudes:k.altitudeRadians,u_azimuths:k.directionRadians,u_accent:b,u_method:S,u_highlights:k.highlightColor,u_shadows:k.shadowColor}},sh=(I,u)=>{const m=u.stride,b=a.N();return a.c8(b,0,a.a5,-a.a5,0,0,1),a.O(b,b,[0,-a.a5,0]),{u_matrix:b,u_image:1,u_dimension:[m,m],u_zoom:I.overscaledZ,u_unpack:u.getUnpackVector()}};function s0(I,u){const m=Math.pow(2,u.canonical.z),b=u.canonical.y;return[new a.ab(0,b/m).toLngLat().lat,new a.ab(0,(b+1)/m).toLngLat().lat]}const iy=(I,u,m=0)=>({u_image:0,u_unpack:u.getUnpackVector(),u_dimension:[u.stride,u.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:m,u_opacity:I.paint.get("color-relief-opacity")}),zm=(I,u,m,b)=>{const S=I.transform;return{u_translation:jm(I,u,m),u_ratio:b/a.aO(u,1,S.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},ry=(I,u,m,b,S)=>a.e(zm(I,u,m,b),{u_image:0,u_image_height:S}),Yh=(I,u,m,b,S)=>{const k=I.transform,K=wc(u,k);return{u_translation:jm(I,u,m),u_texsize:u.imageAtlasTexture.size,u_ratio:b/a.aO(u,1,k.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[K,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Ts=(I,u,m,b,S)=>{const k=wc(u,I.transform);return a.e(zm(I,u,m,b),{u_tileratio:k,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image:0,u_mix:S.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})},ah=(I,u,m,b,S,k)=>{const K=wc(u,I.transform);return a.e(zm(I,u,m,b),{u_image:0,u_image_height:k,u_tileratio:K,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image_dash:1,u_mix:S.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})};function wc(I,u){return 1/a.aO(I,1,u.tileZoom)}function jm(I,u,m){return a.aP(I.transform,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const a0=(I,u,m,b,S)=>{return{u_tl_parent:I,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(K=b.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(k=b.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:l0(b.paint.get("raster-hue-rotate")),u_coords_top:[S[0].x,S[0].y,S[1].x,S[1].y],u_coords_bottom:[S[3].x,S[3].y,S[2].x,S[2].y]};var k,K};function l0(I){I*=Math.PI/180;const u=Math.sin(I),m=Math.cos(I);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const Nm=(I,u,m,b,S,k,K,N,H,se,ce,ye,ge)=>{const Se=K.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_pitch:Se.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:Se.width/Se.height,u_fade_change:K.options.fadeDuration?K.symbolFadeChange:1,u_label_plane_matrix:N,u_coord_matrix:H,u_is_text:+ce,u_pitch_with_map:+b,u_is_along_line:S,u_is_variable_anchor:k,u_texsize:ye,u_texture:0,u_translation:se,u_pitched_scale:ge}},lh=(I,u,m,b,S,k,K,N,H,se,ce,ye,ge,Se)=>{const Le=K.transform;return a.e(Nm(I,u,m,b,S,k,K,N,H,se,ce,ye,Se),{u_gamma_scale:b?Math.cos(Le.pitch*Math.PI/180)*Le.cameraToCenterDistance:1,u_device_pixel_ratio:K.pixelRatio,u_is_halo:1})},Dt=(I,u,m,b,S,k,K,N,H,se,ce,ye,ge)=>a.e(lh(I,u,m,b,S,k,K,N,H,se,!0,ce,0,ge),{u_texsize_icon:ye,u_texture_icon:1}),ln=(I,u)=>({u_opacity:I,u_color:u}),tn=(I,u,m,b,S)=>a.e((function(k,K,N,H){const se=N.imageManager.getPattern(k.from.toString()),ce=N.imageManager.getPattern(k.to.toString()),{width:ye,height:ge}=N.imageManager.getPixelSize(),Se=Math.pow(2,H.tileID.overscaledZ),Le=H.tileSize*Math.pow(2,N.transform.tileZoom)/Se,Je=Le*(H.tileID.canonical.x+H.tileID.wrap*Se),nt=Le*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ce.tl,u_pattern_br_b:ce.br,u_texsize:[ye,ge],u_mix:K.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ce.displaySize,u_scale_a:K.fromScale,u_scale_b:K.toScale,u_tile_units_to_pixels:1/a.aO(H,1,N.transform.tileZoom),u_pixel_coord_upper:[Je>>16,nt>>16],u_pixel_coord_lower:[65535&Je,65535&nt]}})(m,S,u,b),{u_opacity:I}),yi=(I,u)=>{},yr={fillExtrusion:(I,u)=>({u_lightpos:new a.c3(I,u.u_lightpos),u_lightpos_globe:new a.c3(I,u.u_lightpos_globe),u_lightintensity:new a.br(I,u.u_lightintensity),u_lightcolor:new a.c3(I,u.u_lightcolor),u_vertical_gradient:new a.br(I,u.u_vertical_gradient),u_opacity:new a.br(I,u.u_opacity),u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillExtrusionPattern:(I,u)=>({u_lightpos:new a.c3(I,u.u_lightpos),u_lightpos_globe:new a.c3(I,u.u_lightpos_globe),u_lightintensity:new a.br(I,u.u_lightintensity),u_lightcolor:new a.c3(I,u.u_lightcolor),u_vertical_gradient:new a.br(I,u.u_vertical_gradient),u_height_factor:new a.br(I,u.u_height_factor),u_opacity:new a.br(I,u.u_opacity),u_fill_translate:new a.c4(I,u.u_fill_translate),u_image:new a.b$(I,u.u_image),u_texsize:new a.c4(I,u.u_texsize),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade)}),fill:(I,u)=>({u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillPattern:(I,u)=>({u_image:new a.b$(I,u.u_image),u_texsize:new a.c4(I,u.u_texsize),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade),u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillOutline:(I,u)=>({u_world:new a.c4(I,u.u_world),u_fill_translate:new a.c4(I,u.u_fill_translate)}),fillOutlinePattern:(I,u)=>({u_world:new a.c4(I,u.u_world),u_image:new a.b$(I,u.u_image),u_texsize:new a.c4(I,u.u_texsize),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade),u_fill_translate:new a.c4(I,u.u_fill_translate)}),circle:(I,u)=>({u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_scale_with_map:new a.b$(I,u.u_scale_with_map),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_extrude_scale:new a.c4(I,u.u_extrude_scale),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_globe_extrude_scale:new a.br(I,u.u_globe_extrude_scale),u_translate:new a.c4(I,u.u_translate)}),collisionBox:(I,u)=>({u_pixel_extrude_scale:new a.c4(I,u.u_pixel_extrude_scale)}),collisionCircle:(I,u)=>({u_viewport_size:new a.c4(I,u.u_viewport_size)}),debug:(I,u)=>({u_color:new a.c0(I,u.u_color),u_overlay:new a.b$(I,u.u_overlay),u_overlay_scale:new a.br(I,u.u_overlay_scale)}),depth:yi,clippingMask:yi,heatmap:(I,u)=>({u_extrude_scale:new a.br(I,u.u_extrude_scale),u_intensity:new a.br(I,u.u_intensity),u_globe_extrude_scale:new a.br(I,u.u_globe_extrude_scale)}),heatmapTexture:(I,u)=>({u_matrix:new a.c1(I,u.u_matrix),u_world:new a.c4(I,u.u_world),u_image:new a.b$(I,u.u_image),u_color_ramp:new a.b$(I,u.u_color_ramp),u_opacity:new a.br(I,u.u_opacity)}),hillshade:(I,u)=>({u_image:new a.b$(I,u.u_image),u_latrange:new a.c4(I,u.u_latrange),u_exaggeration:new a.br(I,u.u_exaggeration),u_altitudes:new a.ca(I,u.u_altitudes),u_azimuths:new a.ca(I,u.u_azimuths),u_accent:new a.c0(I,u.u_accent),u_method:new a.b$(I,u.u_method),u_shadows:new a.c9(I,u.u_shadows),u_highlights:new a.c9(I,u.u_highlights)}),hillshadePrepare:(I,u)=>({u_matrix:new a.c1(I,u.u_matrix),u_image:new a.b$(I,u.u_image),u_dimension:new a.c4(I,u.u_dimension),u_zoom:new a.br(I,u.u_zoom),u_unpack:new a.c2(I,u.u_unpack)}),colorRelief:(I,u)=>({u_image:new a.b$(I,u.u_image),u_unpack:new a.c2(I,u.u_unpack),u_dimension:new a.c4(I,u.u_dimension),u_elevation_stops:new a.b$(I,u.u_elevation_stops),u_color_stops:new a.b$(I,u.u_color_stops),u_color_ramp_size:new a.b$(I,u.u_color_ramp_size),u_opacity:new a.br(I,u.u_opacity)}),line:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels)}),lineGradient:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_image:new a.b$(I,u.u_image),u_image_height:new a.br(I,u.u_image_height)}),linePattern:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_texsize:new a.c4(I,u.u_texsize),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_image:new a.b$(I,u.u_image),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_scale:new a.c3(I,u.u_scale),u_fade:new a.br(I,u.u_fade)}),lineSDF:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_image:new a.b$(I,u.u_image),u_mix:new a.br(I,u.u_mix),u_tileratio:new a.br(I,u.u_tileratio),u_crossfade_from:new a.br(I,u.u_crossfade_from),u_crossfade_to:new a.br(I,u.u_crossfade_to),u_lineatlas_width:new a.br(I,u.u_lineatlas_width),u_lineatlas_height:new a.br(I,u.u_lineatlas_height)}),lineGradientSDF:(I,u)=>({u_translation:new a.c4(I,u.u_translation),u_ratio:new a.br(I,u.u_ratio),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_units_to_pixels:new a.c4(I,u.u_units_to_pixels),u_image:new a.b$(I,u.u_image),u_image_height:new a.br(I,u.u_image_height),u_tileratio:new a.br(I,u.u_tileratio),u_crossfade_from:new a.br(I,u.u_crossfade_from),u_crossfade_to:new a.br(I,u.u_crossfade_to),u_image_dash:new a.b$(I,u.u_image_dash),u_mix:new a.br(I,u.u_mix),u_lineatlas_width:new a.br(I,u.u_lineatlas_width),u_lineatlas_height:new a.br(I,u.u_lineatlas_height)}),raster:(I,u)=>({u_tl_parent:new a.c4(I,u.u_tl_parent),u_scale_parent:new a.br(I,u.u_scale_parent),u_buffer_scale:new a.br(I,u.u_buffer_scale),u_fade_t:new a.br(I,u.u_fade_t),u_opacity:new a.br(I,u.u_opacity),u_image0:new a.b$(I,u.u_image0),u_image1:new a.b$(I,u.u_image1),u_brightness_low:new a.br(I,u.u_brightness_low),u_brightness_high:new a.br(I,u.u_brightness_high),u_saturation_factor:new a.br(I,u.u_saturation_factor),u_contrast_factor:new a.br(I,u.u_contrast_factor),u_spin_weights:new a.c3(I,u.u_spin_weights),u_coords_top:new a.c2(I,u.u_coords_top),u_coords_bottom:new a.c2(I,u.u_coords_bottom)}),symbolIcon:(I,u)=>({u_is_size_zoom_constant:new a.b$(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(I,u.u_is_size_feature_constant),u_size_t:new a.br(I,u.u_size_t),u_size:new a.br(I,u.u_size),u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_pitch:new a.br(I,u.u_pitch),u_rotate_symbol:new a.b$(I,u.u_rotate_symbol),u_aspect_ratio:new a.br(I,u.u_aspect_ratio),u_fade_change:new a.br(I,u.u_fade_change),u_label_plane_matrix:new a.c1(I,u.u_label_plane_matrix),u_coord_matrix:new a.c1(I,u.u_coord_matrix),u_is_text:new a.b$(I,u.u_is_text),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_is_along_line:new a.b$(I,u.u_is_along_line),u_is_variable_anchor:new a.b$(I,u.u_is_variable_anchor),u_texsize:new a.c4(I,u.u_texsize),u_texture:new a.b$(I,u.u_texture),u_translation:new a.c4(I,u.u_translation),u_pitched_scale:new a.br(I,u.u_pitched_scale)}),symbolSDF:(I,u)=>({u_is_size_zoom_constant:new a.b$(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(I,u.u_is_size_feature_constant),u_size_t:new a.br(I,u.u_size_t),u_size:new a.br(I,u.u_size),u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_pitch:new a.br(I,u.u_pitch),u_rotate_symbol:new a.b$(I,u.u_rotate_symbol),u_aspect_ratio:new a.br(I,u.u_aspect_ratio),u_fade_change:new a.br(I,u.u_fade_change),u_label_plane_matrix:new a.c1(I,u.u_label_plane_matrix),u_coord_matrix:new a.c1(I,u.u_coord_matrix),u_is_text:new a.b$(I,u.u_is_text),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_is_along_line:new a.b$(I,u.u_is_along_line),u_is_variable_anchor:new a.b$(I,u.u_is_variable_anchor),u_texsize:new a.c4(I,u.u_texsize),u_texture:new a.b$(I,u.u_texture),u_gamma_scale:new a.br(I,u.u_gamma_scale),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_is_halo:new a.b$(I,u.u_is_halo),u_translation:new a.c4(I,u.u_translation),u_pitched_scale:new a.br(I,u.u_pitched_scale)}),symbolTextAndIcon:(I,u)=>({u_is_size_zoom_constant:new a.b$(I,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b$(I,u.u_is_size_feature_constant),u_size_t:new a.br(I,u.u_size_t),u_size:new a.br(I,u.u_size),u_camera_to_center_distance:new a.br(I,u.u_camera_to_center_distance),u_pitch:new a.br(I,u.u_pitch),u_rotate_symbol:new a.b$(I,u.u_rotate_symbol),u_aspect_ratio:new a.br(I,u.u_aspect_ratio),u_fade_change:new a.br(I,u.u_fade_change),u_label_plane_matrix:new a.c1(I,u.u_label_plane_matrix),u_coord_matrix:new a.c1(I,u.u_coord_matrix),u_is_text:new a.b$(I,u.u_is_text),u_pitch_with_map:new a.b$(I,u.u_pitch_with_map),u_is_along_line:new a.b$(I,u.u_is_along_line),u_is_variable_anchor:new a.b$(I,u.u_is_variable_anchor),u_texsize:new a.c4(I,u.u_texsize),u_texsize_icon:new a.c4(I,u.u_texsize_icon),u_texture:new a.b$(I,u.u_texture),u_texture_icon:new a.b$(I,u.u_texture_icon),u_gamma_scale:new a.br(I,u.u_gamma_scale),u_device_pixel_ratio:new a.br(I,u.u_device_pixel_ratio),u_is_halo:new a.b$(I,u.u_is_halo),u_translation:new a.c4(I,u.u_translation),u_pitched_scale:new a.br(I,u.u_pitched_scale)}),background:(I,u)=>({u_opacity:new a.br(I,u.u_opacity),u_color:new a.c0(I,u.u_color)}),backgroundPattern:(I,u)=>({u_opacity:new a.br(I,u.u_opacity),u_image:new a.b$(I,u.u_image),u_pattern_tl_a:new a.c4(I,u.u_pattern_tl_a),u_pattern_br_a:new a.c4(I,u.u_pattern_br_a),u_pattern_tl_b:new a.c4(I,u.u_pattern_tl_b),u_pattern_br_b:new a.c4(I,u.u_pattern_br_b),u_texsize:new a.c4(I,u.u_texsize),u_mix:new a.br(I,u.u_mix),u_pattern_size_a:new a.c4(I,u.u_pattern_size_a),u_pattern_size_b:new a.c4(I,u.u_pattern_size_b),u_scale_a:new a.br(I,u.u_scale_a),u_scale_b:new a.br(I,u.u_scale_b),u_pixel_coord_upper:new a.c4(I,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.c4(I,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.br(I,u.u_tile_units_to_pixels)}),terrain:(I,u)=>({u_texture:new a.b$(I,u.u_texture),u_ele_delta:new a.br(I,u.u_ele_delta),u_fog_matrix:new a.c1(I,u.u_fog_matrix),u_fog_color:new a.c0(I,u.u_fog_color),u_fog_ground_blend:new a.br(I,u.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.br(I,u.u_fog_ground_blend_opacity),u_horizon_color:new a.c0(I,u.u_horizon_color),u_horizon_fog_blend:new a.br(I,u.u_horizon_fog_blend),u_is_globe_mode:new a.br(I,u.u_is_globe_mode)}),terrainDepth:(I,u)=>({u_ele_delta:new a.br(I,u.u_ele_delta)}),terrainCoords:(I,u)=>({u_texture:new a.b$(I,u.u_texture),u_terrain_coords_id:new a.br(I,u.u_terrain_coords_id),u_ele_delta:new a.br(I,u.u_ele_delta)}),projectionErrorMeasurement:(I,u)=>({u_input:new a.br(I,u.u_input),u_output_expected:new a.br(I,u.u_output_expected)}),atmosphere:(I,u)=>({u_sun_pos:new a.c3(I,u.u_sun_pos),u_atmosphere_blend:new a.br(I,u.u_atmosphere_blend),u_globe_position:new a.c3(I,u.u_globe_position),u_globe_radius:new a.br(I,u.u_globe_radius),u_inv_proj_matrix:new a.c1(I,u.u_inv_proj_matrix)}),sky:(I,u)=>({u_sky_color:new a.c0(I,u.u_sky_color),u_horizon_color:new a.c0(I,u.u_horizon_color),u_horizon:new a.c4(I,u.u_horizon),u_horizon_normal:new a.c4(I,u.u_horizon_normal),u_sky_horizon_blend:new a.br(I,u.u_sky_horizon_blend),u_sky_blend:new a.br(I,u.u_sky_blend)})};class Nr{constructor(u,m,b){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ys={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fo{constructor(u,m,b,S){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=S,this.context=u;const k=u.gl;this.buffer=k.createBuffer(),u.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let b=0;b<this.attributes.length;b++){const S=m.attributes[this.attributes[b].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,m,b){for(let S=0;S<this.attributes.length;S++){const k=this.attributes[S],K=m.attributes[k.name];K!==void 0&&u.vertexAttribPointer(K,k.components,u[ys[k.type]],!1,this.itemSize,k.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Zr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wA extends Zr{getDefault(){return a.bq.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class kl extends Zr{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Vh extends Zr{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class u0 extends Zr{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Sc extends Zr{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class $h extends Zr{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class uh extends Zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class xr extends Zr{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Kg extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class Gm extends Zr{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Dl extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class SA extends Zr{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class iu extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class ch extends Zr{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class EA extends Zr{getDefault(){return a.bq.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Iu extends Zr{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Hh extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class Ah extends Zr{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class ru extends Zr{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class c0 extends Zr{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class qd extends Zr{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class lr extends Zr{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Wm extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class fl extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class BA extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Rl extends Zr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class oy extends Zr{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class A0 extends Zr{getDefault(){return null}set(u){var m;if(u===this.current&&!this.dirty)return;const b=this.gl;Oo(b)?b.bindVertexArray(u):(m=b.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class Zh extends Zr{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Lf extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Yd extends Zr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class OA extends Zr{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class Qm extends OA{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Pl extends OA{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Xh extends OA{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}const Jh="Framebuffer is not complete";class vs{constructor(u,m,b,S,k){this.context=u,this.width=m,this.height=b;const K=u.gl,N=this.framebuffer=K.createFramebuffer();if(this.colorAttachment=new Qm(u,N),S)this.depthAttachment=k?new Xh(u,N):new Pl(u,N);else if(k)throw new Error("Stencil cannot be set without depth");if(K.checkFramebufferStatus(K.FRAMEBUFFER)!==K.FRAMEBUFFER_COMPLETE)throw new Error(Jh)}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&u.deleteRenderbuffer(b)}u.deleteFramebuffer(this.framebuffer)}}class Ws{constructor(u){var m,b;if(this.gl=u,this.clearColor=new wA(this),this.clearDepth=new kl(this),this.clearStencil=new Vh(this),this.colorMask=new u0(this),this.depthMask=new Sc(this),this.stencilMask=new $h(this),this.stencilFunc=new uh(this),this.stencilOp=new xr(this),this.stencilTest=new Kg(this),this.depthRange=new Gm(this),this.depthTest=new Dl(this),this.depthFunc=new SA(this),this.blend=new iu(this),this.blendFunc=new ch(this),this.blendColor=new EA(this),this.blendEquation=new Iu(this),this.cullFace=new Hh(this),this.cullFaceSide=new Ah(this),this.frontFace=new ru(this),this.program=new c0(this),this.activeTexture=new qd(this),this.viewport=new lr(this),this.bindFramebuffer=new Wm(this),this.bindRenderbuffer=new fl(this),this.bindTexture=new BA(this),this.bindVertexBuffer=new Rl(this),this.bindElementBuffer=new oy(this),this.bindVertexArray=new A0(this),this.pixelStoreUnpack=new Zh(this),this.pixelStoreUnpackPremultiplyAlpha=new Lf(this),this.pixelStoreUnpackFlipY=new Yd(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Oo(u)){this.HALF_FLOAT=u.HALF_FLOAT;const S=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=u.RGBA16F)!==null&&m!==void 0?m:S?.RGBA16F_EXT,this.RGB16F=(b=u.RGB16F)!==null&&b!==void 0?b:S?.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const S=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=S?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new Nr(this,u,m)}createVertexBuffer(u,m,b){return new Fo(this,u,m,b)}createRenderbuffer(u,m,b){const S=this.gl,k=S.createRenderbuffer();return this.bindRenderbuffer.set(k),S.renderbufferStorage(S.RENDERBUFFER,u,m,b),this.bindRenderbuffer.set(null),k}createFramebuffer(u,m,b,S){return new vs(this,u,m,b,S)}clear({color:u,depth:m,stencil:b}){const S=this.gl;let k=0;u&&(k|=S.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(k|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(k|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),S.clear(k)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.bS(u.blendFunction,Yn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Oo(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var m;return Oo(this.gl)?this.gl.deleteVertexArray(u):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}let tl;function nl(I,u,m,b,S){const k=I.context,K=I.transform,N=k.gl,H=I.useProgram("collisionBox"),se=[];let ce=0,ye=0;for(let tt=0;tt<b.length;tt++){const rt=b[tt],ft=u.getTile(rt).getBucket(m);if(!ft)continue;const lt=S?ft.textCollisionBox:ft.iconCollisionBox,pt=ft.collisionCircleArray;pt.length>0&&(se.push({circleArray:pt,circleOffset:ye,coord:rt}),ce+=pt.length/4,ye=ce),lt&&H.draw(k,N.LINES,si.disabled,ii.disabled,I.colorModeForRenderPass(),ni.disabled,Wh(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(rt),K.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),m.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,null,I.transform.zoom,null,null,lt.collisionVertexBuffer)}if(!S||!se.length)return;const ge=I.useProgram("collisionCircle"),Se=new a.cb;Se.resize(4*ce),Se._trim();let Le=0;for(const tt of se)for(let rt=0;rt<tt.circleArray.length/4;rt++){const ft=4*rt,lt=tt.circleArray[ft+0],pt=tt.circleArray[ft+1],_t=tt.circleArray[ft+2],At=tt.circleArray[ft+3];Se.emplace(Le++,lt,pt,_t,At,0),Se.emplace(Le++,lt,pt,_t,At,1),Se.emplace(Le++,lt,pt,_t,At,2),Se.emplace(Le++,lt,pt,_t,At,3)}(!tl||tl.length<2*ce)&&(tl=(function(tt){const rt=2*tt,ft=new a.cd;ft.resize(rt),ft._trim();for(let lt=0;lt<rt;lt++){const pt=6*lt;ft.uint16[pt+0]=4*lt+0,ft.uint16[pt+1]=4*lt+1,ft.uint16[pt+2]=4*lt+2,ft.uint16[pt+3]=4*lt+2,ft.uint16[pt+4]=4*lt+3,ft.uint16[pt+5]=4*lt+0}return ft})(ce));const Je=k.createIndexBuffer(tl,!0),nt=k.createVertexBuffer(Se,a.cc.members,!0);for(const tt of se){const rt=Qh(I.transform);ge.draw(k,N.TRIANGLES,si.disabled,ii.disabled,I.colorModeForRenderPass(),ni.disabled,rt,I.style.map.terrain&&I.style.map.terrain.getTerrainData(tt.coord),null,m.id,nt,Je,a.aY.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,I.transform.zoom,null,null,null)}nt.destroy(),Je.destroy()}const tA=a.as(new Float32Array(16));function IA(I,u,m,b,S,k){const{horizontalAlign:K,verticalAlign:N}=a.aT(I);return new a.P((-(K-.5)*u/S+b[0])*k,(-(N-.5)*m/S+b[1])*k)}function Ul(I,u,m,b,S,k){const K=u.tileAnchorPoint.add(new a.P(u.translation[0],u.translation[1]));if(u.pitchWithMap){let N=b.mult(k);m||(N=N.rotate(-S));const H=K.add(N);return Hi(H.x,H.y,u.pitchedLabelPlaneMatrix,u.getElevation).point}if(m){const N=vr(u.tileAnchorPoint.x+1,u.tileAnchorPoint.y,u).point.sub(I),H=Math.atan(N.y/N.x)+(N.x<0?Math.PI:0);return I.add(b.rotate(H))}return I.add(b)}function Ju(I,u,m,b,S,k,K,N,H,se,ce,ye){const ge=I.text.placedSymbolArray,Se=I.text.dynamicLayoutVertexArray,Le=I.icon.dynamicLayoutVertexArray,Je={};Se.clear();for(let nt=0;nt<ge.length;nt++){const tt=ge.get(nt),rt=tt.hidden||!tt.crossTileID||I.allowVerticalPlacement&&!tt.placedOrientation?null:b[tt.crossTileID];if(rt){const ft=new a.P(tt.anchorX,tt.anchorY),lt={getElevation:ye,width:S.width,height:S.height,pitchedLabelPlaneMatrix:k,pitchWithMap:m,transform:S,tileAnchorPoint:ft,translation:se,unwrappedTileID:ce},pt=m?es(ft.x,ft.y,lt):vr(ft.x,ft.y,lt),_t=$u(S.cameraToCenterDistance,pt.signedDistanceFromCamera);let At=a.aB(I.textSizeData,N,tt)*_t/a.aN;m&&(At*=I.tilePixelRatio/K);const{width:Tt,height:zt,anchor:jt,textOffset:Wt,textBoxScale:qt}=rt,fn=IA(jt,Tt,zt,Wt,qt,At),Pn=S.getPitchedTextCorrection(ft.x+se[0],ft.y+se[1],ce),hn=Ul(pt.point,lt,u,fn,-S.bearingInRadians,Pn),ui=I.allowVerticalPlacement&&tt.placedOrientation===a.aA.vertical?Math.PI/2:0;for(let or=0;or<tt.numGlyphs;or++)a.aH(Se,hn,ui);H&&tt.associatedIconIndex>=0&&(Je[tt.associatedIconIndex]={shiftedAnchor:hn,angle:ui})}else dl(tt.numGlyphs,Se)}if(H){Le.clear();const nt=I.icon.placedSymbolArray;for(let tt=0;tt<nt.length;tt++){const rt=nt.get(tt);if(rt.hidden)dl(rt.numGlyphs,Le);else{const ft=Je[tt];if(ft)for(let lt=0;lt<rt.numGlyphs;lt++)a.aH(Le,ft.shiftedAnchor,ft.angle);else dl(rt.numGlyphs,Le)}}I.icon.dynamicLayoutVertexBuffer.updateData(Le)}I.text.dynamicLayoutVertexBuffer.updateData(Se)}function qm(I,u,m){return m.iconsInText&&u?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function Ec(I,u,m,b,S,k,K,N,H,se,ce,ye,ge){const Se=I.context,Le=Se.gl,Je=I.transform,nt=N==="map",tt=H==="map",rt=N!=="viewport"&&m.layout.get("symbol-placement")!=="point",ft=nt&&!tt&&!rt,lt=!m.layout.get("symbol-sort-key").isConstant();let pt=!1;const _t=I.getDepthModeForSublayer(0,si.ReadOnly),At=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Tt=[],zt=Je.getCircleRadiusCorrection();for(const jt of b){const Wt=u.getTile(jt),qt=Wt.getBucket(m);if(!qt)continue;const fn=S?qt.text:qt.icon;if(!fn||!fn.segments.get().length||!fn.hasVisibleVertices)continue;const Pn=fn.programConfigurations.get(m.id),hn=S||qt.sdfIcons,ui=S?qt.textSizeData:qt.iconSizeData,or=tt||Je.pitch!==0,go=I.useProgram(qm(hn,S,qt),Pn),ko=a.az(ui,Je.zoom),yo=I.style.map.terrain&&I.style.map.terrain.getTerrainData(jt);let Pr,Ur,Ea,is,Qs=[0,0],jo=null;if(S)Ur=Wt.glyphAtlasTexture,Ea=Le.LINEAR,Pr=Wt.glyphAtlasTexture.size,qt.iconsInText&&(Qs=Wt.imageAtlasTexture.size,jo=Wt.imageAtlasTexture,is=or||I.options.rotating||I.options.zooming||ui.kind==="composite"||ui.kind==="camera"?Le.LINEAR:Le.NEAREST);else{const rs=m.layout.get("icon-size").constantOr(0)!==1||qt.iconsNeedLinear;Ur=Wt.imageAtlasTexture,Ea=hn||I.options.rotating||I.options.zooming||rs||or?Le.LINEAR:Le.NEAREST,Pr=Wt.imageAtlasTexture.size}const Ps=a.aO(Wt,1,I.transform.zoom),Qa=ja(nt,I.transform,Ps),gl=a.N();a.aC(gl,Qa);const Lc=_A(tt,nt,I.transform,Ps),Du=a.aP(Je,Wt,k,K),aA=Je.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),g0=At&&qt.hasTextData(),ud=m.layout.get("icon-text-fit")!=="none"&&g0&&qt.hasIconData();if(rt){const rs=I.style.map.terrain?(jl,Ho)=>I.style.map.terrain.getElevation(jt,jl,Ho):null,Oa=m.layout.get("text-rotation-alignment")==="map";Xa(qt,I,S,Qa,gl,tt,se,Oa,jt.toUnwrapped(),Je.width,Je.height,Du,rs)}const cu=S&&At||ud,qs=rt||cu?tA:tt?Qa:I.transform.clipSpaceToPixelsMatrix,Ba=hn&&m.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ha;ha=hn?qt.iconsInText?Dt(ui.kind,ko,ft,tt,rt,cu,I,qs,Lc,Du,Pr,Qs,zt):lh(ui.kind,ko,ft,tt,rt,cu,I,qs,Lc,Du,S,Pr,0,zt):Nm(ui.kind,ko,ft,tt,rt,cu,I,qs,Lc,Du,S,Pr,zt);const Au={program:go,buffers:fn,uniformValues:ha,projectionData:aA,atlasTexture:Ur,atlasTextureIcon:jo,atlasInterpolation:Ea,atlasInterpolationIcon:is,isSDF:hn,hasHalo:Ba};if(lt&&qt.canOverlap){pt=!0;const rs=fn.segments.get();for(const Oa of rs)Tt.push({segments:new a.aY([Oa]),sortKey:Oa.sortKey,state:Au,terrainData:yo})}else Tt.push({segments:fn.segments,sortKey:0,state:Au,terrainData:yo})}pt&&Tt.sort(((jt,Wt)=>jt.sortKey-Wt.sortKey));for(const jt of Tt){const Wt=jt.state;if(Se.activeTexture.set(Le.TEXTURE0),Wt.atlasTexture.bind(Wt.atlasInterpolation,Le.CLAMP_TO_EDGE),Wt.atlasTextureIcon&&(Se.activeTexture.set(Le.TEXTURE1),Wt.atlasTextureIcon&&Wt.atlasTextureIcon.bind(Wt.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),Wt.isSDF){const qt=Wt.uniformValues;Wt.hasHalo&&(qt.u_is_halo=1,TA(Wt.buffers,jt.segments,m,I,Wt.program,_t,ce,ye,qt,Wt.projectionData,jt.terrainData)),qt.u_is_halo=0}TA(Wt.buffers,jt.segments,m,I,Wt.program,_t,ce,ye,Wt.uniformValues,Wt.projectionData,jt.terrainData)}}function TA(I,u,m,b,S,k,K,N,H,se,ce){const ye=b.context;S.draw(ye,ye.gl.TRIANGLES,k,K,N,ni.backCCW,H,ce,se,m.id,I.layoutVertexBuffer,I.indexBuffer,u,m.paint,b.transform.zoom,I.programConfigurations.get(m.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function Vd(I,u,m,b,S){const k=I.context,K=k.gl,N=ii.disabled,H=new Yn([K.ONE,K.ONE],a.bq.transparent,[!0,!0,!0,!0]),se=u.getBucket(m);if(!se)return;const ce=b.key;let ye=m.heatmapFbos.get(ce);ye||(ye=uo(k,u.tileSize,u.tileSize),m.heatmapFbos.set(ce,ye)),k.bindFramebuffer.set(ye.framebuffer),k.viewport.set([0,0,u.tileSize,u.tileSize]),k.clear({color:a.bq.transparent});const ge=se.programConfigurations.get(m.id),Se=I.useProgram("heatmap",ge,!S),Le=I.transform.getProjectionData({overscaledTileID:u.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Je=I.style.map.terrain.getTerrainData(b);Se.draw(k,K.TRIANGLES,si.disabled,N,H,ni.disabled,qh(u,I.transform.zoom,m.paint.get("heatmap-intensity"),1),Je,Le,m.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,m.paint,I.transform.zoom,ge)}function ua(I,u,m,b,S){const k=I.context,K=k.gl,N=I.transform;k.setColorMode(I.colorModeForRenderPass());const H=Lr(k,u),se=m.key,ce=u.heatmapFbos.get(se);if(!ce)return;k.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ce.colorAttachment.get()),k.activeTexture.set(K.TEXTURE1),H.bind(K.LINEAR,K.CLAMP_TO_EDGE);const ye=N.getProjectionData({overscaledTileID:m,applyTerrainMatrix:S,applyGlobeMatrix:!b});I.useProgram("heatmapTexture").draw(k,K.TRIANGLES,si.disabled,ii.disabled,I.colorModeForRenderPass(),ni.disabled,Fm(I,u,0,1),null,ye,u.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,u.paint,N.zoom),ce.destroy(),u.heatmapFbos.delete(se)}function uo(I,u,m){var b,S;const k=I.gl,K=k.createTexture();k.bindTexture(k.TEXTURE_2D,K),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);const N=(b=I.HALF_FLOAT)!==null&&b!==void 0?b:k.UNSIGNED_BYTE,H=(S=I.RGBA16F)!==null&&S!==void 0?S:k.RGBA;k.texImage2D(k.TEXTURE_2D,0,H,u,m,0,k.RGBA,N,null);const se=I.createFramebuffer(u,m,!1,!1);return se.colorAttachment.set(K),se}function Lr(I,u){return u.colorRampTexture||(u.colorRampTexture=new a.T(I,u.colorRamp,I.gl.RGBA)),u.colorRampTexture}function hh(I,u,m,b,S,k,K,N){let H=256;if(S.stepInterpolant){const se=u.getSource().maxzoom,ce=K.canonical.z===se?Math.ceil(1<<I.transform.maxZoom-K.canonical.z):1;H=a.ao(a.cf(k.maxLineLength/a.a5*1024*ce),256,m.maxTextureSize)}return N.gradient=a.cg({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:H,image:N.gradient||void 0,clips:k.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new a.T(m,N.gradient,b.RGBA),N.version=S.gradientVersion,N.texture}function ec(I,u,m,b,S){I.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),b.updatePaintBuffers(S)}function ks(I,u,m,b,S,k){(S||I.lineAtlas.dirty)&&(u.activeTexture.set(m.TEXTURE0),I.lineAtlas.bind(u)),b.updatePaintBuffers(k)}function Tu(I,u,m,b,S,k,K){const N=k.gradients[S.id];let H=N.texture;S.gradientVersion!==N.version&&(H=hh(I,u,m,b,S,k,K,N)),m.activeTexture.set(b.TEXTURE0),H.bind(S.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}function Ll(I,u,m,b,S,k,K,N,H){const se=k.gradients[S.id];let ce=se.texture;S.gradientVersion!==se.version&&(ce=hh(I,u,m,b,S,k,K,se)),m.activeTexture.set(b.TEXTURE0),ce.bind(S.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE),m.activeTexture.set(b.TEXTURE1),I.lineAtlas.bind(m),N.updatePaintBuffers(H)}function dh(I,u,m,b,S){if(!m||!b||!b.imageAtlas)return;const k=b.imageAtlas.patternPositions;let K=k[m.to.toString()],N=k[m.from.toString()];if(!K&&N&&(K=N),!N&&K&&(N=K),!K||!N){const H=S.getPaintProperty(u);K=k[H],N=k[H]}K&&N&&I.setConstantPatternPositions(K,N)}function nA(I,u,m,b,S,k,K,N){const H=I.context.gl,se="fill-pattern",ce=m.paint.get(se),ye=ce&&ce.constantOr(1),ge=m.getCrossfadeParameters();let Se,Le,Je,nt,tt;const rt=I.transform,ft=m.paint.get("fill-translate"),lt=m.paint.get("fill-translate-anchor");K?(Le=ye&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Se=H.LINES):(Le=ye?"fillPattern":"fill",Se=H.TRIANGLES);const pt=ce.constantOr(null);for(const _t of b){const At=u.getTile(_t);if(ye&&!At.patternsLoaded())continue;const Tt=At.getBucket(m);if(!Tt)continue;const zt=Tt.programConfigurations.get(m.id),jt=I.useProgram(Le,zt),Wt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(_t);ye&&(I.context.activeTexture.set(H.TEXTURE0),At.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),zt.updatePaintBuffers(ge)),dh(zt,se,pt,At,m);const qt=rt.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),fn=a.aP(rt,At,ft,lt);if(K){nt=Tt.indexBuffer2,tt=Tt.segments2;const hn=[H.drawingBufferWidth,H.drawingBufferHeight];Je=Le==="fillOutlinePattern"&&ye?ny(I,ge,At,hn,fn):Pf(hn,fn)}else nt=Tt.indexBuffer,tt=Tt.segments,Je=ye?Qd(I,ge,At,fn):{u_fill_translate:fn};const Pn=I.stencilModeForClipping(_t);jt.draw(I.context,Se,S,Pn,k,ni.backCCW,Je,Wt,qt,m.id,Tt.layoutVertexBuffer,nt,tt,m.paint,I.transform.zoom,zt)}}function Qe(I,u,m,b,S,k,K,N){const H=I.context,se=H.gl,ce="fill-extrusion-pattern",ye=m.paint.get(ce),ge=ye.constantOr(1),Se=m.getCrossfadeParameters(),Le=m.paint.get("fill-extrusion-opacity"),Je=ye.constantOr(null),nt=I.transform;for(const tt of b){const rt=u.getTile(tt),ft=rt.getBucket(m);if(!ft)continue;const lt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(tt),pt=ft.programConfigurations.get(m.id),_t=I.useProgram(ge?"fillExtrusionPattern":"fillExtrusion",pt);ge&&(I.context.activeTexture.set(se.TEXTURE0),rt.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),pt.updatePaintBuffers(Se));const At=nt.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!N,applyTerrainMatrix:!0});dh(pt,ce,Je,rt,m);const Tt=a.aP(nt,rt,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),zt=m.paint.get("fill-extrusion-vertical-gradient"),jt=ge?Um(I,zt,Le,Tt,tt,Se,rt):Pm(I,zt,Le,Tt);_t.draw(H,H.gl.TRIANGLES,S,k,K,ni.backCCW,jt,lt,At,m.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,m.paint,I.transform.zoom,pt,I.style.map.terrain&&ft.centroidVertexBuffer)}}function ou(I,u,m,b,S,k,K,N,H){var se;const ce=I.style.projection,ye=I.context,ge=I.transform,Se=ye.gl,Le=[`#define NUM_ILLUMINATION_SOURCES ${m.paint.get("hillshade-highlight-color").values.length}`],Je=I.useProgram("hillshade",null,!1,Le),nt=!I.options.moving;for(const tt of b){const rt=u.getTile(tt),ft=rt.fbo;if(!ft)continue;const lt=ce.getMeshFromTileID(ye,tt.canonical,N,!0,"raster"),pt=(se=I.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(tt);ye.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,ft.colorAttachment.get());const _t=ge.getProjectionData({overscaledTileID:tt,aligned:nt,applyGlobeMatrix:!H,applyTerrainMatrix:!0});Je.draw(ye,Se.TRIANGLES,k,S[tt.overscaledZ],K,ni.backCCW,Uf(I,rt,m),pt,_t,m.id,lt.vertexBuffer,lt.indexBuffer,lt.segments)}}function Bc(I,u,m,b,S,k,K,N,H){var se;const ce=I.style.projection,ye=I.context,ge=I.transform,Se=ye.gl,Le=I.useProgram("colorRelief"),Je=!I.options.moving;let nt=!0,tt=0;for(const rt of b){const ft=u.getTile(rt),lt=ft.dem;if(nt){const jt=Se.getParameter(Se.MAX_TEXTURE_SIZE),{elevationTexture:Wt,colorTexture:qt}=m.getColorRampTextures(ye,jt,lt.getUnpackVector());ye.activeTexture.set(Se.TEXTURE1),Wt.bind(Se.NEAREST,Se.CLAMP_TO_EDGE),ye.activeTexture.set(Se.TEXTURE4),qt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),nt=!1,tt=Wt.size[0]}if(!lt||!lt.data)continue;const pt=lt.stride,_t=lt.getPixels();if(ye.activeTexture.set(Se.TEXTURE0),ye.pixelStoreUnpackPremultiplyAlpha.set(!1),ft.demTexture=ft.demTexture||I.getTileTexture(pt),ft.demTexture){const jt=ft.demTexture;jt.update(_t,{premultiply:!1}),jt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}else ft.demTexture=new a.T(ye,_t,Se.RGBA,{premultiply:!1}),ft.demTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const At=ce.getMeshFromTileID(ye,rt.canonical,N,!0,"raster"),Tt=(se=I.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(rt),zt=ge.getProjectionData({overscaledTileID:rt,aligned:Je,applyGlobeMatrix:!H,applyTerrainMatrix:!0});Le.draw(ye,Se.TRIANGLES,k,S[rt.overscaledZ],K,ni.backCCW,iy(m,ft.dem,tt),Tt,zt,m.id,At.vertexBuffer,At.indexBuffer,At.segments)}}const Sa=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function hr(I,u,m,b,S,k,K,N,H=!1,se=!1){const ce=b[b.length-1].overscaledZ,ye=I.context,ge=ye.gl,Se=I.useProgram("raster"),Le=I.transform,Je=I.style.projection,nt=I.colorModeForRenderPass(),tt=!I.options.moving,rt=m.paint.get("raster-opacity"),ft=m.paint.get("raster-resampling"),lt=m.paint.get("raster-fade-duration"),pt=!!I.style.map.terrain;for(const _t of b){const At=I.getDepthModeForSublayer(_t.overscaledZ-ce,rt===1?si.ReadWrite:si.ReadOnly,ge.LESS),Tt=u.getTile(_t),zt=ft==="nearest"?ge.NEAREST:ge.LINEAR;ye.activeTexture.set(ge.TEXTURE0),Tt.texture.bind(zt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(ge.TEXTURE1);const{parentTile:jt,parentScaleBy:Wt,parentTopLeft:qt,fadeValues:fn}=kA(Tt,u,lt,pt);Tt.fadeOpacity=fn.tileOpacity,jt?(jt.fadeOpacity=fn.parentTileOpacity,jt.texture.bind(zt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST)):Tt.texture.bind(zt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),Tt.texture.useMipmap&&ye.extTextureFilterAnisotropic&&I.transform.pitch>20&&ge.texParameterf(ge.TEXTURE_2D,ye.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ye.extTextureFilterAnisotropicMax);const Pn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(_t),hn=Le.getProjectionData({overscaledTileID:_t,aligned:tt,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),ui=a0(qt,Wt,fn.fadeMix,m,N),or=Je.getMeshFromTileID(ye,_t.canonical,k,K,"raster");Se.draw(ye,ge.TRIANGLES,At,S?S[_t.overscaledZ]:ii.disabled,nt,H?ni.frontCCW:ni.backCCW,ui,Pn,hn,m.id,or.vertexBuffer,or.indexBuffer,or.segments)}}function kA(I,u,m,b){const S={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(m===0||b)return S;if(I.fadingParentID){const k=u.getLoadedTile(I.fadingParentID);if(!k)return S;const K=Math.pow(2,k.tileID.overscaledZ-I.tileID.overscaledZ),N=[I.tileID.canonical.x*K%1,I.tileID.canonical.y*K%1],H=(function(se,ce,ye){const ge=U(),Se=(ge-ce.timeAdded)/ye,Le=se.fadingDirection===bt.Incoming,Je=a.ao((ge-se.timeAdded)/ye,0,1),nt=a.ao(1-Se,0,1),tt=Le?Je:nt;return{tileOpacity:tt,parentTileOpacity:Le?nt:Je,fadeMix:{opacity:1,mix:1-tt}}})(I,k,m);return{parentTile:k,parentScaleBy:K,parentTopLeft:N,fadeValues:H}}if(I.selfFading){const k=(function(K,N){const H=(U()-K.timeAdded)/N,se=a.ao(H,0,1);return{tileOpacity:se,fadeMix:{opacity:se,mix:0}}})(I,m);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:k}}return S}const fh=new a.bq(1,0,0,1),DA=new a.bq(0,1,0,1),RA=new a.bq(0,0,1,1),h0=new a.bq(1,0,1,1),Oc=new a.bq(0,1,1,1);function Kf(I,u,m,b){ca(I,0,u+m/2,I.transform.width,m,b)}function mh(I,u,m,b){ca(I,u-m/2,0,m,I.transform.height,b)}function ca(I,u,m,b,S,k){const K=I.context,N=K.gl;N.enable(N.SCISSOR_TEST),N.scissor(u*I.pixelRatio,m*I.pixelRatio,b*I.pixelRatio,S*I.pixelRatio),K.clear({color:k}),N.disable(N.SCISSOR_TEST)}function tc(I,u,m){const b=I.context,S=b.gl,k=I.useProgram("debug"),K=si.disabled,N=ii.disabled,H=I.colorModeForRenderPass(),se="$debug",ce=I.style.map.terrain&&I.style.map.terrain.getTerrainData(m);b.activeTexture.set(S.TEXTURE0);const ye=u.getTileByID(m.key).latestRawTileData,ge=Math.floor((ye&&ye.byteLength||0)/1024),Se=u.getTile(m).tileSize,Le=512/Math.min(Se,512)*(m.overscaledZ/I.transform.zoom)*.5;let Je=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(Je+=` => ${m.overscaledZ}`),(function(tt,rt){tt.initDebugOverlayCanvas();const ft=tt.debugOverlayCanvas,lt=tt.context.gl,pt=tt.debugOverlayCanvas.getContext("2d");pt.clearRect(0,0,ft.width,ft.height),pt.shadowColor="white",pt.shadowBlur=2,pt.lineWidth=1.5,pt.strokeStyle="white",pt.textBaseline="top",pt.font="bold 36px Open Sans, sans-serif",pt.fillText(rt,5,5),pt.strokeText(rt,5,5),tt.debugOverlayTexture.update(ft),tt.debugOverlayTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)})(I,`${Je} ${ge}kB`);const nt=I.transform.getProjectionData({overscaledTileID:m,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(b,S.TRIANGLES,K,N,Yn.alphaBlended,ni.disabled,Km(a.bq.transparent,Le),null,nt,se,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),k.draw(b,S.LINE_STRIP,K,N,H,ni.disabled,Km(a.bq.red),ce,nt,se,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function d0(I,u,m,b){const{isRenderingGlobe:S}=b,k=I.context,K=k.gl,N=I.transform,H=I.colorModeForRenderPass(),se=I.getDepthModeFor3D(),ce=I.useProgram("terrain");k.bindFramebuffer.set(null),k.viewport.set([0,0,I.width,I.height]);for(const ye of m){const ge=u.getTerrainMesh(ye.tileID),Se=I.renderToTexture.getTexture(ye),Le=u.getTerrainData(ye.tileID);k.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Se.texture);const Je=u.getMeshFrameDelta(N.zoom),nt=N.calculateFogMatrix(ye.tileID.toUnwrapped()),tt=ty(Je,nt,I.style.sky,N.pitch,S),rt=N.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ce.draw(k,K.TRIANGLES,se,ii.disabled,H,ni.backCCW,tt,Le,rt,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}function Fg(I,u){if(!u.mesh){const m=new a.aX;m.emplaceBack(-1,-1),m.emplaceBack(1,-1),m.emplaceBack(1,1),m.emplaceBack(-1,1);const b=new a.aZ;b.emplaceBack(0,1,2),b.emplaceBack(0,2,3),u.mesh=new ro(I.createVertexBuffer(m,Xs.members),I.createIndexBuffer(b),a.aY.simpleSegment(0,0,m.length,b.length))}return u.mesh}class sy{constructor(u,m){this.context=new Ws(u),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=lo.maxOverzooming+lo.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ns}resize(u,m,b){if(this.width=Math.floor(u*b),this.height=Math.floor(m*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const u=this.context,m=new a.aX;m.emplaceBack(0,0),m.emplaceBack(a.a5,0),m.emplaceBack(0,a.a5),m.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=u.createVertexBuffer(m,Xs.members),this.tileExtentSegments=a.aY.simpleSegment(0,0,4,2);const b=new a.aX;b.emplaceBack(0,0),b.emplaceBack(a.a5,0),b.emplaceBack(0,a.a5),b.emplaceBack(a.a5,a.a5),this.debugBuffer=u.createVertexBuffer(b,Xs.members),this.debugSegments=a.aY.simpleSegment(0,0,4,5);const S=new a.ci;S.emplaceBack(0,0,0,0),S.emplaceBack(a.a5,0,a.a5,0),S.emplaceBack(0,a.a5,0,a.a5),S.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=u.createVertexBuffer(S,r0.members),this.rasterBoundsSegments=a.aY.simpleSegment(0,0,4,2);const k=new a.aX;k.emplaceBack(0,0),k.emplaceBack(a.a5,0),k.emplaceBack(0,a.a5),k.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=u.createVertexBuffer(k,Xs.members),this.rasterBoundsSegmentsPosOnly=a.aY.simpleSegment(0,0,4,5);const K=new a.aX;K.emplaceBack(0,0),K.emplaceBack(1,0),K.emplaceBack(0,1),K.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(K,Xs.members),this.viewportSegments=a.aY.simpleSegment(0,0,4,2);const N=new a.cj;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(N);const H=new a.aZ;H.emplaceBack(1,0,2),H.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(H);const se=this.context.gl;this.stencilClearMode=new ii({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO),this.tileExtentMesh=new ro(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=a.N();a.c8(b,0,this.width,this.height,0,0,1),a.Q(b,b,[m.drawingBufferWidth,m.drawingBufferHeight,0]);const S={mainMatrix:b,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:b};this.useProgram("clippingMask",null,!0).draw(u,m.TRIANGLES,si.disabled,this.stencilClearMode,Yn.disabled,ni.disabled,null,null,S,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,m,b){if(this.currentStencilSource===u.source||!u.isTileClipped()||!m||!m.length)return;this.currentStencilSource=u.source,this.nextStencilID+m.length>256&&this.clearStencil();const S=this.context;S.setColorMode(Yn.disabled),S.setDepthMode(si.disabled);const k={};for(const K of m)k[K.key]=this.nextStencilID++;this._renderTileMasks(k,m,b,!0),this._renderTileMasks(k,m,b,!1),this._tileClippingMaskIDs=k}_renderTileMasks(u,m,b,S){const k=this.context,K=k.gl,N=this.style.projection,H=this.transform,se=this.useProgram("clippingMask");for(const ce of m){const ye=u[ce.key],ge=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ce),Se=N.getMeshFromTileID(this.context,ce.canonical,S,!0,"stencil"),Le=H.getProjectionData({overscaledTileID:ce,applyGlobeMatrix:!b,applyTerrainMatrix:!0});se.draw(k,K.TRIANGLES,si.disabled,new ii({func:K.ALWAYS,mask:0},ye,255,K.KEEP,K.KEEP,K.REPLACE),Yn.disabled,b?ni.disabled:ni.backCCW,null,ge,Le,"$clipping",Se.vertexBuffer,Se.indexBuffer,Se.segments)}}_renderTilesDepthBuffer(){const u=this.context,m=u.gl,b=this.style.projection,S=this.transform,k=this.useProgram("depth"),K=this.getDepthModeFor3D(),N=Ui(S,{tileSize:S.tileSize});for(const H of N){const se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(H),ce=b.getMeshFromTileID(this.context,H.canonical,!0,!0,"raster"),ye=S.getProjectionData({overscaledTileID:H,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(u,m.TRIANGLES,K,ii.disabled,Yn.disabled,ni.backCCW,null,se,ye,"$clipping",ce.vertexBuffer,ce.indexBuffer,ce.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new ii({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){const m=this.context.gl;return new ii({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(u){const m=this.context.gl,b=u.sort(((K,N)=>N.overscaledZ-K.overscaledZ)),S=b[b.length-1].overscaledZ,k=b[0].overscaledZ-S+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const K={};for(let N=0;N<k;N++)K[N+S]=new ii({func:m.GEQUAL,mask:255},N+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=k,[K,b]}return[{[S]:ii.disabled},b]}stencilConfigForOverlapTwoPass(u){const m=this.context.gl,b=u.sort(((K,N)=>N.overscaledZ-K.overscaledZ)),S=b[b.length-1].overscaledZ,k=b[0].overscaledZ-S+1;if(this.clearStencil(),k>1){const K={},N={};for(let H=0;H<k;H++)K[H+S]=new ii({func:m.GREATER,mask:255},k+1+H,255,m.KEEP,m.KEEP,m.REPLACE),N[H+S]=new ii({func:m.GREATER,mask:255},1+H,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID=2*k+1,[K,N,b]}return this.nextStencilID=3,[{[S]:new ii({func:m.GREATER,mask:255},2,255,m.KEEP,m.KEEP,m.REPLACE)},{[S]:new ii({func:m.GREATER,mask:255},1,255,m.KEEP,m.KEEP,m.REPLACE)},b]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Yn([u.CONSTANT_COLOR,u.ONE],new a.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yn.unblended:Yn.alphaBlended}getDepthModeForSublayer(u,m,b){if(!this.opaquePassEnabledForLayer())return si.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new si(b||this.context.gl.LEQUAL,m,[S,S])}getDepthModeFor3D(){return new si(this.context.gl.LEQUAL,si.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){var b,S;this.style=u,this.options=m,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(U()),this.imageManager.beginFrame();const k=this.style._order,K=this.style.tileManagers,N={},H={},se={},ce={isRenderingToTexture:!1,isRenderingGlobe:((b=u.projection)===null||b===void 0?void 0:b.transitionState)>0};for(const ge in K){const Se=K[ge];Se.used&&Se.prepare(this.context),N[ge]=Se.getVisibleCoordinates(!1),H[ge]=N[ge].slice().reverse(),se[ge]=Se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ge=0;ge<k.length;ge++)if(this.style._layers[k[ge]].is3D()){this.opaquePassCutoff=ge;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ge of k){const Se=this.style._layers[ge];if(!Se.hasOffscreenPass()||Se.isHidden(this.transform.zoom))continue;const Le=H[Se.source];(Se.type==="custom"||Le.length)&&this.renderLayer(this,K[Se.source],Se,Le,ce)}if((S=this.style.projection)===null||S===void 0||S.updateGPUdependent({context:this.context,useProgram:ge=>this.useProgram(ge)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?a.bq.black:a.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(ge,Se){const Le=ge.context,Je=Le.gl,nt=((_t,At,Tt)=>{const zt=Math.cos(At.rollInRadians),jt=Math.sin(At.rollInRadians),Wt=bn(At),qt=At.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:_t.properties.get("sky-color"),u_horizon_color:_t.properties.get("horizon-color"),u_horizon:[(At.width/2-Wt*jt)*Tt,(At.height/2+Wt*zt)*Tt],u_horizon_normal:[-jt,zt],u_sky_horizon_blend:_t.properties.get("sky-horizon-blend")*At.height/2*Tt,u_sky_blend:qt}})(Se,ge.style.map.transform,ge.pixelRatio),tt=new si(Je.LEQUAL,si.ReadWrite,[0,1]),rt=ii.disabled,ft=ge.colorModeForRenderPass(),lt=ge.useProgram("sky"),pt=Fg(Le,Se);lt.draw(Le,Je.TRIANGLES,tt,rt,ft,ni.disabled,nt,null,void 0,"sky",pt.vertexBuffer,pt.indexBuffer,pt.segments)})(this,this.style.sky),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const ge=this.style._layers[k[this.currentLayer]],Se=K[ge.source],Le=N[ge.source];this._renderTileClippingMasks(ge,Le,!1),this.renderLayer(this,Se,ge,Le,ce)}this.renderPass="translucent";let ye=!1;for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const ge=this.style._layers[k[this.currentLayer]],Se=K[ge.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ge,ce))continue;this.opaquePassEnabledForLayer()||ye||(ye=!0,ce.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Le=(ge.type==="symbol"?se:H)[ge.source];this._renderTileClippingMasks(ge,N[ge.source],!!this.renderToTexture),this.renderLayer(this,Se,ge,Le,ce)}if(ce.isRenderingGlobe&&(function(ge,Se,Le){const Je=ge.context,nt=Je.gl,tt=ge.useProgram("atmosphere"),rt=new si(nt.LEQUAL,si.ReadOnly,[0,1]),ft=ge.transform,lt=(function(qt,fn){const Pn=qt.properties.get("position"),hn=[-Pn.x,-Pn.y,-Pn.z],ui=a.as(new Float64Array(16));return qt.properties.get("anchor")==="map"&&(a.bh(ui,ui,fn.rollInRadians),a.bi(ui,ui,-fn.pitchInRadians),a.bh(ui,ui,fn.bearingInRadians),a.bi(ui,ui,fn.center.lat*Math.PI/180),a.bK(ui,ui,-fn.center.lng*Math.PI/180)),a.ch(hn,hn,ui),hn})(Le,ge.transform),pt=ft.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),_t=Se.properties.get("atmosphere-blend")*pt.projectionTransition;if(_t===0)return;const At=xA(ft.worldSize,ft.center.lat),Tt=ft.inverseProjectionMatrix,zt=new Float64Array(4);zt[3]=1,a.aI(zt,zt,ft.modelViewProjectionMatrix),zt[0]/=zt[3],zt[1]/=zt[3],zt[2]/=zt[3],zt[3]=1,a.aI(zt,zt,Tt),zt[0]/=zt[3],zt[1]/=zt[3],zt[2]/=zt[3],zt[3]=1;const jt=((qt,fn,Pn,hn,ui)=>({u_sun_pos:qt,u_atmosphere_blend:fn,u_globe_position:Pn,u_globe_radius:hn,u_inv_proj_matrix:ui}))(lt,_t,[zt[0],zt[1],zt[2]],At,Tt),Wt=Fg(Je,Se);tt.draw(Je,nt.TRIANGLES,rt,ii.disabled,Yn.alphaBlended,ni.disabled,jt,null,null,"atmosphere",Wt.vertexBuffer,Wt.indexBuffer,Wt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ge=(function(Se,Le){let Je=null;const nt=Object.values(Se._layers).flatMap((lt=>lt.source&&!lt.isHidden(Le)?[Se.tileManagers[lt.source]]:[])),tt=nt.filter((lt=>lt.getSource().type==="vector")),rt=nt.filter((lt=>lt.getSource().type!=="vector")),ft=lt=>{(!Je||Je.getSource().maxzoom<lt.getSource().maxzoom)&&(Je=lt)};return tt.forEach((lt=>ft(lt))),Je||rt.forEach((lt=>ft(lt))),Je})(this.style,this.transform.zoom);ge&&(function(Se,Le,Je){for(let nt=0;nt<Je.length;nt++)tc(Se,Le,Je[nt])})(this,ge,ge.getVisibleCoordinates())}this.options.showPadding&&(function(ge){const Se=ge.transform.padding;Kf(ge,ge.transform.height-(Se.top||0),3,fh),Kf(ge,Se.bottom||0,3,DA),mh(ge,Se.left||0,3,RA),mh(ge,ge.transform.width-(Se.right||0),3,h0);const Le=ge.transform.centerPoint;(function(Je,nt,tt,rt){ca(Je,nt-1,tt-10,2,20,rt),ca(Je,nt-10,tt-1,20,2,rt)})(ge,Le.x,ge.transform.height-Le.y,Oc)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const m=this.terrainFacilitator.matrix,b=this.transform.modelViewProjectionMatrix;let S=this.terrainFacilitator.dirty;S||(S=u?!a.ck(m,b):!a.cl(m,b)),S||(S=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),S&&(a.cm(m,b),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(k,K){const N=k.context,H=N.gl,se=k.transform,ce=Yn.unblended,ye=new si(H.LEQUAL,si.ReadWrite,[0,1]),ge=K.tileManager.getRenderableTiles(),Se=k.useProgram("terrainDepth");N.bindFramebuffer.set(K.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:a.bq.transparent,depth:1});for(const Le of ge){const Je=K.getTerrainMesh(Le.tileID),nt=K.getTerrainData(Le.tileID),tt=se.getProjectionData({overscaledTileID:Le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),rt={u_ele_delta:K.getMeshFrameDelta(se.zoom)};Se.draw(N,H.TRIANGLES,ye,ii.disabled,ce,ni.backCCW,rt,nt,tt,"terrain",Je.vertexBuffer,Je.indexBuffer,Je.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])})(this,this.style.map.terrain),(function(k,K){const N=k.context,H=N.gl,se=k.transform,ce=Yn.unblended,ye=new si(H.LEQUAL,si.ReadWrite,[0,1]),ge=K.getCoordsTexture(),Se=K.tileManager.getRenderableTiles(),Le=k.useProgram("terrainCoords");N.bindFramebuffer.set(K.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:a.bq.transparent,depth:1}),K.coordsIndex=[];for(const Je of Se){const nt=K.getTerrainMesh(Je.tileID),tt=K.getTerrainData(Je.tileID);N.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,ge.texture);const rt={u_terrain_coords_id:(255-K.coordsIndex.length)/255,u_texture:0,u_ele_delta:K.getMeshFrameDelta(se.zoom)},ft=se.getProjectionData({overscaledTileID:Je.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Le.draw(N,H.TRIANGLES,ye,ii.disabled,ce,ni.backCCW,rt,tt,ft,"terrain",nt.vertexBuffer,nt.indexBuffer,nt.segments),K.coordsIndex.push(Je.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])})(this,this.style.map.terrain))}renderLayer(u,m,b,S,k){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="custom"||(S||[]).length)&&(this.id=b.id,a.cn(b)?(function(K,N,H,se,ce,ye){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=ye,Se=ii.disabled,Le=K.colorModeForRenderPass();(H._unevaluatedLayout.hasValue("text-variable-anchor")||H._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Je,nt,tt,rt,ft,lt,pt,_t,At){const Tt=nt.transform,zt=nt.style.map.terrain,jt=ft==="map",Wt=lt==="map";for(const qt of Je){const fn=rt.getTile(qt),Pn=fn.getBucket(tt);if(!Pn||!Pn.text||!Pn.text.segments.get().length)continue;const hn=a.az(Pn.textSizeData,Tt.zoom),ui=a.aO(fn,1,nt.transform.zoom),or=ja(jt,nt.transform,ui),go=tt.layout.get("icon-text-fit")!=="none"&&Pn.hasIconData();if(hn){const ko=Math.pow(2,Tt.zoom-fn.tileID.overscaledZ),yo=zt?(Pr,Ur)=>zt.getElevation(qt,Pr,Ur):null;Ju(Pn,jt,Wt,At,Tt,or,ko,hn,go,a.aP(Tt,fn,pt,_t),qt.toUnwrapped(),yo)}}})(se,K,H,N,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),ce),H.paint.get("icon-opacity").constantOr(1)!==0&&Ec(K,N,H,se,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),Se,Le,ge),H.paint.get("text-opacity").constantOr(1)!==0&&Ec(K,N,H,se,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),Se,Le,ge),N.map.showCollisionBoxes&&(nl(K,N,H,se,!0),nl(K,N,H,se,!1))})(u,m,b,S,this.style.placement.variableOffsets,k):a.co(b)?(function(K,N,H,se,ce){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ce,ge=H.paint.get("circle-opacity"),Se=H.paint.get("circle-stroke-width"),Le=H.paint.get("circle-stroke-opacity"),Je=!H.layout.get("circle-sort-key").isConstant();if(ge.constantOr(1)===0&&(Se.constantOr(1)===0||Le.constantOr(1)===0))return;const nt=K.context,tt=nt.gl,rt=K.transform,ft=K.getDepthModeForSublayer(0,si.ReadOnly),lt=ii.disabled,pt=K.colorModeForRenderPass(),_t=[],At=rt.getCircleRadiusCorrection();for(let Tt=0;Tt<se.length;Tt++){const zt=se[Tt],jt=N.getTile(zt),Wt=jt.getBucket(H);if(!Wt)continue;const qt=H.paint.get("circle-translate"),fn=H.paint.get("circle-translate-anchor"),Pn=a.aP(rt,jt,qt,fn),hn=Wt.programConfigurations.get(H.id),ui=K.useProgram("circle",hn),or=Wt.layoutVertexBuffer,go=Wt.indexBuffer,ko=K.style.map.terrain&&K.style.map.terrain.getTerrainData(zt),yo={programConfiguration:hn,program:ui,layoutVertexBuffer:or,indexBuffer:go,uniformValues:Lm(K,jt,H,Pn,At),terrainData:ko,projectionData:rt.getProjectionData({overscaledTileID:zt,applyGlobeMatrix:!ye,applyTerrainMatrix:!0})};if(Je){const Pr=Wt.segments.get();for(const Ur of Pr)_t.push({segments:new a.aY([Ur]),sortKey:Ur.sortKey,state:yo})}else _t.push({segments:Wt.segments,sortKey:0,state:yo})}Je&&_t.sort(((Tt,zt)=>Tt.sortKey-zt.sortKey));for(const Tt of _t){const{programConfiguration:zt,program:jt,layoutVertexBuffer:Wt,indexBuffer:qt,uniformValues:fn,terrainData:Pn,projectionData:hn}=Tt.state;jt.draw(nt,tt.TRIANGLES,ft,lt,pt,ni.backCCW,fn,Pn,hn,H.id,Wt,qt,Tt.segments,H.paint,K.transform.zoom,zt)}})(u,m,b,S,k):a.cp(b)?(function(K,N,H,se,ce){if(H.paint.get("heatmap-opacity")===0)return;const ye=K.context,{isRenderingToTexture:ge,isRenderingGlobe:Se}=ce;if(K.style.map.terrain){for(const Le of se){const Je=N.getTile(Le);N.hasRenderableParent(Le)||(K.renderPass==="offscreen"?Vd(K,Je,H,Le,Se):K.renderPass==="translucent"&&ua(K,H,Le,ge,Se))}ye.viewport.set([0,0,K.width,K.height])}else K.renderPass==="offscreen"?(function(Le,Je,nt,tt){const rt=Le.context,ft=rt.gl,lt=Le.transform,pt=ii.disabled,_t=new Yn([ft.ONE,ft.ONE],a.bq.transparent,[!0,!0,!0,!0]);(function(At,Tt,zt){const jt=At.gl;At.activeTexture.set(jt.TEXTURE1),At.viewport.set([0,0,Tt.width/4,Tt.height/4]);let Wt=zt.heatmapFbos.get(a.ce);Wt?(jt.bindTexture(jt.TEXTURE_2D,Wt.colorAttachment.get()),At.bindFramebuffer.set(Wt.framebuffer)):(Wt=uo(At,Tt.width/4,Tt.height/4),zt.heatmapFbos.set(a.ce,Wt))})(rt,Le,nt),rt.clear({color:a.bq.transparent});for(let At=0;At<tt.length;At++){const Tt=tt[At];if(Je.hasRenderableParent(Tt))continue;const zt=Je.getTile(Tt),jt=zt.getBucket(nt);if(!jt)continue;const Wt=jt.programConfigurations.get(nt.id),qt=Le.useProgram("heatmap",Wt),fn=lt.getProjectionData({overscaledTileID:Tt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Pn=lt.getCircleRadiusCorrection();qt.draw(rt,ft.TRIANGLES,si.disabled,pt,_t,ni.backCCW,qh(zt,lt.zoom,nt.paint.get("heatmap-intensity"),Pn),null,fn,nt.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,nt.paint,lt.zoom,Wt)}rt.viewport.set([0,0,Le.width,Le.height])})(K,N,H,se):K.renderPass==="translucent"&&(function(Le,Je){const nt=Le.context,tt=nt.gl;nt.setColorMode(Le.colorModeForRenderPass());const rt=Je.heatmapFbos.get(a.ce);rt&&(nt.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,rt.colorAttachment.get()),nt.activeTexture.set(tt.TEXTURE1),Lr(nt,Je).bind(tt.LINEAR,tt.CLAMP_TO_EDGE),Le.useProgram("heatmapTexture").draw(nt,tt.TRIANGLES,si.disabled,ii.disabled,Le.colorModeForRenderPass(),ni.disabled,Fm(Le,Je,0,1),null,null,Je.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments,Je.paint,Le.transform.zoom))})(K,H)})(u,m,b,S,k):a.cq(b)?(function(K,N,H,se,ce){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ce,ge=H.paint.get("line-opacity"),Se=H.paint.get("line-width");if(ge.constantOr(1)===0||Se.constantOr(1)===0)return;const Le=K.getDepthModeForSublayer(0,si.ReadOnly),Je=K.colorModeForRenderPass(),nt=H.paint.get("line-dasharray"),tt=nt.constantOr(1),rt=H.paint.get("line-pattern"),ft=rt.constantOr(1),lt=H.paint.get("line-gradient"),pt=H.getCrossfadeParameters();let _t;_t=ft?"linePattern":tt&&lt?"lineGradientSDF":tt?"lineSDF":lt?"lineGradient":"line";const At=K.context,Tt=At.gl,zt=K.transform;let jt=!0;for(const Wt of se){const qt=N.getTile(Wt);if(ft&&!qt.patternsLoaded())continue;const fn=qt.getBucket(H);if(!fn)continue;const Pn=fn.programConfigurations.get(H.id),hn=K.context.program.get(),ui=K.useProgram(_t,Pn),or=jt||ui.program!==hn,go=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Wt),ko=rt.constantOr(null),yo=nt&&nt.constantOr(null);if(ko&&qt.imageAtlas){const Qs=qt.imageAtlas,jo=Qs.patternPositions[ko.to.toString()],Ps=Qs.patternPositions[ko.from.toString()];jo&&Ps&&Pn.setConstantPatternPositions(jo,Ps)}else if(yo){const Qs=H.layout.get("line-cap")==="round",jo=K.lineAtlas.getDash(yo.to,Qs),Ps=K.lineAtlas.getDash(yo.from,Qs);Pn.setConstantDashPositions(jo,Ps)}const Pr=zt.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!ye,applyTerrainMatrix:!0}),Ur=zt.getPixelScale();let Ea;ft?(Ea=Yh(K,qt,H,Ur,pt),ec(At,Tt,qt,Pn,pt)):tt&&lt?(Ea=ah(K,qt,H,Ur,pt,fn.lineClipsArray.length),Ll(K,N,At,Tt,H,fn,Wt,Pn,pt)):tt?(Ea=Ts(K,qt,H,Ur,pt),ks(K,At,Tt,Pn,or,pt)):lt?(Ea=ry(K,qt,H,Ur,fn.lineClipsArray.length),Tu(K,N,At,Tt,H,fn,Wt)):Ea=zm(K,qt,H,Ur);const is=K.stencilModeForClipping(Wt);ui.draw(At,Tt.TRIANGLES,Le,is,Je,ni.disabled,Ea,go,Pr,H.id,fn.layoutVertexBuffer,fn.indexBuffer,fn.segments,H.paint,K.transform.zoom,Pn,fn.layoutVertexBuffer2),jt=!1}})(u,m,b,S,k):a.cr(b)?(function(K,N,H,se,ce){const ye=H.paint.get("fill-color"),ge=H.paint.get("fill-opacity");if(ge.constantOr(1)===0)return;const{isRenderingToTexture:Se}=ce,Le=K.colorModeForRenderPass(),Je=H.paint.get("fill-pattern"),nt=K.opaquePassEnabledForLayer()&&!Je.constantOr(1)&&ye.constantOr(a.bq.transparent).a===1&&ge.constantOr(0)===1?"opaque":"translucent";if(K.renderPass===nt){const tt=K.getDepthModeForSublayer(1,K.renderPass==="opaque"?si.ReadWrite:si.ReadOnly);nA(K,N,H,se,tt,Le,!1,Se)}if(K.renderPass==="translucent"&&H.paint.get("fill-antialias")){const tt=K.getDepthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,si.ReadOnly);nA(K,N,H,se,tt,Le,!0,Se)}})(u,m,b,S,k):a.cs(b)?(function(K,N,H,se,ce){const ye=H.paint.get("fill-extrusion-opacity");if(ye===0)return;const{isRenderingToTexture:ge}=ce;if(K.renderPass==="translucent"){const Se=new si(K.context.gl.LEQUAL,si.ReadWrite,K.depthRangeFor3D);if(ye!==1||H.paint.get("fill-extrusion-pattern").constantOr(1))Qe(K,N,H,se,Se,ii.disabled,Yn.disabled,ge),Qe(K,N,H,se,Se,K.stencilModeFor3D(),K.colorModeForRenderPass(),ge);else{const Le=K.colorModeForRenderPass();Qe(K,N,H,se,Se,ii.disabled,Le,ge)}}})(u,m,b,S,k):a.ct(b)?(function(K,N,H,se,ce){if(K.renderPass!=="offscreen"&&K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ce,ge=K.context,Se=K.style.projection.useSubdivision,Le=K.getDepthModeForSublayer(0,si.ReadOnly),Je=K.colorModeForRenderPass();if(K.renderPass==="offscreen")(function(nt,tt,rt,ft,lt,pt,_t){const At=nt.context,Tt=At.gl;for(const zt of rt){const jt=tt.getTile(zt),Wt=jt.dem;if(!Wt||!Wt.data||!jt.needsHillshadePrepare)continue;const qt=Wt.dim,fn=Wt.stride,Pn=Wt.getPixels();if(At.activeTexture.set(Tt.TEXTURE1),At.pixelStoreUnpackPremultiplyAlpha.set(!1),jt.demTexture=jt.demTexture||nt.getTileTexture(fn),jt.demTexture){const ui=jt.demTexture;ui.update(Pn,{premultiply:!1}),ui.bind(Tt.NEAREST,Tt.CLAMP_TO_EDGE)}else jt.demTexture=new a.T(At,Pn,Tt.RGBA,{premultiply:!1}),jt.demTexture.bind(Tt.NEAREST,Tt.CLAMP_TO_EDGE);At.activeTexture.set(Tt.TEXTURE0);let hn=jt.fbo;if(!hn){const ui=new a.T(At,{width:qt,height:qt,data:null},Tt.RGBA);ui.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),hn=jt.fbo=At.createFramebuffer(qt,qt,!0,!1),hn.colorAttachment.set(ui.texture)}At.bindFramebuffer.set(hn.framebuffer),At.viewport.set([0,0,qt,qt]),nt.useProgram("hillshadePrepare").draw(At,Tt.TRIANGLES,lt,pt,_t,ni.disabled,sh(jt.tileID,Wt),null,null,ft.id,nt.rasterBoundsBuffer,nt.quadTriangleIndexBuffer,nt.rasterBoundsSegments),jt.needsHillshadePrepare=!1}})(K,N,se,H,Le,ii.disabled,Je),ge.viewport.set([0,0,K.width,K.height]);else if(K.renderPass==="translucent")if(Se){const[nt,tt,rt]=K.stencilConfigForOverlapTwoPass(se);ou(K,N,H,rt,nt,Le,Je,!1,ye),ou(K,N,H,rt,tt,Le,Je,!0,ye)}else{const[nt,tt]=K.getStencilConfigForOverlapAndUpdateStencilID(se);ou(K,N,H,tt,nt,Le,Je,!1,ye)}})(u,m,b,S,k):a.cu(b)?(function(K,N,H,se,ce){if(K.renderPass!=="translucent"||!se.length)return;const{isRenderingToTexture:ye}=ce,ge=K.style.projection.useSubdivision,Se=K.getDepthModeForSublayer(0,si.ReadOnly),Le=K.colorModeForRenderPass();if(ge){const[Je,nt,tt]=K.stencilConfigForOverlapTwoPass(se);Bc(K,N,H,tt,Je,Se,Le,!1,ye),Bc(K,N,H,tt,nt,Se,Le,!0,ye)}else{const[Je,nt]=K.getStencilConfigForOverlapAndUpdateStencilID(se);Bc(K,N,H,nt,Je,Se,Le,!1,ye)}})(u,m,b,S,k):a.bV(b)?(function(K,N,H,se,ce){if(K.renderPass!=="translucent"||H.paint.get("raster-opacity")===0||!se.length)return;const{isRenderingToTexture:ye}=ce,ge=N.getSource(),Se=K.style.projection.useSubdivision;if(ge instanceof Tn)hr(K,N,H,se,null,!1,!1,ge.tileCoords,ge.flippedWindingOrder,ye);else if(Se){const[Le,Je,nt]=K.stencilConfigForOverlapTwoPass(se);hr(K,N,H,nt,Le,!1,!0,Sa,!1,ye),hr(K,N,H,nt,Je,!0,!0,Sa,!1,ye)}else{const[Le,Je]=K.getStencilConfigForOverlapAndUpdateStencilID(se);hr(K,N,H,Je,Le,!1,!0,Sa,!1,ye)}})(u,m,b,S,k):a.cv(b)?(function(K,N,H,se,ce){const ye=H.paint.get("background-color"),ge=H.paint.get("background-opacity");if(ge===0)return;const{isRenderingToTexture:Se}=ce,Le=K.context,Je=Le.gl,nt=K.style.projection,tt=K.transform,rt=tt.tileSize,ft=H.paint.get("background-pattern");if(K.isPatternMissing(ft))return;const lt=!ft&&ye.a===1&&ge===1&&K.opaquePassEnabledForLayer()?"opaque":"translucent";if(K.renderPass!==lt)return;const pt=ii.disabled,_t=K.getDepthModeForSublayer(0,lt==="opaque"?si.ReadWrite:si.ReadOnly),At=K.colorModeForRenderPass(),Tt=K.useProgram(ft?"backgroundPattern":"background"),zt=se||Ui(tt,{tileSize:rt,terrain:K.style.map.terrain});ft&&(Le.activeTexture.set(Je.TEXTURE0),K.imageManager.bind(K.context));const jt=H.getCrossfadeParameters();for(const Wt of zt){const qt=tt.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!Se,applyTerrainMatrix:!0}),fn=ft?tn(ge,K,ft,{tileID:Wt,tileSize:rt},jt):ln(ge,ye),Pn=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Wt),hn=nt.getMeshFromTileID(Le,Wt.canonical,!1,!0,"raster");Tt.draw(Le,Je.TRIANGLES,_t,pt,At,ni.backCCW,fn,Pn,qt,H.id,hn.vertexBuffer,hn.indexBuffer,hn.segments)}})(u,0,b,S,k):a.cw(b)&&(function(K,N,H,se){const{isRenderingGlobe:ce}=se,ye=K.context,ge=H.implementation,Se=K.style.projection,Le=K.transform,Je=Le.getProjectionDataForCustomLayer(ce),nt={farZ:Le.farZ,nearZ:Le.nearZ,fov:Le.fov*Math.PI/180,modelViewProjectionMatrix:Le.modelViewProjectionMatrix,projectionMatrix:Le.projectionMatrix,shaderData:{variantName:Se.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Se.shaderPreludeCode.vertexSource}`,define:Se.shaderDefine},defaultProjectionData:Je},tt=ge.renderingMode?ge.renderingMode:"2d";if(K.renderPass==="offscreen"){const rt=ge.prerender;rt&&(K.setCustomLayerDefaults(),ye.setColorMode(K.colorModeForRenderPass()),rt.call(ge,ye.gl,nt),ye.setDirty(),K.setBaseState())}else if(K.renderPass==="translucent"){K.setCustomLayerDefaults(),ye.setColorMode(K.colorModeForRenderPass()),ye.setStencilMode(ii.disabled);const rt=tt==="3d"?K.getDepthModeFor3D():K.getDepthModeForSublayer(0,si.ReadOnly);ye.setDepthMode(rt),ge.render(ye.gl,nt),ye.setDirty(),K.setBaseState(),ye.bindFramebuffer.set(null)}})(u,0,b,k))}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const m=this.imageManager.getPattern(u.from.toString()),b=this.imageManager.getPattern(u.to.toString());return!m||!b}useProgram(u,m,b=!1,S=[]){this.cache=this.cache||{};const k=!!this.style.map.terrain,K=this.style.projection,N=b?po.projectionMercator:K.shaderPreludeCode,H=b?bo:K.shaderDefine,se=u+(m?m.cacheKey:"")+`/${b?Ns:K.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(k?"/terrain":"")+(S?`/${S.join("/")}`:"");return this.cache[se]||(this.cache[se]=new o0(this.context,po[u],m,yr[u],this._showOverdrawInspector,k,N,H,S)),this.cache[se]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var u,m;if(this._tileTextures){for(const b in this._tileTextures){const S=this._tileTextures[b];if(S)for(const k of S)k.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((u=this.tileExtentMesh.vertexBuffer)===null||u===void 0||u.destroy()),this.tileExtentMesh&&((m=this.tileExtentMesh.indexBuffer)===null||m===void 0||m.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const b in this.cache){const S=this.cache[b];S&&S.program&&this.context.gl.deleteProgram(S.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:m}=this.context.gl;return this.width!==u||this.height!==m}}function zg(I,u){let m,b=!1,S=null,k=null;const K=()=>{S=null,b&&(I.apply(k,m),S=setTimeout(K,u),b=!1)};return(...N)=>(b=!0,k=this,m=N,S||K(),S)}class Ds{constructor(u){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let b;return m.split("&").map((S=>S.split("="))).forEach((S=>{S[0]===this._hashName&&(b=S)})),(b&&b[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(!this._isValidHash(m))return!1;const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,m)},this._removeHash=()=>{const m=this._getCurrentHash();if(m.length===0)return;const b=m.join("/");let S=b;S.split("&").length>0&&(S=S.split("&")[0]),this._hashName&&(S=`${this._hashName}=${b}`);let k=window.location.hash.replace(S,"");k.startsWith("#&")?k=k.slice(0,1)+k.slice(2):k==="#"&&(k="");let K=window.location.href.replace(/(#.+)?$/,k);K=K.replace("&&","&"),window.history.replaceState(window.history.state,null,K)},this._updateHash=zg(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(u){const m=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,S=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,S),K=Math.round(m.lng*k)/k,N=Math.round(m.lat*k)/k,H=this._map.getBearing(),se=this._map.getPitch();let ce="";if(ce+=u?`/${K}/${N}/${b}`:`${b}/${N}/${K}`,(H||se)&&(ce+="/"+Math.round(10*H)/10),se&&(ce+=`/${Math.round(se)}`),this._hashName){const ye=this._hashName;let ge=!1;const Se=window.location.hash.slice(1).split("&").map((Le=>{const Je=Le.split("=")[0];return Je===ye?(ge=!0,`${Je}=${ce}`):Le})).filter((Le=>Le));return ge||Se.push(`${ye}=${ce}`),`#${Se.join("&")}`}return`#${ce}`}_isValidHash(u){if(u.length<3||u.some(isNaN))return!1;try{new a.V(+u[2],+u[1])}catch{return!1}const m=+u[0],b=+(u[3]||0),S=+(u[4]||0);return m>=this._map.getMinZoom()&&m<=this._map.getMaxZoom()&&b>=-180&&b<=180&&S>=this._map.getMinPitch()&&S<=this._map.getMaxPitch()}}const Kl={linearity:.3,easing:a.cx(0,0,.3,1)},Fl=a.e({deceleration:2500,maxSpeed:1400},Kl),su=a.e({deceleration:20,maxSpeed:1400},Kl),f0=a.e({deceleration:1e3,maxSpeed:360},Kl),zl=a.e({deceleration:1e3,maxSpeed:90},Kl),Ff=a.e({deceleration:1e3,maxSpeed:360},Kl);class Ic{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=U();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)m.zoom+=k.zoomDelta||0,m.bearing+=k.bearingDelta||0,m.pitch+=k.pitchDelta||0,m.roll+=k.rollDelta||0,k.panDelta&&m.pan._add(k.panDelta),k.around&&(m.around=k.around),k.pinchAround&&(m.pinchAround=k.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(m.pan.mag()){const k=Ym(m.pan.mag(),b,a.e({},Fl,u||{})),K=m.pan.mult(k.amount/m.pan.mag()),N=this._map.cameraHelper.handlePanInertia(K,this._map.transform);S.center=N.easingCenter,S.offset=N.easingOffset,zf(S,k)}if(m.zoom){const k=Ym(m.zoom,b,su);S.zoom=this._map.transform.zoom+k.amount,zf(S,k)}if(m.bearing){const k=Ym(m.bearing,b,f0);S.bearing=this._map.transform.bearing+a.ao(k.amount,-179,179),zf(S,k)}if(m.pitch){const k=Ym(m.pitch,b,zl);S.pitch=this._map.transform.pitch+k.amount,zf(S,k)}if(m.roll){const k=Ym(m.roll,b,Ff);S.roll=this._map.transform.roll+a.ao(k.amount,-179,179),zf(S,k)}if(S.zoom||S.bearing){const k=m.pinchAround===void 0?m.around:m.pinchAround;S.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),a.e(S,{noMoveStart:!0})}}function zf(I,u){(!I.duration||I.duration<u.duration)&&(I.duration=u.duration,I.easing=u.easing)}function Ym(I,u,m){const{maxSpeed:b,linearity:S,deceleration:k}=m,K=a.ao(I*S/(u/1e3),-b,b),N=Math.abs(K)/(k*S);return{easing:m.easing,duration:1e3*N,amount:K*(N/2)}}class Rs extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b,S={}){b=b instanceof MouseEvent?b:new MouseEvent(u,b);const k=z.mousePos(m.getCanvas(),b),K=m.unproject(k);super(u,a.e({point:k,lngLat:K,originalEvent:b},S)),this._defaultPrevented=!1,this.target=m}}class iA extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){const S=u==="touchend"?b.changedTouches:b.touches,k=z.touchPos(m.getCanvasContainer(),S),K=k.map((H=>m.unproject(H))),N=k.reduce(((H,se,ce,ye)=>H.add(se.div(ye.length))),new a.P(0,0));super(u,{points:k,point:N,lngLats:K,lngLat:m.unproject(N),originalEvent:b}),this._defaultPrevented=!1}}class Vm extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){super(u,{originalEvent:b}),this._defaultPrevented=!1}}class ed{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new Vm(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new Rs(u.type,this._map,u))}mouseup(u){this._map.fire(new Rs(u.type,this._map,u))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new Rs(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Rs(u.type,this._map,u))}mouseover(u){this._map.fire(new Rs(u.type,this._map,u))}mouseout(u){this._map.fire(new Rs(u.type,this._map,u))}touchstart(u){return this._firePreventable(new iA(u.type,this._map,u))}touchmove(u){this._map.fire(new iA(u.type,this._map,u))}touchend(u){this._map.fire(new iA(u.type,this._map,u))}touchcancel(u){this._map.fire(new iA(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class PA{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Rs(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Rs(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jn{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.screenPointToLocation(a.P.convert(u),this._map.terrain)}}class jf{constructor(u,m){this._map=u,this._tr=new jn(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(z.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const b=m;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=b,this._box||(this._box=z.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const k=Math.min(S.x,b.x),K=Math.max(S.x,b.x),N=Math.min(S.y,b.y),H=Math.max(S.y,b.y);z.setTransform(this._box,`translate(${k}px,${N}px)`),this._box.style.width=K-k+"px",this._box.style.height=H-N+"px"}mouseupWindow(u,m){if(!this._active||u.button!==0)return;const b=this._startPos,S=m;if(this.reset(),z.suppressClick(),b.x!==S.x||b.y!==S.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:u})),{cameraAnimation:k=>k.fitScreenCoordinates(b,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new a.l(u,{originalEvent:m}))}}function ph(I,u){if(I.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${u.length}`);const m={};for(let b=0;b<I.length;b++)m[I[b].identifier]=u[b];return m}class $m{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),b.length===this.numTouches&&(this.centroid=(function(S){const k=new a.P(0,0);for(const K of S)k._add(K);return k.div(S.length)})(m),this.touches=ph(b,m)))}touchmove(u,m,b){if(this.aborted||!this.centroid)return;const S=ph(b,m);for(const k in this.touches){const K=S[k];(!K||K.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(u,m,b){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class td{constructor(u){this.singleTap=new $m(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,m,b){this.singleTap.touchstart(u,m,b)}touchmove(u,m,b){this.singleTap.touchmove(u,m,b)}touchend(u,m,b){const S=this.singleTap.touchend(u,m,b);if(S){const k=u.timeStamp-this.lastTime<500,K=!this.lastTap||this.lastTap.dist(S)<30;if(k&&K||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class nd{constructor(u){this._tr=new jn(u),this._zoomIn=new td({numTouches:1,numTaps:2}),this._zoomOut=new td({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,b){this._zoomIn.touchstart(u,m,b),this._zoomOut.touchstart(u,m,b)}touchmove(u,m,b){this._zoomIn.touchmove(u,m,b),this._zoomOut.touchmove(u,m,b)}touchend(u,m,b){const S=this._zoomIn.touchend(u,m,b),k=this._zoomOut.touchend(u,m,b),K=this._tr;return S?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:K.zoom+1,around:K.unproject(S)},{originalEvent:u})}):k?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:K.zoom-1,around:K.unproject(k)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ml{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const m=this._moveFunction(...u);if(m.bearingDelta||m.pitchDelta||m.rollDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(u,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=Array.isArray(m)?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,m){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const S=Array.isArray(m)?m[0]:m;return!this._moved&&S.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(b,S))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&z.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const UA=0,m0=2,p0={[UA]:1,[m0]:2};class Tc{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const m=z.mouseButton(u);this._eventButton=m}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!(function(m,b){const S=p0[b];return m.buttons===void 0||(m.buttons&S)!==S})(u,this._eventButton)}isValidEndEvent(u){return z.mouseButton(u)===this._eventButton}}class nc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}class $d{constructor(u=new Tc({checkCorrectEvent:()=>!0}),m=new nc){this.mouseMoveStateManager=u,this.oneFingerTouchMoveStateManager=m}_executeRelevantHandler(u,m,b){return u instanceof MouseEvent?m(u):typeof TouchEvent<"u"&&u instanceof TouchEvent?b(u):void 0}startMove(u){this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.startMove(m)),(m=>this.oneFingerTouchMoveStateManager.startMove(m)))}endMove(u){this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.endMove(m)),(m=>this.oneFingerTouchMoveStateManager.endMove(m)))}isValidStartEvent(u){return this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.isValidStartEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidStartEvent(m)))}isValidMoveEvent(u){return this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.isValidMoveEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(m)))}isValidEndEvent(u){return this._executeRelevantHandler(u,(m=>this.mouseMoveStateManager.isValidEndEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidEndEvent(m)))}}const ku=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=u=>{u.preventDefault()}};class au{constructor(u,m){this._clickTolerance=u.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(u){return u<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(u,m,b){return this._calculateTransform(u,m,b)}touchmove(u,m,b){if(this._active){if(!this._shouldBePrevented(b.length))return u.preventDefault(),this._calculateTransform(u,m,b);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",u)}}touchend(u,m,b){this._calculateTransform(u,m,b),this._active&&this._shouldBePrevented(b.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,b){b.length>0&&(this._active=!0);const S=ph(b,m),k=new a.P(0,0),K=new a.P(0,0);let N=0;for(const se in S){const ce=S[se],ye=this._touches[se];ye&&(k._add(ce),K._add(ce.sub(ye)),N++,S[se]=ce)}if(this._touches=S,this._shouldBePrevented(N)||!K.mag())return;const H=K.div(N);return this._sum._add(H),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(N),panDelta:H}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hm{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,b){if(!this._firstTwoTouches)return;u.preventDefault();const[S,k]=this._firstTwoTouches,K=rA(b,m,S),N=rA(b,m,k);if(!K||!N)return;const H=this._aroundCenter?null:K.add(N).div(2);return this._move([K,N],H,u)}touchend(u,m,b){if(!this._firstTwoTouches)return;const[S,k]=this._firstTwoTouches,K=rA(b,m,S),N=rA(b,m,k);K&&N||(this._active&&z.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function rA(I,u,m){for(let b=0;b<I.length;b++)if(I[b].identifier===m)return u[b]}function Zm(I,u){return Math.log(I/u)/Math.LN2}class ic extends Hm{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const b=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Zm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zm(this._distance,b),pinchAround:m}}}function oA(I,u){return 180*I.angleWith(u)/Math.PI}class kc extends Hm{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m,b){const S=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:oA(this._vector,S),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,b=oA(u,this._startVector);return Math.abs(b)<m}}function Gr(I){return Math.abs(I.y)>Math.abs(I.x)}class Dc extends Hm{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,m,b){super.touchstart(u,m,b),this._currentTouchCount=b.length}_start(u){this._lastPoints=u,Gr(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,b){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const S=u[0].sub(this._lastPoints[0]),k=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,k,b.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(S.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(u,m,b){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,k=m.mag()>=2;if(!S&&!k)return;if(!S||!k)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const K=u.y>0==m.y>0;return Gr(u)&&Gr(m)&&K}}const id={panStep:100,bearingStep:15,pitchStep:10};class rd{constructor(u){this._tr=new jn(u);const m=id;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,b=0,S=0,k=0,K=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?b=-1:(u.preventDefault(),k=-1);break;case 39:u.shiftKey?b=1:(u.preventDefault(),k=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),K=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(b=0,S=0),{cameraAnimation:N=>{const H=this._tr;N.easeTo({duration:300,easeId:"keyboardHandler",easing:Aa,zoom:m?Math.round(H.zoom)+m*(u.shiftKey?2:1):H.zoom,bearing:H.bearing+b*this._bearingStep,pitch:H.pitch+S*this._pitchStep,offset:[-k*this._panStep,-K*this._panStep],center:H.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Aa(I){return I*(2-I)}const gh=4.000244140625,Hd=1/450;class rc{constructor(u,m){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=u,this._tr=new jn(u),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Hd}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(u){return!!this._map.cooperativeGestures.isEnabled()&&!(u.ctrlKey||this._map.cooperativeGestures.isBypassed(u))}wheel(u){if(!this.isEnabled())return;if(this._shouldBePrevented(u))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",u);let m=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const b=U(),S=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%gh==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=z.mousePos(this._map.getCanvas(),u),b=this._tr;this._aroundPoint=this._aroundCenter?b.transform.locationToScreenPoint(a.V.convert(b.center)):m,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const N=u.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=N),typeof this._targetZoom=="number"&&(this._targetZoom+=N)}if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>gh?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&H!==0&&(H=1/H);const se=typeof this._targetZoom!="number"?u.scale:a.ar(this._targetZoom);this._targetZoom=u.applyConstrain(u.getCameraLngLat(),a.au(se*H)).zoom,this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom!="number"?u.zoom:this._targetZoom,b=this._startZoom,S=this._easing;let k,K=!1;if(this._type==="wheel"&&b&&S){const N=U()-this._lastWheelEventTime,H=Math.min((N+5)/200,1),se=S(H);k=a.G.number(b,m,se),H<1?this._frameId||(this._frameId=!0):K=!0}else k=m,K=!0;return this._active=!0,K&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=k,{noInertia:!0,needsRenderFrame:!K,zoomDelta:k-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=a.cz;if(this._prevEase){const b=this._prevEase,S=(U()-b.start)/b.duration,k=b.easing(S+.01)-b.easing(S),K=.27/Math.sqrt(k*k+1e-4)*.01,N=Math.sqrt(.0729-K*K);m=a.cx(K,N,.25,1)}return this._prevEase={start:U(),duration:u,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xm{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class il{constructor(u){this._tr=new jn(u),this.reset()}reset(){this._active=!1}dblclick(u,m){return u.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oc{constructor(){this._tap=new td({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,m,b){if(!this._swipePoint)if(this._tapTime){const S=m[0],k=u.timeStamp-this._tapTime<500,K=this._tapPoint.dist(S)<30;k&&K?b.length>0&&(this._swipePoint=S,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(u,m,b)}touchmove(u,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const S=m[0],k=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(u,m,b)}touchend(u,m,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const S=this._tap.touchend(u,m,b);S&&(this._tapTime=u.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mi{constructor(u,m,b){this._el=u,this._mousePan=m,this._touchPan=b}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class li{constructor(u,m,b,S){this._pitchWithRotate=u.pitchWithRotate,this._rollEnabled=u.rollEnabled,this._mouseRotate=m,this._mousePitch=b,this._mouseRoll=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class LA{constructor(u,m,b,S){this._el=u,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class lu{constructor(u,m){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=m,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=z.create("div","maplibregl-cooperative-gesture-screen",u);let m=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(m=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const b=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),S=document.createElement("div");S.className="maplibregl-desktop-message",S.textContent=m,this._container.appendChild(S);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=b,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(z.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(u){return u[this._bypassKey]}notifyGestureBlocked(u,m){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:u,originalEvent:m})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const rl=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class Js extends a.l{}function pl(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class jg{constructor(u,m){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,k)=>{if(S.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const K=S.type==="renderFrame"?void 0:S,N={needsRenderFrame:!1},H={},se={};for(const{handlerName:ge,handler:Se,allowed:Le}of this._handlers){if(!Se.isEnabled())continue;let Je;if(this._blockedByActive(se,Le,ge))Se.reset();else if(Se[k||S.type]){if(a.cA(S,k||S.type)){const nt=z.mousePos(this._map.getCanvas(),S);Je=Se[k||S.type](S,nt)}else if(a.cB(S,k||S.type)){const nt=this._getMapTouches(S.touches),tt=z.touchPos(this._map.getCanvas(),nt);Je=Se[k||S.type](S,tt,nt)}else a.cC(k||S.type)||(Je=Se[k||S.type](S));this.mergeHandlerResult(N,H,Je,ge,K),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()}(Je||Se.isActive())&&(se[ge]=Se)}const ce={};for(const ge in this._previousActiveHandlers)se[ge]||(ce[ge]=K);this._previousActiveHandlers=se,(Object.keys(ce).length||pl(N))&&(this._changes.push([N,H,ce]),this._triggerRenderFrame()),(Object.keys(se).length||pl(N))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=N;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ic(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,k,K]of this._listeners)z.addEventListener(S,k,S===document?this.handleWindowEvent:this.handleEvent,K)}destroy(){for(const[u,m,b]of this._listeners)z.removeEventListener(u,m,u===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(u){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new ed(m,u));const S=m.boxZoom=new jf(m,u);this._add("boxZoom",S),u.interactive&&u.boxZoom&&S.enable();const k=m.cooperativeGestures=new lu(m,u.cooperativeGestures);this._add("cooperativeGestures",k),u.cooperativeGestures&&k.enable();const K=new nd(m),N=new il(m);m.doubleClickZoom=new Xm(N,K),this._add("tapZoom",K),this._add("clickZoom",N),u.interactive&&u.doubleClickZoom&&m.doubleClickZoom.enable();const H=new oc;this._add("tapDragZoom",H);const se=m.touchPitch=new Dc(m);this._add("touchPitch",se),u.interactive&&u.touchPitch&&m.touchPitch.enable(u.touchPitch);const ce=()=>m.project(m.getCenter()),ye=(function({enable:lt,clickTolerance:pt,aroundCenter:_t=!0,minPixelCenterThreshold:At=100,rotateDegreesPerPixelMoved:Tt=.8},zt){const jt=new Tc({checkCorrectEvent:Wt=>z.mouseButton(Wt)===0&&Wt.ctrlKey||z.mouseButton(Wt)===2&&!Wt.ctrlKey});return new ml({clickTolerance:pt,move:(Wt,qt)=>{const fn=zt();if(_t&&Math.abs(fn.y-Wt.y)>At)return{bearingDelta:a.cy(new a.P(Wt.x,qt.y),qt,fn)};let Pn=(qt.x-Wt.x)*Tt;return _t&&qt.y<fn.y&&(Pn=-Pn),{bearingDelta:Pn}},moveStateManager:jt,enable:lt,assignEvents:ku})})(u,ce),ge=(function({enable:lt,clickTolerance:pt,pitchDegreesPerPixelMoved:_t=-.5}){const At=new Tc({checkCorrectEvent:Tt=>z.mouseButton(Tt)===0&&Tt.ctrlKey||z.mouseButton(Tt)===2});return new ml({clickTolerance:pt,move:(Tt,zt)=>({pitchDelta:(zt.y-Tt.y)*_t}),moveStateManager:At,enable:lt,assignEvents:ku})})(u),Se=(function({enable:lt,clickTolerance:pt,rollDegreesPerPixelMoved:_t=.3},At){const Tt=new Tc({checkCorrectEvent:zt=>z.mouseButton(zt)===2&&zt.ctrlKey});return new ml({clickTolerance:pt,move:(zt,jt)=>{const Wt=At();let qt=(jt.x-zt.x)*_t;return jt.y<Wt.y&&(qt=-qt),{rollDelta:qt}},moveStateManager:Tt,enable:lt,assignEvents:ku})})(u,ce);m.dragRotate=new li(u,ye,ge,Se),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",ge,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Se,["mousePitch"]),u.interactive&&u.dragRotate&&m.dragRotate.enable();const Le=(function({enable:lt,clickTolerance:pt}){const _t=new Tc({checkCorrectEvent:At=>z.mouseButton(At)===0&&!At.ctrlKey});return new ml({clickTolerance:pt,move:(At,Tt)=>({around:Tt,panDelta:Tt.sub(At)}),activateOnStart:!0,moveStateManager:_t,enable:lt,assignEvents:ku})})(u),Je=new au(u,m);m.dragPan=new mi(b,Le,Je),this._add("mousePan",Le),this._add("touchPan",Je,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&m.dragPan.enable(u.dragPan);const nt=new kc,tt=new ic;m.touchZoomRotate=new LA(b,tt,nt,H),this._add("touchRotate",nt,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&m.touchZoomRotate.enable(u.touchZoomRotate),this._add("blockableMapEvent",new PA(m));const rt=m.scrollZoom=new rc(m,(()=>this._triggerRenderFrame()));this._add("scrollZoom",rt,["mousePan"]),u.interactive&&u.scrollZoom&&m.scrollZoom.enable(u.scrollZoom);const ft=m.keyboard=new rd(m);this._add("keyboard",ft),u.interactive&&u.keyboard&&m.keyboard.enable()}_add(u,m,b){this._handlers.push({handlerName:u,handler:m,allowed:b}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!rl(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,m,b){for(const S in u)if(S!==b&&(!m||m.indexOf(S)<0))return!0;return!1}_getMapTouches(u){const m=[];for(const b of u)this._el.contains(b.target)&&m.push(b);return m}mergeHandlerResult(u,m,b,S,k){if(!b)return;a.e(u,b);const K={handlerName:S,originalEvent:b.originalEvent||k};b.zoomDelta!==void 0&&(m.zoom=K),b.panDelta!==void 0&&(m.drag=K),b.rollDelta!==void 0&&(m.roll=K),b.pitchDelta!==void 0&&(m.pitch=K),b.bearingDelta!==void 0&&(m.rotate=K)}_applyChanges(){const u={},m={},b={};for(const[S,k,K]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.rollDelta&&(u.rollDelta=(u.rollDelta||0)+S.rollDelta),S.around!==void 0&&(u.around=S.around),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),a.e(m,k),a.e(b,K);this._updateMapTransform(u,m,b),this._changes=[]}_updateMapTransform(u,m,b){const S=this._map,k=S._getTransformForUpdate(),K=S.terrain;if(!(pl(u)||K&&this._terrainMovement))return this._fireEvents(m,b,!0);S._stop(!0);let{panDelta:N,zoomDelta:H,bearingDelta:se,pitchDelta:ce,rollDelta:ye,around:ge,pinchAround:Se}=u;Se!==void 0&&(ge=Se),ge=ge||S.transform.centerPoint,K&&!k.isPointOnMapSurface(ge)&&(ge=k.centerPoint);const Le={panDelta:N,zoomDelta:H,rollDelta:ye,pitchDelta:ce,bearingDelta:se,around:ge};this._map.cameraHelper.useGlobeControls&&!k.isPointOnMapSurface(ge)&&(ge=k.centerPoint);const Je=ge.distSqr(k.centerPoint)<.01?k.center:k.screenPointToLocation(N?ge.sub(N):ge);this._handleMapControls({terrain:K,tr:k,deltasForHelper:Le,preZoomAroundLoc:Je,combinedEventsInProgress:m,panDelta:N}),S._applyUpdatedTransform(k),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,b,!0)}_handleMapControls({terrain:u,tr:m,deltasForHelper:b,preZoomAroundLoc:S,combinedEventsInProgress:k,panDelta:K}){const N=this._map.cameraHelper;if(N.handleMapControlsRollPitchBearingZoom(b,m),u)return N.useGlobeControls?(this._terrainMovement||!k.drag&&!k.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void N.handleMapControlsPan(b,m,S)):this._terrainMovement||!k.drag&&!k.zoom?void(k.drag&&this._terrainMovement&&K?m.setCenter(m.screenPointToLocation(m.centerPoint.sub(K))):N.handleMapControlsPan(b,m,S)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void N.handleMapControlsPan(b,m,S));N.handleMapControlsPan(b,m,S)}_fireEvents(u,m,b){const S=rl(this._eventsInProgress),k=rl(u),K={};for(const ye in u){const{originalEvent:ge}=u[ye];this._eventsInProgress[ye]||(K[`${ye}start`]=ge),this._eventsInProgress[ye]=u[ye]}!S&&k&&this._fireEvent("movestart",k.originalEvent);for(const ye in K)this._fireEvent(ye,K[ye]);k&&this._fireEvent("move",k.originalEvent);for(const ye in u){const{originalEvent:ge}=u[ye];this._fireEvent(ye,ge)}const N={};let H;for(const ye in this._eventsInProgress){const{handlerName:ge,originalEvent:Se}=this._eventsInProgress[ye];this._handlersById[ge].isActive()||(delete this._eventsInProgress[ye],H=m[ge]||Se,N[`${ye}end`]=H)}for(const ye in N)this._fireEvent(ye,N[ye]);const se=rl(this._eventsInProgress),ce=(S||k)&&!se;if(ce&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ye=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ye.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ye)}if(b&&ce){this._updatingCamera=!0;const ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ge=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;!ye||!ye.essential&&E.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:H})),ge(this._map.getBearing())&&this._map.resetNorth()):(ge(ye.bearing||this._map.getBearing())&&(ye.bearing=0),ye.freezeElevation=!0,this._map.easeTo(ye,{originalEvent:H})),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new a.l(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{delete this._frameId,this.handleEvent(new Js("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Rc extends a.E{constructor(u,m,b){super(),this._renderFrameCallback=()=>{const S=Math.min((U()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(S)),S<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=b.bearingSnap,this.cameraHelper=m,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(u,m){u.apply(this.transform),this.transform=u,this.cameraHelper=m}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}getCenterElevation(){return this.transform.elevation}setCenterElevation(u,m){return this.jumpTo({elevation:u},m),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(u){this._centerClampedToGround=u}panBy(u,m,b){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},m),b)}panTo(u,m,b){return this.easeTo(a.e({center:u},m),b)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,b){return this.easeTo(a.e({zoom:u},m),b)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(u,m){return u!=this.transform.fov&&(this.transform.setFov(u),this.fire(new a.l("movestart",m)).fire(new a.l("move",m)).fire(new a.l("moveend",m))),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,b){return this.easeTo(a.e({bearing:u},m),b)}resetNorth(u,m){return this.rotateTo(0,a.e({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}getRoll(){return this.transform.roll}setRoll(u,m){return this.jumpTo({roll:u},m),this}cameraForBounds(u,m){u=nn.convert(u).adjustAntiMeridian();const b=m&&m.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),b,m)}_cameraForBoxAndBearing(u,m,b,S){const k={top:0,bottom:0,right:0,left:0};if(typeof(S=a.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const se=S.padding;S.padding={top:se,bottom:se,right:se,left:se}}const K=a.e(k,S.padding);S.padding=K;const N=this.transform,H=new nn(u,m);return this.cameraHelper.cameraForBoxAndBearing(S,K,H,b,N)}fitBounds(u,m,b){return this._fitInternal(this.cameraForBounds(u,m),m,b)}fitScreenCoordinates(u,m,b,S,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(u)),this.transform.screenPointToLocation(a.P.convert(m)),b,S),S,k)}_fitInternal(u,m,b){return u?(delete(m=a.e(u,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(u,m){this.stop();const b=this._getTransformForUpdate();let S=!1,k=!1,K=!1;const N=b.zoom;this.cameraHelper.handleJumpToCenterZoom(b,u);const H=b.zoom!==N;return"elevation"in u&&b.elevation!==+u.elevation&&b.setElevation(+u.elevation),"bearing"in u&&b.bearing!==+u.bearing&&(S=!0,b.setBearing(+u.bearing)),"pitch"in u&&b.pitch!==+u.pitch&&(k=!0,b.setPitch(+u.pitch)),"roll"in u&&b.roll!==+u.roll&&(K=!0,b.setRoll(+u.roll)),u.padding==null||b.isPaddingEqual(u.padding)||b.setPadding(u.padding),this._applyUpdatedTransform(b),this.fire(new a.l("movestart",m)).fire(new a.l("move",m)),H&&this.fire(new a.l("zoomstart",m)).fire(new a.l("zoom",m)).fire(new a.l("zoomend",m)),S&&this.fire(new a.l("rotatestart",m)).fire(new a.l("rotate",m)).fire(new a.l("rotateend",m)),k&&this.fire(new a.l("pitchstart",m)).fire(new a.l("pitch",m)).fire(new a.l("pitchend",m)),K&&this.fire(new a.l("rollstart",m)).fire(new a.l("roll",m)).fire(new a.l("rollend",m)),this.fire(new a.l("moveend",m))}calculateCameraOptionsFromTo(u,m,b,S=0){const k=a.ab.fromLngLat(u,m),K=a.ab.fromLngLat(b,S),N=K.x-k.x,H=K.y-k.y,se=K.z-k.z,ce=Math.hypot(N,H,se);if(ce===0)throw new Error("Can't calculate camera options with same From and To");const ye=Math.hypot(N,H),ge=a.au(this.transform.cameraToCenterDistance/ce/this.transform.tileSize),Se=180*Math.atan2(N,-H)/Math.PI;let Le=180*Math.acos(ye/ce)/Math.PI;return Le=se<0?90-Le:90+Le,{center:K.toLngLat(),elevation:S,zoom:ge,pitch:Le,bearing:Se}}calculateCameraOptionsFromCameraLngLatAltRotation(u,m,b,S,k){const K=this.transform.calculateCenterFromCameraLngLatAlt(u,m,b,S);return{center:K.center,elevation:K.elevation,zoom:K.zoom,bearing:b,pitch:S,roll:k}}easeTo(u,m){this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.cz},u)).animate===!1||!u.essential&&E.prefersReducedMotion)&&(u.duration=0);const b=this._getTransformForUpdate(),S=this.getBearing(),k=b.pitch,K=b.roll,N="bearing"in u?this._normalizeBearing(u.bearing,S):S,H="pitch"in u?+u.pitch:k,se="roll"in u?this._normalizeBearing(u.roll,K):K,ce="padding"in u?u.padding:b.padding,ye=a.P.convert(u.offset);let ge,Se;u.around&&(ge=a.V.convert(u.around),Se=b.locationToScreenPoint(ge));const Le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Je=this.cameraHelper.handleEaseTo(b,{bearing:N,pitch:H,roll:se,padding:ce,around:ge,aroundPoint:Se,offsetAsPoint:ye,offset:u.offset,zoom:u.zoom,center:u.center});return this._rotating=this._rotating||S!==N,this._pitching=this._pitching||H!==k,this._rolling=this._rolling||se!==K,this._padding=!b.isPaddingEqual(ce),this._zooming=this._zooming||Je.isZooming,this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,Le),this.terrain&&this._prepareElevation(Je.elevationCenter),this._ease((nt=>{Je.easeFunc(nt),this.terrain&&!u.freezeElevation&&this._updateElevation(nt),this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(nt=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(m,nt)}),u),this}_prepareEase(u,m,b={}){this._moving=!0,m||b.moving||this.fire(new a.l("movestart",u)),this._zooming&&!b.zooming&&this.fire(new a.l("zoomstart",u)),this._rotating&&!b.rotating&&this.fire(new a.l("rotatestart",u)),this._pitching&&!b.pitching&&this.fire(new a.l("pitchstart",u)),this._rolling&&!b.rolling&&this.fire(new a.l("rollstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&m!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(b-(m-(b*u+this._elevationStart))/(1-u)),this._elevationTarget=m}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,u))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(u){if(!this.terrain&&u.elevation>=0&&u.pitch<=90)return{};const m=u.getCameraLngLat(),b=u.getCameraAltitude(),S=this.terrain?this.terrain.getElevationForLngLatZoom(m,u.zoom):0;if(b<S){const k=this.calculateCameraOptionsFromTo(m,S,u.center,u.elevation);return{pitch:k.pitch,zoom:k.zoom}}return{}}_applyUpdatedTransform(u){const m=[];if(m.push((S=>this._elevateCameraIfInsideTerrain(S))),this.transformCameraUpdate&&m.push((S=>this.transformCameraUpdate(S))),!m.length)return;const b=u.clone();for(const S of m){const k=b.clone(),{center:K,zoom:N,roll:H,pitch:se,bearing:ce,elevation:ye}=S(k);K&&k.setCenter(K),ye!==void 0&&k.setElevation(ye),N!==void 0&&k.setZoom(N),H!==void 0&&k.setRoll(H),se!==void 0&&k.setPitch(se),ce!==void 0&&k.setBearing(ce),b.apply(k)}this.transform.apply(b)}_fireMoveEvents(u){this.fire(new a.l("move",u)),this._zooming&&this.fire(new a.l("zoom",u)),this._rotating&&this.fire(new a.l("rotate",u)),this._pitching&&this.fire(new a.l("pitch",u)),this._rolling&&this.fire(new a.l("roll",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const b=this._zooming,S=this._rotating,k=this._pitching,K=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,b&&this.fire(new a.l("zoomend",u)),S&&this.fire(new a.l("rotateend",u)),k&&this.fire(new a.l("pitchend",u)),K&&this.fire(new a.l("rollend",u)),this.fire(new a.l("moveend",u))}flyTo(u,m){if(!u.essential&&E.prefersReducedMotion){const qt=a.U(u,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(qt,m)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cz},u);const b=this._getTransformForUpdate(),S=b.bearing,k=b.pitch,K=b.roll,N=b.padding,H="bearing"in u?this._normalizeBearing(u.bearing,S):S,se="pitch"in u?+u.pitch:k,ce="roll"in u?this._normalizeBearing(u.roll,K):K,ye="padding"in u?u.padding:b.padding,ge=a.P.convert(u.offset);let Se=b.centerPoint.add(ge);const Le=b.screenPointToLocation(Se),Je=this.cameraHelper.handleFlyTo(b,{bearing:H,pitch:se,roll:ce,padding:ye,locationAtOffset:Le,offsetAsPoint:ge,center:u.center,minZoom:u.minZoom,zoom:u.zoom});let nt=u.curve;const tt=Math.max(b.width,b.height),rt=tt/Je.scaleOfZoom,ft=Je.pixelPathLength;typeof Je.scaleOfMinZoom=="number"&&(nt=Math.sqrt(tt/Je.scaleOfMinZoom/ft*2));const lt=nt*nt;function pt(qt){const fn=(rt*rt-tt*tt+(qt?-1:1)*lt*lt*ft*ft)/(2*(qt?rt:tt)*lt*ft);return Math.log(Math.sqrt(fn*fn+1)-fn)}function _t(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function At(qt){return(Math.exp(qt)+Math.exp(-qt))/2}const Tt=pt(!1);let zt=function(qt){return At(Tt)/At(Tt+nt*qt)},jt=function(qt){return tt*((At(Tt)*(_t(fn=Tt+nt*qt)/At(fn))-_t(Tt))/lt)/ft;var fn},Wt=(pt(!0)-Tt)/nt;if(Math.abs(ft)<2e-6||!isFinite(Wt)){if(Math.abs(tt-rt)<1e-6)return this.easeTo(u,m);const qt=rt<tt?-1:1;Wt=Math.abs(Math.log(rt/tt))/nt,jt=()=>0,zt=fn=>Math.exp(qt*nt*fn)}return u.duration="duration"in u?+u.duration:1e3*Wt/("screenSpeed"in u?+u.screenSpeed/nt:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=S!==H,this._pitching=se!==k,this._rolling=ce!==K,this._padding=!b.isPaddingEqual(ye),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(Je.targetCenter),this._ease((qt=>{const fn=qt*Wt,Pn=1/zt(fn),hn=jt(fn);this._rotating&&b.setBearing(a.G.number(S,H,qt)),this._pitching&&b.setPitch(a.G.number(k,se,qt)),this._rolling&&b.setRoll(a.G.number(K,ce,qt)),this._padding&&(b.interpolatePadding(N,ye,qt),Se=b.centerPoint.add(ge)),Je.easeFunc(qt,Pn,hn,Se),this.terrain&&!u.freezeElevation&&this._updateElevation(qt),this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(()=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(m)}),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){var b;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,m)}return u||(b=this.handlers)===null||b===void 0||b.stop(!1),this}_ease(u,m,b){b.animate===!1||b.duration===0?(u(1),m()):(this._easeStart=U(),this._easeOptions=b,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,m){u=a.W(u,-180,180);const b=Math.abs(u-m);return Math.abs(u-360-m)<b&&(u-=360),Math.abs(u+360-m)<b&&(u+=360),u}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(u)):null}}const uu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ea{constructor(u=uu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=z.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=z.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const b=this._map._getUIString(`AttributionControl.${m}`);u.title=b,u.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map((S=>typeof S!="string"?"":S))):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const m=this._map.style.tileManagers;for(const S in m){const k=m[S];if(k.used||k.usedForTerrain){const K=k.getSource();K.attribution&&u.indexOf(K.attribution)<0&&u.push(K.attribution)}}u=u.filter((S=>String(S).trim())),u.sort(((S,k)=>S.length-k.length)),u=u.filter(((S,k)=>{for(let K=k+1;K<u.length;K++)if(u[K].indexOf(S)>=0)return!1;return!0}));const b=u.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,u.length?(this._innerContainer.innerHTML=z.sanitize(b),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class yh{constructor(u={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const b=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=z.create("div","maplibregl-ctrl");const m=z.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){z.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Xr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const S of b)if(S.id===u)return void(S.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ri=a.aV([{name:"a_pos3d",type:"Int16",components:3}]);class zo extends a.E{constructor(u){super(),this._lastTilesetChange=U(),this.tileManager=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=u._source.tileSize*2**this.deltaZoom,u.usedForTerrain=!0,u.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(u,m){this.tileManager.update(u,m),this._renderableTilesKeys=[];const b={};for(const S of Ui(u,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m,calculateTileZoom:this.tileManager._source.calculateTileZoom}))b[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.terrainRttPosMatrix32f=new Float64Array(16),a.c8(S.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[S.key]=new Ye(S,this.tileSize),this._lastTilesetChange=U());for(const S in this._tiles)b[S]||delete this._tiles[S]}freeRtt(u){for(const m in this._tiles){const b=this._tiles[m];(!u||b.tileID.equals(u)||b.tileID.isChildOf(u)||u.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((u=>this.getTileByID(u)))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u,m){return m?this._getTerrainCoordsForTileRanges(u,m):this._getTerrainCoordsForRegularTile(u)}_getTerrainCoordsForRegularTile(u){const m={};for(const b of this._renderableTilesKeys){const S=this._tiles[b].tileID,k=u.clone(),K=a.bl();if(S.canonical.equals(u.canonical))a.c8(K,0,a.a5,a.a5,0,0,1);else if(S.canonical.isChildOf(u.canonical)){const N=S.canonical.z-u.canonical.z,H=S.canonical.x-(S.canonical.x>>N<<N),se=S.canonical.y-(S.canonical.y>>N<<N),ce=a.a5>>N;a.c8(K,0,ce,ce,0,0,1),a.O(K,K,[-H*ce,-se*ce,0])}else{if(!u.canonical.isChildOf(S.canonical))continue;{const N=u.canonical.z-S.canonical.z,H=u.canonical.x-(u.canonical.x>>N<<N),se=u.canonical.y-(u.canonical.y>>N<<N),ce=a.a5>>N;a.c8(K,0,a.a5,a.a5,0,0,1),a.O(K,K,[H*ce,se*ce,0]),a.Q(K,K,[1/2**N,1/2**N,0])}}k.terrainRttPosMatrix32f=new Float32Array(K),m[b]=k}return m}_getTerrainCoordsForTileRanges(u,m){const b={};for(const S of this._renderableTilesKeys){const k=this._tiles[S].tileID;if(!this._isWithinTileRanges(k,m))continue;const K=u.clone(),N=a.bl();if(k.canonical.z===u.canonical.z){const H=u.canonical.x-k.canonical.x,se=u.canonical.y-k.canonical.y;a.c8(N,0,a.a5,a.a5,0,0,1),a.O(N,N,[H*a.a5,se*a.a5,0])}else if(k.canonical.z>u.canonical.z){const H=k.canonical.z-u.canonical.z,se=k.canonical.x-(k.canonical.x>>H<<H),ce=k.canonical.y-(k.canonical.y>>H<<H),ye=u.canonical.x-(k.canonical.x>>H),ge=u.canonical.y-(k.canonical.y>>H),Se=a.a5>>H;a.c8(N,0,Se,Se,0,0,1),a.O(N,N,[-se*Se+ye*a.a5,-ce*Se+ge*a.a5,0])}else{const H=u.canonical.z-k.canonical.z,se=u.canonical.x-(u.canonical.x>>H<<H),ce=u.canonical.y-(u.canonical.y>>H<<H),ye=(u.canonical.x>>H)-k.canonical.x,ge=(u.canonical.y>>H)-k.canonical.y,Se=a.a5<<H;a.c8(N,0,Se,Se,0,0,1),a.O(N,N,[se*a.a5+ye*Se,ce*a.a5+ge*Se,0])}K.terrainRttPosMatrix32f=new Float32Array(N),b[S]=K}return b}getSourceTile(u,m){const b=this.tileManager._source;let S=u.overscaledZ-this.deltaZoom;if(S>b.maxzoom&&(S=b.maxzoom),S<b.minzoom)return;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(S).key);let k=this.findTileInCaches(this._sourceTileCache[u.key]);if(!k?.dem&&m)for(;S>=b.minzoom&&!k?.dem;)k=this.findTileInCaches(u.scaledTo(S--).key);return k}findTileInCaches(u){let m=this.tileManager.getTileByID(u);return m||(m=this.tileManager._outOfViewCache.getByKey(u),m)}anyTilesAfterTime(u=Date.now()){return this._lastTilesetChange>=u}_isWithinTileRanges(u,m){return m[u.canonical.z]&&u.canonical.x>=m[u.canonical.z].minTileX&&u.canonical.x<=m[u.canonical.z].maxTileX&&u.canonical.y>=m[u.canonical.z].minTileY&&u.canonical.y<=m[u.canonical.z].maxTileY}}class As{constructor(u,m,b){this._meshCache={},this.painter=u,this.tileManager=new zo(m),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,m,b,S=a.a5){var k;if(!(m>=0&&m<S&&b>=0&&b<S))return 0;const K=this.getTerrainData(u),N=(k=K.tile)===null||k===void 0?void 0:k.dem;if(!N)return 0;const H=a.cD([],[m/S*a.a5,b/S*a.a5],K.u_terrain_matrix),se=[H[0]*N.dim,H[1]*N.dim],ce=Math.floor(se[0]),ye=Math.floor(se[1]),ge=se[0]-ce,Se=se[1]-ye;return N.get(ce,ye)*(1-ge)*(1-Se)+N.get(ce+1,ye)*ge*(1-Se)+N.get(ce,ye+1)*(1-ge)*Se+N.get(ce+1,ye+1)*ge*Se}getElevationForLngLatZoom(u,m){if(!a.cE(m,u.wrap()))return 0;const{tileID:b,mercatorX:S,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(u,m);return this.getElevation(b,S%a.a5,k%a.a5,a.a5)}getElevationForLngLat(u){return this.getElevationForLngLatZoom(u,this.tileManager.maxzoom)}getElevation(u,m,b,S=a.a5){return this.getDEMElevation(u,m,b,S)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const S=this.painter.context,k=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(S,k,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(S,new a.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.as([])}const m=this.tileManager.getSourceTile(u,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const S=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new a.T(S,m.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),m.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const b=m&&m+m.tileID.key+u.key;if(b&&!this._demMatrixCache[b]){const S=this.tileManager.getSource().maxzoom;let k=u.canonical.z-m.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=S?k=u.canonical.z-S:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const K=u.canonical.x-(u.canonical.x>>k<<k),N=u.canonical.y-(u.canonical.y>>k<<k),H=a.cF(new Float64Array(16),[1/(a.a5<<k),1/(a.a5<<k),0]);a.O(H,H,[K*a.a5,N*a.a5,0]),this._demMatrixCache[u.key]={matrix:H,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(u){const m=this.painter,b=m.width/devicePixelRatio,S=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(m.context,{width:b,height:S,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(m.context,{width:b,height:S,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(b,S,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,b,S))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,K=0;k<this._coordsTextureSize;k++)for(let N=0;N<this._coordsTextureSize;N++,K+=4)m[K+0]=255&N,m[K+1]=255&k,m[K+2]=N>>8<<4|k>>8,m[K+3]=0;const b=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),S=new a.T(u,b,u.gl.RGBA,{premultiply:!1});return S.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const m=new Uint8Array(4),b=this.painter.context,S=b.gl,k=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),K=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),N=Math.round(this.painter.height/devicePixelRatio);b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(k,N-K-1,1,1,S.RGBA,S.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null);const H=m[0]+(m[2]>>4<<8),se=m[1]+((15&m[2])<<8),ce=this.coordsIndex[255-m[3]],ye=ce&&this.tileManager.getTileByID(ce);if(!ye)return null;const ge=this._coordsTextureSize,Se=(1<<ye.tileID.canonical.z)*ge;return new a.ab((ye.tileID.canonical.x*ge+H)/Se+ye.tileID.wrap,(ye.tileID.canonical.y*ge+se)/Se,this.getElevation(ye.tileID,H,se,ge))}depthAtPoint(u){const m=new Uint8Array(4),b=this.painter.context,S=b.gl;return b.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null),(m[0]/16777216+m[1]/65536+m[2]/256+m[3])/256}getTerrainMesh(u){var m;const b=((m=this.painter.style.projection)===null||m===void 0?void 0:m.transitionState)>0,S=b&&u.canonical.y===0,k=b&&u.canonical.y===(1<<u.canonical.z)-1,K=`m_${S?"n":""}_${k?"s":""}`;if(this._meshCache[K])return this._meshCache[K];const N=this.painter.context,H=new a.cG,se=new a.aZ,ce=this.meshSize,ye=a.a5/ce,ge=ce*ce;for(let At=0;At<=ce;At++)for(let Tt=0;Tt<=ce;Tt++)H.emplaceBack(Tt*ye,At*ye,0);for(let At=0;At<ge;At+=ce+1)for(let Tt=0;Tt<ce;Tt++)se.emplaceBack(Tt+At,ce+Tt+At+1,ce+Tt+At+2),se.emplaceBack(Tt+At,ce+Tt+At+2,Tt+At+1);const Se=H.length,Le=Se+(ce+1),Je=(ce+1)*ce,nt=S?a.bs:0,tt=S?0:1,rt=k?a.bt:a.a5,ft=k?0:1;for(let At=0;At<=ce;At++)H.emplaceBack(At*ye,nt,tt);for(let At=0;At<=ce;At++)H.emplaceBack(At*ye,rt,ft);for(let At=0;At<ce;At++)se.emplaceBack(Je+At,Le+At,Le+At+1),se.emplaceBack(Je+At,Le+At+1,Je+At+1),se.emplaceBack(0+At,Se+At+1,Se+At),se.emplaceBack(0+At,0+At+1,Se+At+1);const lt=H.length,pt=lt+2*(ce+1);for(const At of[0,1])for(let Tt=0;Tt<=ce;Tt++)for(const zt of[0,1])H.emplaceBack(At*a.a5,Tt*ye,zt);for(let At=0;At<2*ce;At+=2)se.emplaceBack(lt+At,lt+At+1,lt+At+3),se.emplaceBack(lt+At,lt+At+3,lt+At+2),se.emplaceBack(pt+At,pt+At+3,pt+At+1),se.emplaceBack(pt+At,pt+At+2,pt+At+3);const _t=new ro(N.createVertexBuffer(H,Ri.members),N.createIndexBuffer(se),a.aY.simpleSegment(0,0,H.length,se.length));return this._meshCache[K]=_t,_t}getMeshFrameDelta(u){return 2*Math.PI*a.bF/Math.pow(2,Math.max(u,0))/5}getMinTileElevationForLngLatZoom(u,m){var b;if(!a.cE(m,u.wrap()))return 0;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(u,m);return(b=this.getMinMaxElevation(S).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(u){const m=this.getTerrainData(u).tile,b={minElevation:null,maxElevation:null};return m&&m.dem&&(b.minElevation=m.dem.min*this.exaggeration,b.maxElevation=m.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(u,m){const b=a.ab.fromLngLat(u.wrap()),S=(1<<m)*a.a5,k=b.x*S,K=b.y*S,N=Math.floor(k/a.a5),H=Math.floor(K/a.a5);return{tileID:new a.a2(m,0,m,N,H),mercatorX:k,mercatorY:K}}}class od{constructor(u,m,b){this._context=u,this._size=m,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(b.texture),{id:u,fbo:m,texture:b,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((m=>u.id!==m)),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((u=>!u.inUse))===!1}}const sc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class vh{constructor(u,m){this.painter=u,this.terrain=m,this.pool=new od(u.context,30,m.tileManager.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=u._order.filter((b=>!u._layers[b].isHidden(m))),this._coordsAscending={};for(const b in u.tileManagers){this._coordsAscending[b]={};const S=u.tileManagers[b].getVisibleCoordinates(),k=u.tileManagers[b].getSource(),K=k instanceof Tn?k.terrainTileRanges:null;for(const N of S){const H=this.terrain.tileManager.getTerrainCoords(N,K);for(const se in H)this._coordsAscending[b][se]||(this._coordsAscending[b][se]=[]),this._coordsAscending[b][se].push(H[se])}}this._coordsAscendingStr={};for(const b of u._order){const S=u._layers[b],k=S.source;if(sc[S.type]&&!this._coordsAscendingStr[k]){this._coordsAscendingStr[k]={};for(const K in this._coordsAscending[k])this._coordsAscendingStr[k][K]=this._coordsAscending[k][K].map((N=>N.key)).sort().join()}}for(const b of this._renderableTiles)for(const S in this._coordsAscendingStr){const k=this._coordsAscendingStr[S][b.tileID.key];k&&k!==b.rttCoords[S]&&(b.rtt=[])}}renderLayer(u,m){if(u.isHidden(this.painter.transform.zoom))return!1;const b=Object.assign(Object.assign({},m),{isRenderingToTexture:!0}),S=u.type,k=this.painter,K=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(sc[S]&&(this._prevType&&sc[this._prevType]||this._stacks.push([]),this._prevType=S,this._stacks[this._stacks.length-1].push(u.id),!K))return!0;if(sc[this._prevType]||sc[S]&&K){this._prevType=S;const N=this._stacks.length-1,H=this._stacks[N]||[];for(const se of this._renderableTiles){if(this.pool.isFull()&&(d0(this.painter,this.terrain,this._rttTiles,b),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(se),se.rtt[N]){const ye=this.pool.getObjectForId(se.rtt[N].id);if(ye.stamp===se.rtt[N].stamp){this.pool.useObject(ye);continue}}const ce=this.pool.getOrCreateFreeObject();this.pool.useObject(ce),this.pool.stampObject(ce),se.rtt[N]={id:ce.id,stamp:ce.stamp},k.context.bindFramebuffer.set(ce.fbo.framebuffer),k.context.clear({color:a.bq.transparent,stencil:0}),k.currentStencilSource=void 0;for(let ye=0;ye<H.length;ye++){const ge=k.style._layers[H[ye]],Se=ge.source?this._coordsAscending[ge.source][se.tileID.key]:[se.tileID];k.context.viewport.set([0,0,ce.fbo.width,ce.fbo.height]),k._renderTileClippingMasks(ge,Se,!0),k.renderLayer(k,k.style.tileManagers[ge.source],ge,Se,b),ge.source&&(se.rttCoords[ge.source]=this._coordsAscendingStr[ge.source][se.tileID.key])}}return d0(this.painter,this.terrain,this._rttTiles,b),this._rttTiles=[],this.pool.freeAllObjects(),sc[S]}return!1}}const Nf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},KA=c,sA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:uu,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Ng={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class hs{constructor(u,m,b=!1){this.mousedown=k=>{this.startMove(k,z.mousePos(this.element,k)),z.addEventListener(window,"mousemove",this.mousemove),z.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.move(k,z.mousePos(this.element,k))},this.mouseup=k=>{this._rotatePitchHandler.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,k.targetTouches)[0],this.startMove(k,this._startPos),z.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,k.targetTouches)[0],this.move(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=m;const S=new $d;this._rotatePitchHandler=new ml({clickTolerance:3,move:(k,K)=>{const N=m.getBoundingClientRect(),H=new a.P((N.bottom-N.top)/2,(N.right-N.left)/2);return{bearingDelta:a.cy(new a.P(k.x,K.y),K,H),pitchDelta:b?-.5*(K.y-k.y):void 0}},moveStateManager:S,enable:!0,assignEvents:()=>{}}),this.map=u,z.addEventListener(m,"mousedown",this.mousedown),z.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(m,"touchcancel",this.reset)}startMove(u,m){this._rotatePitchHandler.dragStart(u,m),z.disableDrag()}move(u,m){const b=this.map,{bearingDelta:S,pitchDelta:k}=this._rotatePitchHandler.dragMove(u,m)||{};S&&b.setBearing(b.getBearing()+S),k&&b.setPitch(b.getPitch()+k)}off(){const u=this.element;z.removeEventListener(u,"mousedown",this.mousedown),z.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend),z.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){z.enableDrag(),z.removeEventListener(window,"mousemove",this.mousemove),z.removeEventListener(window,"mouseup",this.mouseup),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend)}}let Pc;function Zd(I,u,m,b=!1){if(b||!m.getCoveringTilesDetailsProvider().allowWorldCopies())return I?.wrap();const S=new a.V(I.lng,I.lat);if(I=new a.V(I.lng,I.lat),u){const k=new a.V(I.lng-360,I.lat),K=new a.V(I.lng+360,I.lat),N=m.locationToScreenPoint(I).distSqr(u);m.locationToScreenPoint(k).distSqr(u)<N?I=k:m.locationToScreenPoint(K).distSqr(u)<N&&(I=K)}for(;Math.abs(I.lng-m.center.lng)>180;){const k=m.locationToScreenPoint(I);if(k.x>=0&&k.y>=0&&k.x<=m.width&&k.y<=m.height)break;I.lng>m.center.lng?I.lng-=360:I.lng+=360}return I.lng!==S.lng&&m.isPointOnMapSurface(m.locationToScreenPoint(I))?I:S}const Xd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function sd(I,u,m){const b=I.classList;for(const S in Xd)b.remove(`maplibregl-${m}-anchor-${S}`);b.add(`maplibregl-${m}-anchor-${u}`)}class Jm extends a.E{constructor(u){if(super(),this._onKeyPress=m=>{const b=m.code,S=m.charCode||m.keyCode;b!=="Space"&&b!=="Enter"&&S!==32&&S!==13||this.togglePopup()},this._onMapClick=m=>{const b=m.originalEvent.target,S=this._element;this._popup&&(b===S||S.contains(b))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();(m?.type==="terrain"||m?.type==="render"&&!b)&&this._map.once("render",this._update),this._lngLat=Zd(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||m&&m.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,`${Xd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${S}`),E.frameAsync(new AbortController).then((()=>{this._updateOpacity(m&&m.type==="moveend")})).catch((()=>{}))},this._onMove=m=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._subpixelPositioning=u&&u.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(u?.opacity,u?.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div");const m=z.createNS("http://www.w3.org/2000/svg","svg"),b=41,S=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${S}px`),m.setAttributeNS(null,"viewBox",`0 0 ${S} ${b}`);const k=z.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const K=z.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");const N=z.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(3.0, 29.0)"),N.setAttributeNS(null,"fill","#000000");const H=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of H){const rt=z.createNS("http://www.w3.org/2000/svg","ellipse");rt.setAttributeNS(null,"opacity","0.04"),rt.setAttributeNS(null,"cx","10.5"),rt.setAttributeNS(null,"cy","5.80029008"),rt.setAttributeNS(null,"rx",tt.rx),rt.setAttributeNS(null,"ry",tt.ry),N.appendChild(rt)}const se=z.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const ce=z.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(ce);const ye=z.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");const ge=z.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(ge);const Se=z.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Se.setAttributeNS(null,"fill","#FFFFFF");const Le=z.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Je=z.createNS("http://www.w3.org/2000/svg","circle");Je.setAttributeNS(null,"fill","#000000"),Je.setAttributeNS(null,"opacity","0.25"),Je.setAttributeNS(null,"cx","5.5"),Je.setAttributeNS(null,"cy","5.5"),Je.setAttributeNS(null,"r","5.4999962");const nt=z.createNS("http://www.w3.org/2000/svg","circle");nt.setAttributeNS(null,"fill","#FFFFFF"),nt.setAttributeNS(null,"cx","5.5"),nt.setAttributeNS(null,"cy","5.5"),nt.setAttributeNS(null,"r","5.4999962"),Le.appendChild(Je),Le.appendChild(nt),K.appendChild(N),K.appendChild(se),K.appendChild(ye),K.appendChild(Se),K.appendChild(Le),m.appendChild(K),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(m),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(m=>{m.preventDefault()})),this._element.addEventListener("mousedown",(m=>{m.preventDefault()})),sd(this._element,this._anchor,"marker"),u&&u.className)for(const m of u.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(u){return this.remove(),this._map=u,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",u._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),u.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.V.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(u){return this._subpixelPositioning=u,this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var m,b;const S=(m=this._map)===null||m===void 0?void 0:m.terrain,k=this._map.transform.isLocationOccluded(this._lngLat);if(!S||k){const Se=k?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Se&&(this._element.style.opacity=Se))}if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const K=this._map,N=K.terrain.depthAtPoint(this._pos),H=K.terrain.getElevationForLngLat(this._lngLat);if(K.transform.lngLatToCameraDepth(this._lngLat,H)-N<.006)return void(this._element.style.opacity=this._opacity);const se=-this._offset.y/K.transform.pixelsPerMeter,ce=Math.sin(K.getPitch()*Math.PI/180)*se,ye=K.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ge=K.transform.lngLatToCameraDepth(this._lngLat,H+ce)-ye>.006;!((b=this._popup)===null||b===void 0)&&b.isOpen()&&ge&&this._popup.remove(),this._element.style.opacity=ge?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,m){return(this._opacity===void 0||u===void 0&&m===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),m!==void 0&&(this._opacityWhenCovered=m),this._map&&this._updateOpacity(!0),this}}const Gf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let FA=0,Ch=!1;const ol={maxWidth:100,unit:"metric"};function Cs(I,u,m){const b=m&&m.maxWidth||100,S=I._container.clientHeight/2,k=I._container.clientWidth/2,K=I.unproject([k-b/2,S]),N=I.unproject([k+b/2,S]),H=Math.round(I.project(N).x-I.project(K).x),se=Math.min(b,H,I._container.clientWidth),ce=K.distanceTo(N);if(m&&m.unit==="imperial"){const ye=3.2808*ce;ye>5280?Uc(u,se,ye/5280,I._getUIString("ScaleControl.Miles")):Uc(u,se,ye,I._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?Uc(u,se,ce/1852,I._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?Uc(u,se,ce/1e3,I._getUIString("ScaleControl.Kilometers")):Uc(u,se,ce,I._getUIString("ScaleControl.Meters"))}function Uc(I,u,m,b){const S=(function(k){const K=Math.pow(10,`${Math.floor(k)}`.length-1);let N=k/K;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:(function(H){const se=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*se)/se})(N),K*N})(m);I.style.width=u*(S/m)+"px",I.innerHTML=`${S}&nbsp;${b}`}const ad={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ld=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Wf(I){if(I){if(typeof I=="number"){const u=Math.round(Math.abs(I)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,I),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-I),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(I,0),right:new a.P(-I,0)}}if(I instanceof a.P||Array.isArray(I)){const u=a.P.convert(I);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(I.center||[0,0]),top:a.P.convert(I.top||[0,0]),"top-left":a.P.convert(I["top-left"]||[0,0]),"top-right":a.P.convert(I["top-right"]||[0,0]),bottom:a.P.convert(I.bottom||[0,0]),"bottom-left":a.P.convert(I["bottom-left"]||[0,0]),"bottom-right":a.P.convert(I["bottom-right"]||[0,0]),left:a.P.convert(I.left||[0,0]),right:a.P.convert(I.right||[0,0])}}return Wf(new a.P(0,0))}const ac=c;s.AJAXError=a.cJ,s.Event=a.l,s.Evented=a.E,s.LngLat=a.V,s.MercatorCoordinate=a.ab,s.Point=a.P,s.addProtocol=a.cK,s.config=a.c,s.removeProtocol=a.cL,s.AttributionControl=ea,s.BoxZoomHandler=jf,s.CanvasSource=$,s.CooperativeGesturesHandler=lu,s.DoubleClickZoomHandler=Xm,s.DragPanHandler=mi,s.DragRotateHandler=li,s.EdgeInsets=la,s.FullscreenControl=class extends a.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var u;let m=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=m?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)m=m.shadowRoot.fullscreenElement;m===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){z.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=z.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);z.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=oi,s.GeolocateControl=class extends a.E{constructor(I){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",u)),this._finish()}},this._updateCamera=u=>{const m=new a.V(u.coords.longitude,u.coords.latitude),b=u.coords.accuracy,S=this._map.getBearing(),k=a.e({bearing:S},this.options.fitBoundsOptions),K=nn.fromLngLat(m,b);this._map.fitBounds(K,k,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const m=new a.V(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=u.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=u=>{if(this._map){if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Ch)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=z.create("button","maplibregl-ctrl-geolocate",this._container),z.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=u=>{if(this._map){if(u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Jm({element:this._dotElement}),this._circleElement=z.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Jm({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(m=>{const b=m?.[0]instanceof ResizeObserverEntry;m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||b||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},Gf,I)}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(u=!1){if(Pc!==void 0&&!u)return Pc;if(window.navigator.permissions===void 0)return Pc=!!window.navigator.geolocation,Pc;try{Pc=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Pc=!!window.navigator.geolocation}return Pc}))})().then((u=>this._finishSetupUI(u))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,FA=0,Ch=!1}_isOutOfMapMaxBounds(I){const u=this._map.getMaxBounds(),m=I.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const I=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&I))return;const u=this._map.project(I),m=this._map.unproject([u.x+100,u.y]),b=I.distanceTo(m)/100,S=2*this._accuracy/b;this._circleElement.style.width=`${S.toFixed(2)}px`,this._circleElement.style.height=`${S.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":FA--,Ch=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),FA++,FA>1?(I={maximumAge:6e5,timeout:0},Ch=!0):(I=this.options.positionOptions,Ch=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const u=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(u!=="mercator"&&u?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=z.create("button","maplibregl-ctrl-globe",this._container),z.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=Ds,s.ImageSource=Tn,s.KeyboardHandler=rd,s.LngLatBounds=nn,s.LogoControl=yh,s.Map=class extends Rc{constructor(I){var u,m;a.cH.mark(a.cI.create);const b=Object.assign(Object.assign(Object.assign({},sA),I),{canvasContextAttributes:Object.assign(Object.assign({},sA.canvasContextAttributes),I.canvasContextAttributes)});if(b.minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const S=new Ot,k=new Ni;if(b.minZoom!==void 0&&S.setMinZoom(b.minZoom),b.maxZoom!==void 0&&S.setMaxZoom(b.maxZoom),b.minPitch!==void 0&&S.setMinPitch(b.minPitch),b.maxPitch!==void 0&&S.setMaxPitch(b.maxPitch),b.renderWorldCopies!==void 0&&S.setRenderWorldCopies(b.renderWorldCopies),b.transformConstrain!==null&&S.setConstrainOverride(b.transformConstrain),super(S,k,{bearingSnap:b.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Xr,this._controls=[],this._mapId=a.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=N=>{N.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const H of Object.values(this.style._layers))if(H.type==="custom"&&console.warn(`Custom layer with id '${H.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),H._listeners)for(const[se]of Object.entries(H._listeners))console.warn(`Custom layer with id '${H.id}' had event listeners for event '${se}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:N}))},this._contextRestored=N=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:N}))},this._onMapScroll=N=>{if(N.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=b.interactive,this._maxTileCacheSize=b.maxTileCacheSize,this._maxTileCacheZoomLevels=b.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},b.canvasContextAttributes),this._trackResize=b.trackResize===!0,this._bearingSnap=b.bearingSnap,this._centerClampedToGround=b.centerClampedToGround,this._refreshExpiredTiles=b.refreshExpiredTiles===!0,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions===!0,this._collectResourceTiming=b.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Nf),b.locale),this._clickTolerance=b.clickTolerance,this._overridePixelRatio=b.pixelRatio,this._maxCanvasSize=b.maxCanvasSize,this._zoomLevelsToOverscale=b.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=b.transformCameraUpdate,this.transformConstrain=b.transformConstrain,this.cancelPendingTileRequestsWhileZooming=b.cancelPendingTileRequestsWhileZooming===!0,b.reduceMotion!==void 0&&(E.prefersReducedMotion=b.reduceMotion),this._imageQueueHandle=q.addThrottleControl((()=>this.isMoving())),this._requestManager=new le(b.transformRequest),typeof b.container=="string"){if(this._container=document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let N=!1;const H=zg((se=>{this._trackResize&&!this._removed&&(this.resize(se),this.redraw())}),50);this._resizeObserver=new ResizeObserver((se=>{N?H(se):N=!0})),this._resizeObserver.observe(this._container)}this.handlers=new jg(this,b),this._hash=b.hash&&new Ds(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,roll:b.roll}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,a.e({},b.fitBoundsOptions,{duration:0}))));const K=typeof b.style=="string"||((m=(u=b.style)===null||u===void 0?void 0:u.projection)===null||m===void 0?void 0:m.type)!=="globe";this.resize(null,K),this._localIdeographFontFamily=b.localIdeographFontFamily,this._validateStyle=b.validateStyle,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new ea(typeof b.attributionControl=="boolean"?void 0:b.attributionControl)),b.maplibreLogo&&this.addControl(new yh,b.logoPosition),this.on("style.load",(()=>{if(K||this._resizeTransform(),this.transform.unmodified){const N=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(N)}})),this.on("data",(N=>{this._update(N.dataType==="style"),this.fire(new a.l(`${N.dataType}data`,N))})),this.on("dataloading",(N=>{this.fire(new a.l(`${N.dataType}dataloading`,N))})),this.on("dataabort",(N=>{this.fire(new a.l("sourcedataabort",N))}))}_getMapId(){return this._mapId}setGlobalStateProperty(I,u){return this.style.setGlobalStateProperty(I,u),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(I,u){if(u===void 0&&(u=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=I.onAdd(this);this._controls.push(I);const b=this._controlPositions[u];return u.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(I);return u>-1&&this._controls.splice(u,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}coveringTiles(I){return Ui(this.transform,I)}calculateCameraOptionsFromTo(I,u,m,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLat(m)),super.calculateCameraOptionsFromTo(I,u,m,b)}resize(I,u=!0){const[m,b]=this._containerDimensions(),S=this._getClampedPixelRatio(m,b);if(this._resizeCanvas(m,b,S),this.painter.resize(m,b,S),this.painter.overLimit()){const K=this.painter.context.gl;this._maxCanvasSize=[K.drawingBufferWidth,K.drawingBufferHeight];const N=this._getClampedPixelRatio(m,b);this._resizeCanvas(m,b,N),this.painter.resize(m,b,N)}this._resizeTransform(u);const k=!this._moving;return k&&(this.stop(),this.fire(new a.l("movestart",I)).fire(new a.l("move",I))),this.fire(new a.l("resize",I)),k&&this.fire(new a.l("moveend",I)),this}_resizeTransform(I=!0){var u;const[m,b]=this._containerDimensions();this.transform.resize(m,b,I),(u=this._requestedCameraState)===null||u===void 0||u.resize(m,b,I)}_getClampedPixelRatio(I,u){const{0:m,1:b}=this._maxCanvasSize,S=this.getPixelRatio(),k=I*S,K=u*S;return Math.min(k>m?m/k:1,K>b?b/K:1)*S}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(nn.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.setMinZoom(I),this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.setMaxZoom(I),this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}setTransformConstrain(I){return this.transform.setConstrainOverride(I),this._update()}project(I){return this.transform.locationToScreenPoint(a.V.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(a.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,u,m){if(I==="mouseenter"||I==="mouseover"){let b=!1;return{layers:u,listener:m,delegates:{mousemove:k=>{const K=u.filter((H=>this.getLayer(H))),N=K.length!==0?this.queryRenderedFeatures(k.point,{layers:K}):[];N.length?b||(b=!0,m.call(this,new Rs(I,this,k.originalEvent,{features:N}))):b=!1},mouseout:()=>{b=!1}}}}if(I==="mouseleave"||I==="mouseout"){let b=!1;return{layers:u,listener:m,delegates:{mousemove:K=>{const N=u.filter((H=>this.getLayer(H)));(N.length!==0?this.queryRenderedFeatures(K.point,{layers:N}):[]).length?b=!0:b&&(b=!1,m.call(this,new Rs(I,this,K.originalEvent)))},mouseout:K=>{b&&(b=!1,m.call(this,new Rs(I,this,K.originalEvent)))}}}}{const b=S=>{const k=u.filter((N=>this.getLayer(N))),K=k.length!==0?this.queryRenderedFeatures(S.point,{layers:k}):[];K.length&&(S.features=K,m.call(this,S),delete S.features)};return{layers:u,listener:m,delegates:{[I]:b}}}}_saveDelegatedListener(I,u){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(u)}_removeDelegatedListener(I,u,m){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const b=this._delegatedListeners[I];for(let S=0;S<b.length;S++){const k=b[S];if(k.listener===m&&k.layers.length===u.length&&k.layers.every((K=>u.includes(K)))){for(const K in k.delegates)this.off(K,k.delegates[K]);return void b.splice(S,1)}}}on(I,u,m){if(m===void 0)return super.on(I,u);const b=typeof u=="string"?[u]:u,S=this._createDelegatedListener(I,b,m);this._saveDelegatedListener(I,S);for(const k in S.delegates)this.on(k,S.delegates[k]);return{unsubscribe:()=>{this._removeDelegatedListener(I,b,m)}}}once(I,u,m){if(m===void 0)return super.once(I,u);const b=typeof u=="string"?[u]:u,S=this._createDelegatedListener(I,b,m);for(const k in S.delegates){const K=S.delegates[k];S.delegates[k]=(...N)=>{this._removeDelegatedListener(I,b,m),K(...N)}}this._saveDelegatedListener(I,S);for(const k in S.delegates)this.once(k,S.delegates[k]);return this}off(I,u,m){return m===void 0?super.off(I,u):(this._removeDelegatedListener(I,typeof u=="string"?[u]:u,m),this)}queryRenderedFeatures(I,u){if(!this.style)return[];let m;const b=I instanceof a.P||Array.isArray(I),S=b?I:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(b?{}:I)||{},S instanceof a.P||typeof S[0]=="number")m=[a.P.convert(S)];else{const k=a.P.convert(S[0]),K=a.P.convert(S[1]);m=[k,new a.P(K.x,k.y),K,new a.P(k.x,K.y),k]}return this.style.queryRenderedFeatures(m,u,this.transform)}querySourceFeatures(I,u){return this.style.querySourceFeatures(I,u)}setStyle(I,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(I,u))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const u=this._locale[I];if(u==null)throw new Error(`Missing UI string '${I}'`);return u}_updateStyle(I,u){var m,b;if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(I,u)));const S=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new Gh(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,u,S):this.style.loadJSON(I,u,S),this):((b=(m=this.style)===null||m===void 0?void 0:m.projection)===null||b===void 0||b.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Gh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,u){if(typeof I=="string"){const m=this._requestManager.transformRequest(I,"Style");a.j(m,new AbortController).then((b=>{this._updateDiff(b.data,u)})).catch((b=>{b&&this.fire(new a.k(b))}))}else typeof I=="object"&&this._updateDiff(I,u)}_updateDiff(I,u){try{this.style.setState(I,u)&&this._update(!0)}catch(m){a.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(I,u)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(I,u){return this._lazyInitEmptyStyle(),this.style.addSource(I,u),this._update(!0)}isSourceLoaded(I){const u=this.style&&this.style.tileManagers[I];if(u!==void 0)return u.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const u=this.style.tileManagers[I.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&u.reload();for(const m in this.style._layers){const b=this.style._layers[m];b.type==="hillshade"&&b.source===I.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),b.type==="color-relief"&&b.source===I.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new As(this.painter,u,I),this.painter.renderToTexture=new vh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=m=>{var b;m.dataType==="style"?this.terrain.tileManager.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((b=m.source)===null||b===void 0?void 0:b.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:I})),this}getTerrain(){var I,u;return(u=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const I=this.style&&this.style.tileManagers;for(const u of Object.values(I))if(!u.areTilesLoaded())return!1;return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}setSourceTileLodParams(I,u,m){if(m){const b=this.getSource(m);if(!b)throw new Error(`There is no source with ID "${m}", cannot set LOD parameters`);b.calculateTileZoom=Zn(Math.max(1,I),Math.max(1,u))}else for(const b in this.style.tileManagers)this.style.tileManagers[b].getSource().calculateTileZoom=Zn(Math.max(1,I),Math.max(1,u));return this._update(!0),this}refreshTiles(I,u){const m=this.style.tileManagers[I];if(!m)throw new Error(`There is no tile manager with ID "${I}", cannot refresh tile`);u===void 0?m.reload(!0):m.refreshTiles(u.map((b=>new a.ae(b.z,b.x,b.y))))}addImage(I,u,m={}){const{pixelRatio:b=1,sdf:S=!1,stretchX:k,stretchY:K,content:N,textFitWidth:H,textFitHeight:se}=m;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ce,height:ye,data:ge}=u,Se=u;return this.style.addImage(I,{data:new a.R({width:ce,height:ye},new Uint8Array(ge)),pixelRatio:b,stretchX:k,stretchY:K,content:N,textFitWidth:H,textFitHeight:se,sdf:S,version:0,userImage:Se}),Se.onAdd&&Se.onAdd(this,I),this}}{const{width:ce,height:ye,data:ge}=E.getImageData(u);this.style.addImage(I,{data:new a.R({width:ce,height:ye},ge),pixelRatio:b,stretchX:k,stretchY:K,content:N,textFitWidth:H,textFitHeight:se,sdf:S,version:0})}}updateImage(I,u){const m=this.style.getImage(I);if(!m)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=u instanceof HTMLImageElement||a.b(u)?E.getImageData(u):u,{width:S,height:k,data:K}=b;if(S===void 0||k===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==m.data.width||k!==m.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const N=!(u instanceof HTMLImageElement||a.b(u));return m.data.replace(K,N),this.style.updateImage(I,m),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return q.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,u){return this._lazyInitEmptyStyle(),this.style.addLayer(I,u),this._update(!0)}moveLayer(I,u){return this.style.moveLayer(I,u),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,u,m){return this.style.setLayerZoomRange(I,u,m),this._update(!0)}setFilter(I,u,m={}){return this.style.setFilter(I,u,m),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,u,m,b={}){return this.style.setPaintProperty(I,u,m,b),this._update(!0)}getPaintProperty(I,u){return this.style.getPaintProperty(I,u)}setLayoutProperty(I,u,m,b={}){return this.style.setLayoutProperty(I,u,m,b),this._update(!0)}getLayoutProperty(I,u){return this.style.getLayoutProperty(I,u)}setGlyphs(I,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,u,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,u,m,(b=>{b||this._update(!0)})),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,u,(m=>{m||this._update(!0)})),this}setLight(I,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,u),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,u={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,u),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,u){return this.style.setFeatureState(I,u),this._update()}removeFeatureState(I,u){return this.style.removeFeatureState(I,u),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,u=0;return this._container&&(I=this._container.clientWidth||400,u=this._container.clientHeight||300),[I,u]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const u=this._canvasContainer=z.create("div","maplibregl-canvas-container",I);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=z.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),b=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],b);const S=this._controlContainer=z.create("div","maplibregl-control-container",I),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((K=>{k[K]=z.create("div",`maplibregl-ctrl-${K} `,S)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,u,m){this._canvas.width=Math.floor(m*I),this._canvas.height=Math.floor(m*u),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let u=null;this._canvas.addEventListener("webglcontextcreationerror",(b=>{u={requestedAttributes:I},b&&(u.statusMessage=b.statusMessage,u.type=b.type)}),{once:!0});let m=null;if(m=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!m){const b="Failed to initialize WebGL";throw u?(u.message=b,new Error(JSON.stringify(u))):new Error(b)}this.painter=new sy(m,this.transform),V.testSupport(m)}migrateProjection(I,u){super.migrateProjection(I,u),this.painter.transform=I,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var u,m,b,S,k;const K=this._idleTriggered?this._fadeDuration:0,N=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let H=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ye=this.transform.zoom,ge=U();this.style.zoomHistory.update(ye,ge);const Se=new a.H(ye,{now:ge,fadeDuration:K,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Le=Se.crossFadingFactor();Le===1&&Le===this._crossFadingFactor||(H=!0,this._crossFadingFactor=Le),this.style.update(Se)}const se=((m=this.style.projection)===null||m===void 0?void 0:m.transitionState)>0!==N;(b=this.style.projection)===null||b===void 0||b.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((S=this.style.projection)===null||S===void 0?void 0:S.transitionState,(k=this.style.projection)===null||k===void 0?void 0:k.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||se)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,K,this._crossSourceCollisions,se),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:K,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cH.mark(a.cI.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||H)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ce||(this._fullyLoaded=!0,a.cH.mark(a.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),q.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u?.loseContext&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),z.remove(this._canvasContainer),z.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cH.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frame(this._frameRequest,(I=>{a.cH.frame(I),this._frameRequest=null;try{this._render(I)}catch(u){if(!a.Z(u)&&!(function(m){return m.message===Jh})(u))throw u}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return KA}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},s.MapMouseEvent=Rs,s.MapTouchEvent=iA,s.MapWheelEvent=Vm,s.Marker=Jm,s.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const u=this._map.getZoom(),m=u===this._map.getMaxZoom(),b=u===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(u,m)=>{const b=this._map._getUIString(`NavigationControl.${m}`);u.title=b,u.setAttribute("aria-label",b)},this.options=a.e({},Ng,I),this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(u=>this._map.zoomIn({},{originalEvent:u}))),z.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(u=>this._map.zoomOut({},{originalEvent:u}))),z.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})})),this._compassIcon=z.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hs(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,u){const m=z.create("button",I,this._container);return m.type="button",m.addEventListener("click",u),m}},s.Popup=class extends a.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=z.create("div","maplibregl-popup",this._map.getContainer()),this._tip=z.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const K of this.options.className.split(" "))this._container.classList.add(K);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Zd(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!u)return;const m=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationToScreenPoint(this._lngLat));let b=this.options.anchor;const S=Wf(this.options.offset);if(!b){const K=this._container.offsetWidth,N=this._container.offsetHeight;let H;H=m.y+S.bottom.y<N?["top"]:m.y>this._map.transform.height-N?["bottom"]:[],m.x<K/2?H.push("left"):m.x>this._map.transform.width-K/2&&H.push("right"),b=H.length===0?"bottom":H.join("-")}let k=m.add(S[b]);this.options.subpixelPositioning||(k=k.round()),z.setTransform(this._container,`${Xd[b]} translate(${k.x}px,${k.y}px)`),sd(this._container,b,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(ad),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=a.V.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const u=document.createDocumentFragment(),m=document.createElement("body");let b;for(m.innerHTML=I;b=m.firstChild,b;)u.appendChild(b);return this.setDOMContent(u)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=z.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(ld);I&&I.focus()}},s.RasterDEMTileSource=Fn,s.RasterTileSource=Mi,s.ScaleControl=class{constructor(I){this._onMove=()=>{Cs(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,Cs(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ol),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=rc,s.Style=Gh,s.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=z.create("button","maplibregl-ctrl-terrain",this._container),z.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){z.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Dc,s.TwoFingersTouchRotateHandler=kc,s.TwoFingersTouchZoomHandler=ic,s.TwoFingersTouchZoomRotateHandler=LA,s.VectorTileSource=Wn,s.VideoSource=je,s.addSourceType=(I,u)=>a._(void 0,void 0,void 0,(function*(){if(Q(I))throw new Error(`A source type called "${I}" already exists.`);((m,b)=>{j[m]=b})(I,u)})),s.clearPrewarmedResources=function(){const I=Rt;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(Bt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=oh,s.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return We().getRTLTextPluginStatus()},s.getVersion=function(){return ac},s.getWorkerCount=function(){return ot.workerCount},s.getWorkerUrl=function(){return a.c.WORKER_URL},s.importScriptInWorkers=function(I){return He().broadcast("IS",I)},s.isTimeFrozen=function(){return P.isFrozen()},s.now=U,s.prewarm=function(){ke().acquire(Bt)},s.restoreNow=function(){P.restoreNow()},s.setMaxParallelImageRequests=function(I){a.c.MAX_PARALLEL_IMAGE_REQUESTS=I},s.setNow=function(I){P.setNow(I)},s.setRTLTextPlugin=function(I,u){return We().setRTLTextPlugin(I,u)},s.setWorkerCount=function(I){ot.workerCount=I},s.setWorkerUrl=function(I){a.c.WORKER_URL=I}}));var o=t;return o}))})(SS)),SS.exports}var hfe=Afe();const M2=xu(hfe);function ij(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(p){try{d(i.next(p))}catch(v){s(v)}}function c(p){try{d(i.throw(p))}catch(v){s(v)}}function d(p){p.done?o(p.value):r(p.value).then(a,c)}d((i=i.apply(n,[])).next())})}var sw=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function oJ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var X3={exports:{}};X3.exports;var rj;function dfe(){return rj||(rj=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",p="[object Boolean]",v="[object Date]",M="[object Error]",E="[object Function]",P="[object GeneratorFunction]",U="[object Map]",z="[object Number]",V="[object Null]",Z="[object Object]",X="[object Promise]",re="[object Proxy]",ee="[object RegExp]",ne="[object Set]",q="[object String]",le="[object Symbol]",ue="[object Undefined]",ve="[object WeakMap]",pe="[object ArrayBuffer]",Be="[object DataView]",Ce="[object Float32Array]",Oe="[object Float64Array]",Fe="[object Int8Array]",Ee="[object Int16Array]",Ve="[object Int32Array]",ut="[object Uint8Array]",mt="[object Uint8ClampedArray]",Pe="[object Uint16Array]",De="[object Uint32Array]",Xe=/[\\^$.*+?()[\]{}|]/g,Ke=/^\[object .+?Constructor\]$/,Bt=/^(?:0|[1-9]\d*)$/,ot={};ot[Ce]=ot[Oe]=ot[Fe]=ot[Ee]=ot[Ve]=ot[ut]=ot[mt]=ot[Pe]=ot[De]=!0,ot[a]=ot[c]=ot[pe]=ot[p]=ot[Be]=ot[v]=ot[M]=ot[E]=ot[U]=ot[z]=ot[Z]=ot[ee]=ot[ne]=ot[q]=ot[ve]=!1;var Et=typeof sw=="object"&&sw&&sw.Object===Object&&sw,Rt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Et||Rt||Function("return this")(),ke=e&&!e.nodeType&&e,Te=ke&&!0&&n&&!n.nodeType&&n,He=Te&&Te.exports===ke,Ct=He&&Et.process,vt=(function(){try{return Ct&&Ct.binding&&Ct.binding("util")}catch{}})(),wt=vt&&vt.isTypedArray;function Ft(ie,_e){for(var $e=-1,Ot=ie==null?0:ie.length,qn=0,Rn=[];++$e<Ot;){var Ti=ie[$e];_e(Ti,$e,ie)&&(Rn[qn++]=Ti)}return Rn}function Pt(ie,_e){for(var $e=-1,Ot=_e.length,qn=ie.length;++$e<Ot;)ie[qn+$e]=_e[$e];return ie}function nn(ie,_e){for(var $e=-1,Ot=ie==null?0:ie.length;++$e<Ot;)if(_e(ie[$e],$e,ie))return!0;return!1}function Kn(ie,_e){for(var $e=-1,Ot=Array(ie);++$e<ie;)Ot[$e]=_e($e);return Ot}function Wn(ie){return function(_e){return ie(_e)}}function Mi(ie,_e){return ie.has(_e)}function Fn(ie,_e){return ie?.[_e]}function Ln(ie){var _e=-1,$e=Array(ie.size);return ie.forEach(function(Ot,qn){$e[++_e]=[qn,Ot]}),$e}function In(ie,_e){return function($e){return ie(_e($e))}}function oi(ie){var _e=-1,$e=Array(ie.size);return ie.forEach(function(Ot){$e[++_e]=Ot}),$e}var Tn=Array.prototype,je=Function.prototype,$=Object.prototype,j=Ue["__core-js_shared__"],Q=je.toString,Ae=$.hasOwnProperty,Me=(function(){var ie=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""})(),Ne=$.toString,We=RegExp("^"+Q.call(Ae).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=He?Ue.Buffer:void 0,bt=Ue.Symbol,Ye=Ue.Uint8Array,at=$.propertyIsEnumerable,C=Tn.splice,Ut=bt?bt.toStringTag:void 0,gn=Object.getOwnPropertySymbols,bn=it?it.isBuffer:void 0,_n=In(Object.keys,Object),Mt=Bo(Ue,"DataView"),xi=Bo(Ue,"Map"),ji=Bo(Ue,"Promise"),Qn=Bo(Ue,"Set"),Zn=Bo(Ue,"WeakMap"),Yi=Bo(Object,"create"),qi=ts(Mt),Ui=ts(xi),Vi=ts(ji),Ki=ts(Qn),Ir=ts(Zn),Eo=bt?bt.prototype:void 0,cn=Eo?Eo.valueOf:void 0;function rr(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function Yo(){this.__data__=Yi?Yi(null):{},this.size=0}function aa(ie){var _e=this.has(ie)&&delete this.__data__[ie];return this.size-=_e?1:0,_e}function lo(ie){var _e=this.__data__;if(Yi){var $e=_e[ie];return $e===i?void 0:$e}return Ae.call(_e,ie)?_e[ie]:void 0}function Dn(ie){var _e=this.__data__;return Yi?_e[ie]!==void 0:Ae.call(_e,ie)}function er(ie,_e){var $e=this.__data__;return this.size+=this.has(ie)?0:1,$e[ie]=Yi&&_e===void 0?i:_e,this}rr.prototype.clear=Yo,rr.prototype.delete=aa,rr.prototype.get=lo,rr.prototype.has=Dn,rr.prototype.set=er;function Ai(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function ja(){this.__data__=[],this.size=0}function _A(ie){var _e=this.__data__,$e=Ar(_e,ie);if($e<0)return!1;var Ot=_e.length-1;return $e==Ot?_e.pop():C.call(_e,$e,1),--this.size,!0}function Sl(ie){var _e=this.__data__,$e=Ar(_e,ie);return $e<0?void 0:_e[$e][1]}function Hi(ie){return Ar(this.__data__,ie)>-1}function $u(ie,_e){var $e=this.__data__,Ot=Ar($e,ie);return Ot<0?(++this.size,$e.push([ie,_e])):$e[Ot][1]=_e,this}Ai.prototype.clear=ja,Ai.prototype.delete=_A,Ai.prototype.get=Sl,Ai.prototype.has=Hi,Ai.prototype.set=$u;function fo(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function Xa(){this.size=0,this.__data__={hash:new rr,map:new(xi||Ai),string:new rr}}function El(ie){var _e=ms(this,ie).delete(ie);return this.size-=_e?1:0,_e}function Na(ie){return ms(this,ie).get(ie)}function Lo(ie){return ms(this,ie).has(ie)}function bc(ie,_e){var $e=ms(this,ie),Ot=$e.size;return $e.set(ie,_e),this.size+=$e.size==Ot?0:1,this}fo.prototype.clear=Xa,fo.prototype.delete=El,fo.prototype.get=Na,fo.prototype.has=Lo,fo.prototype.set=bc;function Vo(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.__data__=new fo;++_e<$e;)this.add(ie[_e])}function vr(ie){return this.__data__.set(ie,i),this}function Ga(ie){return this.__data__.has(ie)}Vo.prototype.add=Vo.prototype.push=vr,Vo.prototype.has=Ga;function es(ie){var _e=this.__data__=new Ai(ie);this.size=_e.size}function Mu(){this.__data__=new Ai,this.size=0}function wu(ie){var _e=this.__data__,$e=_e.delete(ie);return this.size=_e.size,$e}function hl(ie){return this.__data__.get(ie)}function Xc(ie){return this.__data__.has(ie)}function dl(ie,_e){var $e=this.__data__;if($e instanceof Ai){var Ot=$e.__data__;if(!xi||Ot.length<t-1)return Ot.push([ie,_e]),this.size=++$e.size,this;$e=this.__data__=new fo(Ot)}return $e.set(ie,_e),this.size=$e.size,this}es.prototype.clear=Mu,es.prototype.delete=wu,es.prototype.get=hl,es.prototype.has=Xc,es.prototype.set=dl;function Wa(ie,_e){var $e=mo(ie),Ot=!$e&&ns(ie),qn=!$e&&!Ot&&wi(ie),Rn=!$e&&!Ot&&!qn&&la(ie),Ti=$e||Ot||qn||Rn,Ni=Ti?Kn(ie.length,String):[],Yn=Ni.length;for(var Oi in ie)Ae.call(ie,Oi)&&!(Ti&&(Oi=="length"||qn&&(Oi=="offset"||Oi=="parent")||Rn&&(Oi=="buffer"||Oi=="byteLength"||Oi=="byteOffset")||Bu(Oi,Yn)))&&Ni.push(Oi);return Ni}function Ar(ie,_e){for(var $e=ie.length;$e--;)if(Xu(ie[$e][0],_e))return $e;return-1}function Hu(ie,_e,$e){var Ot=_e(ie);return mo(ie)?Ot:Pt(Ot,$e(ie))}function Bl(ie){return ie==null?ie===void 0?ue:V:Ut&&Ut in Object(ie)?eu(ie):Ja(ie)}function Ol(ie){return Hr(ie)&&Bl(ie)==a}function Su(ie,_e,$e,Ot,qn){return ie===_e?!0:ie==null||_e==null||!Hr(ie)&&!Hr(_e)?ie!==ie&&_e!==_e:_c(ie,_e,$e,Ot,Su,qn)}function _c(ie,_e,$e,Ot,qn,Rn){var Ti=mo(ie),Ni=mo(_e),Yn=Ti?c:Is(ie),Oi=Ni?c:Is(_e);Yn=Yn==a?Z:Yn,Oi=Oi==a?Z:Oi;var ni=Yn==Z,si=Oi==Z,mr=Yn==Oi;if(mr&&wi(ie)){if(!wi(_e))return!1;Ti=!0,ni=!1}if(mr&&!ni)return Rn||(Rn=new es),Ti||la(ie)?Zl(ie,_e,$e,Ot,qn,Rn):Jc(ie,_e,Yn,$e,Ot,qn,Rn);if(!($e&r)){var ii=ni&&Ae.call(ie,"__wrapped__"),jr=si&&Ae.call(_e,"__wrapped__");if(ii||jr){var Oo=ii?ie.value():ie,Ko=jr?_e.value():_e;return Rn||(Rn=new es),qn(Oo,Ko,$e,Ot,Rn)}}return mr?(Rn||(Rn=new es),Xl(ie,_e,$e,Ot,qn,Rn)):!1}function zh(ie){if(!Ns(ie)||Zu(ie))return!1;var _e=Xs(ie)?We:Ke;return _e.test(ts(ie))}function Zs(ie){return Hr(ie)&&bo(ie.length)&&!!ot[Bl(ie)]}function xc(ie){if(!nr(ie))return _n(ie);var _e=[];for(var $e in Object(ie))Ae.call(ie,$e)&&$e!="constructor"&&_e.push($e);return _e}function Zl(ie,_e,$e,Ot,qn,Rn){var Ti=$e&r,Ni=ie.length,Yn=_e.length;if(Ni!=Yn&&!(Ti&&Yn>Ni))return!1;var Oi=Rn.get(ie);if(Oi&&Rn.get(_e))return Oi==_e;var ni=-1,si=!0,mr=$e&o?new Vo:void 0;for(Rn.set(ie,_e),Rn.set(_e,ie);++ni<Ni;){var ii=ie[ni],jr=_e[ni];if(Ot)var Oo=Ti?Ot(jr,ii,ni,_e,ie,Rn):Ot(ii,jr,ni,ie,_e,Rn);if(Oo!==void 0){if(Oo)continue;si=!1;break}if(mr){if(!nn(_e,function(Ko,ps){if(!Mi(mr,ps)&&(ii===Ko||qn(ii,Ko,$e,Ot,Rn)))return mr.push(ps)})){si=!1;break}}else if(!(ii===jr||qn(ii,jr,$e,Ot,Rn))){si=!1;break}}return Rn.delete(ie),Rn.delete(_e),si}function Jc(ie,_e,$e,Ot,qn,Rn,Ti){switch($e){case Be:if(ie.byteLength!=_e.byteLength||ie.byteOffset!=_e.byteOffset)return!1;ie=ie.buffer,_e=_e.buffer;case pe:return!(ie.byteLength!=_e.byteLength||!Rn(new Ye(ie),new Ye(_e)));case p:case v:case z:return Xu(+ie,+_e);case M:return ie.name==_e.name&&ie.message==_e.message;case ee:case q:return ie==_e+"";case U:var Ni=Ln;case ne:var Yn=Ot&r;if(Ni||(Ni=oi),ie.size!=_e.size&&!Yn)return!1;var Oi=Ti.get(ie);if(Oi)return Oi==_e;Ot|=o,Ti.set(ie,_e);var ni=Zl(Ni(ie),Ni(_e),Ot,qn,Rn,Ti);return Ti.delete(ie),ni;case le:if(cn)return cn.call(ie)==cn.call(_e)}return!1}function Xl(ie,_e,$e,Ot,qn,Rn){var Ti=$e&r,Ni=Jl(ie),Yn=Ni.length,Oi=Jl(_e),ni=Oi.length;if(Yn!=ni&&!Ti)return!1;for(var si=Yn;si--;){var mr=Ni[si];if(!(Ti?mr in _e:Ae.call(_e,mr)))return!1}var ii=Rn.get(ie);if(ii&&Rn.get(_e))return ii==_e;var jr=!0;Rn.set(ie,_e),Rn.set(_e,ie);for(var Oo=Ti;++si<Yn;){mr=Ni[si];var Ko=ie[mr],ps=_e[mr];if(Ot)var oh=Ti?Ot(ps,Ko,mr,_e,ie,Rn):Ot(Ko,ps,mr,ie,_e,Rn);if(!(oh===void 0?Ko===ps||qn(Ko,ps,$e,Ot,Rn):oh)){jr=!1;break}Oo||(Oo=mr=="constructor")}if(jr&&!Oo){var Il=ie.constructor,gs=_e.constructor;Il!=gs&&"constructor"in ie&&"constructor"in _e&&!(typeof Il=="function"&&Il instanceof Il&&typeof gs=="function"&&gs instanceof gs)&&(jr=!1)}return Rn.delete(ie),Rn.delete(_e),jr}function Jl(ie){return Hu(ie,el,Eu)}function ms(ie,_e){var $e=ie.__data__;return tu(_e)?$e[typeof _e=="string"?"string":"hash"]:$e.map}function Bo(ie,_e){var $e=Fn(ie,_e);return zh($e)?$e:void 0}function eu(ie){var _e=Ae.call(ie,Ut),$e=ie[Ut];try{ie[Ut]=void 0;var Ot=!0}catch{}var qn=Ne.call(ie);return Ot&&(_e?ie[Ut]=$e:delete ie[Ut]),qn}var Eu=gn?function(ie){return ie==null?[]:(ie=Object(ie),Ft(gn(ie),function(_e){return at.call(ie,_e)}))}:Zi,Is=Bl;(Mt&&Is(new Mt(new ArrayBuffer(1)))!=Be||xi&&Is(new xi)!=U||ji&&Is(ji.resolve())!=X||Qn&&Is(new Qn)!=ne||Zn&&Is(new Zn)!=ve)&&(Is=function(ie){var _e=Bl(ie),$e=_e==Z?ie.constructor:void 0,Ot=$e?ts($e):"";if(Ot)switch(Ot){case qi:return Be;case Ui:return U;case Vi:return X;case Ki:return ne;case Ir:return ve}return _e});function Bu(ie,_e){return _e=_e??s,!!_e&&(typeof ie=="number"||Bt.test(ie))&&ie>-1&&ie%1==0&&ie<_e}function tu(ie){var _e=typeof ie;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ie!=="__proto__":ie===null}function Zu(ie){return!!Me&&Me in ie}function nr(ie){var _e=ie&&ie.constructor,$e=typeof _e=="function"&&_e.prototype||$;return ie===$e}function Ja(ie){return Ne.call(ie)}function ts(ie){if(ie!=null){try{return Q.call(ie)}catch{}try{return ie+""}catch{}}return""}function Xu(ie,_e){return ie===_e||ie!==ie&&_e!==_e}var ns=Ol((function(){return arguments})())?Ol:function(ie){return Hr(ie)&&Ae.call(ie,"callee")&&!at.call(ie,"callee")},mo=Array.isArray;function po(ie){return ie!=null&&bo(ie.length)&&!Xs(ie)}var wi=bn||Rr;function ro(ie,_e){return Su(ie,_e)}function Xs(ie){if(!Ns(ie))return!1;var _e=Bl(ie);return _e==E||_e==P||_e==d||_e==re}function bo(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=s}function Ns(ie){var _e=typeof ie;return ie!=null&&(_e=="object"||_e=="function")}function Hr(ie){return ie!=null&&typeof ie=="object"}var la=wt?Wn(wt):Zs;function el(ie){return po(ie)?Wa(ie):xc(ie)}function Zi(){return[]}function Rr(){return!1}n.exports=ro})(X3,X3.exports)),X3.exports}var ffe=dfe(),mfe=oJ(ffe);function dD(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function fD(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function mD(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function oj(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function pfe(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=oj(o,e);i.push(dD(a.circle,o)),r.push(mD(a.line,o)),t.push(fD(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=oj(a,e);i.push(dD(c.circle,o,a)),r.push(mD(c.line,o,a)),t.push(fD(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function gfe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}var sj={polygonLayer:fD,lineLayer:mD,circleLayer:dD,generateInspectStyle:gfe,generateColoredLayers:pfe};class yfe{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function vfe(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function s8(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${vfe(e)}</div></div>`}function Cfe(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function bfe(n){const e=Cfe(n.layer["source-layer"]||n.layer.source),t=s8("$id",n.id),i=s8("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>s8(o,n.properties[o]));return[e,t,i].concat(r).join("")}function _fe(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${bfe(e)}</div>`).join("")}function xfe(n){return`<div class="maplibregl-inspect_popup">${_fe(n)}</div>`}var J3={exports:{}},Mfe=J3.exports,aj;function wfe(){return aj||(aj=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(Mfe,function(){var t=null,i={};V();var r=[],o=function(q){if(q=q||{},q.seed!==void 0&&q.seed!==null&&q.seed===parseInt(q.seed,10))t=q.seed;else if(typeof q.seed=="string")t=ee(q.seed);else{if(q.seed!==void 0&&q.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var le,ue,ve;if(q.count!==null&&q.count!==void 0){for(var pe=q.count,Be=[],Ce=0;Ce<q.count;Ce++)r.push(!1);for(q.count=null;pe>Be.length;){var Oe=o(q);t!==null&&(q.seed=t),Be.push(Oe)}return q.count=pe,Be}return le=s(q),ue=a(le,q),ve=c(le,ue,q),d([le,ue,ve],q)};function s(q){if(r.length>0){var le=ne(q.hue),ue=P(le),ve=(le[1]-le[0])/r.length,pe=parseInt((ue-le[0])/ve);r[pe]===!0?pe=(pe+2)%r.length:r[pe]=!0;var Be=(le[0]+pe*ve)%359,Ce=(le[0]+(pe+1)*ve)%359;return le=[Be,Ce],ue=P(le),ue<0&&(ue=360+ue),ue}else{var le=v(q.hue);return ue=P(le),ue<0&&(ue=360+ue),ue}}function a(q,le){if(le.hue==="monochrome")return 0;if(le.luminosity==="random")return P([0,100]);var ue=M(q),ve=ue[0],pe=ue[1];switch(le.luminosity){case"bright":ve=55;break;case"dark":ve=pe-10;break;case"light":pe=55;break}return P([ve,pe])}function c(q,le,ue){var ve=p(q,le),pe=100;switch(ue.luminosity){case"dark":pe=ve+20;break;case"light":ve=(pe+ve)/2;break;case"random":ve=0,pe=100;break}return P([ve,pe])}function d(q,le){switch(le.format){case"hsvArray":return q;case"hslArray":return re(q);case"hsl":var ue=re(q);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var ve=re(q),Ce=le.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+Ce+")";case"rgbArray":return Z(q);case"rgb":var pe=Z(q);return"rgb("+pe.join(", ")+")";case"rgba":var Be=Z(q),Ce=le.alpha||Math.random();return"rgba("+Be.join(", ")+", "+Ce+")";default:return U(q)}}function p(q,le){for(var ue=E(q).lowerBounds,ve=0;ve<ue.length-1;ve++){var pe=ue[ve][0],Be=ue[ve][1],Ce=ue[ve+1][0],Oe=ue[ve+1][1];if(le>=pe&&le<=Ce){var Fe=(Oe-Be)/(Ce-pe),Ee=Be-Fe*pe;return Fe*le+Ee}}return 0}function v(q){if(typeof parseInt(q)=="number"){var le=parseInt(q);if(le<360&&le>0)return[le,le]}if(typeof q=="string"){if(i[q]){var ue=i[q];if(ue.hueRange)return ue.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return[ve,ve]}}return[0,360]}function M(q){return E(q).saturationRange}function E(q){q>=334&&q<=360&&(q-=360);for(var le in i){var ue=i[le];if(ue.hueRange&&q>=ue.hueRange[0]&&q<=ue.hueRange[1])return i[le]}return"Color not found"}function P(q){if(t===null){var le=.618033988749895,ue=Math.random();return ue+=le,ue%=1,Math.floor(q[0]+ue*(q[1]+1-q[0]))}else{var ve=q[1]||1,pe=q[0]||0;t=(t*9301+49297)%233280;var Be=t/233280;return Math.floor(pe+Be*(ve-pe))}}function U(q){var le=Z(q);function ue(pe){var Be=pe.toString(16);return Be.length==1?"0"+Be:Be}var ve="#"+ue(le[0])+ue(le[1])+ue(le[2]);return ve}function z(q,le,ue){var ve=ue[0][0],pe=ue[ue.length-1][0],Be=ue[ue.length-1][1],Ce=ue[0][1];i[q]={hueRange:le,lowerBounds:ue,saturationRange:[ve,pe],brightnessRange:[Be,Ce]}}function V(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Z(q){var le=q[0];le===0&&(le=1),le===360&&(le=359),le=le/360;var ue=q[1]/100,ve=q[2]/100,pe=Math.floor(le*6),Be=le*6-pe,Ce=ve*(1-ue),Oe=ve*(1-Be*ue),Fe=ve*(1-(1-Be)*ue),Ee=256,Ve=256,ut=256;switch(pe){case 0:Ee=ve,Ve=Fe,ut=Ce;break;case 1:Ee=Oe,Ve=ve,ut=Ce;break;case 2:Ee=Ce,Ve=ve,ut=Fe;break;case 3:Ee=Ce,Ve=Oe,ut=ve;break;case 4:Ee=Fe,Ve=Ce,ut=ve;break;case 5:Ee=ve,Ve=Ce,ut=Oe;break}var mt=[Math.floor(Ee*255),Math.floor(Ve*255),Math.floor(ut*255)];return mt}function X(q){q=q.replace(/^#/,""),q=q.length===3?q.replace(/(.)/g,"$1$1"):q;var le=parseInt(q.substr(0,2),16)/255,ue=parseInt(q.substr(2,2),16)/255,ve=parseInt(q.substr(4,2),16)/255,pe=Math.max(le,ue,ve),Be=pe-Math.min(le,ue,ve),Ce=pe?Be/pe:0;switch(pe){case le:return[60*((ue-ve)/Be%6)||0,Ce,pe];case ue:return[60*((ve-le)/Be+2)||0,Ce,pe];case ve:return[60*((le-ue)/Be+4)||0,Ce,pe]}}function re(q){var le=q[0],ue=q[1]/100,ve=q[2]/100,pe=(2-ue)*ve;return[le,Math.round(ue*ve/(pe<1?pe:2-pe)*1e4)/100,pe/2*100]}function ee(q){for(var le=0,ue=0;ue!==q.length&&!(le>=Number.MAX_SAFE_INTEGER);ue++)le+=q.charCodeAt(ue);return le}function ne(q){if(isNaN(q)){if(typeof q=="string"){if(i[q]){var ue=i[q];if(ue.hueRange)return ue.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return E(ve).hueRange}}}else{var le=parseInt(q);if(le<360&&le>0)return E(q).hueRange}return[0,360]}return o})})(J3,J3.exports)),J3.exports}var Sfe=wfe(),Efe=oJ(Sfe);function Bfe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Efe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var Ofe={brightColor:Bfe};function Ife(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function Tfe(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class fU{constructor(e){if(this._onSourceChange=i=>ij(this,void 0,void 0,function*(){if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);yield this._setSourcesFromMap(),!mfe(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)}),this._onStyleChange=()=>{const i=this._map.getStyle();Ife(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof fU))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:Ofe.brightColor,buildInspectStyle:sj.generateInspectStyle,renderPopup:xfe,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new yfe({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=sj.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(Tfe(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){return ij(this,void 0,void 0,function*(){var e;const t=this._map.getStyle(),i=Object.keys(t.sources);for(const r of i)if(t.sources[r].type==="geojson")this.sources[r]=[];else if(t.sources[r].type==="vector"&&t.sources[r].url)try{const s=yield(yield fetch(t.sources[r].url)).json(),a=(e=s?.vector_layers)===null||e===void 0?void 0:e.map(c=>c.id);if(a)this.sources[r]=a;else throw new Error("Missing vector_layers in source: "+r)}catch{console.warn("Unable to retrieve tileJSON from "+t.sources[r].url+" using style's layers");for(const s of t.layers)if("source-layer"in s&&s["source-layer"]){const a=s["source-layer"];this.sources[r]||(this.sources[r]=[]),this.sources[r].push(a)}}for(const r of Object.keys(this.sources))i.indexOf(r)===-1?delete this.sources[r]:this.sources[r]=[...new Set(this.sources[r])]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var e4={exports:{}},kfe=e4.exports,lj;function Dfe(){return lj||(lj=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(kfe,function(){var t=null,i={};V();var r=[],o=function(q){if(q=q||{},q.seed!==void 0&&q.seed!==null&&q.seed===parseInt(q.seed,10))t=q.seed;else if(typeof q.seed=="string")t=ee(q.seed);else{if(q.seed!==void 0&&q.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var le,ue,ve;if(q.count!==null&&q.count!==void 0){for(var pe=q.count,Be=[],Ce=0;Ce<q.count;Ce++)r.push(!1);for(q.count=null;pe>Be.length;){var Oe=o(q);t!==null&&(q.seed=t),Be.push(Oe)}return q.count=pe,Be}return le=s(q),ue=a(le,q),ve=c(le,ue,q),d([le,ue,ve],q)};function s(q){if(r.length>0){var le=ne(q.hue),ue=P(le),ve=(le[1]-le[0])/r.length,pe=parseInt((ue-le[0])/ve);r[pe]===!0?pe=(pe+2)%r.length:r[pe]=!0;var Be=(le[0]+pe*ve)%359,Ce=(le[0]+(pe+1)*ve)%359;return le=[Be,Ce],ue=P(le),ue<0&&(ue=360+ue),ue}else{var le=v(q.hue);return ue=P(le),ue<0&&(ue=360+ue),ue}}function a(q,le){if(le.hue==="monochrome")return 0;if(le.luminosity==="random")return P([0,100]);var ue=M(q),ve=ue[0],pe=ue[1];switch(le.luminosity){case"bright":ve=55;break;case"dark":ve=pe-10;break;case"light":pe=55;break}return P([ve,pe])}function c(q,le,ue){var ve=p(q,le),pe=100;switch(ue.luminosity){case"dark":pe=ve+20;break;case"light":ve=(pe+ve)/2;break;case"random":ve=0,pe=100;break}return P([ve,pe])}function d(q,le){switch(le.format){case"hsvArray":return q;case"hslArray":return re(q);case"hsl":var ue=re(q);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var ve=re(q),Ce=le.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+Ce+")";case"rgbArray":return Z(q);case"rgb":var pe=Z(q);return"rgb("+pe.join(", ")+")";case"rgba":var Be=Z(q),Ce=le.alpha||Math.random();return"rgba("+Be.join(", ")+", "+Ce+")";default:return U(q)}}function p(q,le){for(var ue=E(q).lowerBounds,ve=0;ve<ue.length-1;ve++){var pe=ue[ve][0],Be=ue[ve][1],Ce=ue[ve+1][0],Oe=ue[ve+1][1];if(le>=pe&&le<=Ce){var Fe=(Oe-Be)/(Ce-pe),Ee=Be-Fe*pe;return Fe*le+Ee}}return 0}function v(q){if(typeof parseInt(q)=="number"){var le=parseInt(q);if(le<360&&le>0)return[le,le]}if(typeof q=="string"){if(i[q]){var ue=i[q];if(ue.hueRange)return ue.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return[ve,ve]}}return[0,360]}function M(q){return E(q).saturationRange}function E(q){q>=334&&q<=360&&(q-=360);for(var le in i){var ue=i[le];if(ue.hueRange&&q>=ue.hueRange[0]&&q<=ue.hueRange[1])return i[le]}return"Color not found"}function P(q){if(t===null){var le=.618033988749895,ue=Math.random();return ue+=le,ue%=1,Math.floor(q[0]+ue*(q[1]+1-q[0]))}else{var ve=q[1]||1,pe=q[0]||0;t=(t*9301+49297)%233280;var Be=t/233280;return Math.floor(pe+Be*(ve-pe))}}function U(q){var le=Z(q);function ue(pe){var Be=pe.toString(16);return Be.length==1?"0"+Be:Be}var ve="#"+ue(le[0])+ue(le[1])+ue(le[2]);return ve}function z(q,le,ue){var ve=ue[0][0],pe=ue[ue.length-1][0],Be=ue[ue.length-1][1],Ce=ue[0][1];i[q]={hueRange:le,lowerBounds:ue,saturationRange:[ve,pe],brightnessRange:[Be,Ce]}}function V(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Z(q){var le=q[0];le===0&&(le=1),le===360&&(le=359),le=le/360;var ue=q[1]/100,ve=q[2]/100,pe=Math.floor(le*6),Be=le*6-pe,Ce=ve*(1-ue),Oe=ve*(1-Be*ue),Fe=ve*(1-(1-Be)*ue),Ee=256,Ve=256,ut=256;switch(pe){case 0:Ee=ve,Ve=Fe,ut=Ce;break;case 1:Ee=Oe,Ve=ve,ut=Ce;break;case 2:Ee=Ce,Ve=ve,ut=Fe;break;case 3:Ee=Ce,Ve=Oe,ut=ve;break;case 4:Ee=Fe,Ve=Ce,ut=ve;break;case 5:Ee=ve,Ve=Ce,ut=Oe;break}var mt=[Math.floor(Ee*255),Math.floor(Ve*255),Math.floor(ut*255)];return mt}function X(q){q=q.replace(/^#/,""),q=q.length===3?q.replace(/(.)/g,"$1$1"):q;var le=parseInt(q.substr(0,2),16)/255,ue=parseInt(q.substr(2,2),16)/255,ve=parseInt(q.substr(4,2),16)/255,pe=Math.max(le,ue,ve),Be=pe-Math.min(le,ue,ve),Ce=pe?Be/pe:0;switch(pe){case le:return[60*((ue-ve)/Be%6)||0,Ce,pe];case ue:return[60*((ve-le)/Be+2)||0,Ce,pe];case ve:return[60*((le-ue)/Be+4)||0,Ce,pe]}}function re(q){var le=q[0],ue=q[1]/100,ve=q[2]/100,pe=(2-ue)*ve;return[le,Math.round(ue*ve/(pe<1?pe:2-pe)*1e4)/100,pe/2*100]}function ee(q){for(var le=0,ue=0;ue!==q.length&&!(le>=Number.MAX_SAFE_INTEGER);ue++)le+=q.charCodeAt(ue);return le}function ne(q){if(isNaN(q)){if(typeof q=="string"){if(i[q]){var ue=i[q];if(ue.hueRange)return ue.hueRange}else if(q.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=X(q)[0];return E(ve).hueRange}}}else{var le=parseInt(q);if(le<360&&le>0)return E(q).hueRange}return[0,360]}return o})})(e4,e4.exports)),e4.exports}var Rfe=Dfe();const Pfe=xu(Rfe);function Ufe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Pfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const sJ={brightColor:Ufe};function Lfe(n){return Co({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Kfe(n){return Co({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function Ffe(n){return Co({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function zfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function Hb(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function jfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function Nfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function Gfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Wfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Qfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function qfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function Yfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function Vfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function $fe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function Hfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"},child:[]}]})(n)}function aJ(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Zfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function pD(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function Xfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function Jfe(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function uj(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function eme(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function cj(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function tme(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function nme(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function ime(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function rme(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function ome(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function lJ(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function uJ(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function cJ(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function sme(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function ame(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function lme(n){return Co({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function ume(n){return Co({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function cme(n){return Co({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function Ame(n){return Co({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function ra(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ra=function(){return s},s}ra();ra().s[0]++;const AJ=n=>{ra().f[0]++;const e=(ra().s[1]++,{style:n.style});switch(ra().s[2]++,n.type){case"fill-extrusion":return ra().b[0][0]++,ra().s[3]++,oe.jsx(cme,{...e});case"raster":return ra().b[0][1]++,ra().s[4]++,oe.jsx(nme,{...e});case"hillshade":return ra().b[0][2]++,ra().s[5]++,oe.jsx(Ffe,{...e});case"color-relief":return ra().b[0][3]++,ra().s[6]++,oe.jsx(Ame,{...e});case"heatmap":return ra().b[0][4]++,ra().s[7]++,oe.jsx(Jfe,{...e});case"fill":return ra().b[0][5]++,ra().s[8]++,oe.jsx(Kfe,{...e});case"background":return ra().b[0][6]++,ra().s[9]++,oe.jsx(Lfe,{...e});case"line":return ra().b[0][7]++,ra().s[10]++,oe.jsx(ume,{...e});case"symbol":return ra().b[0][8]++,ra().s[11]++,oe.jsx(rme,{...e});case"circle":return ra().b[0][9]++,ra().s[12]++,oe.jsx(tme,{...e});default:return ra().b[0][10]++,ra().s[13]++,oe.jsx(ame,{...e})}};function Ei(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ei=function(){return s},s}Ei();function hme(n){Ei().f[0]++;const e=(Ei().s[0]++,{}),t=(Ei().s[1]++,{});return Ei().s[2]++,n.forEach(i=>{Ei().f[1]++;const r=(Ei().s[3]++,i.layer["source-layer"]);if(Ei().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Ei().b[0][0]++,Ei().s[5]++,t[i.layer.id]++;const o=(Ei().s[6]++,e[r].find(s=>(Ei().f[2]++,Ei().s[7]++,s.layer.id===i.layer.id)));Ei().s[8]++,o.counter=t[i.layer.id]}else Ei().b[0][1]++,Ei().s[9]++,e[r]=(Ei().b[1][0]++,e[r]||(Ei().b[1][1]++,[])),Ei().s[10]++,e[r].push(i),Ei().s[11]++,t[i.layer.id]=1}),Ei().s[12]++,e}class hJ extends En.Component{_getFeatureColor(e,t){if(Ei().f[3]++,Ei().s[13]++,e.layer.paint)Ei().b[2][1]++;else{Ei().b[2][0]++,Ei().s[14]++;return}Ei().s[15]++;try{const i=(Ei().s[16]++,e.layer.paint);return Ei().s[17]++,Ei().b[4][0]++,"text-color"in i&&(Ei().b[4][1]++,i["text-color"])?(Ei().b[3][0]++,Ei().s[18]++,String(i["text-color"])):(Ei().b[3][1]++,Ei().s[19]++,Ei().b[6][0]++,"fill-color"in i&&(Ei().b[6][1]++,i["fill-color"])?(Ei().b[5][0]++,Ei().s[20]++,String(i["fill-color"])):(Ei().b[5][1]++,Ei().s[21]++,Ei().b[8][0]++,"line-color"in i&&(Ei().b[8][1]++,i["line-color"])?(Ei().b[7][0]++,Ei().s[22]++,String(i["line-color"])):(Ei().b[7][1]++,Ei().s[23]++,Ei().b[10][0]++,"fill-extrusion-color"in i&&(Ei().b[10][1]++,i["fill-extrusion-color"])?(Ei().b[9][0]++,Ei().s[24]++,String(i["fill-extrusion-color"])):(Ei().b[9][1]++,Ei().s[25]++,"black"))))}catch(i){return Ei().s[26]++,console.warn("Unable to get feature color, error:",i),Ei().s[27]++,"black"}}render(){Ei().f[4]++;const e=(Ei().s[28]++,hme(this.props.features)),t=(Ei().s[29]++,Object.keys(e).map(i=>{Ei().f[5]++;const r=(Ei().s[30]++,e[i].map((o,s)=>{Ei().f[6]++;const a=(Ei().s[31]++,this._getFeatureColor(o,this.props.zoom));return Ei().s[32]++,oe.jsxs("div",{className:"maputnik-popup-layer",children:[oe.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),oe.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Ei().f[7]++,Ei().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(Ei().b[11][0]++,o.layer.type&&(Ei().b[11][1]++,oe.jsx(AJ,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(Ei().b[12][0]++,o.counter&&(Ei().b[12][1]++,oe.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return Ei().s[34]++,oe.jsxs("div",{children:[oe.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Ei().s[35]++,oe.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function gr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gr=function(){return s},s}gr();function Aj(n){return gr().f[0]++,gr().s[0]++,gr().b[1][0]++,typeof n>"u"||(gr().b[1][1]++,n===null)?(gr().b[0][0]++,gr().s[1]++,n):(gr().b[0][1]++,gr().s[2]++,n instanceof Date?(gr().b[2][0]++,gr().s[3]++,n.toLocaleString()):(gr().b[2][1]++,gr().s[4]++,gr().b[4][0]++,typeof n=="object"||(gr().b[4][1]++,typeof n=="number")||(gr().b[4][2]++,typeof n=="string")?(gr().b[3][0]++,gr().s[5]++,n.toString()):(gr().b[3][1]++,gr().s[6]++,n)))}function a8(n,e){return gr().f[1]++,gr().s[7]++,oe.jsxs("tr",{children:[oe.jsx("td",{className:"maputnik-popup-table-cell",children:n}),oe.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function dme(n,e){return gr().f[2]++,gr().s[8]++,oe.jsxs(En.Fragment,{children:[oe.jsx("tr",{children:oe.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(gr().b[5][0]++,n.inspectModeCounter&&(gr().b[5][1]++,oe.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),a8("$type",n.geometry.type),a8("$id",Aj(n.id)),Object.keys(n.properties).map(t=>{gr().f[3]++;const i=(gr().s[9]++,n.properties[t]);return gr().s[10]++,a8(t,Aj(i))})]},e)}function fme(n){gr().f[4]++;const e=(gr().s[11]++,[]);return gr().s[12]++,n.forEach(t=>{gr().f[5]++;const i=(gr().s[13]++,e.findIndex(r=>(gr().f[6]++,gr().s[14]++,gr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(gr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));gr().s[15]++,i===-1?(gr().b[7][0]++,gr().s[16]++,e.push(t)):(gr().b[7][1]++,gr().s[17]++,"inspectModeCounter"in e[i]?(gr().b[8][0]++,gr().s[18]++,e[i].inspectModeCounter++):(gr().b[8][1]++,gr().s[19]++,e[i].inspectModeCounter=2))}),gr().s[20]++,e}class mme extends En.Component{render(){gr().f[7]++;const e=(gr().s[21]++,fme(this.props.features));return gr().s[22]++,oe.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:oe.jsx("table",{className:"maputnik-popup-table",children:oe.jsx("tbody",{children:e.map(dme)})})})}}const gD={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in gD)Object.freeze(gD[n]);const w4=Object.freeze(gD),dJ=Object.create(null);for(const n in w4)Object.hasOwn(w4,n)&&(dJ[w4[n]]=n);const gc={to:{},get:{}};gc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=gc.get.hsl(n),i="hsl";break}case"hwb":{t=gc.get.hwb(n),i="hwb";break}default:{t=gc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};gc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i,o=/^(\w+)$/;let s=[0,0,0,1],a,c,d;if(a=n.match(t)){for(d=a[2],a=a[1],c=0;c<3;c++){const p=c*2;s[c]=Number.parseInt(a.slice(p,p+2),16)}d&&(s[3]=Number.parseInt(d,16)/255)}else if(a=n.match(e)){for(a=a[1],d=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);d&&(s[3]=Number.parseInt(d+d,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseFloat(a[c+1]);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.toLowerCase().match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(w4,a[1])?(s=w4[a[1]].slice(),s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=Ev(s[c],0,255);return s[3]=Ev(s[3],0,1),s};gc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Ev(Number.parseFloat(t[2]),0,100),s=Ev(Number.parseFloat(t[3]),0,100),a=Ev(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};gc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Ev(Number.parseFloat(t[2]),0,100),s=Ev(Number.parseFloat(t[3]),0,100),a=Ev(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};gc.to.hex=function(...n){return"#"+aw(n[0])+aw(n[1])+aw(n[2])+(n[3]<1?aw(Math.round(n[3]*255)):"")};gc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};gc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};gc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};gc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};gc.to.keyword=function(...n){return dJ[n.slice(0,3)]};function Ev(n,e,t){return Math.min(Math.max(e,n),t)}function aw(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const yD={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in yD)Object.freeze(yD[n]);const t5=Object.freeze(yD),fJ={};for(const n of Object.keys(t5))fJ[t5[n]]=n;const _i={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},L1=(6/29)**3;function q2(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function Y2(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(_i)){if(!("channels"in _i[n]))throw new Error("missing channels property: "+n);if(!("labels"in _i[n]))throw new Error("missing channel labels property: "+n);if(_i[n].labels.length!==_i[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=_i[n];delete _i[n].channels,delete _i[n].labels,Object.defineProperty(_i[n],"channels",{value:e}),Object.defineProperty(_i[n],"labels",{value:t})}_i.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const d=(r+o)/2;return o===r?c=0:d<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,d*100]};_i.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,d=Math.max(s,a,c),p=d-Math.min(s,a,c),v=function(M){return(d-M)/6/p+1/2};if(p===0)r=0,o=0;else{switch(o=p/d,e=v(s),t=v(a),i=v(c),d){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,d*100]};_i.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=_i.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};_i.rgb.oklab=function(n){const e=Y2(n[0]/255),t=Y2(n[1]/255),i=Y2(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,d=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,d*100]};_i.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function pme(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}_i.rgb.keyword=function(n){const e=fJ[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(t5)){const o=t5[r],s=pme(n,o);s<t&&(t=s,i=r)}return i};_i.keyword.rgb=function(n){return[...t5[n]]};_i.rgb.xyz=function(n){const e=Y2(n[0]/255),t=Y2(n[1]/255),i=Y2(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};_i.rgb.lab=function(n){const e=_i.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>L1?t**(1/3):7.787*t+16/116,i=i>L1?i**(1/3):7.787*i+16/116,r=r>L1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};_i.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let d=0;d<3;d++)r=e+1/3*-(d-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[d]=o*255;return c};_i.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};_i.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};_i.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};_i.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let d,p,v;switch(s){default:case 6:case 0:{d=a,p=c,v=t;break}case 1:{d=c,p=a,v=t;break}case 2:{d=t,p=a,v=c;break}case 3:{d=t,p=c,v=a;break}case 4:{d=c,p=t,v=a;break}case 5:{d=a,p=t,v=c;break}}return[d*255,p*255,v*255]};_i.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};_i.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=q2(r),o=q2(o),s=q2(s),[r*255,o*255,s*255]};_i.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>L1?e**(1/3):7.787*e+16/116,t=t>L1?t**(1/3):7.787*t+16/116,i=i>L1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};_i.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,d=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,d*100]};_i.oklab.oklch=function(n){return _i.lab.lch(n)};_i.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,d=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,d*100]};_i.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=q2(4.0767416621*r-3.3077115913*o+.2309699292*s),c=q2(-1.2684380046*r+2.6097574011*o-.3413193965*s),d=q2(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,d*255]};_i.oklch.oklab=function(n){return _i.lch.lab(n)};_i.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,d=s**3;return o=a>L1?a:(o-16/116)/7.787,r=c>L1?c:(r-16/116)/7.787,s=d>L1?d:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};_i.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};_i.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};_i.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?_i.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};_i.hsv.ansi16=function(n){return _i.rgb.ansi16(_i.hsv.rgb(n),n[2])};_i.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};_i.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};_i.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};_i.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};_i.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};_i.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};_i.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};_i.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};_i.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};_i.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};_i.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};_i.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};_i.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};_i.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};_i.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};_i.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};_i.gray.hsl=function(n){return[0,0,n[0]]};_i.gray.hsv=_i.gray.hsl;_i.gray.hwb=function(n){return[0,100,n[0]]};_i.gray.cmyk=function(n){return[0,0,0,n[0]]};_i.gray.lab=function(n){return[n[0],0,0]};_i.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};_i.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function gme(){const n={},e=Object.keys(_i);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function yme(n){const e=gme(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(_i[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function vme(n,e){return function(t){return e(n(t))}}function Cme(n,e){const t=[e[n].parent,n];let i=_i[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=vme(_i[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function bme(n){const e=yme(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=Cme(s,e))}return t}const Hc={},_me=Object.keys(_i);function xme(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function Mme(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of _me){Hc[n]={},Object.defineProperty(Hc[n],"channels",{value:_i[n].channels}),Object.defineProperty(Hc[n],"labels",{value:_i[n].labels});const e=bme(n),t=Object.keys(e);for(const i of t){const r=e[i];Hc[n][i]=Mme(r),Hc[n][i].raw=xme(r)}}const mJ=["keyword","gray","hex"],vD={};for(const n of Object.keys(Hc))vD[[...Hc[n].labels].sort().join("")]=n;const CD={};function Nu(n,e){if(!(this instanceof Nu))return new Nu(n,e);if(e&&e in mJ&&(e=null),e&&!(e in Hc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Nu)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=gc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=Hc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=Hc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=bD(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in vD))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=vD[o];const{labels:s}=Hc[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=bD(a)}if(CD[this.model])for(i=Hc[this.model].channels,t=0;t<i;t++){const r=CD[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Nu.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in gc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return gc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return gc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Hc[this.model],{labels:t}=Hc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Nu([...this.color.map(Sme(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Nu([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:ql("rgb",0,dc(255)),green:ql("rgb",1,dc(255)),blue:ql("rgb",2,dc(255)),hue:ql(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:ql("hsl",1,dc(100)),lightness:ql("hsl",2,dc(100)),saturationv:ql("hsv",1,dc(100)),value:ql("hsv",2,dc(100)),chroma:ql("hcg",1,dc(100)),gray:ql("hcg",2,dc(100)),white:ql("hwb",1,dc(100)),wblack:ql("hwb",2,dc(100)),cyan:ql("cmyk",0,dc(100)),magenta:ql("cmyk",1,dc(100)),yellow:ql("cmyk",2,dc(100)),black:ql("cmyk",3,dc(100)),x:ql("xyz",0,dc(95.047)),y:ql("xyz",1,dc(100)),z:ql("xyz",2,dc(108.833)),l:ql("lab",0,dc(100)),a:ql("lab",1),b:ql("lab",2),keyword(n){return n!==void 0?new Nu(n):Hc[this.model].keyword(this.color)},hex(n){return n!==void 0?new Nu(n):gc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Nu(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),gc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Nu.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return Nu.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(Hc)){if(mJ.includes(n))continue;const{channels:e}=Hc[n];Nu.prototype[n]=function(...t){return this.model===n?new Nu(this):t.length>0?new Nu(t,n):new Nu([...Eme(Hc[this.model][n].raw(this.color)),this.valpha],n)},Nu[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=bD(t,e)),new Nu(i,n)}}function wme(n,e){return Number(n.toFixed(e))}function Sme(n){return function(e){return wme(e,n)}}function ql(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(CD[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function dc(n){return function(e){return Math.max(0,Math.min(n,e))}}function Eme(n){return Array.isArray(n)?n:[n]}function bD(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function ls(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ls=function(){return s},s}ls();class Bme{_map=(ls().s[0]++,void 0);_container=(ls().s[1]++,void 0);_textEl=(ls().s[2]++,null);constructor(){ls().f[0]++}onAdd(e){return ls().f[1]++,ls().s[3]++,this._map=e,ls().s[4]++,this._container=document.createElement("div"),ls().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",ls().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),ls().s[7]++,this.setLabel("Zoom:"),ls().s[8]++,this.addEventListeners(),ls().s[9]++,this._container}updateZoomLevel(){ls().f[2]++,ls().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){ls().f[3]++,ls().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,ls().s[12]++,this._textEl=this._container.querySelector("span"),ls().s[13]++,this.updateZoomLevel()}addEventListeners(){ls().f[4]++,ls().s[14]++,this._map.on("render",()=>(ls().f[5]++,ls().s[15]++,this.updateZoomLevel())),ls().s[16]++,this._map.on("zoomIn",()=>(ls().f[6]++,ls().s[17]++,this.updateZoomLevel())),ls().s[18]++,this._map.on("zoomOut",()=>(ls().f[7]++,ls().s[19]++,this.updateZoomLevel()))}onRemove(){ls().f[8]++,ls().s[20]++,this._container.parentNode.removeChild(this._container),ls().s[21]++,this._map=void 0}}function _D(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function xD(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function MD(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function hj(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function Ome(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=hj(o,e);i.push(_D(a.circle,o)),r.push(MD(a.line,o)),t.push(xD(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=hj(a,e);i.push(_D(c.circle,o,a)),r.push(MD(c.line,o,a)),t.push(xD(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function Ime(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}const l8={polygonLayer:xD,lineLayer:MD,circleLayer:_D,generateInspectStyle:Ime,generateColoredLayers:Ome};function Er(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Er=function(){return s},s}Er();function u8(n,e){return Er().f[0]++,Er().s[0]++,n.type==="circle"?(Er().b[0][0]++,Er().s[1]++,n.paint["circle-radius"]=3):(Er().b[0][1]++,Er().s[2]++,n.type==="line"?(Er().b[1][0]++,Er().s[3]++,n.paint["line-width"]=2):Er().b[1][1]++),Er().s[4]++,"filter"in e?(Er().b[2][0]++,Er().s[5]++,n.filter=e.filter):(Er().b[2][1]++,Er().s[6]++,delete n.filter),Er().s[7]++,n.id=n.id+"_highlight",Er().s[8]++,n}function Tme(n){if(Er().f[1]++,Er().s[9]++,Er().b[4][0]++,!n||(Er().b[4][1]++,n.type==="background")||(Er().b[4][2]++,n.type==="raster"))return Er().b[3][0]++,Er().s[10]++,null;Er().b[3][1]++;const e=(Er().s[11]++,Er().b[5][0]++,n["source-layer"]||(Er().b[5][1]++,"")),t=(Er().s[12]++,sJ.brightColor(e,1));return Er().s[13]++,Er().b[7][0]++,n.type==="fill"||(Er().b[7][1]++,n.type==="fill-extrusion")?(Er().b[6][0]++,Er().s[14]++,u8(l8.polygonLayer(t,t,n.source,n["source-layer"]),n)):(Er().b[6][1]++,Er().s[15]++,Er().b[9][0]++,n.type==="symbol"||(Er().b[9][1]++,n.type==="circle")?(Er().b[8][0]++,Er().s[16]++,u8(l8.circleLayer(t,n.source,n["source-layer"]),n)):(Er().b[8][1]++,Er().s[17]++,n.type==="line"?(Er().b[10][0]++,Er().s[18]++,u8(l8.lineLayer(t,n.source,n["source-layer"]),n)):(Er().b[10][1]++,Er().s[19]++,null)))}function mU(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mU=function(){return s},s}mU();mU().s[0]++;M2.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function c8(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(p){try{d(i.next(p))}catch(v){s(v)}}function c(p){try{d(i.throw(p))}catch(v){s(v)}}function d(p){p.done?o(p.value):r(p.value).then(a,c)}d((i=i.apply(n,e||[])).next())})}var lw=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function X6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var A8,dj;function pJ(){if(dj)return A8;dj=1,A8=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return A8}var h8={exports:{}},fj;function kme(){return fj||(fj=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,d=0,p=0,v=o.pre||"",M=o.post||"",E=o.caseSensitive&&r||r.toLowerCase(),P;i=o.caseSensitive&&i||i.toLowerCase();for(var U=0;U<c;U++)P=r[U],E[U]===i[s]?(P=v+P+M,s+=1,p+=1+p):p=0,d+=p,a[a.length]=P;return s===i.length?(d=E===i?1/0:d,{rendered:a.join(""),score:d}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,d){var p=a;o.extract&&(p=o.extract(a));var v=t.match(i,p,o);return v!=null&&(s[s.length]={string:v.rendered,score:v.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(h8)),h8.exports}var d8,mj;function Dme(){if(mj)return d8;mj=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},d8=n,d8}var f8,pj;function Rme(){if(pj)return f8;pj=1;var n=pJ(),e=kme(),t=Dme(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var d=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,d)+"</strong>"+s.slice(d),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},f8=i,f8}var m8,gj;function Pme(){if(gj)return m8;gj=1;var n=Rme();return m8=n,typeof window<"u"&&(window.Suggestions=n),m8}var Ume=Pme(),Lme=X6(Ume),ES={exports:{}},Kme=ES.exports,yj;function Fme(){return yj||(yj=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Kme,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(d,p){return d&&p})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,d,p){Object.defineProperty(c,d,{value:p,enumerable:!0})}function a(c,d,p){function v(M){return i(M)[c]||e}s(v,"pattern",d),s(o,p,v)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(ES)),ES.exports}var zme=Fme(),jme=X6(zme),p8,vj;function Nme(){if(vj)return p8;vj=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof lw=="object"&&lw&&lw.Object===Object&&lw,d=typeof self=="object"&&self&&self.Object===Object&&self,p=c||d||Function("return this")(),v=Object.prototype,M=v.toString,E=Math.max,P=Math.min,U=function(){return p.Date.now()};function z(ee,ne,q){var le,ue,ve,pe,Be,Ce,Oe=0,Fe=!1,Ee=!1,Ve=!0;if(typeof ee!="function")throw new TypeError(n);ne=re(ne)||0,V(q)&&(Fe=!!q.leading,Ee="maxWait"in q,ve=Ee?E(re(q.maxWait)||0,ne):ve,Ve="trailing"in q?!!q.trailing:Ve);function ut(Rt){var Ue=le,ke=ue;return le=ue=void 0,Oe=Rt,pe=ee.apply(ke,Ue),pe}function mt(Rt){return Oe=Rt,Be=setTimeout(Xe,ne),Fe?ut(Rt):pe}function Pe(Rt){var Ue=Rt-Ce,ke=Rt-Oe,Te=ne-Ue;return Ee?P(Te,ve-ke):Te}function De(Rt){var Ue=Rt-Ce,ke=Rt-Oe;return Ce===void 0||Ue>=ne||Ue<0||Ee&&ke>=ve}function Xe(){var Rt=U();if(De(Rt))return Ke(Rt);Be=setTimeout(Xe,Pe(Rt))}function Ke(Rt){return Be=void 0,Ve&&le?ut(Rt):(le=ue=void 0,pe)}function Bt(){Be!==void 0&&clearTimeout(Be),Oe=0,le=Ce=ue=Be=void 0}function ot(){return Be===void 0?pe:Ke(U())}function Et(){var Rt=U(),Ue=De(Rt);if(le=arguments,ue=this,Ce=Rt,Ue){if(Be===void 0)return mt(Ce);if(Ee)return Be=setTimeout(Xe,ne),ut(Ce)}return Be===void 0&&(Be=setTimeout(Xe,ne)),pe}return Et.cancel=Bt,Et.flush=ot,Et}function V(ee){var ne=typeof ee;return!!ee&&(ne=="object"||ne=="function")}function Z(ee){return!!ee&&typeof ee=="object"}function X(ee){return typeof ee=="symbol"||Z(ee)&&M.call(ee)==t}function re(ee){if(typeof ee=="number")return ee;if(X(ee))return e;if(V(ee)){var ne=typeof ee.valueOf=="function"?ee.valueOf():ee;ee=V(ne)?ne+"":ne}if(typeof ee!="string")return ee===0?ee:+ee;ee=ee.replace(i,"");var q=o.test(ee);return q||s.test(ee)?a(ee.slice(2),q?2:8):r.test(ee)?e:+ee}return p8=z,p8}var Gme=Nme(),Wme=X6(Gme),Qme=pJ(),_p=X6(Qme),uw={exports:{}},Cj;function qme(){if(Cj)return uw.exports;Cj=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(ee,ne,q){return Function.prototype.apply.call(ee,ne,q)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(ee){return Object.getOwnPropertyNames(ee).concat(Object.getOwnPropertySymbols(ee))}:t=function(ee){return Object.getOwnPropertyNames(ee)};function i(re){console&&console.warn&&console.warn(re)}var r=Number.isNaN||function(ee){return ee!==ee};function o(){o.init.call(this)}uw.exports=o,uw.exports.once=V,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(re){if(typeof re!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof re)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(re){if(typeof re!="number"||re<0||r(re))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+re+".");s=re}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(ee){if(typeof ee!="number"||ee<0||r(ee))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ee+".");return this._maxListeners=ee,this};function c(re){return re._maxListeners===void 0?o.defaultMaxListeners:re._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(ee){for(var ne=[],q=1;q<arguments.length;q++)ne.push(arguments[q]);var le=ee==="error",ue=this._events;if(ue!==void 0)le=le&&ue.error===void 0;else if(!le)return!1;if(le){var ve;if(ne.length>0&&(ve=ne[0]),ve instanceof Error)throw ve;var pe=new Error("Unhandled error."+(ve?" ("+ve.message+")":""));throw pe.context=ve,pe}var Be=ue[ee];if(Be===void 0)return!1;if(typeof Be=="function")e(Be,this,ne);else for(var Ce=Be.length,Oe=P(Be,Ce),q=0;q<Ce;++q)e(Oe[q],this,ne);return!0};function d(re,ee,ne,q){var le,ue,ve;if(a(ne),ue=re._events,ue===void 0?(ue=re._events=Object.create(null),re._eventsCount=0):(ue.newListener!==void 0&&(re.emit("newListener",ee,ne.listener?ne.listener:ne),ue=re._events),ve=ue[ee]),ve===void 0)ve=ue[ee]=ne,++re._eventsCount;else if(typeof ve=="function"?ve=ue[ee]=q?[ne,ve]:[ve,ne]:q?ve.unshift(ne):ve.push(ne),le=c(re),le>0&&ve.length>le&&!ve.warned){ve.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+ve.length+" "+String(ee)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=re,pe.type=ee,pe.count=ve.length,i(pe)}return re}o.prototype.addListener=function(ee,ne){return d(this,ee,ne,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(ee,ne){return d(this,ee,ne,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(re,ee,ne){var q={fired:!1,wrapFn:void 0,target:re,type:ee,listener:ne},le=p.bind(q);return le.listener=ne,q.wrapFn=le,le}o.prototype.once=function(ee,ne){return a(ne),this.on(ee,v(this,ee,ne)),this},o.prototype.prependOnceListener=function(ee,ne){return a(ne),this.prependListener(ee,v(this,ee,ne)),this},o.prototype.removeListener=function(ee,ne){var q,le,ue,ve,pe;if(a(ne),le=this._events,le===void 0)return this;if(q=le[ee],q===void 0)return this;if(q===ne||q.listener===ne)--this._eventsCount===0?this._events=Object.create(null):(delete le[ee],le.removeListener&&this.emit("removeListener",ee,q.listener||ne));else if(typeof q!="function"){for(ue=-1,ve=q.length-1;ve>=0;ve--)if(q[ve]===ne||q[ve].listener===ne){pe=q[ve].listener,ue=ve;break}if(ue<0)return this;ue===0?q.shift():U(q,ue),q.length===1&&(le[ee]=q[0]),le.removeListener!==void 0&&this.emit("removeListener",ee,pe||ne)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(ee){var ne,q,le;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[ee]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[ee]),this;if(arguments.length===0){var ue=Object.keys(q),ve;for(le=0;le<ue.length;++le)ve=ue[le],ve!=="removeListener"&&this.removeAllListeners(ve);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ne=q[ee],typeof ne=="function")this.removeListener(ee,ne);else if(ne!==void 0)for(le=ne.length-1;le>=0;le--)this.removeListener(ee,ne[le]);return this};function M(re,ee,ne){var q=re._events;if(q===void 0)return[];var le=q[ee];return le===void 0?[]:typeof le=="function"?ne?[le.listener||le]:[le]:ne?z(le):P(le,le.length)}o.prototype.listeners=function(ee){return M(this,ee,!0)},o.prototype.rawListeners=function(ee){return M(this,ee,!1)},o.listenerCount=function(re,ee){return typeof re.listenerCount=="function"?re.listenerCount(ee):E.call(re,ee)},o.prototype.listenerCount=E;function E(re){var ee=this._events;if(ee!==void 0){var ne=ee[re];if(typeof ne=="function")return 1;if(ne!==void 0)return ne.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function P(re,ee){for(var ne=new Array(ee),q=0;q<ee;++q)ne[q]=re[q];return ne}function U(re,ee){for(;ee+1<re.length;ee++)re[ee]=re[ee+1];re.pop()}function z(re){for(var ee=new Array(re.length),ne=0;ne<ee.length;++ne)ee[ne]=re[ne].listener||re[ne];return ee}function V(re,ee){return new Promise(function(ne,q){function le(ve){re.removeListener(ee,ue),q(ve)}function ue(){typeof re.removeListener=="function"&&re.removeListener("error",le),ne([].slice.call(arguments))}X(re,ee,ue,{once:!0}),ee!=="error"&&Z(re,le,{once:!0})})}function Z(re,ee,ne){typeof re.on=="function"&&X(re,"error",ee,ne)}function X(re,ee,ne,q){if(typeof re.on=="function")q.once?re.once(ee,ne):re.on(ee,ne);else if(typeof re.addEventListener=="function")re.addEventListener(ee,function le(ue){q.once&&re.removeEventListener(ee,le),ne(ue)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof re)}return uw.exports}var Yme=qme();const bj={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},Vme={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},$me={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},Hme={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var S3={placeholder:Vme,errorNoResults:$me,errorConnectionFailed:Hme};const Zme=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class Xme{constructor(e,t,i=(r,o,s)=>new Lme(r,o,s)){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!=null?r.text:r.place_name,render:r=>{if(!("geometry"in r)){const s=r.text,a=s.toLowerCase().indexOf(this._typeahead.query.toLowerCase()),c=this._typeahead.query.length,d=s.substring(0,a),p=s.substring(a,a+c),v=s.substring(a+c);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+d+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+p+"</span>"+v+"</div></div></div>"}const o=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+o[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+o.splice(1,o.length).join(",")+"</div></div></div>"},popupRender:r=>{const o=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+o[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+o.splice(1,o.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new Yme.EventEmitter,this.options=_p({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e,this.typeaheadFactory=i}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Wme(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=this.typeaheadFactory(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.key==="Escape"&&this.options.clearAndBlurOnEsc){this._clear(e),this._inputEl.blur();return}const t=this._inputEl.value;if(!t){this.fresh=!0,e.key!=="Tab"&&this.clear(e),this._clearEl.style.display="none";return}if(!(e.metaKey||e.key==="Tab"||e.key==="Escape"||e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown")){if(e.key==="Enter")if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(t);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(t,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){var e;const t=this._typeahead.selected;if(t){if(!("geometry"in t)){t.placeId?this._geocode(t.placeId,!0,!0):this._geocode(t.text,!0);return}if(JSON.stringify(t)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let i;if(this._removeResultMarkers(),t.properties&&bj[t.properties.short_code])i=_p({},this.options.flyTo),this._map&&this._map.fitBounds(bj[t.properties.short_code].bbox,i);else if(t.bbox){const r=t.bbox;i=_p({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],i)}else{const r={zoom:this.options.zoom};i=_p({},r,this.options.flyTo),t.center?i.center=t.center:((e=t.geometry)===null||e===void 0?void 0:e.type)==="Point"&&t.geometry.coordinates&&(i.center=t.geometry.coordinates),this._map&&this._map.flyTo(i)}}this.options.marker&&this._maplibregl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:t})}}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return c8(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&Zme.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return c8(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const d=yield a;s.features=s.features?d.concat(s.features):d}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=Array.isArray(s.place)?s.place:[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return c8(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=jme.language(this.options.language.split(",")[0]);return this.options.language&&S3?.[e][t]?S3[e][t]:S3[e].en}_fitBoundsForMarkers(){var e;if(this._typeahead.data.length<1)return;const t=this._typeahead.data.filter(i=>typeof i!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=_p({},{padding:100},this.options.flyTo),o=new this._maplibregl.LngLatBounds;for(const s of t)"geometry"in s&&((e=s.geometry)===null||e===void 0?void 0:e.type)==="Point"&&o.extend(s.geometry.coordinates);this._map.fitBounds(o,r)}return t.length>0&&this._maplibregl&&this._handleResultMarkers(t),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.options.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){var t;if(!this._map)return;this._removeMarker();const r=_p({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let o=null;if(this.options.popup){const a=_p({},{},this.options.popup);o=new this._maplibregl.Popup(a).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)):((t=e.geometry)===null||t===void 0?void 0:t.type)==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(o)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=_p({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=_p(i,{element:o}));const s=new this._maplibregl.Marker(_p({},i,{element:o}));let a;if(this.options.popup){const d=_p({},{},this.options.popup);a=new this._maplibregl.Popup(d).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Yt(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="312eae534e4d7d43f508a7777880c15ad21e9eb4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:90,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:87,column:6},end:{line:89,column:7}},29:{start:{line:88,column:8},end:{line:88,column:39}},30:{start:{line:91,column:4},end:{line:93,column:5}},31:{start:{line:92,column:6},end:{line:92,column:43}},32:{start:{line:94,column:4},end:{line:99,column:5}},33:{start:{line:95,column:6},end:{line:95,column:59}},34:{start:{line:96,column:6},end:{line:98,column:14}},35:{start:{line:97,column:8},end:{line:97,column:36}},36:{start:{line:102,column:20},end:{line:120,column:5}},37:{start:{line:112,column:8},end:{line:114,column:9}},38:{start:{line:113,column:10},end:{line:113,column:50}},39:{start:{line:115,column:8},end:{line:115,column:23}},40:{start:{line:121,column:21},end:{line:121,column:53}},41:{start:{line:122,column:4},end:{line:122,column:53}},42:{start:{line:123,column:16},end:{line:123,column:43}},43:{start:{line:124,column:26},end:{line:128,column:5}},44:{start:{line:125,column:21},end:{line:125,column:36}},45:{start:{line:126,column:19},end:{line:126,column:32}},46:{start:{line:127,column:6},end:{line:127,column:58}},47:{start:{line:129,column:4},end:{line:129,column:20}},48:{start:{line:130,column:4},end:{line:130,column:56}},49:{start:{line:131,column:4},end:{line:131,column:56}},50:{start:{line:132,column:4},end:{line:132,column:62}},51:{start:{line:133,column:21},end:{line:133,column:43}},52:{start:{line:134,column:24},end:{line:134,column:41}},53:{start:{line:135,column:4},end:{line:135,column:45}},54:{start:{line:136,column:16},end:{line:136,column:74}},55:{start:{line:137,column:4},end:{line:137,column:37}},56:{start:{line:138,column:20},end:{line:138,column:49}},57:{start:{line:139,column:17},end:{line:139,column:36}},58:{start:{line:140,column:25},end:{line:142,column:6}},59:{start:{line:143,column:20},end:{line:174,column:6}},60:{start:{line:151,column:8},end:{line:151,column:82}},61:{start:{line:153,column:62},end:{line:153,column:141}},62:{start:{line:155,column:8},end:{line:172,column:9}},63:{start:{line:156,column:10},end:{line:158,column:13}},64:{start:{line:157,column:12},end:{line:157,column:94}},65:{start:{line:159,column:10},end:{line:159,column:25}},66:{start:{line:161,column:10},end:{line:170,column:13}},67:{start:{line:162,column:12},end:{line:169,column:15}},68:{start:{line:171,column:10},end:{line:171,column:25}},69:{start:{line:175,column:4},end:{line:175,column:28}},70:{start:{line:176,column:4},end:{line:184,column:7}},71:{start:{line:177,column:6},end:{line:183,column:9}},72:{start:{line:185,column:4},end:{line:190,column:7}},73:{start:{line:186,column:6},end:{line:186,column:40}},74:{start:{line:186,column:33},end:{line:186,column:40}},75:{start:{line:187,column:6},end:{line:189,column:9}},76:{start:{line:191,column:4},end:{line:193,column:7}},77:{start:{line:192,column:6},end:{line:192,column:30}},78:{start:{line:194,column:4},end:{line:198,column:7}},79:{start:{line:195,column:6},end:{line:197,column:9}},80:{start:{line:199,column:4},end:{line:199,column:37}},81:{start:{line:200,column:4},end:{line:200,column:37}},82:{start:{line:202,column:22},end:{line:205,column:3}},83:{start:{line:203,column:18},end:{line:203,column:82}},84:{start:{line:203,column:66},end:{line:203,column:81}},85:{start:{line:204,column:4},end:{line:204,column:36}},86:{start:{line:207,column:27},end:{line:240,column:5}},87:{start:{line:209,column:25},end:{line:209,column:27}},88:{start:{line:210,column:8},end:{line:235,column:9}},89:{start:{line:211,column:26},end:{line:211,column:138}},90:{start:{line:212,column:27},end:{line:212,column:47}},91:{start:{line:213,column:26},end:{line:213,column:47}},92:{start:{line:214,column:10},end:{line:232,column:11}},93:{start:{line:215,column:27},end:{line:218,column:13}},94:{start:{line:219,column:26},end:{line:230,column:13}},95:{start:{line:231,column:12},end:{line:231,column:33}},96:{start:{line:234,column:10},end:{line:234,column:69}},97:{start:{line:236,column:8},end:{line:238,column:10}},98:{start:{line:241,column:21},end:{line:244,column:6}},99:{start:{line:245,column:4},end:{line:245,column:41}},100:{start:{line:246,column:4},end:{line:246,column:20}},101:{start:{line:249,column:14},end:{line:249,column:26}},102:{start:{line:250,column:4},end:{line:250,column:53}},103:{start:{line:251,column:4},end:{line:251,column:49}},104:{start:{line:252,column:4},end:{line:263,column:6}},105:{start:{line:259,column:10},end:{line:259,column:29}},106:{start:{line:266,column:22},end:{line:266,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:100,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:96,column:17},end:{line:96,column:18}},loc:{start:{line:96,column:23},end:{line:98,column:7}},line:96},11:{name:"(anonymous_11)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:22},end:{line:201,column:3}},line:101},12:{name:"(anonymous_12)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:33},end:{line:116,column:7}},line:111},13:{name:"(anonymous_13)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:32},end:{line:128,column:5}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:150,column:24},end:{line:150,column:25}},loc:{start:{line:150,column:44},end:{line:152,column:7}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:62},end:{line:153,column:141}},line:153},16:{name:"(anonymous_16)",decl:{start:{line:154,column:19},end:{line:154,column:20}},loc:{start:{line:154,column:33},end:{line:173,column:7}},line:154},17:{name:"(anonymous_17)",decl:{start:{line:156,column:36},end:{line:156,column:37}},loc:{start:{line:156,column:42},end:{line:158,column:11}},line:156},18:{name:"(anonymous_18)",decl:{start:{line:161,column:36},end:{line:161,column:37}},loc:{start:{line:161,column:42},end:{line:170,column:11}},line:161},19:{name:"(anonymous_19)",decl:{start:{line:176,column:25},end:{line:176,column:26}},loc:{start:{line:176,column:31},end:{line:184,column:5}},line:176},20:{name:"(anonymous_20)",decl:{start:{line:185,column:19},end:{line:185,column:20}},loc:{start:{line:185,column:26},end:{line:190,column:5}},line:185},21:{name:"(anonymous_21)",decl:{start:{line:191,column:20},end:{line:191,column:21}},loc:{start:{line:191,column:27},end:{line:193,column:5}},line:191},22:{name:"(anonymous_22)",decl:{start:{line:194,column:19},end:{line:194,column:20}},loc:{start:{line:194,column:27},end:{line:198,column:5}},line:194},23:{name:"(anonymous_23)",decl:{start:{line:202,column:22},end:{line:202,column:23}},loc:{start:{line:202,column:30},end:{line:205,column:3}},line:202},24:{name:"(anonymous_24)",decl:{start:{line:203,column:55},end:{line:203,column:56}},loc:{start:{line:203,column:66},end:{line:203,column:81}},line:203},25:{name:"(anonymous_25)",decl:{start:{line:206,column:2},end:{line:206,column:3}},loc:{start:{line:206,column:20},end:{line:247,column:3}},line:206},26:{name:"(anonymous_26)",decl:{start:{line:208,column:22},end:{line:208,column:23}},loc:{start:{line:208,column:40},end:{line:239,column:7}},line:208},27:{name:"(anonymous_27)",decl:{start:{line:248,column:2},end:{line:248,column:3}},loc:{start:{line:248,column:11},end:{line:264,column:3}},line:248},28:{name:"(anonymous_28)",decl:{start:{line:258,column:13},end:{line:258,column:14}},loc:{start:{line:258,column:20},end:{line:260,column:9}},line:258}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:87,column:6},end:{line:89,column:7}},type:"if",locations:[{start:{line:87,column:6},end:{line:89,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},6:{loc:{start:{line:91,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:93,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},7:{loc:{start:{line:91,column:8},end:{line:91,column:98}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:98}}],line:91},8:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},9:{loc:{start:{line:94,column:8},end:{line:94,column:59}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:26}},{start:{line:94,column:30},end:{line:94,column:59}}],line:94},10:{loc:{start:{line:112,column:8},end:{line:114,column:9}},type:"if",locations:[{start:{line:112,column:8},end:{line:114,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},11:{loc:{start:{line:155,column:8},end:{line:172,column:9}},type:"if",locations:[{start:{line:155,column:8},end:{line:172,column:9}},{start:{line:160,column:15},end:{line:172,column:9}}],line:155},12:{loc:{start:{line:186,column:6},end:{line:186,column:40}},type:"if",locations:[{start:{line:186,column:6},end:{line:186,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:186}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AAoNwB;AApNxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAiCA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAGhD,UAAI,KAAK,MAAM,QAAQ,UAAU,OAAO;AACtC,YAAI,OAAO,KAAK,MAAM,OAAO;AAAA,MAC/B;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA;AAAA,MAIT,kBAAkB,CAAC,QAAQ;AACzB,YAAI,IAAI,WAAW,GAAG,GAAG;AACvB,gBAAM,GAAG,OAAO,SAAS,MAAM,GAAG,GAAG;AAAA,QACvC;AACA,eAAO,EAAE,IAAI;AAAA,MACf;AAAA;AAAA;AAAA,MAGA,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,MAAM,OAAO,MAAK,CAAC;AAAA,IAClD;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"312eae534e4d7d43f508a7777880c15ad21e9eb4"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yt=function(){return s},s}Yt();function Jme(n,e,t){Yt().f[0]++;const i=(Yt().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(Yt().s[1]++,Tme(t));Yt().s[2]++,r?(Yt().b[0][0]++,Yt().s[3]++,e.push(r)):Yt().b[0][1]++;const o=(Yt().s[4]++,{});Yt().s[5]++,Object.keys(n.sources).forEach(a=>{Yt().f[1]++;const c=(Yt().s[6]++,n.sources[a]);Yt().s[7]++,Yt().b[2][0]++,c.type!=="raster"&&(Yt().b[2][1]++,c.type!=="raster-dem")?(Yt().b[1][0]++,Yt().s[8]++,o[a]=c):Yt().b[1][1]++});const s=(Yt().s[9]++,{...n,sources:o,layers:[i].concat(e)});return Yt().s[10]++,s}class epe extends En.Component{static defaultProps=(Yt().s[11]++,{onMapLoaded:()=>{Yt().f[2]++},onDataChange:()=>{Yt().f[3]++},onLayerSelect:()=>{Yt().f[4]++},onChange:()=>{Yt().f[5]++},options:{}});container=(Yt().s[12]++,null);constructor(e){Yt().f[6]++,Yt().s[13]++,super(e),Yt().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Yt().s[15]++,nh.on("languageChanged",()=>{Yt().f[7]++,Yt().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){Yt().f[8]++;let i=(Yt().s[17]++,!1);Yt().s[18]++;try{Yt().s[19]++,i=(Yt().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(Yt().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return Yt().s[20]++,i}componentDidUpdate(){Yt().f[9]++;const e=(Yt().s[21]++,this.state.map),t=(Yt().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));Yt().s[23]++,e?(Yt().b[4][0]++,Yt().s[24]++,e.setStyle(t,{diff:!0}),Yt().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,Yt().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,Yt().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector,Yt().s[28]++,this.props.mapView._from==="app"?(Yt().b[5][0]++,Yt().s[29]++,e.jumpTo(this.props.mapView)):Yt().b[5][1]++):Yt().b[4][1]++,Yt().s[30]++,Yt().b[7][0]++,this.state.inspect&&(Yt().b[7][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Yt().b[6][0]++,Yt().s[31]++,this.state.inspect.toggleInspector()):Yt().b[6][1]++,Yt().s[32]++,Yt().b[9][0]++,this.state.inspect&&(Yt().b[9][1]++,this.props.inspectModeEnabled)?(Yt().b[8][0]++,Yt().s[33]++,this.state.inspect.setOriginalStyle(t),Yt().s[34]++,setTimeout(()=>{Yt().f[10]++,Yt().s[35]++,this.state.inspect.render()},500)):Yt().b[8][1]++}componentDidMount(){Yt().f[11]++;const e=(Yt().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,transformRequest:M=>(Yt().f[12]++,Yt().s[37]++,M.startsWith("/")?(Yt().b[10][0]++,Yt().s[38]++,M=`${window.location.origin}${M}`):Yt().b[10][1]++,Yt().s[39]++,{url:M}),localIdeographFontFamily:!1}),t=(Yt().s[40]++,new uce({metadata:!0}));Yt().s[41]++,M2.addProtocol("pmtiles",t.tile);const i=(Yt().s[42]++,new M2.Map(e));Yt().s[43]++;const r=()=>{Yt().f[13]++;const M=(Yt().s[44]++,i.getCenter()),E=(Yt().s[45]++,i.getZoom());Yt().s[46]++,this.props.onChange({center:M,zoom:E,_from:"map"})};Yt().s[47]++,r(),Yt().s[48]++,i.showTileBoundaries=e.showTileBoundaries,Yt().s[49]++,i.showCollisionBoxes=e.showCollisionBoxes,Yt().s[50]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(Yt().s[51]++,this.initGeocoder(i)),s=(Yt().s[52]++,new Bme);Yt().s[53]++,i.addControl(s,"top-right");const a=(Yt().s[54]++,new M2.NavigationControl({visualizePitch:!0}));Yt().s[55]++,i.addControl(a,"top-right");const c=(Yt().s[56]++,document.createElement("div")),d=(Yt().s[57]++,mZ.createRoot(c)),p=(Yt().s[58]++,new M2.Popup({closeOnClick:!1})),v=(Yt().s[59]++,new fU({popup:p,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(M,E)=>(Yt().f[14]++,Yt().s[60]++,Nu(sJ.brightColor(M,E)).desaturate(.5).string()),buildInspectStyle:(M,E)=>(Yt().f[15]++,Yt().s[61]++,Jme(M,E,this.props.highlightedLayer)),renderPopup:M=>(Yt().f[16]++,Yt().s[62]++,this.props.inspectModeEnabled?(Yt().b[11][0]++,Yt().s[63]++,p.once("open",()=>{Yt().f[17]++,Yt().s[64]++,d.render(oe.jsx(mme,{features:M}))}),Yt().s[65]++,c):(Yt().b[11][1]++,Yt().s[66]++,p.once("open",()=>{Yt().f[18]++,Yt().s[67]++,d.render(oe.jsx(hJ,{features:M,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),Yt().s[68]++,c))}));Yt().s[69]++,i.addControl(v),Yt().s[70]++,i.on("style.load",()=>{Yt().f[19]++,Yt().s[71]++,this.setState({map:i,inspect:v,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),Yt().s[72]++,i.on("data",M=>{if(Yt().f[20]++,Yt().s[73]++,M.dataType!=="tile"){Yt().b[12][0]++,Yt().s[74]++;return}else Yt().b[12][1]++;Yt().s[75]++,this.props.onDataChange({map:this.state.map})}),Yt().s[76]++,i.on("error",M=>{Yt().f[21]++,Yt().s[77]++,console.log("ERROR",M)}),Yt().s[78]++,i.on("zoom",M=>{Yt().f[22]++,Yt().s[79]++,this.setState({zoom:i.getZoom()})}),Yt().s[80]++,i.on("dragend",r),Yt().s[81]++,i.on("zoomend",r)}onLayerSelectById=(Yt().s[82]++,e=>{Yt().f[23]++;const t=(Yt().s[83]++,this.props.mapStyle.layers.findIndex(i=>(Yt().f[24]++,Yt().s[84]++,i.id===e)));Yt().s[85]++,this.props.onLayerSelect(t)});initGeocoder(e){Yt().f[25]++;const t=(Yt().s[86]++,{forwardGeocode:async r=>{Yt().f[26]++;const o=(Yt().s[87]++,[]);Yt().s[88]++;try{const s=(Yt().s[89]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(Yt().s[90]++,await fetch(s)),c=(Yt().s[91]++,await a.json());Yt().s[92]++;for(const d of c.features){const p=(Yt().s[93]++,[d.bbox[0]+(d.bbox[2]-d.bbox[0])/2,d.bbox[1]+(d.bbox[3]-d.bbox[1])/2]),v=(Yt().s[94]++,{type:"Feature",geometry:{type:"Point",coordinates:p},place_name:d.properties.display_name,properties:d.properties,text:d.properties.display_name,place_type:["place"],center:p});Yt().s[95]++,o.push(v)}}catch(s){Yt().s[96]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return Yt().s[97]++,{features:o}}}),i=(Yt().s[98]++,new Xme(t,{placeholder:this.props.t("Search"),maplibregl:M2}));return Yt().s[99]++,e.addControl(i,"top-left"),Yt().s[100]++,i}render(){Yt().f[27]++;const e=(Yt().s[101]++,this.props.t);return Yt().s[102]++,this.state.geocoder?.setPlaceholder(e("Search")),Yt().s[103]++,this.state.zoomControl?.setLabel(e("Zoom:")),Yt().s[104]++,oe.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{Yt().f[28]++,Yt().s[105]++,this.container=t},"data-wd-key":"maplibre:map"})}}const tpe=(Yt().s[106]++,So()(epe));var npe=8,ipe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},rpe={"*":{type:"source"}},ope=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],spe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},ape={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},lpe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},upe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},cpe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ape={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},hpe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},dpe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],fpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mpe={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ppe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ype={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vpe={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bpe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_pe={type:"array",value:"*"},xpe={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Mpe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},wpe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Spe={type:"array",value:"*",minimum:1},Epe={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Bpe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Ope={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Ipe={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Tpe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],kpe={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Dpe={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Rpe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Ppe={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Upe={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Lpe={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Kpe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Fpe={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zpe={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},jpe={"*":{type:"string"}},Npe={$version:npe,$root:ipe,sources:rpe,source:ope,source_vector:spe,source_raster:ape,source_raster_dem:lpe,source_geojson:upe,source_video:cpe,source_image:Ape,layer:hpe,layout:dpe,layout_background:fpe,layout_fill:mpe,layout_circle:ppe,layout_heatmap:gpe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:ype,layout_symbol:vpe,layout_raster:Cpe,layout_hillshade:bpe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:_pe,filter_operator:xpe,geometry_type:Mpe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:wpe,expression:Spe,light:Epe,sky:Bpe,terrain:Ope,projection:Ipe,paint:Tpe,paint_fill:kpe,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Dpe,paint_circle:Rpe,paint_heatmap:Ppe,paint_symbol:Upe,paint_raster:Lpe,paint_hillshade:Kpe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Fpe,transition:zpe,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:jpe};const Gpe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Wpe(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return Gpe.forEach(i=>{i in e&&(t[i]=e[i])}),t}function gJ(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Wpe(n[t],e[n[t].ref]));return n}class ag extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class pU{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new pU(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const J6={kind:"null"},ti={kind:"number"},Ao={kind:"string"},no={kind:"boolean"},_g={kind:"color"},eB={kind:"projectionDefinition"},xb={kind:"object"},$r={kind:"value"},Qpe={kind:"error"},tB={kind:"collator"},nB={kind:"formatted"},iB={kind:"padding"},n5={kind:"colorArray"},rB={kind:"numberArray"},hM={kind:"resolvedImage"},oB={kind:"variableAnchorOffsetCollection"};function _f(n,e){return{kind:"array",itemType:n,N:e}}function cl(n){if(n.kind==="array"){const e=cl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const qpe=[J6,ti,Ao,no,_g,eB,nB,xb,_f($r),iB,rB,n5,hM,oB];function i5(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!i5(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of qpe)if(!i5(t,e))return null}}return`Expected ${cl(n)} but found ${cl(e)} instead.`}function gU(n,e){return e.some(t=>t.kind===n.kind)}function Mb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function Xy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const yJ=.96422,vJ=1,CJ=.82521,bJ=4/29,V2=6/29,_J=3*V2*V2,Ype=V2*V2*V2,Vpe=Math.PI/180,$pe=180/Math.PI;function xJ(n){return n=n%360,n<0&&(n+=360),n}function MJ([n,e,t,i]){n=g8(n),e=g8(e),t=g8(t);let r,o;const s=y8((.2225045*n+.7168786*e+.0606169*t)/vJ);n===e&&e===t?r=o=s:(r=y8((.4360747*n+.3850649*e+.1430804*t)/yJ),o=y8((.0139322*n+.0971045*e+.7141733*t)/CJ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function g8(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function y8(n){return n>Ype?Math.pow(n,1/3):n/_J+bJ}function wJ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=vJ*C8(r),o=yJ*C8(o),s=CJ*C8(s),[v8(3.1338561*o-1.6168667*r-.4906146*s),v8(-.9787684*o+1.9161415*r+.033454*s),v8(.0719453*o-.2289914*r+1.4052427*s),i]}function v8(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function C8(n){return n>V2?n*n*n:_J*(n-bJ)}function Hpe(n){const[e,t,i,r]=MJ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?xJ(Math.atan2(i,t)*$pe):NaN,o,e,r]}function Zpe([n,e,t,i]){return n=isNaN(n)?0:n*Vpe,wJ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Xpe([n,e,t,i]){n=xJ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Jpe=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function SJ(n,e){return Jpe(n,e)?n[e]:void 0}function e0e(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=SJ(t0e,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[cw(n.slice(s,s+=o)),cw(n.slice(s,s+=o)),cw(n.slice(s,s+=o)),cw(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,d,p,v,M,E,P,U,z,V]=o,Z=[d||" ",M||" ",U].join("");if(Z==="  "||Z==="  /"||Z===",,"||Z===",,,"){const X=[c,v,P].join(""),re=X==="%%%"?100:X===""?255:0;if(re){const ee=[w2(+a/re,0,1),w2(+p/re,0,1),w2(+E/re,0,1),z?_j(+z,V):1];if(xj(ee))return ee}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,d,p,v,M]=i,E=[s||" ",c||" ",p].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const P=[+o,w2(+a,0,100),w2(+d,0,100),v?_j(+v,M):1];if(xj(P))return Xpe(P)}}}function cw(n){return parseInt(n.padEnd(2,n),16)/255}function _j(n,e){return w2(e?n/100:n,0,1)}function w2(n,e,t){return Math.min(Math.max(e,n),t)}function xj(n){return!n.some(Number.isNaN)}const t0e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wb(n,e,t){return n+t*(e-n)}function r5(n,e,t){return n.map((i,r)=>wb(i,e[r],t))}class Fs{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof Fs)return e;if(typeof e!="string")return;const t=e0e(e);if(t)return new Fs(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",Hpe(this.rgb))}get lab(){return this.overwriteGetter("lab",MJ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=r5(e.rgb,t.rgb,i);return new Fs(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[d,p,v,M]=t.hcl;let E,P;if(!isNaN(o)&&!isNaN(d)){let X=d-o;d>o&&X>180?X-=360:d<o&&o-d>180&&(X+=360),E=o+i*X}else isNaN(o)?isNaN(d)?E=NaN:(E=d,(a===1||a===0)&&(P=p)):(E=o,(v===1||v===0)&&(P=s));const[U,z,V,Z]=Zpe([E,P??wb(s,p,i),wb(a,v,i),wb(c,M,i)]);return new Fs(U,z,V,Z,!1)}case"lab":{const[o,s,a,c]=wJ(r5(e.lab,t.lab,i));return new Fs(o,s,a,c,!1)}}}}Fs.black=new Fs(0,0,0,1);Fs.white=new Fs(1,1,1,1);Fs.transparent=new Fs(0,0,0,0);Fs.red=new Fs(1,0,0,1);class yU{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const n0e=["bottom","center","top"];class wD{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class K1{constructor(e){this.sections=e}static fromString(e){return new K1([new wD(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof K1?e:K1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Rp{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Rp)return e;if(typeof e=="number")return new Rp([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Rp(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Rp(r5(e.values,t.values,i))}}class Pp{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Pp)return e;if(typeof e=="number")return new Pp([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new Pp(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new Pp(r5(e.values,t.values,i))}}class Mf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Mf)return e;if(typeof e=="string"){const i=Fs.parse(e);return i?new Mf([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=Fs.parse(i);if(!r)return;t.push(r)}return new Mf(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(Fs.interpolate(e.values[s],t.values[s],i,r));return new Mf(o)}}class xl extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const i0e=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class xg{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof xg)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!i0e.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new xg(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new xl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new xl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,d]=r[a+1],[p,v]=o[a+1];s.push([wb(c,p,i),wb(d,v,i)])}return new xg(s)}}class Gv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Gv({name:e,available:!1}):null}}class Op{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new Op(e,t,i)}static parse(e){if(e instanceof Op)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Op(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Op(e.from,e.to,e.transition);if(typeof e=="string")return new Op(e,e,1)}}function EJ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function o5(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Op||n instanceof Fs||n instanceof yU||n instanceof K1||n instanceof Rp||n instanceof Pp||n instanceof Mf||n instanceof xg||n instanceof Gv)return!0;if(Array.isArray(n)){for(const e of n)if(!o5(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!o5(n[e]))return!1;return!0}else return!1}function Qu(n){if(n===null)return J6;if(typeof n=="string")return Ao;if(typeof n=="boolean")return no;if(typeof n=="number")return ti;if(n instanceof Fs)return _g;if(n instanceof Op)return eB;if(n instanceof yU)return tB;if(n instanceof K1)return nB;if(n instanceof Rp)return iB;if(n instanceof Pp)return rB;if(n instanceof Mf)return n5;if(n instanceof xg)return oB;if(n instanceof Gv)return hM;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Qu(i);if(!t)t=r;else{if(t===r)continue;t=$r;break}}return _f(t||$r,e)}else return xb}function S4(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Fs||n instanceof Op||n instanceof K1||n instanceof Rp||n instanceof Pp||n instanceof Mf||n instanceof xg||n instanceof Gv?n.toString():JSON.stringify(n)}class yx{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!o5(e[1]))return t.error("invalid value");const i=e[1];let r=Qu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new yx(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Aw={string:Ao,number:ti,boolean:no,object:xb};class Ip{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const d=e[1];if(typeof d!="string"||!(d in Aw)||d==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=Aw[d],i++}else a=$r;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=_f(a,c)}else{if(!Aw[o])throw new Error(`Types doesn't contain name = ${o}`);r=Aw[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,$r);if(!a)return null;s.push(a)}return new Ip(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(i5(this.type,Qu(i))){if(t===this.args.length-1)throw new xl(`Expected value to be of type ${cl(this.type)}, but found ${cl(Qu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Mj={"to-boolean":no,"to-color":_g,"to-number":ti,"to-string":Ao};class pv{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!Mj[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=Mj[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,$r);if(!a)return null;o.push(a)}return new pv(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Fs)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=EJ(t[0],t[1],t[2],t[3]),!i))return new Fs(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new xl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=Rp.parse(t);if(r)return r}throw new xl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Pp.parse(t);if(r)return r}throw new xl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=Mf.parse(t);if(r)return r}throw new xl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=xg.parse(t);if(r)return r}throw new xl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new xl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return K1.fromString(S4(this.args[0].evaluate(e)));case"resolvedImage":return Gv.fromString(S4(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return S4(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const r0e=["Unknown","Point","LineString","Polygon"];class BJ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?r0e[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Fs.parse(e),this._parseColorCache.set(e,t)),t}}class sB{constructor(e,t,i=[],r,o=new pU,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new Ip(o,[r]):s==="coerce"?new pv(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof yx)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new BJ;try{s=new yx(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new sB(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new ag(i,e))}checkSubtype(e,t){const i=i5(e,t);return i&&this.error(i),i}}class aB{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new aB(i,r):null}outputDefined(){return this.result.outputDefined()}}class lB{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new lB(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class vU{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ti),r=t.parse(e[2],2,_f(t.expectedType||$r));if(!i||!r)return null;const o=r.type;return new vU(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new xl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new xl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new xl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class CU{constructor(e,t){this.type=no,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,$r),r=t.parse(e[2],2,$r);return!i||!r?null:gU(i.type,[no,Ao,ti,J6,$r])?new CU(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${cl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Mb(t,["boolean","string","number","null"]))throw new xl(`Expected first argument to be of type boolean, string, number or null, but found ${cl(Qu(t))} instead.`);if(!Mb(i,["string","array"]))throw new xl(`Expected second argument to be of type array or string, but found ${cl(Qu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class dE{constructor(e,t,i){this.type=ti,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,$r),r=t.parse(e[2],2,$r);if(!i||!r)return null;if(!gU(i.type,[no,Ao,ti,J6,$r]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${cl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ti);return o?new dE(i,r,o):null}else return new dE(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Mb(t,["boolean","string","number","null"]))throw new xl(`Expected first argument to be of type boolean, string, number or null, but found ${cl(Qu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),Mb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(Mb(i,["array"]))return i.indexOf(t,r);throw new xl(`Expected second argument to be of type array or string, but found ${cl(Qu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class bU{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let d=2;d<e.length-1;d+=2){let p=e[d];const v=e[d+1];Array.isArray(p)||(p=[p]);const M=t.concat(d);if(p.length===0)return M.error("Expected at least one branch label.");for(const P of p){if(typeof P!="number"&&typeof P!="string")return M.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return M.error("Numeric branch labels must be integer values.");if(!i)i=Qu(P);else if(M.checkSubtype(i,Qu(P)))return null;if(typeof o[String(P)]<"u")return M.error("Branch labels must be unique.");o[String(P)]=s.length}const E=t.parse(v,d,r);if(!E)return null;r=r||E.type,s.push(E)}const a=t.parse(e[1],1,$r);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new bU(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Qu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class _U{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,no);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new _U(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class fE{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,$r),r=t.parse(e[2],2,ti);if(!i||!r)return null;if(!gU(i.type,[_f($r),Ao,$r]))return t.error(`Expected first argument to be of type array or string, but found ${cl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ti);return o?new fE(i.type,i,r,o):null}else return new fE(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),Mb(t,["string"]))return[...t].slice(i,r).join("");if(Mb(t,["array"]))return t.slice(i,r);throw new xl(`Expected first argument to be of type array or string, but found ${cl(Qu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function OJ(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new xl("Input is not a number.");return 0}class uB{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ti);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],d=s,p=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',d);const v=t.parse(c,p,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new uB(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=OJ(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function o0e(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var b8,wj;function s0e(){if(wj)return b8;wj=1,b8=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},b8}var a0e=s0e(),l0e=o0e(a0e);class Mg{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=_8(t,e.base,i,r);else if(e.name==="linear")o=_8(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new l0e(s[0],s[1],s[2],s[3]).solve(_8(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const d=r[1];if(typeof d!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:d}}else if(r[0]==="cubic-bezier"){const d=r.slice(1);if(d.length!==4||d.some(p=>typeof p!="number"||p<0||p>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:d}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ti),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=n5?c=_g:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let d=0;d<s.length;d+=2){const p=s[d],v=s[d+1],M=d+3,E=d+4;if(typeof p!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(a.length&&a[a.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const P=t.parse(v,E,c);if(!P)return null;c=c||P.type,a.push([p,P])}return!Xy(c,ti)&&!Xy(c,eB)&&!Xy(c,_g)&&!Xy(c,iB)&&!Xy(c,rB)&&!Xy(c,n5)&&!Xy(c,oB)&&!Xy(c,_f(ti))?t.error(`Type ${cl(c)} is not interpolatable.`):new Mg(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=OJ(t,r),a=t[s],c=t[s+1],d=Mg.interpolationFactor(this.interpolation,r,a,c),p=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wb(p,v,d);case"color":return Fs.interpolate(p,v,d);case"padding":return Rp.interpolate(p,v,d);case"colorArray":return Mf.interpolate(p,v,d);case"numberArray":return Pp.interpolate(p,v,d);case"variableAnchorOffsetCollection":return xg.interpolate(p,v,d);case"array":return r5(p,v,d);case"projectionDefinition":return Op.interpolate(p,v,d)}case"interpolate-hcl":switch(this.type.kind){case"color":return Fs.interpolate(p,v,d,"hcl");case"colorArray":return Mf.interpolate(p,v,d,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Fs.interpolate(p,v,d,"lab");case"colorArray":return Mf.interpolate(p,v,d,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function _8(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class s5{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>i5(r,a.type))?new s5($r,o):new s5(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof Gv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Sj(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function u0e(n,e,t){return e===t}function c0e(n,e,t){return e!==t}function A0e(n,e,t){return e<t}function h0e(n,e,t){return e>t}function d0e(n,e,t){return e<=t}function f0e(n,e,t){return e>=t}function IJ(n,e,t,i){return i.compare(e,t)===0}function m0e(n,e,t,i){return!IJ(n,e,t,i)}function p0e(n,e,t,i){return i.compare(e,t)<0}function g0e(n,e,t,i){return i.compare(e,t)>0}function y0e(n,e,t,i){return i.compare(e,t)<=0}function v0e(n,e,t,i){return i.compare(e,t)>=0}function Gx(n,e,t){const i=n!=="=="&&n!=="!=";return class TJ{constructor(o,s,a){this.type=no,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,$r);if(!c)return null;if(!Sj(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${cl(c.type)}'.`);let d=s.parse(o[2],2,$r);if(!d)return null;if(!Sj(a,d.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${cl(d.type)}'.`);if(c.type.kind!==d.type.kind&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error(`Cannot compare types '${cl(c.type)}' and '${cl(d.type)}'.`);i&&(c.type.kind==="value"&&d.type.kind!=="value"?c=new Ip(d.type,[c]):c.type.kind!=="value"&&d.type.kind==="value"&&(d=new Ip(c.type,[d])));let p=null;if(o.length===4){if(c.type.kind!=="string"&&d.type.kind!=="string"&&c.type.kind!=="value"&&d.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(p=s.parse(o[3],3,tB),!p)return null}return new TJ(c,d,p)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Qu(s),d=Qu(a);if(c.kind!==d.kind||!(c.kind==="string"||c.kind==="number"))throw new xl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${d.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Qu(s),d=Qu(a);if(c.kind!=="string"||d.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const C0e=Gx("==",u0e,IJ),b0e=Gx("!=",c0e,m0e),_0e=Gx("<",A0e,p0e),x0e=Gx(">",h0e,g0e),M0e=Gx("<=",d0e,y0e),w0e=Gx(">=",f0e,v0e);class cB{constructor(e,t,i){this.type=tB,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,no);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,no);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,Ao),!s)?null:new cB(r,o,s)}evaluate(e){return new yU(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class xU{constructor(e,t,i,r,o){this.type=Ao,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ti);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,Ao),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,Ao),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ti),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ti),!c)?null:new xU(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class MU{constructor(e){this.type=nB,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ti),!c))return null;let d=null;if(a["text-font"]&&(d=t.parse(a["text-font"],1,_f(Ao)),!d))return null;let p=null;if(a["text-color"]&&(p=t.parse(a["text-color"],1,_g),!p))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!n0e.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,Ao),!v)return null}const M=r[r.length-1];M.scale=c,M.font=d,M.textColor=p,M.verticalAlign=v}else{const c=t.parse(e[s],1,$r);if(!c)return null;const d=c.type.kind;if(d!=="string"&&d!=="value"&&d!=="null"&&d!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new MU(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Qu(r)===hM?new wD("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new wD(S4(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new K1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class wU{constructor(e){this.type=hM,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Ao);return i?new wU(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Gv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class SU{constructor(e){this.type=ti,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${cl(i.type)} instead.`):new SU(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new xl(`Expected value to be of type string or array, but found ${cl(Qu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const wg=8192;function S0e(n,e){const t=E0e(n[0]),i=O0e(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*wg),Math.round(i*r*wg)]}function EU(n,e){const t=Math.pow(2,e.z),i=(n[0]/wg+e.x)/t,r=(n[1]/wg+e.y)/t;return[B0e(i),I0e(r)]}function E0e(n){return(180+n)/360}function B0e(n){return n*360-180}function O0e(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function I0e(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function dM(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function a5(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function T0e(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function k0e(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function AB(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return U0e(o,r)===0?!1:!!(Ej(n,e,t,i)&&Ej(t,i,n,e))}function D0e(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(AB(n,e,i[r],i[r+1]))return!0;return!1}function Wx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(k0e(n,r[o],r[o+1]))return t;T0e(n,r[o],r[o+1])&&(i=!i)}return i}function R0e(n,e){for(const t of e)if(Wx(n,t))return!0;return!1}function kJ(n,e){for(const t of n)if(!Wx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(D0e(n[t],n[t+1],e))return!1;return!0}function P0e(n,e){for(const t of e)if(kJ(n,t))return!0;return!1}function U0e(n,e){return n[0]*e[1]-n[1]*e[0]}function Ej(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],d=i[1]-t[1],p=r*d-c*o,v=s*d-c*a;return p>0&&v<0||p<0&&v>0}function BU(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=S0e(n[r][s],t);dM(e,a),o.push(a)}i.push(o)}return i}function DJ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=BU(n[r],e,t);i.push(o)}return i}function RJ(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}dM(e,n)}function L0e(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Bj(n,e,t,i){const r=Math.pow(2,i.z)*wg,o=[i.x*wg,i.y*wg],s=[];for(const a of n)for(const c of a){const d=[c.x+o[0],c.y+o[1]];RJ(d,e,t,r),s.push(d)}return s}function Oj(n,e,t,i){const r=Math.pow(2,i.z)*wg,o=[i.x*wg,i.y*wg],s=[];for(const a of n){const c=[];for(const d of a){const p=[d.x+o[0],d.y+o[1]];dM(e,p),c.push(p)}s.push(c)}if(e[2]-e[0]<=r/2){L0e(e);for(const a of s)for(const c of a)RJ(c,e,t,r)}return s}function K0e(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=BU(e.coordinates,i,r),s=Bj(n.geometry(),t,i,r);if(!a5(t,i))return!1;for(const a of s)if(!Wx(a,o))return!1}if(e.type==="MultiPolygon"){const o=DJ(e.coordinates,i,r),s=Bj(n.geometry(),t,i,r);if(!a5(t,i))return!1;for(const a of s)if(!R0e(a,o))return!1}return!0}function F0e(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=BU(e.coordinates,i,r),s=Oj(n.geometry(),t,i,r);if(!a5(t,i))return!1;for(const a of s)if(!kJ(a,o))return!1}if(e.type==="MultiPolygon"){const o=DJ(e.coordinates,i,r),s=Oj(n.geometry(),t,i,r);if(!a5(t,i))return!1;for(const a of s)if(!P0e(a,o))return!1}return!0}class Sb{constructor(e,t){this.type=no,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(o5(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new Sb(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Sb(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Sb(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return K0e(e,this.geometries);if(e.geometryType()==="LineString")return F0e(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class PJ{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function z0e(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=j0e(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function j0e(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const N0e=6378.137,Ij=1/298.257223563,Tj=Ij*(2-Ij),kj=Math.PI/180;class OU{constructor(e){const t=kj*N0e*1e3,i=Math.cos(e*kj),r=1/(1-Tj*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Tj)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let d=e[c][0],p=e[c][1],v=this.wrap(e[c+1][0]-d)*this.kx,M=(e[c+1][1]-p)*this.ky,E=0;(v!==0||M!==0)&&(E=(this.wrap(t[0]-d)*this.kx*v+(t[1]-p)*this.ky*M)/(v*v+M*M),E>1?(d=e[c+1][0],p=e[c+1][1]):E>0&&(d+=v/this.kx*E,p+=M/this.ky*E)),v=this.wrap(t[0]-d)*this.kx,M=(t[1]-p)*this.ky;const P=v*v+M*M;P<i&&(i=P,r=d,o=p,s=c,a=E)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const SD=100,ED=50;function UJ(n,e){return e[0]-n[0]}function mE(n){return n[1]-n[0]+1}function N1(n,e){return n[1]>=n[0]&&n[1]<e}function BD(n,e){if(n[0]>n[1])return[null,null];const t=mE(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function OD(n,e){if(!N1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)dM(t,n[i]);return t}function ID(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)dM(e,i);return e}function Dj(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function IU(n,e,t){if(!Dj(n)||!Dj(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function Ab(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function TU(n,e,t,i,r){const o=Math.min(Ab(n,[t,i],r),Ab(e,[t,i],r)),s=Math.min(Ab(t,[n,e],r),Ab(i,[n,e],r));return Math.min(o,s)}function G0e(n,e,t,i,r){if(!(N1(e,n.length)&&N1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],d=n[a+1];for(let p=i[0];p<i[1];++p){const v=t[p],M=t[p+1];if(AB(c,d,v,M))return 0;s=Math.min(s,TU(c,d,v,M,r))}}return s}function W0e(n,e,t,i,r){if(!(N1(e,n.length)&&N1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function Q0e(n,e,t){if(Wx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,Ab(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function q0e(n,e,t,i){if(!N1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Wx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let d=0,p=c.length,v=p-1;d<p;v=d++){const M=c[v],E=c[d];if(AB(s,a,M,E))return 0;r=Math.min(r,TU(s,a,M,E,i))}}return r}function Rj(n,e){for(const t of n)for(const i of t)if(Wx(i,e,!0))return!0;return!1}function Y0e(n,e,t,i=1/0){const r=ID(n),o=ID(e);if(i!==1/0&&IU(r,o,t)>=i)return i;if(a5(r,o)){if(Rj(n,e))return 0}else if(Rj(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,d=a.length,p=d-1;c<d;p=c++){const v=a[p],M=a[c];for(const E of e)for(let P=0,U=E.length,z=U-1;P<U;z=P++){const V=E[z],Z=E[P];if(AB(v,M,V,Z))return 0;s=Math.min(s,TU(v,M,V,Z,t))}}return s}function Pj(n,e,t,i,r,o){if(!o)return;const s=IU(OD(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function hw(n,e,t,i,r,o,s){if(!o||!s)return;const a=IU(OD(i,o),OD(r,s),t);a<e&&n.push([a,o,s])}function pE(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new PJ([[0,[0,n.length-1],[0,0]]],UJ),a=ID(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const d=c[1],p=e?ED:SD;if(mE(d)<=p){if(!N1(d,n.length))return NaN;if(e){const v=q0e(n,d,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=d[0];v<=d[1];++v){const M=Q0e(n[v],t,i);if(o=Math.min(o,M),o===0)return 0}}else{const v=BD(d,e);Pj(s,o,i,n,a,v[0]),Pj(s,o,i,n,a,v[1])}}return o}function gE(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new PJ([[0,[0,n.length-1],[0,t.length-1]]],UJ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const d=c[1],p=c[2],v=e?ED:SD,M=i?ED:SD;if(mE(d)<=v&&mE(p)<=M){if(!N1(d,n.length)&&N1(p,t.length))return NaN;let E;if(e&&i)E=G0e(n,d,t,p,r),s=Math.min(s,E);else if(e&&!i){const P=n.slice(d[0],d[1]+1);for(let U=p[0];U<=p[1];++U)if(E=Ab(t[U],P,r),s=Math.min(s,E),s===0)return s}else if(!e&&i){const P=t.slice(p[0],p[1]+1);for(let U=d[0];U<=d[1];++U)if(E=Ab(n[U],P,r),s=Math.min(s,E),s===0)return s}else E=W0e(n,d,t,p,r),s=Math.min(s,E)}else{const E=BD(d,e),P=BD(p,i);hw(a,s,r,n,t,E[0],P[0]),hw(a,s,r,n,t,E[0],P[1]),hw(a,s,r,n,t,E[1],P[0]),hw(a,s,r,n,t,E[1],P[1])}}return s}function V0e(n,e){const t=n.geometry(),i=t.flat().map(s=>EU([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new OU(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,gE(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,gE(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,pE(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function $0e(n,e){const t=n.geometry(),i=t.flat().map(s=>EU([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new OU(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,gE(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,gE(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,pE(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function H0e(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=z0e(t).map(s=>s.map(a=>a.map(c=>EU([c.x,c.y],n.canonical)))),r=new OU(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,pE([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,pE(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Y0e(a,s.coordinates,r,o));break}if(o===0)return o}return o}function x8(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Eb{constructor(e,t){this.type=ti,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(o5(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Eb(i,i.features.map(r=>x8(r.geometry)).flat());if(i.type==="Feature")return new Eb(i,x8(i.geometry));if("type"in i&&"coordinates"in i)return new Eb(i,x8(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return V0e(e,this.geometries);if(e.geometryType()==="LineString")return $0e(e,this.geometries);if(e.geometryType()==="Polygon")return H0e(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class fM{constructor(e){this.type=$r,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new fM(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:SJ(i,this.key)}eachChild(){}outputDefined(){return!1}}const hB={"==":C0e,"!=":b0e,">":x0e,"<":_0e,">=":w0e,"<=":M0e,array:Ip,at:vU,boolean:Ip,case:_U,coalesce:s5,collator:cB,format:MU,image:wU,in:CU,"index-of":dE,interpolate:Mg,"interpolate-hcl":Mg,"interpolate-lab":Mg,length:SU,let:aB,literal:yx,match:bU,number:Ip,"number-format":xU,object:Ip,slice:fE,step:uB,string:Ip,"to-boolean":pv,"to-color":pv,"to-number":pv,"to-string":pv,var:lB,within:Sb,distance:Eb,"global-state":fM};class wf{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=wf.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([d])=>!Array.isArray(d)||d.length===e.length-1);let c=null;for(const[d,p]of a){c=new sB(t.registry,yE,t.path,null,t.scope);const v=[];let M=!1;for(let E=1;E<e.length;E++){const P=e[E],U=Array.isArray(d)?d[E-1]:d.type,z=c.parse(P,1+v.length,U);if(!z){M=!0;break}v.push(z)}if(!M){if(Array.isArray(d)&&d.length!==v.length){c.error(`Expected ${d.length} arguments, but found ${v.length} instead.`);continue}for(let E=0;E<v.length;E++){const P=Array.isArray(d)?d[E]:d.type,U=v[E];c.concat(E+1).checkSubtype(P,U.type)}if(c.errors.length===0)return new wf(i,o,p,v)}}if(a.length===1)t.errors.push(...c.errors);else{const p=(a.length?a:s).map(([M])=>X0e(M)).join(" | "),v=[];for(let M=1;M<e.length;M++){const E=t.parse(e[M],1+v.length);if(!E)return null;v.push(cl(E.type))}t.error(`Expected arguments of type ${p}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){wf.definitions=t;for(const i in t)e[i]=wf}}function Uj(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=EJ(e,t,i,o);if(s)throw new xl(s);return new Fs(e/255,t/255,i/255,o,!1)}function Lj(n,e){return n in e}function M8(n,e){const t=e[n];return typeof t>"u"?null:t}function Z0e(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function qC(n){return{type:n}}wf.register(hB,{error:[Qpe,[Ao],(n,[e])=>{throw new xl(e.evaluate(n))}],typeof:[Ao,[$r],(n,[e])=>cl(Qu(e.evaluate(n)))],"to-rgba":[_f(ti,4),[_g],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[_g,[ti,ti,ti],Uj],rgba:[_g,[ti,ti,ti,ti],Uj],has:{type:no,overloads:[[[Ao],(n,[e])=>Lj(e.evaluate(n),n.properties())],[[Ao,xb],(n,[e,t])=>Lj(e.evaluate(n),t.evaluate(n))]]},get:{type:$r,overloads:[[[Ao],(n,[e])=>M8(e.evaluate(n),n.properties())],[[Ao,xb],(n,[e,t])=>M8(e.evaluate(n),t.evaluate(n))]]},"feature-state":[$r,[Ao],(n,[e])=>M8(e.evaluate(n),n.featureState||{})],properties:[xb,[],n=>n.properties()],"geometry-type":[Ao,[],n=>n.geometryType()],id:[$r,[],n=>n.id()],zoom:[ti,[],n=>n.globals.zoom],"heatmap-density":[ti,[],n=>n.globals.heatmapDensity||0],elevation:[ti,[],n=>n.globals.elevation||0],"line-progress":[ti,[],n=>n.globals.lineProgress||0],accumulated:[$r,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ti,qC(ti),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ti,qC(ti),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ti,overloads:[[[ti,ti],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ti],(n,[e])=>-e.evaluate(n)]]},"/":[ti,[ti,ti],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ti,[ti,ti],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ti,[],()=>Math.LN2],pi:[ti,[],()=>Math.PI],e:[ti,[],()=>Math.E],"^":[ti,[ti,ti],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ti,[ti],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))],log2:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ti,[ti],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ti,[ti],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ti,[ti],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ti,[ti],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ti,[ti],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ti,[ti],(n,[e])=>Math.atan(e.evaluate(n))],min:[ti,qC(ti),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ti,qC(ti),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ti,[ti],(n,[e])=>Math.abs(e.evaluate(n))],round:[ti,[ti],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ti,[ti],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ti,[ti],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[no,[Ao,$r],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[no,[$r],(n,[e])=>n.id()===e.value],"filter-type-==":[no,[Ao],(n,[e])=>n.geometryType()===e.value],"filter-<":[no,[Ao,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[no,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[no,[Ao,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[no,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[no,[Ao,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[no,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[no,[Ao,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[no,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[no,[$r],(n,[e])=>e.value in n.properties()],"filter-has-id":[no,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[no,[_f(Ao)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[no,[_f($r)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[no,[Ao,_f($r)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[no,[Ao,_f($r)],(n,[e,t])=>Z0e(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:no,overloads:[[[no,no],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[qC(no),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:no,overloads:[[[no,no],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[qC(no),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[no,[no],(n,[e])=>!e.evaluate(n)],"is-supported-script":[no,[Ao],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[Ao,[Ao],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[Ao,[Ao],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[Ao,qC($r),(n,e)=>e.map(t=>S4(t.evaluate(n))).join("")],"resolved-locale":[Ao,[tB],(n,[e])=>e.evaluate(n).resolvedLocale()]});function X0e(n){return Array.isArray(n)?`(${n.map(cl).join(", ")})`:`(${cl(n.type)}...)`}function yE(n){if(n instanceof lB)return yE(n.boundExpression);if(n instanceof wf&&n.name==="error")return!1;if(n instanceof cB)return!1;if(n instanceof Sb)return!1;if(n instanceof Eb)return!1;if(n instanceof fM)return!1;const e=n instanceof pv||n instanceof Ip;let t=!0;return n.eachChild(i=>{e?t=t&&yE(i):t=t&&i instanceof yx}),t?kU(n)&&RU(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function kU(n){if(n instanceof wf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Sb||n instanceof Eb)return!1;let e=!0;return n.eachChild(t=>{e&&!kU(t)&&(e=!1)}),e}function DU(n){if(n instanceof wf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!DU(t)&&(e=!1)}),e}function RU(n,e){if(n instanceof wf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!RU(i,e)&&(t=!1)}),t}function TD(n){return{result:"success",value:n}}function S2(n){return{result:"error",value:n}}function J0e(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function ege(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function tge(n){return!!n.expression&&n.expression.interpolated}function LJ(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Qu(n)===xb}class nge{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new BJ,this._defaultValue=t?sge(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new xl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function ige(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in hB}function KJ(n,e){const t=new sB(hB,yE,[],e?oge(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?TD(new nge(i,e)):S2(t.errors)}class Kj{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!DU(t.expression),this.globalStateRefs=dB(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class Fj{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!DU(t.expression),this.globalStateRefs=dB(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?Mg.interpolationFactor(this.interpolationType,e,t,i):0}}function rge(n,e){const t=KJ(n,e);if(t.result==="error")return t;const i=t.value.expression,r=kU(i);if(!r&&!J0e(e))return S2([new ag("","data expressions not supported")]);const o=RU(i,["zoom"]);if(!o&&!ege(e))return S2([new ag("","zoom expressions not supported")]);const s=BS(i);if(!s&&!o)return S2([new ag("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof ag)return S2([s]);if(s instanceof Mg&&!tge(e))return S2([new ag("",'"interpolate" expressions cannot be used with this property')]);if(!s)return TD(r?new Kj("constant",t.value):new Kj("source",t.value));const a=s instanceof Mg?s.interpolation:void 0;return TD(r?new Fj("camera",t.value,s.labels,a):new Fj("composite",t.value,s.labels,a))}function BS(n){let e=null;if(n instanceof aB)e=BS(n.result);else if(n instanceof s5){for(const t of n.args)if(e=BS(t),e)break}else(n instanceof uB||n instanceof Mg)&&n.input instanceof wf&&n.input.name==="zoom"&&(e=n);return e instanceof ag||n.eachChild(t=>{const i=BS(t);i instanceof ag?e=i:!e&&i?e=new ag("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new ag("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function dB(n,e=new Set){return n instanceof fM&&e.add(n.key),n.eachChild(t=>{dB(t,e)}),e}function oge(n){const e={color:_g,string:Ao,number:ti,enum:Ao,boolean:no,formatted:nB,padding:iB,numberArray:rB,colorArray:n5,projectionDefinition:eB,resolvedImage:hM,variableAnchorOffsetCollection:oB};return n.type==="array"?_f(e[n.value]||$r,n.length):e[n.type]}function sge(n){if(n.type==="color"&&LJ(n.default))return new Fs(0,0,0,0);switch(n.type){case"color":return Fs.parse(n.default)||null;case"padding":return Rp.parse(n.default)||null;case"numberArray":return Pp.parse(n.default)||null;case"colorArray":return Mf.parse(n.default)||null;case"variableAnchorOffsetCollection":return xg.parse(n.default)||null;case"projectionDefinition":return Op.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function FJ(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!FJ(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const age={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function lge(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};FJ(n)||(n=vE(n));const e=KJ(n,age);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=zJ(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>dB(e.value.expression)}}}function uge(n,e){return n<e?-1:n>e?1:0}function zJ(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(zJ(n[e]))return!0;return!1}function vE(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?w8(n[1],n[2],"=="):e==="!="?dw(w8(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?w8(n[1],n[2],e):e==="any"?cge(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(vE)):e==="none"?["all"].concat(n.slice(1).map(vE).map(dw)):e==="in"?zj(n[1],n.slice(2)):e==="!in"?dw(zj(n[1],n.slice(2))):e==="has"?jj(n[1]):e==="!has"?dw(jj(n[1])):!0}function w8(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function cge(n){return["any"].concat(n.map(vE))}function zj(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(uge)]]:["filter-in-small",n,["literal",e]]}}function jj(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function dw(n){return["!",n]}function l5(n){return typeof n=="object"?["literal",n]:n}function Age(n,e){let t=n.stops;if(!t)return hge(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],pge(s[1])]:[s[0],l5(s[1])]),i?dge(n,e,t):o?mge(n,e,t):kD(n,e,t)}function hge(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,l5(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function PU(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function dge(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],d=c[0].zoom;i[d]===void 0&&(i[d]={zoom:d,type:n.type,property:n.property,default:n.default},r[d]=[],o.push(d)),r[d].push([c[0].value,c[1]])}if(LU({},e)==="exponential"){const a=[PU(n),["linear"],["zoom"]];for(const c of o){const d=kD(i[c],e,r[c]);$2(a,c,d,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const d=kD(i[c],e,r[c]);$2(a,c,d,!0)}return UU(a),a}}function fge(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Nj(n,e){const t=l5(fge(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function kD(n,e,t){const i=LU(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(Nj(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)$2(o,s[0],s[1],!1);return o.push(Nj(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)$2(o,s[0],s[1],!0);return UU(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,l5(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[PU(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)$2(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,l5(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function mge(n,e,t,i=["zoom"]){const r=LU(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[PU(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)$2(o,a[0],a[1],s);return UU(o),o}function UU(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function $2(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function LU(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function pge(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const gge=Npe;var Gj={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},E3=" ",Wj=/(italic|oblique)$/i,Qj={};function DD(n,e,t){var i=Qj[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,d=0,p=n.length;d<p;++d){var v=n[d],M=v.split(" "),E=M[M.length-1].toLowerCase();E=="normal"||E=="italic"||E=="oblique"?(o=c?o:E,c=!0,M.pop(),E=M[M.length-1].toLowerCase()):Wj.test(E)&&(E=E.replace(Wj,""),o=c?o:M[M.length-1].replace(E,""),c=!0);for(var P in Gj){var U=M.length>1?M[M.length-2].toLowerCase():"";if(E==P||E==P.replace("-","")||U+"-"+E==P){r=a?r:Gj[P],M.pop(),U&&P.startsWith(U)&&M.pop();break}}!a&&typeof E=="number"&&(r=E,a=!0);var z=M.join(E3).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");z.indexOf(E3)!==-1&&(z='"'+z+'"'),s.push(z)}i=Qj[n]=[o,r,s]}return i[0]+E3+i[1]+E3+e+"px"+(t?"/"+t:"")+E3+i[2]}const Sd={ADD:"add",REMOVE:"remove"},vx={PROPERTYCHANGE:"propertychange"},Mr={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class mM{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function yge(n,e,t){let i,r;t=t||Sg;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function Sg(n,e){return n>e?1:n<e?-1:0}function vge(n,e){return n<e?1:n>e?-1:0}function fB(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function Cge(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Eg(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Wv(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function bge(n,e,t){const i=e||Sg;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function u5(){return!0}function mB(){return!1}function c5(){}function jJ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!Wv(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function Cx(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function pM(n){for(const e in n)delete n[e]}function Rv(n){let e;for(e in n)return!1;return!e}class Yp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class gM extends mM{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new Yp(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let d=0,p=r.length;d<p;++d)if("handleEvent"in r[d]?c=r[d].handleEvent(o):c=r[d].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let d=a[i];for(delete a[i];d--;)this.removeEventListener(i,c5);delete s[i]}return c}disposeInternal(){this.listeners_&&pM(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=c5,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function qo(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function CE(n,e,t,i){return qo(n,e,t,i,!0)}function xa(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),pM(n))}class yM extends gM{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Mr.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=qo(this,e[o],t);return r}return qo(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=CE(this,e[o],t)}else i=CE(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)_ge(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}yM.prototype.on;yM.prototype.once;yM.prototype.un;function _ge(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)xa(n[e]);else xa(n)}function Br(){throw new Error("Unimplemented abstract method.")}let xge=0;function zr(n){return n.ol_uid||(n.ol_uid=String(++xge))}class qj extends Yp{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Vp extends yM{constructor(e){super(),this.on,this.once,this.un,zr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new qj(i,e,t)),i=vx.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new qj(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Rv(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Yj={LENGTH:"length"};class fw extends Yp{constructor(e,t,i){super(e),this.element=t,this.index=i}}class _m extends Vp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Yj.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new fw(Sd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new fw(Sd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new fw(Sd.REMOVE,r,e)),this.dispatchEvent(new fw(Sd.ADD,t,e))}updateLength_(){this.set(Yj.LENGTH,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let r=0,o=i.length;r<o;++r)if(i[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}class E2 extends Yp{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class av extends E2{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Yl={SINGLECLICK:"singleclick",CLICK:Mr.CLICK,DBLCLICK:Mr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Kb=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Mge=Kb.includes("safari")&&!Kb.includes("chrom");Mge&&(Kb.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Kb));const wge=Kb.includes("webkit")&&!Kb.includes("edge"),NJ=Kb.includes("macintosh"),Sge=typeof devicePixelRatio<"u"?devicePixelRatio:1,XA=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,GJ=typeof Image<"u"&&Image.prototype.decode,Ege=typeof createImageBitmap=="function",WJ=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),RD={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class Bge extends gM{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=qo(i,RD.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=qo(i,RD.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Mr.TOUCHMOVE,this.boundHandleTouchMove_,WJ?{passive:!1}:!1)}emulateClick_(e){let t=new av(Yl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new av(Yl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new av(Yl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Yl.POINTERUP||t.type==Yl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Yl.POINTERDOWN||t.type==Yl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new av(Yl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(xa),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new av(Yl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(qo(i,Yl.POINTERMOVE,this.handlePointerMove_,this),qo(i,Yl.POINTERUP,this.handlePointerUp_,this),qo(this.element_,Yl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(qo(this.element_.getRootNode(),Yl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new av(Yl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new av(Yl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(xa(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Mr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(xa(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(xa),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const O1={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},qA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ai={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Os(n,e){if(!n)throw new Error(e)}const bE=1/0;class Oge{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,pM(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Os(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=bE?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),p=d<r&&i[d]<i[c]?d:c;t[e]=t[p],i[e]=i[p],e=p}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==bE?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class QJ extends Oge{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Mr.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ai.LOADED||i===ai.ERROR||i===ai.EMPTY){i!==ai.ERROR&&t.removeEventListener(Mr.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===ai.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function Ige(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return bE;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const ll={ANIMATING:0,INTERACTING:1},xp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ml(n,e,t){return Math.min(Math.max(n,e),t)}function Tge(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return Bb(n,e,t,i)}function Bb(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function kge(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let d=i;d<e+1;d++)i==d?n[a][d]=0:n[a][d]+=c*n[i][d]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Vj(n){return n*180/Math.PI}function Bv(n){return n*Math.PI/180}function Ob(n,e){const t=n%e;return t*e<0?t+e:t}function yf(n,e,t){return n+t*(e-n)}function pB(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function mw(n,e){return Math.floor(pB(n,e))}function gv(n,e){return Math.ceil(pB(n,e))}function PD(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function $j(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,d=e?0:o[1]*r,p=a?a[0]:0,v=a?a[1]:0;let M=n[0]+c/2+p,E=n[2]-c/2+p,P=n[1]+d/2+v,U=n[3]-d/2+v;M>E&&(M=(E+M)/2,E=M),P>U&&(P=(U+P)/2,U=P);let z=Ml(i[0],M,E),V=Ml(i[1],P,U);if(s&&t&&r){const Z=30*r;z+=-Z*Math.log(1+Math.max(0,M-i[0])/Z)+Z*Math.log(1+Math.max(0,i[0]-E)/Z),V+=-Z*Math.log(1+Math.max(0,P-i[1])/Z)+Z*Math.log(1+Math.max(0,i[1]-U)/Z)}return[z,V]})}function Dge(n){return n}const qc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function UD(n){const e=Tm();for(let t=0,i=n.length;t<i;++t)E4(e,n[t]);return e}function Rge(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return G1(i,r,o,s,t)}function Ov(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function qJ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Zb(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Fb(n,e){return KU(n,e[0],e[1])}function dg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function KU(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function LD(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=qc.UNKNOWN;return s<t?c=c|qc.LEFT:s>r&&(c=c|qc.RIGHT),a<i?c=c|qc.BELOW:a>o&&(c=c|qc.ABOVE),c===qc.UNKNOWN&&(c=qc.INTERSECTING),c}function Tm(){return[1/0,1/0,-1/0,-1/0]}function G1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Qx(n){return G1(1/0,1/0,-1/0,-1/0,n)}function YJ(n,e){const t=n[0],i=n[1];return G1(t,i,t,i,e)}function FU(n,e,t,i,r){const o=Qx(r);return $J(o,n,e,t,i)}function W1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function VJ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function E4(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function $J(n,e,t,i,r){for(;t<i;t+=r)Pge(n,e[t],e[t+1]);return n}function Pge(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function HJ(n,e){let t;return t=e(gB(n)),t||(t=e(yB(n)),t)||(t=e(vB(n)),t)||(t=e($1(n)),t)?t:!1}function KD(n){let e=0;return Xb(n)||(e=Jo(n)*qu(n)),e}function gB(n){return[n[0],n[1]]}function yB(n){return[n[2],n[1]]}function Of(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Uge(n,e){let t;if(e==="bottom-left")t=gB(n);else if(e==="bottom-right")t=yB(n);else if(e==="top-left")t=$1(n);else if(e==="top-right")t=vB(n);else throw new Error("Invalid corner");return t}function _E(n,e,t,i,r){const[o,s,a,c,d,p,v,M]=ZJ(n,e,t,i);return G1(Math.min(o,a,d,v),Math.min(s,c,p,M),Math.max(o,a,d,v),Math.max(s,c,p,M),r)}function ZJ(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,d=r*a,p=o*s,v=o*a,M=n[0],E=n[1];return[M-c+v,E-d-p,M-c-v,E-d+p,M+c-v,E+d+p,M+c+v,E+d-p,M-c+v,E-d-p]}function qu(n){return n[3]-n[1]}function Fp(n,e,t){const i=t||Tm();return Hl(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Qx(i),i}function $1(n){return[n[0],n[3]]}function vB(n){return[n[2],n[3]]}function Jo(n){return n[2]-n[0]}function Hl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Xb(n){return n[2]<n[0]||n[3]<n[1]}function Lge(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function Kge(n,e,t){let i=!1;const r=LD(n,e),o=LD(n,t);if(r===qc.INTERSECTING||o===qc.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],d=n[3],p=e[0],v=e[1],M=t[0],E=t[1],P=(E-v)/(M-p);let U,z;o&qc.ABOVE&&!(r&qc.ABOVE)&&(U=M-(E-d)/P,i=U>=s&&U<=c),!i&&o&qc.RIGHT&&!(r&qc.RIGHT)&&(z=E-(M-c)*P,i=z>=a&&z<=d),!i&&o&qc.BELOW&&!(r&qc.BELOW)&&(U=M-(E-a)/P,i=U>=s&&U<=c),!i&&o&qc.LEFT&&!(r&qc.LEFT)&&(z=E-(M-s)*P,i=z>=a&&z<=d)}return i}function XJ(n,e,t,i){if(Xb(n))return Qx(t);let r=[];if(i>1){const a=n[2]-n[0],c=n[3]-n[1];for(let d=0;d<i;++d)r.push(n[0]+a*d/i,n[1],n[2],n[1]+c*d/i,n[2]-a*d/i,n[3],n[0],n[3]-c*d/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return Rge(o,s,t)}function JJ(n,e){const t=e.getExtent(),i=Of(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=Jo(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function eee(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];JJ(n,e);const r=Jo(i);if(Jo(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function Fge(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function xE(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function zU(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function zge(n,e){return n[0]*=e,n[1]*=e,n}function jge(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function Nge(n,e){return Math.sqrt(jge(n,e))}function jU(n,e){if(e.canWrapX()){const t=Jo(e.getExtent()),i=Gge(n,e,t);i&&(n[0]-=i*t)}return n}function Gge(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Jo(i),r=Math.floor((n[0]-i[0])/t)),r}function tee(n){return Math.pow(n,3)}function qx(n){return 1-tee(1-n)}function Wge(n){return 3*n*n-2*n*n*n}function Qge(n){return n}const qge=63710088e-1;function Hj(n,e,t){t=t||qge;const i=Bv(n[1]),r=Bv(e[1]),o=(r-i)/2,s=Bv(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function nee(...n){console.warn(...n)}const Pv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class CB{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Pv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const vM=6378137,R2=Math.PI*vM,Yge=[-R2,-R2,R2,R2],Vge=[-180,-85,180,85],pw=vM*Math.log(Math.tan(Math.PI/2));class Q_ extends CB{constructor(e){super({code:e,units:"m",extent:Yge,global:!0,worldExtent:Vge,getPointResolution:function(t,i){return t/Math.cosh(i[1]/vM)}})}}const Zj=[new Q_("EPSG:3857"),new Q_("EPSG:102100"),new Q_("EPSG:102113"),new Q_("EPSG:900913"),new Q_("http://www.opengis.net/def/crs/EPSG/0/3857"),new Q_("http://www.opengis.net/gml/srs/epsg.xml#3857")];function $ge(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=R2*n[o]/180;let s=vM*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>pw?s=pw:s<-pw&&(s=-pw),e[o+1]=s}return e}function Hge(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/R2,e[o+1]=360*Math.atan(Math.exp(n[o+1]/vM))/Math.PI-90;return e}const Zge=6378137,Xj=[-180,-90,180,90],Xge=Math.PI*Zge/180;class YC extends CB{constructor(e,t){super({code:e,units:"degrees",extent:Xj,axisOrientation:t,global:!0,metersPerUnit:Xge,worldExtent:Xj})}}const Jj=[new YC("CRS:84"),new YC("EPSG:4326","neu"),new YC("urn:ogc:def:crs:OGC:1.3:CRS84"),new YC("urn:ogc:def:crs:OGC:2:84"),new YC("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new YC("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new YC("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let FD={};function Jge(n){return FD[n]||FD[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function e1e(n,e){FD[n]=e}let H2={};function A5(n,e,t){const i=n.getCode(),r=e.getCode();i in H2||(H2[i]={}),H2[i][r]=t}function S8(n,e){return n in H2&&e in H2[n]?H2[n][e]:null}const ME=.9996,Om=.00669438,bB=Om*Om,_B=bB*Om,hb=Om/(1-Om),eN=Math.sqrt(1-Om),bx=(1-eN)/(1+eN),iee=bx*bx,NU=iee*bx,GU=NU*bx,ree=GU*bx,oee=1-Om/4-3*bB/64-5*_B/256,t1e=3*Om/8+3*bB/32+45*_B/1024,n1e=15*bB/256+45*_B/1024,i1e=35*_B/3072,r1e=3/2*bx-27/32*NU+269/512*ree,o1e=21/16*iee-55/32*GU,s1e=151/96*NU-417/128*ree,a1e=1097/512*GU,wE=6378137;function l1e(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/ME/(wE*oee),a=s+r1e*Math.sin(2*s)+o1e*Math.sin(4*s)+s1e*Math.sin(6*s)+a1e*Math.sin(8*s),c=Math.sin(a),d=c*c,p=Math.cos(a),v=c/p,M=v*v,E=M*M,P=1-Om*d,U=Math.sqrt(1-Om*d),z=wE/U,V=(1-Om)/P,Z=hb*p**2,X=Z*Z,re=i/(z*ME),ee=re*re,ne=ee*re,q=ne*re,le=q*re,ue=le*re,ve=a-v/V*(ee/2-q/24*(5+3*M+10*Z-4*X-9*hb))+ue/720*(61+90*M+298*Z+45*E-252*hb-3*X);let pe=(re-ne/6*(1+2*M+Z)+le/120*(5-2*Z+28*M-3*X+8*hb+24*E))/p;return pe=PD(pe+Bv(see(t.number)),-Math.PI,Math.PI),[Vj(pe),Vj(ve)]}const tN=-80,nN=84,u1e=-180,c1e=180;function A1e(n,e,t){n=PD(n,u1e,c1e),e<tN?e=tN:e>nN&&(e=nN);const i=Bv(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,d=Bv(n),p=see(t.number),v=Bv(p),M=wE/Math.sqrt(1-Om*r**2),E=hb*o**2,P=o*PD(d-v,-Math.PI,Math.PI),U=P*P,z=U*P,V=z*P,Z=V*P,X=Z*P,re=wE*(oee*i-t1e*Math.sin(2*i)+n1e*Math.sin(4*i)-i1e*Math.sin(6*i)),ee=ME*M*(P+z/6*(1-a+E)+Z/120*(5-18*a+c+72*E-58*hb))+5e5;let ne=ME*(re+M*s*(U/2+V/24*(5-a+9*E+4*E**2)+X/720*(61-58*a+c+600*E-330*hb)));return t.north||(ne+=1e7),[ee,ne]}function see(n){return(n-1)*6-180+3}const h1e=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function aee(n){let e=0;for(const r of h1e){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function iN(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],d=t[a+1],p=n(c,d,e);i[a]=p[0],i[a+1]=p[1]}return i}}function d1e(n){return aee(n)?new CB({code:n,units:"m"}):null}function f1e(n){const e=aee(n.getCode());return e?{forward:iN(A1e,e),inverse:iN(l1e,e)}:null}const m1e=[f1e],p1e=[d1e];let zD=!0;function lee(n){zD=!1}function WU(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function jD(n){e1e(n.getCode(),n),A5(n,n,WU)}function g1e(n){n.forEach(jD)}function zs(n){if(typeof n!="string")return n;const e=Jge(n);if(e)return e;for(const t of p1e){const i=t(n);if(i)return i}return null}function ND(n,e,t,i){n=zs(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/Pv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=CM(n,zs("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=a(d,d,2);const p=Hj(d.slice(0,2),d.slice(2,4)),v=Hj(d.slice(4,6),d.slice(6,8));r=(p+v)/2}const c=i?Pv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function rN(n){g1e(n),n.forEach(function(e){n.forEach(function(t){e!==t&&A5(e,t,WU)})})}function y1e(n,e,t,i){n.forEach(function(r){e.forEach(function(o){A5(r,o,t),A5(o,r,i)})})}function QU(n,e){return n?typeof n=="string"?zs(n):n:zs(e)}function v1e(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let d=0,p=r;d<p;++d)t[s+d]=d>=c?e[s+d]:a[d]}return t})}function GD(n,e){return lee(),xB(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function E8(n,e){const t=xB(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Ob(i+180,360)-180),t}function HA(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||CM(n,e)===WU)&&t}function CM(n,e){const t=n.getCode(),i=e.getCode();let r=S8(t,i);if(r)return r;let o=null,s=null;for(const c of m1e)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=B8(o.inverse,s.forward);else{const c=S8(t,a);c&&(r=B8(c,s.forward))}else{const c=S8(a,i);c&&(r=B8(o.inverse,c))}return r&&(jD(n),jD(e),A5(n,e,r)),r}function B8(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function zb(n,e){const t=zs(n),i=zs(e);return CM(t,i)}function xB(n,e,t){const i=zb(e,t);if(!i){const r=zs(e).getCode(),o=zs(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}function OS(n,e,t,i){const r=zb(e,t);return XJ(n,r,void 0,i)}let C1e=null;function b1e(){return C1e}function WD(n,e){return n}function B1(n,e){return zD&&!xE(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(zD=!1,nee("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function qU(n,e){return n}function fg(n,e){return n}function _1e(){rN(Zj),rN(Jj),y1e(Jj,Zj,$ge,Hge)}_1e();const uee=new Array(6);function Rd(){return[1,0,0,1,0,0]}function oN(n){return VU(n,1,0,0,1,0,0)}function YU(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],d=e[1],p=e[2],v=e[3],M=e[4],E=e[5];return n[0]=t*c+r*d,n[1]=i*c+o*d,n[2]=t*p+r*v,n[3]=i*p+o*v,n[4]=t*M+r*E+s,n[5]=i*M+o*E+a,n}function VU(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function x1e(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Gu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function O8(n,e,t){return YU(n,VU(uee,e,0,0,t,0,0))}function M1e(n,e,t){return YU(n,VU(uee,1,0,0,1,e,t))}function Og(n,e,t,i,r,o,s,a){const c=Math.sin(o),d=Math.cos(o);return n[0]=i*d,n[1]=r*c,n[2]=-i*c,n[3]=r*d,n[4]=s*i*d-a*i*c+e,n[5]=s*r*c+a*r*d+t,n}function cee(n,e){const t=w1e(e);Os(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function w1e(n){return n[0]*n[3]-n[1]*n[2]}const S1e=[1e5,1e5,1e5,1e5,2,2];function E1e(n){return"matrix("+n.join(", ")+")"}function QD(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function B1e(n,e){const t=QD(n),i=QD(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*S1e[r])!==0)return!1;return!0}function Iv(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const d=n[c],p=n[c+1];o[a++]=r[0]*d+r[2]*p+r[4],o[a++]=r[1]*d+r[3]*p+r[5];for(let v=2;v<s;v++)o[a++]=n[c+v]}return o&&o.length!=a&&(o.length=a),o}function Aee(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),d=o[0],p=o[1];let v=0;for(let M=e;M<t;M+=i){const E=n[M]-d,P=n[M+1]-p;s[v++]=d+E*a-P*c,s[v++]=p+E*c+P*a;for(let U=M+2;U<M+i;++U)s[v++]=n[U]}return s&&s.length!=v&&(s.length=v),s}function O1e(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],d=s[1];let p=0;for(let v=e;v<t;v+=i){const M=n[v]-c,E=n[v+1]-d;a[p++]=c+r*M,a[p++]=d+o*E;for(let P=v+2;P<v+i;++P)a[p++]=n[P]}return a&&a.length!=p&&(a.length=p),a}function I1e(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let d=c+2;d<c+i;++d)s[a++]=n[d]}return s&&s.length!=a&&(s.length=a),s}const sN=Rd(),T1e=[NaN,NaN];class hee extends Vp{constructor(){super(),this.extent_=Tm(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=jJ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Br()}closestPointXY(e,t,i,r){return Br()}containsXY(e,t){return this.closestPointXY(e,t,T1e,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Br()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Qx(t),this.extentRevision_=this.getRevision()}return Lge(this.extent_,e)}rotate(e,t){Br()}scale(e,t,i){Br()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Br()}getType(){return Br()}applyTransform(e){Br()}intersectsExtent(e){return Br()}translate(e,t){Br()}transform(e,t){const i=zs(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),d=i.getWorldExtent(),p=qu(d)/qu(c);Og(sN,d[0],d[3],p,-p,0,0,0);const v=Iv(o,0,o.length,a,sN,s),M=zb(i,t);return M?M(v,v,a):v}:zb(i,t);return this.applyTransform(r),this}}class Jb extends hee{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return FU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Br()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=aN(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Br()}setLayout(e,t,i){let r;if(e)r=aN(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=e_(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Aee(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Of(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();O1e(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();I1e(i,0,i.length,r,e,t,i),this.changed()}}}function e_(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function aN(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function k1e(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Iv(i,0,i.length,r,e,t)}function dee(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const d=n[e]-o,p=n[e+1]-s;r+=c*d-a*p,a=d,c=p}return r/2}function fee(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=dee(n,e,a,i),e=a}return r}function D1e(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=fee(n,e,a,i),e=a[a.length-1]}return r}function lN(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],d=n[t]-a,p=n[t+1]-c;let v;if(d===0&&p===0)v=e;else{const M=((r-a)*d+(o-c)*p)/(d*d+p*p);if(M>1)v=t;else if(M>0){for(let E=0;E<i;++E)s[E]=yf(n[e+E],n[t+E],M);s.length=i;return}else v=e}for(let M=0;M<i;++M)s[M]=n[v+M];s.length=i}function $U(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],d=Bb(o,s,a,c);d>r&&(r=d),o=a,s=c}return r}function HU(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=$U(n,e,a,i,r),e=a}return r}function R1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=HU(n,e,a,i,r),e=a[a.length-1]}return r}function ZU(n,e,t,i,r,o,s,a,c,d,p){if(e==t)return d;let v,M;if(r===0){if(M=Bb(s,a,n[e],n[e+1]),M<d){for(v=0;v<i;++v)c[v]=n[e+v];return c.length=i,M}return d}p=p||[NaN,NaN];let E=e+i;for(;E<t;)if(lN(n,E-i,E,i,s,a,p),M=Bb(s,a,p[0],p[1]),M<d){for(d=M,v=0;v<i;++v)c[v]=p[v];c.length=i,E+=i}else E+=i*Math.max((Math.sqrt(M)-Math.sqrt(d))/r|0,1);if(o&&(lN(n,t-i,e,i,s,a,p),M=Bb(s,a,p[0],p[1]),M<d)){for(d=M,v=0;v<i;++v)c[v]=p[v];c.length=i}return d}function XU(n,e,t,i,r,o,s,a,c,d,p){p=p||[NaN,NaN];for(let v=0,M=t.length;v<M;++v){const E=t[v];d=ZU(n,e,E,i,r,o,s,a,c,d,p),e=E}return d}function P1e(n,e,t,i,r,o,s,a,c,d,p){p=p||[NaN,NaN];for(let v=0,M=t.length;v<M;++v){const E=t[v];d=XU(n,e,E,i,r,o,s,a,c,d,p),e=E[E.length-1]}return d}function U1e(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function MB(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function bM(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=MB(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function mee(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=bM(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function yv(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function h5(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=yv(n,e,c,i,r[o]),e=c}return r.length=o,r}function qD(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:h5(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function wB(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const d=[e,t-i];let p=0;for(;d.length>0;){const v=d.pop(),M=d.pop();let E=0;const P=n[M],U=n[M+1],z=n[v],V=n[v+1];for(let Z=M+i;Z<v;Z+=i){const X=n[Z],re=n[Z+1],ee=Tge(X,re,P,U,z,V);ee>E&&(p=Z,E=ee)}E>r&&(c[(p-e)/i]=1,M+i<p&&d.push(M,p),p+i<v&&d.push(p,v))}for(let v=0;v<a;++v)c[v]&&(o[s++]=n[e+v*i],o[s++]=n[e+v*i+1]);return s}function pee(n,e,t,i,r,o,s,a){for(let c=0,d=t.length;c<d;++c){const p=t[c];s=wB(n,e,p,i,r,o,s),a.push(s),e=p}return s}function eb(n,e){return e*Math.round(n/e)}function L1e(n,e,t,i,r,o,s){if(e==t)return s;let a=eb(n[e],r),c=eb(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let d,p;do if(d=eb(n[e],r),p=eb(n[e+1],r),e+=i,e==t)return o[s++]=d,o[s++]=p,s;while(d==a&&p==c);for(;e<t;){const v=eb(n[e],r),M=eb(n[e+1],r);if(e+=i,v==d&&M==p)continue;const E=d-a,P=p-c,U=v-a,z=M-c;if(E*z==P*U&&(E<0&&U<E||E==U||E>0&&U>E)&&(P<0&&z<P||P==z||P>0&&z>P)){d=v,p=M;continue}o[s++]=d,o[s++]=p,a=d,c=p,d=v,p=M}return o[s++]=d,o[s++]=p,s}function JU(n,e,t,i,r,o,s,a){for(let c=0,d=t.length;c<d;++c){const p=t[c];s=L1e(n,e,p,i,r,o,s),a.push(s),e=p}return s}function K1e(n,e,t,i,r,o,s,a){for(let c=0,d=t.length;c<d;++c){const p=t[c],v=[];s=JU(n,e,p,i,r,o,s,v),a.push(v),e=p[p.length-1]}return s}class d5 extends Jb{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new d5(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($U(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return dee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return yv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=wB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new d5(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=MB(this.flatCoordinates,0,e,this.stride),this.changed()}}class jb extends Jb{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new jb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=Bb(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return YJ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return KU(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=U1e(this.flatCoordinates,0,e,this.stride),this.changed()}}function F1e(n,e,t,i,r){return!HJ(r,function(s){return!db(n,e,t,i,s[0],s[1])})}function db(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const d=n[e],p=n[e+1];c<=o?p>o&&(d-a)*(o-c)-(r-a)*(p-c)>0&&s++:p<=o&&(d-a)*(o-c)-(r-a)*(p-c)<0&&s--,a=d,c=p}return s!==0}function eL(n,e,t,i,r,o){if(t.length===0||!db(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if(db(n,t[s-1],t[s],i,r,o))return!1;return!0}function z1e(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(eL(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function tL(n,e,t,i,r,o,s){let a,c,d,p,v,M,E;const P=r[o+1],U=[];for(let Z=0,X=t.length;Z<X;++Z){const re=t[Z];for(p=n[re-i],M=n[re-i+1],a=e;a<re;a+=i)v=n[a],E=n[a+1],(P<=M&&E<=P||M<=P&&P<=E)&&(d=(P-M)/(E-M)*(v-p)+p,U.push(d)),p=v,M=E}let z=NaN,V=-1/0;for(U.sort(Sg),p=U[0],a=1,c=U.length;a<c;++a){v=U[a];const Z=Math.abs(v-p);Z>V&&(d=(p+v)/2,eL(n,e,t,i,d,P)&&(z=d,V=Z)),p=v}return isNaN(z)&&(z=r[o]),s?(s.push(z,P,V),s):[z,P,V]}function gee(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=tL(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function yee(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function SB(n,e,t,i,r,o){return o=o??$J(Tm(),n,e,t,i),Hl(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:yee(n,e,t,i,function(s,a){return Kge(r,s,a)}):!1}function j1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if(SB(n,e,t[o],i,r))return!0;e=t[o]}return!1}function vee(n,e,t,i,r){return!!(SB(n,e,t,i,r)||db(n,e,t,i,r[0],r[1])||db(n,e,t,i,r[0],r[3])||db(n,e,t,i,r[2],r[1])||db(n,e,t,i,r[2],r[3]))}function Cee(n,e,t,i,r){if(!vee(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(F1e(n,t[o-1],t[o],i,r)&&!SB(n,t[o-1],t[o],i,r))return!1;return!0}function N1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(Cee(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function G1e(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function nL(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function iL(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=nL(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function bee(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!iL(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function SE(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=nL(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&G1e(n,e,a,i),e=a}return e}function YD(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=SE(n,e,t[o],i,r);return e}function _ee(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],d=nL(n,i,c,2);if(o===void 0&&(o=d),d===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class Q1 extends Jb{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Eg(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Q1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(HU(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),XU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return eL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return fee(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),SE(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,h5(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Of(this.getExtent());this.flatInteriorPoint_=tL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new jb(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new d5(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],d=new d5(t.slice(o,c),e);r.push(d),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;iL(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=SE(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=JU(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Q1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Cee(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=bM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function uN(n){if(Xb(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new Q1(o,"XY",[o.length])}function rL(n,e,t,i){const r=Jo(e)/t[0],o=qu(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function oL(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Ml(i,t/2,e*2)}function W1e(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],d=n[n.length-1],p=t?rL(c,t,s,i):c;if(a)return e?oL(r,p,d):Ml(r,d,p);const v=Math.min(p,r),M=Math.floor(fB(n,v,o));return n[M]>p&&M<n.length-1?n[M+1]:n[M]}})}function Q1e(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,d){if(s!==void 0){const p=r?rL(e,r,c,o):e;if(d)return i?oL(s,p,t):Ml(s,t,p);const v=1e-9,M=Math.ceil(Math.log(e/p)/Math.log(n)-v),E=-a*(.5-v)+.5,P=Math.min(p,s),U=Math.floor(Math.log(e/P)/Math.log(n)+E),z=Math.max(M,U),V=e/Math.pow(n,z);return Ml(V,t,p)}})}function cN(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const d=i?rL(n,i,a,r):n;return!t||!c?Ml(o,e,d):oL(o,d,e)}})}function sL(n){if(n!==void 0)return 0}function AN(n){if(n!==void 0)return n}function q1e(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function Y1e(n){const e=Bv(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const xee=42,aL=256,I8=0;class Tp extends Vp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=QU(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&lee(),e.center&&(e.center=B1(e.center,this.projection_)),e.extent&&(e.extent=fg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in xp)delete t[a];this.setProperties(t,!0);const i=$1e(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=V1e(e),o=i.constraint,s=H1e(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=B1(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=B1(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const p=arguments[r];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(r===t){i&&gw(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const d=[];for(;r<t;++r){const p=arguments[r],v={start:o,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||Wge,callback:i};if(p.center&&(v.sourceCenter=s,v.targetCenter=p.center.slice(),s=v.targetCenter),p.zoom!==void 0?(v.sourceResolution=a,v.targetResolution=this.getResolutionForZoom(p.zoom),a=v.targetResolution):p.resolution&&(v.sourceResolution=a,v.targetResolution=p.resolution,a=v.targetResolution),p.rotation!==void 0){v.sourceRotation=c;const M=Ob(p.rotation-c+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=c+M,c=v.targetRotation}Z1e(v)?v.complete=!0:o+=v.duration,d.push(v)}this.animations_.push(d),this.setHint(ll.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ll.ANIMATING]>0}getInteracting(){return this.hints_[ll.INTERACTING]>0}cancelAnimations(){this.setHint(ll.ANIMATING,-this.hints_[ll.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&gw(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const d=e-c.start;let p=c.duration>0?d/c.duration:1;p>=1?(c.complete=!0,p=1):o=!1;const v=c.easing(p);if(c.sourceCenter){const M=c.sourceCenter[0],E=c.sourceCenter[1],P=c.targetCenter[0],U=c.targetCenter[1];this.nextCenter_=c.targetCenter;const z=M+v*(P-M),V=E+v*(U-E);this.targetCenter_=[z,V]}if(c.sourceResolution&&c.targetResolution){const M=v===1?c.targetResolution:c.sourceResolution+v*(c.targetResolution-c.sourceResolution);if(c.anchor){const E=this.getViewportSize_(this.getRotation()),P=this.constraints_.resolution(M,0,E,!0);this.targetCenter_=this.calculateCenterZoom(P,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=M,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const M=v===1?Ob(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+v*(c.targetRotation-c.sourceRotation);if(c.anchor){const E=this.constraints_.rotation(M,!0);this.targetCenter_=this.calculateCenterRotate(E,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=M}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(ll.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&gw(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],zU(i,e-this.getRotation()),Fge(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&WD(e,this.getProjection())}getCenterInternal(){return this.get(xp.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return qU(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Os(t,"The view center is not defined");const i=this.getResolution();Os(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Os(r!==void 0,"The view rotation is not defined"),_E(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(xp.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Jo(e)/t[0],r=qu(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(xp.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=T8(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=fB(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Ml(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Ml(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Os(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Os(!Xb(e),"Cannot fit empty extent provided as `geometry`");const r=fg(e,this.getProjection());i=uN(r)}else if(e.getType()==="Circle"){const r=fg(e.getExtent(),this.getProjection());i=uN(r),i.rotate(this.getRotation(),Of(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,d=-1/0,p=-1/0;for(let v=0,M=o.length;v<M;v+=s){const E=o[v]*i-o[v+1]*r,P=o[v]*r+o[v+1]*i;a=Math.min(a,E),c=Math.min(c,P),d=Math.max(d,E),p=Math.max(p,P)}return[a,c,d,p]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const d=this.getRotation(),p=Math.sin(d),v=Math.cos(d),M=Of(a);M[0]+=(r[1]-r[3])/2*c,M[1]+=(r[0]-r[2])/2*c;const E=M[0]*v-M[1]*p,P=M[1]*v+M[0]*p,U=this.getConstrainedCenter([E,P],c),z=t.callback?t.callback:c5;t.duration!==void 0?this.animateInternal({resolution:c,center:U,duration:t.duration,easing:t.easing},z):(this.targetResolution_=c,this.targetCenter_=U,this.applyTargetState_(!1,!0),gw(z,!0))}centerOn(e,t,i){this.centerOnInternal(B1(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(T8(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=T8(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=WD(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&B1(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=B1(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&B1(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(xp.ROTATION)!==r&&this.set(xp.ROTATION,r),this.get(xp.RESOLUTION)!==s&&(this.set(xp.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(xp.CENTER)||!xE(this.get(xp.CENTER),a))&&this.set(xp.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!xE(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:qx,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ll.INTERACTING,1)}endInteraction(e,t,i){i=i&&B1(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(ll.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function gw(n,e){setTimeout(function(){n(e)},0)}function V1e(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return $j(n.extent,n.constrainOnlyCenter,t)}const e=QU(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,$j(t,!1,!1)}return Dge}function $1e(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:I8,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,d=n.multiWorld!==void 0?n.multiWorld:!1,p=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,v=n.showFullExtent!==void 0?n.showFullExtent:!1,M=QU(n.projection,"EPSG:3857"),E=M.getExtent();let P=n.constrainOnlyCenter,U=n.extent;if(!d&&!U&&M.isGlobal()&&(P=!1,U=E),n.resolutions!==void 0){const z=n.resolutions;t=z[s],i=z[a]!==void 0?z[a]:z[z.length-1],n.constrainResolution?e=W1e(z,p,!P&&U,v):e=cN(t,i,p,!P&&U,v)}else{const V=(E?Math.max(Jo(E),qu(E)):360*Pv.degrees/M.getMetersPerUnit())/aL/Math.pow(2,I8),Z=V/Math.pow(2,28-I8);t=n.maxResolution,t!==void 0?s=0:t=V/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=V/Math.pow(c,a):i=Z),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=Q1e(c,t,i,p,!P&&U,v):e=cN(t,i,p,!P&&U,v)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function H1e(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?Y1e():t===!1?AN:typeof t=="number"?q1e(t):AN}return sL}function Z1e(n){return!(n.sourceCenter&&n.targetCenter&&!xE(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function T8(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const d=a*o-c*s,p=c*o+a*s;return[d,p]}const yw="ol-hidden",X1e="ol-selectable",EB="ol-unselectable",lL="ol-control",hN="ol-collapsed",J1e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),dN=["style","variant","weight","size","lineHeight","family"],VD={normal:400,bold:700},$D=function(n){const e=n.match(J1e);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=dN.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[dN[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in VD&&(t.weight=VD[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function wl(n,e,t,i){let r;return t&&t.length?r=t.shift():XA?r=new class extends OffscreenCanvas{style={}}(n??300,e??150):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let k8;function EE(){return k8||(k8=wl(1,1)),k8}function _M(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function eye(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function tye(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function fN(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Mee(n){for(;n.lastChild;)n.lastChild.remove()}function nye(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}function wee(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function vv(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}class uL extends Vp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)xa(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==c5&&this.listenerKeys.push(qo(e,O1.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class iye extends uL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Mr.CLICK,this.handleClick_.bind(this),!1);const d=t+" "+EB+" "+lL+(this.collapsed_&&this.collapsible_?" "+hN:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=d,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>Cx(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Wv(t,this.renderedAttributions_)){Mee(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(hN),this.collapsed_?fN(this.collapseLabel_,this.label_):fN(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class rye extends uL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(Mr.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+EB+" "+lL,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(yw)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:qx}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(yw);!o&&i===0?this.element.classList.add(yw):o&&i!==0&&this.element.classList.remove(yw)}this.label_.style.transform=r}this.rotation_=i}}class oye extends uL{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",d=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=r,p.setAttribute("type","button"),p.title=c,p.appendChild(typeof s=="string"?document.createTextNode(s):s),p.addEventListener(Mr.CLICK,this.handleClick_.bind(this,i),!1);const v=document.createElement("button");v.className=o,v.setAttribute("type","button"),v.title=d,v.appendChild(typeof a=="string"?document.createTextNode(a):a),v.addEventListener(Mr.CLICK,this.handleClick_.bind(this,-i),!1);const M=t+" "+EB+" "+lL,E=this.element;E.className=M,E.appendChild(p),E.appendChild(v),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:qx})):i.setZoom(o)}}}function sye(n){n=n||{};const e=new _m;return(n.zoom===void 0||n.zoom)&&e.push(new oye(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new rye(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new iye(n.attributionOptions)),e}class aye{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const mN={ACTIVE:"active"};class xM extends Vp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(mN.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(mN.ACTIVE,e)}setMap(e){this.map_=e}}function lye(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Qge,center:n.getConstrainedCenter(r)})}}function cL(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:qx})}class uye extends xM{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Yl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();cL(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function HD(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const cye=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Aye=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},See=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Aye(n):!0},hye=u5,Eee=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(wge&&NJ&&e.ctrlKey)},Bee=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},dye=function(n){const e=n.originalEvent;return NJ?e.metaKey:e.ctrlKey},fye=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Oee=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},D8=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},mye=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class MM extends xM{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Yl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Yl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Yl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Yl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function AL(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class pye extends MM{constructor(e){super({stopDown:mB}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:HD(Bee,mye);this.condition_=e.onFocusOnly?HD(See,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(AL(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();zge(o,a.getResolution()),zU(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:qx})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class gye extends MM{constructor(e){e=e||{},super({stopDown:mB}),this.condition_=e.condition?e.condition:cye,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!D8(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===sL)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return D8(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return D8(e)&&Eee(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class yye extends mM{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Q1([r])}getGeometry(){return this.geometry_}}const q_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class B3 extends Yp{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class vye extends MM{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new yye(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Eee,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new B3(q_.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new B3(t?q_.BOXEND:q_.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new B3(q_.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new B3(q_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new B3(q_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Cye extends vye{constructor(e){e=e||{};const t=e.condition?e.condition:fye;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:qx})}}const VC={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class bye extends xM{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Bee(t)&&Oee(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Mr.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==VC.DOWN||r==VC.LEFT||r==VC.RIGHT||r==VC.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,d=0;r==VC.DOWN?d=-a:r==VC.LEFT?c=-a:r==VC.RIGHT?c=a:d=a;const p=[c,d];zU(p,s.getRotation()),lye(s,p,this.duration_),i.preventDefault(),t=!0}}return!t}}class _ye extends xM{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!dye(t)&&Oee(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Mr.KEYDOWN||e.type==Mr.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();cL(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const xye=40,Mye=300;class wye extends xM{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:hye;this.condition_=e.onFocusOnly?HD(See,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Mr.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=xye;break;case WheelEvent.DOM_DELTA_PAGE:o*=Mye;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ml(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),cL(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Sye extends MM{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mB),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==sL&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(AL(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Eye extends MM{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mB),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,d=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(AL(this.targetPointers))),c.render(),d.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Bye(n){n=n||{};const e=new _m,t=new aye(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new gye),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new uye({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new pye({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new Sye),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new Eye({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new bye),e.push(new _ye({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new wye({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new Cye({duration:n.zoomDuration})),e}const Hs={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Iee extends Vp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Hs.OPACITY]=e.opacity!==void 0?e.opacity:1,Os(typeof t[Hs.OPACITY]=="number","Layer opacity must be a number"),t[Hs.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Hs.Z_INDEX]=e.zIndex,t[Hs.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Hs.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Hs.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Hs.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Ml(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Br()}getLayerStatesArray(e){return Br()}getExtent(){return this.get(Hs.EXTENT)}getMaxResolution(){return this.get(Hs.MAX_RESOLUTION)}getMinResolution(){return this.get(Hs.MIN_RESOLUTION)}getMinZoom(){return this.get(Hs.MIN_ZOOM)}getMaxZoom(){return this.get(Hs.MAX_ZOOM)}getOpacity(){return this.get(Hs.OPACITY)}getSourceState(){return Br()}getVisible(){return this.get(Hs.VISIBLE)}getZIndex(){return this.get(Hs.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Hs.EXTENT,e)}setMaxResolution(e){this.set(Hs.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Hs.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Hs.MAX_ZOOM,e)}setMinZoom(e){this.set(Hs.MIN_ZOOM,e)}setOpacity(e){Os(typeof e=="number","Layer opacity must be a number"),this.set(Hs.OPACITY,e)}setVisible(e){this.set(Hs.VISIBLE,e)}setZIndex(e){this.set(Hs.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Jy={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class uv extends Yp{constructor(e,t){super(e),this.layer=t}}const R8={LAYERS:"layers"};class t_ extends Iee{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(R8.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new _m(i.slice(),{unique:!0}):Os(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new _m(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(xa),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(qo(e,Sd.ADD,this.handleLayersAdd_,this),qo(e,Sd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(xa);pM(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new uv(Jy.ADDLAYER,o))}this.changed()}registerLayerListeners_(e){const t=[qo(e,vx.PROPERTYCHANGE,this.handleLayerChange_,this),qo(e,Mr.CHANGE,this.handleLayerChange_,this)];e instanceof t_&&t.push(qo(e,Jy.ADDLAYER,this.handleLayerGroupAdd_,this),qo(e,Jy.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[zr(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new uv(Jy.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new uv(Jy.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new uv(Jy.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=zr(t);this.listenerKeys_[i].forEach(xa),delete this.listenerKeys_[i],this.dispatchEvent(new uv(Jy.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(R8.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new uv(Jy.REMOVELAYER,i[r]))}this.set(R8.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=Fp(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const xm={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Yx extends Iee{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Hs.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Hs.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(xa(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=qo(e,Mr.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Tp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return hL(r,t.viewState)&&(!o||Hl(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Tp?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Hs.MAP,e)}getMapInternal(){return this.get(Hs.MAP)}setMap(e){this.mapPrecomposeKey_&&(xa(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(xa(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=qo(e,xm.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=qo(this,Mr.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);Os(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Hs.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function hL(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function Tee(n,e,t=0,i=n.length-1,r=Oye){for(;i>t;){if(i-t>600){const c=i-t+1,d=e-t+1,p=Math.log(c),v=.5*Math.exp(2*p/3),M=.5*Math.sqrt(p*v*(c-v)/c)*(d-c/2<0?-1:1),E=Math.max(t,Math.floor(e-d*v/c+M)),P=Math.min(i,Math.floor(e+(c-d)*v/c+M));Tee(n,e,E,P,r)}const o=n[e];let s=t,a=i;for(O3(n,t,e),r(n[i],o)>0&&O3(n,t,i);s<a;){for(O3(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?O3(n,t,a):(a++,O3(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function O3(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function Oye(n,e){return n<e?-1:n>e?1:0}let kee=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Cw(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;Cw(e,c)&&(t.leaf?i.push(a):U8(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!Cw(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(Cw(e,s)){if(t.leaf||U8(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=B2([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,d;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),d=!0),i.leaf){const p=Iye(e,i.children,t);if(p!==-1)return i.children.splice(p,1),o.push(i),this._condense(o),this}!d&&!i.leaf&&U8(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],d=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=B2(e.slice(t,i+1)),Y_(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=B2([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),d=c*Math.ceil(Math.sqrt(s));pN(e,t,i,d,this.compareMinX);for(let p=t;p<=i;p+=d){const v=Math.min(p+d-1,i);pN(e,p,v,c,this.compareMinY);for(let M=p;M<=v;M+=c){const E=Math.min(M+c-1,v);a.children.push(this._build(e,M,E,r-1))}}return Y_(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const d=t.children[c],p=P8(d),v=Dye(e,d)-p;v<s?(s=v,o=p<o?p:o,a=d):v===s&&p<o&&(o=p,a=d)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),n4(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=B2(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,Y_(i,this.toBBox),Y_(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=B2([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Y_(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=t4(e,0,a,this.toBBox),d=t4(e,a,i,this.toBBox),p=Rye(c,d),v=P8(c)+P8(d);p<o?(o=p,r=a,s=v<s?v:s):p===o&&v<s&&(s=v,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:Tye,o=e.leaf?this.compareMinY:kye,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=t4(e,0,t,o),a=t4(e,i-t,i,o);let c=vw(s)+vw(a);for(let d=t;d<i-t;d++){const p=e.children[d];n4(s,e.leaf?o(p):p),c+=vw(s)}for(let d=i-t-1;d>=t;d--){const p=e.children[d];n4(a,e.leaf?o(p):p),c+=vw(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)n4(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Y_(e[t],this.toBBox)}};function Iye(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Y_(n,e){t4(n,0,n.children.length,e,n)}function t4(n,e,t,i,r){r||(r=B2(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];n4(r,n.leaf?i(s):s)}return r}function n4(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Tye(n,e){return n.minX-e.minX}function kye(n,e){return n.minY-e.minY}function P8(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function vw(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Dye(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Rye(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function U8(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Cw(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function B2(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pN(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;Tee(n,s,e,t,r),o.push(e,s,s,t)}}const dL=[NaN,NaN,NaN,0];let L8;function Pye(){return L8||(L8=wl(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),L8}const Uye=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Lye=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Kye=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Fye=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function bw(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function B4(n){throw new Error('failed to parse "'+n+'" as color')}function Dee(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(Lye)||n.match(Uye)||n.match(Kye);if(o){const s=o[4],a=100/255;return[Ml(bw(o[1],a)+.5|0,0,255),Ml(bw(o[2],a)+.5|0,0,255),Ml(bw(o[3],a)+.5|0,0,255),s!==void 0?Ml(bw(s,100),0,1):1]}B4(n)}if(n.startsWith("#")){if(Fye.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,d=o.length;c<d;c+=s){let p=parseInt(o.substring(c,c+s),16);s===1&&(p+=p<<4),a[c/s]=p}return a[3]=a[3]/255,a}B4(n)}const e=Pye();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&B4(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return Dee(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=pB(r[3]/255,3),r}function zye(n){return typeof n=="string"?n:mL(n)}const jye=1024,I3={};let K8=0;function Nye(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function F8(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function z8(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function j8(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function N8(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function gN(n){const e=j8(n[0]),t=j8(n[1]),i=j8(n[2]),r=N8(e*.222488403+t*.716873169+i*.06060791),o=500*(N8(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-N8(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function Gye(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=z8(e),o=z8(e+t/500*Math.cos(i)),s=z8(e-t/200*Math.sin(i)),a=F8(o*3.021973625-r*1.617392459-s*.404875592),c=F8(o*-.943766287+r*1.916279586+s*.027607165),d=F8(o*.069407491-r*.22898585+s*1.159737864);return[Ml(a+.5|0,0,255),Ml(c+.5|0,0,255),Ml(d+.5|0,0,255),n[3]]}function fL(n){if(n==="none")return dL;if(I3.hasOwnProperty(n))return I3[n];if(K8>=jye){let t=0;for(const i in I3)(t++&3)===0&&(delete I3[i],--K8)}const e=Dee(n);e.length!==4&&B4(n);for(const t of e)isNaN(t)&&B4(n);return I3[n]=e,++K8,e}function _x(n){return Array.isArray(n)?n:fL(n)}function mL(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function yN(n){return n[0]>0&&n[1]>0}function Wye(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function JA(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let n_=0;const Dh=1<<n_++,Wo=1<<n_++,Ed=1<<n_++,kp=1<<n_++,Nb=1<<n_++,i4=1<<n_++,_w=Math.pow(2,n_)-1,pL={[Dh]:"boolean",[Wo]:"number",[Ed]:"string",[kp]:"color",[Nb]:"number[]",[i4]:"size"},Qye=Object.keys(pL).map(Number).sort(Sg);function qye(n){return n in pL}function r4(n){const e=[];for(const t of Qye)o4(n,t)&&e.push(pL[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function o4(n,e){return(n&e)===e}function ev(n,e){return n===e}class fc{constructor(e,t){if(!qye(e))throw new Error(`literal expressions must have a specific type, got ${r4(e)}`);this.type=e,this.value=t}}class Yye{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function Ree(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function CA(n,e,t){switch(typeof n){case"boolean":{if(ev(e,Ed))return new fc(Ed,n?"true":"false");if(!o4(e,Dh))throw new Error(`got a boolean, but expected ${r4(e)}`);return new fc(Dh,n)}case"number":{if(ev(e,i4))return new fc(i4,JA(n));if(ev(e,Dh))return new fc(Dh,!!n);if(ev(e,Ed))return new fc(Ed,n.toString());if(!o4(e,Wo))throw new Error(`got a number, but expected ${r4(e)}`);return new fc(Wo,n)}case"string":{if(ev(e,kp))return new fc(kp,fL(n));if(ev(e,Dh))return new fc(Dh,!!n);if(!o4(e,Ed))throw new Error(`got a string, but expected ${r4(e)}`);return new fc(Ed,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return rve(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(ev(e,i4)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new fc(i4,n)}if(ev(e,kp)){if(n.length===3)return new fc(kp,[...n,1]);if(n.length===4)return new fc(kp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!o4(e,Nb))throw new Error(`got an array of numbers, but expected ${r4(e)}`);return new fc(Nb,n)}const Cn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Vye={[Cn.Get]:Sr(so(1,1/0),vN),[Cn.Var]:Sr(so(1,1),$ye),[Cn.Has]:Sr(so(1,1/0),vN),[Cn.Id]:Sr(Hye,V_),[Cn.Concat]:Sr(so(2,1/0),xs(Ed)),[Cn.GeometryType]:Sr(Zye,V_),[Cn.LineMetric]:Sr(V_),[Cn.Resolution]:Sr(G8,V_),[Cn.Zoom]:Sr(G8,V_),[Cn.Time]:Sr(G8,V_),[Cn.Any]:Sr(so(2,1/0),xs(Dh)),[Cn.All]:Sr(so(2,1/0),xs(Dh)),[Cn.Not]:Sr(so(1,1),xs(Dh)),[Cn.Equal]:Sr(so(2,2),xs(_w)),[Cn.NotEqual]:Sr(so(2,2),xs(_w)),[Cn.GreaterThan]:Sr(so(2,2),xs(Wo)),[Cn.GreaterThanOrEqualTo]:Sr(so(2,2),xs(Wo)),[Cn.LessThan]:Sr(so(2,2),xs(Wo)),[Cn.LessThanOrEqualTo]:Sr(so(2,2),xs(Wo)),[Cn.Multiply]:Sr(so(2,1/0),CN),[Cn.Coalesce]:Sr(so(2,1/0),CN),[Cn.Divide]:Sr(so(2,2),xs(Wo)),[Cn.Add]:Sr(so(2,1/0),xs(Wo)),[Cn.Subtract]:Sr(so(2,2),xs(Wo)),[Cn.Clamp]:Sr(so(3,3),xs(Wo)),[Cn.Mod]:Sr(so(2,2),xs(Wo)),[Cn.Pow]:Sr(so(2,2),xs(Wo)),[Cn.Abs]:Sr(so(1,1),xs(Wo)),[Cn.Floor]:Sr(so(1,1),xs(Wo)),[Cn.Ceil]:Sr(so(1,1),xs(Wo)),[Cn.Round]:Sr(so(1,1),xs(Wo)),[Cn.Sin]:Sr(so(1,1),xs(Wo)),[Cn.Cos]:Sr(so(1,1),xs(Wo)),[Cn.Atan]:Sr(so(1,2),xs(Wo)),[Cn.Sqrt]:Sr(so(1,1),xs(Wo)),[Cn.Match]:Sr(so(4,1/0),bN,Jye),[Cn.Between]:Sr(so(3,3),xs(Wo)),[Cn.Interpolate]:Sr(so(6,1/0),bN,eve),[Cn.Case]:Sr(so(3,1/0),Xye,tve),[Cn.In]:Sr(so(2,2),nve),[Cn.Number]:Sr(so(1,1/0),xs(_w)),[Cn.String]:Sr(so(1,1/0),xs(_w)),[Cn.Array]:Sr(so(1,1/0),xs(Wo)),[Cn.Color]:Sr(so(1,4),xs(Wo)),[Cn.Band]:Sr(so(1,3),xs(Wo)),[Cn.Palette]:Sr(so(2,2),ive),[Cn.ToString]:Sr(so(1,1),xs(Dh|Wo|Ed|kp))};function vN(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new fc(Wo,s);break}case"string":{r[o]=new fc(Ed,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function $ye(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new fc(Ed,i)]}function Hye(n,e,t){t.featureId=!0}function Zye(n,e,t){t.geometryType=!0}function G8(n,e,t){t.mapState=!0}function V_(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function so(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function CN(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=CA(n[o+1],e,t);r[o]=s}return r}function xs(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=CA(e[s+1],n,i);o[s]=a}return o}}function Xye(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function bN(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function Jye(n,e,t){const i=n.length-1,r=Ed|Wo|Dh,o=CA(n[1],r,t),s=CA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const d=CA(n[c+2],o.type,t);a[c]=d}catch(d){throw new Error(`failed to parse argument ${c+1} of match expression: ${d.message}`)}try{const d=CA(n[c+3],s.type,t);a[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+2} of match expression: ${d.message}`)}}return[o,...a,s]}function eve(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new fc(Wo,r);let s;try{s=CA(n[2],Wo,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const d=CA(n[c+3],Wo,t);a[c]=d}catch(d){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${d.message}`)}try{const d=CA(n[c+4],e,t);a[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${d.message}`)}}return[o,s,...a]}function tve(n,e,t){const i=CA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=CA(n[o+1],Dh,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=CA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function nve(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Ed}else r=Wo;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=CA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[CA(n[1],r,t),...o]}function ive(n,e,t){let i;try{i=CA(n[1],Wo,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=CA(r[s],kp,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof fc))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function Sr(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new Yye(t,r,...o)}}function rve(n,e,t){const i=n[0],r=Vye[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function Pee(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Pee(n.getGeometries()[0]);default:return""}}function Uee(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function H1(n,e,t){const i=CA(n,e,t);return jp(i)}function jp(n,e){if(n instanceof fc){if(n.type===kp&&typeof n.value=="string"){const i=fL(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case Cn.Number:case Cn.String:case Cn.Coalesce:return ove(n);case Cn.Get:case Cn.Var:case Cn.Has:return sve(n);case Cn.Id:return i=>i.featureId;case Cn.GeometryType:return i=>i.geometryType;case Cn.Concat:{const i=n.args.map(r=>jp(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case Cn.Resolution:return i=>i.resolution;case Cn.Any:case Cn.All:case Cn.Between:case Cn.In:case Cn.Not:return lve(n);case Cn.Equal:case Cn.NotEqual:case Cn.LessThan:case Cn.LessThanOrEqualTo:case Cn.GreaterThan:case Cn.GreaterThanOrEqualTo:return ave(n);case Cn.Multiply:case Cn.Divide:case Cn.Add:case Cn.Subtract:case Cn.Clamp:case Cn.Mod:case Cn.Pow:case Cn.Abs:case Cn.Floor:case Cn.Ceil:case Cn.Round:case Cn.Sin:case Cn.Cos:case Cn.Atan:case Cn.Sqrt:return uve(n);case Cn.Case:return cve(n);case Cn.Match:return Ave(n);case Cn.Interpolate:return hve(n);case Cn.ToString:return dve(n);default:throw new Error(`Unsupported operator ${t}`)}}function ove(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=jp(n.args[o]);switch(t){case Cn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Cn.Number:case Cn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function sve(n,e){const i=n.args[0].value;switch(n.operator){case Cn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const p=o[a].value;s=s[p]}return s};case Cn.Var:return r=>r.variables[i];case Cn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const p=o[a].value;if(!s||!Object.hasOwn(s,p))return!1;s=s[p]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function ave(n,e){const t=n.operator,i=jp(n.args[0]),r=jp(n.args[1]);switch(t){case Cn.Equal:return o=>i(o)===r(o);case Cn.NotEqual:return o=>i(o)!==r(o);case Cn.LessThan:return o=>i(o)<r(o);case Cn.LessThanOrEqualTo:return o=>i(o)<=r(o);case Cn.GreaterThan:return o=>i(o)>r(o);case Cn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function lve(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=jp(n.args[o]);switch(t){case Cn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case Cn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case Cn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case Cn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case Cn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function uve(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=jp(n.args[o]);switch(t){case Cn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case Cn.Divide:return o=>r[0](o)/r[1](o);case Cn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case Cn.Subtract:return o=>r[0](o)-r[1](o);case Cn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case Cn.Mod:return o=>r[0](o)%r[1](o);case Cn.Pow:return o=>Math.pow(r[0](o),r[1](o));case Cn.Abs:return o=>Math.abs(r[0](o));case Cn.Floor:return o=>Math.floor(r[0](o));case Cn.Ceil:return o=>Math.ceil(r[0](o));case Cn.Round:return o=>Math.round(r[0](o));case Cn.Sin:return o=>Math.sin(r[0](o));case Cn.Cos:return o=>Math.cos(r[0](o));case Cn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case Cn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function cve(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=jp(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function Ave(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=jp(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function hve(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=jp(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let d=2;d<t;d+=2){const p=i[d](r);let v=i[d+1](r);const M=Array.isArray(v);if(M&&(v=Nye(v)),p>=s)return d===2?v:M?fve(o,s,a,c,p,v):s4(o,s,a,c,p,v);a=p,c=v}return c}}function dve(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=jp(n.args[o]);if(t===Cn.ToString)return o=>{const s=r[0](o);return n.args[0].type===kp?mL(s):s.toString()};throw new Error(`Unsupported convert operator ${t}`)}function s4(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function fve(n,e,t,i,r,o){if(r-t===0)return i;const a=gN(i),c=gN(o);let d=c[2]-a[2];d>180?d-=360:d<-180&&(d+=360);const p=[s4(n,e,t,a[0],r,c[0]),s4(n,e,t,a[1],r,c[1]),a[2]+s4(n,e,t,0,r,d),s4(n,e,t,i[3],r,o[3])];return Gye(p)}const Qi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class gL extends gM{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?Qi.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Mr.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Qi.IDLE&&this.loader){this.state=Qi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Cx(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||Ege&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Qi.LOADED}).catch(i=>{this.state=Qi.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function mve(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[CE(i,Mr.LOAD,function(){s=!0,o||e()})];return i.src&&GJ?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(CE(i,Mr.ERROR,t)),function(){r=!1,a.forEach(xa)}}function pve(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function gve(n,e){return e&&(n.src=e),n.src&&GJ?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):pve(n)}class yve{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=W8(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=W8(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=W8(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===Qi.IDLE&&r.load(),r.getImageState()===Qi.LOADING?r.ready().then(()=>{this.patternCache_[s]=EE().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=EE().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function W8(n,e,t){const i=t?_x(t):"null";return e+":"+n+":"+i}const Mm=new yve;let T3=null;class Lee extends gM{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Qi.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Qi.LOADED){T3||(T3=wl(1,1,void 0,{willReadFrequently:!0})),T3.drawImage(this.image_,0,0);try{T3.getImageData(0,0,1,1),this.tainted_=!1}catch{T3=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Mr.CHANGE)}handleImageError_(){this.imageState_=Qi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Qi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=wl(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Qi.IDLE){this.image_||this.initializeImage_(),this.imageState_=Qi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&gve(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Qi.LOADED)return;const t=this.image_,i=wl(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=zye(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Qi.LOADED||this.imageState_===Qi.ERROR)e();else{const t=()=>{(this.imageState_===Qi.LOADED||this.imageState_===Qi.ERROR)&&(this.removeEventListener(Mr.CHANGE,t),e())};this.addEventListener(Mr.CHANGE,t)}})),this.ready_}}function BE(n,e,t,i,r,o){let s=e===void 0?void 0:Mm.get(e,t,r);return s||(s=new Lee(n,n&&"src"in n?n.src||void 0:e,t,i,r),Mm.set(e,t,r,s,o)),o&&s&&!Mm.getPattern(e,t,r)&&Mm.set(e,t,r,s,o),s}function mg(n){return n?Array.isArray(n)?mL(n):typeof n=="object"&&"src"in n?vve(n):n:null}function vve(n){if(!n.offset||!n.size)return Mm.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Mm.getPattern(e,void 0,n.color);if(t)return t;const i=Mm.get(n.src,"anonymous",null);if(i.getImageState()!==Qi.LOADED)return null;const r=wl(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),BE(r.canvas,e,void 0,Qi.LOADED,n.color,!0),Mm.getPattern(e,void 0,n.color)}const Kee="10px sans-serif",Bd="#000",xx="round",F1=[],z1=0,Mx="round",f5=10,m5="#000",p5="center",OE="middle",fb=[0,0,0,0],g5=1,rb=new Vp;let k3=null,_N;const ZD={},Cve=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function bve(n,e,t){return`${n} ${e} 16px "${t}"`}const _ve=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=$D(o),c=a.families[0].toLowerCase(),d=a.weight;return s.some(p=>{const v=p.family.replace(/^['"]|['"]$/g,"").toLowerCase(),M=VD[p.weight]||p.weight;return v===c&&p.style===a.style&&M==d})}async function r(){await t.ready;let o=!0;const s=rb.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const d=a[c];let p=s[d];p<100&&(await i(d)?(pM(ZD),rb.set(d,100)):(p+=10,rb.set(d,p,!0),p<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=XA?self.fonts:document.fonts);const s=$D(o);if(!s)return;const a=s.families;let c=!1;for(const d of a){if(Cve.has(d))continue;const p=bve(s.style,s.weight,d);rb.get(p)===void 0&&(rb.set(p,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),xve=(function(){let n;return function(e){let t=ZD[e];if(t==null){if(XA){const i=$D(e),r=Fee(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);ZD[e]=t}return t}})();function Fee(n,e){return k3||(k3=wl(1,1)),n!=_N&&(k3.font=n,_N=k3.font),k3.measureText(e)}function zee(n,e){return Fee(n,e).width}function xN(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,zee(n,o)),0);return t[e]=i,i}function Mve(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let d=0,p=e.length;d<=p;d+=2){const v=e[d];if(v===`
`||d===p){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const M=e[d+1]||n.font,E=zee(M,v);t.push(E),s+=E;const P=xve(M);i.push(P),c=Math.max(c,P)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function wve(n,e,t,i,r,o,s,a,c,d,p){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=v=>v.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,d),n.scale(p[0],p[1]),Sve(i,n)):p[0]<0||p[1]<0?(n.translate(c,d),n.scale(p[0],p[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,d,s*p[0],a*p[1]),n.restore()}function Sve(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class BB{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=JA(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new BB({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Br()}getImage(e){return Br()}getHitDetectionImage(){return Br()}getPixelRatio(e){return 1}getImageState(){return Br()}getImageSize(){return Br()}getOrigin(){return Br()}getSize(){return Br()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=JA(e)}listenImageChange(e){Br()}load(){Br()}unlistenImageChange(e){Br()}ready(){return Promise.resolve()}}class OB extends BB{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Qi.LOADING:Qi.LOADED,this.imageState_===Qi.LOADING&&this.ready().then(()=>this.imageState_=Qi.LOADED),this.render()}clone(){const e=this.getScale(),t=new OB({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=Mm.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=wl(s,s);this.draw_(o,a,e),r=a.canvas,Mm.set(i,null,null,new Lee(r,void 0,null,Qi.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const ne=r;r=o,o=ne}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),d=Math.sqrt(o*o-c*c),p=r-d,v=Math.sqrt(c*c+p*p),M=v/c;if(e==="miter"&&M<=i)return M*t;const E=t/2/M,P=t/2*(p/v),z=Math.sqrt((r+E)*(r+E)+P*P)-r;if(this.radius2_===void 0||e==="bevel")return z*2;const V=r*Math.sin(a),Z=Math.sqrt(r*r-V*V),X=o-Z,ee=Math.sqrt(V*V+X*X)/V;if(ee<=i){const ne=ee*t/2-o-r;return 2*Math.max(z,ne)}return z*2}createRenderOptions(){let e=xx,t=Mx,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=mg(this.stroke_.getColor()??m5),a=this.stroke_.getWidth()??g5,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Mx,e=this.stroke_.getLineCap()??xx,i=this.stroke_.getMiterLimit()??f5);const c=this.calculateLineJoinSize_(t,a,i),d=Math.max(this.radius,this.radius2_||0),p=Math.ceil(2*d+c);return{strokeStyle:s,strokeWidth:a,size:p,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Bd),t.fillStyle=mg(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=_x(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=wl(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,d=a%2===0?i:r;e.lineTo(d*Math.cos(c),d*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Bd,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class wM extends OB{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new wM({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class pg{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new pg({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=BE(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Qi.IDLE&&t.load(),t.getImageState()===Qi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?zr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:_x(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function MN(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class wx extends BB{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;Os(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||zr(s)),Os(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Os(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=Qi.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?Qi.LOADED:Qi.IDLE:c=Qi.LOADING:c=Qi.LOADED),this.color_=e.color!==void 0?_x(e.color):null,this.iconImage_=BE(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let d,p;if(e.size)[d,p]=e.size;else{const v=this.getImage(1);if(v.width&&v.height)d=v.width,p=v.height;else if(v instanceof HTMLImageElement){this.initialOptions_=e;const M=()=>{if(this.unlistenImageChange(M),!this.initialOptions_)return;const E=this.iconImage_.getSize();this.setScale(MN(E[0],E[1],e.width,e.height))};this.listenImageChange(M);return}}d!==void 0&&this.setScale(MN(d,p,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new wx({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=BE(null,e,this.crossOrigin_,Qi.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Qi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Qi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Mr.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Mr.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Cv{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Cv({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class vf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=wN,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new vf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=wN,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Eve(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Os(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let Q8=null;function jee(n,e){if(!Q8){const t=new pg({color:"rgba(255,255,255,0.4)"}),i=new Cv({color:"#3399CC",width:1.25});Q8=[new vf({image:new wM({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Q8}function wN(n){return n.getGeometry()}const Bve="#333";let Nee=class Gee{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=JA(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new pg({color:Bve}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Gee({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof pg?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=JA(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function Ove(n){return!0}function Ive(n){const e=Ree(),t=Tve(n,e),i=Uee();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=Pee(r.getGeometry())),t(i)}}function SN(n){const e=Ree(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=XD(n[s],e);const r=Uee(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const d=s.getId();d!==void 0?r.featureId=d:r.featureId=null}let c=0;for(let d=0;d<t;++d){const p=i[d](r);p&&(o[c]=p,c+=1)}return o.length=c,o}}function Tve(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?H1(o.filter,Dh,e):Ove;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let d=0;d<c;++d)a[d]=XD(o.style[d],e)}else a=[XD(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const d of i[a].styles){const p=d(r);p&&o.push(p)}}}return o}}function XD(n,e){const t=y5(n,"",e),i=v5(n,"",e),r=kve(n,e),o=Dve(n,e),s=Td(n,"z-index",e);if(!t&&!i&&!r&&!o&&!Rv(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new vf;return function(c){let d=!0;if(t){const p=t(c);p&&(d=!1),a.setFill(p)}if(i){const p=i(c);p&&(d=!1),a.setStroke(p)}if(r){const p=r(c);p&&(d=!1),a.setText(p)}if(o){const p=o(c);p&&(d=!1),a.setImage(p)}return s&&a.setZIndex(s(c)),d?null:a}}function y5(n,e,t){let i;if(e+"fill-pattern-src"in n)i=Lve(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=yL(n,e+"fill-color",t)}if(!i)return null;const r=new pg;return function(o){const s=i(o);return s===dL?null:(r.setColor(s),r)}}function v5(n,e,t){const i=Td(n,e+"stroke-width",t),r=yL(n,e+"stroke-color",t);if(!i&&!r)return null;const o=I1(n,e+"stroke-line-cap",t),s=I1(n,e+"stroke-line-join",t),a=Wee(n,e+"stroke-line-dash",t),c=Td(n,e+"stroke-line-dash-offset",t),d=Td(n,e+"stroke-miter-limit",t),p=new Cv;return function(v){if(r){const M=r(v);if(M===dL)return null;p.setColor(M)}if(i&&p.setWidth(i(v)),o){const M=o(v);if(M!=="butt"&&M!=="round"&&M!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(M)}if(s){const M=s(v);if(M!=="bevel"&&M!=="round"&&M!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(M)}return a&&p.setLineDash(a(v)),c&&p.setLineDashOffset(c(v)),d&&p.setMiterLimit(d(v)),p}}function kve(n,e){const t="text-",i=I1(n,t+"value",e);if(!i)return null;const r=y5(n,t,e),o=y5(n,t+"background-",e),s=v5(n,t,e),a=v5(n,t+"background-",e),c=I1(n,t+"font",e),d=Td(n,t+"max-angle",e),p=Td(n,t+"offset-x",e),v=Td(n,t+"offset-y",e),M=Z2(n,t+"overflow",e),E=I1(n,t+"placement",e),P=Td(n,t+"repeat",e),U=IB(n,t+"scale",e),z=Z2(n,t+"rotate-with-view",e),V=Td(n,t+"rotation",e),Z=I1(n,t+"align",e),X=I1(n,t+"justify",e),re=I1(n,t+"baseline",e),ee=Z2(n,t+"keep-upright",e),ne=Wee(n,t+"padding",e),q=TB(n,t+"declutter-mode"),le=new Nee({declutterMode:q});return function(ue){if(le.setText(i(ue)),r&&le.setFill(r(ue)),o&&le.setBackgroundFill(o(ue)),s&&le.setStroke(s(ue)),a&&le.setBackgroundStroke(a(ue)),c&&le.setFont(c(ue)),d&&le.setMaxAngle(d(ue)),p&&le.setOffsetX(p(ue)),v&&le.setOffsetY(v(ue)),M&&le.setOverflow(M(ue)),E){const ve=E(ue);if(ve!=="point"&&ve!=="line")throw new Error("Expected point or line for text-placement");le.setPlacement(ve)}if(P&&le.setRepeat(P(ue)),U&&le.setScale(U(ue)),z&&le.setRotateWithView(z(ue)),V&&le.setRotation(V(ue)),Z){const ve=Z(ue);if(ve!=="left"&&ve!=="center"&&ve!=="right"&&ve!=="end"&&ve!=="start")throw new Error("Expected left, right, center, start, or end for text-align");le.setTextAlign(ve)}if(X){const ve=X(ue);if(ve!=="left"&&ve!=="right"&&ve!=="center")throw new Error("Expected left, right, or center for text-justify");le.setJustify(ve)}if(re){const ve=re(ue);if(ve!=="bottom"&&ve!=="top"&&ve!=="middle"&&ve!=="alphabetic"&&ve!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");le.setTextBaseline(ve)}return ne&&le.setPadding(ne(ue)),ee&&le.setKeepUpright(ee(ue)),le}}function Dve(n,e){return"icon-src"in n?Rve(n,e):"shape-points"in n?Pve(n,e):"circle-radius"in n?Uve(n,e):null}function Rve(n,e){const t="icon-",i=t+"src",r=Qee(n[i],i),o=IE(n,t+"anchor",e),s=IB(n,t+"scale",e),a=Td(n,t+"opacity",e),c=IE(n,t+"displacement",e),d=Td(n,t+"rotation",e),p=Z2(n,t+"rotate-with-view",e),v=BN(n,t+"anchor-origin"),M=ON(n,t+"anchor-x-units"),E=ON(n,t+"anchor-y-units"),P=jve(n,t+"color"),U=Fve(n,t+"cross-origin"),z=zve(n,t+"offset"),V=BN(n,t+"offset-origin"),Z=TE(n,t+"width"),X=TE(n,t+"height"),re=Kve(n,t+"size"),ee=TB(n,t+"declutter-mode"),ne=new wx({src:r,anchorOrigin:v,anchorXUnits:M,anchorYUnits:E,color:P,crossOrigin:U,offset:z,offsetOrigin:V,height:X,width:Z,size:re,declutterMode:ee});return function(q){return a&&ne.setOpacity(a(q)),c&&ne.setDisplacement(c(q)),d&&ne.setRotation(d(q)),p&&ne.setRotateWithView(p(q)),s&&ne.setScale(s(q)),o&&ne.setAnchor(o(q)),ne}}function Pve(n,e){const t="shape-",i=t+"points",r=t+"radius",o=JD(n[i],i),s=JD(n[r],r),a=y5(n,t,e),c=v5(n,t,e),d=IB(n,t+"scale",e),p=IE(n,t+"displacement",e),v=Td(n,t+"rotation",e),M=Z2(n,t+"rotate-with-view",e),E=TE(n,t+"radius2"),P=TE(n,t+"angle"),U=TB(n,t+"declutter-mode"),z=new OB({points:o,radius:s,radius2:E,angle:P,declutterMode:U});return function(V){return a&&z.setFill(a(V)),c&&z.setStroke(c(V)),p&&z.setDisplacement(p(V)),v&&z.setRotation(v(V)),M&&z.setRotateWithView(M(V)),d&&z.setScale(d(V)),z}}function Uve(n,e){const t="circle-",i=y5(n,t,e),r=v5(n,t,e),o=Td(n,t+"radius",e),s=IB(n,t+"scale",e),a=IE(n,t+"displacement",e),c=Td(n,t+"rotation",e),d=Z2(n,t+"rotate-with-view",e),p=TB(n,t+"declutter-mode"),v=new wM({radius:5,declutterMode:p});return function(M){return o&&v.setRadius(o(M)),i&&v.setFill(i(M)),r&&v.setStroke(r(M)),a&&v.setDisplacement(a(M)),c&&v.setRotation(c(M)),d&&v.setRotateWithView(d(M)),s&&v.setScale(s(M)),v}}function Td(n,e,t){if(!(e in n))return;const i=H1(n[e],Wo,t);return function(r){return JD(i(r),e)}}function I1(n,e,t){if(!(e in n))return null;const i=H1(n[e],Ed,t);return function(r){return Qee(i(r),e)}}function Lve(n,e,t){const i=I1(n,e+"pattern-src",t),r=EN(n,e+"pattern-offset",t),o=EN(n,e+"pattern-size",t),s=yL(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function Z2(n,e,t){if(!(e in n))return null;const i=H1(n[e],Dh,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function yL(n,e,t){if(!(e in n))return null;const i=H1(n[e],kp,t);return function(r){return qee(i(r),e)}}function Wee(n,e,t){if(!(e in n))return null;const i=H1(n[e],Nb,t);return function(r){return SM(i(r),e)}}function IE(n,e,t){if(!(e in n))return null;const i=H1(n[e],Nb,t);return function(r){const o=SM(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function EN(n,e,t){if(!(e in n))return null;const i=H1(n[e],Nb,t);return function(r){return Yee(i(r),e)}}function IB(n,e,t){if(!(e in n))return null;const i=H1(n[e],Nb|Wo,t);return function(r){return Nve(i(r),e)}}function TE(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Kve(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return JA(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Fve(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function BN(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function ON(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function zve(n,e){const t=n[e];if(t!==void 0)return SM(t,e)}function TB(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function jve(n,e){const t=n[e];if(t!==void 0)return qee(t,e)}function SM(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function Qee(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function JD(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function qee(n,e){if(typeof n=="string")return n;const t=SM(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Yee(n,e){const t=SM(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Nve(n,e){return typeof n=="number"?n:Yee(n,e)}const IN={RENDER_ORDER:"renderOrder"};class vL extends Yx{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(IN.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new kee(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(IN.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?jee:e;const t=Gve(e);this.styleFunction_=e===null?void 0:Eve(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Gve(n){if(n===void 0)return jee;if(!n)return null;if(typeof n=="function"||n instanceof vf)return n;if(!Array.isArray(n))return SN([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof vf){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof vf))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return Ive(r)}return SN(n)}class Vee extends Yp{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class Wve extends mM{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Br()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Og(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),cee(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let d;const p=t.viewState;function v(re,ee,ne,q){return o.call(s,ee,re?ne:null,q)}const M=p.projection,E=jU(e.slice(),M),P=[[0,0]];if(M.canWrapX()&&r){const re=M.getExtent(),ee=Jo(re);P.push([-ee,0],[ee,0])}const U=t.layerStatesArray,z=U.length,V=[],Z=[];for(let re=0;re<P.length;re++)for(let ee=z-1;ee>=0;--ee){const ne=U[ee],q=ne.layer;if(q.hasRenderer()&&hL(ne,p)&&a.call(c,q)){const le=q.getRenderer(),ue=q.getSource();if(le&&ue){const ve=ue.getWrapX()?E:e,pe=v.bind(null,ne.managed);Z[0]=ve[0]+P[re][0],Z[1]=ve[1]+P[re][1],d=le.forEachFeatureAtCoordinate(Z,t,i,pe,V)}if(d)return d}}if(V.length===0)return;const X=1/V.length;return V.forEach((re,ee)=>re.distanceSq+=ee*X),V.sort((re,ee)=>re.distanceSq-ee.distanceSq),V.some(re=>d=re.callback(re.feature,re.layer,re.geometry)),d}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,u5,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){Br()}scheduleExpireIconCache(e){Mm.canExpireCache()&&e.postRenderFunctions.push(Qve)}}function Qve(n,e){Mm.expire()}class qve extends Wve{constructor(e){super(e),this.fontChangeListenerKey_=qo(rb,vx.PROPERTYCHANGE,e.redrawText,e),this.element_=XA?wee():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=EB+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Vee(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){xa(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(xm.PRECOMPOSE,e);const t=e.layerStatesArray.sort((d,p)=>d.zIndex-p.zIndex);t.some(d=>d.layer instanceof vL&&d.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let d=0,p=t.length;d<p;++d){const v=t[d];e.layerIndex=d;const M=v.layer,E=M.getSourceState();if(!hL(v,r)||E!="ready"&&E!="undefined"){M.unrender();continue}const P=M.render(e,s);P&&(P!==s&&(this.children_.push(P),s=P),o.push(v))}this.declutter(e,o),nye(this.element_,this.children_);const c=this.getMap().getTargetElement();if(vv(c)){const d=c.getContext("2d");for(const p of this.children_){const v=p.firstElementChild||p,M=p.style.backgroundColor;if(M&&(!vv(v)||v.width>0)&&(d.fillStyle=M,d.fillRect(0,0,c.width,c.height)),vv(v)&&v.width>0){const E=p.style.opacity||v.style.opacity;d.globalAlpha=E===""?1:Number(E);const P=v.style.transform;if(P)d.setTransform(...QD(P));else{const U=parseFloat(v.style.width)/v.width,z=parseFloat(v.style.height)/v.height;d.setTransform(U,0,0,z,0,0)}d.drawImage(v,0,0)}}d.globalAlpha=1,d.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(xm.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function $ee(n){if(n instanceof Yx){n.setMapInternal(null);return}n instanceof t_&&n.getLayers().forEach($ee)}function Hee(n,e){if(n instanceof Yx){n.setMapInternal(e);return}if(n instanceof t_){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)Hee(t[i],e)}}let C5=class extends Vp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Yve(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Sge,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Rd(),this.pixelToCoordinateTransform_=Rd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,XA||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,XA||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(XA?new _m:sye()),this.interactions=t.interactions||(XA?new _m:Bye({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new QJ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(qA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(qA.VIEW,this.handleViewChanged_),this.addChangeListener(qA.SIZE,this.handleSizeChanged_),this.addChangeListener(qA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Tp)&&e.view.then(function(r){i.setView(new Tp(r))}),this.controls.addEventListener(Sd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Sd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Sd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Sd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Sd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Sd.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Hee(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:u5,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof t_?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:u5,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(qA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return WD(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Gu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(qA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof _m){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=B1(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Gu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(qA.SIZE)}getView(){return this.get(qA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return Ige(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new av(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===RD.POINTERDOWN||i===Mr.WHEEL||i===Mr.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[ll.ANIMATING]||s[ll.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(xm.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xm.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new E2(O1.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new E2(O1.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)xa(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Mr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Mr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!vv(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(vv(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new qve(this)),!vv(t)){this.mapBrowserEventHandler_=new Bge(this,this.moveTolerance_);for(const r in Yl)this.mapBrowserEventHandler_.addEventListener(Yl[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Mr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Mr.WHEEL,this.boundHandleBrowserEvent_,WJ?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const r=t.getRootNode();i=r instanceof ShadowRoot?r.host:t}if(this.targetChangeHandlerKeys_=[qo(i,Mr.KEYDOWN,this.handleBrowserEvent,this),qo(i,Mr.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(xa(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(xa(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=qo(e,vx.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=qo(e,Mr.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(xa),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new uv("addlayer",e)),this.layerGroupPropertyListenerKeys_=[qo(e,vx.PROPERTYCHANGE,this.render,this),qo(e,Mr.CHANGE,this.render,this),qo(e,"addlayer",this.handleLayerAdd_,this),qo(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){$ee(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&yN(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:_E(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:zr(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=_E(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!Xb(this.previousExtent_)&&!W1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new E2(O1.MOVESTART,this,r)),this.previousExtent_=Qx(this.previousExtent_)),this.previousExtent_&&!o.viewHints[ll.ANIMATING]&&!o.viewHints[ll.INTERACTING]&&!W1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new E2(O1.MOVEEND,this,o)),qJ(o.extent,this.previousExtent_))),this.dispatchEvent(new E2(O1.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(O1.LOADSTART)||this.hasListener(O1.LOADEND)||this.hasListener(xm.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new uv("removelayer",t)),this.set(qA.LAYERGROUP,e)}setSize(e){this.set(qA.SIZE,e)}setTarget(e){this.set(qA.TARGET,e)}setView(e){if(!e||e instanceof Tp){this.set(qA.VIEW,e);return}this.set(qA.VIEW,new Tp);const t=this;e.then(function(i){t.setView(new Tp(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){let r,o;if(vv(e))r=e.width,o=e.height;else{const s=getComputedStyle(e);r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth)}!isNaN(r)&&!isNaN(o)&&(t=[Math.max(0,r),Math.max(0,o)],!yN(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&nee("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Wv(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Yve(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new t_({layers:n.layers});t[qA.LAYERGROUP]=i,t[qA.TARGET]=n.target,t[qA.VIEW]=n.view instanceof Tp?n.view:new Tp;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new _m(n.controls.slice()):(Os(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new _m(n.interactions.slice()):(Os(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new _m(n.overlays.slice()):(Os(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new _m,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class kB extends Vp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new kB(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(xa(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=qo(e,Mr.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Vve(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Vve(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Os(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function Zee(n,e,t,i){const r=[];let o=Tm();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=FU(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function kE(n,e,t,i,r,o,s){let a,c;const d=(t-e)/i;if(d===1)a=e;else if(d===2)a=e,c=r;else if(d!==0){let p=n[e],v=n[e+1],M=0;const E=[0];for(let z=e+i;z<t;z+=i){const V=n[z],Z=n[z+1];M+=Math.sqrt((V-p)*(V-p)+(Z-v)*(Z-v)),E.push(M),p=V,v=Z}const P=r*M,U=yge(E,P);U<0?(c=(P-E[-U-2])/(E[-U-1]-E[-U-2]),a=e+(-U-2)*i):a=e+U*i}s=s>1?s:2,o=o||new Array(s);for(let p=0;p<s;++p)o[p]=a===void 0?NaN:c===void 0?n[a+p]:yf(n[a+p],n[a+i+p],c);return o}function eR(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const M=a+c>>1;r<n[(M+1)*i-1]?c=M:a=M+1}const d=n[a*i-1];if(r==d)return n.slice((a-1)*i,(a-1)*i+i);const p=n[(a+1)*i-1],v=(r-d)/(p-d);s=[];for(let M=0;M<i-1;++M)s.push(yf(n[(a-1)*i+M],n[a*i+M],v));return s.push(r),s}function $ve(n,e,t,i,r,o,s){if(s)return eR(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,d=t.length;c<d;++c){const p=t[c];if(e!=p){if(r<n[e+i-1])return null;if(r<=n[p-1])return eR(n,e,p,i,r,!1);e=p}}return null}class DE extends hee{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(xa),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(qo(e[t],Mr.CHANGE,this.changed,this))}clone(){const e=new DE(q8(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Zb(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Qx(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)VJ(e,t[i].getExtent());return e}getGeometries(){return q8(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new DE(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Of(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(q8(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function q8(n){return n.map(e=>e.clone())}function CL(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],d=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(d-o)*(d-o)),r=c,o=d}return s}class Gb extends Jb{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Eg(this.flatCoordinates,e),this.changed()}clone(){const e=new Gb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($U(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return yee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,eR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return yv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return kE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return CL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=wB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Gb(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return SB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=MB(this.flatCoordinates,0,e,this.stride),this.changed()}}class b5 extends Jb{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,d=r.length;c<d;++c){const p=r[c];Eg(o,p.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){Eg(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new b5(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(HU(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),XU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,$ve(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return h5(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Gb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],d=new Gb(e.slice(o,c),i);r.push(d),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=CL(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],d=kE(t,i,c,o,.5);Eg(e,d),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=pee(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new b5(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return j1e(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=bM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class EM extends Jb{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Eg(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new EM(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Zb(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const d=Bb(e,t,o[a],o[a+1]);if(d<r){r=d;for(let p=0;p<s;++p)i[p]=o[a+p];i.length=s}}return r}getCoordinates(){return yv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new jb(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new jb(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if(KU(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=MB(this.flatCoordinates,0,e,this.stride),this.changed()}}class _5 extends Jb{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const d=r[a],p=o.length,v=d.getEnds();for(let M=0,E=v.length;M<E;++M)v[M]+=p;Eg(o,d.getFlatCoordinates()),s.push(v)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Eg(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new _5(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(R1e(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),P1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return z1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return D1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),YD(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,qD(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Zee(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=gee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new EM(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;bee(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=YD(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=K1e(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new _5(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new Q1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),d=c[c.length-1];if(o!==0)for(let v=0,M=c.length;v<M;++v)c[v]-=o;const p=new Q1(t.slice(o,d),e,c);r.push(p),o=d}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return N1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=mee(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const TN=Rd();class ZA{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?YJ(this.flatCoordinates_):FU(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Of(this.getExtent());this.flatInteriorPoints_=tL(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=_ee(this.flatCoordinates_,this.ends_),t=Zee(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=gee(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=kE(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=kE(e,t,s,2,.5);Eg(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=zs(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=qu(i)/qu(t);Og(TN,i[0],i[3],r,-r,0,0,0),Iv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,TN,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new ZA(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=jJ((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=wB(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=pee(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=JU(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new ZA(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}ZA.prototype.getFlatCoordinates=ZA.prototype.getOrientedFlatCoordinates;class Xee{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Hve extends Xee{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?pB(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Rd()}drawImages_(e,t,i,r){if(!this.image_)return;const o=Iv(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let p=0,v=o.length;p<v;p+=2){const M=o[p]-this.imageAnchorX_,E=o[p+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const P=M+this.imageAnchorX_,U=E+this.imageAnchorY_;Og(a,P,U,1,1,d,-P,-U),s.save(),s.transform.apply(s,a),s.translate(P,U),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,M,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Iv(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,d=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,d-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,d),this.textFillState_&&s.fillText(this.text_,c,d))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=Iv(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let d=2;d<c;d+=2)s.lineTo(a[d],a[d+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=k1e(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Hl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,d=s.length;c<d;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const d=o[a];r=this.drawRings_(i,r,d,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Wv(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:p5;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:mg(i||Bd)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),d=t.getMiterLimit(),p=o||F1;this.strokeState_={lineCap:r!==void 0?r:xx,lineDash:this.pixelRatio_===1?p:p.map(v=>v*this.pixelRatio_),lineDashOffset:(s||z1)*this.pixelRatio_,lineJoin:a!==void 0?a:Mx,lineWidth:(c!==void 0?c:g5)*this.pixelRatio_,miterLimit:d!==void 0?d:f5,strokeStyle:mg(i||m5)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const E=t.getColor();this.textFillState_={fillStyle:mg(E||Bd)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const E=i.getColor(),P=i.getLineCap(),U=i.getLineDash(),z=i.getLineDashOffset(),V=i.getLineJoin(),Z=i.getWidth(),X=i.getMiterLimit();this.textStrokeState_={lineCap:P!==void 0?P:xx,lineDash:U||F1,lineDashOffset:z||z1,lineJoin:V!==void 0?V:Mx,lineWidth:Z!==void 0?Z:g5,miterLimit:X!==void 0?X:f5,strokeStyle:mg(E||m5)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),d=e.getScaleArray(),p=e.getText(),v=e.getTextAlign(),M=e.getTextBaseline();this.textState_={font:r!==void 0?r:Kee,textAlign:v!==void 0?v:p5,textBaseline:M!==void 0?M:OE},this.text_=p!==void 0?Array.isArray(p)?p.reduce((E,P,U)=>E+=U%2?" ":P,""):p:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const Zve=.5,Jee={Point:oCe,LineString:nCe,Polygon:aCe,MultiPoint:sCe,MultiLineString:iCe,MultiPolygon:rCe,GeometryCollection:tCe,Circle:Jve};function Xve(n,e){return parseInt(zr(n),10)-parseInt(zr(e),10)}function tR(n,e){const t=ete(n,e);return t*t}function ete(n,e){return Zve*n/e}function Jve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function RE(n,e,t,i,r,o,s,a){const c=[],d=t.getImage();if(d){let M=!0;const E=d.getImageState();E==Qi.LOADED||E==Qi.ERROR?M=!1:E==Qi.IDLE&&d.load(),M&&c.push(d.ready())}const p=t.getFill();p&&p.loading()&&c.push(p.ready());const v=c.length>0;return v&&Promise.all(c).then(()=>r(null)),eCe(n,e,t,i,o,s,a),v}function eCe(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())tte(n,c,t,e,s);else{const p=Jee[c.getType()];p(n,c,t,e,s,o)}}function tte(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)tte(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function tCe(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const d=Jee[s[a].getType()];d(n,s[a],t,i,r,o)}}function nCe(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function iCe(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function rCe(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function oCe(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),d=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=Qi.LOADED)return;const p=n.getBuilder(t.getZIndex(),"Image");p.setImageStyle(s,d),p.drawPoint(e,i,r)}if(c){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(a,d),p.drawText(e,i,r)}}function sCe(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),d=c&&c.getText(),p=o&&a&&d?{}:void 0;if(a){if(s.getImageState()!=Qi.LOADED)return;const v=n.getBuilder(t.getZIndex(),"Image");v.setImageStyle(s,p),v.drawMultiPoint(e,i,r)}if(d){const v=n.getBuilder(t.getZIndex(),"Text");v.setTextStyle(c,p),v.drawText(e,i,r)}}function aCe(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let lCe=!1;function nte(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=lCe,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const d=e.getType();try{let p;d=="text"||d=="json"?p=a.responseText:d=="xml"?p=a.responseXML||a.responseText:d=="arraybuffer"&&(p=a.response),p?o(e.readFeatures(p,{extent:t,featureProjection:r}),e.readProjection(p)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function kN(n,e){return function(t,i,r,o,s){nte(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function uCe(n,e){return[[-1/0,-1/0,1/0,1/0]]}function cCe(n,e){return[n]}class DN{constructor(e){this.rbush_=new kee(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[zr(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[zr(a)]=c}this.rbush_.load(i)}remove(e){const t=zr(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[zr(t)],r=[i.minX,i.minY,i.maxX,i.maxY];W1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Rv(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return G1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Vx extends Vp{constructor(e){super(),this.projection=zs(e.projection),this.attributions_=RN(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=RN(e),this.changed()}setState(e){this.state_=e,this.changed()}}function RN(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Am={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class tv extends Yp{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class IS extends Vx{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=c5,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Os(this.format_,"`format` must be set when `url` is set"),this.loader_=kN(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:uCe;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new DN:null,this.loadedExtentsRtree_=new DN,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new _m(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=zr(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new tv(Am.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof ZA||(this.featureChangeKeys_[e]=[qo(t,Mr.CHANGE,this.handleFeatureChange_,this),qo(t,vx.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof ZA){const o=this.idIndex_[r];o instanceof ZA?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(Os(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=zr(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=zr(a);this.setupChangeEvents_(c,a);const d=a.getGeometry();if(d){const p=d.getExtent();t.push(p),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Am.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new tv(Am.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Am.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Am.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Sd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Sd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(xa);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new tv(Am.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof ZA||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof ZA||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Rv(this.nullGeometryFeatures_)||Eg(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=eee(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||u5,this.featuresRtree_.forEachInExtent(c,function(d){if(t(d)){const p=d.getGeometry(),v=a;if(a=p instanceof ZA?0:p.closestPointXY(i,r,s,a),a<v){o=d;const M=Math.sqrt(a);c[0]=i-M,c[1]=r-M,c[2]=i+M,c[3]=r+M}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=zr(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new tv(Am.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:zr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Rv(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(p){return dg(p.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new tv(Am.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,p=>{--this.loadingExtentsCount_,this.dispatchEvent(new tv(Am.FEATURESLOADEND,void 0,p))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new tv(Am.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(W1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=zr(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(xa),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(Am.REMOVEFEATURE)&&this.dispatchEvent(new tv(Am.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Os(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(kN(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const fr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},xw=[fr.FILL],bv=[fr.STROKE],mb=[fr.BEGIN_PATH],PN=[fr.CLOSE_PATH];class BM extends Xee{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],Fb(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const d=this.getBufferedMaxExtent();s&&(t+=r);let p=e[t],v=e[t+1];const M=this.tmpCoordinate_;let E=!0,P,U,z;for(P=t+r;P<i;P+=r)M[0]=e[P],M[1]=e[P+1],z=LD(d,M),z!==U?(E&&(a[c++]=p,a[c++]=v,E=!1),a[c++]=M[0],a[c++]=M[1]):z===qc.INTERSECTING?(a[c++]=M[0],a[c++]=M[1],E=!1):E=!0,p=M[0],v=M[1],U=z;return(o&&E||P===t+r)&&(a[c++]=p,a[c++]=v),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],d=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(d),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let d,p,v,M,E;switch(s){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),M=[];const P=e.getEndss();E=0;for(let U=0,z=P.length;U<z;++U){const V=[];E=this.drawCustomCoordinates_(d,E,P[U],a,V),M.push(V)}this.instructions.push([fr.CUSTOM,c,M,e,i,qD,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,M,e,r||i,qD,o]);break;case"Polygon":case"MultiLineString":v=[],d=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),E=this.drawCustomCoordinates_(d,0,e.getEnds(),a,v),this.instructions.push([fr.CUSTOM,c,v,e,i,h5,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,v,e,r||i,h5,o]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),p=this.appendFlatLineCoordinates(d,0,d.length,a,!1,!1),this.instructions.push([fr.CUSTOM,c,p,e,i,yv,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,p,e,r||i,yv,o]);break;case"MultiPoint":d=e.getFlatCoordinates(),p=this.appendFlatPointCoordinates(d,a),p>c&&(this.instructions.push([fr.CUSTOM,c,p,e,i,yv,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,p,e,r||i,yv,o]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),p=this.coordinates.length,this.instructions.push([fr.CUSTOM,c,p,e,i,void 0,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,p,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[fr.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fr.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==fr.END_GEOMETRY?s=t:o==fr.BEGIN_GEOMETRY&&(r[2]=t,Cge(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=mg(i||Bd)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=mg(i||m5);const r=e.getLineCap();t.lineCap=r!==void 0?r:xx;const o=e.getLineDash();t.lineDash=o?o.slice():F1;const s=e.getLineDashOffset();t.lineDashOffset=s||z1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:Mx;const c=e.getWidth();t.lineWidth=c!==void 0?c:g5;const d=e.getMiterLimit();t.miterLimit=d!==void 0?d:f5,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[fr.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,d=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!Wv(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=d)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=d)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=qJ(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Ov(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class ACe extends BM{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Fb(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([fr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,d=r.length;c<d;c+=e.getStride())(!this.maxExtent||Fb(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([fr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class hCe extends BM{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[fr.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,F1,z1],mb);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(bv),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,F1,z1],mb);const a=e.getEnds(),c=e.getFlatCoordinates(),d=e.getStride();let p=0;for(let v=0,M=a.length;v<M;++v)p=this.drawFlatCoordinates_(c,p,a[v],d);this.hitDetectionInstructions.push(bv),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(bv),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(bv),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(mb)}}class UN extends BM{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(mb),this.hitDetectionInstructions.push(mb);for(let d=0;d<c;++d){const p=i[d],v=this.coordinates.length,M=this.appendFlatLineCoordinates(e,t,p,r,!0,!a),E=[fr.MOVE_TO_LINE_TO,v,M];this.instructions.push(E),this.hitDetectionInstructions.push(E),a&&(this.instructions.push(PN),this.hitDetectionInstructions.push(PN)),t=p}return s&&(this.instructions.push(xw),this.hitDetectionInstructions.push(xw)),a&&(this.instructions.push(bv),this.hitDetectionInstructions.push(bv)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Bd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,F1,z1]);const a=e.getFlatCoordinates(),c=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const p=[fr.CIRCLE,d];this.instructions.push(mb,p),this.hitDetectionInstructions.push(mb,p),r.fillStyle!==void 0&&(this.instructions.push(xw),this.hitDetectionInstructions.push(xw)),r.strokeStyle!==void 0&&(this.instructions.push(bv),this.hitDetectionInstructions.push(bv)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Bd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,F1,z1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(c,0,a,d),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,Bd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,F1,z1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),d=e.getStride();let p=0;for(let v=0,M=a.length;v<M;++v)p=this.drawFlatCoordinatess_(c,p,a[v],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=eb(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function dCe(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[d,p]=c.slice(-2),v=e[s+r],M=e[s+r+1],E=Math.sqrt((v-d)*(v-d)+(M-p)*(M-p));if(a+=E,a>=n){const P=(n-a+E)/E,U=yf(d,v,P),z=yf(p,M,P);c.push(U,z),o.push(c),c=[U,z],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const P=E-a,U=yf(d,v,P/E),z=yf(p,M,P/E);c.push(U,z),o.push(c),c=[U,z],a=0,s+=r}}return a>0&&o.push(c),o}function fCe(n,e,t,i,r){let o=t,s=t,a=0,c=0,d=t,p,v,M,E,P,U,z,V,Z,X;for(v=t;v<i;v+=r){const re=e[v],ee=e[v+1];P!==void 0&&(Z=re-P,X=ee-U,E=Math.sqrt(Z*Z+X*X),z!==void 0&&(c+=M,p=Math.acos((z*Z+V*X)/(M*E)),p>n&&(c>a&&(a=c,o=d,s=v),c=0,d=v-r)),M=E,z=Z,V=X),P=re,U=ee}return c+=E,c>a?[d,v]:[o,s]}const PE={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class mCe extends BM{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Bd]={fillStyle:Bd},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const d=e.getType();let p=null,v=e.getStride();if(s.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!Hl(this.maxExtent,e.getExtent()))return;let M;if(p=e.getFlatCoordinates(),d=="LineString")M=[p.length];else if(d=="MultiLineString")M=e.getEnds();else if(d=="Polygon")M=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const z=e.getEndss();M=[];for(let V=0,Z=z.length;V<Z;++V)M.push(z[V][0])}this.beginGeometry(e,t,i);const E=s.repeat,P=E?void 0:s.textAlign;let U=0;for(let z=0,V=M.length;z<V;++z){let Z;E?Z=dCe(E*this.resolution,p,U,M[z],v):Z=[p.slice(U,M[z])];for(let X=0,re=Z.length;X<re;++X){const ee=Z[X];let ne=0,q=ee.length;if(P==null){const ue=fCe(s.maxAngle,ee,0,ee.length,2);ne=ue[0],q=ue[1]}for(let ue=ne;ue<q;ue+=v)a.push(ee[ue],ee[ue+1]);const le=a.length;U=M[z],this.drawChars_(c,le),c=le}}this.endGeometry(t)}else{let M=s.overflow?null:[];switch(d){case"Point":case"MultiPoint":p=e.getFlatCoordinates();break;case"LineString":p=e.getFlatMidpoint();break;case"Circle":p=e.getCenter();break;case"MultiLineString":p=e.getFlatMidpoints(),v=2;break;case"Polygon":p=e.getFlatInteriorPoint(),s.overflow||M.push(p[2]/this.resolution),v=3;break;case"MultiPolygon":const re=e.getFlatInteriorPoints();p=[];for(let ee=0,ne=re.length;ee<ne;ee+=3)s.overflow||M.push(re[ee+2]/this.resolution),p.push(re[ee],re[ee+1]);if(p.length===0)return;v=2;break}const E=this.appendFlatPointCoordinates(p,v);if(E===c)return;if(M&&(E-c)/2!==p.length/v){let re=c/2;M=M.filter((ee,ne)=>{const q=a[(re+ne)*2]===p[ne*v]&&a[(re+ne)*2+1]===p[ne*v+1];return q||--re,q})}this.saveTextStates_();const P=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,U=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let z=s.padding;if(z!=fb&&(s.scale[0]<0||s.scale[1]<0)){let re=s.padding[0],ee=s.padding[1],ne=s.padding[2],q=s.padding[3];s.scale[0]<0&&(ee=-ee,q=-q),s.scale[1]<0&&(re=-re,ne=-ne),z=[re,ee,ne,q]}const V=this.pixelRatio;this.instructions.push([fr.DRAW_IMAGE,c,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,z==fb?fb:z.map(function(re){return re*V}),P,U,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]);const Z=1/V,X=P?P.slice(0):null;X&&(X[1]=Bd),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,c,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Z,Z],NaN,this.declutterMode_,this.declutterImageWithText_,z,X,U,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Bd:this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||p5,justify:t.justify,textBaseline:t.textBaseline||OE,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,d=PE[r.textBaseline],p=this.textOffsetY_*c,v=this.text_,M=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([fr.DRAW_CHARS,e,t,d,r.overflow,a,r.maxAngle,c,p,o,M*c,v,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fr.DRAW_CHARS,e,t,d,r.overflow,a&&Bd,r.maxAngle,c,p,o,M*c,v,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=mg(s.getColor()||Bd)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const U=a.getLineDash(),z=a.getLineDashOffset(),V=a.getWidth(),Z=a.getMiterLimit();o.lineCap=a.getLineCap()||xx,o.lineDash=U?U.slice():F1,o.lineDashOffset=z===void 0?z1:z,o.lineJoin=a.getLineJoin()||Mx,o.lineWidth=V===void 0?g5:V,o.miterLimit=Z===void 0?f5:Z,o.strokeStyle=mg(a.getColor()||m5)}i=this.textState_;const c=e.getFont()||Kee;_ve(c);const d=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||OE,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||fb,i.scale=d===void 0?[1,1]:d;const p=e.getOffsetX(),v=e.getOffsetY(),M=e.getRotateWithView(),E=e.getKeepUpright(),P=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=M===void 0?!1:M,this.textKeepUpright_=E===void 0?!0:E,this.textRotation_=P===void 0?0:P,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:zr(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+zr(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const pCe={Circle:UN,Default:BM,Image:ACe,LineString:hCe,Polygon:UN,Text:mCe};class ite{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=pCe[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function gCe(n,e,t,i,r,o,s,a,c,d,p,v,M=!0){let E=n[e],P=n[e+1],U=0,z=0,V=0,Z=0;function X(){U=E,z=P,e+=i,E=n[e],P=n[e+1],Z+=V,V=Math.sqrt((E-U)*(E-U)+(P-z)*(P-z))}do X();while(e<t-i&&Z+V<o);let re=V===0?0:(o-Z)/V;const ee=yf(U,E,re),ne=yf(z,P,re),q=e-i,le=Z,ue=o+a*c(d,r,p);for(;e<t-i&&Z+V<ue;)X();re=V===0?0:(ue-Z)/V;const ve=yf(U,E,re),pe=yf(z,P,re);let Be=!1;if(M)if(v){const Ve=[ee,ne,ve,pe];Aee(Ve,0,4,2,v,Ve,Ve),Be=Ve[0]>Ve[2]}else Be=ee>ve;const Ce=Math.PI,Oe=[],Fe=q+i===e;e=q,V=0,Z=le,E=n[e],P=n[e+1];let Ee;if(Fe){X(),Ee=Math.atan2(P-z,E-U),Be&&(Ee+=Ee>0?-Ce:Ce);const Ve=(ve+ee)/2,ut=(pe+ne)/2;return Oe[0]=[Ve,ut,(ue-o)/2,Ee,r],Oe}r=r.replace(/\n/g," ");for(let Ve=0,ut=r.length;Ve<ut;){X();let mt=Math.atan2(P-z,E-U);if(Be&&(mt+=mt>0?-Ce:Ce),Ee!==void 0){let ot=mt-Ee;if(ot+=ot>Ce?-2*Ce:ot<-Ce?2*Ce:0,Math.abs(ot)>s)return null}Ee=mt;const Pe=Ve;let De=0;for(;Ve<ut;++Ve){const ot=Be?ut-Ve-1:Ve,Et=a*c(d,r[ot],p);if(e+i<t&&Z+V<o+De+Et/2)break;De+=Et}if(Ve===Pe)continue;const Xe=Be?r.substring(ut-Pe,ut-Ve):r.substring(Pe,Ve);re=V===0?0:(o+De/2-Z)/V;const Ke=yf(U,E,re),Bt=yf(z,P,re);Oe.push([Ke,Bt,De/2,mt,Xe]),o+=De}return Oe}class bL{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(EE(),{get:(e,t)=>{if(typeof EE()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const $_=Tm(),nv=[],M1=[],w1=[],iv=[];function LN(n){return n[3].declutterBox}const KN=new RegExp("[-----]");function Y8(n,e){return e==="start"?e=KN.test(n)?"right":"left":e==="end"&&(e=KN.test(n)?"left":"right"),PE[e]}function yCe(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function vCe(n,e,t){return t%2===0&&(n+=e),n}class CCe{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Rd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new bL:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],d=this.pixelRatio,p=[c.scale[0]*d,c.scale[1]*d],v=c.justify?PE[c.justify]:Y8(Array.isArray(e)?e[0]:e,c.textAlign||p5),M=r&&s.lineWidth?s.lineWidth:0,E=Array.isArray(e)?e:String(e).split(`
`).reduce(yCe,[]),{width:P,height:U,widths:z,heights:V,lineWidths:Z}=Mve(c,E),X=P+M,re=[],ee=(X+2)*p[0],ne=(U+M)*p[1],q={width:ee<0?Math.floor(ee):Math.ceil(ee),height:ne<0?Math.floor(ne):Math.ceil(ne),contextInstructions:re};(p[0]!=1||p[1]!=1)&&re.push("scale",p),r&&(re.push("strokeStyle",s.strokeStyle),re.push("lineWidth",M),re.push("lineCap",s.lineCap),re.push("lineJoin",s.lineJoin),re.push("miterLimit",s.miterLimit),re.push("setLineDash",[s.lineDash]),re.push("lineDashOffset",s.lineDashOffset)),i&&re.push("fillStyle",a.fillStyle),re.push("textBaseline","middle"),re.push("textAlign","center");const le=.5-v;let ue=v*X+le*M;const ve=[],pe=[];let Be=0,Ce=0,Oe=0,Fe=0,Ee;for(let Ve=0,ut=E.length;Ve<ut;Ve+=2){const mt=E[Ve];if(mt===`
`){Ce+=Be,Be=0,ue=v*X+le*M,++Fe;continue}const Pe=E[Ve+1]||c.font;Pe!==Ee&&(r&&ve.push("font",Pe),i&&pe.push("font",Pe),Ee=Pe),Be=Math.max(Be,V[Oe]);const De=[mt,ue+le*z[Oe]+v*(z[Oe]-Z[Fe]),.5*(M+Be)+Ce];ue+=z[Oe],r&&ve.push("strokeText",De),i&&pe.push("fillText",De),++Oe}return Array.prototype.push.apply(re,ve),Array.prototype.push.apply(re,pe),this.labels_[o]=q,q}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,d,p,v,M,E,P,U,z){a*=M[0],c*=M[1];let V=i-a,Z=r-c;const X=o+d>e?e-d:o,re=s+p>t?t-p:s,ee=P[3]+X*M[0]+P[1],ne=P[0]+re*M[1]+P[2],q=V-P[3],le=Z-P[0];(U||v!==0)&&(nv[0]=q,iv[0]=q,nv[1]=le,M1[1]=le,M1[0]=q+ee,w1[0]=M1[0],w1[1]=le+ne,iv[1]=w1[1]);let ue;return v!==0?(ue=Og(Rd(),i,r,1,1,v,-i,-r),Gu(ue,nv),Gu(ue,M1),Gu(ue,w1),Gu(ue,iv),G1(Math.min(nv[0],M1[0],w1[0],iv[0]),Math.min(nv[1],M1[1],w1[1],iv[1]),Math.max(nv[0],M1[0],w1[0],iv[0]),Math.max(nv[1],M1[1],w1[1],iv[1]),$_)):G1(Math.min(q,q+ee),Math.min(le,le+ne),Math.max(q,q+ee),Math.max(le,le+ne),$_),E&&(V=Math.round(V),Z=Math.round(Z)),{drawImageX:V,drawImageY:Z,drawImageW:X,drawImageH:re,originX:d,originY:p,declutterBox:{minX:$_[0],minY:$_[1],maxX:$_[2],maxY:$_[3],value:z},canvasTransform:ue,scale:M}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),d=r.declutterBox,p=a?a[2]*r.scale[0]/2:0;return d.minX-p<=t[0]&&d.maxX+p>=0&&d.minY-p<=t[1]&&d.maxY+p>=0&&(c&&this.replayTextBackground_(e,nv,M1,w1,iv,s,a),wve(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Gu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,d=Y8(Array.isArray(e)?e[0]:e,o.textAlign||p5),p=PE[o.textBaseline||OE],v=a&&a.lineWidth?a.lineWidth:0,M=s.width/c-2*o.scale[0],E=d*M+2*(.5-d)*v,P=p*s.height/c+2*(.5-p)*v;return{label:s,anchorX:E,anchorY:P}}execute_(e,t,i,r,o,s,a,c){const d=this.zIndexContext_;let p;this.pixelCoordinates_&&Wv(i,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Iv(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),x1e(this.renderedTransform_,i));let v=0;const M=r.length;let E=0,P,U,z,V,Z,X,re,ee,ne,q,le,ue,ve,pe=0,Be=0;const Ce=this.coordinateCache_,Oe=this.viewRotation_,Fe=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Ee={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Oe},Ve=this.instructions!=r||this.overlaps?0:200;let ut,mt,Pe,De;for(;v<M;){const Xe=r[v];switch(Xe[0]){case fr.BEGIN_GEOMETRY:ut=Xe[1],De=Xe[3],ut.getGeometry()?a!==void 0&&!Hl(a,De.getExtent())?v=Xe[2]+1:++v:v=Xe[2],d&&(d.zIndex=Xe[4]);break;case fr.BEGIN_PATH:pe>Ve&&(this.fill_(e),pe=0),Be>Ve&&(e.stroke(),Be=0),!pe&&!Be&&(e.beginPath(),Z=NaN,X=NaN),++v;break;case fr.CIRCLE:E=Xe[1];const Bt=p[E],ot=p[E+1],Et=p[E+2],Rt=p[E+3],Ue=Et-Bt,ke=Rt-ot,Te=Math.sqrt(Ue*Ue+ke*ke);e.moveTo(Bt+Te,ot),e.arc(Bt,ot,Te,0,2*Math.PI,!0),++v;break;case fr.CLOSE_PATH:e.closePath(),++v;break;case fr.CUSTOM:E=Xe[1],P=Xe[2];const He=Xe[3],Ct=Xe[4],vt=Xe[5];Ee.geometry=He,Ee.feature=ut,v in Ce||(Ce[v]=[]);const wt=Ce[v];vt?vt(p,E,P,2,wt):(wt[0]=p[E],wt[1]=p[E+1],wt.length=2),d&&(d.zIndex=Xe[6]),Ct(wt,Ee),++v;break;case fr.DRAW_IMAGE:E=Xe[1],P=Xe[2],ne=Xe[3],U=Xe[4],z=Xe[5];let Ft=Xe[6];const Pt=Xe[7],nn=Xe[8],Kn=Xe[9],Wn=Xe[10];let Mi=Xe[11];const Fn=Xe[12];let Ln=Xe[13];V=Xe[14]||"declutter";const In=Xe[15];if(!ne&&Xe.length>=20){q=Xe[19],le=Xe[20],ue=Xe[21],ve=Xe[22];const ji=this.drawLabelWithPointPlacement_(q,le,ue,ve);ne=ji.label,Xe[3]=ne;const Qn=Xe[23];U=(ji.anchorX-Qn)*this.pixelRatio,Xe[4]=U;const Zn=Xe[24];z=(ji.anchorY-Zn)*this.pixelRatio,Xe[5]=z,Ft=ne.height,Xe[6]=Ft,Ln=ne.width,Xe[13]=Ln}let oi;Xe.length>25&&(oi=Xe[25]);let Tn,je,$;Xe.length>17?(Tn=Xe[16],je=Xe[17],$=Xe[18]):(Tn=fb,je=null,$=null),Wn&&Fe?Mi+=Oe:!Wn&&!Fe&&(Mi-=Oe);let j=0;for(;E<P;E+=2){if(oi&&oi[j++]<Ln/this.pixelRatio)continue;const ji=this.calculateImageOrLabelDimensions_(ne.width,ne.height,p[E],p[E+1],Ln,Ft,U,z,nn,Kn,Mi,Fn,o,Tn,!!je||!!$,ut),Qn=[e,t,ne,ji,Pt,je,$];if(c){let Zn,Yi,qi;if(In){const Ki=P-E;if(!In[Ki]){In[Ki]={args:Qn,declutterMode:V};continue}const Ir=In[Ki];Zn=Ir.args,Yi=Ir.declutterMode,delete In[Ki],qi=LN(Zn)}let Ui,Vi;if(Zn&&(Yi!=="declutter"||!c.collides(qi))&&(Ui=!0),(V!=="declutter"||!c.collides(ji.declutterBox))&&(Vi=!0),Yi==="declutter"&&V==="declutter"){const Ki=Ui&&Vi;Ui=Ki,Vi=Ki}Ui&&(Yi!=="none"&&c.insert(qi),this.replayImageOrLabel_.apply(this,Zn)),Vi&&(V!=="none"&&c.insert(ji.declutterBox),this.replayImageOrLabel_.apply(this,Qn))}else this.replayImageOrLabel_.apply(this,Qn)}++v;break;case fr.DRAW_CHARS:const Q=Xe[1],Ae=Xe[2],Me=Xe[3],Ne=Xe[4];ve=Xe[5];const We=Xe[6],it=Xe[7],bt=Xe[8];ue=Xe[9];const Ye=Xe[10];q=Xe[11],Array.isArray(q)&&(q=q.reduce(vCe,"")),le=Xe[12];const at=[Xe[13],Xe[13]];V=Xe[14]||"declutter";const C=Xe[15],Ut=this.textStates[le],gn=Ut.font,bn=[Ut.scale[0]*it,Ut.scale[1]*it];let _n;gn in this.widths_?_n=this.widths_[gn]:(_n={},this.widths_[gn]=_n);const Mt=CL(p,Q,Ae,2),xi=Math.abs(bn[0])*xN(gn,q,_n);if(Ne||xi<=Mt){const ji=this.textStates[le].textAlign,Qn=(Mt-xi)*Y8(q,ji),Zn=gCe(p,Q,Ae,2,q,Qn,We,Math.abs(bn[0]),xN,gn,_n,Fe?0:this.viewRotation_,C);e:if(Zn){const Yi=[];let qi,Ui,Vi,Ki,Ir;if(ue)for(qi=0,Ui=Zn.length;qi<Ui;++qi){Ir=Zn[qi],Vi=Ir[4],Ki=this.createLabel(Vi,le,"",ue),U=Ir[2]+(bn[0]<0?-Ye:Ye),z=Me*Ki.height+(.5-Me)*2*Ye*bn[1]/bn[0]-bt;const Eo=this.calculateImageOrLabelDimensions_(Ki.width,Ki.height,Ir[0],Ir[1],Ki.width,Ki.height,U,z,0,0,Ir[3],at,!1,fb,!1,ut);if(c&&V==="declutter"&&c.collides(Eo.declutterBox))break e;Yi.push([e,t,Ki,Eo,1,null,null])}if(ve)for(qi=0,Ui=Zn.length;qi<Ui;++qi){Ir=Zn[qi],Vi=Ir[4],Ki=this.createLabel(Vi,le,ve,""),U=Ir[2],z=Me*Ki.height-bt;const Eo=this.calculateImageOrLabelDimensions_(Ki.width,Ki.height,Ir[0],Ir[1],Ki.width,Ki.height,U,z,0,0,Ir[3],at,!1,fb,!1,ut);if(c&&V==="declutter"&&c.collides(Eo.declutterBox))break e;Yi.push([e,t,Ki,Eo,1,null,null])}c&&V!=="none"&&c.load(Yi.map(LN));for(let Eo=0,cn=Yi.length;Eo<cn;++Eo)this.replayImageOrLabel_.apply(this,Yi[Eo])}}++v;break;case fr.END_GEOMETRY:if(s!==void 0){ut=Xe[1];const ji=s(ut,De,V);if(ji)return ji}++v;break;case fr.FILL:Ve?pe++:this.fill_(e),++v;break;case fr.MOVE_TO_LINE_TO:for(E=Xe[1],P=Xe[2],mt=p[E],Pe=p[E+1],e.moveTo(mt,Pe),Z=mt+.5|0,X=Pe+.5|0,E+=2;E<P;E+=2)mt=p[E],Pe=p[E+1],re=mt+.5|0,ee=Pe+.5|0,(E==P-2||re!==Z||ee!==X)&&(e.lineTo(mt,Pe),Z=re,X=ee);++v;break;case fr.SET_FILL_STYLE:this.alignAndScaleFill_=Xe[2],pe&&(this.fill_(e),pe=0,Be&&(e.stroke(),Be=0)),e.fillStyle=Xe[1],++v;break;case fr.SET_STROKE_STYLE:Be&&(e.stroke(),Be=0),this.setStrokeStyle_(e,Xe),++v;break;case fr.STROKE:Ve?Be++:e.stroke(),++v;break;default:++v;break}}pe&&this.fill_(e),Be&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const ob=["Polygon","Circle","LineString","Image","Text","Default"],UE=["Image","Text"],bCe=ob.filter(n=>!UE.includes(n));class rte{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Rd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new CCe(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=Og(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=wl(a,a));const p=this.hitDetectionContext_;p.canvas.width!==a||p.canvas.height!==a?(p.canvas.width=a,p.canvas.height=a):d||p.clearRect(0,0,a,a);let v;this.renderBuffer_!==void 0&&(v=Tm(),E4(v,e),Ov(v,t*(this.renderBuffer_+r),v));const M=_Ce(r);let E;function P(ee,ne,q){const le=p.getImageData(0,0,a,a).data;for(let ue=0,ve=M.length;ue<ve;ue++)if(le[M[ue]]>0){if(!s||q==="none"||E!=="Image"&&E!=="Text"||s.includes(ee)){const pe=(M[ue]-3)/4,Be=r-pe%a,Ce=r-(pe/a|0),Oe=o(ee,ne,Be*Be+Ce*Ce);if(Oe)return Oe}p.clearRect(0,0,a,a);break}}const U=Object.keys(this.executorsByZIndex_).map(Number);U.sort(Sg);let z,V,Z,X,re;for(z=U.length-1;z>=0;--z){const ee=U[z].toString();for(Z=this.executorsByZIndex_[ee],V=ob.length-1;V>=0;--V)if(E=ob[V],X=Z[E],X!==void 0&&(re=X.executeHitDetection(p,c,i,P,v),re))return re}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return Iv(a,0,8,2,e,a),a}isEmpty(){return Rv(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?vge:Sg),s=s||ob;const d=ob.length;for(let p=0,v=c.length;p<v;++p){const M=c[p].toString(),E=this.executorsByZIndex_[M];for(let P=0,U=s.length;P<U;++P){const z=s[P],V=E[z];if(V!==void 0){const Z=a===null?void 0:V.getZIndexContext(),X=Z?Z.getContext():e,re=this.maxExtent_&&z!=="Image"&&z!=="Text";if(re&&(X.save(),this.clip(X,i)),!Z||z==="Text"||z==="Image"?V.execute(X,t,i,r,o,a):Z.pushFunction(ee=>V.execute(ee,t,i,r,o,a)),re&&X.restore(),Z){Z.offset();const ee=c[p]*d+ob.indexOf(z);this.deferredZIndexContexts_[ee]||(this.deferredZIndexContexts_[ee]=[]),this.deferredZIndexContexts_[ee].push(Z)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Sg);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const V8={};function _Ce(n){if(V8[n]!==void 0)return V8[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return V8[n]=r,r}const xf=.5;function ote(n,e,t,i,r,o,s,a,c){const d=c?qU(r):r,p=n[0]*xf,v=n[1]*xf,M=wl(p,v);M.imageSmoothingEnabled=!1;const E=M.canvas,P=new Hve(M,xf,r,null,s,a,c?CM(b1e(),c):null),U=t.length,z=Math.floor((256*256*256-1)/U),V={};for(let X=1;X<=U;++X){const re=t[X-1],ee=re.getStyleFunction()||i;if(!ee)continue;let ne=ee(re,o);if(!ne)continue;Array.isArray(ne)||(ne=[ne]);const le=(X*z).toString(16).padStart(7,"#00000");for(let ue=0,ve=ne.length;ue<ve;++ue){const pe=ne[ue],Be=pe.getGeometryFunction()(re);if(!Be||!Hl(d,Be.getExtent()))continue;const Ce=pe.clone(),Oe=Ce.getFill();Oe&&Oe.setColor(le);const Fe=Ce.getStroke();Fe&&(Fe.setColor(le),Fe.setLineDash(null)),Ce.setText(void 0);const Ee=pe.getImage();if(Ee){const Pe=Ee.getImageSize();if(!Pe)continue;const De=wl(Pe[0],Pe[1],void 0,{alpha:!1}),Xe=De.canvas;De.fillStyle=le,De.fillRect(0,0,Xe.width,Xe.height),Ce.setImage(new wx({img:Xe,anchor:Ee.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ee.getOrigin(),opacity:1,size:Ee.getSize(),scale:Ee.getScale(),rotation:Ee.getRotation(),rotateWithView:Ee.getRotateWithView()}))}const Ve=Ce.getZIndex()||0;let ut=V[Ve];ut||(ut={},V[Ve]=ut,ut.Polygon=[],ut.Circle=[],ut.LineString=[],ut.Point=[]);const mt=Be.getType();if(mt==="GeometryCollection"){const Pe=Be.getGeometriesArrayRecursive();for(let De=0,Xe=Pe.length;De<Xe;++De){const Ke=Pe[De];ut[Ke.getType().replace("Multi","")].push(Ke,Ce)}}else ut[mt.replace("Multi","")].push(Be,Ce)}}const Z=Object.keys(V).map(Number).sort(Sg);for(let X=0,re=Z.length;X<re;++X){const ee=V[Z[X]];for(const ne in ee){const q=ee[ne];for(let le=0,ue=q.length;le<ue;le+=2){P.setStyle(q[le+1]);for(let ve=0,pe=e.length;ve<pe;++ve)P.setTransform(e[ve]),P.drawGeometry(q[le])}}}return M.getImageData(0,0,E.width,E.height)}function ste(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*xf),o=Math.floor(Math.round(n[1])*xf),s=(Ml(r,0,t.width-1)+Ml(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],p=t.data[s+2]+256*(c+256*a),v=Math.floor((256*256*256-1)/e.length);p&&p%v===0&&i.push(e[p/v-1])}return i}const xCe=5;class MCe extends yM{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=xCe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Br()}getData(e){return null}prepareFrame(e){return Br()}renderFrame(e,t){return Br()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Qi.LOADED||t.getState()===Qi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Qi.LOADED&&t!=Qi.ERROR&&e.addEventListener(Mr.CHANGE,this.boundHandleImageChange_),t==Qi.IDLE&&(e.load(),t=e.getState()),t==Qi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const FN=[];let O2=null;function wCe(){O2=wl(1,1,void 0,{willReadFrequently:!0})}class _L extends MCe{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Rd(),this.pixelTransform=Rd(),this.inversePixelTransform=Rd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){O2||wCe(),O2.clearRect(0,0,1,1);let r;try{O2.drawImage(e,t,i,1,1,0,0,1,1),r=O2.getImageData(0,0,1,1).data}catch{return O2=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Wv(_x(e.style.backgroundColor),_x(i)))){const a=e.firstElementChild;vv(a)&&(s=a.getContext("2d"))}if(s&&B1e(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=XA?wee():document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=wl();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=$1(i),o=vB(i),s=yB(i),a=gB(i);Gu(t.coordinateToPixelTransform,r),Gu(t.coordinateToPixelTransform,o),Gu(t.coordinateToPixelTransform,s),Gu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Gu(c,r),Gu(c,o),Gu(c,s),Gu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(Jo(i)/r*s),c=Math.round(qu(i)/r*s);Og(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),cee(this.inversePixelTransform,this.pixelTransform);const d=E1e(this.pixelTransform);if(this.useContainer(t,d,this.getBackground(e)),!this.containerReused){const p=this.context.canvas;p.width!=a||p.height!=c?(p.width=a,p.height=c):this.context.clearRect(0,0,a,c),d!==p.style.transform&&(p.style.transform=d)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new Vee(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(xm.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(xm.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new bL),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(xm.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(xm.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,d=s/2,p=r/t,v=-p,M=-e[0]+a,E=-e[1];return Og(this.tempTransform,c,d,p,v,-i,M,E)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class SCe extends _L{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Tm(),this.wrappedRenderedExtent_=Tm(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,d=o.rotation,p=c.getExtent(),v=this.getLayer().getSource(),M=this.getLayer().getDeclutter(),E=t.pixelRatio,P=t.viewHints,U=!(P[ll.ANIMATING]||P[ll.INTERACTING]),z=this.context,V=Math.round(Jo(r)/a*E),Z=Math.round(qu(r)/a*E),X=v.getWrapX()&&c.canWrapX(),re=X?Jo(p):null,ee=X?Math.ceil((r[2]-p[2])/re)+1:1;let ne=X?Math.floor((r[0]-p[0])/re):0;do{let q=this.getRenderTransform(s,a,0,E,V,Z,ne*re);t.declutter&&(q=q.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],q,d,U,i===void 0?ob:i?UE:bCe,i?M&&t.declutter[M]:void 0)}while(++ne<ee)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=wl(this.context.canvas.width,this.context.canvas.height,FN))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,_M(this.context),FN.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(xm.PRERENDER)||this.getLayer().hasListener(xm.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=fg(i.extent);a=Hl(c,e.extent),this.clipped_=a&&!dg(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,d=this.getLayer(),p=[],v=i[0]*xf,M=i[1]*xf;p.push(this.getRenderTransform(r,o,s,xf,v,M,0).slice());const E=d.getSource(),P=a.getExtent();if(E.getWrapX()&&a.canWrapX()&&!dg(P,c)){let U=c[0];const z=Jo(P);let V=0,Z;for(;U<P[0];)--V,Z=z*V,p.push(this.getRenderTransform(r,o,s,xf,v,M,Z).slice()),U+=z;for(V=0,U=c[2];U>P[2];)++V,Z=z*V,p.push(this.getRenderTransform(r,o,s,xf,v,M,Z).slice()),U-=z}this.hitDetectionImageData_=ote(i,p,this.renderedFeatures_,d.getStyleFunction(),c,o,s,tR(o,this.renderedPixelRatio_),null)}t(ste(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),d={},p=function(M,E,P){const U=zr(M),z=d[U];if(z){if(z!==!0&&P<z.distanceSq){if(P===0)return d[U]=!0,o.splice(o.lastIndexOf(z),1),r(M,c,E);z.geometry=E,z.distanceSq=P}}else{if(P===0)return d[U]=!0,r(M,c,E);o.push(d[U]={feature:M,layer:c,geometry:E,distanceSq:P,callback:r})}},v=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,p,v?t.declutter?.[v]?.all().map(M=>M.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[ll.ANIMATING],o=e.viewHints[ll.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,d=e.viewState,p=d.projection,v=d.resolution,M=e.pixelRatio,E=t.getRevision(),P=t.getRenderBuffer();let U=t.getRenderOrder();U===void 0&&(U=Xve);const z=d.center.slice(),V=Ov(c,P*v),Z=V.slice(),X=[V.slice()],re=p.getExtent();if(i.getWrapX()&&p.canWrapX()&&!dg(re,e.extent)){const Oe=Jo(re),Fe=Math.max(Jo(V)/2,Oe);V[0]=re[0]-Fe,V[2]=re[2]+Fe,jU(z,p);const Ee=JJ(X[0],p);Ee[0]<re[0]&&Ee[2]<re[2]?X.push([Ee[0]+Oe,Ee[1],Ee[2]+Oe,Ee[3]]):Ee[0]>re[0]&&Ee[2]>re[2]&&X.push([Ee[0]-Oe,Ee[1],Ee[2]-Oe,Ee[3]])}if(this.ready&&this.renderedResolution_==v&&this.renderedRevision_==E&&this.renderedRenderOrder_==U&&this.renderedFrameDeclutter_===!!e.declutter&&dg(this.wrappedRenderedExtent_,V))return Wv(this.renderedExtent_,Z)||(this.hitDetectionImageData_=null,this.renderedExtent_=Z),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const ee=new ite(ete(v,M),V,v,M);let ne;for(let Oe=0,Fe=X.length;Oe<Fe;++Oe)i.loadFeatures(X[Oe],v,p);const q=tR(v,M);let le=!0;const ue=((Oe,Fe)=>{let Ee;const Ve=Oe.getStyleFunction()||t.getStyleFunction();if(Ve&&(Ee=Ve(Oe,v)),Ee){const ut=this.renderFeature(Oe,q,Ee,ee,ne,this.getLayer().getDeclutter(),Fe);le=le&&!ut}}),ve=qU(V),pe=i.getFeaturesInExtent(ve);U&&pe.sort(U);for(let Oe=0,Fe=pe.length;Oe<Fe;++Oe)ue(pe[Oe],Oe);this.renderedFeatures_=pe,this.ready=le;const Be=ee.finish(),Ce=new rte(V,v,M,i.getOverlaps(),Be,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=v,this.renderedRevision_=E,this.renderedRenderOrder_=U,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=Z,this.wrappedRenderedExtent_=V,this.renderedCenter_=z,this.renderedProjection_=p,this.renderedPixelRatio_=M,this.replayGroup_=Ce,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let d=0,p=i.length;d<p;++d)c=RE(r,e,i[d],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=RE(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class xL extends vL{constructor(e){super(e)}createRenderer(){return new SCe(this)}}class ECe extends gL{constructor(e,t,i,r,o){const s=o!==void 0?Qi.IDLE:Qi.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Qi.ERROR):this.state=Qi.LOADED,this.changed()}load(){this.state==Qi.IDLE&&(this.state=Qi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}let OM=class extends gM{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Mr.CHANGE)}release(){this.setState(ai.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ai.EMPTY){if(this.state!==ai.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Br()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:tee(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}};class ate extends OM{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_,XA?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,r!==null&&(this.image_.crossOrigin=r)),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ai.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=ai.ERROR,this.unlistenImage_(),this.image_=BCe(),this.changed()}handleImageLoad_(){if(XA)this.state=ai.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ai.LOADED:this.state=ai.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==ai.ERROR&&(this.state=ai.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ai.IDLE&&(this.state=ai.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=mve(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function BCe(){const n=wl(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const QA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class OCe extends Vp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+X1e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(QA.ELEMENT,this.handleElementChanged),this.addChangeListener(QA.MAP,this.handleMapChanged),this.addChangeListener(QA.OFFSET,this.handleOffsetChanged),this.addChangeListener(QA.POSITION,this.handlePositionChanged),this.addChangeListener(QA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(QA.ELEMENT)}getId(){return this.id}getMap(){return this.get(QA.MAP)||null}getOffset(){return this.get(QA.OFFSET)}getPosition(){return this.get(QA.POSITION)}getPositioning(){return this.get(QA.POSITIONING)}handleElementChanged(){Mee(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),xa(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=qo(e,O1.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(QA.ELEMENT,e)}setMap(e){this.set(QA.MAP,e)}setOffset(e){this.set(QA.OFFSET,e)}setPosition(e){this.set(QA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(QA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[eye(r),tye(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!dg(i,o)){const a=o[0]-i[0],c=i[2]-o[2],d=o[1]-i[1],p=i[3]-o[3],v=[0,0];if(a<0?v[0]=a-s:c<0&&(v[0]=Math.abs(c)+s),d<0?v[1]=d-s:p<0&&(v[1]=Math.abs(p)+s),v[0]!==0||v[1]!==0){const M=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(M);if(!E)return;const P=[E[0]+v[0],E[1]+v[1]],U=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(P),duration:U.duration,easing:U.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(QA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",d="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?d="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(d="-50%");const p=`translate(${c}, ${d}) translate(${s}, ${a})`;this.rendered.transform_!=p&&(this.rendered.transform_=p,i.transform=p)}getOptions(){return this.options}}class ML{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function H_(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new ML(n,e,t,i)}const zN=[];class ICe extends OM{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=wl(1,1,zN)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=zr(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(_M(this.context_),zN.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let lte=class extends OM{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ai.IDLE&&(this.setState(ai.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ai.ERROR)}setFeatures(e){this.features_=e,this.setState(ai.LOADED)}setLoader(e){this.loader_=e}};const ute="https://api.mapbox.com";function wL(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function TCe(n,e,t){if(typeof n=="string")return[{id:"default",url:jN(n,e,t)}];for(const i of n)i.url=jN(i.url,e,t);return n}function jN(n,e,t){const i=wL(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${ute}/styles/v1/${o}/sprite?access_token=${e}`}function LE(n,e){const t=wL(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${ute}/styles/v1/${r}?&access_token=${e}`}const kCe=["a","b","c","d"];function TS(n,e,t,i){const r=new URL(n,i||location.href),o=wL(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return kCe.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const VA=Object.freeze({}),NN={},GN={};let DCe=0;function SL(n){return n.id||(n.id=DCe++),n.id}function RCe(n,e){return SL(n)+"."+zr(e)}function cte(n){let e=NN[n.id];return e||(e={},NN[SL(n)]=e),e}function PCe(n){let e=GN[n.id];return e||(e={},GN[SL(n)]=e),e}function $8(n){return n*Math.PI/180}const zp=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function DB(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function KE(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function a4(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const Z_={};function Sx(n,e,t={},i){if(e in Z_)return i&&(i.url=Z_[e][0].url),Z_[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete Z_[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete Z_[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=Cx(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return Z_[e]=[r,a],a}function Ate(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=LE(n,e.accessToken),Sx("Style",n,e);else return Promise.resolve(n)}const WN={};function hte(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=WN[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const d=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof lte)a.setLoader((p,v,M)=>{const E=function(P){P.arrayBuffer().then(U=>{const V=a.getFormat().readFeatures(U,{extent:p,featureProjection:M});a.setFeatures(V)})};Cx(()=>d).then(P=>{if(P instanceof Response)return E(P);fetch(P).then(E).catch(U=>a.setState(ai.ERROR))}).catch(P=>a.setState(ai.ERROR))});else{const p=a.getImage();Cx(()=>d).then(v=>{if(typeof v=="string"){p.src=v;return}const M=E=>E.blob().then(P=>{const U=URL.createObjectURL(P);p.addEventListener("load",()=>URL.revokeObjectURL(U)),p.addEventListener("error",()=>URL.revokeObjectURL(U)),p.src=U});if(v instanceof Response)return M(v);fetch(v).then(M).catch(E=>a.setState(ai.ERROR))}).catch(v=>a.setState(ai.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=TS(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=Sx("Source",a[0],t,c).then(function(d){return d.tiles=d.tiles.map(function(p){return d.scheme==="tms"&&(p=p.replace("{y}","{-y}")),TS(p,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:d,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),TS(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));WN[i]=r}return r}function QN(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=DB(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let d=0,p=a.width;d<p;++d)for(let v=0,M=a.height;v<M;++v){const E=(v*p+d)*4;c[E+3]>0&&s.arc(d,v,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function UCe(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function qN(n,e,t){const i=DB(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let d=0,p=o.height;d<p;++d){const v=(d*c+a)*4,M=s[v+3]/255,E=.75,P=.1,U=UCe(E-P,E+P,M);U>0?(s[v+0]=Math.round(255*t.r*U),s[v+1]=Math.round(255*t.g*U),s[v+2]=Math.round(255*t.b*U),s[v+3]=Math.round(255*U)):s[v+3]=0}return r.putImageData(o,0,0),i}const LCe=Array(256).join("");function nR(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=LCe.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let H8;function dte(){return H8||(H8=DB(1,1).getContext("2d")),H8}function $C(n,e){return dte().measureText(n).width+(n.length-1)*e}const FE={};rb.on("propertychange",()=>{for(const n in FE)delete FE[n]});function iR(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,d=s.length;c<d;++c)a.push(iR(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=FE[r];if(!o){const s=n.split(" ");if(s.length>1){const a=dte();a.font=e;const d=a.measureText("M").width*t;let p="";const v=[];for(let M=0,E=s.length;M<E;++M){const P=s[M],U=p+(p?" ":"")+P;$C(U,i)<=d?p=U:(p&&v.push(p),p=P)}p&&v.push(p);for(let M=0,E=v.length;M<E&&E>1;++M){const P=v[M];if($C(P,i)<d*.35){const U=M>0?$C(v[M-1],i):1/0,z=M<E-1?$C(v[M+1],i):1/0;v.splice(M,1),E-=1,U<z?(v[M-1]+=" "+P,M-=1):v[M]=P+" "+v[M]}}for(let M=0,E=v.length-1;M<E;++M){const P=v[M],U=v[M+1];if($C(P,i)>d*.7&&$C(U,i)<d*.6){const z=P.split(" "),V=z.pop();$C(V,i)<d*.2&&(v[M]=z.join(" "),v[M+1]=V+" "+U),E-=1}}o=v.join(`
`)}else o=n;o=nR(o,i),FE[r]=o}return o}const KCe=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],YN={};function FCe(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){if(XA)return n;let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in YN)continue;YN[o]=!0;const a=DD(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(KCe.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(p=>p.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&p.weight==a&&p.style===c)){const p=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+p+'"]')){const v=document.createElement("link");v.href=p,v.rel="stylesheet",document.head.appendChild(v)}}}})(),n}const zCe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},jCe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},NCe=function(n,e){const t=rge(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Uh={zoom:0,distanceFromCenter:0};wf.register(hB,{...wf.definitions,pitch:[{kind:"number"},[],n=>Uh.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Uh.distanceFromCenter||0]});let Mw,Z8;function Wi(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||VA)[t];const d=gge[`${e}_${n.type}`][t];c===void 0&&(c=d.default);let p=ige(c);if(!p&&LJ(c)&&(c=Age(c,d),p=!0),p){const v=NCe(c,d);a[t]=v.evaluate.bind(v)}else{const v=d.type;(v==="color"||v==="colorArray")&&(c=Fs.parse(c)),a[t]=function(){return c}}}return a[t](Uh,i,o)}function VN(n,e,t,i){return Wi(n,"layout",`${t}-allow-overlap`,e,i)?Wi(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function GCe(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=lge(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Uh,t)}function lv(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const WCe=/\{[^{}}]*\}/g;function X8(n,e){return n.replace(WCe,function(t){return e[t.slice(1,-1)]||""})}function $N(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const QCe={};function qCe(n,e,t,i=zp,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");QCe[RCe(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const ee in o){const ne=o[ee];Cx(()=>ne).then(async q=>{let le;if(typeof Image<"u"){const ue=new Image;if(typeof q=="string")ue.crossOrigin="anonymous",ue.src=q;else{let ve;q instanceof Request?ve=await fetch(q):q instanceof Response&&(ve=q);const pe=await ve.blob();le=URL.createObjectURL(pe),ue.src=le}ue.addEventListener("load",function ve(){ue.removeEventListener("load",ve),c[ee]={image:ue,size:[ue.width,ue.height]},n.changed(),le&&URL.revokeObjectURL(le)}),ue.addEventListener("error",function ve(){URL.revokeObjectURL(le),ue.removeEventListener("error",ve)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ue=self;ue.postMessage({action:"loadImage",src:q}),ue.addEventListener("message",function(pe){pe.data.action==="imageLoaded"&&pe.data.src===q&&(c[ee]={image:pe.data.image,size:[pe.data.image.width,pe.data.image.height]})})}})}const d=gJ(e.layers),p={},v=[],M={},E={},P=cte(e),U=PCe(e);let z;for(let ee=0,ne=d.length;ee<ne;++ee){const q=d[ee],le=q.id;if(typeof t=="string"&&q.source==t||Array.isArray(t)&&t.indexOf(le)!==-1){const ue=q["source-layer"];if(z){if(q.source!==z)throw new Error(`Layer "${le}" does not use source "${z}`)}else{z=q.source;const pe=e.sources[z];if(!pe)throw new Error(`Source "${z}" is not defined`);const Be=pe.type;if(Be!=="vector"&&Be!=="geojson")throw new Error(`Source "${z}" is not of type "vector" or "geojson", but "${Be}"`)}let ve=p[ue];ve||(ve=[],p[ue]=ve),ve.push({layer:q,index:ee}),v.push(le)}}const V=new Cv,Z=new pg,X=[],re=function(ee,ne,q){const le=n.getSource?.()?.format_?.layerName_??"mvt:layer",ue=ee.getProperties(),ve=p[ue[le]];if(!ve)return;let pe=i.indexOf(ne);pe==-1&&(pe=KE(ne,i)),Uh.zoom=pe,Uh.distanceFromCenter=0;const Be=ee.getGeometry(),Ce=zCe[Be.getType()],Oe=n.get("map");if(Oe&&Oe instanceof C5&&Ce===1){const ut=Oe.getSize();if(ut){const mt=Oe.getView().getCenter(),Pe=Of(Be.getExtent());Uh.distanceFromCenter=Nge(mt,Pe)/ne/ut[1]}}const Fe={id:ee.getId(),properties:ue,type:Ce},Ee=n.get("mapbox-featurestate")[ee.getId()];let Ve=-1;for(let ut=0,mt=ve.length;ut<mt;++ut){const Pe=ve[ut],De=Pe.layer,Xe=De.id;if(q!==void 0&&q!==Xe)continue;const Ke=De.layout||VA,Bt=De.paint||VA;if(Ke.visibility==="none"||"minzoom"in De&&pe<De.minzoom||"maxzoom"in De&&pe>=De.maxzoom)continue;const ot=De.filter;if(!ot||GCe(Xe,ot,Fe,U)){let Et,Rt,Ue,ke,Te,He;const Ct=Pe.index;if(Ce==3&&(De.type=="fill"||De.type=="fill-extrusion"))if(Rt=Wi(De,"paint",De.type+"-opacity",Fe,P,Ee),De.type+"-pattern"in Bt){const Tn=Wi(De,"paint",De.type+"-pattern",Fe,P,Ee);if(Tn){const je=typeof Tn=="string"?X8(Tn,ue):Tn.toString(),$=$N(je,c);if(r&&r[je]&&$){++Ve,He=X[Ve],(!He||!He.getFill()||He.getStroke()||He.getText())&&(He=new vf({fill:new pg}),X[Ve]=He),Ue=He.getFill(),He.setZIndex(Ct);const j=je+"."+Rt;let Q=E[j];if(!Q){const Ae=r[je],Me=DB(Ae.width,Ae.height),Ne=Me.getContext("2d");Ne.globalAlpha=Rt,Ne.drawImage($.image,Ae.x,Ae.y,Ae.width,Ae.height,0,0,Ae.width,Ae.height),Q=Ne.createPattern(Me,"repeat"),E[j]=Q}Ue.setColor(Q)}}}else Et=lv(Wi(De,"paint",De.type+"-color",Fe,P,Ee),Rt),De.type+"-outline-color"in Bt&&(Te=lv(Wi(De,"paint",De.type+"-outline-color",Fe,P,Ee),Rt)),Te||(Te=Et),(Et||Te)&&(++Ve,He=X[Ve],(!He||Et&&!He.getFill()||!Et&&He.getFill()||Te&&!He.getStroke()||!Te&&He.getStroke()||He.getText())&&(He=new vf({fill:Et?new pg:void 0,stroke:Te?new Cv:void 0}),X[Ve]=He),Et&&(Ue=He.getFill(),Ue.setColor(Et)),Te&&(ke=He.getStroke(),ke.setColor(Te),ke.setWidth(.5)),He.setZIndex(Ct));if(Ce!=1&&De.type=="line"){"line-pattern"in Bt?Et=void 0:Et=lv(Wi(De,"paint","line-color",Fe,P,Ee),Wi(De,"paint","line-opacity",Fe,P,Ee));const Tn=Wi(De,"paint","line-width",Fe,P,Ee);Et&&Tn>0&&(++Ve,He=X[Ve],(!He||!He.getStroke()||He.getFill()||He.getText())&&(He=new vf({stroke:new Cv}),X[Ve]=He),ke=He.getStroke(),ke.setLineCap(Wi(De,"layout","line-cap",Fe,P,Ee)),ke.setLineJoin(Wi(De,"layout","line-join",Fe,P,Ee)),ke.setMiterLimit(Wi(De,"layout","line-miter-limit",Fe,P,Ee)),ke.setColor(Et),ke.setWidth(Tn),ke.setLineDash(Bt["line-dasharray"]?Wi(De,"paint","line-dasharray",Fe,P,Ee).map(function(je){return je*Tn}):null),He.setZIndex(Ct))}let vt=!1,wt=null,Ft=0,Pt,nn,Kn;if((Ce==1||Ce==2)&&"icon-image"in Ke){const Tn=Wi(De,"layout","icon-image",Fe,P,Ee);if(Tn){Pt=typeof Tn=="string"?X8(Tn,ue):Tn.toString();let je;const $=a?a(n,Pt):void 0,j=$N(Pt,c);if(r&&r[Pt]&&j||$){const Q=Wi(De,"layout","icon-rotation-alignment",Fe,P,Ee);if(Ce==2){const Ae=ee.getGeometry();if(Ae.getFlatMidpoint||Ae.getFlatMidpoints){const Me=Ae.getExtent();if(Math.sqrt(Math.max(Math.pow((Me[2]-Me[0])/ne,2),Math.pow((Me[3]-Me[1])/ne,2)))>150){const We=Ae.getType()==="MultiLineString"?Ae.getFlatMidpoints():Ae.getFlatMidpoint();if(Z8||(Mw=[NaN,NaN],Z8=new ZA("Point",Mw,[],2,{},void 0)),je=Z8,Mw[0]=We[0],Mw[1]=We[1],Wi(De,"layout","symbol-placement",Fe,P,Ee)==="line"&&Q==="map"){const bt=Ae.getStride(),Ye=Ae.getFlatCoordinates();for(let at=0,C=Ye.length-bt;at<C;at+=bt){const Ut=Ye[at],gn=Ye[at+1],bn=Ye[at+bt],_n=Ye[at+bt+1],Mt=Math.min(Ut,bn),xi=Math.max(Ut,bn),ji=We[0],Qn=We[1],Zn=(_n-gn)*(ji-Ut)-(bn-Ut)*(Qn-gn);if(Math.abs(Zn)<.001&&ji<=xi&&ji>=Mt){Ft=Math.atan2(gn-_n,bn-Ut);break}}}}}}if(Ce!==2||je){const Ae=Wi(De,"layout","icon-size",Fe,P,Ee),Me=Bt["icon-color"]!==void 0?Wi(De,"paint","icon-color",Fe,P,Ee):null;if(!Me||Me.a!==0){const Ne=Wi(De,"paint","icon-halo-color",Fe,P,Ee),We=Wi(De,"paint","icon-halo-width",Fe,P,Ee);let it=`${Pt}.${Ae}.${We}.${Ne}`;if(Me!==null&&(it+=`.${Me}`),nn=M[it],!nn){const bt=VN(De,Fe,"icon",P);let Ye;"icon-offset"in Ke&&(Ye=Wi(De,"layout","icon-offset",Fe,P,Ee).slice(0),Ye[0]*=Ae,Ye[1]*=-Ae);let at=Me?[Me.r*255,Me.g*255,Me.b*255,Me.a]:void 0;if($){const C={color:at,rotateWithView:Q==="map",displacement:Ye,declutterMode:bt,scale:Ae};typeof $=="string"?C.src=$:(C.img=$,C.imgSize=[$.width,$.height]),nn=new wx(C)}else{const C=r[Pt];let Ut,gn,bn;if(We)C.sdf?(Ut=QN(qN(j.image,C,Me||[0,0,0,1]),{x:0,y:0,width:C.width,height:C.height,pixelRatio:C.pixelRatio},We,Ne),at=void 0):Ut=QN(j.image,C,We,Ne);else{if(C.sdf&&!j.unSDFed){const _n=qN(j.image,{x:0,y:0,width:j.size[0],height:j.size[1]},{r:1,g:1,b:1});j.image=_n,j.unSDFed=!0}Ut=j.image,gn=[C.width,C.height],bn=[C.x,C.y]}nn=new wx({color:at,img:Ut,imgSize:j.size,size:gn,offset:bn,rotateWithView:Q==="map",scale:Ae/C.pixelRatio,displacement:Ye,declutterMode:bt})}M[it]=nn}}nn&&(++Ve,He=X[Ve],(!He||!He.getImage()||He.getFill()||He.getStroke())&&(He=new vf,X[Ve]=He),He.setGeometry(je),nn.setRotation(Ft+$8(Wi(De,"layout","icon-rotate",Fe,P,Ee))),nn.setOpacity(Wi(De,"paint","icon-opacity",Fe,P,Ee)),nn.setAnchor(jCe[Wi(De,"layout","icon-anchor",Fe,P,Ee)]),He.setImage(nn),wt=He.getText(),He.setText(void 0),He.setZIndex(Ct),vt=!0,Kn=!1)}else Kn=!0}}}if(Ce==1&&De.type==="circle"){++Ve,He=X[Ve],(!He||!He.getImage()||He.getFill()||He.getStroke())&&(He=new vf,X[Ve]=He);const Tn="circle-radius"in Bt?Wi(De,"paint","circle-radius",Fe,P,Ee):5,je=lv(Wi(De,"paint","circle-stroke-color",Fe,P,Ee),Wi(De,"paint","circle-stroke-opacity",Fe,P,Ee)),$=Wi(De,"paint","circle-translate",Fe,P,Ee),j=lv(Wi(De,"paint","circle-color",Fe,P,Ee),Wi(De,"paint","circle-opacity",Fe,P,Ee)),Q=Wi(De,"paint","circle-stroke-width",Fe,P,Ee),Ae=Tn+"."+je+"."+j+"."+Q+"."+$[0]+"."+$[1];nn=M[Ae],nn||(nn=new wM({radius:Tn,displacement:[$[0],-$[1]],stroke:je&&Q>0?new Cv({width:Q,color:je}):void 0,fill:j?new pg({color:j}):void 0,declutterMode:"none"}),M[Ae]=nn),He.setImage(nn),wt=He.getText(),He.setText(void 0),He.setGeometry(void 0),He.setZIndex(Ct),vt=!0}let Wn,Mi,Fn,Ln,In,oi;if("text-field"in Ke){Ln=Math.round(Wi(De,"layout","text-size",Fe,P,Ee));const Tn=Wi(De,"layout","text-font",Fe,P,Ee);Fn=Wi(De,"layout","text-line-height",Fe,P,Ee),Mi=DD(s?s(Tn,e.metadata?e.metadata["ol:webfonts"]:void 0):Tn,Ln,Fn),Mi.includes("sans-serif")||(Mi+=",sans-serif"),In=Wi(De,"layout","text-letter-spacing",Fe,P,Ee),oi=Wi(De,"layout","text-max-width",Fe,P,Ee);const je=Wi(De,"layout","text-field",Fe,P,Ee);typeof je=="object"&&je.sections?je.sections.length===1?Wn=je.toString():Wn=je.sections.reduce(($,j,Q)=>{const Ae=j.fontStack?j.fontStack.split(","):Tn,Me=DD(s?s(Ae):Ae,Ln*(j.scale||1),Fn);let Ne=j.text;if(Ne===`
`)return $.push(`
`,""),$;if(Ce==2)return $.push(nR(Ne,In),Me),$;Ne=iR(Ne,Me,oi,In).split(`
`);for(let We=0,it=Ne.length;We<it;++We)We>0&&$.push(`
`,""),$.push(Ne[We],Me);return $},[]):Wn=X8(je,ue).trim(),Rt=Wi(De,"paint","text-opacity",Fe,P,Ee)}if(Wn&&Rt&&!Kn){vt||(++Ve,He=X[Ve],(!He||!He.getText()||He.getFill()||He.getStroke())&&(He=new vf,X[Ve]=He),He.setImage(void 0),He.setGeometry(void 0));const Tn=VN(De,Fe,"text",P);He.getText()||He.setText(wt),wt=He.getText(),(!wt||"getDeclutterMode"in wt&&wt.getDeclutterMode()!==Tn)&&(wt=new Nee({padding:[2,2,2,2],declutterMode:Tn}),He.setText(wt));const je=Wi(De,"layout","text-transform",Fe,P,Ee);je=="uppercase"?Wn=Array.isArray(Wn)?Wn.map((bn,_n)=>_n%2?bn:bn.toUpperCase()):Wn.toUpperCase():je=="lowercase"&&(Wn=Array.isArray(Wn)?Wn.map((bn,_n)=>_n%2?bn:bn.toLowerCase()):Wn.toLowerCase());const $=Array.isArray(Wn)?Wn:Ce==2?nR(Wn,In):iR(Wn,Mi,oi,In);if(wt.setText($),wt.setFont(Mi),wt.setRotation($8(Wi(De,"layout","text-rotate",Fe,P,Ee))),typeof wt.setKeepUpright=="function"){const bn=Wi(De,"layout","text-keep-upright",Fe,P,Ee);wt.setKeepUpright(bn)}const j=Wi(De,"layout","text-anchor",Fe,P,Ee),Q=vt||Ce==1?"point":Wi(De,"layout","symbol-placement",Fe,P,Ee);let Ae;if(Q==="line-center"?(wt.setPlacement("line"),Ae="center"):wt.setPlacement(Q),Q==="line"&&typeof wt.setRepeat=="function"){const bn=Wi(De,"layout","symbol-spacing",Fe,P,Ee);wt.setRepeat(bn*2)}wt.setOverflow(Q==="point");let Me=Wi(De,"paint","text-halo-width",Fe,P,Ee);const Ne=Wi(De,"layout","text-offset",Fe,P,Ee),We=Wi(De,"paint","text-translate",Fe,P,Ee);let it=0,bt=0;if(Q=="point"){Ae="center",j.indexOf("left")!==-1?(Ae="left",bt=Me):j.indexOf("right")!==-1&&(Ae="right",bt=-Me);const bn=Wi(De,"layout","text-rotation-alignment",Fe,P,Ee);wt.setRotateWithView(bn=="map")}else wt.setMaxAngle($8(Wi(De,"layout","text-max-angle",Fe,P,Ee))*Wn.length/$.length),wt.setRotateWithView(!1);wt.setTextAlign(Ae);let Ye="middle";j.indexOf("bottom")==0?(Ye="bottom",it=-Me-.5*(Fn-1)*Ln):j.indexOf("top")==0&&(Ye="top",it=Me+.5*(Fn-1)*Ln),wt.setTextBaseline(Ye);const at=Wi(De,"layout","text-justify",Fe,P,Ee);wt.setJustify(at==="auto"?void 0:at),wt.setOffsetX(Ne[0]*Ln+bt+We[0]),wt.setOffsetY(Ne[1]*Ln+it+We[1]),Z.setColor(lv(Wi(De,"paint","text-color",Fe,P,Ee),Rt)),wt.setFill(Z);const C=lv(Wi(De,"paint","text-halo-color",Fe,P,Ee),Rt);if(C&&Me>0){V.setColor(C),Me*=2;const bn=.5*Ln;V.setWidth(Me<=bn?Me:bn),wt.setStroke(V)}else wt.setStroke(void 0);const Ut=Wi(De,"layout","text-padding",Fe,P,Ee),gn=wt.getPadding();Ut!==gn[0]&&(gn[0]=Ut,gn[1]=Ut,gn[2]=Ut,gn[3]=Ut),He.setZIndex(Ct)}}}if(Ve>-1)return X.length=Ve+1,X};return n.setStyle(re),n.set("mapbox-layers",v),n.set("mapbox-source",z),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),re}class fte{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=kB,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?zs(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=zs(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Br()}readFeature(e,t){return Br()}readFeatures(e,t){return Br()}readGeometry(e,t){return Br()}readProjection(e){return Br()}writeFeature(e,t){return Br()}writeFeatures(e,t){return Br()}writeGeometry(e,t){return Br()}}function RB(n,e,t){const i=t?zs(t.featureProjection):null,r=t?zs(t.dataProjection):null;let o=n;if(i&&r&&!HA(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(zb(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let d=0,p=c.length;d<p;++d)c[d]=Math.round(c[d]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const YCe={Point:jb,LineString:Gb,Polygon:Q1,MultiPoint:EM,MultiLineString:b5,MultiPolygon:_5};function VCe(n,e,t){return Array.isArray(e[0])?(bee(n,0,e,t)||(n=n.slice(),YD(n,0,e,t)),n):(iL(n,0,e,t)||(n=n.slice(),SE(n,0,e,t)),n)}function mte(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>mte({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return RB(new ZA(i,i==="Polygon"?VCe(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function EL(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>EL(r,e));return new DE(i)}const t=YCe[n.type];return RB(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class $Ce extends fte{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(ww(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(ww(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Br()}readFeaturesFromObject(e,t){return Br()}readGeometry(e,t){return this.readGeometryFromObject(ww(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Br()}readProjection(e){return this.readProjectionFromObject(ww(e))}readProjectionFromObject(e){return Br()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Br()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Br()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Br()}}function ww(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class HN extends $Ce{constructor(e){e=e||{},super(),this.dataProjection=zs(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=zs(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=BL(i.geometry);if(this.featureClass===ZA)return mte({geometry:r,id:i.id,properties:i.properties},t);const o=new kB;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(EL(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const d=this.readFeatureFromObject(s[a],t);d&&r.push(d)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return HCe(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=zs(t.properties.name);else if(t.type==="EPSG")i=zs("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=rR(s,t),delete o[e.getGeometryName()]),Rv(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return rR(e,this.adaptOptions(t))}}function BL(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=XCe(n);break}case"LineString":{t=JCe(n);break}case"Polygon":{t=ibe(n);break}case"MultiPoint":{t=tbe(n);break}case"MultiLineString":{t=ebe(n);break}case"MultiPolygon":{t=nbe(n);break}case"GeometryCollection":{t=ZCe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function HCe(n,e){const t=BL(n);return EL(t,e)}function ZCe(n,e){return n.geometries.map(function(i){return BL(i)})}function XCe(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:e_(e.length)}}function JCe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:e_(e[0]?.length||2)}}function ebe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=bM(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:e_(t)}}function tbe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:e_(e[0]?.length||2)}}function nbe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=mee(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:e_(i)}}function ibe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=bM(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:e_(i)}}function rR(n,e){n=RB(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=ube(n);break}case"LineString":{i=obe(n);break}case"Polygon":{i=cbe(n,e);break}case"MultiPoint":{i=abe(n);break}case"MultiLineString":{i=sbe(n);break}case"MultiPolygon":{i=lbe(n,e);break}case"GeometryCollection":{i=rbe(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function rbe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return rR(i,e)})}}function obe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function sbe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function abe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function lbe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function ube(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function cbe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const oR=65536*65536,ZN=1/oR,Abe=12,XN=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),J8=0,Sw=1,D3=2,Ew=5;class hbe{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*oR;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*oR;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,dbe(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Abe&&XN?XN.decode(this.buf.subarray(t,e)):Sbe(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===D3?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===J8)for(;this.buf[this.pos++]>127;);else if(t===D3)this.pos=this.readVarint()+this.pos;else if(t===Ew)this.pos+=4;else if(t===Sw)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ZN),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ZN),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){fbe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Ebe(this.buf,e,this.pos);const i=this.pos-t;i>=128&&JN(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&JN(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,D3),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,gbe,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,ybe,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,bbe,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,vbe,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Cbe,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,_be,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,xbe,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Mbe,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,wbe,t)}writeBytesField(e,t){this.writeTag(e,D3),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,Ew),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,Ew),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,Sw),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,Sw),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,J8),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,J8),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,D3),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,Ew),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,Sw),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function dbe(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return X_(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function X_(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function fbe(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),mbe(t,i,e),pbe(i,e)}function mbe(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function pbe(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function JN(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function gbe(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function ybe(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function vbe(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Cbe(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function bbe(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function _be(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function xbe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Mbe(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function wbe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function Sbe(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,d,p;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],d=n[r+2],(c&192)===128&&(d&192)===128&&(s=(o&15)<<12|(c&63)<<6|d&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],d=n[r+2],p=n[r+3],(c&192)===128&&(d&192)===128&&(p&192)===128&&(s=(o&15)<<18|(c&63)<<12|(d&63)<<6|p&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function Ebe(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class pte extends fte{constructor(e){super(),e=e||{},this.dataProjection=new CB({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:ZA,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,d=0,p=0,v=0;for(;e.pos<o;){if(!a){const M=e.readVarint();s=M&7,a=M>>3}if(a--,s===1||s===2)c+=e.readSVarint(),d+=e.readSVarint(),s===1&&p>v&&(r.push(p),v=p),i.push(c,d),p+=2;else if(s===7)p>v&&(i.push(i[v],i[v+1]),p+=2);else throw new Error("Invalid command found in the PBF")}p>v&&(r.push(p),v=p)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],d=[];this.readRawGeometry_(e,t,c,d);const p=kbe(r,d.length);if(this.featureClass===ZA)o=new this.featureClass(p,c,d,2,s,a),o.transform(i.dataProjection);else{let v;if(p=="Polygon"){const P=_ee(c,d);v=P.length>1?new _5(c,"XY",P):new Q1(c,"XY",d)}else v=p==="Point"?new jb(c,"XY"):p==="LineString"?new Gb(c,"XY"):p==="MultiPoint"?new EM(c,"XY"):p==="MultiLineString"?new b5(c,"XY",d):null;const M=this.featureClass;o=new M,this.geometryName_&&o.setGeometryName(this.geometryName_);const E=RB(v,!1,i);o.setGeometry(E),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=zs(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new hbe(e),s=o.readFields(Bbe,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const d=s[c],p=d?[0,0,d.extent,d.extent]:null;r.setExtent(p);for(let v=0,M=d.length;v<M;++v){const E=Tbe(o,d,v),P=this.createFeature_(o,E,t);P!==null&&a.push(P)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Bbe(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(Obe,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function Obe(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function Ibe(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Tbe(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(Ibe,r,i),r}function kbe(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class Dbe extends _L{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=Fp(c,fg(t.extent,r.projection))),!a[ll.ANIMATING]&&!a[ll.INTERACTING]&&!Xb(c))if(s){const d=r.projection,p=s.getImage(c,o,i,d);p&&(this.loadImage(p)?this.image=p:p.getState()===Qi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Gu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Fb(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=Jo(s),d=Math.floor(a.width*((r[0]-s[0])/c));if(d<0||d>=a.width)return null;const p=qu(s),v=Math.floor(a.height*((s[3]-r[1])/p));return v<0||v>=a.height?null:this.getImageData(a,d,v)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),d=e.layerStatesArray[e.layerIndex],p=e.pixelRatio,v=e.viewState,M=v.center,E=v.resolution,P=p*s/(E*c),U=p*a/(E*c);this.prepareContainer(e,t);const z=this.context.canvas.width,V=this.context.canvas.height,Z=this.getRenderContext(e);let X=!1,re=!0;if(d.extent){const ue=fg(d.extent,v.projection);re=Hl(ue,e.extent),X=re&&!dg(ue,e.extent),X&&this.clipUnrotated(Z,e,ue)}const ee=i.getImage(),ne=Og(this.tempTransform,z/2,V/2,P,U,0,c*(r[0]-M[0])/s,c*(M[1]-r[3])/a);this.renderedResolution=a*p/c;const q=ee.width*ne[0],le=ee.height*ne[3];if(this.getLayer().getSource().getInterpolate()||(Z.imageSmoothingEnabled=!1),this.preRender(Z,e),re&&q>=.5&&le>=.5){const ue=ne[4],ve=ne[5],pe=d.opacity;pe!==1&&(Z.save(),Z.globalAlpha=pe),Z.drawImage(ee,0,0,+ee.width,+ee.height,ue,ve,q,le),pe!==1&&Z.restore()}return this.postRender(this.context,e),X&&Z.restore(),Z.imageSmoothingEnabled=!0,this.container}}class Rbe extends Yx{constructor(e){e=e||{},super(e)}}class OL extends Rbe{constructor(e){super(e)}createRenderer(){return new Dbe(this)}getData(e){return super.getData(e)}}function sR(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Pbe=new Error("disposed"),Ube=[256,256];class eG extends OM{constructor(e){const t=ai.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=sR(this.data_);return e?[e.width,e.height]:Ube}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ai.IDLE&&this.state!==ai.ERROR)return;this.state=ai.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ai.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ai.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Pbe),this.controller_=null),super.disposeInternal()}}let e7;const X2=[];function tG(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function t7(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Lbe(){if(e7===void 0){const n=wl(6,6,X2);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",tG(n,4,5,4,0),tG(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;e7=t7(e,0)||t7(e,4)||t7(e,8),_M(n),X2.push(n.canvas)}return e7}function aR(n,e,t,i){const r=xB(t,e,n);let o=ND(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||Fb(c,r)){const d=ND(n,o,r)/o;isFinite(d)&&d>0&&(o/=d)}return o}function Kbe(n,e,t,i){const r=Of(t);let o=aR(n,e,r,i);return(!isFinite(o)||o<=0)&&HJ(t,function(s){return o=aR(n,e,s,i),isFinite(o)&&o>0}),o}function gte(n,e,t,i,r,o,s,a,c,d,p,v,M,E){const P=wl(Math.round(t*n),Math.round(t*e),X2);if(v||(P.imageSmoothingEnabled=!1),c.length===0)return P.canvas;P.scale(t,t);function U(ee){return Math.round(ee*t)/t}P.globalCompositeOperation="lighter";const z=Tm();c.forEach(function(ee,ne,q){VJ(z,ee.extent)});let V;const Z=t/i,X=(v?1:1+Math.pow(2,-24))/Z;(!M||c.length!==1||d!==0)&&(V=wl(Math.round(Jo(z)*Z),Math.round(qu(z)*Z),X2),v||(V.imageSmoothingEnabled=!1),c.forEach(function(ee,ne,q){if(ee.image.width>0&&ee.image.height>0){if(ee.clipExtent){V.save();const Be=(ee.clipExtent[0]-z[0])*Z,Ce=-(ee.clipExtent[3]-z[3])*Z,Oe=Jo(ee.clipExtent)*Z,Fe=qu(ee.clipExtent)*Z;V.rect(v?Be:Math.round(Be),v?Ce:Math.round(Ce),v?Oe:Math.round(Be+Oe)-Math.round(Be),v?Fe:Math.round(Ce+Fe)-Math.round(Ce)),V.clip()}const le=(ee.extent[0]-z[0])*Z,ue=-(ee.extent[3]-z[3])*Z,ve=Jo(ee.extent)*Z,pe=qu(ee.extent)*Z;V.drawImage(ee.image,d,d,ee.image.width-2*d,ee.image.height-2*d,v?le:Math.round(le),v?ue:Math.round(ue),v?ve:Math.round(le+ve)-Math.round(le),v?pe:Math.round(ue+pe)-Math.round(ue)),ee.clipExtent&&V.restore()}}));const re=$1(s);return a.getTriangles().forEach(function(ee,ne,q){const le=ee.source,ue=ee.target;let ve=le[0][0],pe=le[0][1],Be=le[1][0],Ce=le[1][1],Oe=le[2][0],Fe=le[2][1];const Ee=U((ue[0][0]-re[0])/o),Ve=U(-(ue[0][1]-re[1])/o),ut=U((ue[1][0]-re[0])/o),mt=U(-(ue[1][1]-re[1])/o),Pe=U((ue[2][0]-re[0])/o),De=U(-(ue[2][1]-re[1])/o),Xe=ve,Ke=pe;ve=0,pe=0,Be-=Xe,Ce-=Ke,Oe-=Xe,Fe-=Ke;const Bt=[[Be,Ce,0,0,ut-Ee],[Oe,Fe,0,0,Pe-Ee],[0,0,Be,Ce,mt-Ve],[0,0,Oe,Fe,De-Ve]],ot=kge(Bt);if(!ot)return;if(P.save(),P.beginPath(),Lbe()||!v){P.moveTo(ut,mt);const Rt=4,Ue=Ee-ut,ke=Ve-mt;for(let Te=0;Te<Rt;Te++)P.lineTo(ut+U((Te+1)*Ue/Rt),mt+U(Te*ke/(Rt-1))),Te!=Rt-1&&P.lineTo(ut+U((Te+1)*Ue/Rt),mt+U((Te+1)*ke/(Rt-1)));P.lineTo(Pe,De)}else P.moveTo(ut,mt),P.lineTo(Ee,Ve),P.lineTo(Pe,De);P.clip(),P.transform(ot[0],ot[2],ot[1],ot[3],Ee,Ve),P.translate(z[0]-Xe,z[3]-Ke);let Et;if(V)Et=V.canvas,P.scale(X,-X);else{const Rt=c[0],Ue=Rt.extent;Et=Rt.image,P.scale(Jo(Ue)/Et.width,-qu(Ue)/Et.height)}P.drawImage(Et,0,0),P.restore()}),V&&(_M(V),X2.push(V.canvas)),p&&(P.save(),P.globalCompositeOperation="source-over",P.strokeStyle="black",P.lineWidth=1,a.getTriangles().forEach(function(ee,ne,q){const le=ee.target,ue=(le[0][0]-re[0])/o,ve=-(le[0][1]-re[1])/o,pe=(le[1][0]-re[0])/o,Be=-(le[1][1]-re[1])/o,Ce=(le[2][0]-re[0])/o,Oe=-(le[2][1]-re[1])/o;P.beginPath(),P.moveTo(pe,Be),P.lineTo(ue,ve),P.lineTo(Ce,Oe),P.closePath(),P.stroke()}),P.restore()),P.canvas}const Fbe=10,nG=.25;class yte{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const d=a?v1e(X=>Gu(a,xB(X,this.targetProj_,this.sourceProj_))):zb(this.targetProj_,this.sourceProj_);this.transformInv_=function(X){const re=X[0]+"/"+X[1];return c[re]||(c[re]=d(X)),c[re]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Jo(r)>=Jo(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Jo(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Jo(this.targetProj_.getExtent()):null;const p=$1(i),v=vB(i),M=yB(i),E=gB(i),P=this.transformInv_(p),U=this.transformInv_(v),z=this.transformInv_(M),V=this.transformInv_(E),Z=Fbe+(s?Math.max(0,Math.ceil(Math.log2(KD(i)/(s*s*256*256)))):0);if(this.addQuad_(p,v,M,E,P,U,z,V,Z),this.wrapsXInSource_){let X=1/0;this.triangles_.forEach(function(re,ee,ne){X=Math.min(X,re.source[0][0],re.source[1][0],re.source[2][0])}),this.triangles_.forEach(re=>{if(Math.max(re.source[0][0],re.source[1][0],re.source[2][0])-X>this.sourceWorldWidth_/2){const ee=[[re.source[0][0],re.source[0][1]],[re.source[1][0],re.source[1][1]],[re.source[2][0],re.source[2][1]]];ee[0][0]-X>this.sourceWorldWidth_/2&&(ee[0][0]-=this.sourceWorldWidth_),ee[1][0]-X>this.sourceWorldWidth_/2&&(ee[1][0]-=this.sourceWorldWidth_),ee[2][0]-X>this.sourceWorldWidth_/2&&(ee[2][0]-=this.sourceWorldWidth_);const ne=Math.min(ee[0][0],ee[1][0],ee[2][0]);Math.max(ee[0][0],ee[1][0],ee[2][0])-ne<this.sourceWorldWidth_/2&&(re.source=ee)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,d){const p=UD([o,s,a,c]),v=this.sourceWorldWidth_?Jo(p)/this.sourceWorldWidth_:null,M=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&v>.5&&v<1;let P=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=UD([e,t,i,r]);P=Jo(z)/this.targetWorldWidth_>nG||P}!E&&this.sourceProj_.isGlobal()&&v&&(P=v>nG||P)}if(!P&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!Hl(p,this.maxSourceExtent_))return;let U=0;if(!P&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(d>0)P=!0;else if(U=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),U!=1&&U!=2&&U!=4&&U!=8)return}if(d>0){if(!P){const z=[(e[0]+i[0])/2,(e[1]+i[1])/2],V=this.transformInv_(z);let Z;E?Z=(Ob(o[0],M)+Ob(a[0],M))/2-Ob(V[0],M):Z=(o[0]+a[0])/2-V[0];const X=(o[1]+a[1])/2-V[1];P=Z*Z+X*X>this.errorThresholdSquared_}if(P){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const z=[(t[0]+i[0])/2,(t[1]+i[1])/2],V=this.transformInv_(z),Z=[(r[0]+e[0])/2,(r[1]+e[1])/2],X=this.transformInv_(Z);this.addQuad_(e,t,z,Z,o,s,V,X,d-1),this.addQuad_(Z,z,i,r,X,V,a,c,d-1)}else{const z=[(e[0]+t[0])/2,(e[1]+t[1])/2],V=this.transformInv_(z),Z=[(i[0]+r[0])/2,(i[1]+r[1])/2],X=this.transformInv_(Z);this.addQuad_(e,z,Z,r,o,V,X,c,d-1),this.addQuad_(z,t,i,Z,V,s,a,X,d-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(U&11)==0&&this.addTriangle_(e,i,r,o,a,c),(U&14)==0&&this.addTriangle_(e,i,t,o,a,s),U&&((U&13)==0&&this.addTriangle_(t,r,e,s,c,o),(U&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=Tm();return this.triangles_.forEach(function(t,i,r){const o=t.source;E4(e,o[0]),E4(e,o[1]),E4(e,o[2])}),e}getTriangles(){return this.triangles_}}const vte=.5;class Cte extends OM{constructor(e,t,i,r,o,s,a,c,d,p,v,M){super(o,ai.IDLE,M),this.renderEdges_=v!==void 0?v:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const E=r.getTileCoordExtent(this.wrappedTileCoord_),P=this.targetTileGrid_.getExtent();let U=this.sourceTileGrid_.getExtent();const z=P?Fp(E,P):E;if(KD(z)===0){this.state=ai.EMPTY;return}const V=e.getExtent();V&&(U?U=Fp(U,V):U=V);const Z=r.getResolution(this.wrappedTileCoord_[0]),X=Kbe(e,i,z,Z);if(!isFinite(X)||X<=0){this.state=ai.EMPTY;return}const re=p!==void 0?p:vte;if(this.triangulation_=new yte(e,i,z,U,X*re,Z),this.triangulation_.getTriangles().length===0){this.state=ai.EMPTY;return}this.sourceZ_=t.getZForResolution(X);let ee=this.triangulation_.calculateSourceExtent();if(U&&(e.canWrapX()?(ee[1]=Ml(ee[1],U[1],U[3]),ee[3]=Ml(ee[3],U[1],U[3])):ee=Fp(ee,U)),!KD(ee))this.state=ai.EMPTY;else{let ne=0,q=0;e.canWrapX()&&(ne=Jo(V),q=Math.floor((ee[0]-V[0])/ne)),eee(ee.slice(),e,!0).forEach(ue=>{const ve=t.getTileRangeForExtentAndZ(ue,this.sourceZ_);for(let pe=ve.minX;pe<=ve.maxX;pe++)for(let Be=ve.minY;Be<=ve.maxY;Be++){const Ce=d(this.sourceZ_,pe,Be,a);if(Ce){const Oe=q*ne;this.sourceTiles_.push({tile:Ce,offset:Oe})}}++q}),this.sourceTiles_.length===0&&(this.state=ai.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==ai.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ai.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=gte(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ai.LOADED}this.changed()}load(){if(this.state==ai.IDLE){this.state=ai.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==ai.IDLE||i==ai.LOADING){e++;const r=qo(t,Mr.CHANGE,o=>{const s=t.getState();(s==ai.LOADED||s==ai.ERROR||s==ai.EMPTY)&&(xa(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==ai.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(xa),this.sourcesListenerKeys_=null}release(){this.canvas_&&(_M(this.canvas_.getContext("2d")),X2.push(this.canvas_),this.canvas_=null),super.release()}}class iG{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof mM&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Os(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Os(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Os(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function zE(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function zbe(n,e,t){return n+"/"+e+"/"+t}function kS(n,e,t,i,r){return`${zr(n)},${e},${zbe(t,i,r)}`}function jbe(n){return Nbe(n[0],n[1],n[2])}function Nbe(n,e,t){return(e<<n)+t}function Gbe(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function n7(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function Wbe(n,e,t){const i=n[t];return i?i.delete(e):!1}function rG(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Fp(e,fg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=Fp(e,r))}return e}class bte extends _L{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Tm(),this.tempTileRange_=new ML(0,0,0,0),this.tempTileCoord_=zE(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new iG(i),this.sourceTileCache_=null,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new iG(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=kS(a,a.getKey(),e,t,i);let d;if(o.containsKey(c))d=o.get(c);else{const p=r.viewState.projection,v=a.getProjection();if(d=a.getTile(e,t,i,r.pixelRatio,p,!v||HA(v,p)?void 0:this.getSourceTileCache()),!d)return null;o.set(c,d)}return d}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Gu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Fb(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),d=a.getTilePixelRatio(t.pixelRatio);for(let p=c.getZForResolution(s.resolution);p>=c.getMinZoom();--p){const v=c.getTileCoordForCoordAndZ(r,p),M=this.getTile(p,v[1],v[2],t);if(!M||M.getState()!==ai.LOADED)continue;const E=c.getOrigin(p),P=JA(c.getTileSize(p)),U=c.getResolution(p);let z;if(M instanceof ate||M instanceof Cte)z=M.getImage();else if(M instanceof eG){if(z=sR(M.getData()),!z)continue}else continue;const V=Math.floor(d*((r[0]-E[0])/U-v[1]*P[0])),Z=Math.floor(d*((E[1]-r[1])/U-v[2]*P[1])),X=Math.round(d*a.getGutterForProjection(s.projection));return this.getImageData(z,V+X,Z+X)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),d=c.getTileGridForProjection(s.projection),p=zr(c);p in e.wantedTiles||(e.wantedTiles[p]={});const v=e.wantedTiles[p],M=a.getMapInternal(),E=Math.max(i-o,d.getMinZoom(),d.getZForResolution(Math.min(a.getMaxResolution(),M?M.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):d.getResolution(0)),c.zDirection)),P=s.rotation,U=P?ZJ(s.center,s.resolution,P,e.size):void 0;for(let z=i;z>=E;--z){const V=d.getTileRangeForExtentAndZ(t,z,this.tempTileRange_),Z=d.getResolution(z);for(let X=V.minX;X<=V.maxX;++X)for(let re=V.minY;re<=V.maxY;++re){if(P&&!d.tileCoordIntersectsViewport([z,X,re],U))continue;const ee=this.getTile(z,X,re,e);if(!ee||!n7(r,ee,z))continue;const q=ee.getKey();if(v[q]=!0,ee.getState()===ai.IDLE&&!e.tileQueue.isKeyQueued(q)){const le=zE(z,X,re,this.tempTileCoord_);e.tileQueue.enqueue([ee,p,d.getTileCoordCenter(le),Z])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const d=kS(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(d)){const p=i.peek(d);if(p.getState()===ai.LOADED)return p.endTransition(zr(this)),n7(t,p,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),d=c.getKey();for(let p=o.minX;p<=o.maxX;++p)for(let v=o.minY;v<=o.maxY;++v){const M=kS(c,d,i,p,v);let E=!1;if(a.containsKey(M)){const P=a.peek(M);P.getState()===ai.LOADED&&(n7(r,P,i),E=!0)}E||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,d=this.getLayer(),p=d.getSource(),v=p.getTileGridForProjection(o),M=v.getZForResolution(s,p.zDirection),E=v.getResolution(M),P=p.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==P&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=P):this.renderedSourceKey_=P;let U=e.extent;const z=p.getTilePixelRatio(c);this.prepareContainer(e,t);const V=this.context.canvas.width,Z=this.context.canvas.height,X=i.extent&&fg(i.extent);X&&(U=Fp(U,fg(i.extent)));const re=E*V/2/z,ee=E*Z/2/z,ne=[a[0]-re,a[1]-ee,a[0]+re,a[1]+ee],q={};this.renderedTiles.length=0;const le=d.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const ut=v.getZForResolution(r.nextResolution,p.zDirection),mt=rG(e,e.nextExtent);this.enqueueTiles(e,mt,ut,q,le)}const ue=rG(e,U);if(this.enqueueTiles(e,ue,M,q,0),le>0&&setTimeout(()=>{this.enqueueTiles(e,ue,M-1,q,le-1)},0),!(M in q))return this.container;const ve=zr(this),pe=e.time;for(const ut of q[M]){const mt=ut.getState();if(mt===ai.EMPTY)continue;const Pe=ut.tileCoord;if(mt===ai.LOADED&&ut.getAlpha(ve,pe)===1){ut.endTransition(ve);continue}if(mt!==ai.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Pe,q)){Wbe(q,ut,M),e.animate=!0;continue}if(this.findAltTiles_(v,Pe,M+1,q))continue;const Ke=v.getMinZoom();for(let Bt=M-1;Bt>=Ke&&!this.findAltTiles_(v,Pe,Bt,q);--Bt);}const Be=E/s*c/z,Ce=this.getRenderContext(e);Og(this.tempTransform,V/2,Z/2,Be,Be,0,-V/2,-Z/2),i.extent&&this.clipUnrotated(Ce,e,X),p.getInterpolate()||(Ce.imageSmoothingEnabled=!1),this.preRender(Ce,e);const Oe=Object.keys(q).map(Number);Oe.sort(Sg);let Fe;const Ee=[],Ve=[];for(let ut=Oe.length-1;ut>=0;--ut){const mt=Oe[ut],Pe=p.getTilePixelSize(mt,c,o),Xe=v.getResolution(mt)/E,Ke=Pe[0]*Xe*Be,Bt=Pe[1]*Xe*Be,ot=v.getTileCoordForCoordAndZ($1(ne),mt),Et=v.getTileCoordExtent(ot),Rt=Gu(this.tempTransform,[z*(Et[0]-ne[0])/E,z*(ne[3]-Et[3])/E]),Ue=z*p.getGutterForProjection(o);for(const ke of q[mt]){if(ke.getState()!==ai.LOADED)continue;const Te=ke.tileCoord,He=ot[1]-Te[1],Ct=Math.round(Rt[0]-(He-1)*Ke),vt=ot[2]-Te[2],wt=Math.round(Rt[1]-(vt-1)*Bt),Ft=Math.round(Rt[0]-He*Ke),Pt=Math.round(Rt[1]-vt*Bt),nn=Ct-Ft,Kn=wt-Pt,Wn=Oe.length===1;let Mi=!1;Fe=[Ft,Pt,Ft+nn,Pt,Ft+nn,Pt+Kn,Ft,Pt+Kn];for(let Fn=0,Ln=Ee.length;Fn<Ln;++Fn)if(!Wn&&mt<Ve[Fn]){const In=Ee[Fn];Hl([Ft,Pt,Ft+nn,Pt+Kn],[In[0],In[3],In[4],In[7]])&&(Mi||(Ce.save(),Mi=!0),Ce.beginPath(),Ce.moveTo(Fe[0],Fe[1]),Ce.lineTo(Fe[2],Fe[3]),Ce.lineTo(Fe[4],Fe[5]),Ce.lineTo(Fe[6],Fe[7]),Ce.moveTo(In[6],In[7]),Ce.lineTo(In[4],In[5]),Ce.lineTo(In[2],In[3]),Ce.lineTo(In[0],In[1]),Ce.clip())}Ee.push(Fe),Ve.push(mt),this.drawTile(ke,e,Ft,Pt,nn,Kn,Ue,Wn),Mi&&Ce.restore(),this.renderedTiles.unshift(ke),this.updateUsedTiles(e.usedTiles,p,ke)}}if(this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!W1(this.renderedExtent_,ne),this.renderedExtent_=ne,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&Ce.restore(),Ce.imageSmoothingEnabled=!0,this.renderComplete){const ut=(mt,Pe)=>{const De=zr(p),Xe=Pe.wantedTiles[De],Ke=Xe?Object.keys(Xe).length:0;this.updateCacheSize(Ke),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(ut)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let d;if(e instanceof eG){if(d=sR(e.getData()),!d)throw new Error("Rendering array data is not yet supported")}else d=this.getTileImage(e);if(!d)return;const p=this.getRenderContext(t),v=zr(this),M=t.layerStatesArray[t.layerIndex],E=M.opacity*(c?e.getAlpha(v,t.time):1),P=E!==p.globalAlpha;P&&(p.save(),p.globalAlpha=E),p.drawImage(d,a,a,d.width-2*a,d.height-2*a,i,r,o,s),P&&p.restore(),E!==M.opacity?t.animate=!0:c&&e.endTransition(v)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=zr(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const _v={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Qbe extends Yx{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(_v.PRELOAD)}setPreload(e){this.set(_v.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(_v.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(_v.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class _te extends Qbe{constructor(e){super(e)}createRenderer(){return new bte(this,{cacheSize:this.getCacheSize()})}}const qbe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},oG={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Ybe extends bte{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Rd(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const s=r.viewState,a=s.resolution,c=r.viewHints,d=this.getLayer().getSource(),p=d.getTileGridForProjection(s.projection),v=!(c[ll.ANIMATING]||c[ll.INTERACTING]),M=p.getZForResolution(a,d.zDirection)===e;return v&&M?o.wantedResolution=a:o.wantedResolution||(o.wantedResolution=p.getResolution(e)),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const d=r.getSource(),p=!!r.getDeclutter(),v=d.getTileGrid(),E=d.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),P=d.getSourceTiles(t,i,e),U=zr(r);delete e.hitDetectionImageData[U],e.executorGroups[U]=[],c.dirty=!1;for(let z=0,V=P.length;z<V;++z){const Z=P[z];if(Z.getState()!=ai.LOADED)continue;const X=d.getProjection(),re=Z.tileCoord;let ee=v.getTileCoordExtent(re);i&&X&&!HA(i,X)&&(ee=OS(ee,X,i,32));const ne=Fp(E,ee),q=Ov(ne,r.getRenderBuffer()*a,this.tempExtent),le=W1(ee,ne)?null:q,ue=new ite(0,ne,a,t),ve=tR(a,t),pe=function(Ee,Ve){let ut;const mt=Ee.getStyleFunction()||r.getStyleFunction();if(mt&&(ut=mt(Ee,a)),ut){const Pe=this.renderFeature(Ee,ve,ut,ue,p,Ve);c.dirty=c.dirty||Pe}},Be=Z.getFeatures();s&&s!==c.renderedRenderOrder&&Be.sort(s);for(let Ee=0,Ve=Be.length;Ee<Ve;++Ee){let ut=Be[Ee];i&&Z.projection&&!HA(i,Z.projection)&&(ut=ut.clone(),ut.getGeometry().applyTransform(zb(Z.projection,i))),(!le||Hl(le,ut.getGeometry().getExtent()))&&pe.call(this,ut,Ee)}const Ce=ue.finish(),Oe=r.getRenderMode()!=="vector"&&p&&P.length===1?null:ne,Fe=new rte(Oe,a,t,d.getOverlaps(),Ce,r.getRenderBuffer(),!0);e.executorGroups[U].push(Fe)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),p=c.getSource().getTileGridForProjection(t.viewState.projection),v=UD([e]);Ov(v,s*i,v);const M={},E=function(X,re,ee){let ne=X.getId();ne===void 0&&(ne=zr(X));const q=M[ne];if(q){if(q!==!0&&ee<q.distanceSq){if(ee===0)return M[ne]=!0,o.splice(o.lastIndexOf(q),1),r(X,c,re);q.geometry=re,q.distanceSq=ee}}else{if(ee===0)return M[ne]=!0,r(X,c,re);o.push(M[ne]={feature:X,layer:c,geometry:re,distanceSq:ee,callback:r})}},P=this.renderedTiles,U=zr(c),z=c.getDeclutter(),V=z?t.declutter?.[z]?.all().map(X=>X.value):null;let Z;e:for(let X=0,re=P.length;X<re;++X){const ee=P[X],ne=p.getTileCoordExtent(ee.wrappedTileCoord);if(!Hl(ne,v))continue;const q=ee.executorGroups[U];for(let le=0,ue=q.length;le<ue;++le)if(Z=q[le].forEachFeatureAtCoordinate(e,s,a,i,E,V),Z)break e}return Z}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,d=o.getTileGridForProjection(s),p=Gu(this.renderedPixelToCoordinateTransform_,e.slice()),v=d.getTileCoordForCoordAndResolution(p,c).toString(),M=this.renderedTiles.find(X=>X.tileCoord.toString()===v&&X.getState()===ai.LOADED);if(!M||M.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!dg(a,d.getTileCoordExtent(M.tileCoord))&&jU(p,s);const E=zr(r),P=d.getTileCoordExtent(M.wrappedTileCoord),U=$1(P),z=[(p[0]-U[0])/c,(U[1]-p[1])/c],V=M.getSourceTiles().reduce((X,re)=>X.concat(re.getFeatures()),[]);let Z=M.hitDetectionImageData[E];if(!Z){const X=JA(d.getTileSize(d.getZForResolution(c,o.zDirection))),re=this.renderedRotation_,ee=[this.getRenderTransform(d.getTileCoordCenter(M.wrappedTileCoord),c,0,xf,X[0]*xf,X[1]*xf,0)];Z=ote(X,ee,V,r.getStyleFunction(),d.getTileCoordExtent(M.wrappedTileCoord),M.getReplayState(r).renderedResolution,re),M.hitDetectionImageData[E]=Z}t(ste(z,V,Z))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==ai.LOADED)return;const d=c.getSourceTiles();for(let p=0,v=d.length;p<v;++p){const M=d[p],E=M.getKey();if(E in a)continue;a[E]=!0;const P=M.tileCoord;if(Hl(e,o.getTileCoordExtent(P))){const U=M.getFeatures();if(U)for(let z=0,V=U.length;z<V;++z){const Z=U[z],X=Z.getGeometry();Hl(e,X.getExtent())&&t.push(Z)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[ll.ANIMATING]||o[ll.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),d=c?e.declutter?.[c]:void 0,p=zr(this.getLayer()),v=this.renderedTiles;for(let M=0,E=v.length;M<E;++M){const P=v[M],U=P.executorGroups[p];if(U)for(let z=U.length-1;z>=0;--z)U[z].execute(this.context,a,this.getTileRenderTransform(P,e),e.viewState.rotation,s,UE,d)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=zr(this.getLayer()),r=t.reduce((c,d,p)=>(d.executorGroups[i].forEach(v=>c.push({executorGroup:v,index:p})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,d=r.length;c<d;++c){const p=r[c].executorGroup.getDeferredZIndexContexts();for(const v in p)s[v]=!0}Object.keys(s).map(Number).sort(Sg).forEach(c=>{o.forEach((d,p)=>{d[c]&&(d[c].forEach(v=>{const{executorGroup:M,index:E}=r[p],P=M.getRenderedContext(),U=P.globalAlpha;P.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[E];z&&z.draw(P),v.draw(P),z&&P.restore(),P.globalAlpha=U,v.clear()}),d[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,d=Math.round(c[0]*i),p=Math.round(c[1]*i),M=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),E=e.tileCoord,P=M.getTileCoordExtent(e.wrappedTileCoord),U=M.getTileCoordExtent(E,this.tempExtent)[0]-P[0];return YU(O8(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,d,p,U))}postRender(e,t){const i=t.viewHints,r=!(i[ll.ANIMATING]||i[ll.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),d=c?oG[s].filter(ee=>!UE.includes(ee)):oG[s],p=t.viewState,v=p.rotation,M=o.getSource(),P=M.getTileGridForProjection(p.projection).getZForResolution(p.resolution,M.zDirection),U=this.renderedTiles,z=[],V=[],Z=[],X=zr(o);let re=!0;for(let ee=U.length-1;ee>=0;--ee){const ne=U[ee];re=re&&!ne.getReplayState(o).dirty;const q=ne.executorGroups[X].filter(Oe=>Oe.hasExecutors(d));if(q.length===0)continue;const le=this.getTileRenderTransform(ne,t),ue=ne.tileCoord[0];let ve=!1;const pe=q[0].getClipCoords(le);let Be=e,Ce;if(pe){Ce=new bL,Be=Ce.getContext();for(let Oe=0,Fe=z.length;Oe<Fe;++Oe)if(P!==ue&&ue<V[Oe]){const Ee=z[Oe];Hl([pe[0],pe[3],pe[4],pe[7]],[Ee[0],Ee[3],Ee[4],Ee[7]])&&(ve||(Be.save(),ve=!0),Be.beginPath(),Be.moveTo(pe[0],pe[1]),Be.lineTo(pe[2],pe[3]),Be.lineTo(pe[4],pe[5]),Be.lineTo(pe[6],pe[7]),Be.moveTo(Ee[6],Ee[7]),Be.lineTo(Ee[4],Ee[5]),Be.lineTo(Ee[2],Ee[3]),Be.lineTo(Ee[0],Ee[1]),Be.clip())}z.push(pe),V.push(ue)}for(let Oe=0,Fe=q.length;Oe<Fe;++Oe)q[Oe].execute(e,[e.canvas.width,e.canvas.height],le,v,r,d,t.declutter?.[c]);ve&&(Be===e?Be.restore():Z[ee]=Ce)}e.globalAlpha=a,this.ready=re,this.tileClipContexts_=Z,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,d=i.length;c<d;++c)a=RE(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=RE(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[zr(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],d=i.getSource();let p=t.pixelRatio;const M=t.viewState.projection,E=d.getTileGridForProjection(M),P=E.getResolution(e.tileCoord[0]),U=t.pixelRatio/e.wantedResolution*P,z=E.getResolution(c),V=e.getContext();p=Math.round(Math.max(p,U/p));const Z=d.getTilePixelSize(c,p,M);V.canvas.width=Z[0],V.canvas.height=Z[1];const X=p/U;if(X!==1){const q=oN(this.tmpTransform_);O8(q,X,X),V.setTransform.apply(V,q)}const re=E.getTileCoordExtent(a,this.tempExtent),ee=U/z,ne=oN(this.tmpTransform_);O8(ne,ee,-ee),M1e(ne,-re[0],-re[3]);for(let q=0,le=s.length;q<le;++q)s[q].execute(V,[V.canvas.width*X,V.canvas.height*X],ne,0,!0,qbe[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class O4 extends vL{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";Os(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Ybe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(_v.PRELOAD)}getUseInterimTilesOnError(){return this.get(_v.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(_v.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(_v.USE_INTERIM_TILES_ON_ERROR,e)}}function lR(n){return Array.isArray(n)?Math.min(...n):n}class Vbe extends gL{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let d=t.getExtent();d&&t.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);const p=d?Fp(i,d):i,v=Of(p),M=aR(e,t,v,r),E=vte,P=new yte(e,t,p,c,M*E,r),U=P.calculateSourceExtent(),z=Xb(U)?null:s(U,M,o),V=z?Qi.IDLE:Qi.EMPTY,Z=z?z.getPixelRatio():1;super(i,r,Z,V),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=P,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=z,this.sourcePixelRatio_=Z,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Qi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Qi.LOADED){const t=Jo(this.targetExtent_)/this.targetResolution_,i=qu(this.targetExtent_)/this.targetResolution_;this.canvas_=gte(t,i,this.sourcePixelRatio_,lR(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Qi.IDLE){this.state=Qi.LOADING,this.changed();const e=this.sourceImage_.getState();e==Qi.LOADED||e==Qi.ERROR?this.reproject_():(this.sourceListenerKey_=qo(this.sourceImage_,Mr.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Qi.LOADED||i==Qi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){xa(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Bw=4,i7={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class $be extends Yp{constructor(e,t){super(e),this.image=t}}class xte extends Vx{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=fB(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||HA(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&HA(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&W1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Vbe(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=Hbe(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&dg(this.wantedExtent_,o)||dg(this.image.getExtent(),o))&&(this.wantedResolution_&&lR(this.wantedResolution_)===s||lR(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new gL(o,s,i,this.loader),this.image.addEventListener(Mr.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Qi.LOADING:this.loading=!0,i=i7.IMAGELOADSTART;break;case Qi.LOADED:this.loading=!1,i=i7.IMAGELOADEND;break;case Qi.ERROR:this.loading=!1,i=i7.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new $be(i,t))}}function Hbe(n,e,t,i){const r=e/t,o=Of(n),s=gv(Jo(n)/r,Bw),a=gv(qu(n)/r,Bw),c=gv((i-1)*s/2,Bw),d=s+2*c,p=gv((i-1)*a/2,Bw),v=a+2*p;return _E(o,r,0,[d,v])}const J_=[0,0,0],rv=5;class PB{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Os(bge(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Os(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=$1(i)),Os(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Os(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:aL,Os(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new ML(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,d=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);d>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=H_(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,d,i),t(d,o))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return H_(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return H_(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),d=Math.floor(o*c),p=Math.floor(s*c);if(t<r)return H_(d,d,p,p,i);const v=Math.floor(c*(o+1))-1,M=Math.floor(c*(s+1))-1;return H_(d,v,p,M,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,J_);const r=J_[1],o=J_[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,J_);const s=J_[1],a=J_[2];return H_(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=JA(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=JA(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,d=a+o[1]*r;return G1(s,a,c,d,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),d=JA(this.getTileSize(s),this.tmpSize_);let p=a*(e-c[0])/i/d[0],v=a*(c[1]-t)/i/d[1];return r?(p=gv(p,rv)-1,v=gv(v,rv)-1):(p=mw(p,rv),v=mw(v,rv)),zE(s,p,v,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=JA(this.getTileSize(i),this.tmpSize_);let d=(e-s[0])/a/c[0],p=(s[1]-t)/a/c[1];return r?(d=gv(d,rv)-1,p=gv(p,rv)-1):(d=mw(d,rv),p=mw(p,rv)),zE(i,d,p,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=fB(this.resolutions_,e,t||0);return Ml(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return vee(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function IL(n){let e=n.getDefaultTileGrid();return e||(e=Jbe(n),n.setDefaultTileGrid(e)),e}function Zbe(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=UB(t);if(!Fb(o,r)){const s=Jo(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function Xbe(n,e,t,i){i=i!==void 0?i:"top-left";const r=Mte(n,e,t);return new PB({extent:n,origin:Uge(n,i),resolutions:r,tileSize:t})}function TL(n){const e=n||{},t=e.extent||zs("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Mte(t,e.maxZoom,e.tileSize,e.maxResolution)};return new PB(i)}function Mte(n,e,t,i){e=e!==void 0?e:xee,t=JA(t!==void 0?t:aL);const r=qu(n),o=Jo(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function Jbe(n,e,t,i){const r=UB(n);return Xbe(r,e,t,i)}function UB(n){n=zs(n);let e=n.getExtent();if(!e){const t=180*Pv.degrees/n.getMetersPerUnit();e=G1(-t,-t,t,t)}return e}class wte extends Vx{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&JA(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||zr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o,s){return Br()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:IL(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=JA(r.getTileSize(e),this.tmpSize);return o==1?s:Wye(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=Zbe(r,e,i)),Gbe(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class e_e extends Yp{constructor(e,t){super(e),this.tile=t}}function Ste(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const M=new Array(a);for(let P=0;P<a;++P)M[P]=new ImageData(new Uint8ClampedArray(t[P]),o,s);return n(M,i).data.buffer}const d=new Uint8ClampedArray(c),p=new Array(a),v=new Array(a);for(let M=0;M<a;++M)p[M]=new Uint8ClampedArray(t[M]),v[M]=[0,0,0,0];for(let M=0;M<c;M+=4){for(let P=0;P<a;++P){const U=p[P];v[P][0]=U[M],v[P][1]=U[M+1],v[P][2]=U[M+2],v[P][3]=U[M+3]}const E=n(v,i);d[M]=E[0],d[M+1]=E[1],d[M+2]=E[2],d[M+3]=E[3]}return d.buffer}}function t_e(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+Ste.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function n_e(n,e){const t=Ste(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let i_e=class extends mM{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=t_e(e,this.onWorkerMessage_.bind(this,r));else i[0]=n_e(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const d=c*a,p=[];for(let v=0,M=r.length;v<M;++v)p.push(r[v].slice(d,d+a));this.workers_[c].postMessage({buffers:p,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},p)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,d=a*s;i.set(new Uint8ClampedArray(c),d),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const sG={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class aG extends Yp{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class kL extends xte{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=s_e(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(Mr.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new QJ(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Rd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:o_e(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Rd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:zr(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof Vx?a:a.getSource();if(!c)continue;const d=c.getAttributions()?.(i);typeof d=="string"?r.push(d):d!==void 0&&r.push(...d)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new i_e({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=Of(e);r.size[0]=Math.ceil(Jo(e)/t),r.size[1]=Math.ceil(qu(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!W1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=r_e(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new aG(sG.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!W1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(Jo(o)/s),d=Math.round(qu(o)/s);a=wl(c,d),this.renderedImageCanvas_=new ECe(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new aG(sG.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}kL.prototype.dispose;let HC=null;function r_e(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!HC)HC=wl(i,r,void 0,{willReadFrequently:!0});else{const a=HC.canvas;a.width!==i||a.height!==r?HC=wl(i,r,void 0,{willReadFrequently:!0}):HC.clearRect(0,0,i,r)}return HC.drawImage(s,0,0,i,r),HC.getImageData(0,0,i,r)}function o_e(n){return n.map(function(e){return e.getLayerState()})}function s_e(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=a_e(n[i]);return t}function a_e(n){let e;return n instanceof Vx?n instanceof wte?e=new _te({source:n}):n instanceof xte&&(e=new OL({source:n})):e=n,e}function l_e(n,e,t,i){const r=document.createElement("script"),o="olc_"+zr(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const u_e=/\{z\}/g,c_e=/\{x\}/g,A_e=/\{y\}/g,h_e=/\{-y\}/g;function d_e(n,e,t,i,r){return n.replace(u_e,e.toString()).replace(c_e,t.toString()).replace(A_e,i.toString()).replace(h_e,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function f_e(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function m_e(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return d_e(n,s,t[1],t[2],o)})}function Ete(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=m_e(n[r],e);return p_e(i)}function p_e(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=jbe(e),o=Ob(r,n.length);return n[o](e,t,i)})}const r7={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class LB extends wte{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===LB.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=zr(t),r=t.getState();let o;r==ai.LOADING?(this.tileLoadingKeys_[i]=!0,o=r7.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==ai.ERROR?r7.TILELOADERROR:r==ai.LOADED?r7.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new e_e(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=f_e(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Ete(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class g_e extends LB{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:y_e,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ate,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!HA(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||HA(t,e)))return this.tileGrid;const i=zr(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=IL(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),d=c?this.tileUrlFunction(c,r,o):void 0,p=new this.tileClass(a,d!==void 0?ai.IDLE:ai.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=s,p.addEventListener(Mr.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,t,i,r,o,s){const a=this.getProjection();if(!a||!o||HA(a,o))return this.getTileInternal(e,t,i,r,a||o);const c=[e,t,i],d=this.getKey(),p=this.getTileGridForProjection(a),v=this.getTileGridForProjection(o),M=this.getTileCoordForTileUrlFunction(c,o),E=new Cte(a,p,o,v,c,M,this.getTilePixelRatio(r),this.getGutter(),(P,U,z,V)=>this.getTileInternal(P,U,z,V,a,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return E.key=d,E}getTileInternal(e,t,i,r,o,s){const a=this.getKey(),c=kS(this,a,e,t,i);if(s&&s.containsKey(c))return s.get(c);const d=this.createTile_(e,t,i,r,o,a);return s?.set(c,d),d}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=zs(e);if(i){const r=zr(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function y_e(n,e){if(XA){const t=n.getCrossOrigin();let i="same-origin",r="same-origin";t==="anonymous"||t===""?(i="cors",r="omit"):t==="use-credentials"&&(i="cors",r="include"),fetch(e,{mode:i,credentials:r}).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.blob()}).then(o=>createImageBitmap(o)).then(o=>{const s=n.getImage();s.width=o.width,s.height=o.height,s.getContext("2d").drawImage(o,0,0),o.close?.(),s.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class Bte extends g_e{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:zs("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)l_e(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=zs("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const d=CM(t,i);r=XJ(e.bounds,d)}const o=UB(i),s=e.minzoom||0,a=e.maxzoom||22,c=TL({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=Ete(e.tiles,c),e.attribution&&!this.getAttributions()){const d=r!==void 0?r:o;this.setAttributions(function(p){return Hl(d,p.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class DL extends LB{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||UB(t),r=e.tileGrid||TL({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ote,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:lte,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===ai.IDLE){i.setState(ai.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t);let s=o.getTileCoordExtent(r);const a=r[0],c=o.getResolution(a);Ov(s,-c,s);const d=this.projection;t&&this.projection&&!HA(t,d)&&(s=OS(s,t,d));const p=this.tileGrid,v=p.getExtent();v&&Fp(s,v,s);let M=c;t&&d&&!HA(t,d)&&(M=c/d.getMetersPerUnit()/t.getMetersPerUnit());const E=p.getZForResolution(M,this.zDirection);p.forEachTileCoord(s,E,P=>{const U=this.tileUrlFunction(P,e,t);this.sourceTiles_[U]||(this.sourceTiles_[U]=new this.tileClass(P,U?ai.IDLE:ai.EMPTY,U,this.format_,this.tileLoadFunction));const z=this.sourceTiles_[U];i.sourceTiles.push(z),this.tileKeysBySourceTileUrl_[U]||(this.tileKeysBySourceTileUrl_[U]=[]),this.tileKeysBySourceTileUrl_[U].push(i.getKey());const V=z.getState();if(V<ai.LOADED){const Z=X=>{this.handleTileChange(X);const re=z.getState();if(re===ai.LOADED||re===ai.ERROR){const ee=z.getKey();ee in i.errorTileKeys?z.getState()===ai.LOADED&&delete i.errorTileKeys[ee]:i.loadingSourceTiles--,re===ai.ERROR?i.errorTileKeys[ee]=!0:z.removeEventListener(Mr.CHANGE,Z),i.loadingSourceTiles===0&&i.setState(Rv(i.errorTileKeys)?ai.LOADED:ai.ERROR)}};z.addEventListener(Mr.CHANGE,Z),i.loadingSourceTiles++}V===ai.IDLE&&(z.extent=p.getTileCoordExtent(P),z.projection=this.projection,z.resolution=p.getResolution(P[0]),z.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(P=>P.getState()===ai.ERROR)?ai.ERROR:ai.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),d=this.projection,p=this.getTileGridForProjection(o);if(a&&c){const E=p.getTileCoordExtent(a);Ov(E,-p.getResolution(e),E),Hl(c,!o||!d||HA(o,d)?E:OS(E,o,d))||(a=null)}let v=!0;if(a!==null){const E=this.tileGrid,P=p.getResolution(e);let U=P;o&&d&&!HA(o,d)&&(U=P/d.getMetersPerUnit()/o.getMetersPerUnit());const z=E.getZForResolution(U,1),V=p.getTileCoordExtent(a);Ov(V,-P,V),E.forEachTileCoord(!o||!d||HA(o,d)?V:OS(V,o,d),z,Z=>{v=v&&!this.tileUrlFunction(Z,r,d)})}const M=new ICe(s,v?ai.EMPTY:ai.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return M.key=this.getKey(),M}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.projection;if(r!==null&&!HA(r,e))return IL(e);const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(p,v){return o.getOrigin(v)}),c=s.map(function(p,v){return o.getTileSize(v)}),d=xee+1;for(let p=s.length;p<d;++p)s.push(s[p-1]/2),a.push(a[p-1]),c.push(c[p-1]);i=new PB({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=JA(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Ote(n,e){n.setLoader(function(t,i,r){nte(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function v_e(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,d=r-1,p=[0,0,0,0],v=2*Math.PI,M=Math.PI/2,E=Math.PI*e.sunEl/180,P=Math.PI*e.sunAz/180,U=Math.cos(E),z=Math.sin(E),V=e.highlightColor,Z=e.shadowColor,X=e.accentColor,re=e.encoding;let ee,ne,q,le,ue,ve,pe,Be,Ce,Oe,Fe,Ee,Ve,ut,mt,Pe,De,Xe,Ke,Bt,ot,Et;function Rt(Ue,ke="mapbox"){if(ke==="mapbox")return(Ue[0]*256*256+Ue[1]*256+Ue[2])*.1-1e4;if(ke==="terrarium")return Ue[0]*256+Ue[1]+Ue[2]/256-32768}for(ne=0;ne<=d;++ne)for(ue=ne===0?0:ne-1,ve=ne===d?d:ne+1,ee=0;ee<=c;++ee)q=ee===0?0:ee-1,le=ee===c?c:ee+1,pe=(ne*i+q)*4,p[0]=o[pe],p[1]=o[pe+1],p[2]=o[pe+2],p[3]=o[pe+3],Be=e.vert*Rt(p,re),pe=(ne*i+le)*4,p[0]=o[pe],p[1]=o[pe+1],p[2]=o[pe+2],p[3]=o[pe+3],Ce=e.vert*Rt(p,re),Oe=(Ce-Be)/a,pe=(ue*i+ee)*4,p[0]=o[pe],p[1]=o[pe+1],p[2]=o[pe+2],p[3]=o[pe+3],Be=e.vert*Rt(p,re),pe=(ve*i+ee)*4,p[0]=o[pe],p[1]=o[pe+1],p[2]=o[pe+2],p[3]=o[pe+3],Ce=e.vert*Rt(p,re),Fe=(Ce-Be)/a,Ve=Math.atan2(Fe,-Oe),Ve<0?Ve=M-Ve:Ve>M?Ve=v-Ve+M:Ve=M-Ve,Ee=Math.atan(Math.sqrt(Oe*Oe+Fe*Fe)),Et=z*Math.cos(Ee)+U*Math.sin(Ee)*Math.cos(P-Ve),ut=Math.cos(Ee),mt=255*Et,Ke=Math.min(Math.max(2*e.sunEl,0),1),Bt=1.875-e.opacity*1.75,ot=e.opacity!==.5?M*((Math.pow(Bt,Ee)-1)/(Math.pow(Bt,M)-1)):Ee,De={r:(1-ut)*X.r*Ke*255,g:(1-ut)*X.g*Ke*255,b:(1-ut)*X.b*Ke*255,a:(1-ut)*X.a*Ke*255},Pe=Math.abs(((Ve+P)/Math.PI+.5)%2-1),Xe={r:(V.r*(1-Pe)+Z.r*Pe)*mt,g:(V.g*(1-Pe)+Z.g*Pe)*mt,b:(V.b*(1-Pe)+Z.b*Pe)*mt,a:(V.a*(1-Pe)+Z.a*Pe)*mt},pe=(ne*i+ee)*4,s[pe]=De.r*(1-Pe)+Xe.r,s[pe+1]=De.g*(1-Pe)+Xe.g,s[pe+2]=De.b*(1-Pe)+Xe.b,s[pe+3]=o[pe+3]*e.opacity*Ke*Math.sin(ot);return new ImageData(s,i,r)}function C_e(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=i-1,c=r-1,d=[0,0,0,0];let p,v,M;function E(le){return le>0?1/(1-le):1+le}function P(le){return le>0?1-1/(1.001-le):-le}function U(le){le*=Math.PI/180;const ue=Math.sin(le),ve=Math.cos(le);return[(2*ve+1)/3,(-Math.sqrt(3)*ue-ve+1)/3,(Math.sqrt(3)*ue-ve+1)/3]}const z=P(e.saturation),V=E(e.contrast),Z=U(e.hueRotate),X=Z,re=[Z[2],Z[0],Z[1]],ee=[Z[1],Z[2],Z[0]],ne=e.brightnessLow,q=e.brightnessHigh;for(v=0;v<=c;++v)for(p=0;p<=a;++p){M=(v*i+p)*4,d[0]=o[M],d[1]=o[M+1],d[2]=o[M+2],d[3]=o[M+3];const le=d[0],ue=d[1],ve=d[2],pe=(Ee,Ve)=>{let ut=0;for(let mt=0;mt<Ee.length;mt++)ut+=Ee[mt]*Ve[mt];return ut};let Be=pe([le,ue,ve],X),Ce=pe([le,ue,ve],re),Oe=pe([le,ue,ve],ee);const Fe=(Be+Ce+Oe)/3;Be+=(Fe-Be)*z,Ce+=(Fe-Ce)*z,Oe+=(Fe-Oe)*z,Be=(Be-.5)*V+.5,Ce=(Ce-.5)*V+.5,Oe=(Oe-.5)*V+.5,Be=ne*(255-Be)+q*Be,Ce=ne*(255-Ce)+q*Ce,Oe=ne*(255-Oe)+q*Oe,s[M]=Be,s[M+1]=Ce,s[M+2]=Oe,s[M+3]=d[3]}return new ImageData(s,i,r)}function b_e(n,e=512){return n.getExtent()?TL({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():zp}function Ite(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function __e(n,e,t="",i={},r=void 0){let o,s,a,c,d=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(d=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:LE(o,a.accessToken),a=Ite(o,a)),new Promise(function(p,v){Ate(e,a).then(function(M){if(M.version!=8)return v(new Error("glStyle version 8 required."));if(!(n instanceof xL||n instanceof O4))return v(new Error("Can only apply to VectorLayer or VectorTileLayer"));const E=n instanceof O4?"vector":"geojson";if(c?Array.isArray(c)?s=M.layers.find(function(re){return re.id===c[0]}).source:s=c:(s=M.layers.find(function(re){return re.source&&M.sources[re.source].type===E}).source,c=s),!s)return v(new Error(`No ${E} source found in the glStyle.`));function P(){if(!d)return Promise.resolve();if(n instanceof O4)return Dte(M.sources[s],o,a).then(function(q){const le=n.getSource();le?q!==le&&(le.setTileUrlFunction(q.getTileUrlFunction()),typeof le.setUrls=="function"&&typeof q.getUrls=="function"&&le.setUrls(q.getUrls()),le.format_||(le.format_=q.format_),le.getAttributions()||le.setAttributions(q.getAttributions()),le.getTileLoadFunction()===Ote&&le.setTileLoadFunction(q.getTileLoadFunction()),HA(le.getProjection(),q.getProjection())&&(le.tileGrid=q.getTileGrid())):n.setSource(q);const ue=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ue.getMinZoom()>0&&n.setMaxResolution(a4(Math.max(0,ue.getMinZoom()-1e-12),ue.getResolutions()))});const re=M.sources[s];let ee=n.getSource();(!ee||ee.get("mapbox-source")!==re)&&(ee=Pte(re,o,a));const ne=n.getSource();return ne?ee!==ne&&(ne.getAttributions()||ne.setAttributions(ee.getAttributions()),ne.format_||(ne.format_=ee.getFormat()),ne.url_=ee.getUrl()):n.setSource(ee),Promise.resolve()}let U,z;const V={},Z={};function X(){if(!z&&(!M.sprite||V)){if(a.projection&&!r){const q=zs(a.projection).getUnits();q!=="m"&&(r=zp.map(le=>le/Pv[q]))}let re;const ee=n.getSource();ee instanceof DL&&ee.format_ instanceof pte&&(re=ee.format_.layerName_),z=qCe(n,M,c,r,V,Z,(ne,q=a.webfonts)=>FCe(ne,q),a.getImage,re),n.getStyle()?P().then(p).catch(v):v(new Error(`Nothing to show for source [${s}]`))}else z?(n.setStyle(z),P().then(p).catch(v)):v(new Error("Something went wrong trying to apply style."))}if(M.sprite){const re=TCe(M.sprite,a.accessToken,o||location.href);U=XA?1:window.devicePixelRatio>=1.5?.5:1;const ee=U==.5?"@2x":"";Promise.all(re.map(function(ne){const q=new URL(ne.url);let le=q.origin+q.pathname+ee+".json"+q.search;return new Promise(function(ue,ve){Sx("Sprite",le,a).then(ue).catch(function(pe){le=q.origin+q.pathname+".json"+q.search,Sx("Sprite",le,a).then(ue).catch(ve)})}).then(function(ue){ue===void 0&&v(new Error("No sprites found."));let ve;if(ve=q.origin+q.pathname+ee+".png"+q.search,a.transformRequest){const pe=a.transformRequest(ve,"SpriteImage")||ve;(pe instanceof Request||pe instanceof Promise)&&(ve=pe)}Z[ne.id]=ve;for(const pe in ue){const Be=ne.id=="default"?pe:`${ne.id}:${pe}`;V[Be]=ue[pe]}}).catch(function(ue){v(new Error(`Sprites cannot be loaded: ${le}: ${ue.message}`))})})).then(X).catch(v)}else X()}).catch(v)})}function Tte(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function x_e(n,e){const t=n.bounds;if(t){const i=GD([t[0],t[1]],e),r=GD([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return zs(e).getExtent()}function kte(n,e,t){const i=new Bte({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=zs(t.projection||"EPSG:3857"),a=x_e(r,s),c=s.getExtent(),d=r.minzoom||0,p=r.maxzoom||22,v={attributions:i.getAttributions(),projection:s,tileGrid:new PB({origin:c?$1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:d,resolutions:b_e(s,e.tileSize).slice(0,p+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?v.urls=r.tiles:v.url=r.tiles,v}function M_e(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,Uh.zoom=KE(e,t.resolutions||zp),Uh.distanceFromCenter=0;let a;const c=Wi(r,"paint","background-color",VA,i);return s["background-opacity"]!==void 0&&(a=Wi(r,"paint","background-opacity",VA,i)),o.visibility=="none"?void 0:lv(c,a)}function w_e(n,e,t){const i=XA?{style:{}}:document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new Yx({source:new Vx({}),render(r){const o=M_e(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function Dte(n,e,t){return new Promise(function(i,r){hte(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=kte(n,o,t);a.tileLoadFunction=s,a.format=new pte({layerName:"mvt:layer"});const c=new DL(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function S_e(n,e,t){const i=new O4({declutter:!0,visible:!1});return Dte(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function Rte(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function E_e(n,e,t){return new Promise(function(i,r){hte(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new Bte({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=kte(n,o,t).tileGrid,t.projection&&(a.projection=zs(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(d,p,v){const M=Rte(v);let E=c(d,p,v);if(E.indexOf(M)!=-1){const P=a.getTileGrid().getTileCoordExtent(d);E=E.replace(M,P.toString())}return E}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function RL(n,e,t){const i=new _te;return E_e(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function B_e(n,e,t){const i=RL(n,e,t);return new OL({source:new kL({operationType:"image",operation:C_e,sources:[i]})})}function O_e(n,e,t){const i=RL(n,e,t);return new OL({source:new kL({operationType:"image",operation:v_e,sources:[i]})})}function Pte(n,e,t){const i=t.projection?new HN({dataProjection:t.projection}):new HN,r=n.data,o={};if(typeof r=="string"){const[a]=TS(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const d=(v,M,E)=>{const P=Rte(E);return a.replace(P,`${v.join(",")}`)},p=new IS({attributions:n.attribution,format:i,loader:(v,M,E,P,U)=>{const z=typeof d=="function"?d(v,M,E):d;Sx("GeoJSON",z,t).then(V=>{const Z=p.getFormat().readFeatures(V,{featureProjection:E});p.addFeatures(Z),P(Z)}).catch(V=>{p.removeLoadedExtent(v),U()})},strategy:cCe});return p.set("mapbox-source",n),p}const c=new IS({attributions:n.attribution,format:i,url:a,loader:(d,p,v,M,E)=>{Sx("GeoJSON",a,t).then(P=>{const U=c.getFormat().readFeatures(P,{featureProjection:v});c.addFeatures(U),M(U)}).catch(P=>{c.removeLoadedExtent(d),E()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new IS(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function I_e(n,e,t){return new xL({declutter:!0,source:Pte(n,e,t),visible:!1})}function T_e(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],k_e(n,e,i,t))}}function k_e(n,e,t,i){Uh.zoom=t,Uh.distanceFromCenter=0;const r=Wi(n,"paint","raster-opacity",VA,i);e.setOpacity(r)}function D_e(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=gJ(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function R_e(n,e,t,i){const r=cte(n),o=n.layers,s=t.type,a=t.source||Tte(o,t.ref),c=n.sources[a];let d;if(s=="background")d=w_e(t,i,r);else if(c.type=="vector")d=S_e(c,e,i);else if(c.type=="raster"){const v=["raster-saturation","raster-contrast","raster-brightness-max","raster-brightness-min","raster-hue-rotate"];!!Object.keys(t.paint||{}).find(E=>v.includes(E))?(d=B_e(c,e,i),d.getSource().on("beforeoperations",function(E){Uh.zoom=KE(E.resolution,i.resolutions||zp),Uh.distanceFromCenter=0;const P=E.data;P.saturation=Wi(t,"paint","raster-saturation",VA,r),P.contrast=Wi(t,"paint","raster-contrast",VA,r),P.brightnessHigh=Wi(t,"paint","raster-brightness-max",VA,r),P.brightnessLow=Wi(t,"paint","raster-brightness-min",VA,r),P.hueRotate=Wi(t,"paint","raster-hue-rotate",VA,r)})):d=RL(c,e,i),d.setVisible(t.layout?t.layout.visibility!=="none":!0),d.on("prerender",T_e(t,d,r))}else if(c.type=="geojson")d=I_e(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const v=O_e(c,e,i);d=v,v.getSource().on("beforeoperations",function(M){const E=M.data;E.resolution=ND(i.projection||"EPSG:3857",M.resolution,Of(M.extent),"m"),Uh.zoom=KE(M.resolution,i.resolutions||zp),Uh.distanceFromCenter=0,E.encoding=c.encoding,E.vert=5*Wi(t,"paint","hillshade-exaggeration",VA,r),E.sunAz=Wi(t,"paint","hillshade-illumination-direction",VA,r),E.sunEl=35,E.opacity=.3,E.highlightColor=Wi(t,"paint","hillshade-highlight-color",VA,r),E.shadowColor=Wi(t,"paint","hillshade-shadow-color",VA,r),E.accentColor=Wi(t,"paint","hillshade-accent-color",VA,r)}),d.setVisible(t.layout?t.layout.visibility!=="none":!0)}const p=a;return d&&d.set("mapbox-source",p),d}function lG(n,e,t,i){const r=[];let o=null;if(e instanceof C5){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const v=i.projection?zs(i.projection):o.getProjection();o=new Tp(Object.assign(o.getProperties(),{maxResolution:zp[0]/Pv[v.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(GD(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(zp[0]/Pv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,d,p;for(let v=0,M=s.length;v<M;++v){const E=s[v],P=E.type;if(P=="heatmap"){console.debug(`layers[${v}].type "${P}" not supported`);continue}else p=E.source||Tte(s,E.ref),(!p||p!=d)&&(a.length&&(r.push(uG(c,a,n,t,e,i)),a=[]),c=R_e(n,t,E,i),c instanceof xL||c instanceof O4||(a=[]),d=c.get("mapbox-source")),a.push(E.id)}return r.push(uG(c,a,n,t,e,i)),Promise.all(r)}function P_e(n,e,t={}){let i,r;if(XA){if(!(n instanceof C5)&&!(n instanceof t_))throw new Error("ol-mapbox-style in a web worker requires a Map or a LayerGroup as first argument");r=n}else typeof n=="string"||n instanceof HTMLElement?r=new C5({target:n}):r=n;if(typeof e=="string"){const o=e.startsWith("data:")?location.href:LE(e,t.accessToken);t=Ite(o,t),i=new Promise(function(s,a){Ate(e,t).then(function(c){lG(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){lG(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:LE(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function uG(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let d=0,p=c.length;d<p;++d){const v=c[d];e.indexOf(v.id)!==-1&&(s=Math.min("minzoom"in v?v.minzoom:0,s),a=Math.max("maxzoom"in v?v.maxzoom:24,a))}return new Promise(function(d,p){const v=function(){const E=n.getSource();if(!E||E.getState()==="error"){p(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in E){const P=E.getTileGrid();if(P){const U=P.getMinZoom();(s>0||U>0)&&n.setMaxResolution(Math.min(a4(Math.max(0,s-1e-12),zp),a4(Math.max(0,U-1e-12),P.getResolutions()))),a<24&&n.setMinResolution(a4(a,zp))}}else s>0&&n.setMaxResolution(a4(Math.max(0,s-1e-12),zp));E instanceof IS||E instanceof DL?__e(n,t,e,Object.assign({styleUrl:i},o)).then(function(){D_e(n,r),d()}).catch(p):d()};n.set("mapbox-layers",e);const M=r.getLayers();M.getArray().indexOf(n)===-1&&M.push(n),n.getSource()?v():n.once("change:source",v)})}function ki(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ki=function(){return s},s}ki();function cG(n){return ki().f[0]++,ki().s[0]++,ki().b[1][0]++,!n||(ki().b[1][1]++,n.length<2)?(ki().b[0][0]++,ki().s[1]++,null):(ki().b[0][1]++,ki().s[2]++,oe.jsx("span",{className:"maputnik-coords",children:n.map(e=>(ki().f[1]++,ki().s[3]++,String(e).padStart(7,""))).join(", ")}))}class U_e extends En.Component{static defaultProps=(ki().s[4]++,{onMapLoaded:()=>{ki().f[2]++},onDataChange:()=>{ki().f[3]++},onLayerSelect:()=>{ki().f[4]++}});updateStyle;map;container=(ki().s[5]++,null);overlay;popupContainer=(ki().s[6]++,null);constructor(e){ki().f[5]++,ki().s[7]++,super(e),ki().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},ki().s[9]++,this.updateStyle=oM.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(ki().f[6]++,ki().s[10]++,this.map)ki().b[2][1]++;else{ki().b[2][0]++,ki().s[11]++;return}ki().s[12]++,this.map.getLayers().clear(),ki().s[13]++,P_e(this.map,e)}componentDidUpdate(e){ki().f[7]++,ki().s[14]++,this.props.mapStyle!==e.mapStyle?(ki().b[3][0]++,ki().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):ki().b[3][1]++}componentDidMount(){ki().f[8]++,ki().s[16]++,this.overlay=new OCe({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(ki().s[17]++,new C5({target:this.container,overlays:[this.overlay],view:new Tp({zoom:1,center:[180,-90]})}));ki().s[18]++,e.on("pointermove",i=>{ki().f[9]++;const r=(ki().s[19]++,E8(i.coordinate));ki().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),ki().s[21]++;const t=()=>{ki().f[10]++;const i=(ki().s[22]++,e.getView().getZoom()),r=(ki().s[23]++,E8(e.getView().getCenter()));ki().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};ki().s[25]++,t(),ki().s[26]++,e.on("moveend",t),ki().s[27]++,e.on("postrender",i=>{ki().f[11]++;const r=(ki().s[28]++,E8(e.getView().getCenter()));ki().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),ki().s[30]++,this.map=e,ki().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(ki().s[32]++,e=>{ki().f[12]++,ki().s[33]++,e.target.blur(),ki().s[34]++,this.overlay.setPosition(void 0)});render(){ki().f[13]++;const e=(ki().s[35]++,this.props.t);return ki().s[36]++,oe.jsxs("div",{className:"maputnik-ol-container",children:[oe.jsxs("div",{ref:t=>{ki().f[14]++,ki().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[oe.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),oe.jsx(hJ,{features:(ki().b[4][0]++,this.state.selectedFeatures||(ki().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),oe.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(ki().b[5][0]++,this.props.debugToolbox&&(ki().b[5][1]++,oe.jsxs("div",{className:"maputnik-ol-debug",children:[oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("cursor:")," "]}),oe.jsx("span",{children:cG(this.state.cursor)})]}),oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("center:")," "]}),oe.jsx("span",{children:cG(this.state.center)})]}),oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("rotation:")," "]}),oe.jsx("span",{children:this.state.rotation})]})]}))),oe.jsx("div",{className:"maputnik-ol",ref:t=>{ki().f[15]++,ki().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const L_e=(ki().s[39]++,So()(U_e));var o7={exports:{}};var AG;function K_e(){return AG||(AG=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(o7)),o7.exports}var F_e=K_e();const Ug=xu(F_e),z_e=/("(?:[^\\"]|\\.)*")|[:,]/g;function j_e(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const d=JSON.stringify(s,r);if(d===void 0)return d;const p=i-a.length-c;if(d.length<=p){const v=d.replace(z_e,(M,E)=>E||`${M} `);if(v.length<=p)return v}if(r!=null&&(s=JSON.parse(d),r=void 0),typeof s=="object"&&s!==null){const v=a+t,M=[];let E=0,P,U;if(Array.isArray(s)){P="[",U="]";const{length:z}=s;for(;E<z;E++)M.push(o(s[E],v,E===z-1?0:1)||"null")}else{P="{",U="}";const z=Object.keys(s),{length:V}=z;for(;E<V;E++){const Z=z[E],X=`${JSON.stringify(Z)}: `,re=o(s[Z],v,X.length+(E===V-1?0:1));re!==void 0&&M.push(X+re)}}if(M.length>0)return[P,t+M.join(`,
${v}`),U].join(`
${a}`)}return d})(n,"",0)}let uR=[],Ute=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Ute:uR).push(t=t+n[e])})();function N_e(n){if(n<768)return!1;for(let e=0,t=uR.length;;){let i=e+t>>1;if(n<uR[i])t=i;else if(n>=Ute[i])e=i+1;else return!0;if(e==t)return!1}}function hG(n){return n>=127462&&n<=127487}const dG=8205;function G_e(n,e,t=!0,i=!0){return(t?Lte:W_e)(n,e,i)}function Lte(n,e,t){if(e==n.length)return e;e&&Kte(n.charCodeAt(e))&&Fte(n.charCodeAt(e-1))&&e--;let i=s7(n,e);for(e+=fG(i);e<n.length;){let r=s7(n,e);if(i==dG||r==dG||t&&N_e(r))e+=fG(r),i=r;else if(hG(r)){let o=0,s=e-2;for(;s>=0&&hG(s7(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function W_e(n,e,t){for(;e>0;){let i=Lte(n,e-2,t);if(i<e)return i;e--}return 0}function s7(n,e){let t=n.charCodeAt(e);if(!Fte(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Kte(i)?(t-55296<<10)+(i-56320)+65536:t}function Kte(n){return n>=56320&&n<57344}function Fte(n){return n>=55296&&n<56320}function fG(n){return n<65536?1:2}class fs{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Ex(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),lg.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ex(this,e,t);let i=[];return this.decompose(e,t,i,0),lg.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new I4(this),o=new I4(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new I4(this,e)}iterRange(e,t=this.length){return new zte(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new jte(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?fs.empty:e.length<=32?new bu(e):lg.from(bu.split(e,[]))}}class bu extends fs{constructor(e,t=Q_e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new q_e(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new bu(mG(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=DS(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new bu(a,s.length+o.length));else{let c=a.length>>1;i.push(new bu(a.slice(0,c)),new bu(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof bu))return super.replace(e,t,i);[e,t]=Ex(this,e,t);let r=DS(this.text,DS(i.text,mG(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new bu(r,o):lg.from(bu.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=Ex(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new bu(i,r)),i=[],r=-1);return r>-1&&t.push(new bu(i,r)),t}}class lg extends fs{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let d=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!d?i.push(a):a.decompose(e-s,t-s,i,d)}s=c+1}}replace(e,t,i){if([e,t]=Ex(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),d=this.lines-s.lines+c.lines;if(c.lines<d>>4&&c.lines>d>>6){let p=this.children.slice();return p[r]=c,new lg(p,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Ex(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof lg))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],d=e.children[o];if(c!=d)return i+c.scanIdentical(d,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let E of e)i+=E.lines;if(i<32){let E=[];for(let P of e)P.flatten(E);return new bu(E,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,d=-1,p=[];function v(E){let P;if(E.lines>o&&E instanceof lg)for(let U of E.children)v(U);else E.lines>s&&(c>s||!c)?(M(),a.push(E)):E instanceof bu&&c&&(P=p[p.length-1])instanceof bu&&E.lines+P.lines<=32?(c+=E.lines,d+=E.length+1,p[p.length-1]=new bu(P.text.concat(E.text),P.length+1+E.length)):(c+E.lines>r&&M(),c+=E.lines,d+=E.length+1,p.push(E))}function M(){c!=0&&(a.push(p.length==1?p[0]:lg.from(p,d)),d=-1,c=p.length=0)}for(let E of e)v(E);return M(),a.length==1?a[0]:new lg(a,t)}}fs.empty=new bu([""],0);function Q_e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function DS(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function mG(n,e,t){return DS(n,[""],e,t)}class I4{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof bu?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof bu?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof bu){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof bu?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class zte{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new I4(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class jte{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(fs.prototype[Symbol.iterator]=function(){return this.iter()},I4.prototype[Symbol.iterator]=zte.prototype[Symbol.iterator]=jte.prototype[Symbol.iterator]=function(){return this});class q_e{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function Ex(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function yc(n,e,t=!0,i=!0){return G_e(n,e,t,i)}function Y_e(n){return n>=56320&&n<57344}function V_e(n){return n>=55296&&n<56320}function Od(n,e){let t=n.charCodeAt(e);if(!V_e(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Y_e(i)?(t-55296<<10)+(i-56320)+65536:t}function PL(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function ug(n){return n<65536?1:2}const cR=/\r\n?|\n/;var Rh=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Rh||(Rh={}));class Bg{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){AR(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Bg(e)}composeDesc(e){return this.empty?e:e.empty?this:Nte(this,e)}mapDesc(e,t=!1){return e.empty?this:hR(this,e,t)}mapPos(e,t=-1,i=Rh.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],d=r+a;if(c<0){if(d>e)return o+(e-r);o+=a}else{if(i!=Rh.Simple&&d>=e&&(i==Rh.TrackDel&&r<e&&d>e||i==Rh.TrackBefore&&r<e||i==Rh.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=d}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Bg(e)}static create(e){return new Bg(e)}}class mc extends Bg{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return AR(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return hR(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(fs.empty);i.push(s?e.slice(o,o+s):fs.empty)}o+=s}return new mc(t,i)}compose(e){return this.empty?e:e.empty?this:Nte(this,e,!0)}map(e,t=!1){return e.empty?this:hR(this,e,t,!0)}iterChanges(e,t=!1){AR(this,e,t)}get desc(){return Bg.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new x5(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let p=Math.min(o.len,c-a);$A(r,p,-1);let v=o.ins==-1?-1:o.off==0?o.ins:0;$A(t,p,v),v>0&&xv(i,t,o.text),o.forward(p),a+=p}let d=e[s++];for(;a<d;){if(o.done)break e;let p=Math.min(o.len,d-a);$A(t,p,-1),$A(r,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),a+=p}}return{changes:new mc(t,i),filtered:Bg.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(p=!1){if(!p&&!r.length)return;s<t&&$A(r,t-s,-1);let v=new mc(r,o);a=a?a.compose(v.map(a)):v,r=[],o=[],s=0}function d(p){if(Array.isArray(p))for(let v of p)d(v);else if(p instanceof mc){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);c(),a=a?a.compose(p.map(a)):p}else{let{from:v,to:M=v,insert:E}=p;if(v>M||v<0||M>t)throw new RangeError(`Invalid change range ${v} to ${M} (in doc of length ${t})`);let P=E?typeof E=="string"?fs.of(E.split(i||cR)):E:fs.empty,U=P.length;if(v==M&&U==0)return;v<s&&c(),v>s&&$A(r,v-s,-1),$A(r,M-v,U),xv(o,r,P),s=M}}return d(e),c(!a),a}static empty(e){return new mc(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(fs.empty);i[r]=fs.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new mc(t,i)}static createSet(e,t){return new mc(e,t)}}function $A(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function xv(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(fs.empty);n.push(t)}}function AR(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let d=r,p=o,v=fs.empty;for(;d+=a,p+=c,c&&i&&(v=v.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,d,o,p,v),r=d,o=p}}}function hR(n,e,t,i=!1){let r=[],o=i?[]:null,s=new x5(n),a=new x5(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let d=Math.min(s.len,a.len);$A(r,d,-1),s.forward(d),a.forward(d)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let d=a.len;for($A(r,a.ins,-1);d;){let p=Math.min(s.len,d);s.ins>=0&&c<s.i&&s.len<=p&&($A(r,0,s.ins),o&&xv(o,r,s.text),c=s.i),s.forward(p),d-=p}a.next()}else if(s.ins>=0){let d=0,p=s.len;for(;p;)if(a.ins==-1){let v=Math.min(p,a.len);d+=v,p-=v,a.forward(v)}else if(a.ins==0&&a.len<p)p-=a.len,a.next();else break;$A(r,d,c<s.i?s.ins:0),o&&c<s.i&&xv(o,r,s.text),c=s.i,s.forward(s.len-p)}else{if(s.done&&a.done)return o?mc.createSet(r,o):Bg.create(r);throw new Error("Mismatched change set lengths")}}}function Nte(n,e,t=!1){let i=[],r=t?[]:null,o=new x5(n),s=new x5(e);for(let a=!1;;){if(o.done&&s.done)return r?mc.createSet(i,r):Bg.create(i);if(o.ins==0)$A(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)$A(i,0,s.ins,a),r&&xv(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),d=i.length;if(o.ins==-1){let p=s.ins==-1?-1:s.off?0:s.ins;$A(i,c,p,a),r&&p&&xv(r,i,s.text)}else s.ins==-1?($A(i,o.off?0:o.len,c,a),r&&xv(r,i,o.textBit(c))):($A(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&xv(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>d),o.forward2(c),s.forward(c)}}}}class x5{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?fs.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?fs.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class pb{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new pb(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Bn.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Bn.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Bn.range(e.anchor,e.head)}static create(e,t,i){return new pb(e,t,i)}}class Bn{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Bn.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Bn([this.main],0)}addRange(e,t=!0){return Bn.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Bn.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Bn(e.ranges.map(t=>pb.fromJSON(t)),e.main)}static single(e,t=e){return new Bn([Bn.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return Bn.normalized(e.slice(),t);i=o.to}return new Bn(e,t)}static cursor(e,t=0,i,r){return pb.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?pb.create(t,e,48|o):pb.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?Bn.range(c,a):Bn.range(a,c))}}return new Bn(e,t)}}function Gte(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let UL=0;class Ii{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=UL++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Ii(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:LL),!!e.static,e.enables)}of(e){return new RS([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new RS(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new RS(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function LL(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class RS{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=UL++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,d=!1,p=[];for(let v of this.dependencies)v=="doc"?c=!0:v=="selection"?d=!0:(((t=e[v.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[v.id]);return{create(v){return v.values[s]=i(v),1},update(v,M){if(c&&M.docChanged||d&&(M.docChanged||M.selection)||dR(v,p)){let E=i(v);if(a?!pG(E,v.values[s],r):!r(E,v.values[s]))return v.values[s]=E,1}return 0},reconfigure:(v,M)=>{let E,P=M.config.address[o];if(P!=null){let U=NE(M,P);if(this.dependencies.every(z=>z instanceof Ii?M.facet(z)===v.facet(z):z instanceof Cc?M.field(z,!1)==v.field(z,!1):!0)||(a?pG(E=i(v),U,r):r(E=i(v),U)))return v.values[s]=U,0}else E=i(v);return v.values[s]=E,1}}}}function pG(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function dR(n,e){let t=!1;for(let i of e)T4(n,i)&1&&(t=!0);return t}function $_e(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let d=[];for(let p=0;p<i.length;p++){let v=NE(c,i[p]);if(r[p]==2)for(let M of v)d.push(M);else d.push(v)}return e.combine(d)}return{create(c){for(let d of i)T4(c,d);return c.values[s]=a(c),1},update(c,d){if(!dR(c,o))return 0;let p=a(c);return e.compare(p,c.values[s])?0:(c.values[s]=p,1)},reconfigure(c,d){let p=dR(c,i),v=d.config.facets[e.id],M=d.facet(e);if(v&&!p&&LL(t,v))return c.values[s]=M,0;let E=a(c);return e.compare(E,M)?(c.values[s]=M,0):(c.values[s]=E,1)}}}const Ow=Ii.define({static:!0});class Cc{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Cc(UL++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ow).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(Ow),s=r.facet(Ow),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,Ow.of({field:this,create:e})]}get extension(){return this}}const sb={lowest:4,low:3,default:2,high:1,highest:0};function R3(n){return e=>new Wte(e,n)}const i_={highest:R3(sb.highest),high:R3(sb.high),default:R3(sb.default),low:R3(sb.low),lowest:R3(sb.lowest)};class Wte{constructor(e,t){this.inner=e,this.prec=t}}class IM{of(e){return new fR(this,e)}reconfigure(e){return IM.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class fR{constructor(e,t){this.compartment=e,this.inner=t}}class jE{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let M of H_e(e,t,s))M instanceof Cc?r.push(M):(o[M.facet.id]||(o[M.facet.id]=[])).push(M);let a=Object.create(null),c=[],d=[];for(let M of r)a[M.id]=d.length<<1,d.push(E=>M.slot(E));let p=i?.config.facets;for(let M in o){let E=o[M],P=E[0].facet,U=p&&p[M]||[];if(E.every(z=>z.type==0))if(a[P.id]=c.length<<1|1,LL(U,E))c.push(i.facet(P));else{let z=P.combine(E.map(V=>V.value));c.push(i&&P.compare(z,i.facet(P))?i.facet(P):z)}else{for(let z of E)z.type==0?(a[z.id]=c.length<<1|1,c.push(z.value)):(a[z.id]=d.length<<1,d.push(V=>z.dynamicSlot(V)));a[P.id]=d.length<<1,d.push(z=>$_e(z,P,E))}}let v=d.map(M=>M(a));return new jE(e,s,v,a,c,o)}}function H_e(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let d=i[c].indexOf(s);d>-1&&i[c].splice(d,1),s instanceof fR&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let d of s)o(d,a);else if(s instanceof fR){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(s.compartment)||s.inner;t.set(s.compartment,d),o(d,a)}else if(s instanceof Wte)o(s.inner,s.prec);else if(s instanceof Cc)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof RS)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,sb.default);else{let d=s.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,a)}}return o(n,sb.default),i.reduce((s,a)=>s.concat(a))}function T4(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function NE(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Qte=Ii.define(),mR=Ii.define({combine:n=>n.some(e=>e),static:!0}),qte=Ii.define({combine:n=>n.length?n[0]:void 0,static:!0}),Yte=Ii.define(),Vte=Ii.define(),$te=Ii.define(),Hte=Ii.define({combine:n=>n.length?n[0]:!1});class Z1{constructor(e,t){this.type=e,this.value=t}static define(){return new Z_e}}class Z_e{of(e){return new Z1(this,e)}}class X_e{constructor(e){this.map=e}of(e){return new io(this,e)}}class io{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new io(this.type,t)}is(e){return this.type==e}static define(e={}){return new X_e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}io.reconfigure=io.define();io.appendConfig=io.define();class vc{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&Gte(i,t.newLength),o.some(a=>a.type==vc.time)||(this.annotations=o.concat(vc.time.of(Date.now())))}static create(e,t,i,r,o,s){return new vc(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(vc.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}vc.time=Z1.define();vc.userEvent=Z1.define();vc.addToHistory=Z1.define();vc.remote=Z1.define();function J_e(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function Zte(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=mc.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:io.mapEffects(n.effects,r).concat(io.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function pR(n,e,t){let i=e.selection,r=J2(e.annotations);return e.userEvent&&(r=r.concat(vc.userEvent.of(e.userEvent))),{changes:e.changes instanceof mc?e.changes:mc.of(e.changes||[],t,n.facet(qte)),selection:i&&(i instanceof Bn?i:Bn.single(i.anchor,i.head)),effects:J2(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Xte(n,e,t){let i=pR(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=Zte(i,pR(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=vc.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return t2e(t?e2e(r):r)}function e2e(n){let e=n.startState,t=!0;for(let r of e.facet(Yte)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:J_e(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=mc.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=vc.create(e,r,n.selection&&n.selection.map(o),io.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(Vte);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof vc?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof vc?n=o[0]:n=Xte(e,J2(o),!1)}return n}function t2e(n){let e=n.startState,t=e.facet($te),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=Zte(i,pR(e,o,n.changes.newLength),!0))}return i==n?n:vc.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const n2e=[];function J2(n){return n==null?n2e:Array.isArray(n)?n:[n]}var Al=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Al||(Al={}));const i2e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let gR;try{gR=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function r2e(n){if(gR)return gR.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||i2e.test(t)))return!0}return!1}function o2e(n){return e=>{if(!/\S/.test(e))return Al.Space;if(r2e(e))return Al.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Al.Word;return Al.Other}}class cs{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)T4(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return T4(this,i),NE(this,i)}update(...e){return Xte(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(IM.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,d)=>r.set(d,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(io.reconfigure)?(t=null,i=a.value):a.is(io.appendConfig)&&(t=null,i=J2(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=jE.resolve(i,r,this),o=new cs(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,d)=>d.reconfigure(c,this),null).values);let s=e.startState.facet(mR)?e.newSelection:e.newSelection.asSingle();new cs(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Bn.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=J2(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),d=this.changes(c.changes),p=d.map(r);for(let M=0;M<a;M++)o[M]=o[M].map(p);let v=r.mapDesc(d,!0);o.push(c.range.map(v)),r=r.compose(p),s=io.mapEffects(s,p).concat(io.mapEffects(J2(c.effects),v))}return{changes:r,selection:Bn.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof mc?e:mc.of(e,this.doc.length,this.facet(cs.lineSeparator))}toText(e){return fs.of(e.split(this.facet(cs.lineSeparator)||cR))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(T4(this,t),NE(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Cc&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return cs.create({doc:e.doc,selection:Bn.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=jE.resolve(e.extensions||[],new Map),i=e.doc instanceof fs?e.doc:fs.of((e.doc||"").split(t.staticFacet(cs.lineSeparator)||cR)),r=e.selection?e.selection instanceof Bn?e.selection:Bn.single(e.selection.anchor,e.selection.head):Bn.single(0);return Gte(r,i.length),t.staticFacet(mR)||(r=r.asSingle()),new cs(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(cs.tabSize)}get lineBreak(){return this.facet(cs.lineSeparator)||`
`}get readOnly(){return this.facet(Hte)}phrase(e,...t){for(let i of this.facet(cs.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(Qte))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return o2e(t.length?t[0]:"")}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=yc(t,s,!1);if(o(t.slice(c,s))!=Al.Word)break;s=c}for(;a<r;){let c=yc(t,a);if(o(t.slice(a,c))!=Al.Word)break;a=c}return s==a?null:Bn.range(s+i,a+i)}}cs.allowMultipleSelections=mR;cs.tabSize=Ii.define({combine:n=>n.length?n[0]:4});cs.lineSeparator=qte;cs.readOnly=Hte;cs.phrases=Ii.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});cs.languageData=Qte;cs.changeFilter=Yte;cs.transactionFilter=Vte;cs.transactionExtender=$te;IM.reconfigure=io.define();function $p(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Uv{eq(e){return this==e}range(e,t=e){return yR.create(e,t,this)}}Uv.prototype.startSide=Uv.prototype.endSide=0;Uv.prototype.point=!1;Uv.prototype.mapMode=Rh.TrackDel;function KL(n,e){return n==e||n.constructor==e.constructor&&n.eq(e)}let yR=class Jte{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Jte(e,t,i)}};function vR(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class FL{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,d=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return d>=0?s:a;d>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let d=this.value[c],p=this.from[c]+e,v=this.to[c]+e,M,E;if(p==v){let P=t.mapPos(p,d.startSide,d.mapMode);if(P==null||(M=E=P,d.startSide!=d.endSide&&(E=t.mapPos(p,d.endSide),E<M)))continue}else if(M=t.mapPos(p,d.startSide),E=t.mapPos(v,d.endSide),M>E||M==E&&d.startSide>0&&d.endSide<=0)continue;(E-M||d.endSide-d.startSide)<0||(s<0&&(s=M),d.point&&(a=Math.max(a,E-M)),i.push(d),r.push(M-s),o.push(E-s))}return{mapped:i.length?new FL(r,o,i,a):null,pos:s}}}class vo{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new vo(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(vR)),this.isEmpty)return t.length?vo.of(t):this;let a=new ene(this,null,-1).goto(0),c=0,d=[],p=new q1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let v=t[c++];p.addInner(v.from,v.to,v.value)||d.push(v)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&p.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(p.addInner(a.from,a.to,a.value)||d.push(yR.create(a.from,a.to,a.value))),a.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?vo.empty:this.nextLayer.update({add:d,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],d=e.touchesRange(a,a+c.length);if(d===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(d===!0){let{mapped:p,pos:v}=c.map(a,e);p&&(r=Math.max(r,p.maxPoint),t.push(p),i.push(v))}}let o=this.nextLayer.map(e);return t.length==0?o:new vo(i,t,o||vo.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return M5.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return M5.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),a=t.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),c=gG(s,a,i),d=new P3(s,c,o),p=new P3(a,c,o);i.iterGaps((v,M,E)=>yG(d,v,p,M,E,r)),i.empty&&i.length==0&&yG(d,0,p,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),s=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=gG(o,s),c=new P3(o,a,0).goto(i),d=new P3(s,a,0).goto(i);for(;;){if(c.to!=d.to||!CR(c.active,d.active)||c.point&&(!d.point||!KL(c.point,d.point)))return!1;if(c.to>r)return!0;c.next(),d.next()}}static spans(e,t,i,r,o=-1){let s=new P3(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let d=Math.min(s.to,i);if(s.point){let p=s.activeForPoint(s.to),v=s.pointFrom<t?p.length+1:s.point.startSide<0?p.length:Math.min(p.length,c);r.point(a,d,s.point,p,v,s.pointRank),c=Math.min(s.openEnd(d),p.length)}else d>a&&(r.span(a,d,s.active,c),c=s.openEnd(d));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new q1;for(let r of e instanceof yR?[e]:t?s2e(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return vo.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=vo.empty;r=r.nextLayer)t=new vo(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}vo.empty=new vo([],[],null,-1);function s2e(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(vR(e,i)>0)return n.slice().sort(vR);e=i}return n}vo.empty.nextLayer=vo.empty;class q1{finishChunk(e){this.chunks.push(new FL(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new q1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(vo.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=vo.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function gG(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class ene{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class M5{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new ene(s,t,i,o));return r.length==1?r[0]:new M5(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)a7(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)a7(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),a7(this.heap,0)}}}function a7(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class P3{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=M5.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Iw(this.active,e),Iw(this.activeTo,e),Iw(this.activeRank,e),this.minActive=vG(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;Tw(this.active,t,i),Tw(this.activeTo,t,r),Tw(this.activeRank,t,o),e&&Tw(e,t,this.cursor.from),this.minActive=vG(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Iw(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function yG(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e,d=!!o.boundChange;for(let p=!1;;){let v=n.to+c-t.to,M=v||n.endSide-t.endSide,E=M<0?n.to+c:t.to,P=Math.min(E,s);if(n.point||t.point?(n.point&&t.point&&KL(n.point,t.point)&&CR(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,P,n.point,t.point),p=!1):(p&&o.boundChange(a),P>a&&!CR(n.active,t.active)&&o.compareRange(a,P,n.active,t.active),d&&P<s&&(v||n.openEnd(E)!=t.openEnd(E))&&(p=!0)),E>s)break;a=E,M<=0&&n.next(),M>=0&&t.next()}}function CR(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!KL(n[t],e[t]))return!1;return!0}function Iw(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function Tw(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function vG(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function $x(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=yc(n,r));return i}function bR(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=yc(n,r)}return i===!0?-1:n.length}const _R="",CG=typeof Symbol>"u"?"__"+_R:Symbol.for(_R),xR=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),bG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Lv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,d){let p=[],v=/^@(\w+)\b/.exec(s[0]),M=v&&v[1]=="keyframes";if(v&&a==null)return c.push(s[0]+";");for(let E in a){let P=a[E];if(/&/.test(E))o(E.split(/,\s*/).map(U=>s.map(z=>U.replace(/&/,z))).reduce((U,z)=>U.concat(z)),P,c);else if(P&&typeof P=="object"){if(!v)throw new RangeError("The value of a property ("+E+") should be a primitive value.");o(r(E),P,p,M)}else P!=null&&p.push(E.replace(/_.*/,"").replace(/[A-Z]/g,U=>"-"+U.toLowerCase())+": "+P+";")}(p.length||M)&&c.push((i&&!v&&!d?s.map(i):s).join(", ")+" {"+p.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=bG[CG]||1;return bG[CG]=e+1,_R+e.toString(36)}static mount(e,t,i){let r=e[xR],o=i&&i.nonce;r?o&&r.setNonce(o):r=new a2e(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let _G=new Map;class a2e{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=_G.get(i);if(o)return e[xR]=o;this.sheet=new r.CSSStyleSheet,_G.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[xR]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let d=0;d<a.rules.length;d++)i.insertRule(a.rules[d],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Kv={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w5={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},l2e=typeof navigator<"u"&&/Mac/.test(navigator.platform),u2e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vA=0;vA<10;vA++)Kv[48+vA]=Kv[96+vA]=String(vA);for(var vA=1;vA<=24;vA++)Kv[vA+111]="F"+vA;for(var vA=65;vA<=90;vA++)Kv[vA]=String.fromCharCode(vA+32),w5[vA]=String.fromCharCode(vA);for(var l7 in Kv)w5.hasOwnProperty(l7)||(w5[l7]=Kv[l7]);function c2e(n){var e=l2e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||u2e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?w5:Kv)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ba(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)tne(n,arguments[e]);return n}function tne(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)tne(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let kh=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},MR=typeof document<"u"?document:{documentElement:{style:{}}};const wR=/Edge\/(\d+)/.exec(kh.userAgent),nne=/MSIE \d/.test(kh.userAgent),SR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kh.userAgent),KB=!!(nne||SR||wR),xG=!KB&&/gecko\/(\d+)/i.test(kh.userAgent),u7=!KB&&/Chrome\/(\d+)/.exec(kh.userAgent),A2e="webkitFontSmoothing"in MR.documentElement.style,ER=!KB&&/Apple Computer/.test(kh.vendor),MG=ER&&(/Mobile\/\w+/.test(kh.userAgent)||kh.maxTouchPoints>2);var Di={mac:MG||/Mac/.test(kh.platform),windows:/Win/.test(kh.platform),linux:/Linux|X11/.test(kh.platform),ie:KB,ie_version:nne?MR.documentMode||6:SR?+SR[1]:wR?+wR[1]:0,gecko:xG,gecko_version:xG?+(/Firefox\/(\d+)/.exec(kh.userAgent)||[0,0])[1]:0,chrome:!!u7,chrome_version:u7?+u7[1]:0,ios:MG,android:/Android\b/.test(kh.userAgent),webkit_version:A2e?+(/\bAppleWebKit\/(\d+)/.exec(kh.userAgent)||[0,0])[1]:0,safari:ER,safari_version:ER?+(/\bVersion\/(\d+(\.\d+)?)/.exec(kh.userAgent)||[0,0])[1]:0,tabSize:MR.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function zL(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const GE=Object.create(null);function jL(n,e,t){if(n==e)return!0;n||(n=GE),e||(e=GE);let i=Object.keys(n),r=Object.keys(e);if(i.length-0!=r.length-0)return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function h2e(n,e){for(let t=n.attributes.length-1;t>=0;t--){let i=n.attributes[t].name;e[i]==null&&n.removeAttribute(i)}for(let t in e){let i=e[t];t=="style"?n.style.cssText=i:n.getAttribute(t)!=i&&n.setAttribute(t,i)}}function wG(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function d2e(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class X1{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var bA=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(bA||(bA={}));class _r extends Uv{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new TM(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Wb(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=ine(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new Wb(e,i,r,t,e.widget||null,!0)}static line(e){return new kM(e)}static set(e,t=!1){return vo.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}_r.none=vo.empty;class TM extends _r{constructor(e){let{start:t,end:i}=ine(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?zL(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||GE}eq(e){return this==e||e instanceof TM&&this.tagName==e.tagName&&jL(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}TM.prototype.point=!1;class kM extends _r{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof kM&&this.spec.class==e.spec.class&&jL(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}kM.prototype.mapMode=Rh.TrackBefore;kM.prototype.point=!0;class Wb extends _r{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Rh.TrackBefore:Rh.TrackAfter:Rh.TrackDel}get type(){return this.startSide!=this.endSide?bA.WidgetRange:this.startSide<=0?bA.WidgetBefore:bA.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Wb&&f2e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Wb.prototype.point=!0;function ine(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function f2e(n,e){return n==e||!!(n&&e&&n.compare(e))}function ex(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class S5 extends Uv{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof S5&&this.tagName==e.tagName&&jL(this.attributes,e.attributes)}static create(e){return new S5(e.tagName,e.attributes||GE)}static set(e,t=!1){return vo.of(e,t)}}S5.prototype.startSide=S5.prototype.endSide=-1;function Bx(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function BR(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function k4(n,e){if(!e.anchorNode)return!1;try{return BR(n,e.anchorNode)}catch{return!1}}function PS(n){return n.nodeType==3?E5(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function D4(n,e,t,i){return t?SG(n,e,t,i,-1)||SG(n,e,t,i,1):!1}function Fv(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function WE(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function SG(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:Y1(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Fv(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?Y1(n):0}else return!1}}function Y1(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function QE(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function m2e(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function rne(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function p2e(n,e,t,i,r,o,s,a){let c=n.ownerDocument,d=c.defaultView||window;for(let p=n,v=!1;p&&!v;)if(p.nodeType==1){let M,E=p==c.body,P=1,U=1;if(E)M=m2e(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(v=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let Z=p.getBoundingClientRect();({scaleX:P,scaleY:U}=rne(p,Z)),M={left:Z.left,right:Z.left+p.clientWidth*P,top:Z.top,bottom:Z.top+p.clientHeight*U}}let z=0,V=0;if(r=="nearest")e.top<M.top?(V=e.top-(M.top+s),t>0&&e.bottom>M.bottom+V&&(V=e.bottom-M.bottom+s)):e.bottom>M.bottom&&(V=e.bottom-M.bottom+s,t<0&&e.top-V<M.top&&(V=e.top-(M.top+s)));else{let Z=e.bottom-e.top,X=M.bottom-M.top;V=(r=="center"&&Z<=X?e.top+Z/2-X/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-X+s)-M.top}if(i=="nearest"?e.left<M.left?(z=e.left-(M.left+o),t>0&&e.right>M.right+z&&(z=e.right-M.right+o)):e.right>M.right&&(z=e.right-M.right+o,t<0&&e.left<M.left+z&&(z=e.left-(M.left+o))):z=(i=="center"?e.left+(e.right-e.left)/2-(M.right-M.left)/2:i=="start"==a?e.left-o:e.right-(M.right-M.left)+o)-M.left,z||V)if(E)d.scrollBy(z,V);else{let Z=0,X=0;if(V){let re=p.scrollTop;p.scrollTop+=V/U,X=(p.scrollTop-re)*U}if(z){let re=p.scrollLeft;p.scrollLeft+=z/P,Z=(p.scrollLeft-re)*P}e={left:e.left-Z,top:e.top-X,right:e.right-Z,bottom:e.bottom-X},Z&&Math.abs(Z-z)<1&&(i="nearest"),X&&Math.abs(X-V)<1&&(r="nearest")}if(E)break;(e.top<M.top||e.bottom>M.bottom||e.left<M.left||e.right>M.right)&&(e={left:Math.max(e.left,M.left),right:Math.min(e.right,M.right),top:Math.max(e.top,M.top),bottom:Math.min(e.bottom,M.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function g2e(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class y2e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Y1(t):0),i,Math.min(e.focusOffset,i?Y1(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let tb=null;Di.safari&&Di.safari_version>=26&&(tb=!1);function one(n){if(n.setActive)return n.setActive();if(tb)return n.focus(tb);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(tb==null?{get preventScroll(){return tb={preventScroll:!0},!0}}:void 0),!tb){tb=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let EG;function E5(n,e,t=e){let i=EG||(EG=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function tx(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function v2e(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function C2e(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Y1(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=Y1(t))}else{if(t==n)return!0;i=Fv(t),t=t.parentNode}}function sne(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function ane(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=Y1(t)}else if(t.parentNode&&!WE(t))i=Fv(t),t=t.parentNode;else return null}}function lne(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!WE(t))i=Fv(t)+1,t=t.parentNode;else return null}}class Up{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Up(e.parentNode,Fv(e),t)}static after(e,t){return new Up(e.parentNode,Fv(e)+1,t)}}var Ma=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Ma||(Ma={}));const Qb=Ma.LTR,NL=Ma.RTL;function une(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const b2e=une("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),_2e=une("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),OR=Object.create(null),H0=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);OR[e]=t,OR[t]=-e}function cne(n){return n<=247?b2e[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?_2e[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const x2e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class P1{get dir(){return this.level%2?NL:Qb}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function Ane(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Ane(i.inner,r.inner))return!1}return!0}const _a=[];function M2e(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let d=s,p=c,v=c;d<a;d++){let M=cne(n.charCodeAt(d));M==512?M=p:M==8&&v==4&&(M=16),_a[d]=M==4?2:M,M&7&&(v=M),p=M}for(let d=s,p=c,v=c;d<a;d++){let M=_a[d];if(M==128)d<a-1&&p==_a[d+1]&&p&24?M=_a[d]=p:_a[d]=256;else if(M==64){let E=d+1;for(;E<a&&_a[E]==64;)E++;let P=d&&p==8||E<t&&_a[E]==8?v==1?1:8:256;for(let U=d;U<E;U++)_a[U]=P;d=E-1}else M==8&&v==1&&(_a[d]=1);p=M,M&7&&(v=M)}}}function w2e(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let d=s?i[s-1].to:e,p=s<i.length?i[s].from:t;for(let v=d,M,E,P;v<p;v++)if(E=OR[M=n.charCodeAt(v)])if(E<0){for(let U=a-3;U>=0;U-=3)if(H0[U+1]==-E){let z=H0[U+2],V=z&2?r:z&4?z&1?o:r:0;V&&(_a[v]=_a[H0[U]]=V),a=U;break}}else{if(H0.length==189)break;H0[a++]=v,H0[a++]=M,H0[a++]=c}else if((P=_a[v])==2||P==1){let U=P==r;c=U?0:1;for(let z=a-3;z>=0;z-=3){let V=H0[z+2];if(V&2)break;if(U)H0[z+2]|=2;else{if(V&4)break;H0[z+2]|=4}}}}}function S2e(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let d=_a[c];if(d==256){let p=c+1;for(;;)if(p==a){if(r==t.length)break;p=t[r++].to,a=r<t.length?t[r].from:e}else if(_a[p]==256)p++;else break;let v=o==1,M=(p<e?_a[p]:i)==1,E=v==M?v?1:2:i;for(let P=p,U=r,z=U?t[U-1].to:n;P>c;)P==z&&(P=t[--U].from,z=U?t[U-1].to:n),_a[--P]=E;c=p}else o=d,c++}}}function IR(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,d=0;c<t;){let p=!0,v=!1;if(d==o.length||c<o[d].from){let U=_a[c];U!=a&&(p=!1,v=U==16)}let M=!p&&a==1?[]:null,E=p?i:i+1,P=c;e:for(;;)if(d<o.length&&P==o[d].from){if(v)break e;let U=o[d];if(!p)for(let z=U.to,V=d+1;;){if(z==t)break e;if(V<o.length&&o[V].from==z)z=o[V++].to;else{if(_a[z]==a)break e;break}}if(d++,M)M.push(U);else{U.from>c&&s.push(new P1(c,U.from,E));let z=U.direction==Qb!=!(E%2);TR(n,z?i+1:i,r,U.inner,U.from,U.to,s),c=U.to}P=U.to}else{if(P==t||(p?_a[P]!=a:_a[P]==a))break;P++}M?IR(n,c,P,i+1,r,M,s):c<P&&s.push(new P1(c,P,E)),c=P}else for(let c=t,d=o.length;c>e;){let p=!0,v=!1;if(!d||c>o[d-1].to){let U=_a[c-1];U!=a&&(p=!1,v=U==16)}let M=!p&&a==1?[]:null,E=p?i:i+1,P=c;e:for(;;)if(d&&P==o[d-1].to){if(v)break e;let U=o[--d];if(!p)for(let z=U.from,V=d;;){if(z==e)break e;if(V&&o[V-1].to==z)z=o[--V].from;else{if(_a[z-1]==a)break e;break}}if(M)M.push(U);else{U.to<c&&s.push(new P1(U.to,c,E));let z=U.direction==Qb!=!(E%2);TR(n,z?i+1:i,r,U.inner,U.from,U.to,s),c=U.from}P=U.from}else{if(P==e||(p?_a[P-1]!=a:_a[P-1]==a))break;P--}M?IR(n,P,c,i+1,r,M,s):P<c&&s.push(new P1(P,c,E)),c=P}}function TR(n,e,t,i,r,o,s){let a=e%2?2:1;M2e(n,r,o,i,a),w2e(n,r,o,i,a),S2e(r,o,i,a),IR(n,r,o,e,t,i,s)}function E2e(n,e,t){if(!n)return[new P1(0,0,e==NL?1:0)];if(e==Qb&&!t.length&&!x2e.test(n))return hne(n.length);if(t.length)for(;n.length>_a.length;)_a[_a.length]=256;let i=[],r=e==Qb?0:1;return TR(n,r,r,t,0,n.length,i),i}function hne(n){return[new P1(0,n,0)]}let dne="";function B2e(n,e,t,i,r){var o;let s=i.head-n.from,a=P1.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],d=c.side(r,t);if(s==d){let M=a+=r?1:-1;if(M<0||M>=e.length)return null;c=e[a=M],s=c.side(!r,t),d=c.side(r,t)}let p=yc(n.text,s,c.forward(r,t));(p<c.from||p>c.to)&&(p=d),dne=n.text.slice(Math.min(s,p),Math.max(s,p));let v=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return v&&p==d&&v.level+(r?0:1)<c.level?Bn.cursor(v.side(!r,t)+n.from,v.forward(r,t)?1:-1,v.level):Bn.cursor(p+n.from,c.forward(r,t)?-1:1,c.level)}function O2e(n,e,t){for(let i=e;i<t;i++){let r=cne(n.charCodeAt(i));if(r==1)return Qb;if(r==2||r==4)return NL}return Qb}const fne=Ii.define(),mne=Ii.define(),pne=Ii.define(),gne=Ii.define(),kR=Ii.define(),yne=Ii.define(),vne=Ii.define(),GL=Ii.define(),WL=Ii.define(),Cne=Ii.define({combine:n=>n.some(e=>e)}),bne=Ii.define({combine:n=>n.some(e=>e)}),_ne=Ii.define();class nx{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new nx(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new nx(Bn.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const kw=io.define({map:(n,e)=>n.map(e)}),xne=io.define();function Lh(n,e,t){let i=n.facet(gne);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const D1=Ii.define({combine:n=>n.length?n[0]:!0});let I2e=0;const P2=Ii.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class _u{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(P2.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(P2.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new _u(I2e++,e,i,r,a=>{let c=[];return s&&c.push(FB.of(d=>{let p=d.plugin(a);return p?s(p):_r.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return _u.define((i,r)=>new e(i,r),t)}}class c7{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Lh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Lh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Lh(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Mne=Ii.define(),QL=Ii.define(),FB=Ii.define(),wne=Ii.define(),qL=Ii.define(),DM=Ii.define(),Sne=Ii.define();function BG(n,e){let t=n.state.facet(Sne);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return vo.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let d=o-e.from,p=s-e.from,v=r;for(let M=a.length-1;M>=0;M--,c--){let E=a[M].spec.bidiIsolate,P;if(E==null&&(E=O2e(e.text,d,p)),c>0&&v.length&&(P=v[v.length-1]).to==d&&P.direction==E)P.to=p,v=P.inner;else{let U={from:d,to:p,direction:E,inner:[]};v.push(U),v=U.inner}}}}),r}const Ene=Ii.define();function YL(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(Ene)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const l4=Ii.define();class wm{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new wm(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0;;){let a=r<e.length?e[r].fromB:1e9,c=o<t.length?t[o]:1e9,d=Math.min(a,c);if(d==1e9)break;let p=d+s,v=d,M=p;for(;;)if(o<t.length&&t[o]<=v){let E=t[o+1];o+=2,v=Math.max(v,E);for(let P=r;P<e.length&&e[P].fromB<=v;P++)s=e[P].toA-e[P].toB;M=Math.max(M,E+s)}else if(r<e.length&&e[r].fromB<=v){let E=e[r++];v=Math.max(v,E.toB),M=Math.max(M,E.toA),s=E.toA-E.toB}else break;i.push(new wm(p,M,d,v))}return i}}class qE{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=mc.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new wm(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new qE(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const T2e=[];class Vu{constructor(e,t,i=0){this.dom=e,this.length=t,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return T2e}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&h2e(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let i=t;for(let r of this.children){if(r==e)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let i=Fv(this.dom),r=this.length?e>0:t>0;return new Up(this.parent.dom,i+(r?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof jB)return e;return null}static get(e){return e.cmTile}}class zB extends Vu{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,i=null,r,o=e?.node==t?e:null,s=0;for(let a of this.children){if(a.sync(e),s+=a.length+a.breakAfter,r=i?i.nextSibling:t.firstChild,o&&r!=a.dom&&(o.written=!0),a.dom.parentNode==t)for(;r&&r!=a.dom;)r=OG(r);else t.insertBefore(a.dom,r);i=a.dom}for(r=i?i.nextSibling:t.firstChild,o&&r&&(o.written=!0);r;)r=OG(r);this.length=s}}function OG(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class jB extends zB{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=Vu.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],i=this,r=0,o=0;;)if(r==i.children.length){if(!t.length)return;i=i.parent,i.breakAfter&&o++,r=t.pop()}else{let s=i.children[r++];if(s instanceof Tv)t.push(r),i=s,r=0;else{let a=o+s.length,c=e(s,o);if(c!==void 0)return c;o=a+s.breakAfter}}}resolveBlock(e,t){let i,r=-1,o,s=-1;if(this.blockTiles((a,c)=>{let d=c+a.length;if(e>=c&&e<=d){if(a.isWidget()&&t>=-1&&t<=1){if(a.flags&32)return!0;a.flags&16&&(i=void 0)}(c<e||e==d&&(t<-1?a.length:a.covers(1)))&&(!i||!a.isWidget()&&i.isWidget())&&(i=a,r=e-c),(d>e||e==c&&(t>1?a.length:a.covers(-1)))&&(!o||!a.isWidget()&&o.isWidget())&&(o=a,s=e-c)}}),!i&&!o)throw new Error("No tile at position "+e);return i&&t<0||!o?{tile:i,offset:r}:{tile:o,offset:s}}}class Tv extends zB{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let i=new Tv(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class Ox extends zB{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,i){let r=new Ox(t||document.createElement("div"),e);return(!t||!i)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,t,i){let r=null,o=-1,s=null,a=-1;function c(p,v){for(let M=0,E=0;M<p.children.length&&E<=v;M++){let P=p.children[M],U=E+P.length;U>=v&&(P.isComposite()?c(P,v-E):(!s||s.isHidden&&(t>0||i&&D2e(s,P)))&&(U>v||P.flags&32)?(s=P,a=v-E):(E<v||P.flags&16&&!P.isHidden)&&(r=P,o=v-E)),E=U}}c(this,e);let d=(t<0?r:s)||r||s;return d?{tile:d,offset:d==r?o:a}:null}coordsIn(e,t){let i=this.resolveInline(e,t,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),t):k2e(this)}domIn(e,t){let i=this.resolveInline(e,t);if(i){let{tile:r,offset:o}=i;if(this.dom.contains(r.dom))return r.isText()?new Up(r.dom,Math.min(r.dom.nodeValue.length,o)):r.domPosFor(o,r.flags&16?1:r.flags&32?-1:t);let s=i.tile.parent,a=!1;for(let c of s.children){if(a)return new Up(c.dom,0);c==i.tile&&(a=!0)}}return new Up(this.dom,0)}}function k2e(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=PS(e);return t[t.length-1]||null}function D2e(n,e){let t=n.coordsIn(0,1),i=e.coordsIn(0,1);return t&&i&&i.top<t.bottom}class kd extends zB{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let i=new kd(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class gb extends Vu{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let i=this.dom.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?Di.chrome||Di.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=E5(this.dom,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return Di.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,d=>d.width)||c),s?QE(c,s<0):c||null}static of(e,t){let i=new gb(t||document.createTextNode(e),e);return t||(i.flags|=2),i}}class qb extends Vu{constructor(e,t,i,r){super(e,t,r),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,i){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;if(i)return QE(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let o=this.dom.getClientRects(),s=null;if(!o.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let c=a?o.length-1:0;s=o[c],!(e>0?c==0:c==o.length-1||s.top<s.bottom);c+=a?-1:1);return QE(s,!a)}}get overrideDOMText(){if(!this.length)return fs.empty;let{root:e}=this;if(!e)return fs.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,i,r,o){return o||(o=e.toDOM(t),e.editable||(o.contentEditable="false")),new qb(o,i,e,r)}}class YE extends Vu{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return fs.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class R2e{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,i){let{tile:r,index:o,beforeBreak:s,parents:a}=this;for(;e||t>0;)if(r.isComposite())if(s){if(!e)break;i&&i.break(),e--,s=!1}else if(o==r.children.length){if(!e&&!a.length)break;i&&i.leave(r),s=!!r.breakAfter,{tile:r,index:o}=a.pop(),o++}else{let c=r.children[o],d=c.breakAfter;(t>0?c.length<=e:c.length<e)&&(!i||i.skip(c,0,c.length)!==!1||!c.isComposite)?(s=!!d,o++,e-=c.length):(a.push({tile:r,index:o}),r=c,o=0,i&&c.isComposite()&&i.enter(c))}else if(o==r.length)s=!!r.breakAfter,{tile:r,index:o}=a.pop(),o++;else if(e){let c=Math.min(e,r.length-o);i&&i.skip(r,o,o+c),e-=c,o+=c}else break;return this.tile=r,this.index=o,this.beforeBreak=s,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class P2e{constructor(e,t,i,r){this.from=e,this.to=t,this.wrapper=i,this.rank=r}}class U2e{constructor(e,t,i){this.cache=e,this.root=t,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,i,r){var o;this.flushBuffer();let s=this.ensureMarks(t,i),a=s.lastChild;if(a&&a.isText()&&!(a.flags&8)){this.cache.reused.set(a,2);let c=s.children[s.children.length-1]=new gb(a.dom,a.text+e);c.parent=s}else s.append(r||gb.of(e,(o=this.cache.find(gb))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let i=this.curLine;i.dom!=t.line.dom&&(i.setDOM(this.cache.reused.has(t.line)?A7(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let r=i;for(let a=t.marks.length-1;a>=0;a--){let c=t.marks[a],d=r.lastChild;if(d instanceof kd&&d.mark.eq(c.mark))d.dom!=c.dom&&d.setDOM(A7(c.dom)),r=d;else{if(this.cache.reused.get(c)){let v=Vu.get(c.dom);v&&v.setDOM(A7(c.dom))}let p=kd.of(c.mark,c.dom);r.append(p),r=p}this.cache.reused.set(c,2)}let o=Vu.get(e.text);o&&this.cache.reused.set(o,2);let s=new gb(e.text,e.text.nodeValue);s.flags|=8,r.append(s)}addInlineWidget(e,t,i){let r=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);r||this.flushBuffer();let o=this.ensureMarks(t,i);!r&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,i){this.flushBuffer(),this.ensureMarks(t,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var i;e||(e=Bne);let r=Ox.start(e,t||((i=this.cache.find(Ox))===null||i===void 0?void 0:i.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var i;let r=this.curLine;for(let o=e.length-1;o>=0;o--){let s=e[o],a;if(t>0&&(a=r.lastChild)&&a instanceof kd&&a.mark.eq(s))r=a,t--;else{let c=kd.of(s,(i=this.cache.find(kd,d=>d.mark.eq(s)))===null||i===void 0?void 0:i.dom);r.append(c),r=c,t=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!IG(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Di.ios&&IG(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(h7,0,32)||new qb(h7.toDOM(),0,h7,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new P2e(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-t.rank||this.wrappers[i-1].to-t.to)<0;)i--;this.wrappers.splice(i,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let i of this.wrappers){let r=t.lastChild;if(i.from<this.pos&&r instanceof Tv&&r.wrapper.eq(i.wrapper))t=r;else{let o=Tv.of(i.wrapper,(e=this.cache.find(Tv,s=>s.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);t.append(o),t=o}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),i=this.cache.find(YE,void 0,1);return i&&(i.flags=t),i||new YE(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class L2e{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:s}=this.cursor.next(this.skipCount);if(this.skipCount=0,s)throw new Error("Ran out of text content when drawing inline views");this.text=r;let a=this.textOff=Math.min(e,r.length);return o?null:r.slice(0,a)}let t=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,t);return this.textOff=t,i}}const VE=[qb,Ox,gb,kd,YE,Tv,jB];for(let n=0;n<VE.length;n++)VE[n].bucket=n;class K2e{constructor(e){this.view=e,this.buckets=VE.map(()=>[]),this.index=VE.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,i=this.buckets[t];i.length<6?i.push(e):i[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,i=2){let r=e.bucket,o=this.buckets[r],s=this.index[r];for(let a=o.length-1;a>=0;a--){let c=(a+s)%o.length,d=o[c];if((!t||t(d))&&!this.reused.has(d))return o.splice(c,1),c<s&&this.index[r]--,this.reused.set(d,i),d}return null}findWidget(e,t,i){let r=this.buckets[0];if(r.length)for(let o=0,s=0;;o++){if(o==r.length){if(s)return null;s=1,o=0}let a=r[o];if(!this.reused.has(a)&&(s==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return r.splice(o,1),o<this.index[0]&&this.index[0]--,a.widget==e&&a.length==t&&(a.flags&497)==i?(this.reused.set(a,1),a):(this.reused.set(a,2),new qb(a.dom,t,e,a.flags&-498|i))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class F2e{constructor(e,t,i,r,o){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new K2e(e),this.text=new L2e(e.state.doc),this.builder=new U2e(this.cache,new jB(e,e.contentDOM),vo.iter(i)),this.cache.reused.set(t,2),this.old=new R2e(t),this.reuseWalker={skip:(s,a,c)=>{if(this.cache.add(s),s.isComposite())return!1},enter:s=>this.cache.add(s),leave:()=>{},break:()=>{}}}run(e,t){let i=t&&this.getCompositionContext(t.text);for(let r=0,o=0,s=0;;){let a=s<e.length?e[s++]:null,c=a?a.fromA:this.old.root.length;if(c>r){let d=c-r;this.preserve(d,!s,!a),r=c,o+=d}if(!a)break;t&&a.fromA<=t.range.fromA&&a.toA>=t.range.toA?(this.forward(a.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(o,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,i),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,a.toA),this.emit(t.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(o,a.toB)),o=a.toB,r=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,i){let r=N2e(this.old),o=this.openMarks;this.old.advance(e,i?1:-1,{skip:(s,a,c)=>{if(s.isWidget())if(this.openWidget)this.builder.continueWidget(c-a);else{let d=c>0||a<s.length?qb.of(s.widget,this.view,c-a,s.flags&496,this.cache.maybeReuse(s)):this.cache.reuse(s);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,r,o),o=r.length)}else if(s.isText())this.builder.ensureLine(null),!a&&c==s.length?this.builder.addText(s.text,r,o,this.cache.reuse(s)):(this.cache.add(s),this.builder.addText(s.text.slice(a,c),r,o)),o=r.length;else if(s.isLine())s.flags&=-2,this.cache.reused.set(s,1),this.builder.addLine(s);else if(s instanceof YE)this.cache.add(s);else if(s instanceof kd)this.builder.ensureLine(null),this.builder.addMark(s,r,o),this.cache.reused.set(s,1),o=r.length;else return!1;this.openWidget=!1},enter:s=>{s.isLine()?this.builder.addLineStart(s.attrs,this.cache.maybeReuse(s)):(this.cache.add(s),s instanceof kd&&r.unshift(s.mark)),this.openWidget=!1},leave:s=>{s.isLine()?r.length&&(r.length=o=0):s instanceof kd&&(r.shift(),o=Math.min(o,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let i=null,r=this.builder,o=0,s=vo.spans(this.decorations,e,t,{point:(a,c,d,p,v,M)=>{if(d instanceof Wb){if(this.disallowBlockEffectsFor[M]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(c>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=p.length,v>p.length)r.continueWidget(c-a);else{let E=d.widget||(d.block?Ix.block:Ix.inline),P=z2e(d),U=this.cache.findWidget(E,c-a,P)||qb.of(E,this.view,c-a,P);d.block?(d.startSide>0&&r.addLineStartIfNotCovered(i),r.addBlockWidget(U)):(r.ensureLine(i),r.addInlineWidget(U,p,v))}i=null}else i=j2e(i,d);c>a&&this.text.skip(c-a)},span:(a,c,d,p)=>{for(let v=a;v<c;){let M=this.text.next(Math.min(512,c-v));M==null?(r.addLineStartIfNotCovered(i),r.addBreak(),v++):(r.ensureLine(i),r.addText(M,d,p),v+=M.length),i=null}}});r.addLineStartIfNotCovered(i),this.openWidget=s>o,this.openMarks=s}forward(e,t,i=1){t-e<=10?this.old.advance(t-e,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(e){let t=[],i=null;for(let r=e.parentNode;;r=r.parentNode){let o=Vu.get(r);if(r==this.view.contentDOM)break;o instanceof kd?t.push(o):o?.isLine()?i=o:r.nodeName=="DIV"&&!i&&r!=this.view.contentDOM?i=new Ox(r,Bne):t.push(kd.of(new TM({tagName:r.nodeName.toLowerCase(),attributes:d2e(r)}),r))}return{line:i,marks:t}}}function IG(n,e){let t=i=>{for(let r of i.children)if((e?r.isText():r.length)||t(r))return!0;return!1};return t(n)}function z2e(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const Bne={class:"cm-line"};function j2e(n,e){let t=e.spec.attributes,i=e.spec.class;return!t&&!i||(n||(n={class:"cm-line"}),t&&zL(t,n),i&&(n.class+=" "+i)),n}function N2e(n){let e=[];for(let t=n.parents.length;t>1;t--){let i=t==n.parents.length?n.tile:n.parents[t].tile;i instanceof kd&&e.push(i.mark)}return e}function A7(n){let e=Vu.get(n);return e&&e.setDOM(n.cloneNode()),n}class Ix extends X1{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ix.inline=new Ix("span");Ix.block=new Ix("div");const h7=new class extends X1{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class TG{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=_r.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new jB(e,e.contentDOM),this.updateInner([new wm(0,0,0,e.state.doc.length)],null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:p,toA:v})=>v<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Z2e(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?W2e(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:v}=this.hasComposition;i=new wm(p,v,e.changes.mapPos(p,-1),e.changes.mapPos(v,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Di.ie||Di.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.blockWrappers;this.updateDeco();let c=Y2e(s,this.decorations,e.changes);c.length&&(i=wm.extendWithRanges(i,c));let d=$2e(a,this.blockWrappers,e.changes);return d.length&&(i=wm.extendWithRanges(i,d)),o&&!i.some(p=>p.fromA<=o.range.fromA&&p.toA>=o.range.toA)&&(i=o.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(t||e.length){let s=this.tile,a=new F2e(this.view,s,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,t),DR(s,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Di.chrome||Di.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||i.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof d7&&r.push(o.dom);i.updateGaps(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(xne)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,r=this.view.root.activeElement,o=r==i,s=!o&&!(this.view.state.facet(D1)||i.tabIndex>-1)&&k4(i,this.view.observer.selectionRange)&&!(r&&i.contains(r));if(!(o||t||s))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,d,p;if(c.empty?p=d=this.inlineDOMNearPos(c.anchor,c.assoc||1):(p=this.inlineDOMNearPos(c.head,c.head==c.from?1:-1),d=this.inlineDOMNearPos(c.anchor,c.anchor==c.from?1:-1)),Di.gecko&&c.empty&&!this.hasComposition&&G2e(d)){let M=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(M,d.node.childNodes[d.offset]||null)),d=p=new Up(M,0),a=!0}let v=this.view.observer.selectionRange;(a||!v.focusNode||(!D4(d.node,d.offset,v.anchorNode,v.anchorOffset)||!D4(p.node,p.offset,v.focusNode,v.focusOffset))&&!this.suppressWidgetCursorChange(v,c))&&(this.view.observer.ignore(()=>{Di.android&&Di.chrome&&i.contains(v.focusNode)&&H2e(v.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let M=Bx(this.view.root);if(M)if(c.empty){if(Di.gecko){let E=Q2e(d.node,d.offset);if(E&&E!=3){let P=(E==1?ane:lne)(d.node,d.offset);P&&(d=new Up(P.node,P.offset))}}M.collapse(d.node,d.offset),c.bidiLevel!=null&&M.caretBidiLevel!==void 0&&(M.caretBidiLevel=c.bidiLevel)}else if(M.extend){M.collapse(d.node,d.offset);try{M.extend(p.node,p.offset)}catch{}}else{let E=document.createRange();c.anchor>c.head&&([d,p]=[p,d]),E.setEnd(p.node,p.offset),E.setStart(d.node,d.offset),M.removeAllRanges(),M.addRange(E)}s&&this.view.root.activeElement==i&&(i.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(d,p)),this.impreciseAnchor=d.precise?null:new Up(v.anchorNode,v.anchorOffset),this.impreciseHead=p.precise?null:new Up(v.focusNode,v.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&D4(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Bx(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=this.lineAt(t.head,t.assoc);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!c||!d||c.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc,t.assoc);i.collapse(p.node,p.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let v=e.observer.selectionRange;e.docView.posFromDOM(v.anchorNode,v.anchorOffset)!=t.from&&i.collapse(r,o)}posFromDOM(e,t){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let r=i.posAtStart;if(i.isComposite()){let o;if(e==i.dom)o=i.dom.childNodes[t];else{let s=Y1(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==i.dom)break;s==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?s=-1:s=1),e=a}s<0?o=e:o=e.nextSibling}if(o==i.dom.firstChild)return r;for(;o&&!Vu.get(o);)o=o.nextSibling;if(!o)return r+i.length;for(let s=0,a=r;;s++){let c=i.children[s];if(c.dom==o)return a;a+=c.length+c.breakAfter}}else return i.isText()?e==i.dom?r+t:r+(t?i.length:0):r}domAtPos(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.domPosFor(e,t):i.domIn(r,t)}inlineDOMNearPos(e,t){let i,r=-1,o=!1,s,a=-1,c=!1;return this.tile.blockTiles((d,p)=>{if(d.isWidget()){if(d.flags&32&&p>=e)return!0;d.flags&16&&(o=!0)}else{let v=p+d.length;if(p<=e&&(i=d,r=e-p,o=v<e),v>=e&&!s&&(s=d,a=e-p,c=p>e),p>e&&s)return!0}}),!i&&!s?this.domAtPos(e,t):(o&&s?i=null:c&&i&&(s=null),i&&t<0||!s?i.domIn(r,t):s.domIn(a,t))}coordsAt(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.widget instanceof d7?null:i.coordsInWidget(r,t,!0):i.coordsIn(r,t)}lineAt(e,t){let{tile:i}=this.tile.resolveBlock(e,t);return i.isLine()?i:null}coordsForChar(e){let{tile:t,offset:i}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function r(o,s){if(o.isComposite())for(let a of o.children){if(a.length>=s){let c=r(a,s);if(c)return c}if(s-=a.length,s<0)break}else if(o.isText()&&s<o.length){let a=yc(o.text,s);if(a==s)return null;let c=E5(o.dom,s,a).getClientRects();for(let d=0;d<c.length;d++){let p=c[d];if(d==c.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return r(t,i)}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==Ma.LTR,d=0,p=(v,M,E)=>{for(let P=0;P<v.children.length&&!(M>r);P++){let U=v.children[P],z=M+U.length,V=U.dom.getBoundingClientRect(),{height:Z}=V;if(E&&!P&&(d+=V.top-E.top),U instanceof Tv)z>i&&p(U,M,V);else if(M>=i&&(d>0&&t.push(-d),t.push(Z+d),d=0,s)){let X=U.dom.lastChild,re=X?PS(X):[];if(re.length){let ee=re[re.length-1],ne=c?ee.right-V.left:V.right-ee.left;ne>a&&(a=ne,this.minWidth=o,this.minWidthFrom=M,this.minWidthTo=z)}}E&&P==v.children.length-1&&(d+=E.bottom-V.bottom),M=z+U.breakAfter}};return p(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?Ma.RTL:Ma.LTR}measureTextSize(){let e=this.tile.blockTiles(s=>{if(s.isLine()&&s.children.length&&s.length<=20){let a=0,c;for(let d of s.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let p=PS(d.dom);if(p.length!=1)return;a+=p[0].width,c=p[0].height}if(a)return{lineHeight:s.dom.getBoundingClientRect().height,charWidth:a/s.length,textHeight:c}}});if(e)return e;let t=document.createElement("div"),i,r,o;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let s=PS(t.firstChild)[0];i=t.getBoundingClientRect().height,r=s&&s.width?s.width/27:7,o=s&&s.height?s.height:i,t.remove()}),{lineHeight:i,charWidth:r,textHeight:o}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.view.state.doc.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(_r.replace({widget:new d7(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return _r.set(e)}updateDeco(){let e=1,t=this.view.state.facet(FB).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(qL).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(vo.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(wne).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(_ne))try{if(d(this.view,e.range,e))return!0}catch(p){Lh(this.view.state,p,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=YL(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;p2e(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==Ma.LTR)}lineHasWidget(e){let t=i=>i.isWidget()||i.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){DR(this.tile)}}function DR(n,e){let t=e?.get(n);if(t!=1){t==null&&n.destroy();for(let i of n.children)DR(i,e)}}function G2e(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function One(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=ane(t.focusNode,t.focusOffset),r=lne(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=Vu.get(r.node);if(!a||a.isText()&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=Vu.get(i.node);!c||c.isText()&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function W2e(n,e,t){let i=One(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc;return{range:new wm(c.mapPos(o),c.mapPos(s),o,s),text:r}}function Q2e(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let q2e=class{constructor(){this.changes=[]}compareRange(e,t){ex(e,t,this.changes)}comparePoint(e,t){ex(e,t,this.changes)}boundChange(e){ex(e,e,this.changes)}};function Y2e(n,e,t){let i=new q2e;return vo.compare(n,e,t,i),i.changes}class V2e{constructor(){this.changes=[]}compareRange(e,t){ex(e,t,this.changes)}comparePoint(){}boundChange(e){ex(e,e,this.changes)}}function $2e(n,e,t){let i=new V2e;return vo.compare(n,e,t,i),i.changes}function H2e(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Z2e(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}class d7 extends X1{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function X2e(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return Bn.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=yc(r.text,o,!1):a=yc(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let d=yc(r.text,s,!1);if(i(r.text.slice(d,s))!=c)break;s=d}for(;a<r.length;){let d=yc(r.text,a);if(i(r.text.slice(a,d))!=c)break;a=d}return Bn.range(s+r.from,a+r.from)}function J2e(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+bR(s,o,n.state.tabSize)}function RR(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==bA.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function exe(n,e,t,i){let r=RR(n,e.head,e.assoc||-1),o=!i||r.type!=bA.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==Ma.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return Bn.cursor(c,t?-1:1)}return Bn.cursor(t?r.to:r.from,t?-1:1)}function kG(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let d=B2e(r,o,s,a,t),p=dne;if(!d){if(r.number==(t?n.state.doc.lines:1))return a;p=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),d=n.visualLineSide(r,!t)}if(c){if(!c(p))return a}else{if(!i)return d;c=i(p)}a=d}}function txe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==Al.Space&&(r=s),r==s}}function nxe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return Bn.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(r,e.assoc||-1),p=n.documentTop;if(d)s==null&&(s=d.left-c.left),a=o<0?d.top:d.bottom;else{let P=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-P.from))),a=(o<0?P.top:P.bottom)+p}let v=c.left+s,M=i??n.viewState.heightOracle.textHeight>>1,E=PR(n,{x:v,y:a+M*o},!1,o);return Bn.cursor(E.pos,E.assoc,void 0,s)}function R4(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function Ine(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=R4(n,r.from,0);s!=r.from&&(o=Bn.cursor(s,-1))}else{let s=R4(n,r.from,-1),a=R4(n,r.to,1);(s!=r.from||a!=r.to)&&(o=Bn.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?Bn.create(t,e.mainIndex):e}function f7(n,e,t){let i=R4(n.state.facet(DM).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:Bn.cursor(i,i<t.from?1:-1)}class cg{constructor(e,t){this.pos=e,this.assoc=t}}function PR(n,e,t,i){let r=n.contentDOM.getBoundingClientRect(),o=r.top+n.viewState.paddingTop,{x:s,y:a}=e,c=a-o,d;for(;;){if(c<0)return new cg(0,1);if(c>n.viewState.docHeight)return new cg(n.state.doc.length,-1);if(d=n.elementAtHeight(c),i==null)break;if(d.type==bA.Text){let M=n.docView.coordsAt(i<0?d.from:d.to,i);if(M&&(i<0?M.top<=c+o:M.bottom>=c+o))break}let v=n.viewState.heightOracle.textHeight/2;c=i>0?d.bottom+v:d.top-v}if(n.viewport.from>=d.to||n.viewport.to<=d.from){if(t)return null;if(d.type==bA.Text){let v=J2e(n,r,d,s,a);return new cg(v,v==d.from?1:-1)}}if(d.type!=bA.Text)return c<(d.top+d.bottom)/2?new cg(d.from,1):new cg(d.to,-1);let p=n.docView.lineAt(d.from,2);return(!p||p.length!=d.length)&&(p=n.docView.lineAt(d.from,-2)),Tne(n,p,d.from,s,a)}function Tne(n,e,t,i,r){let o=-1,s=null,a=1e9,c=1e9,d=r,p=r,v=(M,E)=>{for(let P=0;P<M.length;P++){let U=M[P];if(U.top==U.bottom)continue;let z=U.left>i?U.left-i:U.right<i?i-U.right:0,V=U.top>r?U.top-r:U.bottom<r?r-U.bottom:0;U.top<=p&&U.bottom>=d&&(d=Math.min(U.top,d),p=Math.max(U.bottom,p),V=0),(o<0||(V-c||z-a)<0)&&(o>=0&&c&&a<z&&s.top<=p-2&&s.bottom>=d+2?c=0:(o=E,a=z,c=V,s=U))}};if(e.isText()){for(let E=0;E<e.length;){let P=yc(e.text,E);if(v(E5(e.dom,E,P).getClientRects(),E),!a&&!c)break;E=P}return i>(s.left+s.right)/2==(DG(n,o+t)==Ma.LTR)?new cg(t+yc(e.text,o),-1):new cg(t+o,1)}else{if(!e.length)return new cg(t,1);for(let U=0;U<e.children.length;U++){let z=e.children[U];if(z.flags&48)continue;let V=(z.dom.nodeType==1?z.dom:E5(z.dom,0,z.length)).getClientRects();if(v(V,U),!a&&!c)break}let M=e.children[o],E=e.posBefore(M,t);return M.isComposite()||M.isText()?Tne(n,M,E,Math.max(s.left,Math.min(s.right,i)),r):i>(s.left+s.right)/2==(DG(n,o+t)==Ma.LTR)?new cg(E+M.length,-1):new cg(E,1)}}function DG(n,e){let t=n.state.doc.lineAt(e);return n.bidiSpans(t)[P1.find(n.bidiSpans(t),e-t.from,-1,1)].dir}const u4="";class ixe{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(cs.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=u4}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=Vu.get(r),a=r.nextSibling;if(a==t){s?.breakAfter&&!a&&i!=this.view.contentDOM&&this.lineBreak();break}let c=Vu.get(a);(s&&c?s.breakAfter:(s?s.breakAfter:WE(r))||WE(a)&&(r.nodeName!="BR"||s?.isWidget())&&this.text.length>o)&&!oxe(a,t)&&this.lineBreak(),r=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){let t=Vu.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(rxe(e,i.node,i.offset)?t:0))}}function rxe(n,e,t){for(;;){if(!e||t<Y1(e))return!1;if(e==n)return!0;t=Fv(e)+1,e=e.parentNode}}function oxe(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=Vu.get(n);if(!i?.isWidget())return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class RG{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class sxe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=kne(e.docView.tile,t,i,0))){let a=o||s?[]:lxe(e),c=new ixe(a,e);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=uxe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!BR(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),d=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!BR(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),p=e.viewport;if((Di.ios||Di.chrome)&&e.state.selection.main.empty&&c!=d&&(p.from>0||p.to<e.state.doc.length)){let v=Math.min(c,d),M=Math.max(c,d),E=p.from-v,P=p.to-M;(E==0||E==1||v==0)&&(P==0||P==-1||M==e.state.doc.length)&&(c=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(Bn.range(d,c)):this.newSel=Bn.single(d,c)}}}function kne(n,e,t,i){if(n.isComposite()){let r=-1,o=-1,s=-1,a=-1;for(let c=0,d=i,p=i;c<n.children.length;c++){let v=n.children[c],M=d+v.length;if(d<e&&M>t)return kne(v,e,t,d);if(M>=e&&r==-1&&(r=c,o=d),d>t&&v.dom.parentNode==n.dom){s=c,a=p;break}p=M,d=M+v.breakAfter}return{from:o,to:a<0?i+n.length:a,startDOM:(r?n.children[r-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:s<n.children.length&&s>=0?n.children[s].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function Dne(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,d=null;(o===8||Di.android&&e.text.length<a-s)&&(c=r.to,d="end");let p=Rne(n.state.doc.sliceString(s,a,u4),e.text,c-s,d);p&&(Di.chrome&&o==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==u4+u4&&p.toB--,t={from:s+p.from,to:s+p.toA,insert:fs.of(e.text.slice(p.from,p.toB).split(u4))})}else i&&(!n.hasFocus&&n.state.facet(D1)||$E(i,r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(Di.mac||Di.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Bn.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:fs.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:n.state.doc.lineAt(r.from).to<r.to&&n.docView.lineHasWidget(r.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:n.state.toText(n.inputState.insertingText)}:Di.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Bn.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:fs.of([" "])}),t)return VL(n,t,i,o);if(i&&!$E(i,r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=Ine(n.state.facet(DM).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function VL(n,e,t,i=-1){if(Di.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(Di.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&tx(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&tx(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&tx(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=axe(n,e,t));return n.state.facet(yne).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function axe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,d=c<0?o.from:o.to,p=R4(r.facet(DM).map(v=>v(n)),d,c);e.from==p&&(s=p)}if(s>-1)i={changes:e,selection:Bn.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",d=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let c=r.changes(e),d=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let p=n.state.sliceDoc(e.from,e.to),v,M=t&&One(n,t.main.head);if(M){let P=e.insert.length-(e.to-e.from);v={from:M.from,to:M.to-P}}else v=n.state.doc.lineAt(o.head);let E=o.to-e.to;i=r.changeByRange(P=>{if(P.from==o.from&&P.to==o.to)return{changes:c,range:d||P.map(c)};let U=P.to-E,z=U-p.length;if(n.state.sliceDoc(z,U)!=p||U>=v.from&&z<=v.to)return{range:P};let V=r.changes({from:z,to:U,insert:e.insert}),Z=P.to-o.to;return{changes:V,range:d?Bn.range(Math.max(0,d.anchor+Z),Math.max(0,d.head+Z)):P.map(V)}})}else i={changes:c,selection:d&&r.selection.replaceRange(d)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function Rne(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function lxe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new RG(t,i)),(r!=t||o!=i)&&e.push(new RG(r,o))),e}function uxe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Bn.single(t+e,i+e):null}function $E(n,e){return e.head==n.main.head&&e.anchor==n.main.anchor}class cxe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Di.safari&&e.contentDOM.addEventListener("input",()=>null),Di.gecko&&wxe(e.contentDOM.ownerDocument)}handleEvent(e){!yxe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Axe(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Une.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Di.android&&Di.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Di.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Pne.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||hxe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,tx(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Di.safari&&!Di.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function PG(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){Lh(t.state,r)}}}function Axe(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(PG(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(PG(i.value,c))}}for(let i in Np)t(i).handlers.push(Np[i]);for(let i in km)t(i).observers.push(km[i]);return e}const Pne=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],hxe="dthko",Une=[16,17,18,20,91,92,224,225],Dw=6;function Rw(n){return Math.max(0,n)*.7+8}function dxe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class fxe{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=g2e(e.contentDOM),this.atoms=e.state.facet(DM).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(cs.allowMultipleSelections)&&mxe(e,t),this.dragging=gxe(e,t)&&Fne(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dxe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=YL(this.view);e.clientX-c.left<=r+Dw?t=-Rw(r-e.clientX):e.clientX+c.right>=s-Dw&&(t=Rw(e.clientX-s)),e.clientY-c.top<=o+Dw?i=-Rw(o-e.clientY):e.clientY+c.bottom>=a-Dw&&(i=Rw(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Ine(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function mxe(n,e){let t=n.state.facet(fne);return t.length?t[0](e):Di.mac?e.metaKey:e.ctrlKey}function pxe(n,e){let t=n.state.facet(mne);return t.length?t[0](e):Di.mac?!e.altKey:!e.ctrlKey}function gxe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=Bx(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function yxe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Vu.get(t))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const Np=Object.create(null),km=Object.create(null),Lne=Di.ie&&Di.ie_version<15||Di.ios&&Di.webkit_version<604;function vxe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Kne(n,t.value)},50)}function NB(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Kne(n,e){e=NB(n.state,GL,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(UR!=null&&t.selection.ranges.every(c=>c.empty)&&UR==o.toString()){let c=-1;i=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==c)return{range:d};c=p.from;let v=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:v},range:Bn.cursor(d.from+v.length)}})}else s?i=t.changeByRange(c=>{let d=o.line(r++);return{changes:{from:c.from,to:c.to,insert:d.text},range:Bn.cursor(c.from+d.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}km.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Np.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);km.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};km.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Np.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(pne))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=bxe(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new fxe(n,e,t,i)),i&&n.observer.ignore(()=>{one(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function UG(n,e,t,i){if(i==1)return Bn.cursor(e,t);if(i==2)return X2e(n.state,e,t);{let r=n.docView.lineAt(e,t),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Bn.range(s,a)}}const Cxe=Di.ie&&Di.ie_version<=11;let LG=null,KG=0,FG=0;function Fne(n){if(!Cxe)return n.detail;let e=LG,t=FG;return LG=n,FG=Date.now(),KG=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(KG+1)%3:1}function bxe(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=Fne(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=n.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),d,p=UG(n,c.pos,c.assoc,i);if(t.pos!=c.pos&&!s){let v=UG(n,t.pos,t.assoc,i),M=Math.min(v.from,p.from),E=Math.max(v.to,p.to);p=M<p.from?Bn.range(M,E):Bn.range(E,M)}return s?r.replaceRange(r.main.extend(p.from,p.to)):a&&i==1&&r.ranges.length>1&&(d=_xe(r,c.pos))?d:a?r.addRange(p):Bn.create([p])}}}function _xe(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return Bn.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Np.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.tile.nearest(e.target);if(r&&r.isWidget()){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=Bn.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",NB(n.state,WL,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Np.dragend=n=>(n.inputState.draggedContent=null,!1);function zG(n,e,t,i){if(t=NB(n.state,GL,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&pxe(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Np.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&zG(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return zG(n,e,i,!0),!0}return!1};Np.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Lne?null:e.clipboardData;return t?(Kne(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(vxe(n),!1)};function xxe(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Mxe(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:NB(n,WL,e.join(n.lineBreak)),ranges:t,linewise:i}}let UR=null;Np.copy=Np.cut=(n,e)=>{let t=Bx(n.root);if(t&&!k4(n.contentDOM,t))return!1;let{text:i,ranges:r,linewise:o}=Mxe(n.state);if(!i&&!o)return!1;UR=o?i:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Lne?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",i),!0):(xxe(n,i),!1)};const zne=Z1.define();function jne(n,e){let t=[];for(let i of n.facet(vne)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:zne.of(!0)}):null}function Nne(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=jne(n.state,e);t?n.dispatch(t):n.update([])}},10)}km.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Nne(n)};km.blur=n=>{n.observer.clearSelectionRange(),Nne(n)};km.compositionstart=km.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};km.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Di.chrome&&Di.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};km.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Np.beforeinput=(n,e)=>{var t,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),d=n.posAtDOM(a.endContainer,a.endOffset);return VL(n,{from:c,to:d,insert:n.state.toText(o)},null),!0}}let r;if(Di.chrome&&Di.android&&(r=Pne.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Di.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Di.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>km.compositionend(n,e),20),!1};const jG=new Set;function wxe(n){jG.has(n)||(jG.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const NG=["pre-wrap","normal","pre-line","break-spaces"];let Tx=!1;function GG(){Tx=!1}class Sxe{constructor(e){this.lineWrapping=e,this.doc=fs.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return NG.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=NG.indexOf(e)>-1,c=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let d=0;d<s.length;d++){let p=s[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return c}}class Exe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Dp{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?bA.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Wb?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Dp(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Fa=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Fa||(Fa={}));const US=.001;class Fh{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>US&&(Tx=!0),this.height=e)}replace(e,t,i){return Fh.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:d,fromB:p,toB:v}=r[a],M=o.lineAt(c,Fa.ByPosNoHeight,i.setDoc(t),0,0),E=M.to>=d?M:o.lineAt(d,Fa.ByPosNoHeight,i,0,0);for(v+=E.to-d,d=E.to;a>0&&M.from<=r[a-1].toA;)c=r[a-1].fromA,p=r[a-1].fromB,a--,c<M.from&&(M=o.lineAt(c,Fa.ByPosNoHeight,i,0,0));p+=M.from-c,c=M.from;let P=$L.build(i.setDoc(s),e,p,v);o=HE(o,o.replace(c,d,P))}return o.updateHeight(i,0)}static empty(){return new gf(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new Oxe(Fh.of(e.slice(0,t)),s,Fh.of(e.slice(i)))}}function HE(n,e){return n==e?n:(n.constructor!=e.constructor&&(Tx=!0),e)}Fh.prototype.size=1;const Bxe=_r.replace({});class Gne extends Fh{constructor(e,t,i){super(e,t),this.deco=i,this.spaceAbove=0}mainBlock(e,t){return new Dp(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,i,r){return this.spaceAbove&&e<i+this.spaceAbove?new Dp(r,0,i,this.spaceAbove,Bxe):this.mainBlock(i,r)}lineAt(e,t,i,r,o){let s=this.mainBlock(r,o);return this.spaceAbove?this.blockAt(0,i,r,o).join(s):s}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.lineAt(0,Fa.ByPos,i,r,o))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class gf extends Gne{constructor(e,t,i){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,t){return new Dp(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof gf||r instanceof yA&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof yA?r=new gf(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):Fh.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setMeasuredHeight(r):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class yA extends Fh{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let d=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),p=t.doc.lineAt(d),v=a+p.length*c,M=Math.max(i,e-v/2);return new Dp(p.from,p.length,M,v,0)}else{let d=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:p,length:v}=t.doc.line(o+d);return new Dp(p,v,i+a*d,a,0)}}lineAt(e,t,i,r,o){if(t==Fa.ByHeight)return this.blockAt(e,i,r,o);if(t==Fa.ByPosNoHeight){let{from:E,to:P}=i.doc.lineAt(e);return new Dp(E,P-E,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),d=i.doc.lineAt(e),p=a+d.length*c,v=d.number-s,M=r+a*v+c*(d.from-o-v);return new Dp(d.from,d.length,Math.max(r,Math.min(M,r+this.height-p)),p,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:d}=this.heightMetrics(i,o);for(let p=e,v=r;p<=t;){let M=i.doc.lineAt(p);if(p==e){let P=M.number-a;v+=c*P+d*(e-o-P)}let E=c+d*M.length;s(new Dp(M.from,M.length,v,E,0)),v+=E,p=M.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof yA?i[i.length-1]=new yA(o.length+r):i.push(null,new yA(r-1))}if(e>0){let o=i[0];o instanceof yA?i[0]=new yA(e+o.length):i.unshift(new yA(e-1),null)}return Fh.of(i)}decomposeLeft(e,t){t.push(new yA(e-1),null)}decomposeRight(e,t){t.push(null,new yA(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new yA(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let p=e.doc.lineAt(a).length;s.length&&s.push(null);let v=r.heights[r.index++],M=0;v<0&&(M=-v,v=r.heights[r.index++]),c==-1?c=v:Math.abs(v-c)>=US&&(c=-2);let E=new gf(p,v,M);E.outdated=!1,s.push(E),a+=p+1}a<=o&&s.push(null,new yA(o-a).updateHeight(e,a));let d=Fh.of(s);return(c<0||Math.abs(d.height-this.height)>=US||Math.abs(c-this.heightMetrics(e,t).perLine)>=US)&&(Tx=!0),HE(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Oxe extends Fh{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==Fa.ByHeight?e<s:e<a,d=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?d.to<a:d.from>a))return d;let p=t==Fa.ByPosNoHeight?Fa.ByPosNoHeight:Fa.ByPos;return c?d.join(this.right.lineAt(a,p,i,s,a)):this.left.lineAt(a,p,i,r,o).join(d)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let d=this.lineAt(c,Fa.ByPos,i,r,o);e<d.from&&this.left.forEachLine(e,d.from-1,i,r,o,s),d.to>=e&&d.from<=t&&s(d),t>d.to&&this.right.forEachLine(d.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&WG(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),WG(o,a)}return Fh.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Fh.of(this.break?[e,null,t]:[e,t]):(this.left=HE(this.left,e),this.right=HE(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function WG(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof yA&&(i=n[e+1])instanceof yA&&n.splice(e-1,3,new yA(t.length+1+i.length))}const Ixe=5;class $L{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof gf?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new gf(i-this.pos,-1,0)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Gne(s,r,i)):(s||o||r>=Ixe)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new gf(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let i=new yA(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof gf)return e;let t=new gf(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof gf)&&!this.isCovered?this.nodes.push(new gf(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof gf&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new $L(i,e);return vo.spans(t,i,r,o,0),o.finish(i)}}function Txe(n,e,t){let i=new kxe;return vo.compare(n,e,t,i,0),i.changes}class kxe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&ex(e,t,this.changes,5)}}function Dxe(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=i.body;)if(d.nodeType==1){let p=d,v=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&v.overflow!="visible"){let M=p.getBoundingClientRect();o=Math.max(o,M.left),s=Math.min(s,M.right),a=Math.max(a,M.top),c=Math.min(d==n.parentNode?r.innerHeight:c,M.bottom)}d=v.position=="absolute"||v.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function Rxe(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Pxe(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class m7{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return _r.replace({widget:new Uxe(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Uxe extends X1{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class QG{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=qG,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ma.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(QL).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Sxe(t),this.stateDeco=YG(e),this.heightMap=Fh.empty().applyChanges(this.stateDeco,fs.empty,this.heightOracle.setDoc(e.doc),[new wm(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=_r.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new Pw(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?qG:new HL(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(c4(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=YG(this.state);let r=e.changedRanges,o=wm.extendWithRanges(r,Txe(i,this.stateDeco,e?e.changes:mc.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);GG(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||Tx)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let d=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(bne)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ma.RTL:Ma.LTR;let s=this.heightOracle.mustRefreshForWrapping(o)||this.mustMeasureContent,a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let d=0,p=0;if(a.width&&a.height){let{scaleX:re,scaleY:ee}=rne(t,a);(re>.005&&Math.abs(this.scaleX-re)>.005||ee>.005&&Math.abs(this.scaleY-ee)>.005)&&(this.scaleX=re,this.scaleY=ee,d|=16,s=c=!0)}let v=(parseInt(i.paddingTop)||0)*this.scaleY,M=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=v||this.paddingBottom!=M)&&(this.paddingTop=v,this.paddingBottom=M,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let E=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=E&&(this.scrollAnchorHeight=-1,this.scrollTop=E),this.scrolledToBottom=sne(e.scrollDOM);let P=(this.printing?Pxe:Dxe)(t,this.paddingTop),U=P.top-this.pixelViewport.top,z=P.bottom-this.pixelViewport.bottom;this.pixelViewport=P;let V=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(V!=this.inView&&(this.inView=V,V&&(c=!0)),!this.inView&&!this.scrollTarget&&!Rxe(e.dom))return 0;let Z=a.width;if((this.contentDOMWidth!=Z||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),c){let re=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(re)&&(s=!0),s||r.lineWrapping&&Math.abs(Z-this.contentDOMWidth)>r.charWidth){let{lineHeight:ee,charWidth:ne,textHeight:q}=e.docView.measureTextSize();s=ee>0&&r.refresh(o,ee,ne,q,Math.max(5,Z/ne),re),s&&(e.docView.minWidth=0,d|=16)}U>0&&z>0?p=Math.max(U,z):U<0&&z<0&&(p=Math.min(U,z)),GG();for(let ee of this.viewports){let ne=ee.from==this.viewport.from?re:e.docView.measureVisibleLineHeights(ee);this.heightMap=(s?Fh.empty().applyChanges(this.stateDeco,fs.empty,this.heightOracle,[new wm(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new Exe(ee.from,ne))}Tx&&(d|=2)}let X=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return X&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||X)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new Pw(r.lineAt(s-i*1e3,Fa.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,Fa.ByHeight,o,0,0).to);if(t){let{head:d}=t.range;if(d<c.from||d>c.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=r.lineAt(d,Fa.ByPos,o,0,0),M;t.y=="center"?M=(v.top+v.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<c.from?M=v.top:M=v.bottom-p,c=new Pw(r.lineAt(M-1e3/2,Fa.ByHeight,o,0,0).from,r.lineAt(M+p+1e3/2,Fa.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Pw(this.heightMap.lineAt(i,Fa.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Fa.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Fa.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Fa.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new m7(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=Ma.LTR&&!i)return[];let a=[],c=(p,v,M,E)=>{if(v-p<o)return;let P=this.state.selection.main,U=[P.from];P.empty||U.push(P.to);for(let V of U)if(V>p&&V<v){c(p,V-10,M,E),c(V+10,v,M,E);return}let z=Kxe(e,V=>V.from>=M.from&&V.to<=M.to&&Math.abs(V.from-p)<o&&Math.abs(V.to-v)<o&&!U.some(Z=>V.from<Z&&V.to>Z));if(!z){if(v<M.to&&t&&i&&t.visibleRanges.some(X=>X.from<=v&&X.to>=v)){let X=t.moveToLineBoundary(Bn.cursor(v),!1,!0).head;X>p&&(v=X)}let V=this.gapSize(M,p,v,E),Z=i||V<2e6?V:2e6;z=new m7(p,v,V,Z)}a.push(z)},d=p=>{if(p.length<s||p.type!=bA.Text)return;let v=Lxe(p.from,p.to,this.stateDeco);if(v.total<s)return;let M=this.scrollTarget?this.scrollTarget.range.head:null,E,P;if(i){let U=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,z,V;if(M!=null){let Z=Lw(v,M),X=((this.visibleBottom-this.visibleTop)/2+U)/p.height;z=Z-X,V=Z+X}else z=(this.visibleTop-p.top-U)/p.height,V=(this.visibleBottom-p.top+U)/p.height;E=Uw(v,z),P=Uw(v,V)}else{let U=v.total*this.heightOracle.charWidth,z=r*this.heightOracle.charWidth,V=0;if(U>2e6)for(let ne of e)ne.from>=p.from&&ne.from<p.to&&ne.size!=ne.displaySize&&ne.from*this.heightOracle.charWidth+V<this.pixelViewport.left&&(V=ne.size-ne.displaySize);let Z=this.pixelViewport.left+V,X=this.pixelViewport.right+V,re,ee;if(M!=null){let ne=Lw(v,M),q=((X-Z)/2+z)/U;re=ne-q,ee=ne+q}else re=(Z-z)/U,ee=(X+z)/U;E=Uw(v,re),P=Uw(v,ee)}E>p.from&&c(p.from,E,p,v),P<p.to&&c(P,p.to,p,v)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return a}gapSize(e,t,i,r){let o=Lw(r,i)-Lw(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){m7.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=_r.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];vo.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||c4(this.heightMap.lineAt(e,Fa.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||c4(this.heightMap.lineAt(this.scaler.fromDOM(e),Fa.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return c4(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Pw{constructor(e,t){this.from=e,this.to=t}}function Lxe(n,e,t){let i=[],r=n,o=0;return vo.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function Uw({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function Lw(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function Kxe(n,e){for(let t of n)if(e(t))return t}const qG={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function YG(n){let e=n.facet(FB).filter(i=>typeof i!="function"),t=n.facet(qL).filter(i=>typeof i!="function");return t.length&&e.push(vo.join(t)),e}class HL{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let d=t.lineAt(a,Fa.ByPos,e,0,0).top,p=t.lineAt(c,Fa.ByPos,e,0,0).bottom;return r+=p-d,{from:a,to:c,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof HL?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function c4(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Dp(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>c4(r,e)):n._content)}const Kw=Ii.define({combine:n=>n.join(" ")}),LR=Ii.define({combine:n=>n.indexOf(!0)>-1}),KR=Lv.newName(),Wne=Lv.newName(),Qne=Lv.newName(),qne={"&light":"."+Wne,"&dark":"."+Qne};function FR(n,e,t){return new Lv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const Fxe=FR("."+KR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},qne),zxe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},p7=Di.ie&&Di.ie_version<=11;class jxe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new y2e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Di.ie&&Di.ie_version<=11||Di.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Di.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Di.chrome&&Di.chrome_version<126)&&(this.editContext=new Gxe(e),e.state.facet(D1)&&(e.contentDOM.editContext=this.editContext.editContext)),p7&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(D1)?i.root.activeElement!=this.dom:!k4(this.dom,r))return;let o=r.anchorNode&&i.docView.tile.nearest(r.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Di.ie&&Di.ie_version<=11||Di.android&&Di.chrome)&&!i.state.selection.main.empty&&r.focusNode&&D4(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Bx(e.root);if(!t)return!1;let i=Di.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Nxe(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=k4(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&C2e(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,zxe),p7&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),p7&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&tx(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&k4(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new sxe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=Dne(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!$E(this.view.state.selection,t.newSel.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let i=VG(t,e.previousSibling||e.target.previousSibling,-1),r=VG(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(D1)!=e.state.facet(D1)&&(e.view.contentDOM.editContext=e.state.facet(D1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function VG(n,e,t){for(;e;){let i=Vu.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function $G(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor,1);return D4(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function Nxe(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return $G(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?$G(n,t):null}class Gxe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let d=c-a>i.text.length;a==this.from&&o<this.from?a=o:c==this.to&&o>this.to&&(c=o);let p=Rne(e.state.sliceDoc(a,c),i.text,(d?r.from:r.to)-a,d?"end":null);if(!p){let M=Bn.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));$E(M,r)||e.dispatch({selection:M,userEvent:"select"});return}let v={from:p.from+a,to:p.toA+a,insert:fs.of(i.text.slice(p.from,p.toB).split(`
`))};if((Di.mac||Di.android)&&v.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(v={from:a,to:c,insert:fs.of([i.text.replace("."," ")])}),this.pendingContextChange=v,!e.state.readOnly){let M=this.to-this.from+(v.to-v.from+v.insert.length);VL(e,v,Bn.single(this.toEditorPos(i.selectionStart,M),this.toEditorPos(i.selectionEnd,M)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),v.from<v.to&&!v.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(c<d){let p=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(_r.mark({attributes:{style:p}}).range(c,d))}}}e.dispatch({effects:xne.of(_r.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Bx(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,d)=>{if(i)return;let p=d.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(d)){r=this.pendingContextChange=null,t+=p,this.to+=p;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),d.toString()),this.to+=p}t+=p}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Bi{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||v2e(e.parent)||document,this.viewState=new QG(e.state||cs.create(e)),e.scrollTo&&e.scrollTo.is(kw)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(P2).map(r=>new c7(r));for(let r of this.plugins)r.update(this);this.observer=new jxe(this),this.inputState=new cxe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new TG(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof vc?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let M of e){if(M.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=M.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(M=>M.annotation(zne))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=jne(o,s),c||(a=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(cs.phrases)!=this.state.facet(cs.phrases))return this.setState(o);r=qE.create(this,o,e),r.flags|=a;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let M of e){if(v&&(v=v.map(M.changes)),M.scrollIntoView){let{main:E}=M.state.selection;v=new nx(E.empty?E:Bn.cursor(E.head,E.head>E.anchor?-1:1))}for(let E of M.effects)E.is(kw)&&(v=E.value.clip(this.state))}this.viewState.update(r,v),this.bidiCache=ZE.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(l4)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(M=>M.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Kw)!=r.state.facet(Kw)&&(this.viewState.mustMeasureContent=!0),(t||i||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let M of this.state.facet(kR))try{M(r)}catch(E){Lh(this.state,E,"update listener")}(c||p)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),p&&!Dne(this,p)&&d.force&&tx(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new QG(e),this.plugins=e.facet(P2).map(i=>new c7(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new TG(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(P2),i=e.state.facet(P2);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new c7(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Lh(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(sne(i))o=-1,s=this.viewState.heightMap.height;else{let E=this.viewState.scrollAnchorAt(r);o=E.from,s=E.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];c&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(E=>{try{return E.read(this)}catch(P){return Lh(this.state,P),HG}}),v=qE.create(this,this.state,[]),M=!1;v.flags|=c,t?t.flags|=c:t=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),M=this.docView.update(v),M&&this.docViewUpdate());for(let E=0;E<d.length;E++)if(p[E]!=HG)try{let P=d[E];P.write&&P.write(p[E],this)}catch(P){Lh(this.state,P)}if(M&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let P=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(P>1||P<-1){r=r+P,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(kR))a(t)}get themeClasses(){return KR+" "+(this.state.facet(LR)?Qne:Wne)+" "+this.state.facet(Kw)}updateAttrs(){let e=ZG(this,Mne,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(D1)?"true":"false",class:"cm-content",style:`${Di.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),ZG(this,QL,t);let i=this.observer.ignore(()=>{let r=wG(this.contentDOM,this.contentAttrs,t),o=wG(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Bi.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(l4);let e=this.state.facet(Bi.cspNonce);Lv.mount(this.root,this.styleModules.concat(Fxe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return f7(this,e,kG(this,e,t,i))}moveByGroup(e,t){return f7(this,e,kG(this,e,t,i=>txe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return Bn.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return exe(this,e,t,i)}moveVertically(e,t,i){return f7(this,e,nxe(this,e,t,i))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let i=PR(this,e,t);return i&&i.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),PR(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[P1.find(o,e-r.from,-1,t)];return QE(i,s.dir==Ma.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Cne)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Wxe)return hne(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Ane(o.isolates,i=BG(this,e))))return o.order;i||(i=BG(this,e));let r=E2e(e.text,t,i);return this.bidiCache.push(new ZE(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Di.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{one(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return kw.of(new nx(typeof e=="number"?Bn.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return kw.of(new nx(Bn.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return _u.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return _u.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Lv.newName(),r=[Kw.of(i),l4.of(FR(`.${i}`,e))];return t&&t.dark&&r.push(LR.of(!0)),r}static baseTheme(e){return i_.lowest(l4.of(FR("."+KR,e,qne)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Vu.get(i)||Vu.get(e);return((t=r?.root)===null||t===void 0?void 0:t.view)||null}}Bi.styleModule=l4;Bi.inputHandler=yne;Bi.clipboardInputFilter=GL;Bi.clipboardOutputFilter=WL;Bi.scrollHandler=_ne;Bi.focusChangeEffect=vne;Bi.perLineTextDirection=Cne;Bi.exceptionSink=gne;Bi.updateListener=kR;Bi.editable=D1;Bi.mouseSelectionStyle=pne;Bi.dragMovesSelection=mne;Bi.clickAddsSelectionRange=fne;Bi.decorations=FB;Bi.blockWrappers=wne;Bi.outerDecorations=qL;Bi.atomicRanges=DM;Bi.bidiIsolatedRanges=Sne;Bi.scrollMargins=Ene;Bi.darkTheme=LR;Bi.cspNonce=Ii.define({combine:n=>n.length?n[0]:""});Bi.contentAttributes=QL;Bi.editorAttributes=Mne;Bi.lineWrapping=Bi.contentAttributes.of({class:"cm-lineWrapping"});Bi.announce=io.define();const Wxe=4096,HG={};class ZE{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Ma.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new ZE(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function ZG(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&zL(s,t)}return t}const Qxe=Di.mac?"mac":Di.windows?"win":Di.linux?"linux":"key";function qxe(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const d=t[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function Fw(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const Yxe=i_.default(Bi.domEventHandlers({keydown(n,e){return Vne(Yne(e.state),n,e,"editor")}})),ZL=Ii.define({enables:Yxe}),XG=new WeakMap;function Yne(n){let e=n.facet(ZL),t=XG.get(e);return t||XG.set(e,t=Hxe(e.reduce((i,r)=>i.concat(r),[]))),t}function Vxe(n,e,t){return Vne(Yne(n.state),e,n,t)}let dv=null;const $xe=4e3;function Hxe(n,e=Qxe){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,d,p)=>{var v,M;let E=t[s]||(t[s]=Object.create(null)),P=a.split(/ (?!$)/).map(V=>qxe(V,e));for(let V=1;V<P.length;V++){let Z=P.slice(0,V).join(" ");r(Z,!0),E[Z]||(E[Z]={preventDefault:!0,stopPropagation:!1,run:[X=>{let re=dv={view:X,prefix:Z,scope:s};return setTimeout(()=>{dv==re&&(dv=null)},$xe),!0}]})}let U=P.join(" ");r(U,!1);let z=E[U]||(E[U]={preventDefault:!1,stopPropagation:!1,run:((M=(v=E._any)===null||v===void 0?void 0:v.run)===null||M===void 0?void 0:M.slice())||[]});c&&z.run.push(c),d&&(z.preventDefault=!0),p&&(z.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let d of a){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:v}=s;for(let M in p)p[M].run.push(E=>v(E,zR))}let c=s[e]||s.key;if(c)for(let d of a)o(d,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(d,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let zR=null;function Vne(n,e,t,i){zR=e;let r=c2e(e),o=Od(r,0),s=ug(o)==r.length&&r!=" ",a="",c=!1,d=!1,p=!1;dv&&dv.view==t&&dv.scope==i&&(a=dv.prefix+" ",Une.indexOf(e.keyCode)<0&&(d=!0,dv=null));let v=new Set,M=z=>{if(z){for(let V of z.run)if(!v.has(V)&&(v.add(V),V(t)))return z.stopPropagation&&(p=!0),!0;z.preventDefault&&(z.stopPropagation&&(p=!0),d=!0)}return!1},E=n[i],P,U;return E&&(M(E[a+Fw(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Di.windows&&e.ctrlKey&&e.altKey)&&!(Di.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(P=Kv[e.keyCode])&&P!=r?(M(E[a+Fw(P,e,!0)])||e.shiftKey&&(U=w5[e.keyCode])!=r&&U!=P&&M(E[a+Fw(U,e,!1)]))&&(c=!0):s&&e.shiftKey&&M(E[a+Fw(r,e,!0)])&&(c=!0),!c&&M(E._any)&&(c=!0)),d&&(c=!0),c&&p&&e.stopPropagation(),zR=null,c}class RM{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=$ne(e);return[new RM(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return Zxe(e,t,i)}}function $ne(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Ma.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function JG(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function Zxe(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==Ma.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=$ne(n),d=s.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),v=a.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),M=a.right-(p?parseInt(p.paddingRight):0),E=RR(n,i,1),P=RR(n,r,-1),U=E.type==bA.Text?E:null,z=P.type==bA.Text?P:null;if(U&&(n.lineWrapping||E.widgetLineBreaks)&&(U=JG(n,i,1,U)),z&&(n.lineWrapping||P.widgetLineBreaks)&&(z=JG(n,r,-1,z)),U&&z&&U.from==z.from&&U.to==z.to)return Z(X(t.from,t.to,U));{let ee=U?X(t.from,null,U):re(E,!1),ne=z?X(null,t.to,z):re(P,!0),q=[];return(U||E).to<(z||P).from-(U&&z?1:0)||E.widgetLineBreaks>1&&ee.bottom+n.defaultLineHeight/2<ne.top?q.push(V(v,ee.bottom,M,ne.top)):ee.bottom<ne.top&&n.elementAtHeight((ee.bottom+ne.top)/2).type==bA.Text&&(ee.bottom=ne.top=(ee.bottom+ne.top)/2),Z(ee).concat(q).concat(Z(ne))}function V(ee,ne,q,le){return new RM(e,ee-c.left,ne-c.top,q-ee,le-ne)}function Z({top:ee,bottom:ne,horizontal:q}){let le=[];for(let ue=0;ue<q.length;ue+=2)le.push(V(q[ue],ee,q[ue+1],ne));return le}function X(ee,ne,q){let le=1e9,ue=-1e9,ve=[];function pe(Oe,Fe,Ee,Ve,ut){let mt=n.coordsAtPos(Oe,Oe==q.to?-2:2),Pe=n.coordsAtPos(Ee,Ee==q.from?2:-2);!mt||!Pe||(le=Math.min(mt.top,Pe.top,le),ue=Math.max(mt.bottom,Pe.bottom,ue),ut==Ma.LTR?ve.push(o&&Fe?v:mt.left,o&&Ve?M:Pe.right):ve.push(!o&&Ve?v:Pe.left,!o&&Fe?M:mt.right))}let Be=ee??q.from,Ce=ne??q.to;for(let Oe of n.visibleRanges)if(Oe.to>Be&&Oe.from<Ce)for(let Fe=Math.max(Oe.from,Be),Ee=Math.min(Oe.to,Ce);;){let Ve=n.state.doc.lineAt(Fe);for(let ut of n.bidiSpans(Ve)){let mt=ut.from+Ve.from,Pe=ut.to+Ve.from;if(mt>=Ee)break;Pe>Fe&&pe(Math.max(mt,Fe),ee==null&&mt<=Be,Math.min(Pe,Ee),ne==null&&Pe>=Ce,ut.dir)}if(Fe=Ve.to+1,Fe>=Ee)break}return ve.length==0&&pe(Be,ee==null,Ce,ne==null,n.textDirection),{top:le,bottom:ue,horizontal:ve}}function re(ee,ne){let q=a.top+(ne?ee.top:ee.bottom);return{top:q,bottom:q,horizontal:[]}}}function Xxe(n,e){return n.constructor==e.constructor&&n.eq(e)}class Jxe{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(LS)!=e.state.facet(LS)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(LS);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!Xxe(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,Di.safari&&Di.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const LS=Ii.define();function Hne(n){return[_u.define(e=>new Jxe(e,n)),LS.of(n)]}const B5=Ii.define({combine(n){return $p(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function e3e(n={}){return[B5.of(n),t3e,n3e,i3e,bne.of(!0)]}function Zne(n){return n.startState.facet(B5)!=n.state.facet(B5)}const t3e=Hne({above:!0,markers(n){let{state:e}=n,t=e.facet(B5),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:Bn.cursor(r.head,r.head>r.anchor?-1:1);for(let c of RM.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Zne(n);return t&&eW(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){eW(e.state,n)},class:"cm-cursorLayer"});function eW(n,e){e.style.animationDuration=n.facet(B5).cursorBlinkRate+"ms"}const n3e=Hne({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:RM.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Zne(n)},class:"cm-selectionLayer"}),i3e=i_.highest(Bi.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Xne=io.define({map(n,e){return n==null?null:e.mapPos(n)}}),A4=Cc.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Xne)?i.value:t,n)}}),r3e=_u.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(A4);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(A4)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(A4),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(A4)!=n&&this.view.dispatch({effects:Xne.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function o3e(){return[A4,r3e]}function tW(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function s3e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class a3e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,d,p)=>r(p,d,d+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,d,p)=>{let v=i(a,c,d);v&&p(d,d+a[0].length,v)};else if(i)this.addMatch=(a,c,d,p)=>p(d,d+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new q1,i=t.add.bind(t);for(let{from:r,to:o}of s3e(e,this.maxLength))tW(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),d=c.to<a?e.state.doc.lineAt(a):c,p=Math.max(o.from,c.from),v=Math.min(o.to,d.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){p=s;break}for(;a<d.to;a++)if(this.boundary.test(d.text[a-d.from])){v=a;break}}let M=[],E,P=(U,z,V)=>M.push(V.range(U,z));if(c==d)for(this.regexp.lastIndex=p-c.from;(E=this.regexp.exec(c.text))&&E.index<v-c.from;)this.addMatch(E,e,E.index+c.from,P);else tW(e.state.doc,this.regexp,p,v,(U,z)=>this.addMatch(z,e,U,P));t=t.update({filterFrom:p,filterTo:v,filter:(U,z)=>U<p||z>v,add:M})}}return t}}const jR=/x/.unicode!=null?"gu":"g",l3e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,jR),u3e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let g7=null;function c3e(){var n;if(g7==null&&typeof document<"u"&&document.body){let e=document.body.style;g7=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return g7||!1}const KS=Ii.define({combine(n){let e=$p(n,{render:null,specialChars:l3e,addSpecialChars:null});return(e.replaceTabs=!c3e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,jR)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,jR)),e}});function A3e(n={}){return[KS.of(n),h3e()]}let nW=null;function h3e(){return nW||(nW=_u.fromClass(class{constructor(n){this.view=n,this.decorations=_r.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(KS)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new a3e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=Od(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=$x(s.text,a,i-s.from);return _r.replace({widget:new p3e((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=_r.replace({widget:new m3e(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(KS);n.startState.facet(KS)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const d3e="";function f3e(n){return n>=32?d3e:n==10?"":String.fromCharCode(9216+n)}class m3e extends X1{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=f3e(this.code),i=e.state.phrase("Control character")+" "+(u3e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class p3e extends X1{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function g3e(){return v3e}const y3e=_r.line({class:"cm-activeLine"}),v3e=_u.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(y3e.range(r.from)),e=r.from)}return _r.set(t)}},{decorations:n=>n.decorations}),NR=2e3;function C3e(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>NR||t.off>NR||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let d=n.doc.line(c);d.length<=a&&o.push(Bn.range(d.from+s,d.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let d=n.doc.line(c),p=bR(d.text,s,n.tabSize,!0);if(p<0)o.push(Bn.cursor(d.to));else{let v=bR(d.text,a,n.tabSize);o.push(Bn.range(d.from+p,d.from+v))}}}return o}function b3e(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function iW(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>NR?-1:r==i.length?b3e(n,e.clientX):$x(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function _3e(n,e){let t=iW(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=iW(n,r);if(!a)return i;let c=C3e(n.state,t,a);return c.length?s?Bn.create(c.concat(i.ranges)):Bn.create(c):i}}:null}function x3e(n){let e=(t=>t.altKey&&t.button==0);return Bi.mouseSelectionStyle.of((t,i)=>e(i)?_3e(t,i):null)}const M3e={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},w3e={style:"cursor: crosshair"};function S3e(n={}){let[e,t]=M3e[n.key||"Alt"],i=_u.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Bi.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?w3e:null})]}const zw="-10000px";class Jne{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let d=o[c],p=-1;if(d){for(let v=0;v<this.tooltips.length;v++){let M=this.tooltips[v];M&&M.create==d.create&&(p=v)}if(p<0)s[c]=this.createTooltipView(d,c?s[c-1]:null),a&&(a[c]=!!d.above);else{let v=s[c]=this.tooltipViews[p];a&&(a[c]=t[p]),v.update&&v.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,d)=>t[d]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function E3e(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const y7=Ii.define({combine:n=>{var e,t,i;return{position:Di.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||E3e}}}),rW=new WeakMap,XL=_u.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(y7);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Jne(n,GB,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(y7);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=zw,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Di.safari){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}else t=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=YL(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(y7).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],d=this.manager.tooltipViews[a],{dom:p}=d,v=n.pos[a],M=n.size[a];if(!v||c.clip!==!1&&(v.bottom<=Math.max(t.top,i.top)||v.top>=Math.min(t.bottom,i.bottom)||v.right<Math.max(t.left,i.left)-.1||v.left>Math.min(t.right,i.right)+.1)){p.style.top=zw;continue}let E=c.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,P=E?7:0,U=M.right-M.left,z=(e=rW.get(d))!==null&&e!==void 0?e:M.bottom-M.top,V=d.offset||O3e,Z=this.view.textDirection==Ma.LTR,X=M.width>i.right-i.left?Z?i.left:i.right-M.width:Z?Math.max(i.left,Math.min(v.left-(E?14:0)+V.x,i.right-U)):Math.min(Math.max(i.left,v.left-U+(E?14:0)-V.x),i.right-U),re=this.above[a];!c.strictSide&&(re?v.top-z-P-V.y<i.top:v.bottom+z+P+V.y>i.bottom)&&re==i.bottom-v.bottom>v.top-i.top&&(re=this.above[a]=!re);let ee=(re?v.top-i.top:i.bottom-v.bottom)-P;if(ee<z&&d.resize!==!1){if(ee<this.view.defaultLineHeight){p.style.top=zw;continue}rW.set(d,z),p.style.height=(z=ee)/o+"px"}else p.style.height&&(p.style.height="");let ne=re?v.top-z-P-V.y:v.bottom+P+V.y,q=X+U;if(d.overlap!==!0)for(let le of s)le.left<q&&le.right>X&&le.top<ne+z&&le.bottom>ne&&(ne=re?le.top-z-2-P:le.bottom+P+2);if(this.position=="absolute"?(p.style.top=(ne-n.parent.top)/o+"px",oW(p,(X-n.parent.left)/r)):(p.style.top=ne/o+"px",oW(p,X/r)),E){let le=v.left+(Z?V.x:-V.x)-(X+14-7);E.style.left=le/r+"px"}d.overlap!==!0&&s.push({left:X,top:ne,right:q,bottom:ne+z}),p.classList.toggle("cm-tooltip-above",re),p.classList.toggle("cm-tooltip-below",!re),d.positioned&&d.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=zw}},{eventObservers:{scroll(){this.maybeMeasure()}}});function oW(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const B3e=Bi.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),O3e={x:0,y:0},GB=Ii.define({enables:[XL,B3e]}),XE=Ii.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class WB{static create(e){return new WB(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Jne(e,XE,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const I3e=GB.compute([XE],n=>{let e=n.facet(XE);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:WB.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class T3e{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.tile.nearest(t.target);if(!i)return;let r,o=1;if(i.isWidget())r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(p=>p.from<=r&&p.to>=r),d=c&&c.dir==Ma.RTL?-1:1;o=t.x<a.left?-d:d}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>Lh(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(XL),t=e?e.manager.tooltips.findIndex(i=>i.create==WB.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!k3e(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!D3e(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const jw=4;function k3e(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-jw&&e.clientX<=i+jw&&e.clientY>=r-jw&&e.clientY<=o+jw}function D3e(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function R3e(n,e={}){let t=io.define(),i=Cc.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Rh.TrackDel);if(c!=null){let d=Object.assign(Object.create(null),a);d.pos=c,d.end!=null&&(d.end=o.changes.mapPos(d.end)),s.push(d)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(P3e)&&(r=[]);return r},provide:r=>XE.from(r)});return{active:i,extension:[i,_u.define(r=>new T3e(r,n,i,t,e.hoverTime||300)),I3e]}}function eie(n,e){let t=n.plugin(XL);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const P3e=io.define(),sW=Ii.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function O5(n,e){let t=n.plugin(tie),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const tie=_u.fromClass(class{constructor(n){this.input=n.state.facet(I5),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(sW);this.top=new Nw(n,!0,e.topContainer),this.bottom=new Nw(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(sW);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Nw(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Nw(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(I5);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let d=this.specs.indexOf(c),p;d<0?(p=c(n.view),a.push(p)):(p=this.panels[d],p.update&&p.update(n)),r.push(p),(p.top?o:s).push(p)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Bi.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Nw{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=aW(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=aW(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function aW(n){let e=n.nextSibling;return n.remove(),e}const I5=Ii.define({enables:tie});class Ig extends Uv{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ig.prototype.elementClass="";Ig.prototype.toDOM=void 0;Ig.prototype.mapMode=Rh.TrackBefore;Ig.prototype.startSide=Ig.prototype.endSide=-1;Ig.prototype.point=!0;const FS=Ii.define(),U3e=Ii.define(),L3e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>vo.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},P4=Ii.define();function nie(n){return[iie(),P4.of({...L3e,...n})]}const lW=Ii.define({combine:n=>n.some(e=>e)});function iie(n){return[K3e]}const K3e=_u.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(P4).map(e=>new cW(n,e)),this.fixed=!n.state.facet(lW);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(lW)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=vo.iter(this.view.state.facet(FS),this.view.viewport.from),i=[],r=this.gutters.map(o=>new F3e(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==bA.Text&&s){GR(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==bA.Text){GR(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(P4),t=n.state.facet(P4),i=n.docChanged||n.heightChanged||n.viewportChanged||!vo.eq(n.startState.facet(FS),n.state.facet(FS),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new cW(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Bi.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ma.LTR?{left:i,right:r}:{right:i,left:r}})});function uW(n){return Array.isArray(n)?n:[n]}function GR(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class F3e{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=vo.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new rie(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];GR(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(U3e)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class cW{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=uW(t.markers(e)),t.initialSpacer&&(this.spacer=new rie(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=uW(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!vo.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class rie{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),z3e(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,d=!1;if(c){let p=c.elementClass;p&&(i+=" "+p);for(let v=s;v<this.markers.length;v++)if(this.markers[v].compare(c)){a=v,d=!0;break}}else a=this.markers.length;for(;s<a;){let p=this.markers[s++];if(p.toDOM){p.destroy(r);let v=r.nextSibling;r.remove(),r=v}}if(!c)break;c.toDOM&&(d?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),d&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function z3e(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const j3e=Ii.define(),N3e=Ii.define(),U2=Ii.define({combine(n){return $p(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,d)=>o(a,c,d)||s(a,c,d):s}return i}})}});class v7 extends Ig{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function C7(n,e){return n.state.facet(U2).formatNumber(e,n.state)}const G3e=P4.compute([U2],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(j3e)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new v7(C7(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(N3e)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(U2)!=e.state.facet(U2),initialSpacer(e){return new v7(C7(e,AW(e.state.doc.lines)))},updateSpacer(e,t){let i=C7(t.view,AW(t.view.state.doc.lines));return i==e.number?e:new v7(i)},domEventHandlers:n.facet(U2).domEventHandlers,side:"before"}));function W3e(n={}){return[U2.of(n),iie(),G3e]}function AW(n){let e=9;for(;e<n;)e=e*10+9;return e}const Q3e=new class extends Ig{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},q3e=FS.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(Q3e.range(r)))}return vo.of(e)});function Y3e(){return q3e}const oie=1024;let V3e=0;class b7{constructor(e,t){this.from=e,this.to=t}}class wo{constructor(e={}){this.id=V3e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ld.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}wo.closedBy=new wo({deserialize:n=>n.split(" ")});wo.openedBy=new wo({deserialize:n=>n.split(" ")});wo.group=new wo({deserialize:n=>n.split(" ")});wo.isolate=new wo({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});wo.contextHash=new wo({perNode:!0});wo.lookAhead=new wo({perNode:!0});wo.mounted=new wo({perNode:!0});class JE{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[wo.mounted.id]}}const $3e=Object.create(null);class Ld{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):$3e,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ld(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(wo.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(wo.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}Ld.none=new Ld("",Object.create(null),0,8);class JL{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);if(s){r||(r=Object.assign({},i.props));let a=s[1],c=s[0];c.combine&&c.id in r&&(a=c.combine(r[c.id],a)),r[c.id]=a}}t.push(r?new Ld(i.name,r,i.id,i.flags):i)}return new JL(t)}}const Gw=new WeakMap,hW=new WeakMap;var $c;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})($c||($c={}));class Yu{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=JE.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new QR(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Gw.get(this)||this.topNode,o=new QR(r);return o.moveTo(e,t),Gw.set(this,o._tree),o}get topNode(){return new Im(this,0,0,null)}resolve(e,t=0){let i=T5(Gw.get(this)||this.topNode,e,t,!1);return Gw.set(this,i),i}resolveInner(e,t=0){let i=T5(hW.get(this)||this.topNode,e,t,!0);return hW.set(this,i),i}resolveStack(e,t=0){return X3e(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&$c.IncludeAnonymous)>0;for(let c=this.cursor(s|$c.IncludeAnonymous);;){let d=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;d=!0}for(;d&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:nK(Ld.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Yu(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Yu(Ld.none,t,i,r)))}static build(e){return J3e(e)}}Yu.empty=new Yu(Ld.none,[],[],0);class eK{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new eK(this.buffer,this.index)}}class zv{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ld.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(sie(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let d=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,d)}return new zv(o,s,this.set)}}function sie(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function T5(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof Im&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:$c.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof Im&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class aie{cursor(e=0){return new QR(this,e)}getChild(e,t=null,i=null){let r=dW(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return dW(this,e,t,i)}resolve(e,t=0){return T5(this,e,t,!1)}resolveInner(e,t=0){return T5(this,e,t,!0)}matchContext(e){return WR(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class Im extends aie{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,d=t>0?a.length:-1;e!=d;e+=t){let p=a[e],v=c[e]+s.from;if(sie(r,i,v,v+p.length)){if(p instanceof zv){if(o&$c.ExcludeBuffers)continue;let M=p.findChild(0,p.buffer.length,t,i-v,r);if(M>-1)return new Mv(new H3e(s,p,e,v),null,M)}else if(o&$c.IncludeAnonymous||!p.type.isAnonymous||tK(p)){let M;if(!(o&$c.IgnoreMounts)&&(M=JE.get(p))&&!M.overlay)return new Im(M.tree,v,e,s);let E=new Im(p,v,e,s);return o&$c.IncludeAnonymous||!E.type.isAnonymous?E:E.nextChild(t<0?p.children.length-1:0,t,i,r)}}}if(o&$c.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&$c.IgnoreOverlays)&&(r=JE.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new Im(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function dW(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function WR(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class H3e{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Mv extends aie{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Mv(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&$c.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Mv(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Mv(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Mv(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new Yu(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function lie(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof Im&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new Z3e(r,t)}class Z3e{constructor(e,t){this.heads=e,this.node=t}get next(){return lie(this.heads)}}function X3e(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof Im?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=JE.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new Im(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(T5(a,e,t,!1))}}return r?lie(r):i}class QR{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Im)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Im?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&$c.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$c.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$c.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&$c.IncludeAnonymous||a instanceof zv||!a.type.isAnonymous||tK(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new Mv(this.buffer,t,this.stack[r]);return this.bufferNode=new Mv(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return WR(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return WR(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function tK(n){return n.children.some(e=>e instanceof zv||!e.type.isAnonymous||tK(e))}function J3e(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=oie,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new eK(t,t.length):t,c=i.types,d=0,p=0;function v(ee,ne,q,le,ue,ve){let{id:pe,start:Be,end:Ce,size:Oe}=a,Fe=p,Ee=d;if(Oe<0)if(a.next(),Oe==-1){let De=o[pe];q.push(De),le.push(Be-ee);return}else if(Oe==-3){d=pe;return}else if(Oe==-4){p=pe;return}else throw new RangeError(`Unrecognized record size: ${Oe}`);let Ve=c[pe],ut,mt,Pe=Be-ee;if(Ce-Be<=r&&(mt=z(a.pos-ne,ue))){let De=new Uint16Array(mt.size-mt.skip),Xe=a.pos-mt.size,Ke=De.length;for(;a.pos>Xe;)Ke=V(mt.start,De,Ke);ut=new zv(De,Ce-mt.start,i),Pe=mt.start-ee}else{let De=a.pos-Oe;a.next();let Xe=[],Ke=[],Bt=pe>=s?pe:-1,ot=0,Et=Ce;for(;a.pos>De;)Bt>=0&&a.id==Bt&&a.size>=0?(a.end<=Et-r&&(P(Xe,Ke,Be,ot,a.end,Et,Bt,Fe,Ee),ot=Xe.length,Et=a.end),a.next()):ve>2500?M(Be,De,Xe,Ke):v(Be,De,Xe,Ke,Bt,ve+1);if(Bt>=0&&ot>0&&ot<Xe.length&&P(Xe,Ke,Be,ot,Be,Et,Bt,Fe,Ee),Xe.reverse(),Ke.reverse(),Bt>-1&&ot>0){let Rt=E(Ve,Ee);ut=nK(Ve,Xe,Ke,0,Xe.length,0,Ce-Be,Rt,Rt)}else ut=U(Ve,Xe,Ke,Ce-Be,Fe-Ce,Ee)}q.push(ut),le.push(Pe)}function M(ee,ne,q,le){let ue=[],ve=0,pe=-1;for(;a.pos>ne;){let{id:Be,start:Ce,end:Oe,size:Fe}=a;if(Fe>4)a.next();else{if(pe>-1&&Ce<pe)break;pe<0&&(pe=Oe-r),ue.push(Be,Ce,Oe),ve++,a.next()}}if(ve){let Be=new Uint16Array(ve*4),Ce=ue[ue.length-2];for(let Oe=ue.length-3,Fe=0;Oe>=0;Oe-=3)Be[Fe++]=ue[Oe],Be[Fe++]=ue[Oe+1]-Ce,Be[Fe++]=ue[Oe+2]-Ce,Be[Fe++]=Fe;q.push(new zv(Be,ue[2]-Ce,i)),le.push(Ce-ee)}}function E(ee,ne){return(q,le,ue)=>{let ve=0,pe=q.length-1,Be,Ce;if(pe>=0&&(Be=q[pe])instanceof Yu){if(!pe&&Be.type==ee&&Be.length==ue)return Be;(Ce=Be.prop(wo.lookAhead))&&(ve=le[pe]+Be.length+Ce)}return U(ee,q,le,ue,ve,ne)}}function P(ee,ne,q,le,ue,ve,pe,Be,Ce){let Oe=[],Fe=[];for(;ee.length>le;)Oe.push(ee.pop()),Fe.push(ne.pop()+q-ue);ee.push(U(i.types[pe],Oe,Fe,ve-ue,Be-ve,Ce)),ne.push(ue-q)}function U(ee,ne,q,le,ue,ve,pe){if(ve){let Be=[wo.contextHash,ve];pe=pe?[Be].concat(pe):[Be]}if(ue>25){let Be=[wo.lookAhead,ue];pe=pe?[Be].concat(pe):[Be]}return new Yu(ee,ne,q,le,pe)}function z(ee,ne){let q=a.fork(),le=0,ue=0,ve=0,pe=q.end-r,Be={size:0,start:0,skip:0};e:for(let Ce=q.pos-ee;q.pos>Ce;){let Oe=q.size;if(q.id==ne&&Oe>=0){Be.size=le,Be.start=ue,Be.skip=ve,ve+=4,le+=4,q.next();continue}let Fe=q.pos-Oe;if(Oe<0||Fe<Ce||q.start<pe)break;let Ee=q.id>=s?4:0,Ve=q.start;for(q.next();q.pos>Fe;){if(q.size<0)if(q.size==-3)Ee+=4;else break e;else q.id>=s&&(Ee+=4);q.next()}ue=Ve,le+=Oe,ve+=Ee}return(ne<0||le==ee)&&(Be.size=le,Be.start=ue,Be.skip=ve),Be.size>4?Be:void 0}function V(ee,ne,q){let{id:le,start:ue,end:ve,size:pe}=a;if(a.next(),pe>=0&&le<s){let Be=q;if(pe>4){let Ce=a.pos-(pe-4);for(;a.pos>Ce;)q=V(ee,ne,q)}ne[--q]=Be,ne[--q]=ve-ee,ne[--q]=ue-ee,ne[--q]=le}else pe==-3?d=le:pe==-4&&(p=le);return q}let Z=[],X=[];for(;a.pos>0;)v(n.start||0,n.bufferStart||0,Z,X,-1,0);let re=(e=n.length)!==null&&e!==void 0?e:Z.length?X[0]+Z[0].length:0;return new Yu(c[n.topID],Z.reverse(),X.reverse(),re)}const fW=new WeakMap;function zS(n,e){if(!n.isAnonymous||e instanceof zv||e.type!=n)return 1;let t=fW.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Yu)){t=1;break}t+=zS(n,i)}fW.set(e,t)}return t}function nK(n,e,t,i,r,o,s,a,c){let d=0;for(let P=i;P<r;P++)d+=zS(n,e[P]);let p=Math.ceil(d*1.5/8),v=[],M=[];function E(P,U,z,V,Z){for(let X=z;X<V;){let re=X,ee=U[X],ne=zS(n,P[X]);for(X++;X<V;X++){let q=zS(n,P[X]);if(ne+q>=p)break;ne+=q}if(X==re+1){if(ne>p){let q=P[re];E(q.children,q.positions,0,q.children.length,U[re]+Z);continue}v.push(P[re])}else{let q=U[X-1]+P[X-1].length-ee;v.push(nK(n,P,U,re,X,ee,q,null,c))}M.push(ee+Z-o)}}return E(e,t,i,r,0),(a||c)(v,M,s)}class Ib{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Ib(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,d=0;;a++){let p=a<t.length?t[a]:null,v=p?p.fromA:1e9;if(v-c>=i)for(;s&&s.from<v;){let M=s;if(c>=M.from||v<=M.to||d){let E=Math.max(M.from,c)-d,P=Math.min(M.to,v)-d;M=E>=P?null:new Ib(E,P,M.tree,M.offset+d,a>0,!!p)}if(M&&r.push(M),s.to>v)break;s=o<e.length?e[o++]:null}if(!p)break;c=p.toA,d=p.toA-p.toB}return r}}class uie{startParse(e,t,i){return typeof e=="string"&&(e=new e4e(e)),i=i?i.length?i.map(r=>new b7(r.from,r.to)):[new b7(0,0)]:[new b7(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class e4e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new wo({perNode:!0});let t4e=0;class ym{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=t4e++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof ym&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new ym(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new e6(e);return i=>i.modified.indexOf(t)>-1?i:e6.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let n4e=0;class e6{constructor(e){this.name=e,this.instances=[],this.id=n4e++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&i4e(t,a.modified));if(i)return i;let r=[],o=new ym(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=r4e(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(e6.get(a,c));return o}}function i4e(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function r4e(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function cie(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let v=0;;){if(a=="..."&&v>0&&v+3==r.length){s=1;break}let M=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!M)throw new RangeError("Invalid path: "+r);if(o.push(M[0]=="*"?"":M[0][0]=='"'?JSON.parse(M[0]):M[0]),v+=M[0].length,v==r.length)break;let E=r[v++];if(v==r.length&&E=="!"){s=0;break}if(E!="/")throw new RangeError("Invalid path: "+r);a=r.slice(v)}let c=o.length-1,d=o[c];if(!d)throw new RangeError("Invalid path: "+r);let p=new k5(i,s,c>0?o.slice(0,c):null);e[d]=p.sort(e[d])}}return Aie.add(e)}const Aie=new wo({combine(n,e){let t,i,r;for(;n||e;){if(!n||e&&n.depth>=e.depth?(r=e,e=e.next):(r=n,n=n.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let o=new k5(r.tags,r.mode,r.context);t?t.next=o:i=o,t=o}return i}});class k5{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}k5.empty=new k5([],2,null);function hie(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let d=t[c.id];if(d){s=s?s+" "+d:d;break}}return s},scope:i}}function o4e(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function s4e(n,e,t,i=0,r=n.length){let o=new a4e(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class a4e{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(E=>!E.scope||E.scope(s)));let d=r,p=l4e(e)||k5.empty,v=o4e(o,p.tags);if(v&&(d&&(d+=" "),d+=v,p.mode==1&&(r+=(r?" ":"")+v)),this.startSpan(Math.max(t,a),d),p.opaque)return;let M=e.tree&&e.tree.prop(wo.mounted);if(M&&M.overlay){let E=e.node.enter(M.overlay[0].from+a,1),P=this.highlighters.filter(z=>!z.scope||z.scope(M.tree.type)),U=e.firstChild();for(let z=0,V=a;;z++){let Z=z<M.overlay.length?M.overlay[z]:null,X=Z?Z.from+a:c,re=Math.max(t,V),ee=Math.min(i,X);if(re<ee&&U)for(;e.from<ee&&(this.highlightRange(e,re,ee,r,o),this.startSpan(Math.min(ee,e.to),d),!(e.to>=X||!e.nextSibling())););if(!Z||X>i)break;V=Z.to+a,V>t&&(this.highlightRange(E.cursor(),Math.max(t,Z.from+a),Math.min(i,V),"",P),this.startSpan(Math.min(i,V),d))}U&&e.parent()}else if(e.firstChild()){M&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function l4e(n){let e=n.type.prop(Aie);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const fi=ym.define,Ww=fi(),cv=fi(),mW=fi(cv),pW=fi(cv),Av=fi(),Qw=fi(Av),_7=fi(Av),eg=fi(),ZC=fi(eg),Z0=fi(),X0=fi(),qR=fi(),U3=fi(qR),qw=fi(),An={comment:Ww,lineComment:fi(Ww),blockComment:fi(Ww),docComment:fi(Ww),name:cv,variableName:fi(cv),typeName:mW,tagName:fi(mW),propertyName:pW,attributeName:fi(pW),className:fi(cv),labelName:fi(cv),namespace:fi(cv),macroName:fi(cv),literal:Av,string:Qw,docString:fi(Qw),character:fi(Qw),attributeValue:fi(Qw),number:_7,integer:fi(_7),float:fi(_7),bool:fi(Av),regexp:fi(Av),escape:fi(Av),color:fi(Av),url:fi(Av),keyword:Z0,self:fi(Z0),null:fi(Z0),atom:fi(Z0),unit:fi(Z0),modifier:fi(Z0),operatorKeyword:fi(Z0),controlKeyword:fi(Z0),definitionKeyword:fi(Z0),moduleKeyword:fi(Z0),operator:X0,derefOperator:fi(X0),arithmeticOperator:fi(X0),logicOperator:fi(X0),bitwiseOperator:fi(X0),compareOperator:fi(X0),updateOperator:fi(X0),definitionOperator:fi(X0),typeOperator:fi(X0),controlOperator:fi(X0),punctuation:qR,separator:fi(qR),bracket:U3,angleBracket:fi(U3),squareBracket:fi(U3),paren:fi(U3),brace:fi(U3),content:eg,heading:ZC,heading1:fi(ZC),heading2:fi(ZC),heading3:fi(ZC),heading4:fi(ZC),heading5:fi(ZC),heading6:fi(ZC),contentSeparator:fi(eg),list:fi(eg),quote:fi(eg),emphasis:fi(eg),strong:fi(eg),link:fi(eg),monospace:fi(eg),strikethrough:fi(eg),inserted:fi(),deleted:fi(),changed:fi(),invalid:fi(),meta:qw,documentMeta:fi(qw),annotation:fi(qw),processingInstruction:fi(qw),definition:ym.defineModifier("definition"),constant:ym.defineModifier("constant"),function:ym.defineModifier("function"),standard:ym.defineModifier("standard"),local:ym.defineModifier("local"),special:ym.defineModifier("special")};for(let n in An){let e=An[n];e instanceof ym&&(e.name=n)}hie([{tag:An.link,class:"tok-link"},{tag:An.heading,class:"tok-heading"},{tag:An.emphasis,class:"tok-emphasis"},{tag:An.strong,class:"tok-strong"},{tag:An.keyword,class:"tok-keyword"},{tag:An.atom,class:"tok-atom"},{tag:An.bool,class:"tok-bool"},{tag:An.url,class:"tok-url"},{tag:An.labelName,class:"tok-labelName"},{tag:An.inserted,class:"tok-inserted"},{tag:An.deleted,class:"tok-deleted"},{tag:An.literal,class:"tok-literal"},{tag:An.string,class:"tok-string"},{tag:An.number,class:"tok-number"},{tag:[An.regexp,An.escape,An.special(An.string)],class:"tok-string2"},{tag:An.variableName,class:"tok-variableName"},{tag:An.local(An.variableName),class:"tok-variableName tok-local"},{tag:An.definition(An.variableName),class:"tok-variableName tok-definition"},{tag:An.special(An.variableName),class:"tok-variableName2"},{tag:An.definition(An.propertyName),class:"tok-propertyName tok-definition"},{tag:An.typeName,class:"tok-typeName"},{tag:An.namespace,class:"tok-namespace"},{tag:An.className,class:"tok-className"},{tag:An.macroName,class:"tok-macroName"},{tag:An.propertyName,class:"tok-propertyName"},{tag:An.operator,class:"tok-operator"},{tag:An.comment,class:"tok-comment"},{tag:An.meta,class:"tok-meta"},{tag:An.invalid,class:"tok-invalid"},{tag:An.punctuation,class:"tok-punctuation"}]);var x7;const L2=new wo;function u4e(n){return Ii.define({combine:n?e=>e.concat(n):void 0})}const c4e=new wo;class Lp{constructor(e,t,i=[],r=""){this.data=e,this.name=r,cs.prototype.hasOwnProperty("tree")||Object.defineProperty(cs.prototype,"tree",{get(){return th(this)}}),this.parser=t,this.extension=[jv.of(this),cs.languageData.of((o,s,a)=>{let c=gW(o,s,a),d=c.type.prop(L2);if(!d)return[];let p=o.facet(d),v=c.type.prop(c4e);if(v){let M=c.resolve(s-c.from,a);for(let E of v)if(E.test(M,o)){let P=o.facet(E.facet);return E.type=="replace"?P:P.concat(p)}}return p})].concat(i)}isActiveAt(e,t,i=-1){return gW(e,t,i).type.prop(L2)==this.data}findRegions(e){let t=e.facet(jv);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(L2)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(wo.mounted);if(a){if(a.tree.prop(L2)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let d=o.children[c];d instanceof Yu&&r(d,o.positions[c]+s)}};return r(th(e),0),i}get allowsNesting(){return!0}}Lp.setState=io.define();function gW(n,e,t){let i=n.facet(jv),r=th(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,$c.ExcludeBuffers))o.type.isTop&&(r=o);return r}class t6 extends Lp{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=u4e(e.languageData);return new t6(t,e.parser.configure({props:[L2.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new t6(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function th(n){let e=n.field(Lp.state,!1);return e?e.tree:Yu.empty}class A4e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let L3=null;class n6{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new n6(e,t,[],Yu.empty,0,i,[],null)}startParse(){return this.parser.startParse(new A4e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Yu.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Ib.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ib.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=L3;L3=this;try{return e()}finally{L3=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=yW(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((d,p,v,M)=>c.push({fromA:d,toA:p,fromB:v,toB:M})),i=Ib.applyChanges(i,c),r=Yu.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),v=e.mapPos(d.to,-1);p<v&&a.push({from:p,to:v})}}}return new n6(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=yW(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends uie{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=L3;if(c){for(let d of r)c.tempSkipped.push(d);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new Yu(Ld.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return L3}}function yW(n,e,t){return Ib.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class kx{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new kx(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=n6.create(e.facet(jv).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new kx(i)}}Lp.state=Cc.define({create:kx.init,update(n,e){for(let t of e.effects)if(t.is(Lp.setState))return t.value;return e.startState.facet(jv)!=e.state.facet(jv)?kx.init(e.state):n.apply(e)}});let die=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(die=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const M7=typeof navigator<"u"&&(!((x7=navigator.scheduling)===null||x7===void 0)&&x7.isInputPending)?()=>navigator.scheduling.isInputPending():null,h4e=_u.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Lp.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Lp.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=die(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(Lp.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!M7?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>M7&&M7()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Lp.setState.of(new kx(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Lh(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),jv=Ii.define({combine(n){return n.length?n[0]:null},enables:n=>[Lp.state,h4e,Bi.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class d4e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const f4e=Ii.define(),iK=Ii.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function i6(n){let e=n.facet(iK);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function D5(n,e){let t="",i=n.tabSize,r=n.facet(iK)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function rK(n,e){n instanceof cs&&(n=new QB(n));for(let i of n.state.facet(f4e)){let r=i(n,e);if(r!==void 0)return r}let t=th(n.state);return t.length>=e?m4e(n,t,e):null}class QB{constructor(e,t={}){this.state=e,this.options=t,this.unit=i6(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return $x(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const fie=new wo;function m4e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return mie(i,n,t)}function mie(n,e,t){for(let i=n;i;i=i.next){let r=g4e(i.node);if(r)return r(oK.create(e,t,i))}return 0}function p4e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function g4e(n){let e=n.type.prop(fie);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(wo.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>b4e(s,!0,1,void 0,o&&!p4e(s)?r.from:void 0)}return n.parent==null?y4e:null}function y4e(){return 0}class oK extends QB{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new oK(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(v4e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return mie(this.context.next,this.base,this.pos)}}function v4e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function C4e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let d=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+d}}a=c.to}}function b4e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=C4e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function vW({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const _4e=200;function x4e(){return cs.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+_4e)return n;let o=t.sliceString(r.from,i);if(!e.some(d=>d.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:d}of s.selection.ranges){let p=s.doc.lineAt(d);if(p.from==a)continue;a=p.from;let v=rK(s,p.from);if(v==null)continue;let M=/^\s*/.exec(p.text)[0],E=D5(s,v);M!=E&&c.push({from:p.from,to:p.from+M.length,insert:E})}return c.length?[n,{changes:c,sequential:!0}]:n})}const M4e=Ii.define(),pie=new wo;function w4e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function S4e(n,e,t){let i=th(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(pie);if(c&&(a.to<i.length-50||i.length==n.doc.length||!E4e(a))){let d=c(a,n);d&&d.from<=t&&d.from>=e&&d.to>t&&(o=d)}}return o}function E4e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function r6(n,e,t){for(let i of n.facet(M4e)){let r=i(n,e,t);if(r)return r}return S4e(n,e,t)}function gie(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const qB=io.define({map:gie}),PM=io.define({map:gie});function yie(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Yb=Cc.define({create(){return _r.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=CW(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(qB)&&!B4e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(bie),r=i?_r.replace({widget:new P4e(i(e.state,t.value))}):bW;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(PM)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=CW(n,e.selection.main.head)),n},provide:n=>Bi.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(bW.range(i,r))}return _r.set(e,!0)}});function CW(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function o6(n,e,t){var i;let r=null;return(i=n.field(Yb,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function B4e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function vie(n,e){return n.field(Yb,!1)?e:e.concat(io.appendConfig.of(_ie()))}const O4e=n=>{for(let e of yie(n)){let t=r6(n.state,e.from,e.to);if(t)return n.dispatch({effects:vie(n.state,[qB.of(t),Cie(n,t)])}),!0}return!1},I4e=n=>{if(!n.state.field(Yb,!1))return!1;let e=[];for(let t of yie(n)){let i=o6(n.state,t.from,t.to);i&&e.push(PM.of(i),Cie(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Cie(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Bi.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const T4e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=r6(e,r.from,r.to);o&&t.push(qB.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:vie(n.state,t)}),!!t.length},k4e=n=>{let e=n.state.field(Yb,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(PM.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},D4e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:O4e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:I4e},{key:"Ctrl-Alt-[",run:T4e},{key:"Ctrl-Alt-]",run:k4e}],R4e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},bie=Ii.define({combine(n){return $p(n,R4e)}});function _ie(n){return[Yb,K4e]}function xie(n,e){let{state:t}=n,i=t.facet(bie),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=o6(n.state,a.from,a.to);c&&n.dispatch({effects:PM.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const bW=_r.replace({widget:new class extends X1{toDOM(n){return xie(n,null)}}});class P4e extends X1{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return xie(e,this.value)}}const U4e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class w7 extends Ig{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function L4e(n={}){let e={...U4e,...n},t=new w7(e,!0),i=new w7(e,!1),r=_u.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(jv)!=s.state.facet(jv)||s.startState.field(Yb,!1)!=s.state.field(Yb,!1)||th(s.startState)!=th(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new q1;for(let c of s.viewportLineBlocks){let d=o6(s.state,c.from,c.to)?i:r6(s.state,c.from,c.to)?t:null;d&&a.add(c.from,c.from,d)}return a.finish()}}),{domEventHandlers:o}=e;return[r,nie({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||vo.empty},initialSpacer(){return new w7(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let d=o6(s.state,a.from,a.to);if(d)return s.dispatch({effects:PM.of(d)}),!0;let p=r6(s.state,a.from,a.to);return p?(s.dispatch({effects:qB.of(p)}),!0):!1}}}),_ie()]}const K4e=Bi.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class UM{constructor(e,t){this.specs=e;let i;function r(a){let c=Lv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof Lp?a=>a.prop(L2)==s.data:s?a=>a==s:void 0,this.style=hie(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new Lv(i):null,this.themeType=t.themeType}static define(e,t){return new UM(e,t||{})}}const YR=Ii.define(),Mie=Ii.define({combine(n){return n.length?[n[0]]:null}});function S7(n){let e=n.facet(YR);return e.length?e:n.facet(Mie)}function wie(n,e){let t=[z4e],i;return n instanceof UM&&(n.module&&t.push(Bi.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(Mie.of(n)):i?t.push(YR.computeN([Bi.darkTheme],r=>r.facet(Bi.darkTheme)==(i=="dark")?[n]:[])):t.push(YR.of(n)),t}class F4e{constructor(e){this.markCache=Object.create(null),this.tree=th(e.state),this.decorations=this.buildDeco(e,S7(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=th(e.state),i=S7(e.state),r=i!=S7(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return _r.none;let i=new q1;for(let{from:r,to:o}of e.visibleRanges)s4e(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=_r.mark({class:c})))},r,o);return i.finish()}}const z4e=i_.high(_u.fromClass(F4e,{decorations:n=>n.decorations})),j4e=UM.define([{tag:An.meta,color:"#404740"},{tag:An.link,textDecoration:"underline"},{tag:An.heading,textDecoration:"underline",fontWeight:"bold"},{tag:An.emphasis,fontStyle:"italic"},{tag:An.strong,fontWeight:"bold"},{tag:An.strikethrough,textDecoration:"line-through"},{tag:An.keyword,color:"#708"},{tag:[An.atom,An.bool,An.url,An.contentSeparator,An.labelName],color:"#219"},{tag:[An.literal,An.inserted],color:"#164"},{tag:[An.string,An.deleted],color:"#a11"},{tag:[An.regexp,An.escape,An.special(An.string)],color:"#e40"},{tag:An.definition(An.variableName),color:"#00f"},{tag:An.local(An.variableName),color:"#30a"},{tag:[An.typeName,An.namespace],color:"#085"},{tag:An.className,color:"#167"},{tag:[An.special(An.variableName),An.macroName],color:"#256"},{tag:An.definition(An.propertyName),color:"#00c"},{tag:An.comment,color:"#940"},{tag:An.invalid,color:"#f00"}]),N4e=Bi.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Sie=1e4,Eie="()[]{}",Bie=Ii.define({combine(n){return $p(n,{afterCursor:!0,brackets:Eie,maxScanDistance:Sie,renderMatch:Q4e})}}),G4e=_r.mark({class:"cm-matchingBracket"}),W4e=_r.mark({class:"cm-nonmatchingBracket"});function Q4e(n){let e=[],t=n.matched?G4e:W4e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const q4e=Cc.define({create(){return _r.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Bie);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=gg(e.state,r.head,-1,i)||r.head>0&&gg(e.state,r.head-1,1,i)||i.afterCursor&&(gg(e.state,r.head,1,i)||r.head<e.state.doc.length&&gg(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return _r.set(t,!0)},provide:n=>Bi.decorations.from(n)}),Y4e=[q4e,N4e];function V4e(n={}){return[Bie.of(n),Y4e]}const $4e=new wo;function VR(n,e,t){let i=n.prop(e<0?wo.openedBy:wo.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function $R(n){let e=n.type.prop($4e);return e?e(n.node):n}function gg(n,e,t,i={}){let r=i.maxScanDistance||Sie,o=i.brackets||Eie,s=th(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let d=VR(c.type,t,o);if(d&&c.from<c.to){let p=$R(c);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return H4e(n,e,t,c,p,d,o)}}return Z4e(n,e,t,s,a.type,r,o)}function H4e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},d=0,p=a?.cursor();if(p&&(t<0?p.childBefore(i.from):p.childAfter(i.to)))do if(t<0?p.to<=i.from:p.from>=i.to){if(d==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let v=$R(p);return{start:c,end:v?{from:v.from,to:v.to}:void 0,matched:!0}}else if(VR(p.type,t,s))d++;else if(VR(p.type,-t,s)){if(d==0){let v=$R(p);return{start:c,end:v&&v.from<v.to?{from:v.from,to:v.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:c,matched:!1}}function Z4e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),v=0;for(let M=0;!p.next().done&&M<=o;){let E=p.value;t<0&&(M+=E.length);let P=e+M*t;for(let U=t>0?0:E.length-1,z=t>0?E.length:-1;U!=z;U+=t){let V=s.indexOf(E[U]);if(!(V<0||i.resolveInner(P+U,1).type!=r))if(V%2==0==t>0)v++;else{if(v==1)return{start:d,end:{from:P+U,to:P+U+1},matched:V>>1==c>>1};v--}}t>0&&(M+=E.length)}return p.done?{start:d,matched:!1}:null}const X4e=Object.create(null),_W=[Ld.none],xW=[],MW=Object.create(null),J4e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])J4e[n]=e5e(X4e,e);function E7(n,e){xW.indexOf(n)>-1||(xW.push(n),console.warn(e))}function e5e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let d of a.split(".")){let p=n[d]||An[d];p?typeof p=="function"?c.length?c=c.map(p):E7(d,`Modifier ${d} used at start of tag`):c.length?E7(d,`Tag ${d} used as modifier`):c=Array.isArray(p)?p:[p]:E7(d,`Unknown highlighting tag ${d}`)}for(let d of c)t.push(d)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=MW[r];if(o)return o.id;let s=MW[r]=Ld.define({id:_W.length,name:i,props:[cie({[i]:t})]});return _W.push(s),s.id}Ma.RTL,Ma.LTR;const t5e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=aK(n.state,t.from);return i.line?n5e(n):i.block?r5e(n):!1};function sK(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const n5e=sK(a5e,0),i5e=sK(Oie,0),r5e=sK((n,e)=>Oie(n,e,s5e(e)),0);function aK(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const K3=50;function o5e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-K3,i),s=n.sliceDoc(r,r+K3),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,d=o.length-a;if(o.slice(d-e.length,d)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let p,v;r-i<=2*K3?p=v=n.sliceDoc(i,r):(p=n.sliceDoc(i,i+K3),v=n.sliceDoc(r-K3,r));let M=/^\s*/.exec(p)[0].length,E=/\s*$/.exec(v)[0].length,P=v.length-E-t.length;return p.slice(M,M+e.length)==e&&v.slice(P,P+t.length)==t?{open:{pos:i+M+e.length,margin:/\s/.test(p.charAt(M+e.length))?1:0},close:{pos:r-E-t.length,margin:/\s/.test(v.charAt(P-1))?1:0}}:null}function s5e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Oie(n,e,t=e.selection.ranges){let i=t.map(o=>aK(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>o5e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:d,close:p}=a;o.push({from:d.pos-c.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+c.close.length})}return{changes:o}}return null}function a5e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,d=aK(e,o).line;if(d){for(let p=o;p<=s;){let v=e.doc.lineAt(p);if(v.from>r&&(o==s||s>v.from)){r=v.from;let M=/^\s*/.exec(v.text)[0].length,E=M==v.length,P=v.text.slice(M,M+d.length)==d?M:-1;M<v.text.length&&M<c&&(c=M),i.push({line:v,comment:P,token:d,indent:M,empty:E,single:!1})}p=v.to+1}if(c<1e9)for(let p=a;p<i.length;p++)i[p].indent<i[p].line.text.length&&(i[p].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:d,empty:p,single:v}of i)(v||!p)&&o.push({from:a.from+d,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let d=s.from+a,p=d+c.length;s.text[p-s.from]==" "&&p++,o.push({from:d,to:p})}return{changes:o}}return null}const HR=Z1.define(),l5e=Z1.define(),u5e=Ii.define(),Iie=Ii.define({combine(n){return $p(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),Tie=Cc.define({create(){return yg.empty},update(n,e){let t=e.state.facet(Iie),i=e.annotation(HR);if(i){let c=Dd.fromTransaction(e,i.selection),d=i.side,p=d==0?n.undone:n.done;return c?p=s6(p,p.length,t.minDepth,c):p=Rie(p,e.startState.selection),new yg(d==0?i.rest:p,d==0?p:i.rest)}let r=e.annotation(l5e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(vc.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Dd.fromTransaction(e),s=e.annotation(vc.time),a=e.annotation(vc.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new yg(n.done.map(Dd.fromJSON),n.undone.map(Dd.fromJSON))}});function c5e(n={}){return[Tie,Iie.of(n),Bi.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?kie:e.inputType=="historyRedo"?ZR:null;return i?(e.preventDefault(),i(t)):!1}})]}function YB(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Tie,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const kie=YB(0,!1),ZR=YB(1,!1),A5e=YB(0,!0),h5e=YB(1,!0);class Dd{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new Dd(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Dd(e.changes&&mc.fromJSON(e.changes),[],e.mapped&&Bg.fromJSON(e.mapped),e.startSelection&&Bn.fromJSON(e.startSelection),e.selectionsAfter.map(Bn.fromJSON))}static fromTransaction(e,t){let i=Sm;for(let r of e.startState.facet(u5e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Dd(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Sm)}static selection(e){return new Dd(void 0,Sm,void 0,void 0,e)}}function s6(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function d5e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let d=t[c++],p=t[c++];a>=d&&s<=p&&(i=!0)}}),i}function f5e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Die(n,e){return n.length?e.length?n.concat(e):n:e}const Sm=[],m5e=200;function Rie(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-m5e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),s6(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Dd.selection([e])]}function p5e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function B7(n,e){if(!n.length)return n;let t=n.length,i=Sm;for(;t;){let r=g5e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Dd.selection(i)]:Sm}function g5e(n,e,t){let i=Die(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):Sm,t);if(!n.changes)return Dd.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Dd(r,io.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const y5e=/^(input\.type|delete)($|\.)/;class yg{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new yg(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||y5e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,d5e(a.changes,e.changes))||i=="input.type.compose")?s=s6(s,s.length-1,r.minDepth,new Dd(e.changes.compose(a.changes),Die(io.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Sm)):s=s6(s,s.length,r.minDepth,e),new yg(s,Sm,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Sm;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&f5e(o[o.length-1],e)?this:new yg(Rie(this.done,e),this.undone,t,i)}addMapping(e){return new yg(B7(this.done,e),B7(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:HR.of({side:e,rest:p5e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?Sm:r.slice(0,r.length-1);return o.mapped&&(a=B7(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:HR.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}yg.empty=new yg(Sm,Sm);const v5e=[{key:"Mod-z",run:kie,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ZR,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ZR,preventDefault:!0},{key:"Mod-u",run:A5e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:h5e,preventDefault:!0}];function Hx(n,e){return Bn.create(n.ranges.map(e),n.mainIndex)}function Hp(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zp({state:n,dispatch:e},t){let i=Hx(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Hp(n,i)),!0)}function VB(n,e){return Bn.cursor(e?n.to:n.from)}function Pie(n,e){return Zp(n,t=>t.empty?n.moveByChar(t,e):VB(t,e))}function ih(n){return n.textDirectionAt(n.state.selection.main.head)==Ma.LTR}const Uie=n=>Pie(n,!ih(n)),Lie=n=>Pie(n,ih(n));function Kie(n,e){return Zp(n,t=>t.empty?n.moveByGroup(t,e):VB(t,e))}const C5e=n=>Kie(n,!ih(n)),b5e=n=>Kie(n,ih(n));function _5e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function $B(n,e,t){let i=th(n).resolveInner(e.head),r=t?wo.closedBy:wo.openedBy;for(let c=e.head;;){let d=t?i.childAfter(c):i.childBefore(c);if(!d)break;_5e(n,d,r)?i=d:c=t?d.to:d.from}let o=i.type.prop(r),s,a;return o&&(s=t?gg(n,i.from,1):gg(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,Bn.cursor(a,t?-1:1)}const x5e=n=>Zp(n,e=>$B(n.state,e,!ih(n))),M5e=n=>Zp(n,e=>$B(n.state,e,ih(n)));function Fie(n,e){return Zp(n,t=>{if(!t.empty)return VB(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const zie=n=>Fie(n,!1),jie=n=>Fie(n,!0);function Nie(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(Bi.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Gie(n,e){let t=Nie(n),{state:i}=n,r=Hx(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):VB(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,d=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<d&&(o=Bi.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch(Hp(i,r),{effects:o}),!0}const wW=n=>Gie(n,!1),XR=n=>Gie(n,!0);function Qv(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=Bn.cursor(i.from+o))}return r}const w5e=n=>Zp(n,e=>Qv(n,e,!0)),S5e=n=>Zp(n,e=>Qv(n,e,!1)),E5e=n=>Zp(n,e=>Qv(n,e,!ih(n))),B5e=n=>Zp(n,e=>Qv(n,e,ih(n))),O5e=n=>Zp(n,e=>Bn.cursor(n.lineBlockAt(e.head).from,1)),I5e=n=>Zp(n,e=>Bn.cursor(n.lineBlockAt(e.head).to,-1));function T5e(n,e,t){let i=!1,r=Hx(n.selection,o=>{let s=gg(n,o.head,-1)||gg(n,o.head,1)||o.head>0&&gg(n,o.head-1,1)||o.head<n.doc.length&&gg(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return Bn.cursor(a)});return i?(e(Hp(n,r)),!0):!1}const k5e=({state:n,dispatch:e})=>T5e(n,e);function Dm(n,e){let t=Hx(n.state.selection,i=>{let r=e(i);return Bn.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Hp(n.state,t)),!0)}function Wie(n,e){return Dm(n,t=>n.moveByChar(t,e))}const Qie=n=>Wie(n,!ih(n)),qie=n=>Wie(n,ih(n));function Yie(n,e){return Dm(n,t=>n.moveByGroup(t,e))}const D5e=n=>Yie(n,!ih(n)),R5e=n=>Yie(n,ih(n)),P5e=n=>Dm(n,e=>$B(n.state,e,!ih(n))),U5e=n=>Dm(n,e=>$B(n.state,e,ih(n)));function Vie(n,e){return Dm(n,t=>n.moveVertically(t,e))}const $ie=n=>Vie(n,!1),Hie=n=>Vie(n,!0);function Zie(n,e){return Dm(n,t=>n.moveVertically(t,e,Nie(n).height))}const SW=n=>Zie(n,!1),EW=n=>Zie(n,!0),L5e=n=>Dm(n,e=>Qv(n,e,!0)),K5e=n=>Dm(n,e=>Qv(n,e,!1)),F5e=n=>Dm(n,e=>Qv(n,e,!ih(n))),z5e=n=>Dm(n,e=>Qv(n,e,ih(n))),j5e=n=>Dm(n,e=>Bn.cursor(n.lineBlockAt(e.head).from)),N5e=n=>Dm(n,e=>Bn.cursor(n.lineBlockAt(e.head).to)),BW=({state:n,dispatch:e})=>(e(Hp(n,{anchor:0})),!0),OW=({state:n,dispatch:e})=>(e(Hp(n,{anchor:n.doc.length})),!0),IW=({state:n,dispatch:e})=>(e(Hp(n,{anchor:n.selection.main.anchor,head:0})),!0),TW=({state:n,dispatch:e})=>(e(Hp(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),G5e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),W5e=({state:n,dispatch:e})=>{let t=HB(n).map(({from:i,to:r})=>Bn.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:Bn.create(t),userEvent:"select"})),!0},Q5e=({state:n,dispatch:e})=>{let t=Hx(n.selection,i=>{let r=th(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return Bn.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(Hp(n,t)),!0)};function Xie(n,e){let{state:t}=n,i=t.selection,r=t.selection.ranges.slice();for(let o of t.selection.ranges){let s=t.doc.lineAt(o.head);if(e?s.to<n.state.doc.length:s.from>0)for(let a=o;;){let c=n.moveVertically(a,e);if(c.head<s.from||c.head>s.to){r.some(d=>d.head==c.head)||r.push(c);break}else{if(c.head==a.head)break;a=c}}}return r.length==i.ranges.length?!1:(n.dispatch(Hp(t,Bn.create(r,r.length-1))),!0)}const q5e=n=>Xie(n,!1),Y5e=n=>Xie(n,!0),V5e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Bn.create([t.main]):t.main.empty||(i=Bn.create([Bn.cursor(t.main.head)])),i?(e(Hp(n,i)),!0):!1};function LM(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=Yw(n,c,!1)):c>s&&(t="delete.forward",c=Yw(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=Yw(n,s,!1),a=Yw(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:Bn.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Bi.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Yw(n,e,t){if(n instanceof Bi)for(let i of n.state.facet(Bi.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Jie=(n,e,t)=>LM(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let d=$x(a,o.tabSize),p=d%i6(o)||i6(o);for(let v=0;v<p&&a[a.length-1-v]==" ";v++)r--;c=r}else c=yc(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=yc(s.text,c-s.from,!1,!1)+s.from);return c}),JR=n=>Jie(n,!1,!0),ere=n=>Jie(n,!0,!1),tre=(n,e)=>LM(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=yc(o.text,i-o.from,e)+o.from,d=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),p=s(d);if(a!=null&&p!=a)break;(d!=" "||i!=t.head)&&(a=p),i=c}return i}),nre=n=>tre(n,!1),$5e=n=>tre(n,!0),H5e=n=>LM(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),Z5e=n=>LM(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),X5e=n=>LM(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),J5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:fs.of(["",""])},range:Bn.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},eMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:yc(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:yc(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:Bn.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function HB(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function ire(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of HB(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(Bn.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(Bn.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Bn.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const tMe=({state:n,dispatch:e})=>ire(n,e,!1),nMe=({state:n,dispatch:e})=>ire(n,e,!0);function rre(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of HB(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const iMe=({state:n,dispatch:e})=>rre(n,e,!1),rMe=({state:n,dispatch:e})=>rre(n,e,!0),oMe=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(HB(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=Hx(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function sMe(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=th(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(wo.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const kW=ore(!1),aMe=ore(!0);function ore(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&sMe(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let d=new QB(e,{simulateBreak:o,simulateDoubleBreak:!!c}),p=rK(d,o);for(p==null&&(p=$x(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let v=["",D5(e,p)];return c&&v.push(D5(e,d.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:fs.of(v)},range:Bn.cursor(o+1+v[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function lK(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:Bn.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const lMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new QB(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=lK(n,(o,s,a)=>{let c=rK(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let d=/^\s*/.exec(o.text)[0],p=D5(n,c);(d!=p||a.from<o.from+d.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+d.length,insert:p}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},uMe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(lK(n,(t,i)=>{i.push({from:t.from,insert:n.facet(iK)})}),{userEvent:"input.indent"})),!0),cMe=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(lK(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=$x(r,n.tabSize),s=0,a=D5(n,Math.max(0,o-i6(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),AMe=n=>(n.setTabFocusMode(),!0),hMe=[{key:"Ctrl-b",run:Uie,shift:Qie,preventDefault:!0},{key:"Ctrl-f",run:Lie,shift:qie},{key:"Ctrl-p",run:zie,shift:$ie},{key:"Ctrl-n",run:jie,shift:Hie},{key:"Ctrl-a",run:O5e,shift:j5e},{key:"Ctrl-e",run:I5e,shift:N5e},{key:"Ctrl-d",run:ere},{key:"Ctrl-h",run:JR},{key:"Ctrl-k",run:H5e},{key:"Ctrl-Alt-h",run:nre},{key:"Ctrl-o",run:J5e},{key:"Ctrl-t",run:eMe},{key:"Ctrl-v",run:XR}],dMe=[{key:"ArrowLeft",run:Uie,shift:Qie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:C5e,shift:D5e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:E5e,shift:F5e,preventDefault:!0},{key:"ArrowRight",run:Lie,shift:qie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:b5e,shift:R5e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:B5e,shift:z5e,preventDefault:!0},{key:"ArrowUp",run:zie,shift:$ie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:BW,shift:IW},{mac:"Ctrl-ArrowUp",run:wW,shift:SW},{key:"ArrowDown",run:jie,shift:Hie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:OW,shift:TW},{mac:"Ctrl-ArrowDown",run:XR,shift:EW},{key:"PageUp",run:wW,shift:SW},{key:"PageDown",run:XR,shift:EW},{key:"Home",run:S5e,shift:K5e,preventDefault:!0},{key:"Mod-Home",run:BW,shift:IW},{key:"End",run:w5e,shift:L5e,preventDefault:!0},{key:"Mod-End",run:OW,shift:TW},{key:"Enter",run:kW,shift:kW},{key:"Mod-a",run:G5e},{key:"Backspace",run:JR,shift:JR,preventDefault:!0},{key:"Delete",run:ere,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:nre,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:$5e,preventDefault:!0},{mac:"Mod-Backspace",run:Z5e,preventDefault:!0},{mac:"Mod-Delete",run:X5e,preventDefault:!0}].concat(hMe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),fMe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:x5e,shift:P5e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:M5e,shift:U5e},{key:"Alt-ArrowUp",run:tMe},{key:"Shift-Alt-ArrowUp",run:iMe},{key:"Alt-ArrowDown",run:nMe},{key:"Shift-Alt-ArrowDown",run:rMe},{key:"Mod-Alt-ArrowUp",run:q5e},{key:"Mod-Alt-ArrowDown",run:Y5e},{key:"Escape",run:V5e},{key:"Mod-Enter",run:aMe},{key:"Alt-l",mac:"Ctrl-l",run:W5e},{key:"Mod-i",run:Q5e,preventDefault:!0},{key:"Mod-[",run:cMe},{key:"Mod-]",run:uMe},{key:"Mod-Alt-\\",run:lMe},{key:"Shift-Mod-k",run:oMe},{key:"Shift-Mod-\\",run:k5e},{key:"Mod-/",run:t5e},{key:"Alt-A",run:i5e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:AMe}].concat(dMe),DW=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Dx{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(DW(a)):DW,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Od(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=PL(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ug(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Dx.prototype[Symbol.iterator]=function(){return this});const sre={from:-1,to:-1,match:/.*/.exec("")},uK="gm"+(/x/.unicode==null?"":"u");class are{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=sre,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new lre(e,t,i,r,o);this.re=new RegExp(t,uK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=a6(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=a6(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const O7=new WeakMap;class ix{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=O7.get(e);if(!r||r.from>=i||r.to<=t){let a=new ix(t,e.sliceString(t,i));return O7.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),O7.set(e,new ix(s,o)),new ix(t,o.slice(t-s,i-s))}}class lre{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=sre,this.matchPos=a6(e,r),this.re=new RegExp(t,uK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=ix.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=a6(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ix.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(are.prototype[Symbol.iterator]=lre.prototype[Symbol.iterator]=function(){return this});function mMe(n){try{return new RegExp(n,uK),!0}catch{return!1}}function a6(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function eP(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=ba("input",{class:"cm-textfield",name:"line",value:e}),i=ba("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:U4.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},ba("label",n.state.phrase("Go to line"),": ",t)," ",ba("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),ba("button",{name:"close",onclick:()=>{n.dispatch({effects:U4.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,d,p,v]=o,M=p?+p.slice(1):0,E=d?+d:a.number;if(d&&v){let z=E/100;c&&(z=z*(c=="-"?-1:1)+a.number/s.doc.lines),E=Math.round(s.doc.lines*z)}else d&&c&&(E=E*(c=="-"?-1:1)+a.number);let P=s.doc.line(Math.max(1,Math.min(s.doc.lines,E))),U=Bn.cursor(P.from+Math.max(0,Math.min(M,P.length)));n.dispatch({effects:[U4.of(!1),Bi.scrollIntoView(U.from,{y:"center"})],selection:U}),n.focus()}return{dom:i}}const U4=io.define(),RW=Cc.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(U4)&&(n=t.value);return n},provide:n=>I5.from(n,e=>e?eP:null)}),pMe=n=>{let e=O5(n,eP);if(!e){let t=[U4.of(!0)];n.state.field(RW,!1)==null&&t.push(io.appendConfig.of([RW,gMe])),n.dispatch({effects:t}),e=O5(n,eP)}return e&&e.dom.querySelector("input").select(),!0},gMe=Bi.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),yMe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},vMe=Ii.define({combine(n){return $p(n,yMe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function CMe(n){return[wMe,MMe]}const bMe=_r.mark({class:"cm-selectionMatch"}),_Me=_r.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function PW(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Al.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Al.Word)}function xMe(n,e,t,i){return n(e.sliceDoc(t,t+1))==Al.Word&&n(e.sliceDoc(i-1,i))==Al.Word}const MMe=_u.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(vMe),{state:t}=n,i=t.selection;if(i.ranges.length>1)return _r.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return _r.none;let c=t.wordAt(r.head);if(!c)return _r.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return _r.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(PW(s,t,r.from,r.to)&&xMe(s,t,r.from,r.to)))return _r.none}else if(o=t.sliceDoc(r.from,r.to),!o)return _r.none}let a=[];for(let c of n.visibleRanges){let d=new Dx(t.doc,o,c.from,c.to);for(;!d.next().done;){let{from:p,to:v}=d.value;if((!s||PW(s,t,p,v))&&(r.empty&&p<=r.from&&v>=r.to?a.push(_Me.range(p,v)):(p>=r.to||v<=r.from)&&a.push(bMe.range(p,v)),a.length>e.maxMatches))return _r.none}}return _r.set(a)}},{decorations:n=>n.decorations}),wMe=Bi.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),SMe=({state:n,dispatch:e})=>{let{selection:t}=n,i=Bn.create(t.ranges.map(r=>n.wordAt(r.head)||Bn.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function EMe(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new Dx(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Dx(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const BMe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return SMe({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=EMe(n,i);return r?(e(n.update({selection:n.selection.addRange(Bn.range(r.from,r.to),!1),effects:Bi.scrollIntoView(r.to)})),!0):!1},Zx=Ii.define({combine(n){return $p(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new zMe(e),scrollToMatch:e=>Bi.scrollIntoView(e)})}});class ure{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||mMe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new kMe(this):new IMe(this)}getCursor(e,t=0,i){let r=e.doc?e:cs.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?T2(this,r,t,i):I2(this,r,t,i)}}class cre{constructor(e){this.spec=e}}function I2(n,e,t,i){return new Dx(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?OMe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function OMe(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(l6(r,t-o))!=Al.Word||e(u6(r,t-o))!=Al.Word)&&(e(u6(r,i-o))!=Al.Word||e(l6(r,i-o))!=Al.Word))}class IMe extends cre{constructor(e){super(e)}nextMatch(e,t,i){let r=I2(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=I2(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=I2(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=I2(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=I2(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function T2(n,e,t,i){return new are(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?TMe(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function l6(n,e){return n.slice(yc(n,e,!1),e)}function u6(n,e){return n.slice(e,yc(n,e))}function TMe(n){return(e,t,i)=>!i[0].length||(n(l6(i.input,i.index))!=Al.Word||n(u6(i.input,i.index))!=Al.Word)&&(n(u6(i.input,i.index+i[0].length))!=Al.Word||n(l6(i.input,i.index+i[0].length))!=Al.Word)}class kMe extends cre{nextMatch(e,t,i){let r=T2(this.spec,e,i,e.doc.length).next();return r.done&&(r=T2(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=T2(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=T2(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=T2(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const R5=io.define(),cK=io.define(),kv=Cc.define({create(n){return new I7(tP(n).create(),null)},update(n,e){for(let t of e.effects)t.is(R5)?n=new I7(t.value.create(),n.panel):t.is(cK)&&(n=new I7(n.query,t.value?AK:null));return n},provide:n=>I5.from(n,e=>e.panel)});class I7{constructor(e,t){this.query=e,this.panel=t}}const DMe=_r.mark({class:"cm-searchMatch"}),RMe=_r.mark({class:"cm-searchMatch cm-searchMatch-selected"}),PMe=_u.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(kv))}update(n){let e=n.state.field(kv);(e!=n.startState.field(kv)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return _r.none;let{view:t}=this,i=new q1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(d,p)=>{let v=t.state.selection.ranges.some(M=>M.from==d&&M.to==p);i.add(d,p,v?RMe:DMe)})}return i.finish()}},{decorations:n=>n.decorations});function KM(n){return e=>{let t=e.state.field(kv,!1);return t&&t.query.spec.valid?n(e,t):dre(e)}}const c6=KM((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=Bn.single(i.from,i.to),o=n.state.facet(Zx);return n.dispatch({selection:r,effects:[hK(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),hre(n),!0}),A6=KM((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=Bn.single(r.from,r.to),s=n.state.facet(Zx);return n.dispatch({selection:o,effects:[hK(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),hre(n),!0}),UMe=KM((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Bn.create(t.map(i=>Bn.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),LMe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new Dx(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(Bn.range(a.value.from,a.value.to))}return e(n.update({selection:Bn.create(o,s),userEvent:"select.search.matches"})),!0},UW=KM((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,d,p=[];s.from==i&&s.to==r&&(d=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:d}),s=e.nextMatch(t,s.from,s.to),p.push(Bi.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let v=n.state.changes(a);return s&&(c=Bn.single(s.from,s.to).map(v),p.push(hK(n,s)),p.push(t.facet(Zx).scrollToMatch(c.main,n))),n.dispatch({changes:v,selection:c,effects:p,userEvent:"input.replace"}),!0}),KMe=KM((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Bi.announce.of(i),userEvent:"input.replace.all"}),!0});function AK(n){return n.state.facet(Zx).createPanel(n)}function tP(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let d=n.facet(Zx);return new ure({search:((t=e?.literal)!==null&&t!==void 0?t:d.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:d.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:d.wholeWord})}function Are(n){let e=O5(n,AK);return e&&e.dom.querySelector("[main-field]")}function hre(n){let e=Are(n);e&&e==n.root.activeElement&&e.select()}const dre=n=>{let e=n.state.field(kv,!1);if(e&&e.panel){let t=Are(n);if(t&&t!=n.root.activeElement){let i=tP(n.state,e.query.spec);i.valid&&n.dispatch({effects:R5.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[cK.of(!0),e?R5.of(tP(n.state,e.query.spec)):io.appendConfig.of(NMe)]});return!0},fre=n=>{let e=n.state.field(kv,!1);if(!e||!e.panel)return!1;let t=O5(n,AK);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:cK.of(!1)}),!0},FMe=[{key:"Mod-f",run:dre,scope:"editor search-panel"},{key:"F3",run:c6,shift:A6,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:c6,shift:A6,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:fre,scope:"editor search-panel"},{key:"Mod-Shift-l",run:LMe},{key:"Mod-Alt-g",run:pMe},{key:"Mod-d",run:BMe,preventDefault:!0}];class zMe{constructor(e){this.view=e;let t=this.query=e.state.field(kv).query.spec;this.commit=this.commit.bind(this),this.searchField=ba("input",{value:t.search,placeholder:df(e,"Find"),"aria-label":df(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ba("input",{value:t.replace,placeholder:df(e,"Replace"),"aria-label":df(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ba("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ba("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ba("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return ba("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=ba("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>c6(e),[df(e,"next")]),i("prev",()=>A6(e),[df(e,"previous")]),i("select",()=>UMe(e),[df(e,"all")]),ba("label",null,[this.caseField,df(e,"match case")]),ba("label",null,[this.reField,df(e,"regexp")]),ba("label",null,[this.wordField,df(e,"by word")]),...e.state.readOnly?[]:[ba("br"),this.replaceField,i("replace",()=>UW(e),[df(e,"replace")]),i("replaceAll",()=>KMe(e),[df(e,"replace all")])],ba("button",{name:"close",onclick:()=>fre(e),"aria-label":df(e,"close"),type:"button"},[""])])}commit(){let e=new ure({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:R5.of(e)}))}keydown(e){Vxe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?A6:c6)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),UW(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(R5)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Zx).top}}function df(n,e){return n.state.phrase(e)}const Vw=30,$w=/[\s\.,:;?!]/;function hK(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-Vw),s=Math.min(r,t+Vw),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<Vw;c++)if(!$w.test(a[c+1])&&$w.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-Vw;c--)if(!$w.test(a[c-1])&&$w.test(a[c])){a=a.slice(0,c);break}}return Bi.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const jMe=Bi.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),NMe=[kv,i_.low(PMe),jMe];class mre{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=th(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(pre(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function LW(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function GMe(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=LW(e)+LW(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function WMe(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:GMe(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class KW{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Tb(n){return n.selection.main.from}function pre(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const gre=Z1.define();function QMe(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:Bn.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const FW=new WeakMap;function qMe(n){if(!Array.isArray(n))return n;let e=FW.get(n);return e||FW.set(n,e=WMe(n)),e}const h6=io.define(),P5=io.define();class YMe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Od(e,t),r=ug(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(Od(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let Z=Od(e,0),X=ug(Z),re=X==e.length?0:-100;if(Z!=t[0])if(Z==i[0])re+=-200;else return null;return this.ret(re,[0,X])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,d=0;if(a<0){for(let Z=0,X=Math.min(e.length,200);Z<X&&d<c;){let re=Od(e,Z);(re==t[d]||re==i[d])&&(r[d++]=Z),Z+=ug(re)}if(d<c)return null}let p=0,v=0,M=!1,E=0,P=-1,U=-1,z=/[a-z]/.test(e),V=!0;for(let Z=0,X=Math.min(e.length,200),re=0;Z<X&&v<c;){let ee=Od(e,Z);a<0&&(p<c&&ee==t[p]&&(o[p++]=Z),E<c&&(ee==t[E]||ee==i[E]?(E==0&&(P=Z),U=Z+1,E++):E=0));let ne,q=ee<255?ee>=48&&ee<=57||ee>=97&&ee<=122?2:ee>=65&&ee<=90?1:0:(ne=PL(ee))!=ne.toLowerCase()?1:ne!=ne.toUpperCase()?2:0;(!Z||q==1&&z||re==0&&q!=0)&&(t[v]==ee||i[v]==ee&&(M=!0)?s[v++]=Z:s.length&&(V=!1)),re=q,Z+=ug(ee)}return v==c&&s[0]==0&&V?this.result(-100+(M?-200:0),s,e):E==c&&P==0?this.ret(-200-e.length+(U==e.length?0:-100),[0,U]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):E==c?this.ret(-900-e.length,[P,U]):v==c?this.result(-100+(M?-200:0)+-700+(V?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?ug(Od(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class VMe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Zc=Ii.define({combine(n){return $p(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:$Me,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>zW(e(i),t(i)),optionClass:(e,t)=>i=>zW(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function zW(n,e){return n?e?n+" "+e:n:e}function $Me(n,e,t,i,r,o){let s=n.textDirection==Ma.RTL,a=s,c=!1,d="top",p,v,M=e.left-r.left,E=r.right-e.right,P=i.right-i.left,U=i.bottom-i.top;if(a&&M<Math.min(P,E)?a=!1:!a&&E<Math.min(P,M)&&(a=!0),P<=(a?M:E))p=Math.max(r.top,Math.min(t.top,r.bottom-U))-e.top,v=Math.min(400,a?M:E);else{c=!0,v=Math.min(400,(s?e.right:r.right-e.left)-30);let Z=r.bottom-e.bottom;Z>=U||Z>e.top?p=t.bottom-e.top:(d="bottom",p=e.bottom-t.top)}let z=(e.bottom-e.top)/o.offsetHeight,V=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${p/z}px; max-width: ${v/V}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function HMe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let d=0;d<o.length;){let p=o[d++],v=o[d++];p>c&&s.appendChild(document.createTextNode(a.slice(c,p)));let M=s.appendChild(document.createElement("span"));M.appendChild(document.createTextNode(a.slice(p,v))),M.className="cm-completionMatchedText",c=v}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function T7(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class ZMe{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet(Zc);this.optionContent=HMe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=T7(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:d}=e.state.field(t).open;for(let p=c.target,v;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(v=/-(\d+)$/.exec(p.id))&&+v[1]<d.length){this.applyCompletion(e,d[+v[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Zc).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:P5.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=T7(o.length,s,e.state.facet(Zc).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=T7(t.options.length,t.selected,this.view.state.facet(Zc).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,r)}).catch(a=>Lh(this.view.state,a,"completion info")):(this.addInfoPane(s,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&JMe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Zc).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:d}=a;if(d){let M=typeof d=="string"?d:d.name;if(M!=o&&(s>i.from||i.from==0))if(o=M,typeof d!="string"&&d.header)r.appendChild(d.header(d));else{let E=r.appendChild(document.createElement("completion-section"));E.textContent=M}}const p=r.appendChild(document.createElement("li"));p.id=t+"-"+s,p.setAttribute("role","option");let v=this.optionClass(a);v&&(p.className=v);for(let M of this.optionContent){let E=M(a,this.view.state,this.view,c);E&&p.appendChild(E)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function XMe(n,e){return t=>new ZMe(t,n,e)}function JMe(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function jW(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function ewe(n,e){let t=[],i=null,r=null,o=p=>{t.push(p);let{section:v}=p.completion;if(v){i||(i=[]);let M=typeof v=="string"?v:v.name;i.some(E=>E.name==M)||i.push(typeof v=="string"?{name:M}:v)}},s=e.facet(Zc);for(let p of n)if(p.hasResult()){let v=p.result.getMatch;if(p.result.filter===!1)for(let M of p.result.options)o(new KW(M,p.source,v?v(M):[],1e9-t.length));else{let M=e.sliceDoc(p.from,p.to),E,P=s.filterStrict?new VMe(M):new YMe(M);for(let U of p.result.options)if(E=P.match(U.label)){let z=U.displayLabel?v?v(U,E.matched):[]:E.matched,V=E.score+(U.boost||0);if(o(new KW(U,p.source,z,V)),typeof U.section=="object"&&U.section.rank==="dynamic"){let{name:Z}=U.section;r||(r=Object.create(null)),r[Z]=Math.max(V,r[Z]||-1e9)}}}}if(i){let p=Object.create(null),v=0,M=(E,P)=>(E.rank==="dynamic"&&P.rank==="dynamic"?r[P.name]-r[E.name]:0)||(typeof E.rank=="number"?E.rank:1e9)-(typeof P.rank=="number"?P.rank:1e9)||(E.name<P.name?-1:1);for(let E of i.sort(M))v-=1e5,p[E.name]=v;for(let E of t){let{section:P}=E.completion;P&&(E.score+=p[typeof P=="string"?P:P.name])}}let a=[],c=null,d=s.compareCompletions;for(let p of t.sort((v,M)=>M.score-v.score||d(v.completion,M.completion))){let v=p.completion;!c||c.label!=v.label||c.detail!=v.detail||c.type!=null&&v.type!=null&&c.type!=v.type||c.apply!=v.apply||c.boost!=v.boost?a.push(p):jW(p.completion)>jW(c)&&(a[a.length-1]=p),c=p.completion}return a}class K2{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new K2(this.options,NW(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(d=>d.isPending))return r.setDisabled();let a=ewe(e,t);if(!a.length)return r&&e.some(d=>d.isPending)?r.setDisabled():null;let c=t.facet(Zc).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let d=r.options[r.selected].completion;for(let p=0;p<a.length;p++)if(a[p].completion==d){c=p;break}}return new K2(a,NW(i,c),{pos:e.reduce((d,p)=>p.hasResult()?Math.min(d,p.from):d,1e8),create:swe,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new K2(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new K2(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class d6{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new d6(rwe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Zc),o=(i.override||t.languageDataAt("autocomplete",Tb(t)).map(qMe)).map(c=>(this.active.find(p=>p.source==c)||new Em(c,this.active.some(p=>p.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,d)=>c==this.active[d])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(dK));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!twe(o,this.active)||a?s=K2.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new Em(c.source,0):c));for(let c of e.effects)c.is(vre)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new d6(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?nwe:iwe}}function twe(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const nwe={"aria-autocomplete":"list"},iwe={};function NW(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const rwe=[];function yre(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(gre);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Em{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=yre(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new Em(r.source,0)),i&4&&r.state==0&&(r=new Em(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(h6))r=new Em(r.source,1,o.value);else if(o.is(P5))r=new Em(r.source,0);else if(o.is(dK))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Tb(e.state))}}class rx extends Em{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Tb(e.state);if(a>s||!r||t&2&&(Tb(e.startState)==this.from||a<this.limit))return new Em(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return owe(r.validFor,e.state,o,s)?new rx(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new mre(e.state,a,!1)))?new rx(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:Tb(e.state)):new Em(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new rx(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Em(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function owe(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):pre(n,!0).test(r)}const dK=io.define({map(n,e){return n.map(t=>t.map(e))}}),vre=io.define(),Id=Cc.define({create(){return d6.start()},update(n,e){return n.update(e)},provide:n=>[GB.from(n,e=>e.tooltip),Bi.contentAttributes.from(n,e=>e.attrs)]});function fK(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Id).active.find(r=>r.source==e.source);return i instanceof rx?(typeof t=="string"?n.dispatch({...QMe(n.state,t,i.from,i.to),annotations:gre.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const swe=XMe(Id,fK);function Hw(n,e="option"){return t=>{let i=t.state.field(Id,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Zc).interactionDelay)return!1;let r=1,o;e=="page"&&(o=eie(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:vre.of(a)}),!0}}const awe=n=>{let e=n.state.field(Id,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Zc).interactionDelay?!1:fK(n,e.open.options[e.open.selected])},k7=n=>n.state.field(Id,!1)?(n.dispatch({effects:h6.of(!0)}),!0):!1,lwe=n=>{let e=n.state.field(Id,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:P5.of(null)}),!0)};class uwe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const cwe=50,Awe=1e3,hwe=_u.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Id).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Id),t=n.state.facet(Zc);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Id)==e)return;let i=n.transactions.some(o=>{let s=yre(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>cwe&&Date.now()-s.time>Awe){for(let a of s.context.abortListeners)try{a()}catch(c){Lh(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(h6)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Id);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zc).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Tb(e),i=new mre(e,t,n.explicit,this.view),r=new uwe(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:P5.of(null)}),Lh(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zc).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Zc),i=this.view.state.field(Id);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=Tb(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),d=new rx(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let p of o.updates)d=d.update(p,t);if(d.hasResult()){e.push(d);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new Em(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:dK.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Id,!1);if(e&&e.tooltip&&this.view.state.facet(Zc).closeOnBlur){let t=e.open&&eie(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:P5.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:h6.of(!1)}),20),this.composing=0}}}),dwe=typeof navigator=="object"&&/Win/.test(navigator.platform),fwe=i_.highest(Bi.domEventHandlers({keydown(n,e){let t=e.state.field(Id,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(dwe&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&fK(e,i),!1}})),mwe=Bi.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),U5={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},yb=io.define({map(n,e){let t=e.mapPos(n,-1,Rh.TrackAfter);return t??void 0}}),mK=new class extends Uv{};mK.startSide=1;mK.endSide=-1;const Cre=Cc.define({create(){return vo.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(yb)&&(n=n.update({add:[mK.range(t.value,t.value+1)]}));return n}});function pwe(){return[ywe,Cre]}const D7="()[]{}<>";function bre(n){for(let e=0;e<D7.length;e+=2)if(D7.charCodeAt(e)==n)return D7.charAt(e+1);return PL(n<128?n:n+1)}function _re(n,e){return n.languageDataAt("closeBrackets",e)[0]||U5}const gwe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ywe=Bi.inputHandler.of((n,e,t,i)=>{if((gwe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&ug(Od(i,0))==1||e!=r.from||t!=r.to)return!1;let o=bwe(n.state,i);return o?(n.dispatch(o),!0):!1}),vwe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=_re(n,n.selection.main.head).brackets||U5.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=_we(n.doc,s.head);for(let c of i)if(c==a&&ZB(n.doc,s.head)==bre(Od(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:Bn.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},Cwe=[{key:"Backspace",run:vwe}];function bwe(n,e){let t=_re(n,n.selection.main.head),i=t.brackets||U5.brackets;for(let r of i){let o=bre(Od(r,0));if(e==r)return o==r?wwe(n,r,i.indexOf(r+r+r)>-1,t):xwe(n,r,o,t.before||U5.before);if(e==o&&xre(n,n.selection.main.from))return Mwe(n,r,o)}return null}function xre(n,e){let t=!1;return n.field(Cre).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function ZB(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ug(Od(t,0)))}function _we(n,e){let t=n.sliceString(e-2,e);return ug(Od(t,0))==t.length?t:t.slice(1)}function xwe(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:yb.of(s.to+e.length),range:Bn.range(s.anchor+e.length,s.head+e.length)};let a=ZB(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:yb.of(s.head+e.length),range:Bn.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Mwe(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&ZB(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:Bn.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function wwe(n,e,t,i){let r=i.stringPrefixes||U5.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:yb.of(a.to+e.length),range:Bn.range(a.anchor+e.length,a.head+e.length)};let c=a.head,d=ZB(n.doc,c),p;if(d==e){if(GW(n,c))return{changes:{insert:e+e,from:c},effects:yb.of(c+e.length),range:Bn.cursor(c+e.length)};if(xre(n,c)){let M=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+M.length,insert:M},range:Bn.cursor(c+M.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(p=WW(n,c-2*e.length,r))>-1&&GW(n,p))return{changes:{insert:e+e+e+e,from:c},effects:yb.of(c+e.length),range:Bn.cursor(c+e.length)};if(n.charCategorizer(c)(d)!=Al.Word&&WW(n,c,r)>-1&&!Swe(n,c,e,r))return{changes:{insert:e+e,from:c},effects:yb.of(c+e.length),range:Bn.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function GW(n,e){let t=th(n).resolveInner(e+1);return t.parent&&t.from==e}function Swe(n,e,t,i){let r=th(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let p=r.firstChild;for(;p&&p.from==r.from&&p.to-p.from>t.length+c;){if(n.sliceDoc(p.to-t.length,p.to)==t)return!1;p=p.firstChild}return!0}let d=r.to==e&&r.parent;if(!d)break;r=d}return!1}function WW(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Al.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=Al.Word)return o}return-1}function Ewe(n={}){return[fwe,Id,Zc.of(n),hwe,Bwe,mwe]}const Mre=[{key:"Ctrl-Space",run:k7},{mac:"Alt-`",run:k7},{mac:"Alt-i",run:k7},{key:"Escape",run:lwe},{key:"ArrowDown",run:Hw(!0)},{key:"ArrowUp",run:Hw(!1)},{key:"PageDown",run:Hw(!0,"page")},{key:"PageUp",run:Hw(!1,"page")},{key:"Enter",run:awe}],Bwe=i_.highest(ZL.computeN([Zc],n=>n.facet(Zc).defaultKeymap?[Mre]:[]));class QW{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class ab{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(vg).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((E,P)=>E.from-P.from||E.to-P.to),s=new q1,a=[],c=0,d=i.doc.iter(),p=0,v=i.doc.length;for(let E=0;;){let P=E==o.length?null:o[E];if(!P&&!a.length)break;let U,z;if(a.length)U=c,z=a.reduce((X,re)=>Math.min(X,re.to),P&&P.from>U?P.from:1e8);else{if(U=P.from,U>v)break;z=P.to,a.push(P),E++}for(;E<o.length;){let X=o[E];if(X.from==U&&(X.to>X.from||X.to==U))a.push(X),E++,z=Math.min(X.to,z);else{z=Math.min(X.from,z);break}}z=Math.min(z,v);let V=!1;if(a.some(X=>X.from==U&&(X.to==z||z==v))&&(V=U==z,!V&&z-U<10)){let X=U-(p+d.value.length);X>0&&(d.next(X),p=U);for(let re=U;;){if(re>=z){V=!0;break}if(!d.lineBreak&&p+d.value.length>re)break;re=p+d.value.length,p+=d.value.length,d.next()}}let Z=Tre(a);if(V)s.add(U,U,_r.widget({widget:new Kwe(Z),diagnostics:a.slice()}));else{let X=a.reduce((re,ee)=>ee.markClass?re+" "+ee.markClass:re,"");s.add(U,z,_r.mark({class:"cm-lintRange cm-lintRange-"+Z+X,diagnostics:a.slice(),inclusiveEnd:a.some(re=>re.to>z)}))}if(c=z,c==v)break;for(let X=0;X<a.length;X++)a[X].to<=c&&a.splice(X--,1)}let M=s.finish();return new ab(M,t,Rx(M))}}function Rx(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new QW(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new QW(i.from,o,i.diagnostic)}}),i}function wre(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(vg).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(XB))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function Sre(n,e){return n.field(Sf,!1)?e:e.concat(io.appendConfig.of(Rre))}function Owe(n,e){return{effects:Sre(n,[XB.of(e)])}}const XB=io.define(),pK=io.define(),Ere=io.define(),Sf=Cc.define({create(){return new ab(_r.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=Rx(t,n.selected.diagnostic,o)||Rx(t,null,o)}!t.size&&r&&e.state.facet(vg).autoPanel&&(r=null),n=new ab(t,r,i)}for(let t of e.effects)if(t.is(XB)){let i=e.state.facet(vg).autoPanel?t.value.length?L5.open:null:n.panel;n=ab.init(t.value,i,e.state)}else t.is(pK)?n=new ab(n.diagnostics,t.value?L5.open:null,n.selected):t.is(Ere)&&(n=new ab(n.diagnostics,n.panel,t.value));return n},provide:n=>[I5.from(n,e=>e.panel),Bi.decorations.from(n,e=>e.diagnostics)]}),Iwe=_r.mark({class:"cm-lintRange cm-lintRange-active"});function Twe(n,e,t){let{diagnostics:i}=n.state.field(Sf),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,d,{spec:p})=>{if(e>=c&&e<=d&&(c==d||(e>c||t>0)&&(e<d||t<0)))return r=p.diagnostics,o=c,s=d,!1});let a=n.state.facet(vg).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:Bre(n,r)}}}:null}function Bre(n,e){return ba("ul",{class:"cm-tooltip-lint"},e.map(t=>Ire(n,t,!1)))}const kwe=n=>{let e=n.state.field(Sf,!1);(!e||!e.panel)&&n.dispatch({effects:Sre(n.state,[pK.of(!0)])});let t=O5(n,L5.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},qW=n=>{let e=n.state.field(Sf,!1);return!e||!e.panel?!1:(n.dispatch({effects:pK.of(!1)}),!0)},Dwe=n=>{let e=n.state.field(Sf,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Rwe=[{key:"Mod-Shift-m",run:kwe,preventDefault:!0},{key:"F8",run:Dwe}],Pwe=_u.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(vg);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(vg);t.length&&Uwe(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(Owe(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{Lh(this.view.state,i)})}}update(n){let e=n.state.facet(vg);(n.docChanged||e!=n.startState.facet(vg)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Uwe(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const vg=Ii.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...$p(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:YW,tooltipFilter:YW,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function YW(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function Lwe(n,e={}){return[vg.of({source:n,config:e}),Pwe,Rre]}function Ore(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Ire(n,e,t){var i;let r=t?Ore(e.actions):[];return ba("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ba("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=E=>{if(E.preventDefault(),a)return;a=!0;let P=Rx(n.state.field(Sf).diagnostics,e);P&&o.apply(n,P.from,P.to)},{name:d}=o,p=r[s]?d.indexOf(r[s]):-1,v=p<0?d:[d.slice(0,p),ba("u",d.slice(p,p+1)),d.slice(p+1)],M=o.markClass?" "+o.markClass:"";return ba("button",{type:"button",class:"cm-diagnosticAction"+M,onclick:c,onmousedown:c,"aria-label":` Action: ${d}${p<0?"":` (access key "${r[s]})"`}.`},v)}),e.source&&ba("div",{class:"cm-diagnosticSource"},e.source))}class Kwe extends X1{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ba("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class VW{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Ire(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class L5{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)qW(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=Ore(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=Rx(this.view.state.field(Sf).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=ba("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=ba("div",{class:"cm-panel-lint"},this.list,ba("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>qW(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Sf).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Sf),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:d})=>{for(let p of d.diagnostics){if(s.has(p))continue;s.add(p);let v=-1,M;for(let E=i;E<this.items.length;E++)if(this.items[E].diagnostic==p){v=E;break}v<0?(M=new VW(this.view,p),this.items.splice(i,0,M),r=!0):(M=this.items[v],v>i&&(this.items.splice(i,v-i),r=!0)),t&&M.diagnostic==t.diagnostic?M.dom.hasAttribute("aria-selected")||(M.dom.setAttribute("aria-selected","true"),o=M):M.dom.hasAttribute("aria-selected")&&M.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new VW(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let d=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/d:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Sf),i=Rx(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ere.of(i)})}static open(e){return new L5(e)}}function jS(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Zw(n){return jS(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Fwe=Bi.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Zw("#d11")},".cm-lintRange-warning":{backgroundImage:Zw("orange")},".cm-lintRange-info":{backgroundImage:Zw("#999")},".cm-lintRange-hint":{backgroundImage:Zw("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function zwe(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Tre(n){let e="hint",t=1;for(let i of n){let r=zwe(i.severity);r>t&&(t=r,e=i.severity)}return e}class kre extends Ig{constructor(e){super(),this.diagnostics=e,this.severity=Tre(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(JB).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>Nwe(e,t,i)),t}}function jwe(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(Dre)&&n.dispatch({effects:gK.of(null)})}};window.addEventListener("mousemove",t)}function Nwe(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:gK.of({pos:s.from,above:!1,clip:!1,create(){return{dom:Bre(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,jwe(n,e)}let{hoverTime:r}=n.state.facet(JB),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function Gwe(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new kre(t[r]).range(+r));return vo.of(i,!0)}const Wwe=nie({class:"cm-gutter-lint",markers:n=>n.state.field(nP),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(nP).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new kre(i):null}}),nP=Cc.define({create(){return vo.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(JB).markerFilter;for(let i of e.effects)if(i.is(XB)){let r=i.value;t&&(r=t(r||[],e.state)),n=Gwe(e.state.doc,r.slice(0))}return n}}),gK=io.define(),Dre=Cc.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=wre(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(gK)?i.value:t,n)},provide:n=>GB.from(n)}),Qwe=Bi.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:jS('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:jS('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:jS('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Rre=[Sf,Bi.decorations.compute([Sf],n=>{let{selected:e,panel:t}=n.field(Sf);return!e||!t||e.from==e.to?_r.none:_r.set([Iwe.range(e.from,e.to)])}),R3e(Twe,{hideOn:wre}),Fwe],JB=Ii.define({combine(n){return $p(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function qwe(n={}){return[JB.of(n),nP,Wwe,Qwe,Dre]}const Ywe=[W3e(),Y3e(),A3e(),c5e(),L4e(),e3e(),o3e(),cs.allowMultipleSelections.of(!0),x4e(),wie(j4e,{fallback:!0}),V4e(),pwe(),Ewe(),x3e(),S3e(),g3e(),CMe(),ZL.of([...Cwe,...fMe,...FMe,...v5e,...D4e,...Mre,...Rwe])];var $W={};class f6{constructor(e,t,i,r,o,s,a,c,d,p=0,v){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=d,this.lookAhead=p,this.parent=v}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new f6(e,[],t,i,i,0,[],0,r?new HW(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),d=c?this.stack[c-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let v=c?this.stack[c-1]:0,M=this.bufferBase+this.buffer.length-v;if(r<o.minRepeatTerm||e&131072){let E=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,d,E,M+4,!0)}if(e&262144)this.state=this.stack[c];else{let E=this.stack[c-3];this.state=o.getGoto(E,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,d)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new f6(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Vwe(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,d=this.stack.length-a*3;if(d>=0&&e.getGoto(this.stack[d],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new HW(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class HW{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Vwe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class m6{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new m6(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new m6(this.stack,this.pos,this.index)}}function Xw(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class NS{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ZW=new NS;class $we{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ZW,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=ZW,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class ox{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Hwe(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}ox.prototype.contextual=ox.prototype.fallback=ox.prototype.extend=!1;ox.prototype.fallback=ox.prototype.extend=!1;function Hwe(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let d=n[s+1];for(let E=s+3;E<d;E+=2)if((n[E+1]&a)>0){let P=n[E];if(c.allows(P)&&(e.token.value==-1||e.token.value==P||Zwe(P,e.token.value,r,o))){e.acceptToken(P);break}}let p=e.next,v=0,M=n[s+2];if(e.next<0&&M>v&&n[d+M*3-3]==65535){s=n[d+M*3-1];continue e}for(;v<M;){let E=v+M>>1,P=d+E+(E<<1),U=n[P],z=n[P+1]||65536;if(p<U)M=E;else if(p>=z)v=E+1;else{s=n[P+2],e.advance();continue e}}break}}function XW(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function Zwe(n,e,t,i){let r=XW(t,i,e);return r<0||XW(t,i,n)<r}const ff=typeof process<"u"&&$W&&/\bparse\b/.test($W.LOG);let R7=null;function JW(n,e,t){let i=n.cursor($c.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Xwe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?JW(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?JW(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof Yu){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(wo.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class Jwe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new NS)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let d=0;d<o.length;d++){if((1<<d&s)==0)continue;let p=o[d],v=this.tokens[d];if(!(i&&!p.fallback)&&((p.contextual||v.start!=e.pos||v.mask!=s||v.context!=a)&&(this.updateCachedToken(v,p,e),v.mask=s,v.context=a),v.lookAhead>v.end+25&&(c=Math.max(v.lookAhead,c)),v.value!=0)){let M=t;if(v.extended>-1&&(t=this.addActions(e,v.extended,v.end,t)),t=this.addActions(e,v.value,v.end,t),!p.extend&&(i=v,t>M))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new NS,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new NS,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let d=s.stateSlot(o,c?2:1);;d+=3){if(a[d]==65535)if(a[d+1]==1)d=T1(a,d+2);else{r==0&&a[d+1]==2&&(r=this.putAction(T1(a,d+2),t,i,r));break}a[d]==t&&(r=this.putAction(T1(a,d+1),t,i,r))}return r}}class eSe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new $we(t,r),this.tokens=new Jwe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[f6.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new Xwe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&nSe(r);if(s)return ff&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw ff&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return ff&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let d=i[c];if(a.sameState(d)||a.buffer.length>500&&d.buffer.length>500)if((a.score-d.score||a.buffer.length-d.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=ff?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let v=this.fragments.nodeAt(r);v;){let M=this.parser.nodeSet.types[v.type.id]==v.type?o.getGoto(e.state,v.type.id):-1;if(M>-1&&v.length&&(!d||(v.prop(wo.contextHash)||0)==p))return e.useNode(v,M),ff&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(v.type.id)})`),!0;if(!(v instanceof Yu)||v.children.length==0||v.positions[0]>0)break;let E=v.children[0];if(E instanceof Yu&&v.positions[0]==0)v=E;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),ff&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let d=0;d<c.length;){let p=c[d++],v=c[d++],M=c[d++],E=d==c.length||!i,P=E?e:e.split(),U=this.tokens.mainToken;if(P.apply(p,v,U?U.start:P.pos,M),ff&&console.log(s+this.stackID(P)+` (via ${(p&65536)==0?"shift":`reduce of ${o.getName(p&65535)}`} for ${o.getName(v)} @ ${r}${P==e?"":", split"})`),E)return!0;P.pos>r?t.push(P):i.push(P)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return eQ(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],d=t[(s<<1)+1],p=ff?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),ff&&console.log(p+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let v=a.split(),M=p;for(let E=0;v.forceReduce()&&E<10&&(ff&&console.log(M+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,i));E++)ff&&(M=this.stackID(v)+" -> ");for(let E of a.recoverByInsert(c))ff&&console.log(p+this.stackID(E)+" (via recover-insert)"),this.advanceFully(E,i);this.stream.end>a.pos?(d==a.pos&&(d++,c=0),a.recoverByDelete(c,d),ff&&console.log(p+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),eQ(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),Yu.build({buffer:m6.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(R7||(R7=new WeakMap)).get(e);return t||R7.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function eQ(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class tSe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class p6 extends uie{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,d){r[a].push([c,c.deserialize(String(d))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=wo[c]);for(let d=1;d<a.length;){let p=a[d++];if(p>=0)o(p,c,a[d++]);else{let v=a[d+-p];for(let M=-p;M>0;M--)o(a[d++],c,v);d++}}}this.nodeSet=new JL(t.map((a,c)=>Ld.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=oie;let s=Xw(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(tQ),this.states=Xw(e.states,Uint32Array),this.data=Xw(e.stateData),this.goto=Xw(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new ox(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new eSe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let d=o+(s>>1);o<d;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=T1(i,o+2)];else{if(i[o+1]==2)return T1(i,o+2);break}if(s==t||s==0)return T1(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=T1(this.data,o+2);else break;r=t(T1(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=T1(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(p6.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=tQ(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new tSe(e,i,r)}static deserialize(e){return new p6(e)}}function T1(n,e){return n[e]|n[e+1]<<16}function nSe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function tQ(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const iSe=cie({String:An.string,Number:An.number,"True False":An.bool,PropertyName:An.propertyName,Null:An.null,", :":An.separator,"[ ]":An.squareBracket,"{ }":An.brace}),rSe=p6.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[iSe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),oSe=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=sSe(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function sSe(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const aSe=t6.define({name:"json",parser:rSe.configure({props:[fie.add({Object:vW({except:/^\s*\}/}),Array:vW({except:/^\s*\]/})}),pie.add({"Object Array":w4e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function lSe(){return new d4e(aSe)}const uSe="#e5c07b",nQ="#e06c75",cSe="#56b6c2",ASe="#ffffff",GS="#abb2bf",iP="#7d8799",hSe="#61afef",dSe="#98c379",iQ="#d19a66",fSe="#c678dd",mSe="#21252b",rQ="#2c313a",oQ="#282c34",P7="#353a42",pSe="#3E4451",sQ="#528bff",gSe=Bi.theme({"&":{color:GS,backgroundColor:oQ},".cm-content":{caretColor:sQ},".cm-cursor, .cm-dropCursor":{borderLeftColor:sQ},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:pSe},".cm-panels":{backgroundColor:mSe,color:GS},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:oQ,color:iP,border:"none"},".cm-activeLineGutter":{backgroundColor:rQ},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:P7},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:P7,borderBottomColor:P7},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:rQ,color:GS}}},{dark:!0}),ySe=UM.define([{tag:An.keyword,color:fSe},{tag:[An.name,An.deleted,An.character,An.propertyName,An.macroName],color:nQ},{tag:[An.function(An.variableName),An.labelName],color:hSe},{tag:[An.color,An.constant(An.name),An.standard(An.name)],color:iQ},{tag:[An.definition(An.name),An.separator],color:GS},{tag:[An.typeName,An.className,An.number,An.changed,An.annotation,An.modifier,An.self,An.namespace],color:uSe},{tag:[An.operator,An.operatorKeyword,An.url,An.escape,An.regexp,An.link,An.special(An.string)],color:cSe},{tag:[An.meta,An.comment],color:iP},{tag:An.strong,fontWeight:"bold"},{tag:An.emphasis,fontStyle:"italic"},{tag:An.strikethrough,textDecoration:"line-through"},{tag:An.link,color:iP,textDecoration:"underline"},{tag:An.heading,fontWeight:"bold",color:nQ},{tag:[An.atom,An.bool,An.special(An.variableName)],color:iQ},{tag:[An.processingInstruction,An.string,An.inserted],color:dSe},{tag:An.invalid,color:ASe}]),vSe=[gSe,wie(ySe)];var WS={exports:{}},CSe=WS.exports,aQ;function bSe(){return aQ||(aQ=1,(function(n,e){(function(t,i){n.exports=i()})(CSe,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(ke,Te){return Te={exports:{}},ke(Te,Te.exports),Te.exports}var r=i(function(ke){function Te(){var He=0,Ct=1,vt=2,wt=3,Ft=4,Pt=5,nn=6,Kn=7,Wn=8,Mi=9,Fn=10,Ln=11,In=12,oi=13,Tn=14,je=15,$=16,j=17,Q=0,Ae=1,Me=2,Ne=3,We=4;function it(C,Ut){return 55296<=C.charCodeAt(Ut)&&C.charCodeAt(Ut)<=56319&&56320<=C.charCodeAt(Ut+1)&&C.charCodeAt(Ut+1)<=57343}function bt(C,Ut){Ut===void 0&&(Ut=0);var gn=C.charCodeAt(Ut);if(55296<=gn&&gn<=56319&&Ut<C.length-1){var bn=gn,_n=C.charCodeAt(Ut+1);return 56320<=_n&&_n<=57343?(bn-55296)*1024+(_n-56320)+65536:bn}if(56320<=gn&&gn<=57343&&Ut>=1){var bn=C.charCodeAt(Ut-1),_n=gn;return 55296<=bn&&bn<=56319?(bn-55296)*1024+(_n-56320)+65536:_n}return gn}function Ye(C,Ut,gn){var bn=[C].concat(Ut).concat([gn]),_n=bn[bn.length-2],Mt=gn,xi=bn.lastIndexOf(Tn);if(xi>1&&bn.slice(1,xi).every(function(Zn){return Zn==wt})&&[wt,oi,j].indexOf(C)==-1)return Me;var ji=bn.lastIndexOf(Ft);if(ji>0&&bn.slice(1,ji).every(function(Zn){return Zn==Ft})&&[In,Ft].indexOf(_n)==-1)return bn.filter(function(Zn){return Zn==Ft}).length%2==1?Ne:We;if(_n==He&&Mt==Ct)return Q;if(_n==vt||_n==He||_n==Ct)return Mt==Tn&&Ut.every(function(Zn){return Zn==wt})?Me:Ae;if(Mt==vt||Mt==He||Mt==Ct)return Ae;if(_n==nn&&(Mt==nn||Mt==Kn||Mt==Mi||Mt==Fn))return Q;if((_n==Mi||_n==Kn)&&(Mt==Kn||Mt==Wn))return Q;if((_n==Fn||_n==Wn)&&Mt==Wn)return Q;if(Mt==wt||Mt==je)return Q;if(Mt==Pt)return Q;if(_n==In)return Q;var Qn=bn.indexOf(wt)!=-1?bn.lastIndexOf(wt)-1:bn.length-2;return[oi,j].indexOf(bn[Qn])!=-1&&bn.slice(Qn+1,-1).every(function(Zn){return Zn==wt})&&Mt==Tn||_n==je&&[$,j].indexOf(Mt)!=-1?Q:Ut.indexOf(Ft)!=-1?Me:_n==Ft&&Mt==Ft?Q:Ae}this.nextBreak=function(C,Ut){if(Ut===void 0&&(Ut=0),Ut<0)return 0;if(Ut>=C.length-1)return C.length;for(var gn=at(bt(C,Ut)),bn=[],_n=Ut+1;_n<C.length;_n++)if(!it(C,_n-1)){var Mt=at(bt(C,_n));if(Ye(gn,bn,Mt))return _n;bn.push(Mt)}return C.length},this.splitGraphemes=function(C){for(var Ut=[],gn=0,bn;(bn=this.nextBreak(C,gn))<C.length;)Ut.push(C.slice(gn,bn)),gn=bn;return gn<C.length&&Ut.push(C.slice(gn)),Ut},this.iterateGraphemes=function(C){var Ut=0,gn={next:(function(){var bn,_n;return(_n=this.nextBreak(C,Ut))<C.length?(bn=C.slice(Ut,_n),Ut=_n,{value:bn,done:!1}):Ut<C.length?(bn=C.slice(Ut),Ut=C.length,{value:bn,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(gn[Symbol.iterator]=function(){return gn}),gn},this.countGraphemes=function(C){for(var Ut=0,gn=0,bn;(bn=this.nextBreak(C,gn))<C.length;)gn=bn,Ut++;return gn<C.length&&Ut++,Ut};function at(C){return 1536<=C&&C<=1541||C==1757||C==1807||C==2274||C==3406||C==69821||70082<=C&&C<=70083||C==72250||72326<=C&&C<=72329||C==73030?In:C==13?He:C==10?Ct:0<=C&&C<=9||11<=C&&C<=12||14<=C&&C<=31||127<=C&&C<=159||C==173||C==1564||C==6158||C==8203||8206<=C&&C<=8207||C==8232||C==8233||8234<=C&&C<=8238||8288<=C&&C<=8292||C==8293||8294<=C&&C<=8303||55296<=C&&C<=57343||C==65279||65520<=C&&C<=65528||65529<=C&&C<=65531||113824<=C&&C<=113827||119155<=C&&C<=119162||C==917504||C==917505||917506<=C&&C<=917535||917632<=C&&C<=917759||918e3<=C&&C<=921599?vt:768<=C&&C<=879||1155<=C&&C<=1159||1160<=C&&C<=1161||1425<=C&&C<=1469||C==1471||1473<=C&&C<=1474||1476<=C&&C<=1477||C==1479||1552<=C&&C<=1562||1611<=C&&C<=1631||C==1648||1750<=C&&C<=1756||1759<=C&&C<=1764||1767<=C&&C<=1768||1770<=C&&C<=1773||C==1809||1840<=C&&C<=1866||1958<=C&&C<=1968||2027<=C&&C<=2035||2070<=C&&C<=2073||2075<=C&&C<=2083||2085<=C&&C<=2087||2089<=C&&C<=2093||2137<=C&&C<=2139||2260<=C&&C<=2273||2275<=C&&C<=2306||C==2362||C==2364||2369<=C&&C<=2376||C==2381||2385<=C&&C<=2391||2402<=C&&C<=2403||C==2433||C==2492||C==2494||2497<=C&&C<=2500||C==2509||C==2519||2530<=C&&C<=2531||2561<=C&&C<=2562||C==2620||2625<=C&&C<=2626||2631<=C&&C<=2632||2635<=C&&C<=2637||C==2641||2672<=C&&C<=2673||C==2677||2689<=C&&C<=2690||C==2748||2753<=C&&C<=2757||2759<=C&&C<=2760||C==2765||2786<=C&&C<=2787||2810<=C&&C<=2815||C==2817||C==2876||C==2878||C==2879||2881<=C&&C<=2884||C==2893||C==2902||C==2903||2914<=C&&C<=2915||C==2946||C==3006||C==3008||C==3021||C==3031||C==3072||3134<=C&&C<=3136||3142<=C&&C<=3144||3146<=C&&C<=3149||3157<=C&&C<=3158||3170<=C&&C<=3171||C==3201||C==3260||C==3263||C==3266||C==3270||3276<=C&&C<=3277||3285<=C&&C<=3286||3298<=C&&C<=3299||3328<=C&&C<=3329||3387<=C&&C<=3388||C==3390||3393<=C&&C<=3396||C==3405||C==3415||3426<=C&&C<=3427||C==3530||C==3535||3538<=C&&C<=3540||C==3542||C==3551||C==3633||3636<=C&&C<=3642||3655<=C&&C<=3662||C==3761||3764<=C&&C<=3769||3771<=C&&C<=3772||3784<=C&&C<=3789||3864<=C&&C<=3865||C==3893||C==3895||C==3897||3953<=C&&C<=3966||3968<=C&&C<=3972||3974<=C&&C<=3975||3981<=C&&C<=3991||3993<=C&&C<=4028||C==4038||4141<=C&&C<=4144||4146<=C&&C<=4151||4153<=C&&C<=4154||4157<=C&&C<=4158||4184<=C&&C<=4185||4190<=C&&C<=4192||4209<=C&&C<=4212||C==4226||4229<=C&&C<=4230||C==4237||C==4253||4957<=C&&C<=4959||5906<=C&&C<=5908||5938<=C&&C<=5940||5970<=C&&C<=5971||6002<=C&&C<=6003||6068<=C&&C<=6069||6071<=C&&C<=6077||C==6086||6089<=C&&C<=6099||C==6109||6155<=C&&C<=6157||6277<=C&&C<=6278||C==6313||6432<=C&&C<=6434||6439<=C&&C<=6440||C==6450||6457<=C&&C<=6459||6679<=C&&C<=6680||C==6683||C==6742||6744<=C&&C<=6750||C==6752||C==6754||6757<=C&&C<=6764||6771<=C&&C<=6780||C==6783||6832<=C&&C<=6845||C==6846||6912<=C&&C<=6915||C==6964||6966<=C&&C<=6970||C==6972||C==6978||7019<=C&&C<=7027||7040<=C&&C<=7041||7074<=C&&C<=7077||7080<=C&&C<=7081||7083<=C&&C<=7085||C==7142||7144<=C&&C<=7145||C==7149||7151<=C&&C<=7153||7212<=C&&C<=7219||7222<=C&&C<=7223||7376<=C&&C<=7378||7380<=C&&C<=7392||7394<=C&&C<=7400||C==7405||C==7412||7416<=C&&C<=7417||7616<=C&&C<=7673||7675<=C&&C<=7679||C==8204||8400<=C&&C<=8412||8413<=C&&C<=8416||C==8417||8418<=C&&C<=8420||8421<=C&&C<=8432||11503<=C&&C<=11505||C==11647||11744<=C&&C<=11775||12330<=C&&C<=12333||12334<=C&&C<=12335||12441<=C&&C<=12442||C==42607||42608<=C&&C<=42610||42612<=C&&C<=42621||42654<=C&&C<=42655||42736<=C&&C<=42737||C==43010||C==43014||C==43019||43045<=C&&C<=43046||43204<=C&&C<=43205||43232<=C&&C<=43249||43302<=C&&C<=43309||43335<=C&&C<=43345||43392<=C&&C<=43394||C==43443||43446<=C&&C<=43449||C==43452||C==43493||43561<=C&&C<=43566||43569<=C&&C<=43570||43573<=C&&C<=43574||C==43587||C==43596||C==43644||C==43696||43698<=C&&C<=43700||43703<=C&&C<=43704||43710<=C&&C<=43711||C==43713||43756<=C&&C<=43757||C==43766||C==44005||C==44008||C==44013||C==64286||65024<=C&&C<=65039||65056<=C&&C<=65071||65438<=C&&C<=65439||C==66045||C==66272||66422<=C&&C<=66426||68097<=C&&C<=68099||68101<=C&&C<=68102||68108<=C&&C<=68111||68152<=C&&C<=68154||C==68159||68325<=C&&C<=68326||C==69633||69688<=C&&C<=69702||69759<=C&&C<=69761||69811<=C&&C<=69814||69817<=C&&C<=69818||69888<=C&&C<=69890||69927<=C&&C<=69931||69933<=C&&C<=69940||C==70003||70016<=C&&C<=70017||70070<=C&&C<=70078||70090<=C&&C<=70092||70191<=C&&C<=70193||C==70196||70198<=C&&C<=70199||C==70206||C==70367||70371<=C&&C<=70378||70400<=C&&C<=70401||C==70460||C==70462||C==70464||C==70487||70502<=C&&C<=70508||70512<=C&&C<=70516||70712<=C&&C<=70719||70722<=C&&C<=70724||C==70726||C==70832||70835<=C&&C<=70840||C==70842||C==70845||70847<=C&&C<=70848||70850<=C&&C<=70851||C==71087||71090<=C&&C<=71093||71100<=C&&C<=71101||71103<=C&&C<=71104||71132<=C&&C<=71133||71219<=C&&C<=71226||C==71229||71231<=C&&C<=71232||C==71339||C==71341||71344<=C&&C<=71349||C==71351||71453<=C&&C<=71455||71458<=C&&C<=71461||71463<=C&&C<=71467||72193<=C&&C<=72198||72201<=C&&C<=72202||72243<=C&&C<=72248||72251<=C&&C<=72254||C==72263||72273<=C&&C<=72278||72281<=C&&C<=72283||72330<=C&&C<=72342||72344<=C&&C<=72345||72752<=C&&C<=72758||72760<=C&&C<=72765||C==72767||72850<=C&&C<=72871||72874<=C&&C<=72880||72882<=C&&C<=72883||72885<=C&&C<=72886||73009<=C&&C<=73014||C==73018||73020<=C&&C<=73021||73023<=C&&C<=73029||C==73031||92912<=C&&C<=92916||92976<=C&&C<=92982||94095<=C&&C<=94098||113821<=C&&C<=113822||C==119141||119143<=C&&C<=119145||119150<=C&&C<=119154||119163<=C&&C<=119170||119173<=C&&C<=119179||119210<=C&&C<=119213||119362<=C&&C<=119364||121344<=C&&C<=121398||121403<=C&&C<=121452||C==121461||C==121476||121499<=C&&C<=121503||121505<=C&&C<=121519||122880<=C&&C<=122886||122888<=C&&C<=122904||122907<=C&&C<=122913||122915<=C&&C<=122916||122918<=C&&C<=122922||125136<=C&&C<=125142||125252<=C&&C<=125258||917536<=C&&C<=917631||917760<=C&&C<=917999?wt:127462<=C&&C<=127487?Ft:C==2307||C==2363||2366<=C&&C<=2368||2377<=C&&C<=2380||2382<=C&&C<=2383||2434<=C&&C<=2435||2495<=C&&C<=2496||2503<=C&&C<=2504||2507<=C&&C<=2508||C==2563||2622<=C&&C<=2624||C==2691||2750<=C&&C<=2752||C==2761||2763<=C&&C<=2764||2818<=C&&C<=2819||C==2880||2887<=C&&C<=2888||2891<=C&&C<=2892||C==3007||3009<=C&&C<=3010||3014<=C&&C<=3016||3018<=C&&C<=3020||3073<=C&&C<=3075||3137<=C&&C<=3140||3202<=C&&C<=3203||C==3262||3264<=C&&C<=3265||3267<=C&&C<=3268||3271<=C&&C<=3272||3274<=C&&C<=3275||3330<=C&&C<=3331||3391<=C&&C<=3392||3398<=C&&C<=3400||3402<=C&&C<=3404||3458<=C&&C<=3459||3536<=C&&C<=3537||3544<=C&&C<=3550||3570<=C&&C<=3571||C==3635||C==3763||3902<=C&&C<=3903||C==3967||C==4145||4155<=C&&C<=4156||4182<=C&&C<=4183||C==4228||C==6070||6078<=C&&C<=6085||6087<=C&&C<=6088||6435<=C&&C<=6438||6441<=C&&C<=6443||6448<=C&&C<=6449||6451<=C&&C<=6456||6681<=C&&C<=6682||C==6741||C==6743||6765<=C&&C<=6770||C==6916||C==6965||C==6971||6973<=C&&C<=6977||6979<=C&&C<=6980||C==7042||C==7073||7078<=C&&C<=7079||C==7082||C==7143||7146<=C&&C<=7148||C==7150||7154<=C&&C<=7155||7204<=C&&C<=7211||7220<=C&&C<=7221||C==7393||7410<=C&&C<=7411||C==7415||43043<=C&&C<=43044||C==43047||43136<=C&&C<=43137||43188<=C&&C<=43203||43346<=C&&C<=43347||C==43395||43444<=C&&C<=43445||43450<=C&&C<=43451||43453<=C&&C<=43456||43567<=C&&C<=43568||43571<=C&&C<=43572||C==43597||C==43755||43758<=C&&C<=43759||C==43765||44003<=C&&C<=44004||44006<=C&&C<=44007||44009<=C&&C<=44010||C==44012||C==69632||C==69634||C==69762||69808<=C&&C<=69810||69815<=C&&C<=69816||C==69932||C==70018||70067<=C&&C<=70069||70079<=C&&C<=70080||70188<=C&&C<=70190||70194<=C&&C<=70195||C==70197||70368<=C&&C<=70370||70402<=C&&C<=70403||C==70463||70465<=C&&C<=70468||70471<=C&&C<=70472||70475<=C&&C<=70477||70498<=C&&C<=70499||70709<=C&&C<=70711||70720<=C&&C<=70721||C==70725||70833<=C&&C<=70834||C==70841||70843<=C&&C<=70844||C==70846||C==70849||71088<=C&&C<=71089||71096<=C&&C<=71099||C==71102||71216<=C&&C<=71218||71227<=C&&C<=71228||C==71230||C==71340||71342<=C&&C<=71343||C==71350||71456<=C&&C<=71457||C==71462||72199<=C&&C<=72200||C==72249||72279<=C&&C<=72280||C==72343||C==72751||C==72766||C==72873||C==72881||C==72884||94033<=C&&C<=94078||C==119142||C==119149?Pt:4352<=C&&C<=4447||43360<=C&&C<=43388?nn:4448<=C&&C<=4519||55216<=C&&C<=55238?Kn:4520<=C&&C<=4607||55243<=C&&C<=55291?Wn:C==44032||C==44060||C==44088||C==44116||C==44144||C==44172||C==44200||C==44228||C==44256||C==44284||C==44312||C==44340||C==44368||C==44396||C==44424||C==44452||C==44480||C==44508||C==44536||C==44564||C==44592||C==44620||C==44648||C==44676||C==44704||C==44732||C==44760||C==44788||C==44816||C==44844||C==44872||C==44900||C==44928||C==44956||C==44984||C==45012||C==45040||C==45068||C==45096||C==45124||C==45152||C==45180||C==45208||C==45236||C==45264||C==45292||C==45320||C==45348||C==45376||C==45404||C==45432||C==45460||C==45488||C==45516||C==45544||C==45572||C==45600||C==45628||C==45656||C==45684||C==45712||C==45740||C==45768||C==45796||C==45824||C==45852||C==45880||C==45908||C==45936||C==45964||C==45992||C==46020||C==46048||C==46076||C==46104||C==46132||C==46160||C==46188||C==46216||C==46244||C==46272||C==46300||C==46328||C==46356||C==46384||C==46412||C==46440||C==46468||C==46496||C==46524||C==46552||C==46580||C==46608||C==46636||C==46664||C==46692||C==46720||C==46748||C==46776||C==46804||C==46832||C==46860||C==46888||C==46916||C==46944||C==46972||C==47e3||C==47028||C==47056||C==47084||C==47112||C==47140||C==47168||C==47196||C==47224||C==47252||C==47280||C==47308||C==47336||C==47364||C==47392||C==47420||C==47448||C==47476||C==47504||C==47532||C==47560||C==47588||C==47616||C==47644||C==47672||C==47700||C==47728||C==47756||C==47784||C==47812||C==47840||C==47868||C==47896||C==47924||C==47952||C==47980||C==48008||C==48036||C==48064||C==48092||C==48120||C==48148||C==48176||C==48204||C==48232||C==48260||C==48288||C==48316||C==48344||C==48372||C==48400||C==48428||C==48456||C==48484||C==48512||C==48540||C==48568||C==48596||C==48624||C==48652||C==48680||C==48708||C==48736||C==48764||C==48792||C==48820||C==48848||C==48876||C==48904||C==48932||C==48960||C==48988||C==49016||C==49044||C==49072||C==49100||C==49128||C==49156||C==49184||C==49212||C==49240||C==49268||C==49296||C==49324||C==49352||C==49380||C==49408||C==49436||C==49464||C==49492||C==49520||C==49548||C==49576||C==49604||C==49632||C==49660||C==49688||C==49716||C==49744||C==49772||C==49800||C==49828||C==49856||C==49884||C==49912||C==49940||C==49968||C==49996||C==50024||C==50052||C==50080||C==50108||C==50136||C==50164||C==50192||C==50220||C==50248||C==50276||C==50304||C==50332||C==50360||C==50388||C==50416||C==50444||C==50472||C==50500||C==50528||C==50556||C==50584||C==50612||C==50640||C==50668||C==50696||C==50724||C==50752||C==50780||C==50808||C==50836||C==50864||C==50892||C==50920||C==50948||C==50976||C==51004||C==51032||C==51060||C==51088||C==51116||C==51144||C==51172||C==51200||C==51228||C==51256||C==51284||C==51312||C==51340||C==51368||C==51396||C==51424||C==51452||C==51480||C==51508||C==51536||C==51564||C==51592||C==51620||C==51648||C==51676||C==51704||C==51732||C==51760||C==51788||C==51816||C==51844||C==51872||C==51900||C==51928||C==51956||C==51984||C==52012||C==52040||C==52068||C==52096||C==52124||C==52152||C==52180||C==52208||C==52236||C==52264||C==52292||C==52320||C==52348||C==52376||C==52404||C==52432||C==52460||C==52488||C==52516||C==52544||C==52572||C==52600||C==52628||C==52656||C==52684||C==52712||C==52740||C==52768||C==52796||C==52824||C==52852||C==52880||C==52908||C==52936||C==52964||C==52992||C==53020||C==53048||C==53076||C==53104||C==53132||C==53160||C==53188||C==53216||C==53244||C==53272||C==53300||C==53328||C==53356||C==53384||C==53412||C==53440||C==53468||C==53496||C==53524||C==53552||C==53580||C==53608||C==53636||C==53664||C==53692||C==53720||C==53748||C==53776||C==53804||C==53832||C==53860||C==53888||C==53916||C==53944||C==53972||C==54e3||C==54028||C==54056||C==54084||C==54112||C==54140||C==54168||C==54196||C==54224||C==54252||C==54280||C==54308||C==54336||C==54364||C==54392||C==54420||C==54448||C==54476||C==54504||C==54532||C==54560||C==54588||C==54616||C==54644||C==54672||C==54700||C==54728||C==54756||C==54784||C==54812||C==54840||C==54868||C==54896||C==54924||C==54952||C==54980||C==55008||C==55036||C==55064||C==55092||C==55120||C==55148||C==55176?Mi:44033<=C&&C<=44059||44061<=C&&C<=44087||44089<=C&&C<=44115||44117<=C&&C<=44143||44145<=C&&C<=44171||44173<=C&&C<=44199||44201<=C&&C<=44227||44229<=C&&C<=44255||44257<=C&&C<=44283||44285<=C&&C<=44311||44313<=C&&C<=44339||44341<=C&&C<=44367||44369<=C&&C<=44395||44397<=C&&C<=44423||44425<=C&&C<=44451||44453<=C&&C<=44479||44481<=C&&C<=44507||44509<=C&&C<=44535||44537<=C&&C<=44563||44565<=C&&C<=44591||44593<=C&&C<=44619||44621<=C&&C<=44647||44649<=C&&C<=44675||44677<=C&&C<=44703||44705<=C&&C<=44731||44733<=C&&C<=44759||44761<=C&&C<=44787||44789<=C&&C<=44815||44817<=C&&C<=44843||44845<=C&&C<=44871||44873<=C&&C<=44899||44901<=C&&C<=44927||44929<=C&&C<=44955||44957<=C&&C<=44983||44985<=C&&C<=45011||45013<=C&&C<=45039||45041<=C&&C<=45067||45069<=C&&C<=45095||45097<=C&&C<=45123||45125<=C&&C<=45151||45153<=C&&C<=45179||45181<=C&&C<=45207||45209<=C&&C<=45235||45237<=C&&C<=45263||45265<=C&&C<=45291||45293<=C&&C<=45319||45321<=C&&C<=45347||45349<=C&&C<=45375||45377<=C&&C<=45403||45405<=C&&C<=45431||45433<=C&&C<=45459||45461<=C&&C<=45487||45489<=C&&C<=45515||45517<=C&&C<=45543||45545<=C&&C<=45571||45573<=C&&C<=45599||45601<=C&&C<=45627||45629<=C&&C<=45655||45657<=C&&C<=45683||45685<=C&&C<=45711||45713<=C&&C<=45739||45741<=C&&C<=45767||45769<=C&&C<=45795||45797<=C&&C<=45823||45825<=C&&C<=45851||45853<=C&&C<=45879||45881<=C&&C<=45907||45909<=C&&C<=45935||45937<=C&&C<=45963||45965<=C&&C<=45991||45993<=C&&C<=46019||46021<=C&&C<=46047||46049<=C&&C<=46075||46077<=C&&C<=46103||46105<=C&&C<=46131||46133<=C&&C<=46159||46161<=C&&C<=46187||46189<=C&&C<=46215||46217<=C&&C<=46243||46245<=C&&C<=46271||46273<=C&&C<=46299||46301<=C&&C<=46327||46329<=C&&C<=46355||46357<=C&&C<=46383||46385<=C&&C<=46411||46413<=C&&C<=46439||46441<=C&&C<=46467||46469<=C&&C<=46495||46497<=C&&C<=46523||46525<=C&&C<=46551||46553<=C&&C<=46579||46581<=C&&C<=46607||46609<=C&&C<=46635||46637<=C&&C<=46663||46665<=C&&C<=46691||46693<=C&&C<=46719||46721<=C&&C<=46747||46749<=C&&C<=46775||46777<=C&&C<=46803||46805<=C&&C<=46831||46833<=C&&C<=46859||46861<=C&&C<=46887||46889<=C&&C<=46915||46917<=C&&C<=46943||46945<=C&&C<=46971||46973<=C&&C<=46999||47001<=C&&C<=47027||47029<=C&&C<=47055||47057<=C&&C<=47083||47085<=C&&C<=47111||47113<=C&&C<=47139||47141<=C&&C<=47167||47169<=C&&C<=47195||47197<=C&&C<=47223||47225<=C&&C<=47251||47253<=C&&C<=47279||47281<=C&&C<=47307||47309<=C&&C<=47335||47337<=C&&C<=47363||47365<=C&&C<=47391||47393<=C&&C<=47419||47421<=C&&C<=47447||47449<=C&&C<=47475||47477<=C&&C<=47503||47505<=C&&C<=47531||47533<=C&&C<=47559||47561<=C&&C<=47587||47589<=C&&C<=47615||47617<=C&&C<=47643||47645<=C&&C<=47671||47673<=C&&C<=47699||47701<=C&&C<=47727||47729<=C&&C<=47755||47757<=C&&C<=47783||47785<=C&&C<=47811||47813<=C&&C<=47839||47841<=C&&C<=47867||47869<=C&&C<=47895||47897<=C&&C<=47923||47925<=C&&C<=47951||47953<=C&&C<=47979||47981<=C&&C<=48007||48009<=C&&C<=48035||48037<=C&&C<=48063||48065<=C&&C<=48091||48093<=C&&C<=48119||48121<=C&&C<=48147||48149<=C&&C<=48175||48177<=C&&C<=48203||48205<=C&&C<=48231||48233<=C&&C<=48259||48261<=C&&C<=48287||48289<=C&&C<=48315||48317<=C&&C<=48343||48345<=C&&C<=48371||48373<=C&&C<=48399||48401<=C&&C<=48427||48429<=C&&C<=48455||48457<=C&&C<=48483||48485<=C&&C<=48511||48513<=C&&C<=48539||48541<=C&&C<=48567||48569<=C&&C<=48595||48597<=C&&C<=48623||48625<=C&&C<=48651||48653<=C&&C<=48679||48681<=C&&C<=48707||48709<=C&&C<=48735||48737<=C&&C<=48763||48765<=C&&C<=48791||48793<=C&&C<=48819||48821<=C&&C<=48847||48849<=C&&C<=48875||48877<=C&&C<=48903||48905<=C&&C<=48931||48933<=C&&C<=48959||48961<=C&&C<=48987||48989<=C&&C<=49015||49017<=C&&C<=49043||49045<=C&&C<=49071||49073<=C&&C<=49099||49101<=C&&C<=49127||49129<=C&&C<=49155||49157<=C&&C<=49183||49185<=C&&C<=49211||49213<=C&&C<=49239||49241<=C&&C<=49267||49269<=C&&C<=49295||49297<=C&&C<=49323||49325<=C&&C<=49351||49353<=C&&C<=49379||49381<=C&&C<=49407||49409<=C&&C<=49435||49437<=C&&C<=49463||49465<=C&&C<=49491||49493<=C&&C<=49519||49521<=C&&C<=49547||49549<=C&&C<=49575||49577<=C&&C<=49603||49605<=C&&C<=49631||49633<=C&&C<=49659||49661<=C&&C<=49687||49689<=C&&C<=49715||49717<=C&&C<=49743||49745<=C&&C<=49771||49773<=C&&C<=49799||49801<=C&&C<=49827||49829<=C&&C<=49855||49857<=C&&C<=49883||49885<=C&&C<=49911||49913<=C&&C<=49939||49941<=C&&C<=49967||49969<=C&&C<=49995||49997<=C&&C<=50023||50025<=C&&C<=50051||50053<=C&&C<=50079||50081<=C&&C<=50107||50109<=C&&C<=50135||50137<=C&&C<=50163||50165<=C&&C<=50191||50193<=C&&C<=50219||50221<=C&&C<=50247||50249<=C&&C<=50275||50277<=C&&C<=50303||50305<=C&&C<=50331||50333<=C&&C<=50359||50361<=C&&C<=50387||50389<=C&&C<=50415||50417<=C&&C<=50443||50445<=C&&C<=50471||50473<=C&&C<=50499||50501<=C&&C<=50527||50529<=C&&C<=50555||50557<=C&&C<=50583||50585<=C&&C<=50611||50613<=C&&C<=50639||50641<=C&&C<=50667||50669<=C&&C<=50695||50697<=C&&C<=50723||50725<=C&&C<=50751||50753<=C&&C<=50779||50781<=C&&C<=50807||50809<=C&&C<=50835||50837<=C&&C<=50863||50865<=C&&C<=50891||50893<=C&&C<=50919||50921<=C&&C<=50947||50949<=C&&C<=50975||50977<=C&&C<=51003||51005<=C&&C<=51031||51033<=C&&C<=51059||51061<=C&&C<=51087||51089<=C&&C<=51115||51117<=C&&C<=51143||51145<=C&&C<=51171||51173<=C&&C<=51199||51201<=C&&C<=51227||51229<=C&&C<=51255||51257<=C&&C<=51283||51285<=C&&C<=51311||51313<=C&&C<=51339||51341<=C&&C<=51367||51369<=C&&C<=51395||51397<=C&&C<=51423||51425<=C&&C<=51451||51453<=C&&C<=51479||51481<=C&&C<=51507||51509<=C&&C<=51535||51537<=C&&C<=51563||51565<=C&&C<=51591||51593<=C&&C<=51619||51621<=C&&C<=51647||51649<=C&&C<=51675||51677<=C&&C<=51703||51705<=C&&C<=51731||51733<=C&&C<=51759||51761<=C&&C<=51787||51789<=C&&C<=51815||51817<=C&&C<=51843||51845<=C&&C<=51871||51873<=C&&C<=51899||51901<=C&&C<=51927||51929<=C&&C<=51955||51957<=C&&C<=51983||51985<=C&&C<=52011||52013<=C&&C<=52039||52041<=C&&C<=52067||52069<=C&&C<=52095||52097<=C&&C<=52123||52125<=C&&C<=52151||52153<=C&&C<=52179||52181<=C&&C<=52207||52209<=C&&C<=52235||52237<=C&&C<=52263||52265<=C&&C<=52291||52293<=C&&C<=52319||52321<=C&&C<=52347||52349<=C&&C<=52375||52377<=C&&C<=52403||52405<=C&&C<=52431||52433<=C&&C<=52459||52461<=C&&C<=52487||52489<=C&&C<=52515||52517<=C&&C<=52543||52545<=C&&C<=52571||52573<=C&&C<=52599||52601<=C&&C<=52627||52629<=C&&C<=52655||52657<=C&&C<=52683||52685<=C&&C<=52711||52713<=C&&C<=52739||52741<=C&&C<=52767||52769<=C&&C<=52795||52797<=C&&C<=52823||52825<=C&&C<=52851||52853<=C&&C<=52879||52881<=C&&C<=52907||52909<=C&&C<=52935||52937<=C&&C<=52963||52965<=C&&C<=52991||52993<=C&&C<=53019||53021<=C&&C<=53047||53049<=C&&C<=53075||53077<=C&&C<=53103||53105<=C&&C<=53131||53133<=C&&C<=53159||53161<=C&&C<=53187||53189<=C&&C<=53215||53217<=C&&C<=53243||53245<=C&&C<=53271||53273<=C&&C<=53299||53301<=C&&C<=53327||53329<=C&&C<=53355||53357<=C&&C<=53383||53385<=C&&C<=53411||53413<=C&&C<=53439||53441<=C&&C<=53467||53469<=C&&C<=53495||53497<=C&&C<=53523||53525<=C&&C<=53551||53553<=C&&C<=53579||53581<=C&&C<=53607||53609<=C&&C<=53635||53637<=C&&C<=53663||53665<=C&&C<=53691||53693<=C&&C<=53719||53721<=C&&C<=53747||53749<=C&&C<=53775||53777<=C&&C<=53803||53805<=C&&C<=53831||53833<=C&&C<=53859||53861<=C&&C<=53887||53889<=C&&C<=53915||53917<=C&&C<=53943||53945<=C&&C<=53971||53973<=C&&C<=53999||54001<=C&&C<=54027||54029<=C&&C<=54055||54057<=C&&C<=54083||54085<=C&&C<=54111||54113<=C&&C<=54139||54141<=C&&C<=54167||54169<=C&&C<=54195||54197<=C&&C<=54223||54225<=C&&C<=54251||54253<=C&&C<=54279||54281<=C&&C<=54307||54309<=C&&C<=54335||54337<=C&&C<=54363||54365<=C&&C<=54391||54393<=C&&C<=54419||54421<=C&&C<=54447||54449<=C&&C<=54475||54477<=C&&C<=54503||54505<=C&&C<=54531||54533<=C&&C<=54559||54561<=C&&C<=54587||54589<=C&&C<=54615||54617<=C&&C<=54643||54645<=C&&C<=54671||54673<=C&&C<=54699||54701<=C&&C<=54727||54729<=C&&C<=54755||54757<=C&&C<=54783||54785<=C&&C<=54811||54813<=C&&C<=54839||54841<=C&&C<=54867||54869<=C&&C<=54895||54897<=C&&C<=54923||54925<=C&&C<=54951||54953<=C&&C<=54979||54981<=C&&C<=55007||55009<=C&&C<=55035||55037<=C&&C<=55063||55065<=C&&C<=55091||55093<=C&&C<=55119||55121<=C&&C<=55147||55149<=C&&C<=55175||55177<=C&&C<=55203?Fn:C==9757||C==9977||9994<=C&&C<=9997||C==127877||127938<=C&&C<=127940||C==127943||127946<=C&&C<=127948||128066<=C&&C<=128067||128070<=C&&C<=128080||C==128110||128112<=C&&C<=128120||C==128124||128129<=C&&C<=128131||128133<=C&&C<=128135||C==128170||128372<=C&&C<=128373||C==128378||C==128400||128405<=C&&C<=128406||128581<=C&&C<=128583||128587<=C&&C<=128591||C==128675||128692<=C&&C<=128694||C==128704||C==128716||129304<=C&&C<=129308||129310<=C&&C<=129311||C==129318||129328<=C&&C<=129337||129341<=C&&C<=129342||129489<=C&&C<=129501?oi:127995<=C&&C<=127999?Tn:C==8205?je:C==9792||C==9794||9877<=C&&C<=9878||C==9992||C==10084||C==127752||C==127806||C==127859||C==127891||C==127908||C==127912||C==127979||C==127981||C==128139||128187<=C&&C<=128188||C==128295||C==128300||C==128488||C==128640||C==128658?$:128102<=C&&C<=128105?j:Ln}return this}ke.exports&&(ke.exports=Te)}),o=new r,s=function(Te,He,Ct){for(var vt=o.iterateGraphemes(Te.substring(He)),wt="",Ft=0;Ft<Ct-He;Ft++){var Pt=vt.next();if(wt+=Pt.value,Pt.done)break}return wt},a=(function(ke,Te,He,Ct,vt,wt,Ft){return{start:{line:ke,column:Te,offset:He},end:{line:Ct,column:vt,offset:wt},source:Ft||null}}),c=i(function(ke,Te){(function(He,Ct){ke.exports=Ct()})(t,function(){var He="",Ct,vt=wt;function wt(Fn,Ln){if(typeof Fn!="string")throw new TypeError("expected a string");if(Ln===1)return Fn;if(Ln===2)return Fn+Fn;var In=Fn.length*Ln;if(Ct!==Fn||typeof Ct>"u")Ct=Fn,He="";else if(He.length>=In)return He.substr(0,In);for(;In>He.length&&Ln>1;)Ln&1&&(He+=Fn),Ln>>=1,Fn+=Fn;return He+=Fn,He=He.substr(0,In),He}var Ft=function(Ln,In,oi){if(Ln==null||In==null)return Ln;var Tn=String(Ln),je=typeof In=="number"?In:parseInt(In,10);if(isNaN(je)||!isFinite(je))return Tn;var $=Tn.length;if($>=je)return Tn;var j=String(oi);j===""&&(j=" ");for(var Q=je-$;j.length<Q;)j+=j;var Ae=j.length>Q?j.substr(0,Q):j;return Ae+Tn},Pt=Object.assign||function(Fn){for(var Ln=1;Ln<arguments.length;Ln++){var In=arguments[Ln];for(var oi in In)Object.prototype.hasOwnProperty.call(In,oi)&&(Fn[oi]=In[oi])}return Fn};function nn(Fn,Ln,In,oi){var Tn=String(Ln),je=Ft(Tn,In," "),$=vt(" ",oi.tabSize);return je+" | "+Fn.replace(/\t/g,$)}function Kn(Fn,Ln,In,oi,Tn){return Fn.slice(Ln,In).map(function(je,$){return nn(je,Ln+$+1,oi,Tn)}).join(`
`)}var Wn={extraLines:2,tabSize:4},Mi=function(Ln,In,oi,Tn){Tn=Pt({},Wn,Tn);var je=Ln.split(/\r\n?|\n|\f/),$=Math.max(1,In-Tn.extraLines)-1,j=Math.min(In+Tn.extraLines,je.length),Q=String(j).length,Ae=Kn(je,$,In,Q,Tn),Me=nn(je[In-1].substring(0,oi-1),In,Q,Tn),Ne=vt(" ",Me.length)+"^",We=Kn(je,In,j,Q,Tn);return[Ae,Ne,We].filter(Boolean).join(`
`)};return Mi})}),d=new Error().stack,p=(function(ke){var Te=Object.create(SyntaxError.prototype);return Object.assign(Te,ke,{name:"SyntaxError"}),Object.defineProperty(Te,"stack",{get:function(){return d?d.replace(/^(.+\n){1,3}/,String(Te)+`
`):""}}),Te}),v=(function(ke,Te,He,Ct,vt){throw p({message:Ct?ke+`
`+c(Te,Ct,vt):ke,rawMessage:ke,source:He,line:Ct,column:vt})}),M={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Te){for(var He=arguments.length,Ct=Array(He>1?He-1:0),vt=1;vt<He;vt++)Ct[vt-1]=arguments[vt];return"Unexpected token <"+Te+"> at "+Ct.filter(Boolean).join(":")}},E={unexpectedSymbol:function(Te){for(var He=arguments.length,Ct=Array(He>1?He-1:0),vt=1;vt<He;vt++)Ct[vt-1]=arguments[vt];return"Unexpected symbol <"+Te+"> at "+Ct.filter(Boolean).join(":")}},P={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},U={"{":P.LEFT_BRACE,"}":P.RIGHT_BRACE,"[":P.LEFT_BRACKET,"]":P.RIGHT_BRACKET,":":P.COLON,",":P.COMMA},z={true:P.TRUE,false:P.FALSE,null:P.NULL},V={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},Z={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},X={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function re(ke){return ke>="1"&&ke<="9"}function ee(ke){return ke>="0"&&ke<="9"}function ne(ke){return ee(ke)||ke>="a"&&ke<="f"||ke>="A"&&ke<="F"}function q(ke){return ke==="e"||ke==="E"}function le(ke,Te,He,Ct){var vt=ke.charAt(Te);if(vt==="\r")Te++,He++,Ct=1,ke.charAt(Te)===`
`&&Te++;else if(vt===`
`)Te++,He++,Ct=1;else if(vt==="	"||vt===" ")Te++,Ct++;else return null;return{index:Te,line:He,column:Ct}}function ue(ke,Te,He,Ct){var vt=ke.charAt(Te);return vt in U?{type:U[vt],line:He,column:Ct+1,index:Te+1,value:null}:null}function ve(ke,Te,He,Ct){for(var vt in z)if(z.hasOwnProperty(vt)&&ke.substr(Te,vt.length)===vt)return{type:z[vt],line:He,column:Ct+vt.length,index:Te+vt.length,value:vt};return null}function pe(ke,Te,He,Ct){for(var vt=Te,wt=V._START_;Te<ke.length;){var Ft=ke.charAt(Te);switch(wt){case V._START_:{if(Ft==='"')Te++,wt=V.START_QUOTE_OR_CHAR;else return null;break}case V.START_QUOTE_OR_CHAR:{if(Ft==="\\")Te++,wt=V.ESCAPE;else{if(Ft==='"')return Te++,{type:P.STRING,line:He,column:Ct+Te-vt,index:Te,value:ke.slice(vt,Te)};Te++}break}case V.ESCAPE:{if(Ft in Z){if(Te++,Ft==="u")for(var Pt=0;Pt<4;Pt++){var nn=ke.charAt(Te);if(nn&&ne(nn))Te++;else return null}wt=V.START_QUOTE_OR_CHAR}else return null;break}}}}function Be(ke,Te,He,Ct){var vt=Te,wt=Te,Ft=X._START_;e:for(;Te<ke.length;){var Pt=ke.charAt(Te);switch(Ft){case X._START_:{if(Pt==="-")Ft=X.MINUS;else if(Pt==="0")wt=Te+1,Ft=X.ZERO;else if(re(Pt))wt=Te+1,Ft=X.DIGIT;else return null;break}case X.MINUS:{if(Pt==="0")wt=Te+1,Ft=X.ZERO;else if(re(Pt))wt=Te+1,Ft=X.DIGIT;else return null;break}case X.ZERO:{if(Pt===".")Ft=X.POINT;else if(q(Pt))Ft=X.EXP;else break e;break}case X.DIGIT:{if(ee(Pt))wt=Te+1;else if(Pt===".")Ft=X.POINT;else if(q(Pt))Ft=X.EXP;else break e;break}case X.POINT:{if(ee(Pt))wt=Te+1,Ft=X.DIGIT_FRACTION;else break e;break}case X.DIGIT_FRACTION:{if(ee(Pt))wt=Te+1;else if(q(Pt))Ft=X.EXP;else break e;break}case X.EXP:{if(Pt==="+"||Pt==="-")Ft=X.EXP_DIGIT_OR_SIGN;else if(ee(Pt))wt=Te+1,Ft=X.EXP_DIGIT_OR_SIGN;else break e;break}case X.EXP_DIGIT_OR_SIGN:{if(ee(Pt))wt=Te+1;else break e;break}}Te++}return wt>0?{type:P.NUMBER,line:He,column:Ct+wt-vt,index:wt,value:ke.slice(vt,wt)}:null}var Ce=function(Te,He){for(var Ct=1,vt=1,wt=0,Ft=[];wt<Te.length;){var Pt=[Te,wt,Ct,vt],nn=le.apply(void 0,Pt);if(nn){wt=nn.index,Ct=nn.line,vt=nn.column;continue}var Kn=ue.apply(void 0,Pt)||ve.apply(void 0,Pt)||pe.apply(void 0,Pt)||Be.apply(void 0,Pt);if(Kn){var Wn={type:Kn.type,value:Kn.value,loc:a(Ct,vt,wt,Kn.line,Kn.column,Kn.index,He.source)};Ft.push(Wn),wt=Kn.index,Ct=Kn.line,vt=Kn.column}else v(E.unexpectedSymbol(s(Te,wt,wt+1),He.source,Ct,vt),Te,He.source,Ct,vt)}return Ft},Oe={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},Fe={_START_:0,KEY:1,COLON:2},Ee={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ve={loc:!0,source:null};function ut(ke,Te,He){var Ct=Te.length>0?Te[Te.length-1].loc.end:{line:1,column:1};v(M.unexpectedEnd(),ke,He.source,Ct.line,Ct.column)}function mt(ke){for(var Te=0,He=0;He<4;He++)Te=Te*16+parseInt(ke[He],16);return String.fromCharCode(Te)}var Pe={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},De=['"',"\\","/"];function Xe(ke){for(var Te="",He=0;He<ke.length;He++){var Ct=ke.charAt(He);if(Ct==="\\"){He++;var vt=ke.charAt(He);if(vt==="u")Te+=mt(ke.substr(He+1,4)),He+=4;else if(De.indexOf(vt)!==-1)Te+=vt;else if(vt in Pe)Te+=Pe[vt];else break}else Te+=Ct}return Te}function Ke(ke,Te,He,Ct){for(var vt=void 0,wt={type:"Object",children:[]},Ft=Oe._START_;He<Te.length;){var Pt=Te[He];switch(Ft){case Oe._START_:{if(Pt.type===P.LEFT_BRACE)vt=Pt,Ft=Oe.OPEN_OBJECT,He++;else return null;break}case Oe.OPEN_OBJECT:{if(Pt.type===P.RIGHT_BRACE)return Ct.loc&&(wt.loc=a(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Pt.loc.end.line,Pt.loc.end.column,Pt.loc.end.offset,Ct.source)),{value:wt,index:He+1};var nn=Bt(ke,Te,He,Ct);wt.children.push(nn.value),Ft=Oe.PROPERTY,He=nn.index;break}case Oe.PROPERTY:{if(Pt.type===P.RIGHT_BRACE)return Ct.loc&&(wt.loc=a(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Pt.loc.end.line,Pt.loc.end.column,Pt.loc.end.offset,Ct.source)),{value:wt,index:He+1};Pt.type===P.COMMA?(Ft=Oe.COMMA,He++):v(M.unexpectedToken(s(ke,Pt.loc.start.offset,Pt.loc.end.offset),Ct.source,Pt.loc.start.line,Pt.loc.start.column),ke,Ct.source,Pt.loc.start.line,Pt.loc.start.column);break}case Oe.COMMA:{var Kn=Bt(ke,Te,He,Ct);Kn?(He=Kn.index,wt.children.push(Kn.value),Ft=Oe.PROPERTY):v(M.unexpectedToken(s(ke,Pt.loc.start.offset,Pt.loc.end.offset),Ct.source,Pt.loc.start.line,Pt.loc.start.column),ke,Ct.source,Pt.loc.start.line,Pt.loc.start.column);break}}}ut(ke,Te,Ct)}function Bt(ke,Te,He,Ct){for(var vt=void 0,wt={type:"Property",key:null,value:null},Ft=Fe._START_;He<Te.length;){var Pt=Te[He];switch(Ft){case Fe._START_:{if(Pt.type===P.STRING){var nn={type:"Identifier",value:Xe(ke.slice(Pt.loc.start.offset+1,Pt.loc.end.offset-1)),raw:Pt.value};Ct.loc&&(nn.loc=Pt.loc),vt=Pt,wt.key=nn,Ft=Fe.KEY,He++}else return null;break}case Fe.KEY:{Pt.type===P.COLON?(Ft=Fe.COLON,He++):v(M.unexpectedToken(s(ke,Pt.loc.start.offset,Pt.loc.end.offset),Ct.source,Pt.loc.start.line,Pt.loc.start.column),ke,Ct.source,Pt.loc.start.line,Pt.loc.start.column);break}case Fe.COLON:{var Kn=Rt(ke,Te,He,Ct);return wt.value=Kn.value,Ct.loc&&(wt.loc=a(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Kn.value.loc.end.line,Kn.value.loc.end.column,Kn.value.loc.end.offset,Ct.source)),{value:wt,index:Kn.index}}}}}function ot(ke,Te,He,Ct){for(var vt=void 0,wt={type:"Array",children:[]},Ft=Ee._START_,Pt=void 0;He<Te.length;)switch(Pt=Te[He],Ft){case Ee._START_:{if(Pt.type===P.LEFT_BRACKET)vt=Pt,Ft=Ee.OPEN_ARRAY,He++;else return null;break}case Ee.OPEN_ARRAY:{if(Pt.type===P.RIGHT_BRACKET)return Ct.loc&&(wt.loc=a(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Pt.loc.end.line,Pt.loc.end.column,Pt.loc.end.offset,Ct.source)),{value:wt,index:He+1};var nn=Rt(ke,Te,He,Ct);He=nn.index,wt.children.push(nn.value),Ft=Ee.VALUE;break}case Ee.VALUE:{if(Pt.type===P.RIGHT_BRACKET)return Ct.loc&&(wt.loc=a(vt.loc.start.line,vt.loc.start.column,vt.loc.start.offset,Pt.loc.end.line,Pt.loc.end.column,Pt.loc.end.offset,Ct.source)),{value:wt,index:He+1};Pt.type===P.COMMA?(Ft=Ee.COMMA,He++):v(M.unexpectedToken(s(ke,Pt.loc.start.offset,Pt.loc.end.offset),Ct.source,Pt.loc.start.line,Pt.loc.start.column),ke,Ct.source,Pt.loc.start.line,Pt.loc.start.column);break}case Ee.COMMA:{var Kn=Rt(ke,Te,He,Ct);He=Kn.index,wt.children.push(Kn.value),Ft=Ee.VALUE;break}}ut(ke,Te,Ct)}function Et(ke,Te,He,Ct){var vt=Te[He],wt=null;switch(vt.type){case P.STRING:{wt=Xe(ke.slice(vt.loc.start.offset+1,vt.loc.end.offset-1));break}case P.NUMBER:{wt=Number(vt.value);break}case P.TRUE:{wt=!0;break}case P.FALSE:{wt=!1;break}case P.NULL:{wt=null;break}default:return null}var Ft={type:"Literal",value:wt,raw:vt.value};return Ct.loc&&(Ft.loc=vt.loc),{value:Ft,index:He+1}}function Rt(ke,Te,He,Ct){var vt=Te[He],wt=Et.apply(void 0,arguments)||Ke.apply(void 0,arguments)||ot.apply(void 0,arguments);if(wt)return wt;v(M.unexpectedToken(s(ke,vt.loc.start.offset,vt.loc.end.offset),Ct.source,vt.loc.start.line,vt.loc.start.column),ke,Ct.source,vt.loc.start.line,vt.loc.start.column)}var Ue=(function(ke,Te){Te=Object.assign({},Ve,Te);var He=Ce(ke,Te);He.length===0&&ut(ke,He,Te);var Ct=Rt(ke,He,0,Te);if(Ct.index===He.length)return Ct.value;var vt=He[Ct.index];v(M.unexpectedToken(s(ke,vt.loc.start.offset,vt.loc.end.offset),Te.source,vt.loc.start.line,vt.loc.start.column),ke,Te.source,vt.loc.start.line,vt.loc.start.column)});return Ue}))})(WS)),WS.exports}var _Se=bSe();const yK=xu(_Se);function va(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return va=function(){return s},s}va();function rP(n,e){if(va().f[0]++,va().s[0]++,e)va().b[0][1]++;else{va().b[0][0]++,va().s[1]++;return}if(va().s[2]++,n.length<1)return va().b[1][0]++,va().s[3]++,e;if(va().b[1][1]++,va().s[4]++,"children"in e)va().b[2][1]++;else{va().b[2][0]++,va().s[5]++;return}const t=(va().s[6]++,n[0]);if(va().s[7]++,t.match(/^[0-9]+$/))return va().b[3][0]++,va().s[8]++,rP(n.slice(1),e.children[+n[0]]);va().b[3][1]++;const i=(va().s[9]++,e.children.find(r=>(va().f[1]++,va().s[10]++,va().b[4][0]++,"key"in r&&(va().b[4][1]++,r.key.type==="Identifier")&&(va().b[4][2]++,r.key.value===t))));return va().s[11]++,rP(n.slice(1),i?.value)}function Un(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Un=function(){return s},s}Un();function vK(n,e){Un().f[0]++;const t=(Un().s[0]++,[]);Un().s[1]++;for(const i of n){const{key:r,message:o}=(Un().s[2]++,i);if(Un().s[3]++,!r)Un().b[0][0]++,Un().s[4]++,t.push({from:0,to:e.loc?(Un().b[1][0]++,e.loc.end.offset):(Un().b[1][1]++,0),severity:"error",message:o});else{Un().b[0][1]++;const s=(Un().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(Un().s[6]++,rP(s,e));if(Un().s[7]++,a)Un().b[2][1]++;else{Un().b[2][0]++,Un().s[8]++,console.warn("Something went wrong parsing error:",i),Un().s[9]++;continue}Un().s[10]++,a.loc?(Un().b[3][0]++,Un().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):Un().b[3][1]++}}return Un().s[12]++,t}function xSe(){return Un().f[1]++,Un().s[13]++,n=>{Un().f[2]++;const e=(Un().s[14]++,n.state.doc.toString());Un().s[15]++;try{const t=(Un().s[16]++,JSON.parse(e)),i=(Un().s[17]++,yK(e)),r=(Un().s[18]++,eh({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(Un().s[19]++,r.filter(s=>(Un().f[3]++,Un().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{Un().f[4]++;const a=(Un().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return Un().s[22]++,{key:a[0],message:a[1]}}));return Un().s[23]++,vK(o,i)}catch{}return Un().s[24]++,[]}}function MSe(){return Un().f[5]++,Un().s[25]++,n=>{Un().f[6]++;const e=(Un().s[26]++,n.state.doc.toString());Un().s[27]++;try{const t=(Un().s[28]++,JSON.parse(e)),i=(Un().s[29]++,yK(e)),r=(Un().s[30]++,eh(t)),o=(Un().s[31]++,r.map(s=>(Un().f[7]++,Un().s[32]++,{key:s.message.split(":")[0],message:s.message})));return Un().s[33]++,vK(o,i)}catch{}return Un().s[34]++,[]}}function wSe(n){return Un().f[8]++,Un().s[35]++,e=>{Un().f[9]++;const t=(Un().s[36]++,e.state.doc.toString()),i=(Un().s[37]++,JSON.parse(t)),r=(Un().s[38]++,yK(t)),o=(Un().s[39]++,bde.createExpression(i,n));if(Un().s[40]++,o?.result!=="error")return Un().b[4][0]++,Un().s[41]++,[];Un().b[4][1]++;const s=(Un().s[42]++,o.value);return Un().s[43]++,vK(s,r)}}function SSe(n){Un().f[10]++,Un().s[44]++;let e=()=>(Un().f[11]++,Un().s[45]++,[]);switch(Un().s[46]++,n.lintType){case"style":Un().b[5][0]++,Un().s[47]++,e=MSe(),Un().s[48]++;break;case"layer":Un().b[5][1]++,Un().s[49]++,e=xSe(),Un().s[50]++;break;case"expression":Un().b[5][2]++,Un().s[51]++,e=wSe(n.spec),Un().s[52]++;break;case"json":Un().b[5][3]++,Un().s[53]++,e=()=>(Un().f[12]++,Un().s[54]++,[]),Un().s[55]++;break}return Un().s[56]++,new Bi({doc:n.value,extensions:[Ywe,lSe(),vSe,new IM().of(cs.tabSize.of(2)),Bi.theme({"&":{fontSize:"9pt"}}),Bi.updateListener.of(t=>{if(Un().f[13]++,Un().s[57]++,t.docChanged){Un().b[6][0]++;const i=(Un().s[58]++,t.state.doc),r=(Un().s[59]++,i.toString());Un().s[60]++,n.onChange(r)}else Un().b[6][1]++;Un().s[61]++,t.focusChanged?(Un().b[7][0]++,Un().s[62]++,t.view.hasFocus?(Un().b[8][0]++,Un().s[63]++,n.onFocus()):(Un().b[8][1]++,Un().s[64]++,n.onBlur())):Un().b[7][1]++}),qwe(),Lwe(t=>{Un().f[14]++;const i=(Un().s[65]++,oSe()(t));return Un().s[66]++,i.length>0?(Un().b[9][0]++,Un().s[67]++,i):(Un().b[9][1]++,Un().s[68]++,e(t))})],parent:n.parent})}function hi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="e7ca120656f943a515aa911b15fec84f46dcc658",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:14,column:3}},1:{start:{line:16,column:8},end:{line:16,column:12}},2:{start:{line:17,column:22},end:{line:17,column:27}},3:{start:{line:19,column:4},end:{line:19,column:17}},4:{start:{line:20,column:4},end:{line:23,column:6}},5:{start:{line:26,column:4},end:{line:26,column:63}},6:{start:{line:29,column:4},end:{line:37,column:7}},7:{start:{line:33,column:27},end:{line:33,column:47}},8:{start:{line:34,column:21},end:{line:34,column:35}},9:{start:{line:35,column:20},end:{line:35,column:33}},10:{start:{line:39,column:12},end:{line:44,column:3}},11:{start:{line:40,column:4},end:{line:40,column:49}},12:{start:{line:40,column:28},end:{line:40,column:49}},13:{start:{line:41,column:4},end:{line:43,column:7}},14:{start:{line:45,column:11},end:{line:50,column:3}},15:{start:{line:46,column:4},end:{line:46,column:47}},16:{start:{line:46,column:27},end:{line:46,column:47}},17:{start:{line:47,column:4},end:{line:49,column:7}},18:{start:{line:52,column:4},end:{line:66,column:5}},19:{start:{line:53,column:6},end:{line:53,column:36}},20:{start:{line:54,column:30},end:{line:60,column:7}},21:{start:{line:61,column:6},end:{line:64,column:7}},22:{start:{line:62,column:8},end:{line:62,column:63}},23:{start:{line:63,column:8},end:{line:63,column:46}},24:{start:{line:65,column:6},end:{line:65,column:43}},25:{start:{line:68,column:13},end:{line:92,column:3}},26:{start:{line:69,column:4},end:{line:75,column:5}},27:{start:{line:70,column:6},end:{line:70,column:37}},28:{start:{line:71,column:6},end:{line:73,column:9}},29:{start:{line:74,column:6},end:{line:74,column:13}},30:{start:{line:76,column:20},end:{line:76,column:51}},31:{start:{line:77,column:4},end:{line:88,column:5}},32:{start:{line:79,column:6},end:{line:84,column:7}},33:{start:{line:80,column:8},end:{line:80,column:42}},34:{start:{line:82,column:8},end:{line:82,column:19}},35:{start:{line:83,column:8},end:{line:83,column:27}},36:{start:{line:85,column:6},end:{line:87,column:7}},37:{start:{line:86,column:8},end:{line:86,column:66}},38:{start:{line:86,column:33},end:{line:86,column:66}},39:{start:{line:89,column:4},end:{line:91,column:7}},40:{start:{line:94,column:4},end:{line:102,column:9}},41:{start:{line:99,column:10},end:{line:99,column:24}},42:{start:{line:105,column:18},end:{line:105,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:24,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:22},end:{line:27,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:22},end:{line:38,column:3}},line:28},5:{name:"(anonymous_5)",decl:{start:{line:33,column:16},end:{line:33,column:17}},loc:{start:{line:33,column:27},end:{line:33,column:47}},line:33},6:{name:"(anonymous_6)",decl:{start:{line:34,column:15},end:{line:34,column:16}},loc:{start:{line:34,column:21},end:{line:34,column:35}},line:34},7:{name:"(anonymous_7)",decl:{start:{line:35,column:14},end:{line:35,column:15}},loc:{start:{line:35,column:20},end:{line:35,column:33}},line:35},8:{name:"(anonymous_8)",decl:{start:{line:39,column:12},end:{line:39,column:13}},loc:{start:{line:39,column:18},end:{line:44,column:3}},line:39},9:{name:"(anonymous_9)",decl:{start:{line:45,column:11},end:{line:45,column:12}},loc:{start:{line:45,column:17},end:{line:50,column:3}},line:45},10:{name:"(anonymous_10)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:32},end:{line:67,column:3}},line:51},11:{name:"(anonymous_11)",decl:{start:{line:68,column:13},end:{line:68,column:14}},loc:{start:{line:68,column:21},end:{line:92,column:3}},line:68},12:{name:"(anonymous_12)",decl:{start:{line:93,column:2},end:{line:93,column:3}},loc:{start:{line:93,column:11},end:{line:103,column:3}},line:93},13:{name:"(anonymous_13)",decl:{start:{line:98,column:13},end:{line:98,column:14}},loc:{start:{line:98,column:21},end:{line:100,column:9}},line:98}},branchMap:{0:{loc:{start:{line:32,column:16},end:{line:32,column:46}},type:"binary-expr",locations:[{start:{line:32,column:16},end:{line:32,column:35}},{start:{line:32,column:39},end:{line:32,column:46}}],line:32},1:{loc:{start:{line:40,column:4},end:{line:40,column:49}},type:"if",locations:[{start:{line:40,column:4},end:{line:40,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},2:{loc:{start:{line:46,column:4},end:{line:46,column:47}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},3:{loc:{start:{line:52,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:66,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},4:{loc:{start:{line:52,column:8},end:{line:52,column:69}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:29}},{start:{line:52,column:33},end:{line:52,column:69}}],line:52},5:{loc:{start:{line:61,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:61,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},6:{loc:{start:{line:69,column:4},end:{line:75,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:75,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},7:{loc:{start:{line:77,column:4},end:{line:88,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:88,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},8:{loc:{start:{line:85,column:6},end:{line:87,column:7}},type:"if",locations:[{start:{line:85,column:6},end:{line:87,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:85},9:{loc:{start:{line:86,column:8},end:{line:86,column:66}},type:"if",locations:[{start:{line:86,column:8},end:{line:86,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAiIM;AAjIN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAyB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,YAAY;AAAA,EACd;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,YAAM,kBAAmC;AAAA,QACvC,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,MACF;AACA,UAAI,KAAK,MAAM,YAAY;AACzB,wBAAgB,YAAY,KAAK,MAAO,MAAM;AAC9C,wBAAgB,iBAAiB;AAAA,MACnC;AACA,WAAK,MAAO,SAAS,eAAe;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA;AAAA,IAC9B,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e7ca120656f943a515aa911b15fec84f46dcc658"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hi=function(){return s},s}hi();class ESe extends En.Component{static defaultProps=(hi().s[0]++,{onFocus:()=>{hi().f[0]++},onBlur:()=>{hi().f[1]++},withScroll:!1});_view;_el=(hi().s[1]++,null);_cancelNextChange=(hi().s[2]++,!1);constructor(e){hi().f[2]++,hi().s[3]++,super(e),hi().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return hi().f[3]++,hi().s[5]++,j_e(e,{indent:2,maxLength:40})}componentDidMount(){hi().f[4]++,hi().s[6]++,this._view=SSe({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(hi().b[0][0]++,this.props.lintType||(hi().b[0][1]++,"layer")),onChange:e=>(hi().f[5]++,hi().s[7]++,this.onChange(e)),onFocus:()=>(hi().f[6]++,hi().s[8]++,this.onFocus()),onBlur:()=>(hi().f[7]++,hi().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(hi().s[10]++,()=>{hi().f[8]++,hi().s[11]++,this.props.onFocus?(hi().b[1][0]++,hi().s[12]++,this.props.onFocus()):hi().b[1][1]++,hi().s[13]++,this.setState({isEditing:!0})});onBlur=(hi().s[14]++,()=>{hi().f[9]++,hi().s[15]++,this.props.onBlur?(hi().b[2][0]++,hi().s[16]++,this.props.onBlur()):hi().b[2][1]++,hi().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){if(hi().f[10]++,hi().s[18]++,hi().b[4][0]++,!this.state.isEditing&&(hi().b[4][1]++,e.value!==this.props.value)){hi().b[3][0]++,hi().s[19]++,this._cancelNextChange=!0;const t=(hi().s[20]++,{changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)}});hi().s[21]++,this.props.withScroll?(hi().b[5][0]++,hi().s[22]++,t.selection=this._view.state.selection,hi().s[23]++,t.scrollIntoView=!0):hi().b[5][1]++,hi().s[24]++,this._view.dispatch(t)}else hi().b[3][1]++}onChange=(hi().s[25]++,e=>{if(hi().f[11]++,hi().s[26]++,this._cancelNextChange){hi().b[6][0]++,hi().s[27]++,this._cancelNextChange=!1,hi().s[28]++,this.setState({prevValue:this._view.state.doc.toString()}),hi().s[29]++;return}else hi().b[6][1]++;const t=(hi().s[30]++,this._view.state.doc.toString());if(hi().s[31]++,this.state.prevValue!==t){hi().b[7][0]++;let i,r;hi().s[32]++;try{hi().s[33]++,i=JSON.parse(t)}catch(o){hi().s[34]++,r=o,hi().s[35]++,console.warn(o)}hi().s[36]++,r?hi().b[8][1]++:(hi().b[8][0]++,hi().s[37]++,this.props.onChange?(hi().b[9][0]++,hi().s[38]++,this.props.onChange(i)):hi().b[9][1]++)}else hi().b[7][1]++;hi().s[39]++,this.setState({prevValue:t})});render(){return hi().f[12]++,hi().s[40]++,oe.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:oe.jsx("div",{className:Ug("codemirror-container",this.props.className),ref:e=>{hi().f[13]++,hi().s[41]++,this._el=e}})})}}const Pre=(hi().s[42]++,So()(ESe));function Px(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="528ce6ccdf2ca316a82073d06d75ca2a10ac08df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:19,column:1}},1:{start:{line:5,column:2},end:{line:18,column:7}},2:{start:{line:20,column:19},end:{line:20,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:19,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA,QACX,YAAY;AAAA;AAAA,IACd;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"528ce6ccdf2ca316a82073d06d75ca2a10ac08df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Px=function(){return s},s}Px();Px().s[0]++;const BSe=n=>(Px().f[0]++,Px().s[1]++,oe.jsxs(oe.Fragment,{children:[oe.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),oe.jsx(Pre,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor",withScroll:!0}),";"]})),OSe=(Px().s[2]++,So()(BSe));var h4=KP();function ISe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return St.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const eO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xx(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function CK(n){return"nodeType"in n}function Kd(n){var e,t;return n?Xx(n)?n:CK(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function bK(n){const{Document:e}=Kd(n);return n instanceof e}function FM(n){return Xx(n)?!1:n instanceof Kd(n).HTMLElement}function Ure(n){return n instanceof Kd(n).SVGElement}function Jx(n){return n?Xx(n)?n.document:CK(n)?bK(n)?n:FM(n)||Ure(n)?n.ownerDocument:document:document:document}const Tg=eO?St.useLayoutEffect:St.useEffect;function _K(n){const e=St.useRef(n);return Tg(()=>{e.current=n}),St.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function TSe(){const n=St.useRef(null),e=St.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=St.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function K5(n,e){e===void 0&&(e=[n]);const t=St.useRef(n);return Tg(()=>{t.current!==n&&(t.current=n)},e),t}function zM(n,e){const t=St.useRef();return St.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function g6(n){const e=_K(n),t=St.useRef(null),i=St.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function oP(n){const e=St.useRef();return St.useEffect(()=>{e.current=n},[n]),e.current}let U7={};function jM(n,e){return St.useMemo(()=>{if(e)return e;const t=U7[n]==null?0:U7[n]+1;return U7[n]=t,n+"-"+t},[n,e])}function Lre(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,d]of a){const p=o[c];p!=null&&(o[c]=p+n*d)}return o},{...e})}}const sx=Lre(1),y6=Lre(-1);function kSe(n){return"clientX"in n&&"clientY"in n}function xK(n){if(!n)return!1;const{KeyboardEvent:e}=Kd(n.target);return e&&n instanceof e}function DSe(n){if(!n)return!1;const{TouchEvent:e}=Kd(n.target);return e&&n instanceof e}function sP(n){if(DSe(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return kSe(n)?{x:n.clientX,y:n.clientY}:null}const F5=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[F5.Translate.toString(n),F5.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),lQ="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function RSe(n){return n.matches(lQ)?n:n.querySelector(lQ)}const PSe={display:"none"};function USe(n){let{id:e,value:t}=n;return En.createElement("div",{id:e,style:PSe},t)}function LSe(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return En.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function KSe(){const[n,e]=St.useState("");return{announce:St.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const Kre=St.createContext(null);function FSe(n){const e=St.useContext(Kre);St.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function zSe(){const[n]=St.useState(()=>new Set),e=St.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[St.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const jSe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},NSe={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function GSe(n){let{announcements:e=NSe,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=jSe}=n;const{announce:o,announcement:s}=KSe(),a=jM("DndLiveRegion"),[c,d]=St.useState(!1);if(St.useEffect(()=>{d(!0)},[]),FSe(St.useMemo(()=>({onDragStart(v){let{active:M}=v;o(e.onDragStart({active:M}))},onDragMove(v){let{active:M,over:E}=v;e.onDragMove&&o(e.onDragMove({active:M,over:E}))},onDragOver(v){let{active:M,over:E}=v;o(e.onDragOver({active:M,over:E}))},onDragEnd(v){let{active:M,over:E}=v;o(e.onDragEnd({active:M,over:E}))},onDragCancel(v){let{active:M,over:E}=v;o(e.onDragCancel({active:M,over:E}))}}),[o,e])),!c)return null;const p=En.createElement(En.Fragment,null,En.createElement(USe,{id:i,value:r.draggable}),En.createElement(LSe,{id:a,announcement:s}));return t?h4.createPortal(p,t):p}var pc;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(pc||(pc={}));function v6(){}function WSe(n,e){return St.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function QSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return St.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Gp=Object.freeze({x:0,y:0});function qSe(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function YSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function VSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function $Se(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function uQ(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const HSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=uQ(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const d=qSe(uQ(c),r);o.push({id:a,data:{droppableContainer:s,value:d}})}}return o.sort(YSe)};function ZSe(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,d=n.width*n.height,p=s*a,v=p/(c+d-p);return Number(v.toFixed(4))}return 0}const XSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=ZSe(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(VSe)};function JSe(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Fre(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Gp}function eEe(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const tEe=eEe(1);function nEe(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function iEe(n,e,t){const i=nEe(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),d=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=r?n.width/r:n.width,v=o?n.height/o:n.height;return{width:p,height:v,top:d,right:c+p,bottom:d+v,left:c}}const rEe={ignoreTransform:!1};function e3(n,e){e===void 0&&(e=rEe);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=Kd(n).getComputedStyle(n);d&&(t=iEe(t,d,p))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function cQ(n){return e3(n,{ignoreTransform:!0})}function oEe(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function sEe(n,e){return e===void 0&&(e=Kd(n).getComputedStyle(n)),e.position==="fixed"}function aEe(n,e){e===void 0&&(e=Kd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function MK(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(bK(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!FM(r)||Ure(r)||t.includes(r))return t;const o=Kd(n).getComputedStyle(r);return r!==n&&aEe(r,o)&&t.push(r),sEe(r,o)?t:i(r.parentNode)}return n?i(n):t}function zre(n){const[e]=MK(n,1);return e??null}function L7(n){return!eO||!n?null:Xx(n)?n:CK(n)?bK(n)||n===Jx(n).scrollingElement?window:FM(n)?n:null:null}function jre(n){return Xx(n)?n.scrollX:n.scrollLeft}function Nre(n){return Xx(n)?n.scrollY:n.scrollTop}function aP(n){return{x:jre(n),y:Nre(n)}}var Yc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Yc||(Yc={}));function Gre(n){return!eO||!n?!1:n===document.scrollingElement}function Wre(n){const e={x:0,y:0},t=Gre(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const lEe={x:.2,y:.2};function uEe(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=lEe);const{isTop:d,isBottom:p,isLeft:v,isRight:M}=Wre(n),E={x:0,y:0},P={x:0,y:0},U={height:e.height*r.y,width:e.width*r.x};return!d&&o<=e.top+U.height?(E.y=Yc.Backward,P.y=i*Math.abs((e.top+U.height-o)/U.height)):!p&&c>=e.bottom-U.height&&(E.y=Yc.Forward,P.y=i*Math.abs((e.bottom-U.height-c)/U.height)),!M&&a>=e.right-U.width?(E.x=Yc.Forward,P.x=i*Math.abs((e.right-U.width-a)/U.width)):!v&&s<=e.left+U.width&&(E.x=Yc.Backward,P.x=i*Math.abs((e.left+U.width-s)/U.width)),{direction:E,speed:P}}function cEe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function Qre(n){return n.reduce((e,t)=>sx(e,aP(t)),Gp)}function AEe(n){return n.reduce((e,t)=>e+jre(t),0)}function hEe(n){return n.reduce((e,t)=>e+Nre(t),0)}function dEe(n,e){if(e===void 0&&(e=e3),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);zre(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const fEe=[["x",["left","right"],AEe],["y",["top","bottom"],hEe]];class wK{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=MK(t),r=Qre(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of fEe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const d=a(i),p=r[o]-d;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class L4{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function mEe(n){const{EventTarget:e}=Kd(n);return n instanceof e?n:Jx(n)}function K7(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var gm;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(gm||(gm={}));function AQ(n){n.preventDefault()}function pEe(n){n.stopPropagation()}var Es;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Es||(Es={}));const qre={start:[Es.Space,Es.Enter],cancel:[Es.Esc],end:[Es.Space,Es.Enter,Es.Tab]},gEe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Es.Right:return{...t,x:t.x+25};case Es.Left:return{...t,x:t.x-25};case Es.Down:return{...t,y:t.y+25};case Es.Up:return{...t,y:t.y-25}}};class Yre{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new L4(Jx(t)),this.windowListeners=new L4(Kd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(gm.Resize,this.handleCancel),this.windowListeners.add(gm.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(gm.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&dEe(i),t(Gp)}handleKeyDown(e){if(xK(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=qre,coordinateGetter:s=gEe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=i.current,p=d?{x:d.left,y:d.top}:Gp;this.referenceCoordinates||(this.referenceCoordinates=p);const v=s(e,{active:t,context:i.current,currentCoordinates:p});if(v){const M=y6(v,p),E={x:0,y:0},{scrollableAncestors:P}=i.current;for(const U of P){const z=e.code,{isTop:V,isRight:Z,isLeft:X,isBottom:re,maxScroll:ee,minScroll:ne}=Wre(U),q=cEe(U),le={x:Math.min(z===Es.Right?q.right-q.width/2:q.right,Math.max(z===Es.Right?q.left:q.left+q.width/2,v.x)),y:Math.min(z===Es.Down?q.bottom-q.height/2:q.bottom,Math.max(z===Es.Down?q.top:q.top+q.height/2,v.y))},ue=z===Es.Right&&!Z||z===Es.Left&&!X,ve=z===Es.Down&&!re||z===Es.Up&&!V;if(ue&&le.x!==v.x){const pe=U.scrollLeft+M.x,Be=z===Es.Right&&pe<=ee.x||z===Es.Left&&pe>=ne.x;if(Be&&!M.y){U.scrollTo({left:pe,behavior:a});return}Be?E.x=U.scrollLeft-pe:E.x=z===Es.Right?U.scrollLeft-ee.x:U.scrollLeft-ne.x,E.x&&U.scrollBy({left:-E.x,behavior:a});break}else if(ve&&le.y!==v.y){const pe=U.scrollTop+M.y,Be=z===Es.Down&&pe<=ee.y||z===Es.Up&&pe>=ne.y;if(Be&&!M.x){U.scrollTo({top:pe,behavior:a});return}Be?E.y=U.scrollTop-pe:E.y=z===Es.Down?U.scrollTop-ee.y:U.scrollTop-ne.y,E.y&&U.scrollBy({top:-E.y,behavior:a});break}}this.handleMove(e,sx(y6(v,this.referenceCoordinates),E))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Yre.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=qre,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function hQ(n){return!!(n&&"distance"in n)}function dQ(n){return!!(n&&"delay"in n)}class SK{constructor(e,t,i){var r;i===void 0&&(i=mEe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=Jx(s),this.documentListeners=new L4(this.document),this.listeners=new L4(i),this.windowListeners=new L4(Kd(s)),this.initialCoordinates=(r=sP(o))!=null?r:Gp,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(gm.Resize,this.handleCancel),this.windowListeners.add(gm.DragStart,AQ),this.windowListeners.add(gm.VisibilityChange,this.handleCancel),this.windowListeners.add(gm.ContextMenu,AQ),this.documentListeners.add(gm.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dQ(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(hQ(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(gm.Click,pEe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(gm.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=sP(e))!=null?t:Gp,d=y6(r,c);if(!i&&a){if(hQ(a)){if(a.tolerance!=null&&K7(d,a.tolerance))return this.handleCancel();if(K7(d,a.distance))return this.handleStart()}if(dQ(a)&&K7(d,a.tolerance))return this.handleCancel();this.handlePending(a,d);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Es.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const yEe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class EK extends SK{constructor(e){const{event:t}=e,i=Jx(t.target);super(e,yEe,i)}}EK.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const vEe={move:{name:"mousemove"},end:{name:"mouseup"}};var lP;(function(n){n[n.RightClick=2]="RightClick"})(lP||(lP={}));class CEe extends SK{constructor(e){super(e,vEe,Jx(e.event.target))}}CEe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===lP.RightClick?!1:(i?.({event:t}),!0)}}];const F7={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class bEe extends SK{constructor(e){super(e,F7)}static setup(){return window.addEventListener(F7.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(F7.move.name,e)};function e(){}}}bEe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var K4;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(K4||(K4={}));var C6;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(C6||(C6={}));function _Ee(n){let{acceleration:e,activator:t=K4.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=C6.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:p,delta:v,threshold:M}=n;const E=MEe({delta:v,disabled:!o}),[P,U]=TSe(),z=St.useRef({x:0,y:0}),V=St.useRef({x:0,y:0}),Z=St.useMemo(()=>{switch(t){case K4.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case K4.DraggableRect:return r}},[t,r,c]),X=St.useRef(null),re=St.useCallback(()=>{const ne=X.current;if(!ne)return;const q=z.current.x*V.current.x,le=z.current.y*V.current.y;ne.scrollBy(q,le)},[]),ee=St.useMemo(()=>a===C6.TreeOrder?[...d].reverse():d,[a,d]);St.useEffect(()=>{if(!o||!d.length||!Z){U();return}for(const ne of ee){if(i?.(ne)===!1)continue;const q=d.indexOf(ne),le=p[q];if(!le)continue;const{direction:ue,speed:ve}=uEe(ne,le,Z,e,M);for(const pe of["x","y"])E[pe][ue[pe]]||(ve[pe]=0,ue[pe]=0);if(ve.x>0||ve.y>0){U(),X.current=ne,P(re,s),z.current=ve,V.current=ue;return}}z.current={x:0,y:0},V.current={x:0,y:0},U()},[e,re,i,U,o,s,JSON.stringify(Z),JSON.stringify(E),P,d,ee,p,JSON.stringify(M)])}const xEe={x:{[Yc.Backward]:!1,[Yc.Forward]:!1},y:{[Yc.Backward]:!1,[Yc.Forward]:!1}};function MEe(n){let{delta:e,disabled:t}=n;const i=oP(e);return zM(r=>{if(t||!i||!r)return xEe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Yc.Backward]:r.x[Yc.Backward]||o.x===-1,[Yc.Forward]:r.x[Yc.Forward]||o.x===1},y:{[Yc.Backward]:r.y[Yc.Backward]||o.y===-1,[Yc.Forward]:r.y[Yc.Forward]||o.y===1}}},[t,e,i])}function wEe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return zM(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function SEe(n,e){return St.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var z5;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(z5||(z5={}));var uP;(function(n){n.Optimized="optimized"})(uP||(uP={}));const fQ=new Map;function EEe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=St.useState(null),{frequency:a,measure:c,strategy:d}=r,p=St.useRef(n),v=z(),M=K5(v),E=St.useCallback(function(V){V===void 0&&(V=[]),!M.current&&s(Z=>Z===null?V:Z.concat(V.filter(X=>!Z.includes(X))))},[M]),P=St.useRef(null),U=zM(V=>{if(v&&!t)return fQ;if(!V||V===fQ||p.current!==n||o!=null){const Z=new Map;for(let X of n){if(!X)continue;if(o&&o.length>0&&!o.includes(X.id)&&X.rect.current){Z.set(X.id,X.rect.current);continue}const re=X.node.current,ee=re?new wK(c(re),re):null;X.rect.current=ee,ee&&Z.set(X.id,ee)}return Z}return V},[n,o,t,v,c]);return St.useEffect(()=>{p.current=n},[n]),St.useEffect(()=>{v||E()},[t,v]),St.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),St.useEffect(()=>{v||typeof a!="number"||P.current!==null||(P.current=setTimeout(()=>{E(),P.current=null},a))},[a,v,E,...i]),{droppableRects:U,measureDroppableContainers:E,measuringScheduled:o!=null};function z(){switch(d){case z5.Always:return!1;case z5.BeforeDragging:return t;default:return!t}}}function Vre(n,e){return zM(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function BEe(n,e){return Vre(n,e)}function OEe(n){let{callback:e,disabled:t}=n;const i=_K(e),r=St.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return St.useEffect(()=>()=>r?.disconnect(),[r]),r}function tO(n){let{callback:e,disabled:t}=n;const i=_K(e),r=St.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return St.useEffect(()=>()=>r?.disconnect(),[r]),r}function IEe(n){return new wK(e3(n),n)}function mQ(n,e,t){e===void 0&&(e=IEe);const[i,r]=St.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=c??t)!=null?d:null}const p=e(n);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const s=OEe({callback(c){if(n)for(const d of c){const{type:p,target:v}=d;if(p==="childList"&&v instanceof HTMLElement&&v.contains(n)){o();break}}}}),a=tO({callback:o});return Tg(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function TEe(n){const e=Vre(n);return Fre(n,e)}const pQ=[];function kEe(n){const e=St.useRef(n),t=zM(i=>n?i&&i!==pQ&&n&&e.current&&n.parentNode===e.current.parentNode?i:MK(n):pQ,[n]);return St.useEffect(()=>{e.current=n},[n]),t}function DEe(n){const[e,t]=St.useState(null),i=St.useRef(n),r=St.useCallback(o=>{const s=L7(o.target);s&&t(a=>a?(a.set(s,aP(s)),new Map(a)):null)},[]);return St.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const d=L7(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,aP(d)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const d=L7(c);d?.removeEventListener("scroll",r)})}},[r,n]),St.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>sx(o,s),Gp):Qre(n):Gp,[n,e])}function gQ(n,e){e===void 0&&(e=[]);const t=St.useRef(null);return St.useEffect(()=>{t.current=null},e),St.useEffect(()=>{const i=n!==Gp;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?y6(n,t.current):Gp}function REe(n){St.useEffect(()=>{if(!eO)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function PEe(n,e){return St.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function $re(n){return St.useMemo(()=>n?oEe(n):null,[n])}const yQ=[];function UEe(n,e){e===void 0&&(e=e3);const[t]=n,i=$re(t?Kd(t):null),[r,o]=St.useState(yQ);function s(){o(()=>n.length?n.map(c=>Gre(c)?i:new wK(e(c),c)):yQ)}const a=tO({callback:s});return Tg(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function LEe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return FM(e)?e:n}function KEe(n){let{measure:e}=n;const[t,i]=St.useState(null),r=St.useCallback(d=>{for(const{target:p}of d)if(FM(p)){i(v=>{const M=e(p);return v?{...v,width:M.width,height:M.height}:M});break}},[e]),o=tO({callback:r}),s=St.useCallback(d=>{const p=LEe(d);o?.disconnect(),p&&o?.observe(p),i(p?e(p):null)},[e,o]),[a,c]=g6(s);return St.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const FEe=[{sensor:EK,options:{}},{sensor:Yre,options:{}}],zEe={current:{}},QS={draggable:{measure:cQ},droppable:{measure:cQ,strategy:z5.WhileDragging,frequency:uP.Optimized},dragOverlay:{measure:e3}};class F4 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const jEe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new F4,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:v6},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:QS,measureDroppableContainers:v6,windowRect:null,measuringScheduled:!1},NEe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:v6,draggableNodes:new Map,over:null,measureDroppableContainers:v6},nO=St.createContext(NEe),Hre=St.createContext(jEe);function GEe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new F4}}}function WEe(n,e){switch(e.type){case pc.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case pc.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case pc.DragEnd:case pc.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case pc.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new F4(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case pc.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new F4(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case pc.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new F4(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function QEe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=St.useContext(nO),o=oP(i),s=oP(t?.id);return St.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!xK(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:d}=a;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[c.current,d.current]){if(!p)continue;const v=RSe(p);if(v){v.focus();break}}})}},[i,e,r,s,o]),null}function qEe(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function YEe(n){return St.useMemo(()=>({draggable:{...QS.draggable,...n?.draggable},droppable:{...QS.droppable,...n?.droppable},dragOverlay:{...QS.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function VEe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=St.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;Tg(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const p=t(d),v=Fre(p,i);if(s||(v.x=0),a||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const M=zre(d);M&&M.scrollBy({top:v.y,left:v.x})}},[e,s,a,i,t])}const Zre=St.createContext({...Gp,scaleX:1,scaleY:1});var hv;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(hv||(hv={}));const $Ee=St.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:d,sensors:p=FEe,collisionDetection:v=XSe,measuring:M,modifiers:E,...P}=e;const U=St.useReducer(WEe,void 0,GEe),[z,V]=U,[Z,X]=zSe(),[re,ee]=St.useState(hv.Uninitialized),ne=re===hv.Initialized,{draggable:{active:q,nodes:le,translate:ue},droppable:{containers:ve}}=z,pe=q!=null?le.get(q):null,Be=St.useRef({initial:null,translated:null}),Ce=St.useMemo(()=>{var _n;return q!=null?{id:q,data:(_n=pe?.data)!=null?_n:zEe,rect:Be}:null},[q,pe]),Oe=St.useRef(null),[Fe,Ee]=St.useState(null),[Ve,ut]=St.useState(null),mt=K5(P,Object.values(P)),Pe=jM("DndDescribedBy",s),De=St.useMemo(()=>ve.getEnabled(),[ve]),Xe=YEe(M),{droppableRects:Ke,measureDroppableContainers:Bt,measuringScheduled:ot}=EEe(De,{dragging:ne,dependencies:[ue.x,ue.y],config:Xe.droppable}),Et=wEe(le,q),Rt=St.useMemo(()=>Ve?sP(Ve):null,[Ve]),Ue=bn(),ke=BEe(Et,Xe.draggable.measure);VEe({activeNode:q!=null?le.get(q):null,config:Ue.layoutShiftCompensation,initialRect:ke,measure:Xe.draggable.measure});const Te=mQ(Et,Xe.draggable.measure,ke),He=mQ(Et?Et.parentElement:null),Ct=St.useRef({activatorEvent:null,active:null,activeNode:Et,collisionRect:null,collisions:null,droppableRects:Ke,draggableNodes:le,draggingNode:null,draggingNodeRect:null,droppableContainers:ve,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),vt=ve.getNodeFor((t=Ct.current.over)==null?void 0:t.id),wt=KEe({measure:Xe.dragOverlay.measure}),Ft=(i=wt.nodeRef.current)!=null?i:Et,Pt=ne?(r=wt.rect)!=null?r:Te:null,nn=!!(wt.nodeRef.current&&wt.rect),Kn=TEe(nn?null:Te),Wn=$re(Ft?Kd(Ft):null),Mi=kEe(ne?vt??Et:null),Fn=UEe(Mi),Ln=qEe(E,{transform:{x:ue.x-Kn.x,y:ue.y-Kn.y,scaleX:1,scaleY:1},activatorEvent:Ve,active:Ce,activeNodeRect:Te,containerNodeRect:He,draggingNodeRect:Pt,over:Ct.current.over,overlayNodeRect:wt.rect,scrollableAncestors:Mi,scrollableAncestorRects:Fn,windowRect:Wn}),In=Rt?sx(Rt,ue):null,oi=DEe(Mi),Tn=gQ(oi),je=gQ(oi,[Te]),$=sx(Ln,Tn),j=Pt?tEe(Pt,Ln):null,Q=Ce&&j?v({active:Ce,collisionRect:j,droppableRects:Ke,droppableContainers:De,pointerCoordinates:In}):null,Ae=$Se(Q,"id"),[Me,Ne]=St.useState(null),We=nn?Ln:sx(Ln,je),it=JSe(We,(o=Me?.rect)!=null?o:null,Te),bt=St.useRef(null),Ye=St.useCallback((_n,Mt)=>{let{sensor:xi,options:ji}=Mt;if(Oe.current==null)return;const Qn=le.get(Oe.current);if(!Qn)return;const Zn=_n.nativeEvent,Yi=new xi({active:Oe.current,activeNode:Qn,event:Zn,options:ji,context:Ct,onAbort(Ui){if(!le.get(Ui))return;const{onDragAbort:Ki}=mt.current,Ir={id:Ui};Ki?.(Ir),Z({type:"onDragAbort",event:Ir})},onPending(Ui,Vi,Ki,Ir){if(!le.get(Ui))return;const{onDragPending:cn}=mt.current,rr={id:Ui,constraint:Vi,initialCoordinates:Ki,offset:Ir};cn?.(rr),Z({type:"onDragPending",event:rr})},onStart(Ui){const Vi=Oe.current;if(Vi==null)return;const Ki=le.get(Vi);if(!Ki)return;const{onDragStart:Ir}=mt.current,Eo={activatorEvent:Zn,active:{id:Vi,data:Ki.data,rect:Be}};h4.unstable_batchedUpdates(()=>{Ir?.(Eo),ee(hv.Initializing),V({type:pc.DragStart,initialCoordinates:Ui,active:Vi}),Z({type:"onDragStart",event:Eo}),Ee(bt.current),ut(Zn)})},onMove(Ui){V({type:pc.DragMove,coordinates:Ui})},onEnd:qi(pc.DragEnd),onCancel:qi(pc.DragCancel)});bt.current=Yi;function qi(Ui){return async function(){const{active:Ki,collisions:Ir,over:Eo,scrollAdjustedTranslate:cn}=Ct.current;let rr=null;if(Ki&&cn){const{cancelDrop:Yo}=mt.current;rr={activatorEvent:Zn,active:Ki,collisions:Ir,delta:cn,over:Eo},Ui===pc.DragEnd&&typeof Yo=="function"&&await Promise.resolve(Yo(rr))&&(Ui=pc.DragCancel)}Oe.current=null,h4.unstable_batchedUpdates(()=>{V({type:Ui}),ee(hv.Uninitialized),Ne(null),Ee(null),ut(null),bt.current=null;const Yo=Ui===pc.DragEnd?"onDragEnd":"onDragCancel";if(rr){const aa=mt.current[Yo];aa?.(rr),Z({type:Yo,event:rr})}})}}},[le]),at=St.useCallback((_n,Mt)=>(xi,ji)=>{const Qn=xi.nativeEvent,Zn=le.get(ji);if(Oe.current!==null||!Zn||Qn.dndKit||Qn.defaultPrevented)return;const Yi={active:Zn};_n(xi,Mt.options,Yi)===!0&&(Qn.dndKit={capturedBy:Mt.sensor},Oe.current=ji,Ye(xi,Mt))},[le,Ye]),C=SEe(p,at);REe(p),Tg(()=>{Te&&re===hv.Initializing&&ee(hv.Initialized)},[Te,re]),St.useEffect(()=>{const{onDragMove:_n}=mt.current,{active:Mt,activatorEvent:xi,collisions:ji,over:Qn}=Ct.current;if(!Mt||!xi)return;const Zn={active:Mt,activatorEvent:xi,collisions:ji,delta:{x:$.x,y:$.y},over:Qn};h4.unstable_batchedUpdates(()=>{_n?.(Zn),Z({type:"onDragMove",event:Zn})})},[$.x,$.y]),St.useEffect(()=>{const{active:_n,activatorEvent:Mt,collisions:xi,droppableContainers:ji,scrollAdjustedTranslate:Qn}=Ct.current;if(!_n||Oe.current==null||!Mt||!Qn)return;const{onDragOver:Zn}=mt.current,Yi=ji.get(Ae),qi=Yi&&Yi.rect.current?{id:Yi.id,rect:Yi.rect.current,data:Yi.data,disabled:Yi.disabled}:null,Ui={active:_n,activatorEvent:Mt,collisions:xi,delta:{x:Qn.x,y:Qn.y},over:qi};h4.unstable_batchedUpdates(()=>{Ne(qi),Zn?.(Ui),Z({type:"onDragOver",event:Ui})})},[Ae]),Tg(()=>{Ct.current={activatorEvent:Ve,active:Ce,activeNode:Et,collisionRect:j,collisions:Q,droppableRects:Ke,draggableNodes:le,draggingNode:Ft,draggingNodeRect:Pt,droppableContainers:ve,over:Me,scrollableAncestors:Mi,scrollAdjustedTranslate:$},Be.current={initial:Pt,translated:j}},[Ce,Et,Q,j,le,Ft,Pt,Ke,ve,Me,Mi,$]),_Ee({...Ue,delta:ue,draggingRect:j,pointerCoordinates:In,scrollableAncestors:Mi,scrollableAncestorRects:Fn});const Ut=St.useMemo(()=>({active:Ce,activeNode:Et,activeNodeRect:Te,activatorEvent:Ve,collisions:Q,containerNodeRect:He,dragOverlay:wt,draggableNodes:le,droppableContainers:ve,droppableRects:Ke,over:Me,measureDroppableContainers:Bt,scrollableAncestors:Mi,scrollableAncestorRects:Fn,measuringConfiguration:Xe,measuringScheduled:ot,windowRect:Wn}),[Ce,Et,Te,Ve,Q,He,wt,le,ve,Ke,Me,Bt,Mi,Fn,Xe,ot,Wn]),gn=St.useMemo(()=>({activatorEvent:Ve,activators:C,active:Ce,activeNodeRect:Te,ariaDescribedById:{draggable:Pe},dispatch:V,draggableNodes:le,over:Me,measureDroppableContainers:Bt}),[Ve,C,Ce,Te,V,Pe,le,Me,Bt]);return En.createElement(Kre.Provider,{value:X},En.createElement(nO.Provider,{value:gn},En.createElement(Hre.Provider,{value:Ut},En.createElement(Zre.Provider,{value:it},d)),En.createElement(QEe,{disabled:a?.restoreFocus===!1})),En.createElement(GSe,{...a,hiddenTextDescribedById:Pe}));function bn(){const _n=Fe?.autoScrollEnabled===!1,Mt=typeof c=="object"?c.enabled===!1:c===!1,xi=ne&&!_n&&!Mt;return typeof c=="object"?{...c,enabled:xi}:{enabled:xi}}}),HEe=St.createContext(null),vQ="button",ZEe="Draggable";function XEe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=jM(ZEe),{activators:s,activatorEvent:a,active:c,activeNodeRect:d,ariaDescribedById:p,draggableNodes:v,over:M}=St.useContext(nO),{role:E=vQ,roleDescription:P="draggable",tabIndex:U=0}=r??{},z=c?.id===e,V=St.useContext(z?Zre:HEe),[Z,X]=g6(),[re,ee]=g6(),ne=PEe(s,e),q=K5(t);Tg(()=>(v.set(e,{id:e,key:o,node:Z,activatorNode:re,data:q}),()=>{const ue=v.get(e);ue&&ue.key===o&&v.delete(e)}),[v,e]);const le=St.useMemo(()=>({role:E,tabIndex:U,"aria-disabled":i,"aria-pressed":z&&E===vQ?!0:void 0,"aria-roledescription":P,"aria-describedby":p.draggable}),[i,E,U,z,P,p.draggable]);return{active:c,activatorEvent:a,activeNodeRect:d,attributes:le,isDragging:z,listeners:i?void 0:ne,node:Z,over:M,setNodeRef:X,setActivatorNodeRef:ee,transform:V}}function JEe(){return St.useContext(Hre)}const e6e="Droppable",t6e={timeout:25};function n6e(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=jM(e6e),{active:s,dispatch:a,over:c,measureDroppableContainers:d}=St.useContext(nO),p=St.useRef({disabled:t}),v=St.useRef(!1),M=St.useRef(null),E=St.useRef(null),{disabled:P,updateMeasurementsFor:U,timeout:z}={...t6e,...r},V=K5(U??i),Z=St.useCallback(()=>{if(!v.current){v.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{d(Array.isArray(V.current)?V.current:[V.current]),E.current=null},z)},[z]),X=tO({callback:Z,disabled:P||!s}),re=St.useCallback((le,ue)=>{X&&(ue&&(X.unobserve(ue),v.current=!1),le&&X.observe(le))},[X]),[ee,ne]=g6(re),q=K5(e);return St.useEffect(()=>{!X||!ee.current||(X.disconnect(),v.current=!1,X.observe(ee.current))},[ee,X]),St.useEffect(()=>(a({type:pc.RegisterDroppable,element:{id:i,key:o,disabled:t,node:ee,rect:M,data:q}}),()=>a({type:pc.UnregisterDroppable,key:o,id:i})),[i]),St.useEffect(()=>{t!==p.current.disabled&&(a({type:pc.SetDroppableDisabled,id:i,key:o,disabled:t}),p.current.disabled=t)},[i,o,t,a]),{active:s,rect:M,isOver:c?.id===i,node:ee,over:c,setNodeRef:ne}}function Xre(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function i6e(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function Jw(n){return n!==null&&n>=0}function r6e(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function o6e(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Jre=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=Xre(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},eS={scaleX:1,scaleY:1},s6e=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const d=o[s];return d?{x:0,y:t<s?d.top+d.height-(a.top+a.height):d.top-a.top,...eS}:null}const c=a6e(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...eS}:r<t&&r>=s?{x:0,y:a.height+c,...eS}:{x:0,y:0,...eS}};function a6e(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const eoe="Sortable",toe=En.createContext({activeIndex:-1,containerId:eoe,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jre,disabled:{draggable:!1,droppable:!1}});function l6e(n){let{children:e,id:t,items:i,strategy:r=Jre,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:d,measureDroppableContainers:p}=JEe(),v=jM(eoe,t),M=a.rect!==null,E=St.useMemo(()=>i.map(ne=>typeof ne=="object"&&"id"in ne?ne.id:ne),[i]),P=s!=null,U=s?E.indexOf(s.id):-1,z=d?E.indexOf(d.id):-1,V=St.useRef(E),Z=!r6e(E,V.current),X=z!==-1&&U===-1||Z,re=o6e(o);Tg(()=>{Z&&P&&p(E)},[Z,E,P,p]),St.useEffect(()=>{V.current=E},[E]);const ee=St.useMemo(()=>({activeIndex:U,containerId:v,disabled:re,disableTransforms:X,items:E,overIndex:z,useDragOverlay:M,sortedRects:i6e(E,c),strategy:r}),[U,v,re.draggable,re.droppable,X,E,z,c,M,r]);return En.createElement(toe.Provider,{value:ee},e)}const u6e=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return Xre(t,i,r).indexOf(e)},c6e=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:d}=n;return!d||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},A6e={duration:200,easing:"ease"},noe="transform",h6e=F5.Transition.toString({property:noe,duration:0,easing:"linear"}),d6e={roleDescription:"sortable"};function f6e(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=St.useState(null),a=St.useRef(t);return Tg(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const d=e3(i.current,{ignoreTransform:!0}),p={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(p.x||p.y)&&s(p)}}t!==a.current&&(a.current=t)},[e,t,i,r]),St.useEffect(()=>{o&&s(null)},[o]),o}function m6e(n){let{animateLayoutChanges:e=c6e,attributes:t,disabled:i,data:r,getNewIndex:o=u6e,id:s,strategy:a,resizeObserverConfig:c,transition:d=A6e}=n;const{items:p,containerId:v,activeIndex:M,disabled:E,disableTransforms:P,sortedRects:U,overIndex:z,useDragOverlay:V,strategy:Z}=St.useContext(toe),X=p6e(i,E),re=p.indexOf(s),ee=St.useMemo(()=>({sortable:{containerId:v,index:re,items:p},...r}),[v,r,re,p]),ne=St.useMemo(()=>p.slice(p.indexOf(s)),[p,s]),{rect:q,node:le,isOver:ue,setNodeRef:ve}=n6e({id:s,data:ee,disabled:X.droppable,resizeObserverConfig:{updateMeasurementsFor:ne,...c}}),{active:pe,activatorEvent:Be,activeNodeRect:Ce,attributes:Oe,setNodeRef:Fe,listeners:Ee,isDragging:Ve,over:ut,setActivatorNodeRef:mt,transform:Pe}=XEe({id:s,data:ee,attributes:{...d6e,...t},disabled:X.draggable}),De=ISe(ve,Fe),Xe=!!pe,Ke=Xe&&!P&&Jw(M)&&Jw(z),Bt=!V&&Ve,ot=Bt&&Ke?Pe:null,Rt=Ke?ot??(a??Z)({rects:U,activeNodeRect:Ce,activeIndex:M,overIndex:z,index:re}):null,Ue=Jw(M)&&Jw(z)?o({id:s,items:p,activeIndex:M,overIndex:z}):re,ke=pe?.id,Te=St.useRef({activeId:ke,items:p,newIndex:Ue,containerId:v}),He=p!==Te.current.items,Ct=e({active:pe,containerId:v,isDragging:Ve,isSorting:Xe,id:s,index:re,items:p,newIndex:Te.current.newIndex,previousItems:Te.current.items,previousContainerId:Te.current.containerId,transition:d,wasDragging:Te.current.activeId!=null}),vt=f6e({disabled:!Ct,index:re,node:le,rect:q});return St.useEffect(()=>{Xe&&Te.current.newIndex!==Ue&&(Te.current.newIndex=Ue),v!==Te.current.containerId&&(Te.current.containerId=v),p!==Te.current.items&&(Te.current.items=p)},[Xe,Ue,v,p]),St.useEffect(()=>{if(ke===Te.current.activeId)return;if(ke!=null&&Te.current.activeId==null){Te.current.activeId=ke;return}const Ft=setTimeout(()=>{Te.current.activeId=ke},50);return()=>clearTimeout(Ft)},[ke]),{active:pe,activeIndex:M,attributes:Oe,data:ee,rect:q,index:re,newIndex:Ue,items:p,isOver:ue,isSorting:Xe,isDragging:Ve,listeners:Ee,node:le,overIndex:z,over:ut,setNodeRef:De,setActivatorNodeRef:mt,setDroppableNodeRef:ve,setDraggableNodeRef:Fe,transform:vt??Rt,transition:wt()};function wt(){if(vt||He&&Te.current.newIndex===re)return h6e;if(!(Bt&&!xK(Be)||!d)&&(Xe||Ct))return F5.Transition.toString({...d,property:noe})}}function p6e(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Es.Down,Es.Right,Es.Up,Es.Left;function lb(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return lb=function(){return s},s}lb();class g6e extends En.Component{render(){lb().f[0]++;const e=(lb().s[0]++,{width:20,height:20,...this.props.style});return lb().s[1]++,this.props.isCollapsed?(lb().b[0][0]++,oe.jsx(uJ,{style:e})):(lb().b[0][1]++,oe.jsx(lJ,{style:e}))}}function F2(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return F2=function(){return s},s}F2();class y6e extends En.Component{render(){return F2().f[0]++,F2().s[0]++,oe.jsx("li",{className:"maputnik-layer-list-group",children:oe.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(F2().f[1]++,F2().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[oe.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(g6e,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function $i(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $i=function(){return s},s}$i();$i().s[0]++;const v6e=n=>{$i().f[0]++;const{dragAttributes:e,dragListeners:t}=($i().s[1]++,n);return $i().s[2]++,oe.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[oe.jsx(AJ,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),oe.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class z7 extends En.Component{renderIcon(){switch($i().f[1]++,$i().s[3]++,this.props.action){case"duplicate":return $i().b[0][0]++,$i().s[4]++,oe.jsx(Zfe,{});case"show":return $i().b[0][1]++,$i().s[5]++,oe.jsx($fe,{});case"hide":return $i().b[0][2]++,$i().s[6]++,oe.jsx(Vfe,{});case"delete":return $i().b[0][3]++,$i().s[7]++,oe.jsx(Hb,{})}}render(){$i().f[2]++;const{classBlockName:e,classBlockModifier:t}=($i().s[8]++,this.props);let i=($i().s[9]++,"");return $i().s[10]++,e?($i().b[1][0]++,$i().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,$i().s[12]++,t?($i().b[2][0]++,$i().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):$i().b[2][1]++):$i().b[1][1]++,$i().s[14]++,oe.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const C6e=($i().s[15]++,En.forwardRef((n,e)=>{$i().f[3]++;const{isSelected:t=($i().b[3][0]++,!1),visibility:i=($i().b[4][0]++,"visible"),onLayerCopy:r=($i().b[5][0]++,()=>{$i().f[4]++}),onLayerDestroy:o=($i().b[6][0]++,()=>{$i().f[5]++}),onLayerVisibilityToggle:s=($i().b[7][0]++,()=>{$i().f[6]++})}=($i().s[16]++,n),{attributes:a,listeners:c,setNodeRef:d,transform:p,transition:v,isDragging:M}=($i().s[17]++,m6e({id:n.layerId})),E=($i().s[18]++,{transform:F5.Transform.toString(p),transition:v,opacity:M?($i().b[8][0]++,.5):($i().b[8][1]++,1)}),P=($i().s[19]++,i==="visible"?($i().b[9][0]++,"show"):($i().b[9][1]++,"hide")),U=($i().s[20]++,e);return $i().s[21]++,oe.jsx(dx.Provider,{value:{size:"14px"},children:oe.jsxs("li",{ref:z=>{$i().f[7]++,$i().s[22]++,d(z),$i().s[23]++,U?($i().b[10][0]++,$i().s[24]++,U.current=z):$i().b[10][1]++},style:E,id:n.id,onClick:z=>($i().f[8]++,$i().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:Ug({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[oe.jsx(v6e,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),oe.jsx("span",{style:{flexGrow:1}}),oe.jsx(z7,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:z=>($i().f[9]++,$i().s[26]++,o(n.layerIndex))}),oe.jsx(z7,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:z=>($i().f[10]++,$i().s[27]++,r(n.layerIndex))}),oe.jsx(z7,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:P,classBlockName:"visibility",classBlockModifier:P,onClick:z=>($i().f[11]++,$i().s[28]++,s(n.layerIndex))})]})})}));function b6(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return b6=function(){return s},s}b6();class js extends En.Component{render(){return b6().f[0]++,b6().s[0]++,oe.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:Ug("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var j7={exports:{}},N7,CQ;function b6e(){if(CQ)return N7;CQ=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return N7=n,N7}var G7,bQ;function _6e(){if(bQ)return G7;bQ=1;var n=b6e();function e(){}function t(){}return t.resetWarningCache=e,G7=function(){function i(s,a,c,d,p,v){if(v!==n){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},G7}var _Q;function J1(){return _Q||(_Q=1,j7.exports=_6e()()),j7.exports}var ioe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],_6=ioe.join(","),roe=typeof Element>"u",Vb=roe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,x6=!roe&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},j5=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&j5(e.parentNode);return s},x6e=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},ooe=function(e,t,i){if(j5(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(_6));return t&&Vb.call(e,_6)&&r.unshift(e),r=r.filter(i),r},M6=function(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!j5(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,d=M6(c,!0,i);i.flatten?r.push.apply(r,d):r.push({scopeParent:s,candidates:d})}else{var p=Vb.call(s,_6);p&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var v=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),M=!j5(v,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(v&&M){var E=M6(v===!0?s.children:v.children,!0,i);i.flatten?r.push.apply(r,E):r.push({scopeParent:s,candidates:E})}else o.unshift.apply(o,s.children)}}return r},soe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},fv=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||x6e(e))&&!soe(e)?0:e.tabIndex},M6e=function(e,t){var i=fv(e);return i<0&&t&&!soe(e)?0:i},w6e=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},aoe=function(e){return e.tagName==="INPUT"},S6e=function(e){return aoe(e)&&e.type==="hidden"},E6e=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},B6e=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},O6e=function(e){if(!e.name)return!0;var t=e.form||x6(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=B6e(r,e.form);return!o||o===e},I6e=function(e){return aoe(e)&&e.type==="radio"},T6e=function(e){return I6e(e)&&!O6e(e)},k6e=function(e){var t,i=e&&x6(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var d,p,v;i=x6(r),r=(d=i)===null||d===void 0?void 0:d.host,o=!!((p=r)!==null&&p!==void 0&&(v=p.ownerDocument)!==null&&v!==void 0&&v.contains(r))}}return o},xQ=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},D6e=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var o=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(e).visibility==="hidden")return!0;var s=Vb.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Vb.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var c=e;e;){var d=e.parentElement,p=x6(e);if(d&&!d.shadowRoot&&r(d)===!0)return xQ(e);e.assignedSlot?e=e.assignedSlot:!d&&p!==e.ownerDocument?e=p.host:e=d}e=c}if(k6e(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return xQ(e);return!1},R6e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return Vb.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},w6=function(e,t){return!(t.disabled||j5(t)||S6e(t)||D6e(t,e)||E6e(t)||R6e(t))},cP=function(e,t){return!(T6e(t)||fv(t)<0||!w6(e,t))},P6e=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},loe=function(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=M6e(a,s),d=s?loe(r.candidates):a;c===0?s?t.push.apply(t,d):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:d})}),i.sort(w6e).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},uoe=function(e,t){t=t||{};var i;return t.getShadowRoot?i=M6([e],t.includeContainer,{filter:cP.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:P6e}):i=ooe(e,t.includeContainer,cP.bind(null,t)),loe(i)},coe=function(e,t){t=t||{};var i;return t.getShadowRoot?i=M6([e],t.includeContainer,{filter:w6.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=ooe(e,t.includeContainer,w6.bind(null,t)),i},nb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Vb.call(e,_6)===!1?!1:cP(t,e)},U6e=ioe.concat("iframe").join(","),qS=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Vb.call(e,U6e)===!1?!1:w6(t,e)};const L6e=Object.freeze(Object.defineProperty({__proto__:null,focusable:coe,getTabIndex:fv,isFocusable:qS,isTabbable:nb,tabbable:uoe},Symbol.toStringTag,{value:"Module"}));function AP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function K6e(n){if(Array.isArray(n))return AP(n)}function F6e(n,e,t){return(e=W6e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z6e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function j6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function wQ(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MQ(Object(t),!0).forEach(function(i){F6e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function N6e(n){return K6e(n)||z6e(n)||Q6e(n)||j6e()}function G6e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function W6e(n){var e=G6e(n,"string");return typeof e=="symbol"?e:e+""}function Q6e(n,e){if(n){if(typeof n=="string")return AP(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?AP(n,e):void 0}}var SQ={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},q6e=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Y6e=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},z4=function(e){return e?.key==="Tab"||e?.keyCode===9},V6e=function(e){return z4(e)&&!e.shiftKey},$6e=function(e){return z4(e)&&e.shiftKey},EQ=function(e){return setTimeout(e,0)},F3=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},tS=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},H6e=[],Z6e=function(e,t){var i=t?.document||document,r=t?.trapStack||H6e,o=wQ({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:V6e,isKeyBackward:$6e},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(Ce,Oe,Fe){return Ce&&Ce[Oe]!==void 0?Ce[Oe]:o[Fe||Oe]},d=function(Ce,Oe){var Fe=typeof Oe?.composedPath=="function"?Oe.composedPath():void 0;return s.containerGroups.findIndex(function(Ee){var Ve=Ee.container,ut=Ee.tabbableNodes;return Ve.contains(Ce)||Fe?.includes(Ve)||ut.find(function(mt){return mt===Ce})})},p=function(Ce){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=Oe.hasFallback,Ee=Fe===void 0?!1:Fe,Ve=Oe.params,ut=Ve===void 0?[]:Ve,mt=o[Ce];if(typeof mt=="function"&&(mt=mt.apply(void 0,N6e(ut))),mt===!0&&(mt=void 0),!mt){if(mt===void 0||mt===!1)return mt;throw new Error("`".concat(Ce,"` was specified but was not a node, or did not return a node"))}var Pe=mt;if(typeof mt=="string"){try{Pe=i.querySelector(mt)}catch(De){throw new Error("`".concat(Ce,'` appears to be an invalid selector; error="').concat(De.message,'"'))}if(!Pe&&!Ee)throw new Error("`".concat(Ce,"` as selector refers to no known node"))}return Pe},v=function(){var Ce=p("initialFocus",{hasFallback:!0});if(Ce===!1)return!1;if(Ce===void 0||Ce&&!qS(Ce,o.tabbableOptions))if(d(i.activeElement)>=0)Ce=i.activeElement;else{var Oe=s.tabbableGroups[0],Fe=Oe&&Oe.firstTabbableNode;Ce=Fe||p("fallbackFocus")}else Ce===null&&(Ce=p("fallbackFocus"));if(!Ce)throw new Error("Your focus-trap needs to have at least one focusable element");return Ce},M=function(){if(s.containerGroups=s.containers.map(function(Ce){var Oe=uoe(Ce,o.tabbableOptions),Fe=coe(Ce,o.tabbableOptions),Ee=Oe.length>0?Oe[0]:void 0,Ve=Oe.length>0?Oe[Oe.length-1]:void 0,ut=Fe.find(function(De){return nb(De)}),mt=Fe.slice().reverse().find(function(De){return nb(De)}),Pe=!!Oe.find(function(De){return fv(De)>0});return{container:Ce,tabbableNodes:Oe,focusableNodes:Fe,posTabIndexesFound:Pe,firstTabbableNode:Ee,lastTabbableNode:Ve,firstDomTabbableNode:ut,lastDomTabbableNode:mt,nextTabbableNode:function(Xe){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Bt=Oe.indexOf(Xe);return Bt<0?Ke?Fe.slice(Fe.indexOf(Xe)+1).find(function(ot){return nb(ot)}):Fe.slice(0,Fe.indexOf(Xe)).reverse().find(function(ot){return nb(ot)}):Oe[Bt+(Ke?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(Ce){return Ce.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(Ce){return Ce.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},E=function(Ce){var Oe=Ce.activeElement;if(Oe)return Oe.shadowRoot&&Oe.shadowRoot.activeElement!==null?E(Oe.shadowRoot):Oe},P=function(Ce){if(Ce!==!1&&Ce!==E(document)){if(!Ce||!Ce.focus){P(v());return}Ce.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=Ce,q6e(Ce)&&Ce.select()}},U=function(Ce){var Oe=p("setReturnFocus",{params:[Ce]});return Oe||(Oe===!1?!1:Ce)},z=function(Ce){var Oe=Ce.target,Fe=Ce.event,Ee=Ce.isBackward,Ve=Ee===void 0?!1:Ee;Oe=Oe||tS(Fe),M();var ut=null;if(s.tabbableGroups.length>0){var mt=d(Oe,Fe),Pe=mt>=0?s.containerGroups[mt]:void 0;if(mt<0)Ve?ut=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:ut=s.tabbableGroups[0].firstTabbableNode;else if(Ve){var De=s.tabbableGroups.findIndex(function(Rt){var Ue=Rt.firstTabbableNode;return Oe===Ue});if(De<0&&(Pe.container===Oe||qS(Oe,o.tabbableOptions)&&!nb(Oe,o.tabbableOptions)&&!Pe.nextTabbableNode(Oe,!1))&&(De=mt),De>=0){var Xe=De===0?s.tabbableGroups.length-1:De-1,Ke=s.tabbableGroups[Xe];ut=fv(Oe)>=0?Ke.lastTabbableNode:Ke.lastDomTabbableNode}else z4(Fe)||(ut=Pe.nextTabbableNode(Oe,!1))}else{var Bt=s.tabbableGroups.findIndex(function(Rt){var Ue=Rt.lastTabbableNode;return Oe===Ue});if(Bt<0&&(Pe.container===Oe||qS(Oe,o.tabbableOptions)&&!nb(Oe,o.tabbableOptions)&&!Pe.nextTabbableNode(Oe))&&(Bt=mt),Bt>=0){var ot=Bt===s.tabbableGroups.length-1?0:Bt+1,Et=s.tabbableGroups[ot];ut=fv(Oe)>=0?Et.firstTabbableNode:Et.firstDomTabbableNode}else z4(Fe)||(ut=Pe.nextTabbableNode(Oe))}}else ut=p("fallbackFocus");return ut},V=function(Ce){var Oe=tS(Ce);if(!(d(Oe,Ce)>=0)){if(F3(o.clickOutsideDeactivates,Ce)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}F3(o.allowOutsideClick,Ce)||Ce.preventDefault()}},Z=function(Ce){var Oe=tS(Ce),Fe=d(Oe,Ce)>=0;if(Fe||Oe instanceof Document)Fe&&(s.mostRecentlyFocusedNode=Oe);else{Ce.stopImmediatePropagation();var Ee,Ve=!0;if(s.mostRecentlyFocusedNode)if(fv(s.mostRecentlyFocusedNode)>0){var ut=d(s.mostRecentlyFocusedNode),mt=s.containerGroups[ut].tabbableNodes;if(mt.length>0){var Pe=mt.findIndex(function(De){return De===s.mostRecentlyFocusedNode});Pe>=0&&(o.isKeyForward(s.recentNavEvent)?Pe+1<mt.length&&(Ee=mt[Pe+1],Ve=!1):Pe-1>=0&&(Ee=mt[Pe-1],Ve=!1))}}else s.containerGroups.some(function(De){return De.tabbableNodes.some(function(Xe){return fv(Xe)>0})})||(Ve=!1);else Ve=!1;Ve&&(Ee=z({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),P(Ee||s.mostRecentlyFocusedNode||v())}s.recentNavEvent=void 0},X=function(Ce){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=Ce;var Fe=z({event:Ce,isBackward:Oe});Fe&&(z4(Ce)&&Ce.preventDefault(),P(Fe))},re=function(Ce){(o.isKeyForward(Ce)||o.isKeyBackward(Ce))&&X(Ce,o.isKeyBackward(Ce))},ee=function(Ce){Y6e(Ce)&&F3(o.escapeDeactivates,Ce)!==!1&&(Ce.preventDefault(),a.deactivate())},ne=function(Ce){var Oe=tS(Ce);d(Oe,Ce)>=0||F3(o.clickOutsideDeactivates,Ce)||F3(o.allowOutsideClick,Ce)||(Ce.preventDefault(),Ce.stopImmediatePropagation())},q=function(){if(s.active)return SQ.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?EQ(function(){P(v())}):P(v()),i.addEventListener("focusin",Z,!0),i.addEventListener("mousedown",V,{capture:!0,passive:!1}),i.addEventListener("touchstart",V,{capture:!0,passive:!1}),i.addEventListener("click",ne,{capture:!0,passive:!1}),i.addEventListener("keydown",re,{capture:!0,passive:!1}),i.addEventListener("keydown",ee),a},le=function(){if(s.active)return i.removeEventListener("focusin",Z,!0),i.removeEventListener("mousedown",V,!0),i.removeEventListener("touchstart",V,!0),i.removeEventListener("click",ne,!0),i.removeEventListener("keydown",re,!0),i.removeEventListener("keydown",ee),a},ue=function(Ce){var Oe=Ce.some(function(Fe){var Ee=Array.from(Fe.removedNodes);return Ee.some(function(Ve){return Ve===s.mostRecentlyFocusedNode})});Oe&&P(v())},ve=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ue):void 0,pe=function(){ve&&(ve.disconnect(),s.active&&!s.paused&&s.containers.map(function(Ce){ve.observe(Ce,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(Ce){if(s.active)return this;var Oe=c(Ce,"onActivate"),Fe=c(Ce,"onPostActivate"),Ee=c(Ce,"checkCanFocusTrap");Ee||M(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=E(i),Oe?.();var Ve=function(){Ee&&M(),q(),pe(),Fe?.()};return Ee?(Ee(s.containers.concat()).then(Ve,Ve),this):(Ve(),this)},deactivate:function(Ce){if(!s.active)return this;var Oe=wQ({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},Ce);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,le(),s.active=!1,s.paused=!1,pe(),SQ.deactivateTrap(r,a);var Fe=c(Oe,"onDeactivate"),Ee=c(Oe,"onPostDeactivate"),Ve=c(Oe,"checkCanReturnFocus"),ut=c(Oe,"returnFocus","returnFocusOnDeactivate");Fe?.();var mt=function(){EQ(function(){ut&&P(U(s.nodeFocusedBeforeActivation)),Ee?.()})};return ut&&Ve?(Ve(U(s.nodeFocusedBeforeActivation)).then(mt,mt),this):(mt(),this)},pause:function(Ce){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,Ce)):this},unpause:function(Ce){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,Ce)):this},updateContainerElements:function(Ce){var Oe=[].concat(Ce).filter(Boolean);return s.containers=Oe.map(function(Fe){return typeof Fe=="string"?i.querySelector(Fe):Fe}),s.active&&M(),pe(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(Ce,Oe){if(s.paused===Ce)return this;if(s.paused=Ce,Ce){var Fe=c(Oe,"onPause"),Ee=c(Oe,"onPostPause");Fe?.(),le(),pe(),Ee?.()}else{var Ve=c(Oe,"onUnpause"),ut=c(Oe,"onPostUnpause");Ve?.(),M(),q(),pe(),ut?.()}return this}}}),a.updateContainerElements(e),a};const X6e=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Z6e},Symbol.toStringTag,{value:"Module"})),J6e=hZ(X6e),eBe=hZ(L6e);var W7,BQ;function tBe(){if(BQ)return W7;BQ=1;function n(ne){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},n(ne)}function e(ne,q){if(!(ne instanceof q))throw new TypeError("Cannot call a class as a function")}function t(ne,q){for(var le=0;le<q.length;le++){var ue=q[le];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(ne,M(ue.key),ue)}}function i(ne,q,le){return q&&t(ne.prototype,q),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function r(ne,q,le){return q=c(q),o(ne,a()?Reflect.construct(q,le||[],c(ne).constructor):q.apply(ne,le))}function o(ne,q){if(q&&(n(q)=="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(ne)}function s(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function a(){try{var ne=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!ne})()}function c(ne){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},c(ne)}function d(ne,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(q&&q.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),Object.defineProperty(ne,"prototype",{writable:!1}),q&&p(ne,q)}function p(ne,q){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,ue){return le.__proto__=ue,le},p(ne,q)}function v(ne,q,le){return(q=M(q))in ne?Object.defineProperty(ne,q,{value:le,enumerable:!0,configurable:!0,writable:!0}):ne[q]=le,ne}function M(ne){var q=E(ne,"string");return n(q)=="symbol"?q:q+""}function E(ne,q){if(n(ne)!="object"||!ne)return ne;var le=ne[Symbol.toPrimitive];if(le!==void 0){var ue=le.call(ne,q);if(n(ue)!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(ne)}var P=wa(),U=J1(),z=J6e,V=z.createFocusTrap,Z=eBe,X=Z.isFocusable,re=(function(ne){function q(le){var ue;e(this,q),ue=r(this,q,[le]),v(ue,"getNodeForOption",function(Be){var Ce,Oe=(Ce=this.internalOptions[Be])!==null&&Ce!==void 0?Ce:this.originalOptions[Be];if(typeof Oe=="function"){for(var Fe=arguments.length,Ee=new Array(Fe>1?Fe-1:0),Ve=1;Ve<Fe;Ve++)Ee[Ve-1]=arguments[Ve];Oe=Oe.apply(void 0,Ee)}if(Oe===!0&&(Oe=void 0),!Oe){if(Oe===void 0||Oe===!1)return Oe;throw new Error("`".concat(Be,"` was specified but was not a node, or did not return a node"))}var ut=Oe;if(typeof Oe=="string"){var mt;if(ut=(mt=this.getDocument())===null||mt===void 0?void 0:mt.querySelector(Oe),!ut)throw new Error("`".concat(Be,"` as selector refers to no known node"))}return ut}),ue.handleDeactivate=ue.handleDeactivate.bind(ue),ue.handlePostDeactivate=ue.handlePostDeactivate.bind(ue),ue.handleClickOutsideDeactivates=ue.handleClickOutsideDeactivates.bind(ue),ue.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ue.handleDeactivate,onPostDeactivate:ue.handlePostDeactivate,clickOutsideDeactivates:ue.handleClickOutsideDeactivates},ue.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var ve=le.focusTrapOptions;for(var pe in ve)if(Object.prototype.hasOwnProperty.call(ve,pe)){if(pe==="returnFocusOnDeactivate"||pe==="onDeactivate"||pe==="onPostDeactivate"||pe==="checkCanReturnFocus"||pe==="clickOutsideDeactivates"){ue.originalOptions[pe]=ve[pe];continue}ue.internalOptions[pe]=ve[pe]}return ue.outsideClick=null,ue.focusTrapElements=le.containerElements||[],ue.updatePreviousElement(),ue}return d(q,ne),i(q,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ue=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ue||(ue===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ue=this.getDocument();ue&&(this.previouslyFocusedElement=ue.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ue){var ve=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ue):this.originalOptions.clickOutsideDeactivates;return ve&&(this.outsideClick={target:ue.target,allowDeactivation:ve}),ve}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ue=this,ve=function(){var Be=ue.getReturnFocusNode(),Ce=!!(ue.originalOptions.returnFocusOnDeactivate&&Be!==null&&Be!==void 0&&Be.focus&&(!ue.outsideClick||ue.outsideClick.allowDeactivation&&!X(ue.outsideClick.target,ue.internalOptions.tabbableOptions))),Oe=ue.internalOptions.preventScroll,Fe=Oe===void 0?!1:Oe;Ce&&Be.focus({preventScroll:Fe}),ue.originalOptions.onPostDeactivate&&ue.originalOptions.onPostDeactivate.call(null),ue.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(ve,ve):ve()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ue=this.focusTrapElements.some(Boolean);ue&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ue){if(this.focusTrap){ue.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var ve=!ue.active&&this.props.active,pe=ue.active&&!this.props.active,Be=!ue.paused&&this.props.paused,Ce=ue.paused&&!this.props.paused;if(ve&&(this.updatePreviousElement(),this.focusTrap.activate()),pe){this.deactivateTrap();return}Be&&this.focusTrap.pause(),Ce&&this.focusTrap.unpause()}else ue.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ue=this,ve=this.props.children?P.Children.only(this.props.children):void 0;if(ve){if(ve.type&&ve.type===P.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var pe=function(Oe){var Fe=ue.props.containerElements;ve&&(typeof ve.ref=="function"?ve.ref(Oe):ve.ref&&(ve.ref.current=Oe)),ue.focusTrapElements=Fe||[Oe]},Be=P.cloneElement(ve,{ref:pe});return Be}return null}}])})(P.Component),ee=typeof Element>"u"?Function:Element;return re.propTypes={active:U.bool,paused:U.bool,focusTrapOptions:U.shape({document:U.object,onActivate:U.func,onPostActivate:U.func,checkCanFocusTrap:U.func,onPause:U.func,onPostPause:U.func,onUnpause:U.func,onPostUnpause:U.func,onDeactivate:U.func,onPostDeactivate:U.func,checkCanReturnFocus:U.func,initialFocus:U.oneOfType([U.instanceOf(ee),U.string,U.bool,U.func]),fallbackFocus:U.oneOfType([U.instanceOf(ee),U.string,U.func]),escapeDeactivates:U.oneOfType([U.bool,U.func]),clickOutsideDeactivates:U.oneOfType([U.bool,U.func]),returnFocusOnDeactivate:U.bool,setReturnFocus:U.oneOfType([U.instanceOf(ee),U.string,U.bool,U.func]),allowOutsideClick:U.oneOfType([U.bool,U.func]),preventScroll:U.bool,tabbableOptions:U.shape({displayCheck:U.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:U.oneOfType([U.bool,U.func])}),trapStack:U.array,isKeyForward:U.func,isKeyBackward:U.func}),containerElements:U.arrayOf(U.instanceOf(ee)),children:U.oneOfType([U.element,U.instanceOf(ee)])},re.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:V},W7=re,W7}var Q7={exports:{}},OQ;function nBe(){return OQ||(OQ=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var v=document.documentElement,M=document.createElement("div");return M.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),v.appendChild(M),i=M.offsetWidth-M.clientWidth,v.removeChild(M),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(v){if(!(typeof document>"u"||t)){var M=document.documentElement;r=window.pageYOffset,s()?M.style.width="calc(100% - "+o()+"px)":M.style.width="100%",M.style.position="fixed",M.style.top=-r+"px",M.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var v=document.documentElement;v.style.width="",v.style.position="",v.style.top="",v.style.overflow="",window.scroll(0,r),t=!1}}function d(){if(t){c();return}a()}var p={on:a,off:c,toggle:d};n.exports=p})()})(Q7)),Q7.exports}var q7,IQ;function iBe(){if(IQ)return q7;IQ=1;function n(X){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},n(X)}function e(X,re){if(!(X instanceof re))throw new TypeError("Cannot call a class as a function")}function t(X,re){for(var ee=0;ee<re.length;ee++){var ne=re[ee];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(X,ne.key,ne)}}function i(X,re,ee){return re&&t(X.prototype,re),Object.defineProperty(X,"prototype",{writable:!1}),X}function r(X,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(re&&re.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),re&&o(X,re)}function o(X,re){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,q){return ne.__proto__=q,ne},o(X,re)}function s(X){var re=d();return function(){var ne=p(X),q;if(re){var le=p(this).constructor;q=Reflect.construct(ne,arguments,le)}else q=ne.apply(this,arguments);return a(this,q)}}function a(X,re){if(re&&(n(re)==="object"||typeof re=="function"))return re;if(re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(X)}function c(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(X){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},p(X)}function v(X,re,ee){return re in X?Object.defineProperty(X,re,{value:ee,enumerable:!0,configurable:!0,writable:!0}):X[re]=ee,X}var M=wa(),E=KP(),P=tBe(),U=nBe(),z=(function(X){r(ee,X);var re=s(ee);function ee(ne){var q;if(e(this,ee),q=re.call(this,ne),v(c(q),"getApplicationNode",function(){return q.props.getApplicationNode?q.props.getApplicationNode():q.props.applicationNode}),v(c(q),"checkUnderlayClick",function(le){q.dialogNode&&q.dialogNode.contains(le.target)||le.pageX>le.target.ownerDocument.documentElement.offsetWidth||le.pageY>le.target.ownerDocument.documentElement.offsetHeight||q.exit(le)}),v(c(q),"checkDocumentKeyDown",function(le){q.props.escapeExits&&(le.key==="Escape"||le.key==="Esc"||le.keyCode===27)&&q.exit(le)}),v(c(q),"exit",function(le){q.props.onExit&&q.props.onExit(le)}),!ne.titleText&&!ne.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return q}return i(ee,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var q=this.getApplicationNode();setTimeout(function(){q&&q.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&U.on()}},{key:"componentDidUpdate",value:function(q){q.scrollDisabled&&!this.props.scrollDisabled?U.off():!q.scrollDisabled&&this.props.scrollDisabled&&U.on(),this.props.escapeExits&&!q.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&q.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&U.off();var q=this.getApplicationNode();q&&q.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var q=this;setTimeout(function(){document.addEventListener("keydown",q.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var q=this;setTimeout(function(){document.removeEventListener("keydown",q.checkDocumentKeyDown)})}},{key:"render",value:function(){var q=this.props,le={};if(q.includeDefaultStyles&&(le={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},q.underlayColor&&(le.background=q.underlayColor),q.underlayClickExits&&(le.cursor="pointer")),q.underlayStyle)for(var ue in q.underlayStyle)q.underlayStyle.hasOwnProperty(ue)&&(le[ue]=q.underlayStyle[ue]);var ve={className:q.underlayClass,style:le};q.underlayClickExits&&(ve.onMouseDown=this.checkUnderlayClick);for(var pe in this.props.underlayProps)ve[pe]=this.props.underlayProps[pe];var Be={};q.includeDefaultStyles&&(Be={display:"inline-block",height:"100%",verticalAlign:"middle"});var Ce={key:"a",style:Be},Oe={};if(q.includeDefaultStyles&&(Oe={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:q.focusDialog?0:null},q.verticallyCenter&&(Oe.verticalAlign="middle",Oe.top=0)),q.dialogStyle)for(var Fe in q.dialogStyle)q.dialogStyle.hasOwnProperty(Fe)&&(Oe[Fe]=q.dialogStyle[Fe]);var Ee={key:"b",ref:(function(Pe){this.dialogNode=Pe}).bind(this),role:q.alert?"alertdialog":"dialog",id:q.dialogId,className:q.dialogClass,style:Oe};q.titleId?Ee["aria-labelledby"]=q.titleId:q.titleText&&(Ee["aria-label"]=q.titleText),q.focusDialog&&(Ee.tabIndex="-1");for(var Ve in q)/^(data-|aria-)/.test(Ve)&&(Ee[Ve]=q[Ve]);var ut=[M.createElement("div",Ee,q.children)];q.verticallyCenter&&ut.unshift(M.createElement("div",Ce));var mt=q.focusTrapOptions||{};return(q.focusDialog||q.initialFocus)&&(mt.initialFocus=q.focusDialog?"#".concat(this.props.dialogId):q.initialFocus),mt.escapeDeactivates=q.escapeExits,M.createElement(P,{focusTrapOptions:mt,paused:q.focusTrapPaused},M.createElement("div",ve,ut))}}]),ee})(M.Component);v(z,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function V(X,re){if(!window.document)return function(){return null};re=re||{};var ee=(function(ne){r(le,ne);var q=s(le);function le(){var ue;e(this,le);for(var ve=arguments.length,pe=new Array(ve),Be=0;Be<ve;Be++)pe[Be]=arguments[Be];return ue=q.call.apply(q,[this].concat(pe)),v(c(ue),"container",null),ue}return i(le,[{key:"componentDidMount",value:function(){re.renderTo?this.container=typeof re.renderTo=="string"?document.querySelector(re.renderTo):re.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){re.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:E.createPortal(M.createElement(X,this.props,this.props.children),this.container)}}]),le})(M.Component);return v(ee,"defaultProps",{mounted:!0}),ee}var Z=V(z);return Z.renderTo=function(X){return V(z,{renderTo:X})},q7=Z,q7}var rBe=iBe();const oBe=xu(rBe);function zu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zu=function(){return s},s}zu();class sBe extends En.Component{static defaultProps=(zu().s[0]++,{underlayClickExits:!0});onClose=(zu().s[1]++,()=>{zu().f[0]++,zu().s[2]++,document.activeElement?(zu().b[0][0]++,zu().s[3]++,document.activeElement.blur()):zu().b[0][1]++,zu().s[4]++,setTimeout(()=>{zu().f[1]++,zu().s[5]++,this.props.onOpenToggle()},0)});render(){zu().f[2]++;const e=(zu().s[6]++,this.props.t);return zu().s[7]++,this.props.isOpen?(zu().b[1][0]++,zu().s[8]++,oe.jsx(oBe,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:oe.jsxs("div",{className:Ug("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[oe.jsxs("header",{className:"maputnik-modal-header",children:[oe.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:oe.jsx(cJ,{})})]}),oe.jsx("div",{className:"maputnik-modal-scroller",children:oe.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(zu().b[1][1]++,zu().s[9]++,!1)}}const ey=(zu().s[10]++,So()(sBe));function us(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return us=function(){return s},s}us();us().s[0]++;const BK=n=>{us().f[0]++;const[e,t]=(us().s[1]++,En.useState(!1));us().s[2]++;const i=a=>{us().f[1]++,us().s[3]++,t(a),us().s[4]++,n.onToggleDoc?(us().b[0][0]++,us().s[5]++,n.onToggleDoc(a)):us().b[0][1]++},{label:r,fieldSpec:o}=(us().s[6]++,n),{doc:s}=(us().s[7]++,us().b[1][0]++,o||(us().b[1][1]++,{}));return us().s[8]++,s?(us().b[2][0]++,us().s[9]++,oe.jsx("label",{className:"maputnik-doc-wrapper",children:oe.jsxs("div",{className:"maputnik-doc-target",children:[r,"",oe.jsx("button",{"aria-label":e?(us().b[3][0]++,"close property documentation"):(us().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(us().b[4][0]++,"open"):(us().b[4][1]++,"closed")}`,onClick:()=>(us().f[2]++,us().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(us().b[5][0]++,oe.jsx(Gfe,{})):(us().b[5][1]++,oe.jsx(Wfe,{}))})]})})):(us().b[2][1]++,us().s[11]++,r?(us().b[6][0]++,us().s[12]++,oe.jsx("label",{className:"maputnik-doc-wrapper",children:oe.jsx("div",{className:"maputnik-doc-target",children:r})})):(us().b[6][1]++,us().s[13]++,oe.jsx("div",{})))};function aBe(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const lBe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uBe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cBe={};function TQ(n,e){return(cBe.jsx?uBe:lBe).test(n)}const ABe=/[ \t\n\f\r]/g;function hBe(n){return typeof n=="object"?n.type==="text"?kQ(n.value):!1:kQ(n)}function kQ(n){return n.replace(ABe,"")===""}class NM{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}NM.prototype.normal={};NM.prototype.property={};NM.prototype.space=void 0;function Aoe(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new NM(t,i,e)}function hP(n){return n.toLowerCase()}class Fd{constructor(e,t){this.attribute=t,this.property=e}}Fd.prototype.attribute="";Fd.prototype.booleanish=!1;Fd.prototype.boolean=!1;Fd.prototype.commaOrSpaceSeparated=!1;Fd.prototype.commaSeparated=!1;Fd.prototype.defined=!1;Fd.prototype.mustUseProperty=!1;Fd.prototype.number=!1;Fd.prototype.overloadedBoolean=!1;Fd.prototype.property="";Fd.prototype.spaceSeparated=!1;Fd.prototype.space=void 0;let dBe=0;const ao=r_(),ju=r_(),dP=r_(),$n=r_(),Ka=r_(),ax=r_(),mf=r_();function r_(){return 2**++dBe}const fP=Object.freeze(Object.defineProperty({__proto__:null,boolean:ao,booleanish:ju,commaOrSpaceSeparated:mf,commaSeparated:ax,number:$n,overloadedBoolean:dP,spaceSeparated:Ka},Symbol.toStringTag,{value:"Module"})),Y7=Object.keys(fP);class OK extends Fd{constructor(e,t,i,r){let o=-1;if(super(e,t),DQ(this,"space",r),typeof i=="number")for(;++o<Y7.length;){const s=Y7[o];DQ(this,Y7[o],(i&fP[s])===fP[s])}}}OK.prototype.defined=!0;function DQ(n,e,t){t&&(n[e]=t)}function t3(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new OK(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[hP(i)]=i,t[hP(o.attribute)]=i}return new NM(e,t,n.space)}const hoe=t3({properties:{ariaActiveDescendant:null,ariaAtomic:ju,ariaAutoComplete:null,ariaBusy:ju,ariaChecked:ju,ariaColCount:$n,ariaColIndex:$n,ariaColSpan:$n,ariaControls:Ka,ariaCurrent:null,ariaDescribedBy:Ka,ariaDetails:null,ariaDisabled:ju,ariaDropEffect:Ka,ariaErrorMessage:null,ariaExpanded:ju,ariaFlowTo:Ka,ariaGrabbed:ju,ariaHasPopup:null,ariaHidden:ju,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ka,ariaLevel:$n,ariaLive:null,ariaModal:ju,ariaMultiLine:ju,ariaMultiSelectable:ju,ariaOrientation:null,ariaOwns:Ka,ariaPlaceholder:null,ariaPosInSet:$n,ariaPressed:ju,ariaReadOnly:ju,ariaRelevant:null,ariaRequired:ju,ariaRoleDescription:Ka,ariaRowCount:$n,ariaRowIndex:$n,ariaRowSpan:$n,ariaSelected:ju,ariaSetSize:$n,ariaSort:null,ariaValueMax:$n,ariaValueMin:$n,ariaValueNow:$n,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function doe(n,e){return e in n?n[e]:e}function foe(n,e){return doe(n,e.toLowerCase())}const fBe=t3({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ax,acceptCharset:Ka,accessKey:Ka,action:null,allow:null,allowFullScreen:ao,allowPaymentRequest:ao,allowUserMedia:ao,alt:null,as:null,async:ao,autoCapitalize:null,autoComplete:Ka,autoFocus:ao,autoPlay:ao,blocking:Ka,capture:null,charSet:null,checked:ao,cite:null,className:Ka,cols:$n,colSpan:null,content:null,contentEditable:ju,controls:ao,controlsList:Ka,coords:$n|ax,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ao,defer:ao,dir:null,dirName:null,disabled:ao,download:dP,draggable:ju,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ao,formTarget:null,headers:Ka,height:$n,hidden:dP,high:$n,href:null,hrefLang:null,htmlFor:Ka,httpEquiv:Ka,id:null,imageSizes:null,imageSrcSet:null,inert:ao,inputMode:null,integrity:null,is:null,isMap:ao,itemId:null,itemProp:Ka,itemRef:Ka,itemScope:ao,itemType:Ka,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ao,low:$n,manifest:null,max:null,maxLength:$n,media:null,method:null,min:null,minLength:$n,multiple:ao,muted:ao,name:null,nonce:null,noModule:ao,noValidate:ao,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ao,optimum:$n,pattern:null,ping:Ka,placeholder:null,playsInline:ao,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ao,referrerPolicy:null,rel:Ka,required:ao,reversed:ao,rows:$n,rowSpan:$n,sandbox:Ka,scope:null,scoped:ao,seamless:ao,selected:ao,shadowRootClonable:ao,shadowRootDelegatesFocus:ao,shadowRootMode:null,shape:null,size:$n,sizes:null,slot:null,span:$n,spellCheck:ju,src:null,srcDoc:null,srcLang:null,srcSet:null,start:$n,step:null,style:null,tabIndex:$n,target:null,title:null,translate:null,type:null,typeMustMatch:ao,useMap:null,value:ju,width:$n,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ka,axis:null,background:null,bgColor:null,border:$n,borderColor:null,bottomMargin:$n,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ao,declare:ao,event:null,face:null,frame:null,frameBorder:null,hSpace:$n,leftMargin:$n,link:null,longDesc:null,lowSrc:null,marginHeight:$n,marginWidth:$n,noResize:ao,noHref:ao,noShade:ao,noWrap:ao,object:null,profile:null,prompt:null,rev:null,rightMargin:$n,rules:null,scheme:null,scrolling:ju,standby:null,summary:null,text:null,topMargin:$n,valueType:null,version:null,vAlign:null,vLink:null,vSpace:$n,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ao,disableRemotePlayback:ao,prefix:null,property:null,results:$n,security:null,unselectable:null},space:"html",transform:foe}),mBe=t3({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:mf,accentHeight:$n,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:$n,amplitude:$n,arabicForm:null,ascent:$n,attributeName:null,attributeType:null,azimuth:$n,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:$n,by:null,calcMode:null,capHeight:$n,className:Ka,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:$n,diffuseConstant:$n,direction:null,display:null,dur:null,divisor:$n,dominantBaseline:null,download:ao,dx:null,dy:null,edgeMode:null,editable:null,elevation:$n,enableBackground:null,end:null,event:null,exponent:$n,externalResourcesRequired:null,fill:null,fillOpacity:$n,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ax,g2:ax,glyphName:ax,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:$n,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:$n,horizOriginX:$n,horizOriginY:$n,id:null,ideographic:$n,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:$n,k:$n,k1:$n,k2:$n,k3:$n,k4:$n,kernelMatrix:mf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:$n,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:$n,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:$n,overlineThickness:$n,paintOrder:null,panose1:null,path:null,pathLength:$n,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ka,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:$n,pointsAtY:$n,pointsAtZ:$n,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mf,rev:mf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mf,requiredFeatures:mf,requiredFonts:mf,requiredFormats:mf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:$n,specularExponent:$n,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:$n,strikethroughThickness:$n,string:null,stroke:null,strokeDashArray:mf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:$n,strokeOpacity:$n,strokeWidth:null,style:null,surfaceScale:$n,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mf,tabIndex:$n,tableValues:null,target:null,targetX:$n,targetY:$n,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:$n,underlineThickness:$n,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:$n,values:null,vAlphabetic:$n,vMathematical:$n,vectorEffect:null,vHanging:$n,vIdeographic:$n,version:null,vertAdvY:$n,vertOriginX:$n,vertOriginY:$n,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:$n,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:doe}),moe=t3({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),poe=t3({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:foe}),goe=t3({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),pBe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},gBe=/[A-Z]/g,RQ=/-[a-z]/g,yBe=/^data[-\w.:]+$/i;function vBe(n,e){const t=hP(e);let i=e,r=Fd;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&yBe.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(RQ,bBe);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!RQ.test(o)){let s=o.replace(gBe,CBe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=OK}return new r(i,e)}function CBe(n){return"-"+n.toLowerCase()}function bBe(n){return n.charAt(1).toUpperCase()}const _Be=Aoe([hoe,fBe,moe,poe,goe],"html"),IK=Aoe([hoe,mBe,moe,poe,goe],"svg");function xBe(n){return n.join(" ").trim()}var e2={},V7,PQ;function MBe(){if(PQ)return V7;PQ=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,d="/",p="*",v="",M="comment",E="declaration";V7=function(U,z){if(typeof U!="string")throw new TypeError("First argument must be a string");if(!U)return[];z=z||{};var V=1,Z=1;function X(Ce){var Oe=Ce.match(e);Oe&&(V+=Oe.length);var Fe=Ce.lastIndexOf(c);Z=~Fe?Ce.length-Fe:Z+Ce.length}function re(){var Ce={line:V,column:Z};return function(Oe){return Oe.position=new ee(Ce),le(),Oe}}function ee(Ce){this.start=Ce,this.end={line:V,column:Z},this.source=z.source}ee.prototype.content=U;function ne(Ce){var Oe=new Error(z.source+":"+V+":"+Z+": "+Ce);if(Oe.reason=Ce,Oe.filename=z.source,Oe.line=V,Oe.column=Z,Oe.source=U,!z.silent)throw Oe}function q(Ce){var Oe=Ce.exec(U);if(Oe){var Fe=Oe[0];return X(Fe),U=U.slice(Fe.length),Oe}}function le(){q(t)}function ue(Ce){var Oe;for(Ce=Ce||[];Oe=ve();)Oe!==!1&&Ce.push(Oe);return Ce}function ve(){var Ce=re();if(!(d!=U.charAt(0)||p!=U.charAt(1))){for(var Oe=2;v!=U.charAt(Oe)&&(p!=U.charAt(Oe)||d!=U.charAt(Oe+1));)++Oe;if(Oe+=2,v===U.charAt(Oe-1))return ne("End of comment missing");var Fe=U.slice(2,Oe-2);return Z+=2,X(Fe),U=U.slice(Oe),Z+=2,Ce({type:M,comment:Fe})}}function pe(){var Ce=re(),Oe=q(i);if(Oe){if(ve(),!q(r))return ne("property missing ':'");var Fe=q(o),Ee=Ce({type:E,property:P(Oe[0].replace(n,v)),value:Fe?P(Fe[0].replace(n,v)):v});return q(s),Ee}}function Be(){var Ce=[];ue(Ce);for(var Oe;Oe=pe();)Oe!==!1&&(Ce.push(Oe),ue(Ce));return Ce}return le(),Be()};function P(U){return U?U.replace(a,v):v}return V7}var UQ;function wBe(){if(UQ)return e2;UQ=1;var n=e2&&e2.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e2,"__esModule",{value:!0}),e2.default=t;const e=n(MBe());function t(i,r){let o=null;if(!i||typeof i!="string")return o;const s=(0,e.default)(i),a=typeof r=="function";return s.forEach(c=>{if(c.type!=="declaration")return;const{property:d,value:p}=c;a?r(d,p,c):p&&(o=o||{},o[d]=p)}),o}return e2}var z3={},LQ;function SBe(){if(LQ)return z3;LQ=1,Object.defineProperty(z3,"__esModule",{value:!0}),z3.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(d){return!d||t.test(d)||n.test(d)},s=function(d,p){return p.toUpperCase()},a=function(d,p){return"".concat(p,"-")},c=function(d,p){return p===void 0&&(p={}),o(d)?d:(d=d.toLowerCase(),p.reactCompat?d=d.replace(r,a):d=d.replace(i,a),d.replace(e,s))};return z3.camelCase=c,z3}var j3,KQ;function EBe(){if(KQ)return j3;KQ=1;var n=j3&&j3.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(wBe()),t=SBe();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,j3=i,j3}var BBe=EBe();const OBe=xu(BBe),yoe=voe("end"),TK=voe("start");function voe(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function IBe(n){const e=TK(n),t=yoe(n);if(e&&t)return{start:e,end:t}}function j4(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?FQ(n.position):"start"in n||"end"in n?FQ(n):"line"in n||"column"in n?mP(n):""}function mP(n){return zQ(n&&n.line)+":"+zQ(n&&n.column)}function FQ(n){return mP(n&&n.start)+"-"+mP(n&&n.end)}function zQ(n){return n&&typeof n=="number"?n:1}class rh extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=j4(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}rh.prototype.file="";rh.prototype.name="";rh.prototype.reason="";rh.prototype.message="";rh.prototype.stack="";rh.prototype.column=void 0;rh.prototype.line=void 0;rh.prototype.ancestors=void 0;rh.prototype.cause=void 0;rh.prototype.fatal=void 0;rh.prototype.place=void 0;rh.prototype.ruleId=void 0;rh.prototype.source=void 0;const kK={}.hasOwnProperty,TBe=new Map,kBe=/[A-Z]/g,DBe=new Set(["table","tbody","thead","tfoot","tr"]),RBe=new Set(["td","th"]),Coe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function PBe(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=GBe(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=NBe(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?IK:_Be,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=boe(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function boe(n,e,t){if(e.type==="element")return UBe(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return LBe(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return FBe(n,e,t);if(e.type==="mdxjsEsm")return KBe(n,e);if(e.type==="root")return zBe(n,e,t);if(e.type==="text")return jBe(n,e)}function UBe(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=IK,n.schema=r),n.ancestors.push(e);const o=xoe(n,e.tagName,!1),s=WBe(n,e);let a=RK(n,e);return DBe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!hBe(c):!0})),_oe(n,s,o,e),DK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function LBe(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}N5(n,e.position)}function KBe(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);N5(n,e.position)}function FBe(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=IK,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:xoe(n,e.name,!0),s=QBe(n,e),a=RK(n,e);return _oe(n,s,o,e),DK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function zBe(n,e,t){const i={};return DK(i,RK(n,e)),n.create(e,n.Fragment,i,t)}function jBe(n,e){return e.value}function _oe(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function DK(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function NBe(n,e,t){return i;function i(r,o,s,a){const d=Array.isArray(s.children)?t:e;return a?d(o,s,a):d(o,s)}}function GBe(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=TK(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function WBe(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&kK.call(e.properties,r)){const o=qBe(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&RBe.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function QBe(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else N5(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else N5(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function RK(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:TBe;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const d=r.get(c)||0;s=c+"-"+d,r.set(c,d+1)}}const a=boe(n,o,s);a!==void 0&&t.push(a)}return t}function qBe(n,e,t){const i=vBe(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?aBe(t):xBe(t)),i.property==="style"){let r=typeof t=="object"?t:YBe(n,String(t));return n.stylePropertyNameCase==="css"&&(r=VBe(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?pBe[i.property]||i.property:i.attribute,t]}}function YBe(n,e){try{return OBe(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new rh("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=Coe+"#cannot-parse-style-attribute",r}}function xoe(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=TQ(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=TQ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return kK.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);N5(n)}function N5(n,e){const t=new rh("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=Coe+"#cannot-handle-mdx-estrees-without-createevaluater",t}function VBe(n){const e={};let t;for(t in n)kK.call(n,t)&&(e[$Be(t)]=n[t]);return e}function $Be(n){let e=n.replace(kBe,HBe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function HBe(n){return"-"+n.toLowerCase()}const $7={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ZBe={};function XBe(n,e){const t=ZBe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Moe(n,i,r)}function Moe(n,e,t){if(JBe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return jQ(n.children,e,t)}return Array.isArray(n)?jQ(n,e,t):""}function jQ(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=Moe(n[r],e,t);return i.join("")}function JBe(n){return!!(n&&typeof n=="object")}const NQ=document.createElement("i");function PK(n){const e="&"+n+";";NQ.innerHTML=e;const t=NQ.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function kg(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function vm(n,e){return n.length>0?(kg(n,n.length,0,e),n):e}const GQ={}.hasOwnProperty;function eOe(n){const e={};let t=-1;for(;++t<n.length;)tOe(e,n[t]);return e}function tOe(n,e){let t;for(t in e){const r=(GQ.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){GQ.call(r,s)||(r[s]=[]);const a=o[s];nOe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function nOe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);kg(n,0,0,i)}function woe(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function lx(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ag=qv(/[A-Za-z]/),Ef=qv(/[\dA-Za-z]/),iOe=qv(/[#-'*+\--9=?A-Z^-~]/);function pP(n){return n!==null&&(n<32||n===127)}const gP=qv(/\d/),rOe=qv(/[\dA-Fa-f]/),oOe=qv(/[!-/:-@[-`{-~]/);function Or(n){return n!==null&&n<-2}function Pd(n){return n!==null&&(n<0||n===32)}function Bs(n){return n===-2||n===-1||n===32}const sOe=qv(new RegExp("\\p{P}|\\p{S}","u")),aOe=qv(/\s/);function qv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function n3(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&Ef(n.charCodeAt(t+1))&&Ef(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function za(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return Bs(c)?(n.enter(t),a(c)):e(c)}function a(c){return Bs(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const lOe={tokenize:uOe};function uOe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),za(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Or(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const cOe={tokenize:AOe},WQ={tokenize:hOe};function AOe(n){const e=this,t=[];let i=0,r,o,s;return a;function a(X){if(i<t.length){const re=t[i];return e.containerState=re[1],n.attempt(re[0].continuation,c,d)(X)}return d(X)}function c(X){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&Z();const re=e.events.length;let ee=re,ne;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){ne=e.events[ee][1].end;break}V(i);let q=re;for(;q<e.events.length;)e.events[q][1].end={...ne},q++;return kg(e.events,ee+1,0,e.events.slice(re)),e.events.length=q,d(X)}return a(X)}function d(X){if(i===t.length){if(!r)return M(X);if(r.currentConstruct&&r.currentConstruct.concrete)return P(X);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(WQ,p,v)(X)}function p(X){return r&&Z(),V(i),M(X)}function v(X){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,P(X)}function M(X){return e.containerState={},n.attempt(WQ,E,P)(X)}function E(X){return i++,t.push([e.currentConstruct,e.containerState]),M(X)}function P(X){if(X===null){r&&Z(),V(0),n.consume(X);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),U(X)}function U(X){if(X===null){z(n.exit("chunkFlow"),!0),V(0),n.consume(X);return}return Or(X)?(n.consume(X),z(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(X),U)}function z(X,re){const ee=e.sliceStream(X);if(re&&ee.push(null),X.previous=o,o&&(o.next=X),o=X,r.defineSkip(X.start),r.write(ee),e.parser.lazy[X.start.line]){let ne=r.events.length;for(;ne--;)if(r.events[ne][1].start.offset<s&&(!r.events[ne][1].end||r.events[ne][1].end.offset>s))return;const q=e.events.length;let le=q,ue,ve;for(;le--;)if(e.events[le][0]==="exit"&&e.events[le][1].type==="chunkFlow"){if(ue){ve=e.events[le][1].end;break}ue=!0}for(V(i),ne=q;ne<e.events.length;)e.events[ne][1].end={...ve},ne++;kg(e.events,le+1,0,e.events.slice(q)),e.events.length=ne}}function V(X){let re=t.length;for(;re-- >X;){const ee=t[re];e.containerState=ee[1],ee[0].exit.call(e,n)}t.length=X}function Z(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function hOe(n,e,t){return za(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function QQ(n){if(n===null||Pd(n)||aOe(n))return 1;if(sOe(n))return 2}function UK(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const yP={name:"attention",resolveAll:dOe,tokenize:fOe};function dOe(n,e){let t=-1,i,r,o,s,a,c,d,p;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const v={...n[i][1].end},M={...n[t][1].start};qQ(v,-c),qQ(M,c),s={type:c>1?"strongSequence":"emphasisSequence",start:v,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:M},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},d=[],n[i][1].end.offset-n[i][1].start.offset&&(d=vm(d,[["enter",n[i][1],e],["exit",n[i][1],e]])),d=vm(d,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),d=vm(d,UK(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),d=vm(d,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(p=2,d=vm(d,[["enter",n[t][1],e],["exit",n[t][1],e]])):p=0,kg(n,i-1,t-i+3,d),t=i+d.length-p-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function fOe(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=QQ(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const d=n.exit("attentionSequence"),p=QQ(c),v=!p||p===2&&r||t.includes(c),M=!r||r===2&&p||t.includes(i);return d._open=!!(o===42?v:v&&(r||!M)),d._close=!!(o===42?M:M&&(p||!v)),e(c)}}function qQ(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const mOe={name:"autolink",tokenize:pOe};function pOe(n,e,t){let i=0;return r;function r(E){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(E){return Ag(E)?(n.consume(E),s):E===64?t(E):d(E)}function s(E){return E===43||E===45||E===46||Ef(E)?(i=1,a(E)):d(E)}function a(E){return E===58?(n.consume(E),i=0,c):(E===43||E===45||E===46||Ef(E))&&i++<32?(n.consume(E),a):(i=0,d(E))}function c(E){return E===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.exit("autolink"),e):E===null||E===32||E===60||pP(E)?t(E):(n.consume(E),c)}function d(E){return E===64?(n.consume(E),p):iOe(E)?(n.consume(E),d):t(E)}function p(E){return Ef(E)?v(E):t(E)}function v(E){return E===46?(n.consume(E),i=0,p):E===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.exit("autolink"),e):M(E)}function M(E){if((E===45||Ef(E))&&i++<63){const P=E===45?M:v;return n.consume(E),P}return t(E)}}const iO={partial:!0,tokenize:gOe};function gOe(n,e,t){return i;function i(o){return Bs(o)?za(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||Or(o)?e(o):t(o)}}const Soe={continuation:{tokenize:vOe},exit:COe,name:"blockQuote",tokenize:yOe};function yOe(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return Bs(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function vOe(n,e,t){const i=this;return r;function r(s){return Bs(s)?za(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(Soe,e,t)(s)}}function COe(n){n.exit("blockQuote")}const Eoe={name:"characterEscape",tokenize:bOe};function bOe(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return oOe(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const Boe={name:"characterReference",tokenize:_Oe};function _Oe(n,e,t){const i=this;let r=0,o,s;return a;function a(v){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),c}function c(v){return v===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(v),n.exit("characterReferenceMarkerNumeric"),d):(n.enter("characterReferenceValue"),o=31,s=Ef,p(v))}function d(v){return v===88||v===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(v),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=rOe,p):(n.enter("characterReferenceValue"),o=7,s=gP,p(v))}function p(v){if(v===59&&r){const M=n.exit("characterReferenceValue");return s===Ef&&!PK(i.sliceSerialize(M))?t(v):(n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(v)&&r++<o?(n.consume(v),p):t(v)}}const YQ={partial:!0,tokenize:MOe},VQ={concrete:!0,name:"codeFenced",tokenize:xOe};function xOe(n,e,t){const i=this,r={partial:!0,tokenize:ee};let o=0,s=0,a;return c;function c(ne){return d(ne)}function d(ne){const q=i.events[i.events.length-1];return o=q&&q[1].type==="linePrefix"?q[2].sliceSerialize(q[1],!0).length:0,a=ne,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p(ne)}function p(ne){return ne===a?(s++,n.consume(ne),p):s<3?t(ne):(n.exit("codeFencedFenceSequence"),Bs(ne)?za(n,v,"whitespace")(ne):v(ne))}function v(ne){return ne===null||Or(ne)?(n.exit("codeFencedFence"),i.interrupt?e(ne):n.check(YQ,U,re)(ne)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),M(ne))}function M(ne){return ne===null||Or(ne)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),v(ne)):Bs(ne)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),za(n,E,"whitespace")(ne)):ne===96&&ne===a?t(ne):(n.consume(ne),M)}function E(ne){return ne===null||Or(ne)?v(ne):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),P(ne))}function P(ne){return ne===null||Or(ne)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),v(ne)):ne===96&&ne===a?t(ne):(n.consume(ne),P)}function U(ne){return n.attempt(r,re,z)(ne)}function z(ne){return n.enter("lineEnding"),n.consume(ne),n.exit("lineEnding"),V}function V(ne){return o>0&&Bs(ne)?za(n,Z,"linePrefix",o+1)(ne):Z(ne)}function Z(ne){return ne===null||Or(ne)?n.check(YQ,U,re)(ne):(n.enter("codeFlowValue"),X(ne))}function X(ne){return ne===null||Or(ne)?(n.exit("codeFlowValue"),Z(ne)):(n.consume(ne),X)}function re(ne){return n.exit("codeFenced"),e(ne)}function ee(ne,q,le){let ue=0;return ve;function ve(Fe){return ne.enter("lineEnding"),ne.consume(Fe),ne.exit("lineEnding"),pe}function pe(Fe){return ne.enter("codeFencedFence"),Bs(Fe)?za(ne,Be,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Fe):Be(Fe)}function Be(Fe){return Fe===a?(ne.enter("codeFencedFenceSequence"),Ce(Fe)):le(Fe)}function Ce(Fe){return Fe===a?(ue++,ne.consume(Fe),Ce):ue>=s?(ne.exit("codeFencedFenceSequence"),Bs(Fe)?za(ne,Oe,"whitespace")(Fe):Oe(Fe)):le(Fe)}function Oe(Fe){return Fe===null||Or(Fe)?(ne.exit("codeFencedFence"),q(Fe)):le(Fe)}}}function MOe(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const H7={name:"codeIndented",tokenize:SOe},wOe={partial:!0,tokenize:EOe};function SOe(n,e,t){const i=this;return r;function r(d){return n.enter("codeIndented"),za(n,o,"linePrefix",5)(d)}function o(d){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?s(d):t(d)}function s(d){return d===null?c(d):Or(d)?n.attempt(wOe,s,c)(d):(n.enter("codeFlowValue"),a(d))}function a(d){return d===null||Or(d)?(n.exit("codeFlowValue"),s(d)):(n.consume(d),a)}function c(d){return n.exit("codeIndented"),e(d)}}function EOe(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):Or(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):za(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):Or(s)?r(s):t(s)}}const BOe={name:"codeText",previous:IOe,resolve:OOe,tokenize:TOe};function OOe(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function IOe(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function TOe(n,e,t){let i=0,r,o;return s;function s(v){return n.enter("codeText"),n.enter("codeTextSequence"),a(v)}function a(v){return v===96?(n.consume(v),i++,a):(n.exit("codeTextSequence"),c(v))}function c(v){return v===null?t(v):v===32?(n.enter("space"),n.consume(v),n.exit("space"),c):v===96?(o=n.enter("codeTextSequence"),r=0,p(v)):Or(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),c):(n.enter("codeTextData"),d(v))}function d(v){return v===null||v===32||v===96||Or(v)?(n.exit("codeTextData"),c(v)):(n.consume(v),d)}function p(v){return v===96?(n.consume(v),r++,p):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(v)):(o.type="codeTextData",d(v))}}class kOe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&N3(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),N3(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),N3(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);N3(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);N3(this.left,t.reverse())}}}function N3(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function Ooe(n){const e={};let t=-1,i,r,o,s,a,c,d;const p=new kOe(n);for(;++t<p.length;){for(;t in e;)t=e[t];if(i=p.get(t),t&&i[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,DOe(p,t)),t=e[t],d=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=p.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(p.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...p.get(r)[1].start},a=p.slice(r,t),a.unshift(i),p.splice(r,t-r+1,a))}}return kg(n,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function DOe(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],d={};let p,v,M=-1,E=t,P=0,U=0;const z=[U];for(;E;){for(;n.get(++r)[1]!==E;);o.push(r),E._tokenizer||(p=i.sliceStream(E),E.next||p.push(null),v&&s.defineSkip(E.start),E._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(p),E._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),v=E,E=E.next}for(E=t;++M<a.length;)a[M][0]==="exit"&&a[M-1][0]==="enter"&&a[M][1].type===a[M-1][1].type&&a[M][1].start.line!==a[M][1].end.line&&(U=M+1,z.push(U),E._tokenizer=void 0,E.previous=void 0,E=E.next);for(s.events=[],E?(E._tokenizer=void 0,E.previous=void 0):z.pop(),M=z.length;M--;){const V=a.slice(z[M],z[M+1]),Z=o.pop();c.push([Z,Z+V.length-1]),n.splice(Z,2,V)}for(c.reverse(),M=-1;++M<c.length;)d[P+c[M][0]]=P+c[M][1],P+=c[M][1]-c[M][0]-1;return d}const ROe={resolve:UOe,tokenize:LOe},POe={partial:!0,tokenize:KOe};function UOe(n){return Ooe(n),n}function LOe(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):Or(a)?n.check(POe,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function KOe(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),za(n,o,"linePrefix")}function o(s){if(s===null||Or(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function Ioe(n,e,t,i,r,o,s,a,c){const d=c||Number.POSITIVE_INFINITY;let p=0;return v;function v(V){return V===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(V),n.exit(o),M):V===null||V===32||V===41||pP(V)?t(V):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),U(V))}function M(V){return V===62?(n.enter(o),n.consume(V),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),E(V))}function E(V){return V===62?(n.exit("chunkString"),n.exit(a),M(V)):V===null||V===60||Or(V)?t(V):(n.consume(V),V===92?P:E)}function P(V){return V===60||V===62||V===92?(n.consume(V),E):E(V)}function U(V){return!p&&(V===null||V===41||Pd(V))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(V)):p<d&&V===40?(n.consume(V),p++,U):V===41?(n.consume(V),p--,U):V===null||V===32||V===40||pP(V)?t(V):(n.consume(V),V===92?z:U)}function z(V){return V===40||V===41||V===92?(n.consume(V),U):U(V)}}function Toe(n,e,t,i,r,o){const s=this;let a=0,c;return d;function d(E){return n.enter(i),n.enter(r),n.consume(E),n.exit(r),n.enter(o),p}function p(E){return a>999||E===null||E===91||E===93&&!c||E===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(E):E===93?(n.exit(o),n.enter(r),n.consume(E),n.exit(r),n.exit(i),e):Or(E)?(n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),v(E))}function v(E){return E===null||E===91||E===93||Or(E)||a++>999?(n.exit("chunkString"),p(E)):(n.consume(E),c||(c=!Bs(E)),E===92?M:v)}function M(E){return E===91||E===92||E===93?(n.consume(E),a++,v):v(E)}}function koe(n,e,t,i,r,o){let s;return a;function a(M){return M===34||M===39||M===40?(n.enter(i),n.enter(r),n.consume(M),n.exit(r),s=M===40?41:M,c):t(M)}function c(M){return M===s?(n.enter(r),n.consume(M),n.exit(r),n.exit(i),e):(n.enter(o),d(M))}function d(M){return M===s?(n.exit(o),c(s)):M===null?t(M):Or(M)?(n.enter("lineEnding"),n.consume(M),n.exit("lineEnding"),za(n,d,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(M))}function p(M){return M===s||M===null||Or(M)?(n.exit("chunkString"),d(M)):(n.consume(M),M===92?v:p)}function v(M){return M===s||M===92?(n.consume(M),p):p(M)}}function N4(n,e){let t;return i;function i(r){return Or(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Bs(r)?za(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const FOe={name:"definition",tokenize:jOe},zOe={partial:!0,tokenize:NOe};function jOe(n,e,t){const i=this;let r;return o;function o(E){return n.enter("definition"),s(E)}function s(E){return Toe.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(E)}function a(E){return r=lx(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),E===58?(n.enter("definitionMarker"),n.consume(E),n.exit("definitionMarker"),c):t(E)}function c(E){return Pd(E)?N4(n,d)(E):d(E)}function d(E){return Ioe(n,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(E)}function p(E){return n.attempt(zOe,v,v)(E)}function v(E){return Bs(E)?za(n,M,"whitespace")(E):M(E)}function M(E){return E===null||Or(E)?(n.exit("definition"),i.parser.defined.push(r),e(E)):t(E)}}function NOe(n,e,t){return i;function i(a){return Pd(a)?N4(n,r)(a):t(a)}function r(a){return koe(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Bs(a)?za(n,s,"whitespace")(a):s(a)}function s(a){return a===null||Or(a)?e(a):t(a)}}const GOe={name:"hardBreakEscape",tokenize:WOe};function WOe(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return Or(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const QOe={name:"headingAtx",resolve:qOe,tokenize:YOe};function qOe(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},kg(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function YOe(n,e,t){let i=0;return r;function r(p){return n.enter("atxHeading"),o(p)}function o(p){return n.enter("atxHeadingSequence"),s(p)}function s(p){return p===35&&i++<6?(n.consume(p),s):p===null||Pd(p)?(n.exit("atxHeadingSequence"),a(p)):t(p)}function a(p){return p===35?(n.enter("atxHeadingSequence"),c(p)):p===null||Or(p)?(n.exit("atxHeading"),e(p)):Bs(p)?za(n,a,"whitespace")(p):(n.enter("atxHeadingText"),d(p))}function c(p){return p===35?(n.consume(p),c):(n.exit("atxHeadingSequence"),a(p))}function d(p){return p===null||p===35||Pd(p)?(n.exit("atxHeadingText"),a(p)):(n.consume(p),d)}}const VOe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$Q=["pre","script","style","textarea"],$Oe={concrete:!0,name:"htmlFlow",resolveTo:XOe,tokenize:JOe},HOe={partial:!0,tokenize:t8e},ZOe={partial:!0,tokenize:e8e};function XOe(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function JOe(n,e,t){const i=this;let r,o,s,a,c;return d;function d(Ke){return p(Ke)}function p(Ke){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(Ke),v}function v(Ke){return Ke===33?(n.consume(Ke),M):Ke===47?(n.consume(Ke),o=!0,U):Ke===63?(n.consume(Ke),r=3,i.interrupt?e:Pe):Ag(Ke)?(n.consume(Ke),s=String.fromCharCode(Ke),z):t(Ke)}function M(Ke){return Ke===45?(n.consume(Ke),r=2,E):Ke===91?(n.consume(Ke),r=5,a=0,P):Ag(Ke)?(n.consume(Ke),r=4,i.interrupt?e:Pe):t(Ke)}function E(Ke){return Ke===45?(n.consume(Ke),i.interrupt?e:Pe):t(Ke)}function P(Ke){const Bt="CDATA[";return Ke===Bt.charCodeAt(a++)?(n.consume(Ke),a===Bt.length?i.interrupt?e:Be:P):t(Ke)}function U(Ke){return Ag(Ke)?(n.consume(Ke),s=String.fromCharCode(Ke),z):t(Ke)}function z(Ke){if(Ke===null||Ke===47||Ke===62||Pd(Ke)){const Bt=Ke===47,ot=s.toLowerCase();return!Bt&&!o&&$Q.includes(ot)?(r=1,i.interrupt?e(Ke):Be(Ke)):VOe.includes(s.toLowerCase())?(r=6,Bt?(n.consume(Ke),V):i.interrupt?e(Ke):Be(Ke)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(Ke):o?Z(Ke):X(Ke))}return Ke===45||Ef(Ke)?(n.consume(Ke),s+=String.fromCharCode(Ke),z):t(Ke)}function V(Ke){return Ke===62?(n.consume(Ke),i.interrupt?e:Be):t(Ke)}function Z(Ke){return Bs(Ke)?(n.consume(Ke),Z):ve(Ke)}function X(Ke){return Ke===47?(n.consume(Ke),ve):Ke===58||Ke===95||Ag(Ke)?(n.consume(Ke),re):Bs(Ke)?(n.consume(Ke),X):ve(Ke)}function re(Ke){return Ke===45||Ke===46||Ke===58||Ke===95||Ef(Ke)?(n.consume(Ke),re):ee(Ke)}function ee(Ke){return Ke===61?(n.consume(Ke),ne):Bs(Ke)?(n.consume(Ke),ee):X(Ke)}function ne(Ke){return Ke===null||Ke===60||Ke===61||Ke===62||Ke===96?t(Ke):Ke===34||Ke===39?(n.consume(Ke),c=Ke,q):Bs(Ke)?(n.consume(Ke),ne):le(Ke)}function q(Ke){return Ke===c?(n.consume(Ke),c=null,ue):Ke===null||Or(Ke)?t(Ke):(n.consume(Ke),q)}function le(Ke){return Ke===null||Ke===34||Ke===39||Ke===47||Ke===60||Ke===61||Ke===62||Ke===96||Pd(Ke)?ee(Ke):(n.consume(Ke),le)}function ue(Ke){return Ke===47||Ke===62||Bs(Ke)?X(Ke):t(Ke)}function ve(Ke){return Ke===62?(n.consume(Ke),pe):t(Ke)}function pe(Ke){return Ke===null||Or(Ke)?Be(Ke):Bs(Ke)?(n.consume(Ke),pe):t(Ke)}function Be(Ke){return Ke===45&&r===2?(n.consume(Ke),Ee):Ke===60&&r===1?(n.consume(Ke),Ve):Ke===62&&r===4?(n.consume(Ke),De):Ke===63&&r===3?(n.consume(Ke),Pe):Ke===93&&r===5?(n.consume(Ke),mt):Or(Ke)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(HOe,Xe,Ce)(Ke)):Ke===null||Or(Ke)?(n.exit("htmlFlowData"),Ce(Ke)):(n.consume(Ke),Be)}function Ce(Ke){return n.check(ZOe,Oe,Xe)(Ke)}function Oe(Ke){return n.enter("lineEnding"),n.consume(Ke),n.exit("lineEnding"),Fe}function Fe(Ke){return Ke===null||Or(Ke)?Ce(Ke):(n.enter("htmlFlowData"),Be(Ke))}function Ee(Ke){return Ke===45?(n.consume(Ke),Pe):Be(Ke)}function Ve(Ke){return Ke===47?(n.consume(Ke),s="",ut):Be(Ke)}function ut(Ke){if(Ke===62){const Bt=s.toLowerCase();return $Q.includes(Bt)?(n.consume(Ke),De):Be(Ke)}return Ag(Ke)&&s.length<8?(n.consume(Ke),s+=String.fromCharCode(Ke),ut):Be(Ke)}function mt(Ke){return Ke===93?(n.consume(Ke),Pe):Be(Ke)}function Pe(Ke){return Ke===62?(n.consume(Ke),De):Ke===45&&r===2?(n.consume(Ke),Pe):Be(Ke)}function De(Ke){return Ke===null||Or(Ke)?(n.exit("htmlFlowData"),Xe(Ke)):(n.consume(Ke),De)}function Xe(Ke){return n.exit("htmlFlow"),e(Ke)}}function e8e(n,e,t){const i=this;return r;function r(s){return Or(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function t8e(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(iO,e,t)}}const n8e={name:"htmlText",tokenize:i8e};function i8e(n,e,t){const i=this;let r,o,s;return a;function a(Pe){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(Pe),c}function c(Pe){return Pe===33?(n.consume(Pe),d):Pe===47?(n.consume(Pe),ee):Pe===63?(n.consume(Pe),X):Ag(Pe)?(n.consume(Pe),le):t(Pe)}function d(Pe){return Pe===45?(n.consume(Pe),p):Pe===91?(n.consume(Pe),o=0,P):Ag(Pe)?(n.consume(Pe),Z):t(Pe)}function p(Pe){return Pe===45?(n.consume(Pe),E):t(Pe)}function v(Pe){return Pe===null?t(Pe):Pe===45?(n.consume(Pe),M):Or(Pe)?(s=v,Ve(Pe)):(n.consume(Pe),v)}function M(Pe){return Pe===45?(n.consume(Pe),E):v(Pe)}function E(Pe){return Pe===62?Ee(Pe):Pe===45?M(Pe):v(Pe)}function P(Pe){const De="CDATA[";return Pe===De.charCodeAt(o++)?(n.consume(Pe),o===De.length?U:P):t(Pe)}function U(Pe){return Pe===null?t(Pe):Pe===93?(n.consume(Pe),z):Or(Pe)?(s=U,Ve(Pe)):(n.consume(Pe),U)}function z(Pe){return Pe===93?(n.consume(Pe),V):U(Pe)}function V(Pe){return Pe===62?Ee(Pe):Pe===93?(n.consume(Pe),V):U(Pe)}function Z(Pe){return Pe===null||Pe===62?Ee(Pe):Or(Pe)?(s=Z,Ve(Pe)):(n.consume(Pe),Z)}function X(Pe){return Pe===null?t(Pe):Pe===63?(n.consume(Pe),re):Or(Pe)?(s=X,Ve(Pe)):(n.consume(Pe),X)}function re(Pe){return Pe===62?Ee(Pe):X(Pe)}function ee(Pe){return Ag(Pe)?(n.consume(Pe),ne):t(Pe)}function ne(Pe){return Pe===45||Ef(Pe)?(n.consume(Pe),ne):q(Pe)}function q(Pe){return Or(Pe)?(s=q,Ve(Pe)):Bs(Pe)?(n.consume(Pe),q):Ee(Pe)}function le(Pe){return Pe===45||Ef(Pe)?(n.consume(Pe),le):Pe===47||Pe===62||Pd(Pe)?ue(Pe):t(Pe)}function ue(Pe){return Pe===47?(n.consume(Pe),Ee):Pe===58||Pe===95||Ag(Pe)?(n.consume(Pe),ve):Or(Pe)?(s=ue,Ve(Pe)):Bs(Pe)?(n.consume(Pe),ue):Ee(Pe)}function ve(Pe){return Pe===45||Pe===46||Pe===58||Pe===95||Ef(Pe)?(n.consume(Pe),ve):pe(Pe)}function pe(Pe){return Pe===61?(n.consume(Pe),Be):Or(Pe)?(s=pe,Ve(Pe)):Bs(Pe)?(n.consume(Pe),pe):ue(Pe)}function Be(Pe){return Pe===null||Pe===60||Pe===61||Pe===62||Pe===96?t(Pe):Pe===34||Pe===39?(n.consume(Pe),r=Pe,Ce):Or(Pe)?(s=Be,Ve(Pe)):Bs(Pe)?(n.consume(Pe),Be):(n.consume(Pe),Oe)}function Ce(Pe){return Pe===r?(n.consume(Pe),r=void 0,Fe):Pe===null?t(Pe):Or(Pe)?(s=Ce,Ve(Pe)):(n.consume(Pe),Ce)}function Oe(Pe){return Pe===null||Pe===34||Pe===39||Pe===60||Pe===61||Pe===96?t(Pe):Pe===47||Pe===62||Pd(Pe)?ue(Pe):(n.consume(Pe),Oe)}function Fe(Pe){return Pe===47||Pe===62||Pd(Pe)?ue(Pe):t(Pe)}function Ee(Pe){return Pe===62?(n.consume(Pe),n.exit("htmlTextData"),n.exit("htmlText"),e):t(Pe)}function Ve(Pe){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(Pe),n.exit("lineEnding"),ut}function ut(Pe){return Bs(Pe)?za(n,mt,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Pe):mt(Pe)}function mt(Pe){return n.enter("htmlTextData"),s(Pe)}}const LK={name:"labelEnd",resolveAll:a8e,resolveTo:l8e,tokenize:u8e},r8e={tokenize:c8e},o8e={tokenize:A8e},s8e={tokenize:h8e};function a8e(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&kg(n,0,n.length,t),n}function l8e(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},d={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},p={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",d,e]],a=vm(a,n.slice(o+1,o+i+3)),a=vm(a,[["enter",p,e]]),a=vm(a,UK(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=vm(a,[["exit",p,e],n[s-2],n[s-1],["exit",d,e]]),a=vm(a,n.slice(s+1)),a=vm(a,[["exit",c,e]]),kg(n,o,n.length,a),n}function u8e(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(M){return o?o._inactive?v(M):(s=i.parser.defined.includes(lx(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(M),n.exit("labelMarker"),n.exit("labelEnd"),c):t(M)}function c(M){return M===40?n.attempt(r8e,p,s?p:v)(M):M===91?n.attempt(o8e,p,s?d:v)(M):s?p(M):v(M)}function d(M){return n.attempt(s8e,p,v)(M)}function p(M){return e(M)}function v(M){return o._balanced=!0,t(M)}}function c8e(n,e,t){return i;function i(v){return n.enter("resource"),n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),r}function r(v){return Pd(v)?N4(n,o)(v):o(v)}function o(v){return v===41?p(v):Ioe(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function s(v){return Pd(v)?N4(n,c)(v):p(v)}function a(v){return t(v)}function c(v){return v===34||v===39||v===40?koe(n,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):p(v)}function d(v){return Pd(v)?N4(n,p)(v):p(v)}function p(v){return v===41?(n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),n.exit("resource"),e):t(v)}}function A8e(n,e,t){const i=this;return r;function r(a){return Toe.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(lx(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function h8e(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const d8e={name:"labelStartImage",resolveAll:LK.resolveAll,tokenize:f8e};function f8e(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const m8e={name:"labelStartLink",resolveAll:LK.resolveAll,tokenize:p8e};function p8e(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const Z7={name:"lineEnding",tokenize:g8e};function g8e(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),za(n,e,"linePrefix")}}const YS={name:"thematicBreak",tokenize:y8e};function y8e(n,e,t){let i=0,r;return o;function o(d){return n.enter("thematicBreak"),s(d)}function s(d){return r=d,a(d)}function a(d){return d===r?(n.enter("thematicBreakSequence"),c(d)):i>=3&&(d===null||Or(d))?(n.exit("thematicBreak"),e(d)):t(d)}function c(d){return d===r?(n.consume(d),i++,c):(n.exit("thematicBreakSequence"),Bs(d)?za(n,a,"whitespace")(d):a(d))}}const xd={continuation:{tokenize:_8e},exit:M8e,name:"list",tokenize:b8e},v8e={partial:!0,tokenize:w8e},C8e={partial:!0,tokenize:x8e};function b8e(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(E){const P=i.containerState.type||(E===42||E===43||E===45?"listUnordered":"listOrdered");if(P==="listUnordered"?!i.containerState.marker||E===i.containerState.marker:gP(E)){if(i.containerState.type||(i.containerState.type=P,n.enter(P,{_container:!0})),P==="listUnordered")return n.enter("listItemPrefix"),E===42||E===45?n.check(YS,t,d)(E):d(E);if(!i.interrupt||E===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(E)}return t(E)}function c(E){return gP(E)&&++s<10?(n.consume(E),c):(!i.interrupt||s<2)&&(i.containerState.marker?E===i.containerState.marker:E===41||E===46)?(n.exit("listItemValue"),d(E)):t(E)}function d(E){return n.enter("listItemMarker"),n.consume(E),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||E,n.check(iO,i.interrupt?t:p,n.attempt(v8e,M,v))}function p(E){return i.containerState.initialBlankLine=!0,o++,M(E)}function v(E){return Bs(E)?(n.enter("listItemPrefixWhitespace"),n.consume(E),n.exit("listItemPrefixWhitespace"),M):t(E)}function M(E){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(E)}}function _8e(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(iO,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,za(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!Bs(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(C8e,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,za(n,n.attempt(xd,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function x8e(n,e,t){const i=this;return za(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function M8e(n){n.exit(this.containerState.type)}function w8e(n,e,t){const i=this;return za(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!Bs(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const HQ={name:"setextUnderline",resolveTo:S8e,tokenize:E8e};function S8e(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function E8e(n,e,t){const i=this;let r;return o;function o(d){let p=i.events.length,v;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){v=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||v)?(n.enter("setextHeadingLine"),r=d,s(d)):t(d)}function s(d){return n.enter("setextHeadingLineSequence"),a(d)}function a(d){return d===r?(n.consume(d),a):(n.exit("setextHeadingLineSequence"),Bs(d)?za(n,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Or(d)?(n.exit("setextHeadingLine"),e(d)):t(d)}}const B8e={tokenize:O8e};function O8e(n){const e=this,t=n.attempt(iO,i,n.attempt(this.parser.constructs.flowInitial,r,za(n,n.attempt(this.parser.constructs.flow,r,n.attempt(ROe,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const I8e={resolveAll:Roe()},T8e=Doe("string"),k8e=Doe("text");function Doe(n){return{resolveAll:Roe(n==="text"?D8e:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(p){return d(p)?o(p):a(p)}function a(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),c}function c(p){return d(p)?(t.exit("data"),o(p)):(t.consume(p),c)}function d(p){if(p===null)return!0;const v=r[p];let M=-1;if(v)for(;++M<v.length;){const E=v[M];if(!E.previous||E.previous.call(i,i.previous))return!0}return!1}}}function Roe(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function D8e(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const d=r[o];if(typeof d=="string"){for(s=d.length;d.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(d===-2)c=!0,a++;else if(d!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const d={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(n.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return n}const R8e={42:xd,43:xd,45:xd,48:xd,49:xd,50:xd,51:xd,52:xd,53:xd,54:xd,55:xd,56:xd,57:xd,62:Soe},P8e={91:FOe},U8e={[-2]:H7,[-1]:H7,32:H7},L8e={35:QOe,42:YS,45:[HQ,YS],60:$Oe,61:HQ,95:YS,96:VQ,126:VQ},K8e={38:Boe,92:Eoe},F8e={[-5]:Z7,[-4]:Z7,[-3]:Z7,33:d8e,38:Boe,42:yP,60:[mOe,n8e],91:m8e,92:[GOe,Eoe],93:LK,95:yP,96:BOe},z8e={null:[yP,I8e]},j8e={null:[42,95]},N8e={null:[]},G8e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:j8e,contentInitial:P8e,disable:N8e,document:R8e,flow:L8e,flowInitial:U8e,insideSpan:z8e,string:K8e,text:F8e},Symbol.toStringTag,{value:"Module"}));function W8e(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:q(ee),check:q(ne),consume:Z,enter:X,exit:re,interrupt:q(ne,{interrupt:!0})},d={code:null,containerState:{},defineSkip:U,events:[],now:P,parser:n,previous:null,sliceSerialize:M,sliceStream:E,write:v};let p=e.tokenize.call(d,c);return e.resolveAll&&o.push(e),d;function v(pe){return s=vm(s,pe),z(),s[s.length-1]!==null?[]:(le(e,0),d.events=UK(o,d.events,d),d.events)}function M(pe,Be){return q8e(E(pe),Be)}function E(pe){return Q8e(s,pe)}function P(){const{_bufferIndex:pe,_index:Be,line:Ce,column:Oe,offset:Fe}=i;return{_bufferIndex:pe,_index:Be,line:Ce,column:Oe,offset:Fe}}function U(pe){r[pe.line]=pe.column,ve()}function z(){let pe;for(;i._index<s.length;){const Be=s[i._index];if(typeof Be=="string")for(pe=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===pe&&i._bufferIndex<Be.length;)V(Be.charCodeAt(i._bufferIndex));else V(Be)}}function V(pe){p=p(pe)}function Z(pe){Or(pe)?(i.line++,i.column=1,i.offset+=pe===-3?2:1,ve()):pe!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=pe}function X(pe,Be){const Ce=Be||{};return Ce.type=pe,Ce.start=P(),d.events.push(["enter",Ce,d]),a.push(Ce),Ce}function re(pe){const Be=a.pop();return Be.end=P(),d.events.push(["exit",Be,d]),Be}function ee(pe,Be){le(pe,Be.from)}function ne(pe,Be){Be.restore()}function q(pe,Be){return Ce;function Ce(Oe,Fe,Ee){let Ve,ut,mt,Pe;return Array.isArray(Oe)?Xe(Oe):"tokenize"in Oe?Xe([Oe]):De(Oe);function De(Et){return Rt;function Rt(Ue){const ke=Ue!==null&&Et[Ue],Te=Ue!==null&&Et.null,He=[...Array.isArray(ke)?ke:ke?[ke]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return Xe(He)(Ue)}}function Xe(Et){return Ve=Et,ut=0,Et.length===0?Ee:Ke(Et[ut])}function Ke(Et){return Rt;function Rt(Ue){return Pe=ue(),mt=Et,Et.partial||(d.currentConstruct=Et),Et.name&&d.parser.constructs.disable.null.includes(Et.name)?ot():Et.tokenize.call(Be?Object.assign(Object.create(d),Be):d,c,Bt,ot)(Ue)}}function Bt(Et){return pe(mt,Pe),Fe}function ot(Et){return Pe.restore(),++ut<Ve.length?Ke(Ve[ut]):Ee}}}function le(pe,Be){pe.resolveAll&&!o.includes(pe)&&o.push(pe),pe.resolve&&kg(d.events,Be,d.events.length-Be,pe.resolve(d.events.slice(Be),d)),pe.resolveTo&&(d.events=pe.resolveTo(d.events,d))}function ue(){const pe=P(),Be=d.previous,Ce=d.currentConstruct,Oe=d.events.length,Fe=Array.from(a);return{from:Oe,restore:Ee};function Ee(){i=pe,d.previous=Be,d.currentConstruct=Ce,d.events.length=Oe,a=Fe,ve()}}function ve(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function Q8e(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function q8e(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function Y8e(n){const i={constructs:eOe([G8e,...(n||{}).extensions||[]]),content:r(lOe),defined:[],document:r(cOe),flow:r(B8e),lazy:{},string:r(T8e),text:r(k8e)};return i;function r(o){return s;function s(a){return W8e(i,o,a)}}}function V8e(n){for(;!Ooe(n););return n}const ZQ=/[\0\t\n\r]/g;function $8e(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let d,p,v,M,E;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),v=0,e="",t&&(o.charCodeAt(0)===65279&&v++,t=void 0);v<o.length;){if(ZQ.lastIndex=v,d=ZQ.exec(o),M=d&&d.index!==void 0?d.index:o.length,E=o.charCodeAt(M),!d){e=o.slice(v);break}if(E===10&&v===M&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),v<M&&(c.push(o.slice(v,M)),n+=M-v),E){case 0:{c.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,c.push(-2);n++<p;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}v=M+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const H8e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Z8e(n){return n.replace(H8e,X8e)}function X8e(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return woe(t.slice(o?2:1),o?16:10)}return PK(t)||n}const Poe={}.hasOwnProperty;function J8e(n,e,t){return typeof e!="string"&&(t=e,e=void 0),e7e(t)(V8e(Y8e(t).document().write($8e()(n,e,!0))))}function e7e(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Wn),autolinkProtocol:ue,autolinkEmail:ue,atxHeading:o(Ft),blockQuote:o(Te),characterEscape:ue,characterReference:ue,codeFenced:o(He),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(He,s),codeText:o(Ct,s),codeTextData:ue,data:ue,codeFlowValue:ue,definition:o(vt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(wt),hardBreakEscape:o(Pt),hardBreakTrailing:o(Pt),htmlFlow:o(nn,s),htmlFlowData:ue,htmlText:o(nn,s),htmlTextData:ue,image:o(Kn),label:s,link:o(Wn),listItem:o(Fn),listItemValue:M,listOrdered:o(Mi,v),listUnordered:o(Mi),paragraph:o(Ln),reference:Ke,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Ft),strong:o(In),thematicBreak:o(Tn)},exit:{atxHeading:c(),atxHeadingSequence:ee,autolink:c(),autolinkEmail:ke,autolinkProtocol:Ue,blockQuote:c(),characterEscapeValue:ve,characterReferenceMarkerHexadecimal:ot,characterReferenceMarkerNumeric:ot,characterReferenceValue:Et,characterReference:Rt,codeFenced:c(z),codeFencedFence:U,codeFencedFenceInfo:E,codeFencedFenceMeta:P,codeFlowValue:ve,codeIndented:c(V),codeText:c(Fe),codeTextData:ve,data:ve,definition:c(),definitionDestinationString:re,definitionLabelString:Z,definitionTitleString:X,emphasis:c(),hardBreakEscape:c(Be),hardBreakTrailing:c(Be),htmlFlow:c(Ce),htmlFlowData:ve,htmlText:c(Oe),htmlTextData:ve,image:c(Ve),label:mt,labelText:ut,lineEnding:pe,link:c(Ee),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Bt,resourceDestinationString:Pe,resourceTitleString:De,resource:Xe,setextHeading:c(le),setextHeadingLineSequence:q,setextHeadingText:ne,strong:c(),thematicBreak:c()}};Uoe(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(je){let $={type:"root",children:[]};const j={stack:[$],tokenStack:[],config:e,enter:a,exit:d,buffer:s,resume:p,data:t},Q=[];let Ae=-1;for(;++Ae<je.length;)if(je[Ae][1].type==="listOrdered"||je[Ae][1].type==="listUnordered")if(je[Ae][0]==="enter")Q.push(Ae);else{const Me=Q.pop();Ae=r(je,Me,Ae)}for(Ae=-1;++Ae<je.length;){const Me=e[je[Ae][0]];Poe.call(Me,je[Ae][1].type)&&Me[je[Ae][1].type].call(Object.assign({sliceSerialize:je[Ae][2].sliceSerialize},j),je[Ae][1])}if(j.tokenStack.length>0){const Me=j.tokenStack[j.tokenStack.length-1];(Me[1]||XQ).call(j,void 0,Me[0])}for($.position={start:ov(je.length>0?je[0][1].start:{line:1,column:1,offset:0}),end:ov(je.length>0?je[je.length-2][1].end:{line:1,column:1,offset:0})},Ae=-1;++Ae<e.transforms.length;)$=e.transforms[Ae]($)||$;return $}function r(je,$,j){let Q=$-1,Ae=-1,Me=!1,Ne,We,it,bt;for(;++Q<=j;){const Ye=je[Q];switch(Ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ye[0]==="enter"?Ae++:Ae--,bt=void 0;break}case"lineEndingBlank":{Ye[0]==="enter"&&(Ne&&!bt&&!Ae&&!it&&(it=Q),bt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:bt=void 0}if(!Ae&&Ye[0]==="enter"&&Ye[1].type==="listItemPrefix"||Ae===-1&&Ye[0]==="exit"&&(Ye[1].type==="listUnordered"||Ye[1].type==="listOrdered")){if(Ne){let at=Q;for(We=void 0;at--;){const C=je[at];if(C[1].type==="lineEnding"||C[1].type==="lineEndingBlank"){if(C[0]==="exit")continue;We&&(je[We][1].type="lineEndingBlank",Me=!0),C[1].type="lineEnding",We=at}else if(!(C[1].type==="linePrefix"||C[1].type==="blockQuotePrefix"||C[1].type==="blockQuotePrefixWhitespace"||C[1].type==="blockQuoteMarker"||C[1].type==="listItemIndent"))break}it&&(!We||it<We)&&(Ne._spread=!0),Ne.end=Object.assign({},We?je[We][1].start:Ye[1].end),je.splice(We||Q,0,["exit",Ne,Ye[2]]),Q++,j++}if(Ye[1].type==="listItemPrefix"){const at={type:"listItem",_spread:!1,start:Object.assign({},Ye[1].start),end:void 0};Ne=at,je.splice(Q,0,["enter",at,Ye[2]]),Q++,j++,it=void 0,bt=!0}}}return je[$][1]._spread=Me,j}function o(je,$){return j;function j(Q){a.call(this,je(Q),Q),$&&$.call(this,Q)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(je,$,j){this.stack[this.stack.length-1].children.push(je),this.stack.push(je),this.tokenStack.push([$,j||void 0]),je.position={start:ov($.start),end:void 0}}function c(je){return $;function $(j){je&&je.call(this,j),d.call(this,j)}}function d(je,$){const j=this.stack.pop(),Q=this.tokenStack.pop();if(Q)Q[0].type!==je.type&&($?$.call(this,je,Q[0]):(Q[1]||XQ).call(this,je,Q[0]));else throw new Error("Cannot close `"+je.type+"` ("+j4({start:je.start,end:je.end})+"): its not open");j.position.end=ov(je.end)}function p(){return XBe(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function M(je){if(this.data.expectingFirstListItemValue){const $=this.stack[this.stack.length-2];$.start=Number.parseInt(this.sliceSerialize(je),10),this.data.expectingFirstListItemValue=void 0}}function E(){const je=this.resume(),$=this.stack[this.stack.length-1];$.lang=je}function P(){const je=this.resume(),$=this.stack[this.stack.length-1];$.meta=je}function U(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function z(){const je=this.resume(),$=this.stack[this.stack.length-1];$.value=je.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function V(){const je=this.resume(),$=this.stack[this.stack.length-1];$.value=je.replace(/(\r?\n|\r)$/g,"")}function Z(je){const $=this.resume(),j=this.stack[this.stack.length-1];j.label=$,j.identifier=lx(this.sliceSerialize(je)).toLowerCase()}function X(){const je=this.resume(),$=this.stack[this.stack.length-1];$.title=je}function re(){const je=this.resume(),$=this.stack[this.stack.length-1];$.url=je}function ee(je){const $=this.stack[this.stack.length-1];if(!$.depth){const j=this.sliceSerialize(je).length;$.depth=j}}function ne(){this.data.setextHeadingSlurpLineEnding=!0}function q(je){const $=this.stack[this.stack.length-1];$.depth=this.sliceSerialize(je).codePointAt(0)===61?1:2}function le(){this.data.setextHeadingSlurpLineEnding=void 0}function ue(je){const j=this.stack[this.stack.length-1].children;let Q=j[j.length-1];(!Q||Q.type!=="text")&&(Q=oi(),Q.position={start:ov(je.start),end:void 0},j.push(Q)),this.stack.push(Q)}function ve(je){const $=this.stack.pop();$.value+=this.sliceSerialize(je),$.position.end=ov(je.end)}function pe(je){const $=this.stack[this.stack.length-1];if(this.data.atHardBreak){const j=$.children[$.children.length-1];j.position.end=ov(je.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes($.type)&&(ue.call(this,je),ve.call(this,je))}function Be(){this.data.atHardBreak=!0}function Ce(){const je=this.resume(),$=this.stack[this.stack.length-1];$.value=je}function Oe(){const je=this.resume(),$=this.stack[this.stack.length-1];$.value=je}function Fe(){const je=this.resume(),$=this.stack[this.stack.length-1];$.value=je}function Ee(){const je=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";je.type+="Reference",je.referenceType=$,delete je.url,delete je.title}else delete je.identifier,delete je.label;this.data.referenceType=void 0}function Ve(){const je=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";je.type+="Reference",je.referenceType=$,delete je.url,delete je.title}else delete je.identifier,delete je.label;this.data.referenceType=void 0}function ut(je){const $=this.sliceSerialize(je),j=this.stack[this.stack.length-2];j.label=Z8e($),j.identifier=lx($).toLowerCase()}function mt(){const je=this.stack[this.stack.length-1],$=this.resume(),j=this.stack[this.stack.length-1];if(this.data.inReference=!0,j.type==="link"){const Q=je.children;j.children=Q}else j.alt=$}function Pe(){const je=this.resume(),$=this.stack[this.stack.length-1];$.url=je}function De(){const je=this.resume(),$=this.stack[this.stack.length-1];$.title=je}function Xe(){this.data.inReference=void 0}function Ke(){this.data.referenceType="collapsed"}function Bt(je){const $=this.resume(),j=this.stack[this.stack.length-1];j.label=$,j.identifier=lx(this.sliceSerialize(je)).toLowerCase(),this.data.referenceType="full"}function ot(je){this.data.characterReferenceType=je.type}function Et(je){const $=this.sliceSerialize(je),j=this.data.characterReferenceType;let Q;j?(Q=woe($,j==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Q=PK($);const Ae=this.stack[this.stack.length-1];Ae.value+=Q}function Rt(je){const $=this.stack.pop();$.position.end=ov(je.end)}function Ue(je){ve.call(this,je);const $=this.stack[this.stack.length-1];$.url=this.sliceSerialize(je)}function ke(je){ve.call(this,je);const $=this.stack[this.stack.length-1];$.url="mailto:"+this.sliceSerialize(je)}function Te(){return{type:"blockquote",children:[]}}function He(){return{type:"code",lang:null,meta:null,value:""}}function Ct(){return{type:"inlineCode",value:""}}function vt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function wt(){return{type:"emphasis",children:[]}}function Ft(){return{type:"heading",depth:0,children:[]}}function Pt(){return{type:"break"}}function nn(){return{type:"html",value:""}}function Kn(){return{type:"image",title:null,url:"",alt:null}}function Wn(){return{type:"link",title:null,url:"",children:[]}}function Mi(je){return{type:"list",ordered:je.type==="listOrdered",start:null,spread:je._spread,children:[]}}function Fn(je){return{type:"listItem",spread:je._spread,checked:null,children:[]}}function Ln(){return{type:"paragraph",children:[]}}function In(){return{type:"strong",children:[]}}function oi(){return{type:"text",value:""}}function Tn(){return{type:"thematicBreak"}}}function ov(n){return{line:n.line,column:n.column,offset:n.offset}}function Uoe(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?Uoe(n,i):t7e(n,i)}}function t7e(n,e){let t;for(t in e)if(Poe.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function XQ(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+j4({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+j4({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+j4({start:e.start,end:e.end})+") is still open")}function n7e(n){const e=this;e.parser=t;function t(i){return J8e(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function i7e(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function r7e(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function o7e(n,e){const t=e.value?e.value+`
`:"",i={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(o.data={meta:e.meta}),n.patch(e,o),o=n.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},n.patch(e,o),o}function s7e(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function a7e(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function l7e(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=n3(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,d),n.applyData(e,d)}function u7e(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function c7e(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Loe(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function A7e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Loe(n,e);const r={src:n3(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function h7e(n,e){const t={src:n3(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function d7e(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function f7e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Loe(n,e);const r={href:n3(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function m7e(n,e){const t={href:n3(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function p7e(n,e,t){const i=n.all(e),r=t?g7e(t):Koe(e),o={},s=[];if(typeof e.checked=="boolean"){const p=i[0];let v;p&&p.type==="element"&&p.tagName==="p"?v=p:(v={type:"element",tagName:"p",properties:{},children:[]},i.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const p=i[a];(r||a!==0||p.type!=="element"||p.tagName!=="p")&&s.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!r?s.push(...p.children):s.push(p)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,d),n.applyData(e,d)}function g7e(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=Koe(t[i])}return e}function Koe(n){const e=n.spread;return e??n.children.length>1}function y7e(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function v7e(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function C7e(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function b7e(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function _7e(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=TK(e.children[1]),c=yoe(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function x7e(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const d=[];for(;++c<a;){const v=e.children[c],M={},E=s?s[c]:void 0;E&&(M.align=E);let P={type:"element",tagName:o,properties:M,children:[]};v&&(P.children=n.all(v),n.patch(v,P),P=n.applyData(v,P)),d.push(P)}const p={type:"element",tagName:"tr",properties:{},children:n.wrap(d,!0)};return n.patch(e,p),n.applyData(e,p)}function M7e(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const JQ=9,eq=32;function w7e(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push(tq(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push(tq(e.slice(r),r>0,!1)),o.join("")}function tq(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===JQ||o===eq;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===JQ||o===eq;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function S7e(n,e){const t={type:"text",value:w7e(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function E7e(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const B7e={blockquote:i7e,break:r7e,code:o7e,delete:s7e,emphasis:a7e,footnoteReference:l7e,heading:u7e,html:c7e,imageReference:A7e,image:h7e,inlineCode:d7e,linkReference:f7e,link:m7e,listItem:p7e,list:y7e,paragraph:v7e,root:C7e,strong:b7e,table:_7e,tableCell:M7e,tableRow:x7e,text:S7e,thematicBreak:E7e,toml:nS,yaml:nS,definition:nS,footnoteDefinition:nS};function nS(){}const Foe=-1,rO=0,G4=1,S6=2,KK=3,FK=4,zK=5,jK=6,zoe=7,joe=8,nq=typeof self=="object"?self:globalThis,O7e=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case rO:case Foe:return t(s,r);case G4:{const a=t([],r);for(const c of s)a.push(i(c));return a}case S6:{const a=t({},r);for(const[c,d]of s)a[i(c)]=i(d);return a}case KK:return t(new Date(s),r);case FK:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case zK:{const a=t(new Map,r);for(const[c,d]of s)a.set(i(c),i(d));return a}case jK:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case zoe:{const{name:a,message:c}=s;return t(new nq[a](c),r)}case joe:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new nq[o](s),r)};return i},iq=n=>O7e(new Map,n)(0),t2="",{toString:I7e}={},{keys:T7e}=Object,G3=n=>{const e=typeof n;if(e!=="object"||!n)return[rO,e];const t=I7e.call(n).slice(8,-1);switch(t){case"Array":return[G4,t2];case"Object":return[S6,t2];case"Date":return[KK,t2];case"RegExp":return[FK,t2];case"Map":return[zK,t2];case"Set":return[jK,t2];case"DataView":return[G4,t]}return t.includes("Array")?[G4,t]:t.includes("Error")?[zoe,t]:[S6,t]},iS=([n,e])=>n===rO&&(e==="function"||e==="symbol"),k7e=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=G3(s);switch(a){case rO:{let p=s;switch(c){case"bigint":a=joe,p=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);p=null;break;case"undefined":return r([Foe],s)}return r([a,p],s)}case G4:{if(c){let M=s;return c==="DataView"?M=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(M=new Uint8Array(s)),r([c,[...M]],s)}const p=[],v=r([a,p],s);for(const M of s)p.push(o(M));return v}case S6:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const p=[],v=r([a,p],s);for(const M of T7e(s))(n||!iS(G3(s[M])))&&p.push([o(M),o(s[M])]);return v}case KK:return r([a,s.toISOString()],s);case FK:{const{source:p,flags:v}=s;return r([a,{source:p,flags:v}],s)}case zK:{const p=[],v=r([a,p],s);for(const[M,E]of s)(n||!(iS(G3(M))||iS(G3(E))))&&p.push([o(M),o(E)]);return v}case jK:{const p=[],v=r([a,p],s);for(const M of s)(n||!iS(G3(M)))&&p.push(o(M));return v}}const{message:d}=s;return r([a,{name:c,message:d}],s)};return o},rq=(n,{json:e,lossy:t}={})=>{const i=[];return k7e(!(e||t),!!e,new Map,i)(n),i},E6=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?iq(rq(n,e)):structuredClone(n):(n,e)=>iq(rq(n,e));function D7e(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function R7e(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function P7e(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||D7e,i=n.options.footnoteBackLabel||R7e,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const d=n.footnoteById.get(n.footnoteOrder[c]);if(!d)continue;const p=n.all(d),v=String(d.identifier).toUpperCase(),M=n3(v.toLowerCase());let E=0;const P=[],U=n.footnoteCounts.get(v);for(;U!==void 0&&++E<=U;){P.length>0&&P.push({type:"text",value:" "});let Z=typeof t=="string"?t:t(c,E);typeof Z=="string"&&(Z={type:"text",value:Z}),P.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+M+(E>1?"-"+E:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,E),className:["data-footnote-backref"]},children:Array.isArray(Z)?Z:[Z]})}const z=p[p.length-1];if(z&&z.type==="element"&&z.tagName==="p"){const Z=z.children[z.children.length-1];Z&&Z.type==="text"?Z.value+=" ":z.children.push({type:"text",value:" "}),z.children.push(...P)}else p.push(...P);const V={type:"element",tagName:"li",properties:{id:e+"fn-"+M},children:n.wrap(p,!0)};n.patch(d,V),a.push(V)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...E6(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const Noe=(function(n){if(n==null)return F7e;if(typeof n=="function")return oO(n);if(typeof n=="object")return Array.isArray(n)?U7e(n):L7e(n);if(typeof n=="string")return K7e(n);throw new Error("Expected function, string, or object as test")});function U7e(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Noe(n[t]);return oO(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function L7e(n){const e=n;return oO(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function K7e(n){return oO(e);function e(t){return t&&t.type===n}}function oO(n){return e;function e(t,i,r){return!!(z7e(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function F7e(){return!0}function z7e(n){return n!==null&&typeof n=="object"&&"type"in n}const Goe=[],j7e=!0,oq=!1,N7e="skip";function G7e(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=Noe(r),s=i?-1:1;a(n,void 0,[])();function a(c,d,p){const v=c&&typeof c=="object"?c:{};if(typeof v.type=="string"){const E=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(M,"name",{value:"node ("+(c.type+(E?"<"+E+">":""))+")"})}return M;function M(){let E=Goe,P,U,z;if((!e||o(c,d,p[p.length-1]||void 0))&&(E=W7e(t(c,p)),E[0]===oq))return E;if("children"in c&&c.children){const V=c;if(V.children&&E[0]!==N7e)for(U=(i?V.children.length:-1)+s,z=p.concat(V);U>-1&&U<V.children.length;){const Z=V.children[U];if(P=a(Z,U,z)(),P[0]===oq)return P;U=typeof P[1]=="number"?P[1]:U+s}}return E}}}function W7e(n){return Array.isArray(n)?n:typeof n=="number"?[j7e,n]:n==null?Goe:[n]}function Woe(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),G7e(n,o,a,r);function a(c,d){const p=d[d.length-1],v=p?p.children.indexOf(c):void 0;return s(c,v,p)}}const vP={}.hasOwnProperty,Q7e={};function q7e(n,e){const t=e||Q7e,i=new Map,r=new Map,o=new Map,s={...B7e,...t.handlers},a={all:d,applyData:V7e,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:Y7e,wrap:H7e};return Woe(n,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const v=p.type==="definition"?i:r,M=String(p.identifier).toUpperCase();v.has(M)||v.set(M,p)}}),a;function c(p,v){const M=p.type,E=a.handlers[M];if(vP.call(a.handlers,M)&&E)return E(a,p,v);if(a.options.passThrough&&a.options.passThrough.includes(M)){if("children"in p){const{children:U,...z}=p,V=E6(z);return V.children=a.all(p),V}return E6(p)}return(a.options.unknownHandler||$7e)(a,p,v)}function d(p){const v=[];if("children"in p){const M=p.children;let E=-1;for(;++E<M.length;){const P=a.one(M[E],p);if(P){if(E&&M[E-1].type==="break"&&(!Array.isArray(P)&&P.type==="text"&&(P.value=sq(P.value)),!Array.isArray(P)&&P.type==="element")){const U=P.children[0];U&&U.type==="text"&&(U.value=sq(U.value))}Array.isArray(P)?v.push(...P):v.push(P)}}}return v}}function Y7e(n,e){n.position&&(e.position=IBe(n))}function V7e(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,E6(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function $7e(n,e){const t=e.data||{},i="value"in e&&!(vP.call(t,"hProperties")||vP.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function H7e(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function sq(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function aq(n,e){const t=q7e(n,e),i=t.one(n,void 0),r=P7e(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function Z7e(n,e){return n&&"run"in n?async function(t,i){const r=aq(t,{file:i,...e});await n.run(r,i)}:function(t,i){return aq(t,{file:i,...n||e})}}function lq(n){if(n)throw n}var X7,uq;function X7e(){if(uq)return X7;uq=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},o=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=n.call(d,"constructor"),v=d.constructor&&d.constructor.prototype&&n.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!v)return!1;var M;for(M in d);return typeof M>"u"||n.call(d,M)},s=function(d,p){t&&p.name==="__proto__"?t(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},a=function(d,p){if(p==="__proto__")if(n.call(d,p)){if(i)return i(d,p).value}else return;return d[p]};return X7=function c(){var d,p,v,M,E,P,U=arguments[0],z=1,V=arguments.length,Z=!1;for(typeof U=="boolean"&&(Z=U,U=arguments[1]||{},z=2),(U==null||typeof U!="object"&&typeof U!="function")&&(U={});z<V;++z)if(d=arguments[z],d!=null)for(p in d)v=a(U,p),M=a(d,p),U!==M&&(Z&&M&&(o(M)||(E=r(M)))?(E?(E=!1,P=v&&r(v)?v:[]):P=v&&o(v)?v:{},s(U,{name:p,newValue:c(Z,P,M)})):typeof M<"u"&&s(U,{name:p,newValue:M}));return U},X7}var J7e=X7e();const J7=xu(J7e);function CP(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function eIe(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...d){const p=n[++o];let v=-1;if(c){s(c);return}for(;++v<r.length;)(d[v]===null||d[v]===void 0)&&(d[v]=r[v]);r=d,p?tIe(p,a)(...d):s(null,...d)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function tIe(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(d){const p=d;if(a&&t)throw p;return r(p)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const tg={basename:nIe,dirname:iIe,extname:rIe,join:oIe,sep:"/"};function nIe(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');GM(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function iIe(n){if(GM(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function rIe(n){GM(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function oIe(...n){let e=-1,t;for(;++e<n.length;)GM(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":sIe(t)}function sIe(n){GM(n);const e=n.codePointAt(0)===47;let t=aIe(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function aIe(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function GM(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const lIe={cwd:uIe};function uIe(){return"/"}function bP(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function cIe(n){if(typeof n=="string")n=new URL(n);else if(!bP(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return AIe(n)}function AIe(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const eI=["history","path","basename","stem","extname","dirname"];class Qoe{constructor(e){let t;e?bP(e)?t={path:e}:typeof e=="string"||hIe(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":lIe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<eI.length;){const o=eI[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)eI.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?tg.basename(this.path):void 0}set basename(e){nI(e,"basename"),tI(e,"basename"),this.path=tg.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?tg.dirname(this.path):void 0}set dirname(e){cq(this.basename,"dirname"),this.path=tg.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?tg.extname(this.path):void 0}set extname(e){if(tI(e,"extname"),cq(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=tg.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){bP(e)&&(e=cIe(e)),nI(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?tg.basename(this.path,this.extname):void 0}set stem(e){nI(e,"stem"),tI(e,"stem"),this.path=tg.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new rh(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function tI(n,e){if(n&&n.includes(tg.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+tg.sep+"`")}function nI(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function cq(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function hIe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const dIe=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),fIe={}.hasOwnProperty;class NK extends dIe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eIe()}copy(){const e=new NK;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(J7(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(oI("data",this.frozen),this.namespace[e]=t,this):fIe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(oI("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=rS(e),i=this.parser||this.Parser;return iI("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),iI("process",this.parser||this.Parser),rI("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=rS(e),c=i.parse(a);i.run(c,a,function(p,v,M){if(p||!v||!M)return d(p);const E=v,P=i.stringify(E,M);gIe(P)?M.value=P:M.result=P,d(p,M)});function d(p,v){p||!v?s(p):o?o(v):t(void 0,v)}}}processSync(e){let t=!1,i;return this.freeze(),iI("processSync",this.parser||this.Parser),rI("processSync",this.compiler||this.Compiler),this.process(e,r),hq("processSync","process",t),i;function r(o,s){t=!0,lq(o),i=s}}run(e,t,i){Aq(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=rS(t);r.run(e,c,d);function d(p,v,M){const E=v||e;p?a(p):s?s(E):i(void 0,E,M)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),hq("runSync","run",i),r;function o(s,a){lq(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=rS(t),r=this.compiler||this.Compiler;return rI("stringify",r),Aq(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(oI("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...v]=d;c(p,v)}else s(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function s(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(d.plugins),d.settings&&(r.settings=J7(!0,r.settings,d.settings))}function a(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const v=d[p];o(v)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,p){let v=-1,M=-1;for(;++v<i.length;)if(i[v][0]===d){M=v;break}if(M===-1)i.push([d,...p]);else if(p.length>0){let[E,...P]=p;const U=i[M][1];CP(U)&&CP(E)&&(E=J7(!0,U,E)),i[M]=[d,E,...P]}}}}const mIe=new NK().freeze();function iI(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function rI(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function oI(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Aq(n){if(!CP(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function hq(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function rS(n){return pIe(n)?n:new Qoe(n)}function pIe(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function gIe(n){return typeof n=="string"||yIe(n)}function yIe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const vIe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",dq=[],fq={allowDangerousHtml:!0},CIe=/^(https?|ircs?|mailto|xmpp)$/i,bIe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _Ie(n){const e=xIe(n),t=MIe(n);return wIe(e.runSync(e.parse(t),t),n)}function xIe(n){const e=n.rehypePlugins||dq,t=n.remarkPlugins||dq,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...fq}:fq;return mIe().use(n7e).use(t).use(Z7e,i).use(e)}function MIe(n){const e=n.children||"",t=new Qoe;return typeof e=="string"&&(t.value=e),t}function wIe(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||SIe;for(const p of bIe)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+vIe+p.id,void 0);return Woe(n,d),PBe(n,{Fragment:oe.Fragment,components:r,ignoreInvalidStyle:!0,jsx:oe.jsx,jsxs:oe.jsxs,passKeys:!0,passNode:!0});function d(p,v,M){if(p.type==="raw"&&M&&typeof v=="number")return s?M.children.splice(v,1):M.children[v]={type:"text",value:p.value},v;if(p.type==="element"){let E;for(E in $7)if(Object.hasOwn($7,E)&&Object.hasOwn(p.properties,E)){const P=p.properties[E],U=$7[E];(U===null||U.includes(p.tagName))&&(p.properties[E]=c(String(P||""),E,p))}}if(p.type==="element"){let E=t?!t.includes(p.tagName):o?o.includes(p.tagName):!1;if(!E&&i&&typeof v=="number"&&(E=!i(p,v,M)),E&&M&&typeof v=="number")return a&&p.children?M.children.splice(v,1,...p.children):M.children.splice(v,1),v}}}function SIe(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||CIe.test(n.slice(0,e))?n:""}function eo(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return eo=function(){return s},s}eo();const mq=(eo().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class sO extends En.Component{render(){eo().f[0]++;const{fieldSpec:e}=(eo().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(eo().s[2]++,e),s=(eo().s[3]++,e["sdk-support"]),a=(eo().s[4]++,eo().b[0][0]++,!!i&&(eo().b[0][1]++,!Array.isArray(i)));eo().s[5]++;const c=d=>{eo().f[1]++;const p=(eo().s[6]++,d.toLowerCase());return eo().s[7]++,p.startsWith("https://")?(eo().b[1][0]++,eo().s[8]++,oe.jsx("a",{href:p,target:"_blank",rel:"noreferrer",children:"#"+p.split("/").pop()})):(eo().b[1][1]++,eo().s[9]++,d)};return eo().s[10]++,oe.jsxs(oe.Fragment,{children:[(eo().b[2][0]++,t&&(eo().b[2][1]++,oe.jsxs("div",{className:"SpecDoc",children:[oe.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:oe.jsx(_Ie,{components:{a:({node:d,href:p,children:v,...M})=>(eo().f[2]++,eo().s[11]++,oe.jsx("a",{href:p,target:"_blank",...M,children:v}))},children:t})}),(eo().b[3][0]++,a&&(eo().b[3][1]++,oe.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([d,p])=>(eo().f[3]++,eo().s[12]++,oe.jsxs("li",{children:[oe.jsx("code",{children:JSON.stringify(d)}),oe.jsx("div",{children:p.doc})]},d)))})))]}))),(eo().b[4][0]++,s&&(eo().b[4][1]++,oe.jsx("div",{className:"SpecDoc__sdk-support",children:oe.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{}),Object.values(mq).map(d=>(eo().f[4]++,eo().s[13]++,oe.jsx("th",{children:d},d)))]})}),oe.jsx("tbody",{children:Object.entries(s).map(([d,p])=>(eo().f[5]++,eo().s[14]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:d}),Object.keys(mq).map(v=>(eo().f[6]++,eo().s[15]++,Object.prototype.hasOwnProperty.call(p,v)?(eo().b[5][0]++,eo().s[16]++,oe.jsx("td",{children:c(p[v])},v)):(eo().b[5][1]++,eo().s[17]++,oe.jsx("td",{children:"no"},v))))]},d)))})]})}))),(eo().b[6][0]++,r&&(eo().b[6][1]++,o)&&(eo().b[6][2]++,oe.jsx("div",{className:"SpecDoc__learn-more",children:oe.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function qr(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qr=function(){return s},s}qr();class ds extends En.Component{_blockEl=(qr().s[0]++,null);constructor(e){qr().f[0]++,qr().s[1]++,super(e),qr().s[2]++,this.state={showDoc:!1}}onChange(e){qr().f[1]++;const t=(qr().s[3]++,e.target.value);if(qr().s[4]++,this.props.onChange)return qr().b[0][0]++,qr().s[5]++,this.props.onChange(t===""?(qr().b[1][0]++,void 0):(qr().b[1][1]++,t));qr().b[0][1]++}onToggleDoc=(qr().s[6]++,e=>{qr().f[2]++,qr().s[7]++,this.setState({showDoc:e})});onLabelClick=(qr().s[8]++,e=>{qr().f[3]++;const t=(qr().s[9]++,e.nativeEvent.target),i=(qr().s[10]++,this._blockEl?.contains(t));qr().s[11]++,qr().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(qr().b[3][1]++,!i)?(qr().b[2][0]++,qr().s[12]++,e.stopPropagation()):qr().b[2][1]++,qr().s[13]++,e.nativeEvent.target.nodeName!=="A"?(qr().b[4][0]++,qr().s[14]++,e.preventDefault()):qr().b[4][1]++});render(){return qr().f[4]++,qr().s[15]++,oe.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:Ug({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(qr().b[5][0]++,this.props.fieldSpec&&(qr().b[5][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:oe.jsx(BK,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(qr().b[6][0]++,!this.props.fieldSpec&&(qr().b[6][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),oe.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),oe.jsx("div",{className:"maputnik-input-block-content",ref:e=>{qr().f[5]++,qr().s[16]++,this._blockEl=e},children:this.props.children}),(qr().b[7][0]++,this.props.fieldSpec&&(qr().b[7][1]++,oe.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(qr().b[8][0]++,""):(qr().b[8][1]++,"none")},children:oe.jsx(sO,{fieldSpec:this.props.fieldSpec})})))]})}}function gA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gA=function(){return s},s}gA();class o_ extends En.Component{render(){gA().f[0]++;let e=(gA().s[0]++,this.props.options);return gA().s[1]++,gA().b[1][0]++,e.length>0&&(gA().b[1][1]++,!Array.isArray(e[0]))?(gA().b[0][0]++,gA().s[2]++,e=e.map(t=>(gA().f[1]++,gA().s[3]++,[t,t]))):gA().b[0][1]++,gA().s[4]++,oe.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(gA().f[2]++,gA().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(gA().f[3]++,gA().s[6]++,oe.jsx("option",{value:t,children:i},t)))})}}function ar(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ar=function(){return s},s}ar();class Wp extends En.Component{static defaultProps=(ar().s[0]++,{onInput:()=>{ar().f[0]++}});constructor(e){ar().f[1]++,ar().s[1]++,super(e),ar().s[2]++,this.state={editing:!1,value:(ar().b[0][0]++,e.value||(ar().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(ar().f[2]++,ar().s[3]++,t.editing)ar().b[1][1]++;else return ar().b[1][0]++,ar().s[4]++,{value:e.value};return ar().s[5]++,{}}render(){ar().f[3]++;let e,t;return ar().s[6]++,this.props.multi?(ar().b[2][0]++,ar().s[7]++,e="textarea",ar().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(ar().b[2][1]++,ar().s[9]++,e="input",ar().s[10]++,t=["maputnik-string"]),ar().s[11]++,this.props.disabled?(ar().b[3][0]++,ar().s[12]++,t.push("maputnik-string--disabled")):ar().b[3][1]++,ar().s[13]++,En.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(ar().b[4][0]++,this.props.spellCheck):(ar().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(ar().b[5][0]++,""):(ar().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{ar().f[4]++,ar().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{ar().f[5]++,ar().s[15]++,this.props.onInput?(ar().b[6][0]++,ar().s[16]++,this.props.onInput(this.state.value)):ar().b[6][1]++})},onBlur:()=>{ar().f[6]++,ar().s[17]++,this.state.value!==this.props.value?(ar().b[7][0]++,ar().s[18]++,this.setState({editing:!1}),ar().s[19]++,this.props.onChange?(ar().b[8][0]++,ar().s[20]++,this.props.onChange(this.state.value)):ar().b[8][1]++):ar().b[7][1]++},onKeyDown:i=>{ar().f[7]++,ar().s[21]++,ar().b[10][0]++,i.keyCode===13&&(ar().b[10][1]++,this.props.onChange)?(ar().b[9][0]++,ar().s[22]++,this.props.onChange(this.state.value)):ar().b[9][1]++},required:this.props.required})}}function YA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return YA=function(){return s},s}YA();YA().s[0]++;const EIe=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(YA().b[0][0]++,!1)})=>{YA().f[0]++;const s=(YA().s[1]++,Object.keys((YA().b[1][0]++,Cm.layer.type.values||(YA().b[1][1]++,{}))).map(a=>(YA().f[1]++,YA().s[2]++,[a,oM.startCase(a.replace(/-/g," "))])));return YA().s[3]++,oe.jsxs(ds,{label:n("Type"),fieldSpec:Cm.layer.type,"data-wd-key":t,error:r,children:[(YA().b[2][0]++,o&&(YA().b[2][1]++,oe.jsx(Wp,{value:e,disabled:!0}))),(YA().b[3][0]++,!o&&(YA().b[3][1]++,oe.jsx(o_,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},qoe=(YA().s[4]++,So()(EIe));function G5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return G5=function(){return s},s}G5();G5().s[0]++;const Yoe=n=>(G5().f[0]++,G5().s[1]++,oe.jsx(ds,{label:"ID",fieldSpec:Yr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:oe.jsx(Wp,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function oS(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function bl(){return bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bl.apply(null,arguments)}var BIe=J1();const pr=xu(BIe);var sI={exports:{}},Ls={};var pq;function OIe(){if(pq)return Ls;pq=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),P;P=Symbol.for("react.module.reference");function U(z){if(typeof z=="object"&&z!==null){var V=z.$$typeof;switch(V){case n:switch(z=z.type,z){case t:case r:case i:case d:case p:return z;default:switch(z=z&&z.$$typeof,z){case a:case s:case c:case M:case v:case o:return z;default:return V}}case e:return V}}}return Ls.ContextConsumer=s,Ls.ContextProvider=o,Ls.Element=n,Ls.ForwardRef=c,Ls.Fragment=t,Ls.Lazy=M,Ls.Memo=v,Ls.Portal=e,Ls.Profiler=r,Ls.StrictMode=i,Ls.Suspense=d,Ls.SuspenseList=p,Ls.isAsyncMode=function(){return!1},Ls.isConcurrentMode=function(){return!1},Ls.isContextConsumer=function(z){return U(z)===s},Ls.isContextProvider=function(z){return U(z)===o},Ls.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===n},Ls.isForwardRef=function(z){return U(z)===c},Ls.isFragment=function(z){return U(z)===t},Ls.isLazy=function(z){return U(z)===M},Ls.isMemo=function(z){return U(z)===v},Ls.isPortal=function(z){return U(z)===e},Ls.isProfiler=function(z){return U(z)===r},Ls.isStrictMode=function(z){return U(z)===i},Ls.isSuspense=function(z){return U(z)===d},Ls.isSuspenseList=function(z){return U(z)===p},Ls.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===t||z===r||z===i||z===d||z===p||z===E||typeof z=="object"&&z!==null&&(z.$$typeof===M||z.$$typeof===v||z.$$typeof===o||z.$$typeof===s||z.$$typeof===c||z.$$typeof===P||z.getModuleId!==void 0)},Ls.typeOf=U,Ls}var gq;function IIe(){return gq||(gq=1,sI.exports=OIe()),sI.exports}IIe();const yq=n=>typeof n=="object"&&n!=null&&n.nodeType===1,vq=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",sS=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return vq(t.overflowY,e)||vq(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},aS=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,TIe=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},kIe=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,d=typeof a=="function"?a:Ce=>Ce!==a;if(!yq(n))throw new TypeError("Invalid target");const p=document.scrollingElement||document.documentElement,v=[];let M=n;for(;yq(M)&&d(M);){if(M=TIe(M),M===p){v.push(M);break}M!=null&&M===document.body&&sS(M)&&!sS(document.documentElement)||M!=null&&sS(M,c)&&v.push(M)}const E=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,P=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:U,scrollY:z}=window,{height:V,width:Z,top:X,right:re,bottom:ee,left:ne}=n.getBoundingClientRect(),{top:q,right:le,left:ue}=(Ce=>{const Oe=window.getComputedStyle(Ce);return{top:parseFloat(Oe.scrollMarginTop)||0,right:parseFloat(Oe.scrollMarginRight)||0,bottom:parseFloat(Oe.scrollMarginBottom)||0,left:parseFloat(Oe.scrollMarginLeft)||0}})(n);let ve=X-q,pe=s==="center"?ne+Z/2-ue+le:s==="end"?re+le:ne-ue;const Be=[];for(let Ce=0;Ce<v.length;Ce++){const Oe=v[Ce],{height:Fe,width:Ee,top:Ve,right:ut,bottom:mt,left:Pe}=Oe.getBoundingClientRect();if(X>=0&&ne>=0&&ee<=P&&re<=E&&(Oe===p&&!sS(Oe)||X>=Ve&&ee<=mt&&ne>=Pe&&re<=ut))return Be;const De=getComputedStyle(Oe),Xe=parseInt(De.borderLeftWidth,10),Ke=parseInt(De.borderTopWidth,10),Bt=parseInt(De.borderRightWidth,10),ot=parseInt(De.borderBottomWidth,10);let Et=0,Rt=0;const Ue="offsetWidth"in Oe?Oe.offsetWidth-Oe.clientWidth-Xe-Bt:0,ke="offsetHeight"in Oe?Oe.offsetHeight-Oe.clientHeight-Ke-ot:0,Te="offsetWidth"in Oe?Oe.offsetWidth===0?0:Ee/Oe.offsetWidth:0,He="offsetHeight"in Oe?Oe.offsetHeight===0?0:Fe/Oe.offsetHeight:0;if(p===Oe)Et=aS(z,z+P,P,Ke,ot,z+ve,z+ve+V,V),Rt=s==="start"?pe:s==="center"?pe-E/2:s==="end"?pe-E:aS(U,U+E,E,Xe,Bt,U+pe,U+pe+Z,Z),Et=Math.max(0,Et+z),Rt=Math.max(0,Rt+U);else{Et=aS(Ve,mt,Fe,Ke,ot+ke,ve,ve+V,V),Rt=s==="start"?pe-Pe-Xe:s==="center"?pe-(Pe+Ee/2)+Ue/2:s==="end"?pe-ut+Bt+Ue:aS(Pe,ut,Ee,Xe,Bt+Ue,pe,pe+Z,Z);const{scrollLeft:Ct,scrollTop:vt}=Oe;Et=He===0?0:Math.max(0,Math.min(vt+Et/He,Oe.scrollHeight-Fe/He+ke)),Rt=Te===0?0:Math.max(0,Math.min(Ct+Rt/Te,Oe.scrollWidth-Ee/Te+Ue)),ve+=vt-Et,pe+=Ct-Rt}Be.push({el:Oe,top:Et,left:Rt})}return Be};var Ux=function(){return Ux=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ux.apply(this,arguments)};var DIe=0;function Voe(){}function RIe(n,e){if(n){var t=kIe(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function Cq(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function $oe(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function S1(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function lS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function PIe(){return String(DIe++)}function _P(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=Hoe(e,i)?e[i]:n[i],t},{})}function Hoe(n,e){return n[e]!==void 0}function UIe(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function uS(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=B6(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function B6(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?B6(e?o-1:0,e,t,i):-1}function bq(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(Cq(r,n,t)||i&&Cq(r,t.document.activeElement,t))})}var LIe=$oe(function(n){Zoe(n).textContent=""},500);function Zoe(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function KIe(n,e){if(!(!n||!e)){var t=Zoe(e);t.textContent=n,LIe(e)}}function FIe(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var Xoe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function zIe(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){jIe(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(bl({type:r},o))}function jIe(n,e,t,i){var r=e.props,o=e.type,s="on"+GK(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](bl({type:o},i))}function NIe(n,e){return e.changes}var _q=$oe(function(n,e){KIe(n,e)},200),GIe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?St.useLayoutEffect:St.useEffect,WIe="useId"in En?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+En.useId();t||(t=c);var d=St.useMemo(function(){return{labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(p){return t+"-item-"+p},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"}},[o,t,a,i,r,s]);return d}:function(e){var t=e.id,i=t===void 0?"downshift-"+PIe():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,d=St.useMemo(function(){return{labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(p){return i+"-item-"+p},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"}},[s,i,c,r,o,a]);return d};function QIe(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function GK(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function Joe(n){var e=St.useRef(n);return e.current=n,e}function qIe(n,e,t,i){var r=St.useRef(),o=St.useRef(),s=St.useCallback(function(E,P){o.current=P,E=_P(E,P.props);var U=n(E,P),z=P.props.stateReducer(E,bl({},P,{changes:U}));return z},[n]),a=St.useReducer(s,e,t),c=a[0],d=a[1],p=Joe(e),v=St.useCallback(function(E){return d(bl({props:p.current},E))},[p]),M=o.current;return St.useEffect(function(){var E=_P(r.current,M?.props),P=M&&r.current&&!i(E,c);P&&zIe(M,E,c),r.current=c},[c,M,i]),[c,v]}var W4={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:NIe,scrollIntoView:RIe,environment:typeof window>"u"?void 0:window};function Dv(n,e,t){t===void 0&&(t=Xoe);var i=n["default"+GK(e)];return i!==void 0?i:t[e]}function Q4(n,e,t){t===void 0&&(t=Xoe);var i=n[e];if(i!==void 0)return i;var r=n["initial"+GK(e)];return r!==void 0?r:Dv(n,e,t)}function YIe(n){var e=Q4(n,"selectedItem"),t=Q4(n,"isOpen"),i=JIe(n),r=Q4(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function q4(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,d=e.highlightedIndex;return i.length===0?-1:r!==void 0&&d===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(p){return a(c)===a(p)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function VIe(n,e,t){var i=St.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1}),r=St.useCallback(function(){return t.map(function(o){return o.current})},[t]);return St.useEffect(function(){if(!n)return Voe;function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(p){i.current.isMouseDown=!1,bq(p.target,r(),n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function d(p){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!bq(p.target,r(),n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",d),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",d)}},[n,r,e]),i.current}var $Ie=function(){return Voe};function HIe(n,e,t,i){i===void 0&&(i={});var r=i.document,o=WK();St.useEffect(function(){if(!(!n||o||!r)){var s=n(e);_q(s,r)}},t),St.useEffect(function(){return function(){_q.cancel(),FIe(r)}},[r])}function ZIe(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=St.useRef(!0);return GIe(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function xq(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return bl({isOpen:!1,highlightedIndex:-1},r&&bl({selectedItem:n.items[e],isOpen:Dv(n,"isOpen"),highlightedIndex:Dv(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function XIe(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function WK(){var n=En.useRef(!0);return En.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function xP(n){var e=Dv(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function JIe(n){var e=Q4(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var VS={environment:pr.shape({addEventListener:pr.func.isRequired,removeEventListener:pr.func.isRequired,document:pr.shape({createElement:pr.func.isRequired,getElementById:pr.func.isRequired,activeElement:pr.any.isRequired,body:pr.any.isRequired}).isRequired,Node:pr.func.isRequired}),itemToString:pr.func,itemToKey:pr.func,stateReducer:pr.func},ese=bl({},VS,{getA11yStatusMessage:pr.func,highlightedIndex:pr.number,defaultHighlightedIndex:pr.number,initialHighlightedIndex:pr.number,isOpen:pr.bool,defaultIsOpen:pr.bool,initialIsOpen:pr.bool,selectedItem:pr.any,initialSelectedItem:pr.any,defaultSelectedItem:pr.any,id:pr.string,labelId:pr.string,menuId:pr.string,getItemId:pr.func,toggleButtonId:pr.string,onSelectedItemChange:pr.func,onHighlightedIndexChange:pr.func,onStateChange:pr.func,onIsOpenChange:pr.func,scrollIntoView:pr.func});function eTe(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:q4(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:q4(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:xP(r),isOpen:Dv(r,"isOpen"),selectedItem:Dv(r,"selectedItem"),inputValue:Dv(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return bl({},n,o)}Ux(Ux({},ese),{items:pr.array.isRequired,isItemDisabled:pr.func});Ux(Ux({},W4),{isItemDisabled:function(){return!1}});var QK=0,qK=1,YK=2,VK=3,$K=4,HK=5,ZK=6,XK=7,JK=8,O6=9,eF=10,tse=11,nse=12,tF=13,ise=14,rse=15,ose=16,sse=17,ase=18,nF=19,lse=20,use=21,iF=22,cse=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:iF,FunctionCloseMenu:sse,FunctionOpenMenu:ose,FunctionReset:use,FunctionSelectItem:nF,FunctionSetHighlightedIndex:ase,FunctionSetInputValue:lse,FunctionToggleMenu:rse,InputBlur:O6,InputChange:JK,InputClick:eF,InputKeyDownArrowDown:QK,InputKeyDownArrowUp:qK,InputKeyDownEnd:$K,InputKeyDownEnter:XK,InputKeyDownEscape:YK,InputKeyDownHome:VK,InputKeyDownPageDown:ZK,InputKeyDownPageUp:HK,ItemClick:tF,ItemMouseMove:nse,MenuMouseLeave:tse,ToggleButtonClick:ise});function tTe(n){var e=YIe(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),bl({},e,{inputValue:i})}bl({},ese,{items:pr.array.isRequired,isItemDisabled:pr.func,inputValue:pr.string,defaultInputValue:pr.string,initialInputValue:pr.string,inputId:pr.string,onInputValueChange:pr.func});function nTe(n,e,t,i){var r=St.useRef(),o=qIe(n,e,t,i),s=o[0],a=o[1],c=WK();return St.useEffect(function(){if(Hoe(e,"selectedItem")){if(!c){var d=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);d&&a({type:iF,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[_P(s,e),a]}var iTe=bl({},W4,{isItemDisabled:function(){return!1}});function rTe(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case tF:s={isOpen:Dv(r,"isOpen"),highlightedIndex:xP(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case QK:n.isOpen?s={highlightedIndex:uS(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:q4(r,n,1),isOpen:r.items.length>=0};break;case qK:n.isOpen?o?s=xq(r,n.highlightedIndex):s={highlightedIndex:uS(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:q4(r,n,-1),isOpen:r.items.length>=0};break;case XK:s=xq(r,n.highlightedIndex);break;case YK:s=bl({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case HK:s={highlightedIndex:uS(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case ZK:s={highlightedIndex:uS(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case VK:s={highlightedIndex:B6(0,!1,r.items,r.isItemDisabled)};break;case $K:s={highlightedIndex:B6(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case O6:s=bl({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case JK:s={isOpen:!0,highlightedIndex:xP(r),inputValue:e.inputValue};break;case eF:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:q4(r,n,0)};break;case nF:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case iF:s={inputValue:e.inputValue};break;default:return eTe(n,e,cse)}return bl({},n,s)}var oTe=["onMouseLeave","refKey","ref"],sTe=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],aTe=["onClick","onPress","refKey","ref"],lTe=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];MP.stateChangeTypes=cse;function MP(n){n===void 0&&(n={});var e=bl({},iTe,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=nTe(rTe,e,tTe,XIe),a=s[0],c=s[1],d=a.isOpen,p=a.highlightedIndex,v=a.selectedItem,M=a.inputValue,E=St.useRef(null),P=St.useRef({}),U=St.useRef(null),z=St.useRef(null),V=WK(),Z=WIe(e),X=St.useRef(),re=Joe({state:a,props:e}),ee=St.useCallback(function(Bt){return P.current[Z.getItemId(Bt)]},[Z]);HIe(o,a,[d,p,v,M],r);var ne=ZIe({menuElement:E.current,highlightedIndex:p,isOpen:d,itemRefs:P,scrollIntoView:i,getItemNodeFromIndex:ee});St.useEffect(function(){var Bt=Q4(e,"isOpen");Bt&&U.current&&U.current.focus()},[]),St.useEffect(function(){V||(X.current=t.length)});var q=St.useCallback(function(){re.current.state.isOpen&&c({type:O6})},[c,re]),le=St.useMemo(function(){return[E,z,U]},[]),ue=VIe(r,q,le),ve=$Ie();St.useEffect(function(){d||(P.current={})},[d]),St.useEffect(function(){var Bt;!d||!(r!=null&&r.document)||!(U!=null&&(Bt=U.current)!=null&&Bt.focus)||r.document.activeElement!==U.current&&U.current.focus()},[d,r]);var pe=St.useMemo(function(){return{ArrowDown:function(ot){ot.preventDefault(),c({type:QK,altKey:ot.altKey})},ArrowUp:function(ot){ot.preventDefault(),c({type:qK,altKey:ot.altKey})},Home:function(ot){re.current.state.isOpen&&(ot.preventDefault(),c({type:VK}))},End:function(ot){re.current.state.isOpen&&(ot.preventDefault(),c({type:$K}))},Escape:function(ot){var Et=re.current.state;(Et.isOpen||Et.inputValue||Et.selectedItem||Et.highlightedIndex>-1)&&(ot.preventDefault(),c({type:YK}))},Enter:function(ot){var Et=re.current.state;!Et.isOpen||ot.which===229||(ot.preventDefault(),c({type:XK}))},PageUp:function(ot){re.current.state.isOpen&&(ot.preventDefault(),c({type:HK}))},PageDown:function(ot){re.current.state.isOpen&&(ot.preventDefault(),c({type:ZK}))}}},[c,re]),Be=St.useCallback(function(Bt){return bl({id:Z.labelId,htmlFor:Z.inputId},Bt)},[Z]),Ce=St.useCallback(function(Bt,ot){var Et,Rt=Bt===void 0?{}:Bt,Ue=Rt.onMouseLeave,ke=Rt.refKey,Te=ke===void 0?"ref":ke,He=Rt.ref,Ct=oS(Rt,oTe),vt=ot===void 0?{}:ot;return vt.suppressRefError,bl((Et={},Et[Te]=lS(He,function(wt){E.current=wt}),Et.id=Z.menuId,Et.role="listbox",Et["aria-labelledby"]=Ct&&Ct["aria-label"]?void 0:""+Z.labelId,Et.onMouseLeave=S1(Ue,function(){c({type:tse})}),Et),Ct)},[c,ve,Z]),Oe=St.useCallback(function(Bt){var ot,Et,Rt=Bt===void 0?{}:Bt,Ue=Rt.item,ke=Rt.index,Te=Rt.refKey,He=Te===void 0?"ref":Te,Ct=Rt.ref,vt=Rt.onMouseMove,wt=Rt.onMouseDown,Ft=Rt.onClick;Rt.onPress;var Pt=Rt.disabled,nn=oS(Rt,sTe);Pt!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Kn=re.current,Wn=Kn.props,Mi=Kn.state,Fn=QIe(Ue,ke,Wn.items,"Pass either item or index to getItemProps!"),Ln=Fn[0],In=Fn[1],oi=Wn.isItemDisabled(Ln,In),Tn="onClick",je=Ft,$=function(){ue.isTouchEnd||In===Mi.highlightedIndex||(ne.current=!1,c({type:nse,index:In,disabled:oi}))},j=function(){c({type:tF,index:In})},Q=function(Me){return Me.preventDefault()};return bl((ot={},ot[He]=lS(Ct,function(Ae){Ae&&(P.current[Z.getItemId(In)]=Ae)}),ot["aria-disabled"]=oi,ot["aria-selected"]=In===Mi.highlightedIndex,ot.id=Z.getItemId(In),ot.role="option",ot),!oi&&(Et={},Et[Tn]=S1(je,j),Et),{onMouseMove:S1(vt,$),onMouseDown:S1(wt,Q)},nn)},[c,Z,re,ue,ne]),Fe=St.useCallback(function(Bt){var ot,Et=Bt===void 0?{}:Bt,Rt=Et.onClick;Et.onPress;var Ue=Et.refKey,ke=Ue===void 0?"ref":Ue,Te=Et.ref,He=oS(Et,aTe),Ct=re.current.state,vt=function(){c({type:ise})};return bl((ot={},ot[ke]=lS(Te,function(wt){z.current=wt}),ot["aria-controls"]=Z.menuId,ot["aria-expanded"]=Ct.isOpen,ot.id=Z.toggleButtonId,ot.tabIndex=-1,ot),!He.disabled&&bl({},{onClick:S1(Rt,vt)}),He)},[c,re,Z]),Ee=St.useCallback(function(Bt,ot){var Et,Rt=Bt===void 0?{}:Bt,Ue=Rt.onKeyDown,ke=Rt.onChange,Te=Rt.onInput,He=Rt.onBlur;Rt.onChangeText;var Ct=Rt.onClick,vt=Rt.refKey,wt=vt===void 0?"ref":vt,Ft=Rt.ref,Pt=oS(Rt,lTe),nn=ot===void 0?{}:ot;nn.suppressRefError;var Kn=re.current.state,Wn=function($){var j=UIe($);j&&pe[j]&&pe[j]($)},Mi=function($){c({type:JK,inputValue:$.target.value})},Fn=function($){if(r!=null&&r.document&&Kn.isOpen&&!ue.isMouseDown){var j=$.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:O6,selectItem:!j})}},Ln=function(){c({type:eF})},In="onChange",oi={};if(!Pt.disabled){var Tn;oi=(Tn={},Tn[In]=S1(ke,Te,Mi),Tn.onKeyDown=S1(Ue,Wn),Tn.onBlur=S1(He,Fn),Tn.onClick=S1(Ct,Ln),Tn)}return bl((Et={},Et[wt]=lS(Ft,function(je){U.current=je}),Et["aria-activedescendant"]=Kn.isOpen&&Kn.highlightedIndex>-1?Z.getItemId(Kn.highlightedIndex):"",Et["aria-autocomplete"]="list",Et["aria-controls"]=Z.menuId,Et["aria-expanded"]=Kn.isOpen,Et["aria-labelledby"]=Pt&&Pt["aria-label"]?void 0:Z.labelId,Et.autoComplete="off",Et.id=Z.inputId,Et.role="combobox",Et.value=Kn.inputValue,Et),oi,Pt)},[c,Z,r,pe,re,ue,ve]),Ve=St.useCallback(function(){c({type:rse})},[c]),ut=St.useCallback(function(){c({type:sse})},[c]),mt=St.useCallback(function(){c({type:ose})},[c]),Pe=St.useCallback(function(Bt){c({type:ase,highlightedIndex:Bt})},[c]),De=St.useCallback(function(Bt){c({type:nF,selectedItem:Bt})},[c]),Xe=St.useCallback(function(Bt){c({type:lse,inputValue:Bt})},[c]),Ke=St.useCallback(function(){c({type:use})},[c]);return{getItemProps:Oe,getLabelProps:Be,getMenuProps:Ce,getInputProps:Ee,getToggleButtonProps:Fe,toggleMenu:Ve,openMenu:mt,closeMenu:ut,setHighlightedIndex:Pe,setInputValue:Xe,selectItem:De,reset:Ke,highlightedIndex:p,isOpen:d,selectedItem:v,inputValue:M}}VS.stateReducer,VS.itemToKey,VS.environment,pr.array,pr.array,pr.array,pr.func,pr.number,pr.number,pr.number,pr.func,pr.func,pr.string,pr.string;W4.itemToKey,W4.stateReducer,W4.environment;function pi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pi=function(){return s},s}pi();const Mq=(pi().s[0]++,140);function WM({value:n,options:e=(pi().b[0][0]++,[]),onChange:t=(pi().b[1][0]++,()=>{pi().f[1]++}),"aria-label":i}){pi().f[0]++;const[r,o]=(pi().s[1]++,En.useState((pi().b[2][0]++,n||(pi().b[2][1]++,"")))),s=(pi().s[2]++,En.useRef(null)),[a,c]=(pi().s[3]++,En.useState(Mq)),d=(pi().s[4]++,En.useMemo(()=>{pi().f[2]++;const V=(pi().s[5]++,r.toLowerCase());return pi().s[6]++,e.filter(Z=>(pi().f[3]++,pi().s[7]++,Z[0].toLowerCase().includes(V)))},[e,r])),p=(pi().s[8]++,En.useCallback(()=>{if(pi().f[4]++,pi().s[9]++,s.current){pi().b[3][0]++;const V=(pi().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);pi().s[11]++,c(Math.min(V,Mq))}else pi().b[3][1]++},[])),{isOpen:v,getMenuProps:M,getInputProps:E,getItemProps:P,highlightedIndex:U,openMenu:z}=(pi().s[12]++,MP({items:d,inputValue:r,itemToString:V=>(pi().f[5]++,pi().s[13]++,V?(pi().b[4][0]++,V[0]):(pi().b[4][1]++,"")),stateReducer:(V,Z)=>(pi().f[6]++,pi().s[14]++,Z.type===MP.stateChangeTypes.InputClick?(pi().b[5][0]++,pi().s[15]++,{...Z.changes,isOpen:!0}):(pi().b[5][1]++,pi().s[16]++,Z.changes)),onSelectedItemChange:({selectedItem:V})=>{pi().f[7]++;const Z=(pi().s[17]++,V?(pi().b[6][0]++,V[0]):(pi().b[6][1]++,""));pi().s[18]++,o(Z),pi().s[19]++,t(V?(pi().b[7][0]++,V[0]):(pi().b[7][1]++,void 0))},onInputValueChange:({inputValue:V})=>{pi().f[8]++,pi().s[20]++,typeof V=="string"?(pi().b[8][0]++,pi().s[21]++,o(V),pi().s[22]++,t(V===""?(pi().b[9][0]++,void 0):(pi().b[9][1]++,V)),pi().s[23]++,z()):pi().b[8][1]++}}));return pi().s[24]++,En.useEffect(()=>{pi().f[9]++,pi().s[25]++,v?(pi().b[10][0]++,pi().s[26]++,p()):pi().b[10][1]++},[v,p]),pi().s[27]++,En.useEffect(()=>(pi().f[10]++,pi().s[28]++,window.addEventListener("resize",p),pi().s[29]++,()=>(pi().f[11]++,pi().s[30]++,window.removeEventListener("resize",p))),[p]),pi().s[31]++,En.useEffect(()=>{pi().f[12]++,pi().s[32]++,o((pi().b[11][0]++,n||(pi().b[11][1]++,"")))},[n]),pi().s[33]++,oe.jsxs("div",{className:"maputnik-autocomplete",children:[oe.jsx("input",{...E({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(pi().f[13]++,pi().s[34]++,z())})}),oe.jsx("div",{...M({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(pi().b[12][0]++,v&&(pi().b[12][1]++,d.map((V,Z)=>(pi().f[14]++,pi().s[35]++,oe.jsx("div",{...P({item:V,index:Z,className:Ug("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":U===Z})}),children:V[1]},V[0])))))})]})}function wp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wp=function(){return s},s}wp();wp().s[0]++;const uTe=({onChange:n=(wp().b[0][0]++,()=>{wp().f[1]++}),sourceIds:e=(wp().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(wp().f[0]++,wp().s[1]++,oe.jsx(ds,{label:o("Source"),fieldSpec:Yr.layer.source,error:r,"data-wd-key":t,children:oe.jsx(WM,{value:i,onChange:n,options:e?.map(s=>(wp().f[2]++,wp().s[2]++,[s,s]))})})),Ase=(wp().s[3]++,So()(uTe));function Sp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sp=function(){return s},s}Sp();Sp().s[0]++;const cTe=({onChange:n=(Sp().b[0][0]++,()=>{Sp().f[1]++}),sourceLayerIds:e=(Sp().b[1][0]++,[]),value:t,error:i,t:r})=>(Sp().f[0]++,Sp().s[1]++,oe.jsx(ds,{label:r("Source Layer"),fieldSpec:Xo.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:oe.jsx(WM,{value:t,onChange:n,options:e?.map(o=>(Sp().f[2]++,Sp().s[2]++,[o,o]))})})),hse=(Sp().s[3]++,So()(cTe));function rF(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rF=function(){return s},s}rF();const wP=(rF().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function xn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xn=function(){return s},s}xn();class ATe extends En.Component{addLayer=(xn().s[0]++,()=>{if(xn().f[0]++,xn().s[1]++,this.props.layers.some(i=>(xn().f[1]++,xn().s[2]++,i.id===this.state.id))){xn().b[0][0]++,xn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),xn().s[4]++;return}else xn().b[0][1]++;const e=(xn().s[5]++,this.props.layers.slice(0)),t=(xn().s[6]++,{id:this.state.id,type:this.state.type});xn().s[7]++,this.state.type!=="background"?(xn().b[1][0]++,xn().s[8]++,t.source=this.state.source,xn().s[9]++,xn().b[3][0]++,!wP.includes(this.state.type)&&(xn().b[3][1]++,this.state["source-layer"])?(xn().b[2][0]++,xn().s[10]++,t["source-layer"]=this.state["source-layer"]):xn().b[2][1]++):xn().b[1][1]++,xn().s[11]++,e.push(t),xn().s[12]++,this.setState({error:null},()=>{xn().f[2]++,xn().s[13]++,this.props.onLayersChange(e),xn().s[14]++,this.props.onOpenToggle()})});constructor(e){xn().f[3]++,xn().s[15]++,super(e);const t=(xn().s[16]++,{type:"fill",id:"",error:null});if(xn().s[17]++,Object.keys(e.sources).length>0){xn().b[4][0]++,xn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(xn().s[19]++,xn().b[5][0]++,this.props.sources[t.source].layers||(xn().b[5][1]++,[]));xn().s[20]++,i.length>0?(xn().b[6][0]++,xn().s[21]++,t["source-layer"]=i[0]):xn().b[6][1]++}else xn().b[4][1]++;xn().s[22]++,this.state=t}componentDidUpdate(e,t){xn().f[4]++;const i=(xn().s[23]++,t.type),r=(xn().s[24]++,this.state.type),o=(xn().s[25]++,this.getSources(i)),s=(xn().s[26]++,this.getSources(r));xn().s[27]++,xn().b[8][0]++,i!==r&&(xn().b[8][1]++,t.source!=="")&&(xn().b[8][2]++,o.indexOf(t.source)>-1)&&(xn().b[8][3]++,s.indexOf(this.state.source)<0)?(xn().b[7][0]++,xn().s[28]++,this.setState({source:""})):xn().b[7][1]++}getLayersForSource(e){xn().f[5]++;const t=(xn().s[29]++,xn().b[9][0]++,this.props.sources[e]||(xn().b[9][1]++,{}));return xn().s[30]++,xn().b[10][0]++,t.layers||(xn().b[10][1]++,[])}getSources(e){switch(xn().f[6]++,xn().s[31]++,e){case"background":return xn().b[11][0]++,xn().s[32]++,[];case"hillshade":xn().b[11][1]++;case"color-relief":return xn().b[11][2]++,xn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(xn().f[7]++,xn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(xn().f[8]++,xn().s[35]++,t));case"raster":return xn().b[11][3]++,xn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(xn().f[9]++,xn().s[37]++,i.type==="raster")).map(([t,i])=>(xn().f[10]++,xn().s[38]++,t));case"heatmap":xn().b[11][4]++;case"circle":xn().b[11][5]++;case"fill":xn().b[11][6]++;case"fill-extrusion":xn().b[11][7]++;case"line":xn().b[11][8]++;case"symbol":return xn().b[11][9]++,xn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(xn().f[11]++,xn().s[40]++,xn().b[12][0]++,i.type==="vector"||(xn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(xn().f[12]++,xn().s[41]++,t));default:return xn().b[11][10]++,xn().s[42]++,[]}}render(){xn().f[13]++;const e=(xn().s[43]++,this.props.t),t=(xn().s[44]++,this.getSources(this.state.type)),i=(xn().s[45]++,this.getLayersForSource(this.state.source));let r;return xn().s[46]++,this.state.error?(xn().b[13][0]++,xn().s[47]++,r=oe.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,oe.jsx("a",{href:"#",onClick:()=>(xn().f[14]++,xn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):xn().b[13][1]++,xn().s[49]++,oe.jsxs(ey,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,oe.jsxs("div",{className:"maputnik-add-layer",children:[oe.jsx(Yoe,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{xn().f[15]++,xn().s[50]++,this.setState({id:o,error:null})}}),oe.jsx(qoe,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(xn().f[16]++,xn().s[51]++,this.setState({type:o}))}),(xn().b[14][0]++,this.state.type!=="background"&&(xn().b[14][1]++,oe.jsx(Ase,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(xn().f[17]++,xn().s[52]++,this.setState({source:o}))}))),(xn().b[15][0]++,!wP.includes(this.state.type)&&(xn().b[15][1]++,oe.jsx(hse,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(xn().f[18]++,xn().s[53]++,this.setState({"source-layer":o}))}))),oe.jsx(js,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const hTe=(xn().s[54]++,So()(ATe));function vb(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vb=function(){return s},s}vb();let wq=(vb().s[0]++,0);function Lx(n=(vb().b[0][0]++,"")){return vb().f[0]++,vb().s[1]++,wq++,vb().s[2]++,n+wq}function cr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cr=function(){return s},s}cr();function dTe(n,e){cr().f[0]++;const t=(cr().s[0]++,{...n.paint});cr().s[1]++,Object.keys(t).forEach(r=>{cr().f[1]++,cr().s[2]++,r in Xo["paint_"+e]?cr().b[0][1]++:(cr().b[0][0]++,cr().s[3]++,delete t[r])});const i=(cr().s[4]++,{...n.layout});return cr().s[5]++,Object.keys(i).forEach(r=>{cr().f[2]++,cr().s[6]++,r in Xo["layout_"+e]?cr().b[1][1]++:(cr().b[1][0]++,cr().s[7]++,delete i[r])}),cr().s[8]++,{...n,paint:t,layout:i,type:e}}function fTe(n,e,t,i){if(cr().f[3]++,cr().s[9]++,i===void 0)if(cr().b[2][0]++,cr().s[10]++,e){cr().b[3][0]++;const r=(cr().s[11]++,{...n,[e]:{...n[e]}});return cr().s[12]++,delete r[e][t],cr().s[13]++,Object.keys(r[e]).length<1?(cr().b[4][0]++,cr().s[14]++,delete r[e]):cr().b[4][1]++,cr().s[15]++,r}else{cr().b[3][1]++;const r=(cr().s[16]++,{...n});return cr().s[17]++,delete r[t],cr().s[18]++,r}else return cr().b[2][1]++,cr().s[19]++,e?(cr().b[5][0]++,cr().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(cr().b[5][1]++,cr().s[21]++,{...n,[t]:i})}function z2(n){return cr().f[4]++,cr().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function mTe(n,e){cr().f[5]++;const t=(cr().s[23]++,z2(n[e].id));let i=(cr().s[24]++,e);cr().s[25]++;for(let r=(cr().s[26]++,e);r>0;r--){const o=(cr().s[27]++,z2(n[r-1].id));if(cr().s[28]++,o===t)cr().b[6][0]++,cr().s[29]++,i=r-1;else return cr().b[6][1]++,cr().s[30]++,i}return cr().s[31]++,i}function Nt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="3031fd34f43c8d651f443f714d2dfaaa5f809423",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAA6B,eAAY,qBACzD;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3031fd34f43c8d651f443f714d2dfaaa5f809423"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Nt=function(){return s},s}Nt();class pTe extends En.Component{static defaultProps=(Nt().s[0]++,{onLayerSelect:()=>{Nt().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){Nt().f[1]++,Nt().s[1]++,super(e),Nt().s[2]++,this.selectedItemRef=En.createRef(),Nt().s[3]++,this.scrollContainerRef=En.createRef(),Nt().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Lx()},isOpen:{add:!1}}}toggleModal(e){Nt().f[2]++,Nt().s[5]++,this.setState({keys:{...this.state.keys,[e]:+Lx()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(Nt().s[6]++,()=>{Nt().f[3]++;let e=(Nt().s[7]++,0);const t=(Nt().s[8]++,{});Nt().s[9]++,this.groupedLayers().forEach(i=>{Nt().f[4]++;const r=(Nt().s[10]++,z2(i[0].id)),o=(Nt().s[11]++,[r,e].join("-"));Nt().s[12]++,i.length>1?(Nt().b[0][0]++,Nt().s[13]++,t[o]=this.state.areAllGroupsExpanded):Nt().b[0][1]++,Nt().s[14]++,i.forEach(s=>{Nt().f[5]++,Nt().s[15]++,e+=1})}),Nt().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){Nt().f[6]++;const e=(Nt().s[17]++,[]),t=(Nt().s[18]++,new Map);Nt().s[19]++;for(let i=(Nt().s[20]++,0);i<this.props.layers.length;i++){const r=(Nt().s[21]++,this.props.layers[i]),o=(Nt().s[22]++,this.props.layers[i-1]);Nt().s[23]++,t.set(r.id,t.has(r.id)?(Nt().b[1][0]++,t.get(r.id)+1):(Nt().b[1][1]++,0));const s=(Nt().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(Nt().s[25]++,Nt().b[3][0]++,o&&(Nt().b[3][1]++,z2(o.id)==z2(s.id))){Nt().b[2][0]++;const a=(Nt().s[26]++,e[e.length-1]);Nt().s[27]++,a.push(s)}else Nt().b[2][1]++,Nt().s[28]++,e.push([s])}return Nt().s[29]++,e}toggleLayerGroup(e,t){Nt().f[7]++;const i=(Nt().s[30]++,[e,t].join("-")),r=(Nt().s[31]++,{...this.state.collapsedGroups});Nt().s[32]++,i in this.state.collapsedGroups?(Nt().b[4][0]++,Nt().s[33]++,r[i]=!this.state.collapsedGroups[i]):(Nt().b[4][1]++,Nt().s[34]++,r[i]=!1),Nt().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){Nt().f[8]++;const i=(Nt().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return Nt().s[37]++,i===void 0?(Nt().b[5][0]++,!0):(Nt().b[5][1]++,i)}shouldComponentUpdate(e,t){if(Nt().f[9]++,Nt().s[38]++,this.state!==t)return Nt().b[6][0]++,Nt().s[39]++,!0;Nt().b[6][1]++;function i(c){Nt().f[10]++;const d=(Nt().s[40]++,{id:c.id});return Nt().s[41]++,c.layout?(Nt().b[7][0]++,Nt().s[42]++,d.layout={visibility:c.layout.visibility}):Nt().b[7][1]++,Nt().s[43]++,d}const r=(Nt().s[44]++,Y9.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){Nt().f[11]++;const d=(Nt().s[45]++,{...c});return Nt().s[46]++,delete d.layers,Nt().s[47]++,d}const s=(Nt().s[48]++,Y9.isEqual(o(this.props),o(e))),a=(Nt().s[49]++,Nt().b[8][0]++,!(r&&(Nt().b[8][1]++,s)));return Nt().s[50]++,a}componentDidUpdate(e){if(Nt().f[12]++,Nt().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){Nt().b[9][0]++;const t=(Nt().s[52]++,this.selectedItemRef.current);if(Nt().s[53]++,Nt().b[11][0]++,t&&(Nt().b[11][1]++,t.node)){Nt().b[10][0]++;const i=(Nt().s[54]++,t.node),r=(Nt().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(Nt().s[56]++,new IntersectionObserver(s=>{Nt().f[13]++,Nt().s[57]++,o.unobserve(i),Nt().s[58]++,Nt().b[13][0]++,s.length>0&&(Nt().b[13][1]++,s[0].intersectionRatio<1)?(Nt().b[12][0]++,Nt().s[59]++,i.scrollIntoView()):Nt().b[12][1]++},r));Nt().s[60]++,o.observe(i)}else Nt().b[10][1]++}else Nt().b[9][1]++}render(){Nt().f[14]++;const e=(Nt().s[61]++,[]);let t=(Nt().s[62]++,0);const i=(Nt().s[63]++,this.groupedLayers());Nt().s[64]++,i.forEach(o=>{Nt().f[15]++;const s=(Nt().s[65]++,z2(o[0].id));if(Nt().s[66]++,o.length>1){Nt().b[14][0]++;const a=(Nt().s[67]++,oe.jsx(y6e,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(Nt().f[16]++,Nt().s[68]++,c.key)).join(" "),title:s,isActive:(Nt().b[15][0]++,!this.isCollapsed(s,t)||(Nt().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));Nt().s[69]++,e.push(a)}else Nt().b[14][1]++;Nt().s[70]++,o.forEach((a,c)=>{Nt().f[17]++;const d=(Nt().s[71]++,mTe(this.props.layers,t)),p=(Nt().s[72]++,this.props.errors.find(E=>(Nt().f[18]++,Nt().s[73]++,Nt().b[16][0]++,E.parsed&&(Nt().b[16][1]++,E.parsed.type==="layer")&&(Nt().b[16][2]++,E.parsed.data.index==t)))),v=(Nt().s[74]++,{});Nt().s[75]++,t===this.props.selectedLayerIndex?(Nt().b[17][0]++,Nt().s[76]++,v.ref=this.selectedItemRef):Nt().b[17][1]++;const M=(Nt().s[77]++,oe.jsx(C6e,{className:Ug({"maputnik-layer-list-item-collapsed":(Nt().b[18][0]++,o.length>1&&(Nt().b[18][1]++,this.isCollapsed(s,d))&&(Nt().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(Nt().b[19][0]++,c==o.length-1&&(Nt().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!p}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(Nt().b[20][0]++,a.layout||(Nt().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...v},a.key));Nt().s[78]++,e.push(M),Nt().s[79]++,t+=1})});const r=(Nt().s[80]++,this.props.t);return Nt().s[81]++,oe.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[oe.jsx(hTe,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),oe.jsxs("header",{className:"maputnik-layer-list-header","data-wd-key":"layer-list.header",children:[oe.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx("div",{className:"maputnik-default-property",children:oe.jsx("div",{className:"maputnik-multibutton",children:oe.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(Nt().b[21][0]++,r("Collapse")):(Nt().b[21][1]++,r("Expand"))})})}),oe.jsx("div",{className:"maputnik-default-property",children:oe.jsx("div",{className:"maputnik-multibutton",children:oe.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),oe.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:oe.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const gTe=(Nt().s[82]++,So()(pTe));Nt().s[83]++;const yTe=n=>{Nt().f[19]++;const e=(Nt().s[84]++,QSe(WSe(EK,{activationConstraint:{distance:5}})));Nt().s[85]++;const t=r=>{Nt().f[20]++;const{active:o,over:s}=(Nt().s[86]++,r);if(Nt().s[87]++,s)Nt().b[22][1]++;else{Nt().b[22][0]++,Nt().s[88]++;return}const a=(Nt().s[89]++,n.layers.findIndex(d=>(Nt().f[21]++,Nt().s[90]++,d.id===o.id))),c=(Nt().s[91]++,n.layers.findIndex(d=>(Nt().f[22]++,Nt().s[92]++,d.id===s.id)));Nt().s[93]++,Nt().b[24][0]++,a!==-1&&(Nt().b[24][1]++,c!==-1)&&(Nt().b[24][2]++,a!==c)?(Nt().b[23][0]++,Nt().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):Nt().b[23][1]++},i=(Nt().s[95]++,n.layers.map(r=>(Nt().f[23]++,Nt().s[96]++,r.id)));return Nt().s[97]++,oe.jsx($Ee,{sensors:e,collisionDetection:HSe,onDragEnd:t,children:oe.jsx(l6e,{items:i,strategy:s6e,children:oe.jsx(gTe,{...n})})})};var aI,Sq;function dse(){if(Sq)return aI;Sq=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return aI={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},aI}var lI,Eq;function vTe(){if(Eq)return lI;Eq=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),d={node:s,text:c};return o!=null?this._members.splice(o,0,d):this._members.push(d),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return lI=function(o){return new n(o)},lI}var uI,Bq;function CTe(){if(Bq)return uI;Bq=1;var n=vTe(),e=dse(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var d=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),d&&d.id&&d.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var d=this;this.moveFocusTimer=setTimeout(function(){d.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,d){c=c||{},d=d||{},this.isOpen?this.closeMenu(c):this.openMenu(d)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var d=c.ownerDocument.activeElement;if(!(c&&d===c)){var p=a.menu.ref.current;if(p===d){a.focusItem(0);return}p&&p.contains(d)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return uI=function(a){var c=Object.create(i);return c.init(a),c},uI}var cI,Oq;function aO(){if(Oq)return cI;Oq=1;var n=wa(),e=n.createContext();return cI=e,cI}var AI,Iq;function lO(){if(Iq)return AI;Iq=1;var n=J1();return AI={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},AI}var hI,Tq;function uO(){return Tq||(Tq=1,hI=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),hI}var dI,kq;function bTe(){if(kq)return dI;kq=1;function n(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}function e(E,P){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:E}function t(E,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);E.prototype=Object.create(P&&P.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(E,P):E.__proto__=P)}var i=wa(),r=J1(),o=CTe(),s=aO(),a=lO(),c=a.refType,d=uO(),p={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},v=function(P){return{onMenuToggle:P.onMenuToggle,onSelection:P.onSelection,closeOnSelection:P.closeOnSelection,closeOnBlur:P.closeOnBlur,id:P.id}},M=(function(E){t(P,E);function P(U){n(this,P);var z=e(this,E.call(this,U));return z.manager=o(v(U)),z}return P.prototype.componentDidUpdate=function(){this.manager.updateOptions(v(this.props))},P.prototype.render=function(){var z={};return d(z,this.props,p),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,z,this.props.children))},P})(i.Component);return M.propTypes=p,M.defaultProps={tag:"div"},dI=i.forwardRef(function(E,P){var U={forwardedRef:P};return d(U,E,{children:p.children,forwardedRef:p.forwardedRef}),d(U,{forwardedRef:P}),i.createElement(M,U,E.children)}),dI}var fI,Dq;function _Te(){if(Dq)return fI;Dq=1;function n(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")}function e(M,E){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:M}function t(M,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);M.prototype=Object.create(E&&E.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(M,E):M.__proto__=E)}var i=wa(),r=J1(),o=aO(),s=lO(),a=s.refType,c=uO(),d={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},p=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},v=(function(M){t(E,M);function E(){var P,U,z;n(this,E);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=e(this,M.call.apply(M,[this].concat(Z))),U),U.ref=i.createRef(),U.handleKeyDown=function(re){if(!U.props.disabled){var ee=U.props.ambManager;switch(re.key){case"ArrowDown":re.preventDefault(),ee.isOpen?ee.focusItem(0):ee.openMenu();break;case"Enter":case" ":re.preventDefault(),ee.toggleMenu();break;case"Escape":ee.handleMenuKey(re);break;default:ee.handleButtonNonArrowKey(re)}}},U.handleClick=function(){U.props.disabled||U.props.ambManager.toggleMenu({},{focusMenu:!1})},U.setRef=function(re){U.ref.current=re,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(re):U.props.forwardedRef&&(U.props.forwardedRef.current=re)},P),e(U,z)}return E.prototype.componentDidMount=function(){this.props.ambManager.button=this},E.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},E.prototype.render=function(){var U=this.props,z=this.props.ambManager,V={role:"button",tabIndex:U.disabled?"":"0","aria-haspopup":!0,"aria-expanded":z.isOpen,"aria-disabled":U.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},Z={};return c(Z,d),p().indexOf(U.tag)>=0&&delete Z.disabled,z.options.closeOnBlur&&(V.onBlur=z.handleBlur),c(V,U,Z),c(V,{ref:this.setRef}),i.createElement(U.tag,V,U.children)},E})(i.Component);return v.propTypes=d,v.defaultProps={tag:"span"},fI=i.forwardRef(function(M,E){return i.createElement(o.Consumer,null,function(P){var U={ambManager:P,forwardedRef:E};return c(U,M,{ambManager:d.ambManager,children:d.children,forwardedRef:d.forwardedRef}),i.createElement(v,U,M.children)})}),fI}var mI,Rq;function xTe(){return Rq||(Rq=1,mI=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",d,i),e.addEventListener("touchstart",p,i);function d(z){c||t(z)}function p(z){c=!0,!s&&(s=!0,e.addEventListener("touchmove",v,i),e.addEventListener("touchend",M,i),e.addEventListener("touchcancel",E,i),a=!1,r=z.touches[0].clientX,o=z.touches[0].clientY)}function v(z){a||Math.abs(z.touches[0].clientX-r)<=10&&Math.abs(z.touches[0].clientY-o)<=10||(a=!0)}function M(z){s=!1,P(),a||t(z)}function E(){s=!1,a=!1,r=0,o=0}function P(){e.removeEventListener("touchmove",v,i),e.removeEventListener("touchend",M,i),e.removeEventListener("touchcancel",E,i)}function U(){e.removeEventListener("click",d,i),e.removeEventListener("touchstart",p,i),P()}return{remove:U}}),mI}var pI,Pq;function MTe(){if(Pq)return pI;Pq=1;function n(M,E){if(!(M instanceof E))throw new TypeError("Cannot call a class as a function")}function e(M,E){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:M}function t(M,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);M.prototype=Object.create(E&&E.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(M,E):M.__proto__=E)}var i=wa(),r=J1(),o=xTe(),s=aO(),a=lO(),c=a.refType,d=uO(),p={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},v=(function(M){t(E,M);function E(){var P,U,z;n(this,E);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=e(this,M.call.apply(M,[this].concat(Z))),U),U.ref=i.createRef(),U.addTapListener=function(){var re=U.ref.current;if(re){var ee=re.ownerDocument;ee&&(U.tapListener=o(ee.documentElement,U.handleTap))}},U.handleTap=function(re){U.ref.current.contains(re.target)||U.props.ambManager.button.ref.current.contains(re.target)||U.props.ambManager.closeMenu()},U.setRef=function(re){U.ref.current=re,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(re):U.props.forwardedRef&&(U.props.forwardedRef.current=re)},P),e(U,z)}return E.prototype.componentDidMount=function(){this.props.ambManager.menu=this},E.prototype.componentDidUpdate=function(){var U=this.props.ambManager;U.options.closeOnBlur&&(U.isOpen&&!this.tapListener?this.addTapListener():!U.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),U.isOpen||U.clearItems())},E.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},E.prototype.render=function(){var U=this.props,z=this.props.ambManager,V=(function(){return typeof U.children=="function"?U.children({isOpen:z.isOpen}):z.isOpen?U.children:!1})();if(!V)return!1;var Z={onKeyDown:z.handleMenuKey,role:"menu",tabIndex:-1};return z.options.closeOnBlur&&(Z.onBlur=z.handleBlur),d(Z,U,p),d(Z,{ref:this.setRef}),i.createElement(U.tag,Z,V)},E})(i.Component);return v.propTypes=p,v.defaultProps={tag:"div"},pI=i.forwardRef(function(M,E){return i.createElement(s.Consumer,null,function(P){var U={ambManager:P,forwardedRef:E};return d(U,M,{ambManager:p.ambManager,children:p.children,forwardedRef:p.forwardedRef}),i.createElement(v,U,M.children)})}),pI}var gI,Uq;function wTe(){if(Uq)return gI;Uq=1;function n(v,M){if(!(v instanceof M))throw new TypeError("Cannot call a class as a function")}function e(v,M){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:v}function t(v,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);v.prototype=Object.create(M&&M.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(v,M):v.__proto__=M)}var i=wa(),r=J1(),o=aO(),s=lO(),a=s.refType,c=uO(),d={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},p=(function(v){t(M,v);function M(){var E,P,U;n(this,M);for(var z=arguments.length,V=Array(z),Z=0;Z<z;Z++)V[Z]=arguments[Z];return U=(E=(P=e(this,v.call.apply(v,[this].concat(V))),P),P.ref=i.createRef(),P.handleKeyDown=function(X){X.key!=="Enter"&&X.key!==" "||P.props.tag==="a"&&P.props.href||(X.preventDefault(),P.selectItem(X))},P.selectItem=function(X){var re=typeof P.props.value<"u"?P.props.value:P.props.children;P.props.ambManager.handleSelection(re,X)},P.setRef=function(X){P.ref.current=X,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(X):P.props.forwardedRef&&(P.props.forwardedRef.current=X)},E),e(P,U)}return M.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},M.prototype.render=function(){var P={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(P,this.props,d),i.createElement(this.props.tag,P,this.props.children)},M})(i.Component);return p.propTypes=d,p.defaultProps={tag:"div"},gI=i.forwardRef(function(v,M){return i.createElement(o.Consumer,null,function(E){var P={ambManager:E,forwardedRef:M};return c(P,v,{ambManager:d.ambManager,children:d.children,forwardedRef:d.forwardedRef}),i.createElement(p,P,v.children)})}),gI}var yI,Lq;function STe(){if(Lq)return yI;Lq=1;var n=dse();return yI={Wrapper:bTe(),Button:_Te(),Menu:MTe(),MenuItem:wTe(),openMenu:n.openMenu,closeMenu:n.closeMenu},yI}var cS=STe();function Kq(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function SP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(t),!0).forEach(function(i){Ha(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kq(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function cO(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Fq(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function AO(n,e,t){return e&&Fq(n.prototype,e),t&&Fq(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ha(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dg(){return Dg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Dg.apply(this,arguments)}function oF(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&EP(n,e)}function I6(n){return I6=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I6(n)}function EP(n,e){return EP=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},EP(n,e)}function ETe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function BTe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function hO(n,e){if(n==null)return{};var t=BTe(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Ep(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function OTe(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ep(n)}function sF(n){var e=ETe();return function(){var i=I6(n),r;if(e){var o=I6(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return OTe(this,r)}}function ITe(n,e){return DTe(n)||PTe(n,e)||fse(n,e)||LTe()}function TTe(n){return kTe(n)||RTe(n)||fse(n)||UTe()}function kTe(n){if(Array.isArray(n))return BP(n)}function DTe(n){if(Array.isArray(n))return n}function RTe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function PTe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function fse(n,e){if(n){if(typeof n=="string")return BP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return BP(n,e)}}function BP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function UTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var KTe=AO(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;cO(this,n),Ha(this,"expanded",void 0),Ha(this,"allowMultipleExpanded",void 0),Ha(this,"allowZeroExpanded",void 0),Ha(this,"toggleExpanded",function(d){if(t.isItemDisabled(d))return t;var p=t.isItemExpanded(d);return p?t.augment({expanded:t.expanded.filter(function(v){return v!==d})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(TTe(t.expanded),[d]):[d]})}),Ha(this,"isItemDisabled",function(d){var p=t.isItemExpanded(d),v=t.expanded.length===1;return!!(p&&!t.allowZeroExpanded&&v)}),Ha(this,"isItemExpanded",function(d){return t.expanded.indexOf(d)!==-1}),Ha(this,"getPanelAttributes",function(d,p){var v=p??t.isItemExpanded(d);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!v:void 0,"aria-labelledby":t.getButtonId(d),id:t.getPanelId(d),hidden:v?void 0:!0}}),Ha(this,"getHeadingAttributes",function(){return{role:"heading"}}),Ha(this,"getButtonAttributes",function(d,p){var v=p??t.isItemExpanded(d),M=t.isItemDisabled(d);return{id:t.getButtonId(d),"aria-disabled":M,"aria-expanded":v,"aria-controls":t.getPanelId(d),role:"button",tabIndex:0}}),Ha(this,"getPanelId",function(d){return"accordion__panel-".concat(d)}),Ha(this,"getButtonId",function(d){return"accordion__heading-".concat(d)}),Ha(this,"augment",function(d){return new n(SP({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},d))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),mse=St.createContext(null),pse=(function(n){oF(t,n);var e=sF(t);function t(){var i;cO(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Ha(Ep(i),"state",new KTe({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),Ha(Ep(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),Ha(Ep(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),Ha(Ep(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),Ha(Ep(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),Ha(Ep(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),Ha(Ep(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return AO(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return St.createElement(mse.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(St.PureComponent);Ha(pse,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var gse=(function(n){oF(t,n);var e=sF(t);function t(){var i;cO(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Ha(Ep(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return AO(t,[{key:"render",value:function(){return St.createElement(mse.Consumer,null,this.renderChildren)}}]),t})(St.PureComponent),FTe=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],zTe=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=hO(e,FTe);return St.createElement(pse,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},St.createElement("div",Dg({"data-accordion-component":"Accordion",className:i},c)))},OP;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(OP||(OP={}));var yse=OP,vI=0;function jTe(){var n=vI;return vI=vI+1,"raa-".concat(n)}var NTe=St.useId||jTe,GTe=/[\u0009\u000a\u000c\u000d\u0020]/g;function W5(n){return n===""||GTe.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var vse=St.createContext(null),WTe=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(d){var p=o??d.isItemExpanded(i),v=d.isItemDisabled(i),M=d.getPanelAttributes(i,o),E=d.getHeadingAttributes(i),P=d.getButtonAttributes(i,o);return St.createElement(vse.Provider,{value:{uuid:i,expanded:p,disabled:v,toggleExpanded:s,panelAttributes:M,headingAttributes:E,buttonAttributes:P}},t)};return St.createElement(gse,null,a)},QTe=function(e){return St.createElement(gse,null,function(t){return St.createElement(WTe,Dg({},e,{accordionContext:t}))})},dO=function(e){var t=e.children,i=function(o){return o?t(o):null};return St.createElement(vse.Consumer,null,i)},qTe=["uuid","dangerouslySetExpanded","className","activeClassName"],Cse=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=hO(e,qTe),c=St.useState(NTe()),d=ITe(c,1),p=d[0],v=t??p,M=function(P){var U=P.expanded,z=U&&s?s:o;return St.createElement("div",Dg({"data-accordion-component":"AccordionItem",className:z},a))};return W5(v.toString()),a.id&&W5(a.id),St.createElement(QTe,{uuid:v,dangerouslySetExpanded:i},St.createElement(dO,null,M))};Cse.displayName=yse.AccordionItem;function bse(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:bse(n.parentElement))}function fO(n){var e=bse(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function YTe(n){var e=fO(n)||[],t=e[0];t&&t.focus()}function VTe(n){var e=fO(n)||[],t=e[e.length-1];t&&t.focus()}function $Te(n){var e=fO(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function HTe(n){var e=fO(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var E1={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},ZTe=["toggleExpanded","className"],XTe=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=hO(e,ZTe),s=function(c){var d=c.key;if((d===E1.ENTER||d===E1.SPACE||d===E1.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(d){case E1.HOME:{c.preventDefault(),YTe(c.target);break}case E1.END:{c.preventDefault(),VTe(c.target);break}case E1.LEFT:case E1.UP:{c.preventDefault(),HTe(c.target);break}case E1.RIGHT:case E1.DOWN:{c.preventDefault(),$Te(c.target);break}}};return o.id&&W5(o.id),St.createElement("div",Dg({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},JTe=function(e){return St.createElement(dO,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return St.createElement(XTe,Dg({toggleExpanded:i},e,r))})},eke={className:"accordion__heading","aria-level":3},tke=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,_se=(function(n){oF(t,n);var e=sF(t);function t(){var i;cO(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Ha(Ep(i),"ref",void 0),Ha(Ep(i),"setRef",function(a){i.ref=a}),i}return AO(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return St.createElement("div",Dg({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(tke)}}]),t})(St.PureComponent);Ha(_se,"defaultProps",eke);var xse=function(e){return St.createElement(dO,null,function(t){var i=t.headingAttributes;return e.id&&W5(e.id),St.createElement(_se,Dg({},e,i))})};xse.displayName=yse.AccordionItemHeading;var nke=["className","region","id"],ike=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=hO(e,nke),a=function(d){var p=d.panelAttributes;o&&W5(o);var v=SP(SP({},p),{},{"aria-labelledby":r?p["aria-labelledby"]:void 0});return St.createElement("div",Dg({"data-accordion-component":"AccordionItemPanel",className:i},s,v,{role:r?"region":void 0}))};return St.createElement(dO,null,a)};function Q5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Q5=function(){return s},s}Q5();Q5().s[0]++;const mO=n=>(Q5().f[0]++,Q5().s[1]++,oe.jsx(Pre,{...n}));function q5(n){return Co({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function pO(n){return Co({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function kb(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kb=function(){return s},s}kb();const aF=(kb().s[0]++,["all","any","none"]);kb().s[1]++;const rke=(kb().s[2]++,Object.keys(Yr.filter_operator.values).filter(n=>(kb().f[0]++,kb().s[3]++,aF.indexOf(n)<0)));function Ji(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ji=function(){return s},s}Ji();function oke(n){return Ji().f[0]++,Ji().s[0]++,n===""?(Ji().b[0][0]++,Ji().s[1]++,n):(Ji().b[0][1]++,Ji().s[2]++,isNaN(n)?(Ji().b[1][0]++,Ji().s[3]++,n):(Ji().b[1][1]++,Ji().s[4]++,parseFloat(n)))}function ske(n){Ji().f[1]++;const e=(Ji().s[5]++,typeof n=="string");if(Ji().s[6]++,e)Ji().b[2][1]++;else return Ji().b[2][0]++,Ji().s[7]++,n;return Ji().s[8]++,n.match(/^\s*true\s*$/)?(Ji().b[3][0]++,Ji().s[9]++,!0):(Ji().b[3][1]++,Ji().s[10]++,n.match(/^\s*false\s*$/)?(Ji().b[4][0]++,Ji().s[11]++,!1):(Ji().b[4][1]++,Ji().s[12]++,n))}function ake(n){return Ji().f[2]++,Ji().s[13]++,n=oke(n),Ji().s[14]++,n=ske(n),Ji().s[15]++,n}class lke extends En.Component{static defaultProps=(Ji().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){Ji().f[3]++;let r=(Ji().s[17]++,[e,t,...i.map(ake)]);Ji().s[18]++,Ji().b[6][0]++,e==="has"||(Ji().b[6][1]++,e==="!has")?(Ji().b[5][0]++,Ji().s[19]++,r=[e,t]):(Ji().b[5][1]++,Ji().s[20]++,i.length===0?(Ji().b[7][0]++,Ji().s[21]++,r=[e,t,""]):Ji().b[7][1]++),Ji().s[22]++,this.props.onChange(r)}render(){Ji().f[4]++;const e=(Ji().s[23]++,this.props.filter),t=(Ji().s[24]++,e[0]),i=(Ji().s[25]++,e[1]),r=(Ji().s[26]++,e.slice(2));return Ji().s[27]++,oe.jsxs("div",{className:"maputnik-filter-editor-single",children:[oe.jsx("div",{className:"maputnik-filter-editor-property",children:oe.jsx(WM,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>(Ji().f[5]++,Ji().s[28]++,[o,o])),onChange:o=>(Ji().f[6]++,Ji().s[29]++,this.onFilterPartChanged(t,o,r))})}),oe.jsx("div",{className:"maputnik-filter-editor-operator",children:oe.jsx(o_,{"aria-label":"function",value:t,onChange:o=>(Ji().f[7]++,Ji().s[30]++,this.onFilterPartChanged(o,i,r)),options:rke})}),(Ji().b[8][0]++,r.length>0&&(Ji().b[8][1]++,oe.jsx("div",{className:"maputnik-filter-editor-args",children:oe.jsx(Wp,{"aria-label":"value",value:r.join(","),onChange:o=>(Ji().f[8]++,Ji().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function ux(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ux=function(){return s},s}ux();class uke extends En.Component{render(){ux().f[0]++;const e=(ux().s[0]++,this.props.t);return ux().s[1]++,oe.jsxs("div",{className:"maputnik-filter-editor-block",children:[oe.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),oe.jsx("div",{className:"maputnik-filter-editor-block-action",children:oe.jsx(js,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:oe.jsx(Hb,{})})})]})}}const cke=(ux().s[2]++,So()(uke));var CI,zq;function Ake(){if(zq)return CI;zq=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",d="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",M="\\u200d",E=c+"?",P="["+r+"]?",U="(?:"+M+"(?:"+[d,p,v].join("|")+")"+P+E+")*",z=P+E+U,V="(?:"+[d+s+"?",s,p,v,o].join("|")+")",Z=RegExp(a+"(?="+a+")|"+V+z,"g"),X=RegExp("["+M+e+t+i+r+"]"),re=typeof window=="object"&&window&&window.Object===Object&&window,ee=typeof self=="object"&&self&&self.Object===Object&&self,ne=re||ee||Function("return this")();function q(ot){return ot.split("")}function le(ot){return X.test(ot)}function ue(ot){return le(ot)?ve(ot):q(ot)}function ve(ot){return ot.match(Z)||[]}var pe=Object.prototype,Be=pe.toString,Ce=ne.Symbol,Oe=Ce?Ce.prototype:void 0,Fe=Oe?Oe.toString:void 0;function Ee(ot,Et,Rt){var Ue=-1,ke=ot.length;Et<0&&(Et=-Et>ke?0:ke+Et),Rt=Rt>ke?ke:Rt,Rt<0&&(Rt+=ke),ke=Et>Rt?0:Rt-Et>>>0,Et>>>=0;for(var Te=Array(ke);++Ue<ke;)Te[Ue]=ot[Ue+Et];return Te}function Ve(ot){if(typeof ot=="string")return ot;if(De(ot))return Fe?Fe.call(ot):"";var Et=ot+"";return Et=="0"&&1/ot==-1/0?"-0":Et}function ut(ot,Et,Rt){var Ue=ot.length;return Rt=Rt===void 0?Ue:Rt,!Et&&Rt>=Ue?ot:Ee(ot,Et,Rt)}function mt(ot){return function(Et){Et=Xe(Et);var Rt=le(Et)?ue(Et):void 0,Ue=Rt?Rt[0]:Et.charAt(0),ke=Rt?ut(Rt,1).join(""):Et.slice(1);return Ue[ot]()+ke}}function Pe(ot){return!!ot&&typeof ot=="object"}function De(ot){return typeof ot=="symbol"||Pe(ot)&&Be.call(ot)==n}function Xe(ot){return ot==null?"":Ve(ot)}function Ke(ot){return Bt(Xe(ot).toLowerCase())}var Bt=mt("toUpperCase");return CI=Ke,CI}var hke=Ake();const lF=xu(hke);function ng(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ng=function(){return s},s}ng();function gO(n){ng().f[0]++;let e;const t=(ng().s[0]++,n.split("-"));return ng().s[1]++,t.length>1?(ng().b[0][0]++,ng().s[2]++,e=n.split("-").slice(1).join(" ")):(ng().b[0][1]++,ng().s[3]++,e=n),ng().s[4]++,lF(e)}function La(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="421a194a894795caa98e9aaeb6be503f0178c030",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:75,column:6}},11:{start:{line:78,column:27},end:{line:78,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:76,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"421a194a894795caa98e9aaeb6be503f0178c030"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return La=function(){return s},s}La();class dke extends En.Component{static defaultProps=(La().s[0]++,{errors:{},onFocus:()=>{La().f[0]++},onBlur:()=>{La().f[1]++}});constructor(e){La().f[2]++,La().s[1]++,super(e),La().s[2]++,this.state={jsonError:!1}}render(){La().f[3]++;const{t:e,value:t,canUndo:i}=(La().s[3]++,this.props),r=(La().s[4]++,i?(La().b[0][0]++,!i()):(La().b[0][1]++,!0)),o=(La().s[5]++,oe.jsxs(oe.Fragment,{children:[(La().b[1][0]++,this.props.onUndo&&(La().b[1][1]++,oe.jsx(js,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:oe.jsx(Xfe,{})},"undo_action"))),oe.jsx(js,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:oe.jsx(Hb,{})},"delete_action")]}));let s=(La().s[6]++,void 0);if(La().s[7]++,this.props.errors){La().b[2][0]++;const a=(La().s[8]++,this.props.fieldType?(La().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(La().b[3][1]++,this.props.fieldName));La().s[9]++,s=this.props.errors[a]}else La().b[2][1]++;return La().s[10]++,oe.jsx(ds,{fieldSpec:this.props.fieldSpec,label:e(gO(this.props.fieldName)),action:o,wideMode:!0,error:s,children:oe.jsx(mO,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,onChange:this.props.onChange})})}}const Mse=(La().s[11]++,So()(dke));function pn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pn=function(){return s},s}pn();function sv(n){pn().f[0]++;const e=(pn().s[0]++,pn().b[0][0]++,n.filter||(pn().b[0][1]++,["all"]));if(pn().s[1]++,Array.isArray(e))pn().b[1][1]++;else return pn().b[1][0]++,pn().s[2]++,e;let t=(pn().s[3]++,e[0]),i=(pn().s[4]++,e.slice(1));return pn().s[5]++,aF.indexOf(t)<0?(pn().b[2][0]++,pn().s[6]++,t="all",pn().s[7]++,i=[e.slice(0)]):pn().b[2][1]++,pn().s[8]++,[t,...i]}function fke(n){return pn().f[1]++,pn().s[9]++,Cde(mke(n)).layers[0].filter}function mke(n){return pn().f[2]++,pn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const pke=(pn().s[11]++,["all","any","none"]);function jq(n){if(pn().f[3]++,pn().s[12]++,pn().b[4][0]++,n.length===1&&(pn().b[4][1]++,pke.includes(n[0])))return pn().b[3][0]++,pn().s[13]++,!0;pn().b[3][1]++;const e=(pn().s[14]++,x4(n));return pn().s[15]++,!oM.isEqual(e,n)}function Nq(n){return pn().f[4]++,pn().s[16]++,aF.indexOf(n[0])>=0}function gke(n){return pn().f[5]++,pn().s[17]++,Nq(n)?(pn().b[5][0]++,pn().s[18]++,n.slice(1).map(e=>(pn().f[6]++,pn().s[19]++,Nq(e))).filter(e=>(pn().f[7]++,pn().s[20]++,e==!0)).length>0):(pn().b[5][1]++,pn().s[21]++,!1)}class yke extends En.Component{static defaultProps=(pn().s[22]++,{filter:["all"]});constructor(e){pn().f[8]++,pn().s[23]++,super(e),pn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:jq(sv(e))}}onFilterPartChanged(e,t){pn().f[9]++;const i=(pn().s[25]++,sv(this.props).slice(0));pn().s[26]++,i[e]=t,pn().s[27]++,this.props.onChange(i)}deleteFilterItem(e){pn().f[10]++;const t=(pn().s[28]++,sv(this.props).slice(0));pn().s[29]++,t.splice(e+1,1),pn().s[30]++,this.props.onChange(t)}addFilterItem=(pn().s[31]++,()=>{pn().f[11]++;const e=(pn().s[32]++,sv(this.props).slice(0));pn().s[33]++,e.push(["==","name",""]),pn().s[34]++,this.props.onChange(e)});onToggleDoc=(pn().s[35]++,e=>{pn().f[12]++,pn().s[36]++,this.setState({showDoc:e})});makeFilter=(pn().s[37]++,()=>{pn().f[13]++,pn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(pn().s[39]++,()=>{pn().f[14]++;const e=(pn().s[40]++,sv(this.props));pn().s[41]++,this.props.onChange(fke(e)),pn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){pn().f[15]++;const i=(pn().s[43]++,jq(sv(e)));return pn().s[44]++,pn().b[7][0]++,!i&&(pn().b[7][1]++,t.displaySimpleFilter===!0)?(pn().b[6][0]++,pn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(pn().b[6][1]++,pn().s[46]++,pn().b[9][0]++,i&&(pn().b[9][1]++,t.displaySimpleFilter===!1)?(pn().b[8][0]++,pn().s[47]++,{valueIsSimpleFilter:!0}):(pn().b[8][1]++,pn().s[48]++,{valueIsSimpleFilter:!1}))}render(){pn().f[16]++;const{errors:e,t}=(pn().s[49]++,this.props),{displaySimpleFilter:i}=(pn().s[50]++,this.state),r=(pn().s[51]++,{doc:Yr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(pn().s[52]++,["all"]),s=(pn().s[53]++,pn().b[10][0]++,i&&(pn().b[10][1]++,gke(sv(this.props))));if(pn().s[54]++,s)return pn().b[11][0]++,pn().s[55]++,oe.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[oe.jsx("p",{children:t("Nested filters are not supported.")}),oe.jsxs(js,{onClick:this.makeExpression,title:t("Convert to expression"),children:[oe.jsx(q5,{}),t("Upgrade to expression")]})]});if(pn().b[11][1]++,pn().s[56]++,i){pn().b[12][0]++;const a=(pn().s[57]++,sv(this.props)),c=(pn().s[58]++,a[0]),d=(pn().s[59]++,a.slice(1)),p=(pn().s[60]++,oe.jsx("div",{children:oe.jsx(js,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:oe.jsx(q5,{})})})),v=(pn().s[61]++,d.map((M,E)=>{pn().f[17]++;const P=(pn().s[62]++,e[`filter[${E+1}]`]);return pn().s[63]++,oe.jsxs("div",{children:[oe.jsx(cke,{onDelete:this.deleteFilterItem.bind(this,E),children:oe.jsx(lke,{properties:this.props.properties,filter:M,onChange:this.onFilterPartChanged.bind(this,E+1)})},E),(pn().b[13][0]++,P&&(pn().b[13][1]++,oe.jsx("div",{className:"maputnik-inline-error",children:P.message},"error")))]},`block-${E}`)}));return pn().s[64]++,oe.jsxs(oe.Fragment,{children:[oe.jsx(ds,{fieldSpec:r,label:t("Filter"),action:p,children:oe.jsx(o_,{value:c,onChange:M=>(pn().f[18]++,pn().s[65]++,this.onFilterPartChanged(0,M)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),v,oe.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:oe.jsxs(js,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[oe.jsx(pO,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),oe.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(pn().b[14][0]++,""):(pn().b[14][1]++,"none")},children:oe.jsx(sO,{fieldSpec:r})},"doc")]})}else{pn().b[12][1]++;const{filter:a}=(pn().s[66]++,this.props);return pn().s[67]++,oe.jsxs(oe.Fragment,{children:[oe.jsx(Mse,{onDelete:()=>{pn().f[19]++,pn().s[68]++,this.setState({displaySimpleFilter:!0}),pn().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(pn().b[15][0]++,this.state.valueIsSimpleFilter&&(pn().b[15][1]++,oe.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",oe.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const vke=(pn().s[70]++,So()(yke));var n2={},_d={},i2={},bI,Gq;function wse(){if(Gq)return bI;Gq=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return bI=n,bI}var _I,Wq;function Xp(){if(Wq)return _I;Wq=1;var n=wse(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return _I=t,_I}var xI,Qq;function QM(){if(Qq)return xI;Qq=1;var n=Xp(),e=n.Symbol;return xI=e,xI}var MI,qq;function Cke(){if(qq)return MI;qq=1;var n=QM(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var d=!0}catch{}var p=i.call(s);return d&&(a?s[r]=c:delete s[r]),p}return MI=o,MI}var wI,Yq;function bke(){if(Yq)return wI;Yq=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return wI=t,wI}var SI,Vq;function s_(){if(Vq)return SI;Vq=1;var n=QM(),e=Cke(),t=bke(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return SI=s,SI}var EI,$q;function If(){if($q)return EI;$q=1;var n=Array.isArray;return EI=n,EI}var BI,Hq;function Lg(){if(Hq)return BI;Hq=1;function n(e){return e!=null&&typeof e=="object"}return BI=n,BI}var OI,Zq;function _ke(){if(Zq)return OI;Zq=1;var n=s_(),e=If(),t=Lg(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return OI=r,OI}var II,Xq;function xke(){if(Xq)return II;Xq=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var d=a[e?c:++o];if(i(s[d],d,s)===!1)break}return t}}return II=n,II}var TI,Jq;function Sse(){if(Jq)return TI;Jq=1;var n=xke(),e=n();return TI=e,TI}var kI,eY;function Mke(){if(eY)return kI;eY=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return kI=n,kI}var DI,tY;function wke(){if(tY)return DI;tY=1;var n=s_(),e=Lg(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return DI=i,DI}var RI,nY;function uF(){if(nY)return RI;nY=1;var n=wke(),e=Lg(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return RI=o,RI}var d4={exports:{}},PI,iY;function Ske(){if(iY)return PI;iY=1;function n(){return!1}return PI=n,PI}d4.exports;var rY;function yO(){return rY||(rY=1,(function(n,e){var t=Xp(),i=Ske(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,d=c||i;n.exports=d})(d4,d4.exports)),d4.exports}var UI,oY;function cF(){if(oY)return UI;oY=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return UI=t,UI}var LI,sY;function AF(){if(sY)return LI;sY=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return LI=e,LI}var KI,aY;function Eke(){if(aY)return KI;aY=1;var n=s_(),e=AF(),t=Lg(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",d="[object Map]",p="[object Number]",v="[object Object]",M="[object RegExp]",E="[object Set]",P="[object String]",U="[object WeakMap]",z="[object ArrayBuffer]",V="[object DataView]",Z="[object Float32Array]",X="[object Float64Array]",re="[object Int8Array]",ee="[object Int16Array]",ne="[object Int32Array]",q="[object Uint8Array]",le="[object Uint8ClampedArray]",ue="[object Uint16Array]",ve="[object Uint32Array]",pe={};pe[Z]=pe[X]=pe[re]=pe[ee]=pe[ne]=pe[q]=pe[le]=pe[ue]=pe[ve]=!0,pe[i]=pe[r]=pe[z]=pe[o]=pe[V]=pe[s]=pe[a]=pe[c]=pe[d]=pe[p]=pe[v]=pe[M]=pe[E]=pe[P]=pe[U]=!1;function Be(Ce){return t(Ce)&&e(Ce.length)&&!!pe[n(Ce)]}return KI=Be,KI}var FI,lY;function hF(){if(lY)return FI;lY=1;function n(e){return function(t){return e(t)}}return FI=n,FI}var f4={exports:{}};f4.exports;var uY;function dF(){return uY||(uY=1,(function(n,e){var t=wse(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(f4,f4.exports)),f4.exports}var zI,cY;function fF(){if(cY)return zI;cY=1;var n=Eke(),e=hF(),t=dF(),i=t&&t.isTypedArray,r=i?e(i):n;return zI=r,zI}var jI,AY;function Ese(){if(AY)return jI;AY=1;var n=Mke(),e=uF(),t=If(),i=yO(),r=cF(),o=fF(),s=Object.prototype,a=s.hasOwnProperty;function c(d,p){var v=t(d),M=!v&&e(d),E=!v&&!M&&i(d),P=!v&&!M&&!E&&o(d),U=v||M||E||P,z=U?n(d.length,String):[],V=z.length;for(var Z in d)(p||a.call(d,Z))&&!(U&&(Z=="length"||E&&(Z=="offset"||Z=="parent")||P&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||r(Z,V)))&&z.push(Z);return z}return jI=c,jI}var NI,hY;function mF(){if(hY)return NI;hY=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return NI=e,NI}var GI,dY;function Bse(){if(dY)return GI;dY=1;function n(e,t){return function(i){return e(t(i))}}return GI=n,GI}var WI,fY;function Bke(){if(fY)return WI;fY=1;var n=Bse(),e=n(Object.keys,Object);return WI=e,WI}var QI,mY;function Oke(){if(mY)return QI;mY=1;var n=mF(),e=Bke(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return QI=r,QI}var qI,pY;function Rm(){if(pY)return qI;pY=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return qI=n,qI}var YI,gY;function pF(){if(gY)return YI;gY=1;var n=s_(),e=Rm(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return YI=s,YI}var VI,yY;function i3(){if(yY)return VI;yY=1;var n=pF(),e=AF();function t(i){return i!=null&&e(i.length)&&!n(i)}return VI=t,VI}var $I,vY;function qM(){if(vY)return $I;vY=1;var n=Ese(),e=Oke(),t=i3();function i(r){return t(r)?n(r):e(r)}return $I=i,$I}var HI,CY;function Ose(){if(CY)return HI;CY=1;var n=Sse(),e=qM();function t(i,r){return i&&n(i,r,e)}return HI=t,HI}var ZI,bY;function vO(){if(bY)return ZI;bY=1;function n(e){return e}return ZI=n,ZI}var XI,_Y;function Ise(){if(_Y)return XI;_Y=1;var n=vO();function e(t){return typeof t=="function"?t:n}return XI=e,XI}var JI,xY;function gF(){if(xY)return JI;xY=1;var n=Ose(),e=Ise();function t(i,r){return i&&n(i,e(r))}return JI=t,JI}var eT,MY;function yF(){if(MY)return eT;MY=1;var n=Bse(),e=n(Object.getPrototypeOf,Object);return eT=e,eT}var tT,wY;function Tse(){if(wY)return tT;wY=1;var n=s_(),e=yF(),t=Lg(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function d(p){if(!t(p)||n(p)!=i)return!1;var v=e(p);if(v===null)return!0;var M=a.call(v,"constructor")&&v.constructor;return typeof M=="function"&&M instanceof M&&s.call(M)==c}return tT=d,tT}var nT,SY;function kse(){if(SY)return nT;SY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return nT=n,nT}var iT,EY;function Ike(){if(EY)return iT;EY=1;function n(){this.__data__=[],this.size=0}return iT=n,iT}var rT,BY;function YM(){if(BY)return rT;BY=1;function n(e,t){return e===t||e!==e&&t!==t}return rT=n,rT}var oT,OY;function CO(){if(OY)return oT;OY=1;var n=YM();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return oT=e,oT}var sT,IY;function Tke(){if(IY)return sT;IY=1;var n=CO(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return sT=i,sT}var aT,TY;function kke(){if(TY)return aT;TY=1;var n=CO();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return aT=e,aT}var lT,kY;function Dke(){if(kY)return lT;kY=1;var n=CO();function e(t){return n(this.__data__,t)>-1}return lT=e,lT}var uT,DY;function Rke(){if(DY)return uT;DY=1;var n=CO();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return uT=e,uT}var cT,RY;function bO(){if(RY)return cT;RY=1;var n=Ike(),e=Tke(),t=kke(),i=Dke(),r=Rke();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var d=s[a];this.set(d[0],d[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,cT=o,cT}var AT,PY;function Pke(){if(PY)return AT;PY=1;var n=bO();function e(){this.__data__=new n,this.size=0}return AT=e,AT}var hT,UY;function Uke(){if(UY)return hT;UY=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return hT=n,hT}var dT,LY;function Lke(){if(LY)return dT;LY=1;function n(e){return this.__data__.get(e)}return dT=n,dT}var fT,KY;function Kke(){if(KY)return fT;KY=1;function n(e){return this.__data__.has(e)}return fT=n,fT}var mT,FY;function Fke(){if(FY)return mT;FY=1;var n=Xp(),e=n["__core-js_shared__"];return mT=e,mT}var pT,zY;function zke(){if(zY)return pT;zY=1;var n=Fke(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return pT=t,pT}var gT,jY;function Dse(){if(jY)return gT;jY=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return gT=t,gT}var yT,NY;function jke(){if(NY)return yT;NY=1;var n=pF(),e=zke(),t=Rm(),i=Dse(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,d=a.hasOwnProperty,p=RegExp("^"+c.call(d).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(M){if(!t(M)||e(M))return!1;var E=n(M)?p:o;return E.test(i(M))}return yT=v,yT}var vT,GY;function Nke(){if(GY)return vT;GY=1;function n(e,t){return e?.[t]}return vT=n,vT}var CT,WY;function a_(){if(WY)return CT;WY=1;var n=jke(),e=Nke();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return CT=t,CT}var bT,QY;function vF(){if(QY)return bT;QY=1;var n=a_(),e=Xp(),t=n(e,"Map");return bT=t,bT}var _T,qY;function _O(){if(qY)return _T;qY=1;var n=a_(),e=n(Object,"create");return _T=e,_T}var xT,YY;function Gke(){if(YY)return xT;YY=1;var n=_O();function e(){this.__data__=n?n(null):{},this.size=0}return xT=e,xT}var MT,VY;function Wke(){if(VY)return MT;VY=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return MT=n,MT}var wT,$Y;function Qke(){if($Y)return wT;$Y=1;var n=_O(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return wT=r,wT}var ST,HY;function qke(){if(HY)return ST;HY=1;var n=_O(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return ST=i,ST}var ET,ZY;function Yke(){if(ZY)return ET;ZY=1;var n=_O(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return ET=t,ET}var BT,XY;function Vke(){if(XY)return BT;XY=1;var n=Gke(),e=Wke(),t=Qke(),i=qke(),r=Yke();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var d=s[a];this.set(d[0],d[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,BT=o,BT}var OT,JY;function $ke(){if(JY)return OT;JY=1;var n=Vke(),e=bO(),t=vF();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return OT=i,OT}var IT,eV;function Hke(){if(eV)return IT;eV=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return IT=n,IT}var TT,tV;function xO(){if(tV)return TT;tV=1;var n=Hke();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return TT=e,TT}var kT,nV;function Zke(){if(nV)return kT;nV=1;var n=xO();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return kT=e,kT}var DT,iV;function Xke(){if(iV)return DT;iV=1;var n=xO();function e(t){return n(this,t).get(t)}return DT=e,DT}var RT,rV;function Jke(){if(rV)return RT;rV=1;var n=xO();function e(t){return n(this,t).has(t)}return RT=e,RT}var PT,oV;function e9e(){if(oV)return PT;oV=1;var n=xO();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return PT=e,PT}var UT,sV;function CF(){if(sV)return UT;sV=1;var n=$ke(),e=Zke(),t=Xke(),i=Jke(),r=e9e();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var d=s[a];this.set(d[0],d[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,UT=o,UT}var LT,aV;function t9e(){if(aV)return LT;aV=1;var n=bO(),e=vF(),t=CF(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return LT=r,LT}var KT,lV;function MO(){if(lV)return KT;lV=1;var n=bO(),e=Pke(),t=Uke(),i=Lke(),r=Kke(),o=t9e();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,KT=s,KT}var FT,uV;function n9e(){if(uV)return FT;uV=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return FT=e,FT}var zT,cV;function i9e(){if(cV)return zT;cV=1;function n(e){return this.__data__.has(e)}return zT=n,zT}var jT,AV;function r9e(){if(AV)return jT;AV=1;var n=CF(),e=n9e(),t=i9e();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,jT=i,jT}var NT,hV;function o9e(){if(hV)return NT;hV=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return NT=n,NT}var GT,dV;function s9e(){if(dV)return GT;dV=1;function n(e,t){return e.has(t)}return GT=n,GT}var WT,fV;function Rse(){if(fV)return WT;fV=1;var n=r9e(),e=o9e(),t=s9e(),i=1,r=2;function o(s,a,c,d,p,v){var M=c&i,E=s.length,P=a.length;if(E!=P&&!(M&&P>E))return!1;var U=v.get(s),z=v.get(a);if(U&&z)return U==a&&z==s;var V=-1,Z=!0,X=c&r?new n:void 0;for(v.set(s,a),v.set(a,s);++V<E;){var re=s[V],ee=a[V];if(d)var ne=M?d(ee,re,V,a,s,v):d(re,ee,V,s,a,v);if(ne!==void 0){if(ne)continue;Z=!1;break}if(X){if(!e(a,function(q,le){if(!t(X,le)&&(re===q||p(re,q,c,d,v)))return X.push(le)})){Z=!1;break}}else if(!(re===ee||p(re,ee,c,d,v))){Z=!1;break}}return v.delete(s),v.delete(a),Z}return WT=o,WT}var QT,mV;function Pse(){if(mV)return QT;mV=1;var n=Xp(),e=n.Uint8Array;return QT=e,QT}var qT,pV;function a9e(){if(pV)return qT;pV=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return qT=n,qT}var YT,gV;function l9e(){if(gV)return YT;gV=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return YT=n,YT}var VT,yV;function u9e(){if(yV)return VT;yV=1;var n=QM(),e=Pse(),t=YM(),i=Rse(),r=a9e(),o=l9e(),s=1,a=2,c="[object Boolean]",d="[object Date]",p="[object Error]",v="[object Map]",M="[object Number]",E="[object RegExp]",P="[object Set]",U="[object String]",z="[object Symbol]",V="[object ArrayBuffer]",Z="[object DataView]",X=n?n.prototype:void 0,re=X?X.valueOf:void 0;function ee(ne,q,le,ue,ve,pe,Be){switch(le){case Z:if(ne.byteLength!=q.byteLength||ne.byteOffset!=q.byteOffset)return!1;ne=ne.buffer,q=q.buffer;case V:return!(ne.byteLength!=q.byteLength||!pe(new e(ne),new e(q)));case c:case d:case M:return t(+ne,+q);case p:return ne.name==q.name&&ne.message==q.message;case E:case U:return ne==q+"";case v:var Ce=r;case P:var Oe=ue&s;if(Ce||(Ce=o),ne.size!=q.size&&!Oe)return!1;var Fe=Be.get(ne);if(Fe)return Fe==q;ue|=a,Be.set(ne,q);var Ee=i(Ce(ne),Ce(q),ue,ve,pe,Be);return Be.delete(ne),Ee;case z:if(re)return re.call(ne)==re.call(q)}return!1}return VT=ee,VT}var $T,vV;function Use(){if(vV)return $T;vV=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return $T=n,$T}var HT,CV;function Lse(){if(CV)return HT;CV=1;var n=Use(),e=If();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return HT=t,HT}var ZT,bV;function c9e(){if(bV)return ZT;bV=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return ZT=n,ZT}var XT,_V;function Kse(){if(_V)return XT;_V=1;function n(){return[]}return XT=n,XT}var JT,xV;function bF(){if(xV)return JT;xV=1;var n=c9e(),e=Kse(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return JT=o,JT}var ek,MV;function Fse(){if(MV)return ek;MV=1;var n=Lse(),e=bF(),t=qM();function i(r){return n(r,t,e)}return ek=i,ek}var tk,wV;function A9e(){if(wV)return tk;wV=1;var n=Fse(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,d,p){var v=a&e,M=n(o),E=M.length,P=n(s),U=P.length;if(E!=U&&!v)return!1;for(var z=E;z--;){var V=M[z];if(!(v?V in s:i.call(s,V)))return!1}var Z=p.get(o),X=p.get(s);if(Z&&X)return Z==s&&X==o;var re=!0;p.set(o,s),p.set(s,o);for(var ee=v;++z<E;){V=M[z];var ne=o[V],q=s[V];if(c)var le=v?c(q,ne,V,s,o,p):c(ne,q,V,o,s,p);if(!(le===void 0?ne===q||d(ne,q,a,c,p):le)){re=!1;break}ee||(ee=V=="constructor")}if(re&&!ee){var ue=o.constructor,ve=s.constructor;ue!=ve&&"constructor"in o&&"constructor"in s&&!(typeof ue=="function"&&ue instanceof ue&&typeof ve=="function"&&ve instanceof ve)&&(re=!1)}return p.delete(o),p.delete(s),re}return tk=r,tk}var nk,SV;function h9e(){if(SV)return nk;SV=1;var n=a_(),e=Xp(),t=n(e,"DataView");return nk=t,nk}var ik,EV;function d9e(){if(EV)return ik;EV=1;var n=a_(),e=Xp(),t=n(e,"Promise");return ik=t,ik}var rk,BV;function f9e(){if(BV)return rk;BV=1;var n=a_(),e=Xp(),t=n(e,"Set");return rk=t,rk}var ok,OV;function m9e(){if(OV)return ok;OV=1;var n=a_(),e=Xp(),t=n(e,"WeakMap");return ok=t,ok}var sk,IV;function wO(){if(IV)return sk;IV=1;var n=h9e(),e=vF(),t=d9e(),i=f9e(),r=m9e(),o=s_(),s=Dse(),a="[object Map]",c="[object Object]",d="[object Promise]",p="[object Set]",v="[object WeakMap]",M="[object DataView]",E=s(n),P=s(e),U=s(t),z=s(i),V=s(r),Z=o;return(n&&Z(new n(new ArrayBuffer(1)))!=M||e&&Z(new e)!=a||t&&Z(t.resolve())!=d||i&&Z(new i)!=p||r&&Z(new r)!=v)&&(Z=function(X){var re=o(X),ee=re==c?X.constructor:void 0,ne=ee?s(ee):"";if(ne)switch(ne){case E:return M;case P:return a;case U:return d;case z:return p;case V:return v}return re}),sk=Z,sk}var ak,TV;function p9e(){if(TV)return ak;TV=1;var n=MO(),e=Rse(),t=u9e(),i=A9e(),r=wO(),o=If(),s=yO(),a=fF(),c=1,d="[object Arguments]",p="[object Array]",v="[object Object]",M=Object.prototype,E=M.hasOwnProperty;function P(U,z,V,Z,X,re){var ee=o(U),ne=o(z),q=ee?p:r(U),le=ne?p:r(z);q=q==d?v:q,le=le==d?v:le;var ue=q==v,ve=le==v,pe=q==le;if(pe&&s(U)){if(!s(z))return!1;ee=!0,ue=!1}if(pe&&!ue)return re||(re=new n),ee||a(U)?e(U,z,V,Z,X,re):t(U,z,q,V,Z,X,re);if(!(V&c)){var Be=ue&&E.call(U,"__wrapped__"),Ce=ve&&E.call(z,"__wrapped__");if(Be||Ce){var Oe=Be?U.value():U,Fe=Ce?z.value():z;return re||(re=new n),X(Oe,Fe,V,Z,re)}}return pe?(re||(re=new n),i(U,z,V,Z,X,re)):!1}return ak=P,ak}var lk,kV;function zse(){if(kV)return lk;kV=1;var n=p9e(),e=Lg();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return lk=t,lk}var uk,DV;function g9e(){if(DV)return uk;DV=1;var n=MO(),e=zse(),t=1,i=2;function r(o,s,a,c){var d=a.length,p=d,v=!c;if(o==null)return!p;for(o=Object(o);d--;){var M=a[d];if(v&&M[2]?M[1]!==o[M[0]]:!(M[0]in o))return!1}for(;++d<p;){M=a[d];var E=M[0],P=o[E],U=M[1];if(v&&M[2]){if(P===void 0&&!(E in o))return!1}else{var z=new n;if(c)var V=c(P,U,E,o,s,z);if(!(V===void 0?e(U,P,t|i,c,z):V))return!1}}return!0}return uk=r,uk}var ck,RV;function jse(){if(RV)return ck;RV=1;var n=Rm();function e(t){return t===t&&!n(t)}return ck=e,ck}var Ak,PV;function y9e(){if(PV)return Ak;PV=1;var n=jse(),e=qM();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return Ak=t,Ak}var hk,UV;function Nse(){if(UV)return hk;UV=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return hk=n,hk}var dk,LV;function v9e(){if(LV)return dk;LV=1;var n=g9e(),e=y9e(),t=Nse();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return dk=i,dk}var fk,KV;function SO(){if(KV)return fk;KV=1;var n=s_(),e=Lg(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return fk=i,fk}var mk,FV;function _F(){if(FV)return mk;FV=1;var n=If(),e=SO(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return mk=r,mk}var pk,zV;function C9e(){if(zV)return pk;zV=1;var n=CF(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var d=i.apply(this,s);return o.cache=c.set(a,d)||c,d};return o.cache=new(t.Cache||n),o}return t.Cache=n,pk=t,pk}var gk,jV;function b9e(){if(jV)return gk;jV=1;var n=C9e(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return gk=t,gk}var yk,NV;function _9e(){if(NV)return yk;NV=1;var n=b9e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,d){o.push(c?d.replace(t,"$1"):a||s)}),o});return yk=i,yk}var vk,GV;function x9e(){if(GV)return vk;GV=1;var n=QM(),e=kse(),t=If(),i=SO(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return vk=s,vk}var Ck,WV;function M9e(){if(WV)return Ck;WV=1;var n=x9e();function e(t){return t==null?"":n(t)}return Ck=e,Ck}var bk,QV;function Gse(){if(QV)return bk;QV=1;var n=If(),e=_F(),t=_9e(),i=M9e();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return bk=r,bk}var _k,qV;function EO(){if(qV)return _k;qV=1;var n=SO();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return _k=e,_k}var xk,YV;function Wse(){if(YV)return xk;YV=1;var n=Gse(),e=EO();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return xk=t,xk}var Mk,VV;function w9e(){if(VV)return Mk;VV=1;var n=Wse();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return Mk=e,Mk}var wk,$V;function S9e(){if($V)return wk;$V=1;function n(e,t){return e!=null&&t in Object(e)}return wk=n,wk}var Sk,HV;function E9e(){if(HV)return Sk;HV=1;var n=Gse(),e=uF(),t=If(),i=cF(),r=AF(),o=EO();function s(a,c,d){c=n(c,a);for(var p=-1,v=c.length,M=!1;++p<v;){var E=o(c[p]);if(!(M=a!=null&&d(a,E)))break;a=a[E]}return M||++p!=v?M:(v=a==null?0:a.length,!!v&&r(v)&&i(E,v)&&(t(a)||e(a)))}return Sk=s,Sk}var Ek,ZV;function B9e(){if(ZV)return Ek;ZV=1;var n=S9e(),e=E9e();function t(i,r){return i!=null&&e(i,r,n)}return Ek=t,Ek}var Bk,XV;function O9e(){if(XV)return Bk;XV=1;var n=zse(),e=w9e(),t=B9e(),i=_F(),r=jse(),o=Nse(),s=EO(),a=1,c=2;function d(p,v){return i(p)&&r(v)?o(s(p),v):function(M){var E=e(M,p);return E===void 0&&E===v?t(M,p):n(v,E,a|c)}}return Bk=d,Bk}var Ok,JV;function I9e(){if(JV)return Ok;JV=1;function n(e){return function(t){return t?.[e]}}return Ok=n,Ok}var Ik,e$;function T9e(){if(e$)return Ik;e$=1;var n=Wse();function e(t){return function(i){return n(i,t)}}return Ik=e,Ik}var Tk,t$;function k9e(){if(t$)return Tk;t$=1;var n=I9e(),e=T9e(),t=_F(),i=EO();function r(o){return t(o)?n(i(o)):e(o)}return Tk=r,Tk}var kk,n$;function D9e(){if(n$)return kk;n$=1;var n=v9e(),e=O9e(),t=vO(),i=If(),r=k9e();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return kk=o,kk}var Dk,i$;function R9e(){if(i$)return Dk;i$=1;var n=i3();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return Dk=e,Dk}var Rk,r$;function Qse(){if(r$)return Rk;r$=1;var n=Ose(),e=R9e(),t=e(n);return Rk=t,Rk}var Pk,o$;function P9e(){if(o$)return Pk;o$=1;var n=Qse(),e=i3();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,d){s[++o]=r(a,c,d)}),s}return Pk=t,Pk}var Uk,s$;function U9e(){if(s$)return Uk;s$=1;var n=kse(),e=D9e(),t=P9e(),i=If();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return Uk=r,Uk}var a$;function L9e(){if(a$)return i2;a$=1,Object.defineProperty(i2,"__esModule",{value:!0}),i2.flattenNames=void 0;var n=_ke(),e=c(n),t=gF(),i=c(t),r=Tse(),o=c(r),s=U9e(),a=c(s);function c(p){return p&&p.__esModule?p:{default:p}}var d=i2.flattenNames=function p(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=[];return(0,a.default)(v,function(E){Array.isArray(E)?p(E).map(function(P){return M.push(P)}):(0,o.default)(E)?(0,i.default)(E,function(P,U){P===!0&&M.push(U),M.push(U+"-"+P)}):(0,e.default)(E)&&M.push(E)}),M};return i2.default=d,i2}var r2={},Lk,l$;function qse(){if(l$)return Lk;l$=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return Lk=n,Lk}var Kk,u$;function Yse(){if(u$)return Kk;u$=1;var n=a_(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Kk=e,Kk}var Fk,c$;function xF(){if(c$)return Fk;c$=1;var n=Yse();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return Fk=e,Fk}var zk,A$;function Vse(){if(A$)return zk;A$=1;var n=xF(),e=YM(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return zk=r,zk}var jk,h$;function VM(){if(h$)return jk;h$=1;var n=Vse(),e=xF();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,d=r.length;++c<d;){var p=r[c],v=s?s(o[p],i[p],p,o,i):void 0;v===void 0&&(v=i[p]),a?e(o,p,v):n(o,p,v)}return o}return jk=t,jk}var Nk,d$;function K9e(){if(d$)return Nk;d$=1;var n=VM(),e=qM();function t(i,r){return i&&n(r,e(r),i)}return Nk=t,Nk}var Gk,f$;function F9e(){if(f$)return Gk;f$=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return Gk=n,Gk}var Wk,m$;function z9e(){if(m$)return Wk;m$=1;var n=Rm(),e=mF(),t=F9e(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var d in s)d=="constructor"&&(a||!r.call(s,d))||c.push(d);return c}return Wk=o,Wk}var Qk,p$;function $M(){if(p$)return Qk;p$=1;var n=Ese(),e=z9e(),t=i3();function i(r){return t(r)?n(r,!0):e(r)}return Qk=i,Qk}var qk,g$;function j9e(){if(g$)return qk;g$=1;var n=VM(),e=$M();function t(i,r){return i&&n(r,e(r),i)}return qk=t,qk}var m4={exports:{}};m4.exports;var y$;function $se(){return y$||(y$=1,(function(n,e){var t=Xp(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(d,p){if(p)return d.slice();var v=d.length,M=a?a(v):new d.constructor(v);return d.copy(M),M}n.exports=c})(m4,m4.exports)),m4.exports}var Yk,v$;function Hse(){if(v$)return Yk;v$=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return Yk=n,Yk}var Vk,C$;function N9e(){if(C$)return Vk;C$=1;var n=VM(),e=bF();function t(i,r){return n(i,e(i),r)}return Vk=t,Vk}var $k,b$;function Zse(){if(b$)return $k;b$=1;var n=Use(),e=yF(),t=bF(),i=Kse(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return $k=o,$k}var Hk,_$;function G9e(){if(_$)return Hk;_$=1;var n=VM(),e=Zse();function t(i,r){return n(i,e(i),r)}return Hk=t,Hk}var Zk,x$;function W9e(){if(x$)return Zk;x$=1;var n=Lse(),e=Zse(),t=$M();function i(r){return n(r,t,e)}return Zk=i,Zk}var Xk,M$;function Q9e(){if(M$)return Xk;M$=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return Xk=t,Xk}var Jk,w$;function MF(){if(w$)return Jk;w$=1;var n=Pse();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return Jk=e,Jk}var e9,S$;function q9e(){if(S$)return e9;S$=1;var n=MF();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return e9=e,e9}var t9,E$;function Y9e(){if(E$)return t9;E$=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return t9=e,t9}var n9,B$;function V9e(){if(B$)return n9;B$=1;var n=QM(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return n9=i,n9}var i9,O$;function Xse(){if(O$)return i9;O$=1;var n=MF();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return i9=e,i9}var r9,I$;function $9e(){if(I$)return r9;I$=1;var n=MF(),e=q9e(),t=Y9e(),i=V9e(),r=Xse(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",d="[object RegExp]",p="[object Set]",v="[object String]",M="[object Symbol]",E="[object ArrayBuffer]",P="[object DataView]",U="[object Float32Array]",z="[object Float64Array]",V="[object Int8Array]",Z="[object Int16Array]",X="[object Int32Array]",re="[object Uint8Array]",ee="[object Uint8ClampedArray]",ne="[object Uint16Array]",q="[object Uint32Array]";function le(ue,ve,pe){var Be=ue.constructor;switch(ve){case E:return n(ue);case o:case s:return new Be(+ue);case P:return e(ue,pe);case U:case z:case V:case Z:case X:case re:case ee:case ne:case q:return r(ue,pe);case a:return new Be;case c:case v:return new Be(ue);case d:return t(ue);case p:return new Be;case M:return i(ue)}}return r9=le,r9}var o9,T$;function H9e(){if(T$)return o9;T$=1;var n=Rm(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return o9=t,o9}var s9,k$;function Jse(){if(k$)return s9;k$=1;var n=H9e(),e=yF(),t=mF();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return s9=i,s9}var a9,D$;function Z9e(){if(D$)return a9;D$=1;var n=wO(),e=Lg(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return a9=i,a9}var l9,R$;function X9e(){if(R$)return l9;R$=1;var n=Z9e(),e=hF(),t=dF(),i=t&&t.isMap,r=i?e(i):n;return l9=r,l9}var u9,P$;function J9e(){if(P$)return u9;P$=1;var n=wO(),e=Lg(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return u9=i,u9}var c9,U$;function eDe(){if(U$)return c9;U$=1;var n=J9e(),e=hF(),t=dF(),i=t&&t.isSet,r=i?e(i):n;return c9=r,c9}var A9,L$;function tDe(){if(L$)return A9;L$=1;var n=MO(),e=qse(),t=Vse(),i=K9e(),r=j9e(),o=$se(),s=Hse(),a=N9e(),c=G9e(),d=Fse(),p=W9e(),v=wO(),M=Q9e(),E=$9e(),P=Jse(),U=If(),z=yO(),V=X9e(),Z=Rm(),X=eDe(),re=qM(),ee=$M(),ne=1,q=2,le=4,ue="[object Arguments]",ve="[object Array]",pe="[object Boolean]",Be="[object Date]",Ce="[object Error]",Oe="[object Function]",Fe="[object GeneratorFunction]",Ee="[object Map]",Ve="[object Number]",ut="[object Object]",mt="[object RegExp]",Pe="[object Set]",De="[object String]",Xe="[object Symbol]",Ke="[object WeakMap]",Bt="[object ArrayBuffer]",ot="[object DataView]",Et="[object Float32Array]",Rt="[object Float64Array]",Ue="[object Int8Array]",ke="[object Int16Array]",Te="[object Int32Array]",He="[object Uint8Array]",Ct="[object Uint8ClampedArray]",vt="[object Uint16Array]",wt="[object Uint32Array]",Ft={};Ft[ue]=Ft[ve]=Ft[Bt]=Ft[ot]=Ft[pe]=Ft[Be]=Ft[Et]=Ft[Rt]=Ft[Ue]=Ft[ke]=Ft[Te]=Ft[Ee]=Ft[Ve]=Ft[ut]=Ft[mt]=Ft[Pe]=Ft[De]=Ft[Xe]=Ft[He]=Ft[Ct]=Ft[vt]=Ft[wt]=!0,Ft[Ce]=Ft[Oe]=Ft[Ke]=!1;function Pt(nn,Kn,Wn,Mi,Fn,Ln){var In,oi=Kn&ne,Tn=Kn&q,je=Kn&le;if(Wn&&(In=Fn?Wn(nn,Mi,Fn,Ln):Wn(nn)),In!==void 0)return In;if(!Z(nn))return nn;var $=U(nn);if($){if(In=M(nn),!oi)return s(nn,In)}else{var j=v(nn),Q=j==Oe||j==Fe;if(z(nn))return o(nn,oi);if(j==ut||j==ue||Q&&!Fn){if(In=Tn||Q?{}:P(nn),!oi)return Tn?c(nn,r(In,nn)):a(nn,i(In,nn))}else{if(!Ft[j])return Fn?nn:{};In=E(nn,j,oi)}}Ln||(Ln=new n);var Ae=Ln.get(nn);if(Ae)return Ae;Ln.set(nn,In),X(nn)?nn.forEach(function(We){In.add(Pt(We,Kn,Wn,We,nn,Ln))}):V(nn)&&nn.forEach(function(We,it){In.set(it,Pt(We,Kn,Wn,it,nn,Ln))});var Me=je?Tn?p:d:Tn?ee:re,Ne=$?void 0:Me(nn);return e(Ne||nn,function(We,it){Ne&&(it=We,We=nn[it]),t(In,it,Pt(We,Kn,Wn,it,nn,Ln))}),In}return A9=Pt,A9}var h9,K$;function nDe(){if(K$)return h9;K$=1;var n=tDe(),e=1,t=4;function i(r){return n(r,e|t)}return h9=i,h9}var F$;function iDe(){if(F$)return r2;F$=1,Object.defineProperty(r2,"__esModule",{value:!0}),r2.mergeClasses=void 0;var n=gF(),e=o(n),t=nDe(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(a[p]=d[p])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=r2.mergeClasses=function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],p=c.default&&(0,i.default)(c.default)||{};return d.map(function(v){var M=c[v];return M&&(0,e.default)(M,function(E,P){p[P]||(p[P]={}),p[P]=r({},p[P],M[P])}),v}),p};return r2.default=s,r2}var o2={},z$;function rDe(){if(z$)return o2;z$=1,Object.defineProperty(o2,"__esModule",{value:!0}),o2.autoprefix=void 0;var n=gF(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var d=c[a];return d||{extend:a}}},o=o2.autoprefix=function(a){var c={};return(0,e.default)(a,function(d,p){var v={};(0,e.default)(d,function(M,E){var P=r[E];P?v=t({},v,P(M)):v[E]=M}),c[p]=v}),c};return o2.default=o,o2}var s2={},j$;function oDe(){if(j$)return s2;j$=1,Object.defineProperty(s2,"__esModule",{value:!0}),s2.hover=void 0;var n=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var p=arguments[d];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(c[v]=p[v])}return c},e=wa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function s(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=s2.hover=function(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(M,v);function M(){var E,P,U,z;r(this,M);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=o(this,(E=M.__proto__||Object.getPrototypeOf(M)).call.apply(E,[this].concat(Z))),U),U.state={hover:!1},U.handleMouseOver=function(){return U.setState({hover:!0})},U.handleMouseOut=function(){return U.setState({hover:!1})},U.render=function(){return t.default.createElement(p,{onMouseOver:U.handleMouseOver,onMouseOut:U.handleMouseOut},t.default.createElement(d,n({},U.props,U.state)))},P),o(U,z)}return M})(t.default.Component)};return s2.default=a,s2}var a2={},N$;function sDe(){if(N$)return a2;N$=1,Object.defineProperty(a2,"__esModule",{value:!0}),a2.active=void 0;var n=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var p=arguments[d];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(c[v]=p[v])}return c},e=wa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function s(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=a2.active=function(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(M,v);function M(){var E,P,U,z;r(this,M);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=o(this,(E=M.__proto__||Object.getPrototypeOf(M)).call.apply(E,[this].concat(Z))),U),U.state={active:!1},U.handleMouseDown=function(){return U.setState({active:!0})},U.handleMouseUp=function(){return U.setState({active:!1})},U.render=function(){return t.default.createElement(p,{onMouseDown:U.handleMouseDown,onMouseUp:U.handleMouseUp},t.default.createElement(d,n({},U.props,U.state)))},P),o(U,z)}return M})(t.default.Component)};return a2.default=a,a2}var AS={},G$;function aDe(){if(G$)return AS;G$=1,Object.defineProperty(AS,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return AS.default=n,AS}var W$;function Jp(){if(W$)return _d;W$=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.ReactCSS=_d.loop=_d.handleActive=_d.handleHover=_d.hover=void 0;var n=L9e(),e=M(n),t=iDe(),i=M(t),r=rDe(),o=M(r),s=oDe(),a=M(s),c=sDe(),d=M(c),p=aDe(),v=M(p);function M(P){return P&&P.__esModule?P:{default:P}}_d.hover=a.default,_d.handleHover=a.default,_d.handleActive=d.default,_d.loop=v.default;var E=_d.ReactCSS=function(U){for(var z=arguments.length,V=Array(z>1?z-1:0),Z=1;Z<z;Z++)V[Z-1]=arguments[Z];var X=(0,e.default)(V),re=(0,i.default)(U,X);return(0,o.default)(re)};return _d.default=E,_d}var d9,Q$;function eae(){if(Q$)return d9;Q$=1;var n=xF(),e=YM();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return d9=t,d9}var f9,q$;function lDe(){if(q$)return f9;q$=1;var n=i3(),e=Lg();function t(i){return e(i)&&n(i)}return f9=t,f9}var m9,Y$;function tae(){if(Y$)return m9;Y$=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return m9=n,m9}var p9,V$;function uDe(){if(V$)return p9;V$=1;var n=VM(),e=$M();function t(i){return n(i,e(i))}return p9=t,p9}var g9,$$;function cDe(){if($$)return g9;$$=1;var n=eae(),e=$se(),t=Xse(),i=Hse(),r=Jse(),o=uF(),s=If(),a=lDe(),c=yO(),d=pF(),p=Rm(),v=Tse(),M=fF(),E=tae(),P=uDe();function U(z,V,Z,X,re,ee,ne){var q=E(z,Z),le=E(V,Z),ue=ne.get(le);if(ue){n(z,Z,ue);return}var ve=ee?ee(q,le,Z+"",z,V,ne):void 0,pe=ve===void 0;if(pe){var Be=s(le),Ce=!Be&&c(le),Oe=!Be&&!Ce&&M(le);ve=le,Be||Ce||Oe?s(q)?ve=q:a(q)?ve=i(q):Ce?(pe=!1,ve=e(le,!0)):Oe?(pe=!1,ve=t(le,!0)):ve=[]:v(le)||o(le)?(ve=q,o(q)?ve=P(q):(!p(q)||d(q))&&(ve=r(le))):pe=!1}pe&&(ne.set(le,ve),re(ve,le,X,ee,ne),ne.delete(le)),n(z,Z,ve)}return g9=U,g9}var y9,H$;function ADe(){if(H$)return y9;H$=1;var n=MO(),e=eae(),t=Sse(),i=cDe(),r=Rm(),o=$M(),s=tae();function a(c,d,p,v,M){c!==d&&t(d,function(E,P){if(M||(M=new n),r(E))i(c,d,P,p,a,v,M);else{var U=v?v(s(c,P),E,P+"",c,d,M):void 0;U===void 0&&(U=E),e(c,P,U)}},o)}return y9=a,y9}var v9,Z$;function hDe(){if(Z$)return v9;Z$=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return v9=n,v9}var C9,X$;function dDe(){if(X$)return C9;X$=1;var n=hDe(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),d=Array(c);++a<c;)d[a]=s[r+a];a=-1;for(var p=Array(r+1);++a<r;)p[a]=s[a];return p[r]=o(d),n(i,this,p)}}return C9=t,C9}var b9,J$;function fDe(){if(J$)return b9;J$=1;function n(e){return function(){return e}}return b9=n,b9}var _9,eH;function mDe(){if(eH)return _9;eH=1;var n=fDe(),e=Yse(),t=vO(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return _9=i,_9}var x9,tH;function pDe(){if(tH)return x9;tH=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return x9=i,x9}var M9,nH;function gDe(){if(nH)return M9;nH=1;var n=mDe(),e=pDe(),t=e(n);return M9=t,M9}var w9,iH;function yDe(){if(iH)return w9;iH=1;var n=vO(),e=dDe(),t=gDe();function i(r,o){return t(e(r,o,n),r+"")}return w9=i,w9}var S9,rH;function vDe(){if(rH)return S9;rH=1;var n=YM(),e=i3(),t=cF(),i=Rm();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return S9=r,S9}var E9,oH;function CDe(){if(oH)return E9;oH=1;var n=yDe(),e=vDe();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,d=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,d&&e(o[0],o[1],d)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var p=o[s];p&&i(r,p,s,c)}return r})}return E9=t,E9}var B9,sH;function nae(){if(sH)return B9;sH=1;var n=ADe(),e=CDe(),t=e(function(i,r,o){n(i,r,o)});return B9=t,B9}var O9={},l2={},hS={},aH;function bDe(){return aH||(aH=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,p=c-(o.getBoundingClientRect().left+window.pageXOffset),v=d-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var M=void 0;if(v<0?M=0:v>a?M=1:M=Math.round(v*100/a)/100,t.a!==M)return{h:t.h,s:t.s,l:t.l,a:M,source:"rgb"}}else{var E=void 0;if(p<0?E=0:p>s?E=1:E=Math.round(p*100/s)/100,r!==E)return{h:t.h,s:t.s,l:t.l,a:E,source:"rgb"}}return null}),hS}var u2={},W3={},lH;function _De(){if(lH)return W3;lH=1,Object.defineProperty(W3,"__esModule",{value:!0});var n={},e=W3.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return W3.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},W3}var uH;function wF(){if(uH)return u2;uH=1,Object.defineProperty(u2,"__esModule",{value:!0}),u2.Checkboard=void 0;var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var M=arguments[v];for(var E in M)Object.prototype.hasOwnProperty.call(M,E)&&(p[E]=M[E])}return p},e=wa(),t=c(e),i=Jp(),r=c(i),o=_De(),s=a(o);function a(p){if(p&&p.__esModule)return p;var v={};if(p!=null)for(var M in p)Object.prototype.hasOwnProperty.call(p,M)&&(v[M]=p[M]);return v.default=p,v}function c(p){return p&&p.__esModule?p:{default:p}}var d=u2.Checkboard=function(v){var M=v.white,E=v.grey,P=v.size,U=v.renderers,z=v.borderRadius,V=v.boxShadow,Z=v.children,X=(0,r.default)({default:{grid:{borderRadius:z,boxShadow:V,absolute:"0px 0px 0px 0px",background:"url("+s.get(M,E,P,U.canvas)+") center left"}}});return(0,e.isValidElement)(Z)?t.default.cloneElement(Z,n({},Z.props,{style:n({},Z.props.style,X.grid)})):t.default.createElement("div",{style:X.grid})};return d.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},u2.default=d,u2}var cH;function xDe(){if(cH)return l2;cH=1,Object.defineProperty(l2,"__esModule",{value:!0}),l2.Alpha=void 0;var n=Object.assign||function(z){for(var V=1;V<arguments.length;V++){var Z=arguments[V];for(var X in Z)Object.prototype.hasOwnProperty.call(Z,X)&&(z[X]=Z[X])}return z},e=(function(){function z(V,Z){for(var X=0;X<Z.length;X++){var re=Z[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(V,re.key,re)}}return function(V,Z,X){return Z&&z(V.prototype,Z),X&&z(V,X),V}})(),t=wa(),i=v(t),r=Jp(),o=v(r),s=bDe(),a=p(s),c=wF(),d=v(c);function p(z){if(z&&z.__esModule)return z;var V={};if(z!=null)for(var Z in z)Object.prototype.hasOwnProperty.call(z,Z)&&(V[Z]=z[Z]);return V.default=z,V}function v(z){return z&&z.__esModule?z:{default:z}}function M(z,V){if(!(z instanceof V))throw new TypeError("Cannot call a class as a function")}function E(z,V){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:z}function P(z,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);z.prototype=Object.create(V&&V.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(z,V):z.__proto__=V)}var U=l2.Alpha=(function(z){P(V,z);function V(){var Z,X,re,ee;M(this,V);for(var ne=arguments.length,q=Array(ne),le=0;le<ne;le++)q[le]=arguments[le];return ee=(X=(re=E(this,(Z=V.__proto__||Object.getPrototypeOf(V)).call.apply(Z,[this].concat(q))),re),re.handleChange=function(ue){var ve=a.calculateChange(ue,re.props.hsl,re.props.direction,re.props.a,re.container);ve&&typeof re.props.onChange=="function"&&re.props.onChange(ve,ue)},re.handleMouseDown=function(ue){re.handleChange(ue),window.addEventListener("mousemove",re.handleChange),window.addEventListener("mouseup",re.handleMouseUp)},re.handleMouseUp=function(){re.unbindEventListeners()},re.unbindEventListeners=function(){window.removeEventListener("mousemove",re.handleChange),window.removeEventListener("mouseup",re.handleMouseUp)},X),E(re,ee)}return e(V,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var X=this,re=this.props.rgb,ee=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+re.r+","+re.g+","+re.b+`, 0) 0%,
           rgba(`+re.r+","+re.g+","+re.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:re.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+re.r+","+re.g+","+re.b+`, 0) 0%,
           rgba(`+re.r+","+re.g+","+re.b+", 1) 100%)"},pointer:{left:0,top:re.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:ee.alpha},i.default.createElement("div",{style:ee.checkboard},i.default.createElement(d.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:ee.gradient}),i.default.createElement("div",{style:ee.container,ref:function(q){return X.container=q},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:ee.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:ee.slider}))))}}]),V})(t.PureComponent||t.Component);return l2.default=U,l2}var c2={},AH;function MDe(){if(AH)return c2;AH=1,Object.defineProperty(c2,"__esModule",{value:!0}),c2.EditableInput=void 0;var n=(function(){function Z(X,re){for(var ee=0;ee<re.length;ee++){var ne=re[ee];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(X,ne.key,ne)}}return function(X,re,ee){return re&&Z(X.prototype,re),ee&&Z(X,ee),X}})(),e=wa(),t=o(e),i=Jp(),r=o(i);function o(Z){return Z&&Z.__esModule?Z:{default:Z}}function s(Z,X,re){return X in Z?Object.defineProperty(Z,X,{value:re,enumerable:!0,configurable:!0,writable:!0}):Z[X]=re,Z}function a(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}function c(Z,X){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Z}function d(Z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Z.prototype=Object.create(X&&X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,X):Z.__proto__=X)}var p=1,v=38,M=40,E=[v,M],P=function(X){return E.indexOf(X)>-1},U=function(X){return Number(String(X).replace(/%/g,""))},z=1,V=c2.EditableInput=(function(Z){d(X,Z);function X(re){a(this,X);var ee=c(this,(X.__proto__||Object.getPrototypeOf(X)).call(this));return ee.handleBlur=function(){ee.state.blurValue&&ee.setState({value:ee.state.blurValue,blurValue:null})},ee.handleChange=function(ne){ee.setUpdatedValue(ne.target.value,ne)},ee.handleKeyDown=function(ne){var q=U(ne.target.value);if(!isNaN(q)&&P(ne.keyCode)){var le=ee.getArrowOffset(),ue=ne.keyCode===v?q+le:q-le;ee.setUpdatedValue(ue,ne)}},ee.handleDrag=function(ne){if(ee.props.dragLabel){var q=Math.round(ee.props.value+ne.movementX);q>=0&&q<=ee.props.dragMax&&ee.props.onChange&&ee.props.onChange(ee.getValueObjectWithLabel(q),ne)}},ee.handleMouseDown=function(ne){ee.props.dragLabel&&(ne.preventDefault(),ee.handleDrag(ne),window.addEventListener("mousemove",ee.handleDrag),window.addEventListener("mouseup",ee.handleMouseUp))},ee.handleMouseUp=function(){ee.unbindEventListeners()},ee.unbindEventListeners=function(){window.removeEventListener("mousemove",ee.handleDrag),window.removeEventListener("mouseup",ee.handleMouseUp)},ee.state={value:String(re.value).toUpperCase(),blurValue:String(re.value).toUpperCase()},ee.inputId="rc-editable-input-"+z++,ee}return n(X,[{key:"componentDidUpdate",value:function(ee,ne){this.props.value!==this.state.value&&(ee.value!==this.props.value||ne.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(ee){return s({},this.props.label,ee)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||p}},{key:"setUpdatedValue",value:function(ee,ne){var q=this.props.label?this.getValueObjectWithLabel(ee):ee;this.props.onChange&&this.props.onChange(q,ne),this.setState({value:ee})}},{key:"render",value:function(){var ee=this,ne=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:ne.wrap},t.default.createElement("input",{id:this.inputId,style:ne.input,ref:function(le){return ee.input=le},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:ne.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),X})(e.PureComponent||e.Component);return c2.default=V,c2}var A2={},dS={},hH;function wDe(){return hH||(hH=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,d=a-(r.getBoundingClientRect().left+window.pageXOffset),p=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var v=void 0;if(p<0)v=359;else if(p>s)v=0;else{var M=-(p*100/s)+100;v=360*M/100}if(i.h!==v)return{h:v,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var E=void 0;if(d<0)E=0;else if(d>o)E=359;else{var P=d*100/o;E=360*P/100}if(i.h!==E)return{h:E,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),dS}var dH;function SDe(){if(dH)return A2;dH=1,Object.defineProperty(A2,"__esModule",{value:!0}),A2.Hue=void 0;var n=(function(){function E(P,U){for(var z=0;z<U.length;z++){var V=U[z];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(P,V.key,V)}}return function(P,U,z){return U&&E(P.prototype,U),z&&E(P,z),P}})(),e=wa(),t=c(e),i=Jp(),r=c(i),o=wDe(),s=a(o);function a(E){if(E&&E.__esModule)return E;var P={};if(E!=null)for(var U in E)Object.prototype.hasOwnProperty.call(E,U)&&(P[U]=E[U]);return P.default=E,P}function c(E){return E&&E.__esModule?E:{default:E}}function d(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}function p(E,P){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:E}function v(E,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);E.prototype=Object.create(P&&P.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(E,P):E.__proto__=P)}var M=A2.Hue=(function(E){v(P,E);function P(){var U,z,V,Z;d(this,P);for(var X=arguments.length,re=Array(X),ee=0;ee<X;ee++)re[ee]=arguments[ee];return Z=(z=(V=p(this,(U=P.__proto__||Object.getPrototypeOf(P)).call.apply(U,[this].concat(re))),V),V.handleChange=function(ne){var q=s.calculateChange(ne,V.props.direction,V.props.hsl,V.container);q&&typeof V.props.onChange=="function"&&V.props.onChange(q,ne)},V.handleMouseDown=function(ne){V.handleChange(ne),window.addEventListener("mousemove",V.handleChange),window.addEventListener("mouseup",V.handleMouseUp)},V.handleMouseUp=function(){V.unbindEventListeners()},z),p(V,Z)}return n(P,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var z=this,V=this.props.direction,Z=V===void 0?"horizontal":V,X=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Z==="vertical"});return t.default.createElement("div",{style:X.hue},t.default.createElement("div",{className:"hue-"+Z,style:X.container,ref:function(ee){return z.container=ee},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:X.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:X.slider}))))}}]),P})(e.PureComponent||e.Component);return A2.default=M,A2}var h2={},fH;function EDe(){if(fH)return h2;fH=1,Object.defineProperty(h2,"__esModule",{value:!0}),h2.Raised=void 0;var n=wa(),e=c(n),t=J1(),i=c(t),r=Jp(),o=c(r),s=nae(),a=c(s);function c(p){return p&&p.__esModule?p:{default:p}}var d=h2.Raised=function(v){var M=v.zDepth,E=v.radius,P=v.background,U=v.children,z=v.styles,V=z===void 0?{}:z,Z=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+M+"px "+M*4+"px rgba(0,0,0,.24)",borderRadius:E,background:P}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},V),{"zDepth-1":M===1});return e.default.createElement("div",{style:Z.wrap},e.default.createElement("div",{style:Z.bg}),e.default.createElement("div",{style:Z.content},U))};return d.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},d.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},h2.default=d,h2}var d2={},I9,mH;function BDe(){if(mH)return I9;mH=1;var n=Xp(),e=function(){return n.Date.now()};return I9=e,I9}var T9,pH;function ODe(){if(pH)return T9;pH=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return T9=e,T9}var k9,gH;function IDe(){if(gH)return k9;gH=1;var n=ODe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return k9=t,k9}var D9,yH;function TDe(){if(yH)return D9;yH=1;var n=IDe(),e=Rm(),t=SO(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(d){if(typeof d=="number")return d;if(t(d))return i;if(e(d)){var p=typeof d.valueOf=="function"?d.valueOf():d;d=e(p)?p+"":p}if(typeof d!="string")return d===0?d:+d;d=n(d);var v=o.test(d);return v||s.test(d)?a(d.slice(2),v?2:8):r.test(d)?i:+d}return D9=c,D9}var R9,vH;function iae(){if(vH)return R9;vH=1;var n=Rm(),e=BDe(),t=TDe(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,d){var p,v,M,E,P,U,z=0,V=!1,Z=!1,X=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(d)&&(V=!!d.leading,Z="maxWait"in d,M=Z?r(t(d.maxWait)||0,c):M,X="trailing"in d?!!d.trailing:X);function re(Ce){var Oe=p,Fe=v;return p=v=void 0,z=Ce,E=a.apply(Fe,Oe),E}function ee(Ce){return z=Ce,P=setTimeout(le,c),V?re(Ce):E}function ne(Ce){var Oe=Ce-U,Fe=Ce-z,Ee=c-Oe;return Z?o(Ee,M-Fe):Ee}function q(Ce){var Oe=Ce-U,Fe=Ce-z;return U===void 0||Oe>=c||Oe<0||Z&&Fe>=M}function le(){var Ce=e();if(q(Ce))return ue(Ce);P=setTimeout(le,ne(Ce))}function ue(Ce){return P=void 0,X&&p?re(Ce):(p=v=void 0,E)}function ve(){P!==void 0&&clearTimeout(P),z=0,p=U=v=P=void 0}function pe(){return P===void 0?E:ue(e())}function Be(){var Ce=e(),Oe=q(Ce);if(p=arguments,v=this,U=Ce,Oe){if(P===void 0)return ee(U);if(Z)return clearTimeout(P),P=setTimeout(le,c),re(U)}return P===void 0&&(P=setTimeout(le,c)),E}return Be.cancel=ve,Be.flush=pe,Be}return R9=s,R9}var P9,CH;function kDe(){if(CH)return P9;CH=1;var n=iae(),e=Rm(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return P9=i,P9}var fS={},bH;function DDe(){return bH||(bH=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,d=a-(i.getBoundingClientRect().left+window.pageXOffset),p=c-(i.getBoundingClientRect().top+window.pageYOffset);d<0?d=0:d>o&&(d=o),p<0?p=0:p>s&&(p=s);var v=d/o,M=1-p/s;return{h:t.h,s:v,v:M,a:t.a,source:"hsv"}}),fS}var _H;function RDe(){if(_H)return d2;_H=1,Object.defineProperty(d2,"__esModule",{value:!0}),d2.Saturation=void 0;var n=(function(){function U(z,V){for(var Z=0;Z<V.length;Z++){var X=V[Z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(z,X.key,X)}}return function(z,V,Z){return V&&U(z.prototype,V),Z&&U(z,Z),z}})(),e=wa(),t=p(e),i=Jp(),r=p(i),o=kDe(),s=p(o),a=DDe(),c=d(a);function d(U){if(U&&U.__esModule)return U;var z={};if(U!=null)for(var V in U)Object.prototype.hasOwnProperty.call(U,V)&&(z[V]=U[V]);return z.default=U,z}function p(U){return U&&U.__esModule?U:{default:U}}function v(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}function M(U,z){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:U}function E(U,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);U.prototype=Object.create(z&&z.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(U,z):U.__proto__=z)}var P=d2.Saturation=(function(U){E(z,U);function z(V){v(this,z);var Z=M(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,V));return Z.handleChange=function(X){typeof Z.props.onChange=="function"&&Z.throttle(Z.props.onChange,c.calculateChange(X,Z.props.hsl,Z.container),X)},Z.handleMouseDown=function(X){Z.handleChange(X);var re=Z.getContainerRenderWindow();re.addEventListener("mousemove",Z.handleChange),re.addEventListener("mouseup",Z.handleMouseUp)},Z.handleMouseUp=function(){Z.unbindEventListeners()},Z.throttle=(0,s.default)(function(X,re,ee){X(re,ee)},50),Z}return n(z,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var Z=this.container,X=window;!X.document.contains(Z)&&X.parent!==X;)X=X.parent;return X}},{key:"unbindEventListeners",value:function(){var Z=this.getContainerRenderWindow();Z.removeEventListener("mousemove",this.handleChange),Z.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Z=this,X=this.props.style||{},re=X.color,ee=X.white,ne=X.black,q=X.pointer,le=X.circle,ue=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:re,white:ee,black:ne,pointer:q,circle:le}},{custom:!!this.props.style});return t.default.createElement("div",{style:ue.color,ref:function(pe){return Z.container=pe},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ue.white,className:"saturation-white"},t.default.createElement("div",{style:ue.black,className:"saturation-black"}),t.default.createElement("div",{style:ue.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ue.circle}))))}}]),z})(e.PureComponent||e.Component);return d2.default=P,d2}var f2={},Ih={},U9,xH;function PDe(){if(xH)return U9;xH=1;var n=qse(),e=Qse(),t=Ise(),i=If();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return U9=r,U9}var L9,MH;function UDe(){return MH||(MH=1,L9=PDe()),L9}var $S={exports:{}},LDe=$S.exports,wH;function KDe(){return wH||(wH=1,(function(n,e){(function(t,i){n.exports=i()})(LDe,(function(){function t(Ue){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},t(Ue)}var i=/^\s+/,r=/\s+$/;function o(Ue,ke){if(Ue=Ue||"",ke=ke||{},Ue instanceof o)return Ue;if(!(this instanceof o))return new o(Ue,ke);var Te=s(Ue);this._originalInput=Ue,this._r=Te.r,this._g=Te.g,this._b=Te.b,this._a=Te.a,this._roundA=Math.round(100*this._a)/100,this._format=ke.format||Te.format,this._gradientType=ke.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Te.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ke=this.toRgb();return(ke.r*299+ke.g*587+ke.b*114)/1e3},getLuminance:function(){var ke=this.toRgb(),Te,He,Ct,vt,wt,Ft;return Te=ke.r/255,He=ke.g/255,Ct=ke.b/255,Te<=.03928?vt=Te/12.92:vt=Math.pow((Te+.055)/1.055,2.4),He<=.03928?wt=He/12.92:wt=Math.pow((He+.055)/1.055,2.4),Ct<=.03928?Ft=Ct/12.92:Ft=Math.pow((Ct+.055)/1.055,2.4),.2126*vt+.7152*wt+.0722*Ft},setAlpha:function(ke){return this._a=Oe(ke),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var ke=p(this._r,this._g,this._b);return{h:ke.h*360,s:ke.s,v:ke.v,a:this._a}},toHsvString:function(){var ke=p(this._r,this._g,this._b),Te=Math.round(ke.h*360),He=Math.round(ke.s*100),Ct=Math.round(ke.v*100);return this._a==1?"hsv("+Te+", "+He+"%, "+Ct+"%)":"hsva("+Te+", "+He+"%, "+Ct+"%, "+this._roundA+")"},toHsl:function(){var ke=c(this._r,this._g,this._b);return{h:ke.h*360,s:ke.s,l:ke.l,a:this._a}},toHslString:function(){var ke=c(this._r,this._g,this._b),Te=Math.round(ke.h*360),He=Math.round(ke.s*100),Ct=Math.round(ke.l*100);return this._a==1?"hsl("+Te+", "+He+"%, "+Ct+"%)":"hsla("+Te+", "+He+"%, "+Ct+"%, "+this._roundA+")"},toHex:function(ke){return M(this._r,this._g,this._b,ke)},toHexString:function(ke){return"#"+this.toHex(ke)},toHex8:function(ke){return E(this._r,this._g,this._b,this._a,ke)},toHex8String:function(ke){return"#"+this.toHex8(ke)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Fe(this._r,255)*100)+"%",g:Math.round(Fe(this._g,255)*100)+"%",b:Math.round(Fe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Fe(this._r,255)*100)+"%, "+Math.round(Fe(this._g,255)*100)+"%, "+Math.round(Fe(this._b,255)*100)+"%)":"rgba("+Math.round(Fe(this._r,255)*100)+"%, "+Math.round(Fe(this._g,255)*100)+"%, "+Math.round(Fe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Be[M(this._r,this._g,this._b,!0)]||!1},toFilter:function(ke){var Te="#"+P(this._r,this._g,this._b,this._a),He=Te,Ct=this._gradientType?"GradientType = 1, ":"";if(ke){var vt=o(ke);He="#"+P(vt._r,vt._g,vt._b,vt._a)}return"progid:DXImageTransform.Microsoft.gradient("+Ct+"startColorstr="+Te+",endColorstr="+He+")"},toString:function(ke){var Te=!!ke;ke=ke||this._format;var He=!1,Ct=this._a<1&&this._a>=0,vt=!Te&&Ct&&(ke==="hex"||ke==="hex6"||ke==="hex3"||ke==="hex4"||ke==="hex8"||ke==="name");return vt?ke==="name"&&this._a===0?this.toName():this.toRgbString():(ke==="rgb"&&(He=this.toRgbString()),ke==="prgb"&&(He=this.toPercentageRgbString()),(ke==="hex"||ke==="hex6")&&(He=this.toHexString()),ke==="hex3"&&(He=this.toHexString(!0)),ke==="hex4"&&(He=this.toHex8String(!0)),ke==="hex8"&&(He=this.toHex8String()),ke==="name"&&(He=this.toName()),ke==="hsl"&&(He=this.toHslString()),ke==="hsv"&&(He=this.toHsvString()),He||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(ke,Te){var He=ke.apply(null,[this].concat([].slice.call(Te)));return this._r=He._r,this._g=He._g,this._b=He._b,this.setAlpha(He._a),this},lighten:function(){return this._applyModification(Z,arguments)},brighten:function(){return this._applyModification(X,arguments)},darken:function(){return this._applyModification(re,arguments)},desaturate:function(){return this._applyModification(U,arguments)},saturate:function(){return this._applyModification(z,arguments)},greyscale:function(){return this._applyModification(V,arguments)},spin:function(){return this._applyModification(ee,arguments)},_applyCombination:function(ke,Te){return ke.apply(null,[this].concat([].slice.call(Te)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination(ne,arguments)},monochromatic:function(){return this._applyCombination(ve,arguments)},splitcomplement:function(){return this._applyCombination(le,arguments)},triad:function(){return this._applyCombination(q,[3])},tetrad:function(){return this._applyCombination(q,[4])}},o.fromRatio=function(Ue,ke){if(t(Ue)=="object"){var Te={};for(var He in Ue)Ue.hasOwnProperty(He)&&(He==="a"?Te[He]=Ue[He]:Te[He]=De(Ue[He]));Ue=Te}return o(Ue,ke)};function s(Ue){var ke={r:0,g:0,b:0},Te=1,He=null,Ct=null,vt=null,wt=!1,Ft=!1;return typeof Ue=="string"&&(Ue=Et(Ue)),t(Ue)=="object"&&(ot(Ue.r)&&ot(Ue.g)&&ot(Ue.b)?(ke=a(Ue.r,Ue.g,Ue.b),wt=!0,Ft=String(Ue.r).substr(-1)==="%"?"prgb":"rgb"):ot(Ue.h)&&ot(Ue.s)&&ot(Ue.v)?(He=De(Ue.s),Ct=De(Ue.v),ke=v(Ue.h,He,Ct),wt=!0,Ft="hsv"):ot(Ue.h)&&ot(Ue.s)&&ot(Ue.l)&&(He=De(Ue.s),vt=De(Ue.l),ke=d(Ue.h,He,vt),wt=!0,Ft="hsl"),Ue.hasOwnProperty("a")&&(Te=Ue.a)),Te=Oe(Te),{ok:wt,format:Ue.format||Ft,r:Math.min(255,Math.max(ke.r,0)),g:Math.min(255,Math.max(ke.g,0)),b:Math.min(255,Math.max(ke.b,0)),a:Te}}function a(Ue,ke,Te){return{r:Fe(Ue,255)*255,g:Fe(ke,255)*255,b:Fe(Te,255)*255}}function c(Ue,ke,Te){Ue=Fe(Ue,255),ke=Fe(ke,255),Te=Fe(Te,255);var He=Math.max(Ue,ke,Te),Ct=Math.min(Ue,ke,Te),vt,wt,Ft=(He+Ct)/2;if(He==Ct)vt=wt=0;else{var Pt=He-Ct;switch(wt=Ft>.5?Pt/(2-He-Ct):Pt/(He+Ct),He){case Ue:vt=(ke-Te)/Pt+(ke<Te?6:0);break;case ke:vt=(Te-Ue)/Pt+2;break;case Te:vt=(Ue-ke)/Pt+4;break}vt/=6}return{h:vt,s:wt,l:Ft}}function d(Ue,ke,Te){var He,Ct,vt;Ue=Fe(Ue,360),ke=Fe(ke,100),Te=Fe(Te,100);function wt(nn,Kn,Wn){return Wn<0&&(Wn+=1),Wn>1&&(Wn-=1),Wn<1/6?nn+(Kn-nn)*6*Wn:Wn<1/2?Kn:Wn<2/3?nn+(Kn-nn)*(2/3-Wn)*6:nn}if(ke===0)He=Ct=vt=Te;else{var Ft=Te<.5?Te*(1+ke):Te+ke-Te*ke,Pt=2*Te-Ft;He=wt(Pt,Ft,Ue+1/3),Ct=wt(Pt,Ft,Ue),vt=wt(Pt,Ft,Ue-1/3)}return{r:He*255,g:Ct*255,b:vt*255}}function p(Ue,ke,Te){Ue=Fe(Ue,255),ke=Fe(ke,255),Te=Fe(Te,255);var He=Math.max(Ue,ke,Te),Ct=Math.min(Ue,ke,Te),vt,wt,Ft=He,Pt=He-Ct;if(wt=He===0?0:Pt/He,He==Ct)vt=0;else{switch(He){case Ue:vt=(ke-Te)/Pt+(ke<Te?6:0);break;case ke:vt=(Te-Ue)/Pt+2;break;case Te:vt=(Ue-ke)/Pt+4;break}vt/=6}return{h:vt,s:wt,v:Ft}}function v(Ue,ke,Te){Ue=Fe(Ue,360)*6,ke=Fe(ke,100),Te=Fe(Te,100);var He=Math.floor(Ue),Ct=Ue-He,vt=Te*(1-ke),wt=Te*(1-Ct*ke),Ft=Te*(1-(1-Ct)*ke),Pt=He%6,nn=[Te,wt,vt,vt,Ft,Te][Pt],Kn=[Ft,Te,Te,wt,vt,vt][Pt],Wn=[vt,vt,Ft,Te,Te,wt][Pt];return{r:nn*255,g:Kn*255,b:Wn*255}}function M(Ue,ke,Te,He){var Ct=[Pe(Math.round(Ue).toString(16)),Pe(Math.round(ke).toString(16)),Pe(Math.round(Te).toString(16))];return He&&Ct[0].charAt(0)==Ct[0].charAt(1)&&Ct[1].charAt(0)==Ct[1].charAt(1)&&Ct[2].charAt(0)==Ct[2].charAt(1)?Ct[0].charAt(0)+Ct[1].charAt(0)+Ct[2].charAt(0):Ct.join("")}function E(Ue,ke,Te,He,Ct){var vt=[Pe(Math.round(Ue).toString(16)),Pe(Math.round(ke).toString(16)),Pe(Math.round(Te).toString(16)),Pe(Xe(He))];return Ct&&vt[0].charAt(0)==vt[0].charAt(1)&&vt[1].charAt(0)==vt[1].charAt(1)&&vt[2].charAt(0)==vt[2].charAt(1)&&vt[3].charAt(0)==vt[3].charAt(1)?vt[0].charAt(0)+vt[1].charAt(0)+vt[2].charAt(0)+vt[3].charAt(0):vt.join("")}function P(Ue,ke,Te,He){var Ct=[Pe(Xe(He)),Pe(Math.round(Ue).toString(16)),Pe(Math.round(ke).toString(16)),Pe(Math.round(Te).toString(16))];return Ct.join("")}o.equals=function(Ue,ke){return!Ue||!ke?!1:o(Ue).toRgbString()==o(ke).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function U(Ue,ke){ke=ke===0?0:ke||10;var Te=o(Ue).toHsl();return Te.s-=ke/100,Te.s=Ee(Te.s),o(Te)}function z(Ue,ke){ke=ke===0?0:ke||10;var Te=o(Ue).toHsl();return Te.s+=ke/100,Te.s=Ee(Te.s),o(Te)}function V(Ue){return o(Ue).desaturate(100)}function Z(Ue,ke){ke=ke===0?0:ke||10;var Te=o(Ue).toHsl();return Te.l+=ke/100,Te.l=Ee(Te.l),o(Te)}function X(Ue,ke){ke=ke===0?0:ke||10;var Te=o(Ue).toRgb();return Te.r=Math.max(0,Math.min(255,Te.r-Math.round(255*-(ke/100)))),Te.g=Math.max(0,Math.min(255,Te.g-Math.round(255*-(ke/100)))),Te.b=Math.max(0,Math.min(255,Te.b-Math.round(255*-(ke/100)))),o(Te)}function re(Ue,ke){ke=ke===0?0:ke||10;var Te=o(Ue).toHsl();return Te.l-=ke/100,Te.l=Ee(Te.l),o(Te)}function ee(Ue,ke){var Te=o(Ue).toHsl(),He=(Te.h+ke)%360;return Te.h=He<0?360+He:He,o(Te)}function ne(Ue){var ke=o(Ue).toHsl();return ke.h=(ke.h+180)%360,o(ke)}function q(Ue,ke){if(isNaN(ke)||ke<=0)throw new Error("Argument to polyad must be a positive number");for(var Te=o(Ue).toHsl(),He=[o(Ue)],Ct=360/ke,vt=1;vt<ke;vt++)He.push(o({h:(Te.h+vt*Ct)%360,s:Te.s,l:Te.l}));return He}function le(Ue){var ke=o(Ue).toHsl(),Te=ke.h;return[o(Ue),o({h:(Te+72)%360,s:ke.s,l:ke.l}),o({h:(Te+216)%360,s:ke.s,l:ke.l})]}function ue(Ue,ke,Te){ke=ke||6,Te=Te||30;var He=o(Ue).toHsl(),Ct=360/Te,vt=[o(Ue)];for(He.h=(He.h-(Ct*ke>>1)+720)%360;--ke;)He.h=(He.h+Ct)%360,vt.push(o(He));return vt}function ve(Ue,ke){ke=ke||6;for(var Te=o(Ue).toHsv(),He=Te.h,Ct=Te.s,vt=Te.v,wt=[],Ft=1/ke;ke--;)wt.push(o({h:He,s:Ct,v:vt})),vt=(vt+Ft)%1;return wt}o.mix=function(Ue,ke,Te){Te=Te===0?0:Te||50;var He=o(Ue).toRgb(),Ct=o(ke).toRgb(),vt=Te/100,wt={r:(Ct.r-He.r)*vt+He.r,g:(Ct.g-He.g)*vt+He.g,b:(Ct.b-He.b)*vt+He.b,a:(Ct.a-He.a)*vt+He.a};return o(wt)},o.readability=function(Ue,ke){var Te=o(Ue),He=o(ke);return(Math.max(Te.getLuminance(),He.getLuminance())+.05)/(Math.min(Te.getLuminance(),He.getLuminance())+.05)},o.isReadable=function(Ue,ke,Te){var He=o.readability(Ue,ke),Ct,vt;switch(vt=!1,Ct=Rt(Te),Ct.level+Ct.size){case"AAsmall":case"AAAlarge":vt=He>=4.5;break;case"AAlarge":vt=He>=3;break;case"AAAsmall":vt=He>=7;break}return vt},o.mostReadable=function(Ue,ke,Te){var He=null,Ct=0,vt,wt,Ft,Pt;Te=Te||{},wt=Te.includeFallbackColors,Ft=Te.level,Pt=Te.size;for(var nn=0;nn<ke.length;nn++)vt=o.readability(Ue,ke[nn]),vt>Ct&&(Ct=vt,He=o(ke[nn]));return o.isReadable(Ue,He,{level:Ft,size:Pt})||!wt?He:(Te.includeFallbackColors=!1,o.mostReadable(Ue,["#fff","#000"],Te))};var pe=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Be=o.hexNames=Ce(pe);function Ce(Ue){var ke={};for(var Te in Ue)Ue.hasOwnProperty(Te)&&(ke[Ue[Te]]=Te);return ke}function Oe(Ue){return Ue=parseFloat(Ue),(isNaN(Ue)||Ue<0||Ue>1)&&(Ue=1),Ue}function Fe(Ue,ke){ut(Ue)&&(Ue="100%");var Te=mt(Ue);return Ue=Math.min(ke,Math.max(0,parseFloat(Ue))),Te&&(Ue=parseInt(Ue*ke,10)/100),Math.abs(Ue-ke)<1e-6?1:Ue%ke/parseFloat(ke)}function Ee(Ue){return Math.min(1,Math.max(0,Ue))}function Ve(Ue){return parseInt(Ue,16)}function ut(Ue){return typeof Ue=="string"&&Ue.indexOf(".")!=-1&&parseFloat(Ue)===1}function mt(Ue){return typeof Ue=="string"&&Ue.indexOf("%")!=-1}function Pe(Ue){return Ue.length==1?"0"+Ue:""+Ue}function De(Ue){return Ue<=1&&(Ue=Ue*100+"%"),Ue}function Xe(Ue){return Math.round(parseFloat(Ue)*255).toString(16)}function Ke(Ue){return Ve(Ue)/255}var Bt=(function(){var Ue="[-\\+]?\\d+%?",ke="[-\\+]?\\d*\\.\\d+%?",Te="(?:"+ke+")|(?:"+Ue+")",He="[\\s|\\(]+("+Te+")[,|\\s]+("+Te+")[,|\\s]+("+Te+")\\s*\\)?",Ct="[\\s|\\(]+("+Te+")[,|\\s]+("+Te+")[,|\\s]+("+Te+")[,|\\s]+("+Te+")\\s*\\)?";return{CSS_UNIT:new RegExp(Te),rgb:new RegExp("rgb"+He),rgba:new RegExp("rgba"+Ct),hsl:new RegExp("hsl"+He),hsla:new RegExp("hsla"+Ct),hsv:new RegExp("hsv"+He),hsva:new RegExp("hsva"+Ct),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function ot(Ue){return!!Bt.CSS_UNIT.exec(Ue)}function Et(Ue){Ue=Ue.replace(i,"").replace(r,"").toLowerCase();var ke=!1;if(pe[Ue])Ue=pe[Ue],ke=!0;else if(Ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Te;return(Te=Bt.rgb.exec(Ue))?{r:Te[1],g:Te[2],b:Te[3]}:(Te=Bt.rgba.exec(Ue))?{r:Te[1],g:Te[2],b:Te[3],a:Te[4]}:(Te=Bt.hsl.exec(Ue))?{h:Te[1],s:Te[2],l:Te[3]}:(Te=Bt.hsla.exec(Ue))?{h:Te[1],s:Te[2],l:Te[3],a:Te[4]}:(Te=Bt.hsv.exec(Ue))?{h:Te[1],s:Te[2],v:Te[3]}:(Te=Bt.hsva.exec(Ue))?{h:Te[1],s:Te[2],v:Te[3],a:Te[4]}:(Te=Bt.hex8.exec(Ue))?{r:Ve(Te[1]),g:Ve(Te[2]),b:Ve(Te[3]),a:Ke(Te[4]),format:ke?"name":"hex8"}:(Te=Bt.hex6.exec(Ue))?{r:Ve(Te[1]),g:Ve(Te[2]),b:Ve(Te[3]),format:ke?"name":"hex"}:(Te=Bt.hex4.exec(Ue))?{r:Ve(Te[1]+""+Te[1]),g:Ve(Te[2]+""+Te[2]),b:Ve(Te[3]+""+Te[3]),a:Ke(Te[4]+""+Te[4]),format:ke?"name":"hex8"}:(Te=Bt.hex3.exec(Ue))?{r:Ve(Te[1]+""+Te[1]),g:Ve(Te[2]+""+Te[2]),b:Ve(Te[3]+""+Te[3]),format:ke?"name":"hex"}:!1}function Rt(Ue){var ke,Te;return Ue=Ue||{level:"AA",size:"small"},ke=(Ue.level||"AA").toUpperCase(),Te=(Ue.size||"small").toLowerCase(),ke!=="AA"&&ke!=="AAA"&&(ke="AA"),Te!=="small"&&Te!=="large"&&(Te="small"),{level:ke,size:Te}}return o}))})($S)),$S.exports}var SH;function rae(){if(SH)return Ih;SH=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.isvalidColorString=Ih.red=Ih.getContrastingColor=Ih.isValidHex=Ih.toState=Ih.simpleCheckForValidColor=void 0;var n=UDe(),e=r(n),t=KDe(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}Ih.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],d=0,p=0;return(0,e.default)(c,function(v){if(a[v]&&(d+=1,isNaN(a[v])||(p+=1),v==="s"||v==="l")){var M=/^\d+%$/;M.test(a[v])&&(p+=1)}}),d===p?a:!1};var o=Ih.toState=function(a,c){var d=a.hex?(0,i.default)(a.hex):(0,i.default)(a),p=d.toHsl(),v=d.toHsv(),M=d.toRgb(),E=d.toHex();p.s===0&&(p.h=c||0,v.h=c||0);var P=E==="000000"&&M.a===0;return{hsl:p,hex:P?"transparent":"#"+E,rgb:M,hsv:v,oldHue:a.h||c||p.h,source:a.source}};return Ih.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},Ih.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var d=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return d>=128?"#000":"#fff"},Ih.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Ih.isvalidColorString=function(a,c){var d=a.replace("","");return(0,i.default)(c+" ("+d+")")._ok},Ih}var EH;function FDe(){if(EH)return f2;EH=1,Object.defineProperty(f2,"__esModule",{value:!0}),f2.ColorWrap=void 0;var n=Object.assign||function(P){for(var U=1;U<arguments.length;U++){var z=arguments[U];for(var V in z)Object.prototype.hasOwnProperty.call(z,V)&&(P[V]=z[V])}return P},e=(function(){function P(U,z){for(var V=0;V<z.length;V++){var Z=z[V];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}return function(U,z,V){return z&&P(U.prototype,z),V&&P(U,V),U}})(),t=wa(),i=d(t),r=iae(),o=d(r),s=rae(),a=c(s);function c(P){if(P&&P.__esModule)return P;var U={};if(P!=null)for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(U[z]=P[z]);return U.default=P,U}function d(P){return P&&P.__esModule?P:{default:P}}function p(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function v(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function M(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var E=f2.ColorWrap=function(U){var z=(function(V){M(Z,V);function Z(X){p(this,Z);var re=v(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this));return re.handleChange=function(ee,ne){var q=a.simpleCheckForValidColor(ee);if(q){var le=a.toState(ee,ee.h||re.state.oldHue);re.setState(le),re.props.onChangeComplete&&re.debounce(re.props.onChangeComplete,le,ne),re.props.onChange&&re.props.onChange(le,ne)}},re.handleSwatchHover=function(ee,ne){var q=a.simpleCheckForValidColor(ee);if(q){var le=a.toState(ee,ee.h||re.state.oldHue);re.props.onSwatchHover&&re.props.onSwatchHover(le,ne)}},re.state=n({},a.toState(X.color,0)),re.debounce=(0,o.default)(function(ee,ne,q){ee(ne,q)},100),re}return e(Z,[{key:"render",value:function(){var re={};return this.props.onSwatchHover&&(re.onSwatchHover=this.handleSwatchHover),i.default.createElement(U,n({},this.props,this.state,{onChange:this.handleChange},re))}}],[{key:"getDerivedStateFromProps",value:function(re,ee){return n({},a.toState(re.color,ee.oldHue))}}]),Z})(t.PureComponent||t.Component);return z.propTypes=n({},U.propTypes),z.defaultProps=n({},U.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),z};return f2.default=E,f2}var m2={},Q3={},BH;function zDe(){if(BH)return Q3;BH=1,Object.defineProperty(Q3,"__esModule",{value:!0}),Q3.handleFocus=void 0;var n=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var p=arguments[d];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(c[v]=p[v])}return c},e=(function(){function c(d,p){for(var v=0;v<p.length;v++){var M=p[v];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(d,M.key,M)}}return function(d,p,v){return p&&c(d.prototype,p),v&&c(d,v),d}})(),t=wa(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function s(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function a(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}return Q3.handleFocus=function(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){a(M,v);function M(){var E,P,U,z;o(this,M);for(var V=arguments.length,Z=Array(V),X=0;X<V;X++)Z[X]=arguments[X];return z=(P=(U=s(this,(E=M.__proto__||Object.getPrototypeOf(M)).call.apply(E,[this].concat(Z))),U),U.state={focus:!1},U.handleFocus=function(){return U.setState({focus:!0})},U.handleBlur=function(){return U.setState({focus:!1})},P),s(U,z)}return e(M,[{key:"render",value:function(){return i.default.createElement(p,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(d,n({},this.props,this.state)))}}]),M})(i.default.Component)},Q3}var OH;function jDe(){if(OH)return m2;OH=1,Object.defineProperty(m2,"__esModule",{value:!0}),m2.Swatch=void 0;var n=Object.assign||function(v){for(var M=1;M<arguments.length;M++){var E=arguments[M];for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(v[P]=E[P])}return v},e=wa(),t=c(e),i=Jp(),r=c(i),o=zDe(),s=wF(),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}var d=13,p=m2.Swatch=function(M){var E=M.color,P=M.style,U=M.onClick,z=U===void 0?function(){}:U,V=M.onHover,Z=M.title,X=Z===void 0?E:Z,re=M.children,ee=M.focus,ne=M.focusStyle,q=ne===void 0?{}:ne,le=E==="transparent",ue=(0,r.default)({default:{swatch:n({background:E,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},P,ee?q:{})}}),ve=function(Fe){return z(E,Fe)},pe=function(Fe){return Fe.keyCode===d&&z(E,Fe)},Be=function(Fe){return V(E,Fe)},Ce={};return V&&(Ce.onMouseOver=Be),t.default.createElement("div",n({style:ue.swatch,onClick:ve,title:X,tabIndex:0,onKeyDown:pe},Ce),re,le&&t.default.createElement(a.default,{borderRadius:ue.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return m2.default=(0,o.handleFocus)(p),m2}var IH;function oae(){return IH||(IH=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=xDe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return d(e).default}});var t=wF();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return d(t).default}});var i=MDe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return d(i).default}});var r=SDe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return d(r).default}});var o=EDe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return d(o).default}});var s=RDe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return d(s).default}});var a=FDe();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return d(a).default}});var c=jDe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return d(c).default}});function d(p){return p&&p.__esModule?p:{default:p}}})(O9)),O9}var p2={},K9,TH;function NDe(){if(TH)return K9;TH=1;function n(e){return e===void 0}return K9=n,K9}var mS={},kH;function GDe(){if(kH)return mS;kH=1,Object.defineProperty(mS,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])}return s},e=wa(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var d in s)a.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(s,d)&&(c[d]=s[d]);return c}var o=24;return mS.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,d=s.width,p=d===void 0?o:d,v=s.height,M=v===void 0?o:v,E=s.style,P=E===void 0?{}:E,U=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:p,height:M},P)},U),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},mS}var DH;function WDe(){if(DH)return p2;DH=1,Object.defineProperty(p2,"__esModule",{value:!0}),p2.ChromeFields=void 0;var n=(function(){function Z(X,re){for(var ee=0;ee<re.length;ee++){var ne=re[ee];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(X,ne.key,ne)}}return function(X,re,ee){return re&&Z(X.prototype,re),ee&&Z(X,ee),X}})(),e=wa(),t=E(e),i=Jp(),r=E(i),o=rae(),s=M(o),a=NDe(),c=E(a),d=oae(),p=GDe(),v=E(p);function M(Z){if(Z&&Z.__esModule)return Z;var X={};if(Z!=null)for(var re in Z)Object.prototype.hasOwnProperty.call(Z,re)&&(X[re]=Z[re]);return X.default=Z,X}function E(Z){return Z&&Z.__esModule?Z:{default:Z}}function P(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}function U(Z,X){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Z}function z(Z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Z.prototype=Object.create(X&&X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,X):Z.__proto__=X)}var V=p2.ChromeFields=(function(Z){z(X,Z);function X(re){P(this,X);var ee=U(this,(X.__proto__||Object.getPrototypeOf(X)).call(this));return ee.toggleViews=function(){ee.state.view==="hex"?ee.setState({view:"rgb"}):ee.state.view==="rgb"?ee.setState({view:"hsl"}):ee.state.view==="hsl"&&(ee.props.hsl.a===1?ee.setState({view:"hex"}):ee.setState({view:"rgb"}))},ee.handleChange=function(ne,q){ne.hex?s.isValidHex(ne.hex)&&ee.props.onChange({hex:ne.hex,source:"hex"},q):ne.r||ne.g||ne.b?ee.props.onChange({r:ne.r||ee.props.rgb.r,g:ne.g||ee.props.rgb.g,b:ne.b||ee.props.rgb.b,source:"rgb"},q):ne.a?(ne.a<0?ne.a=0:ne.a>1&&(ne.a=1),ee.props.onChange({h:ee.props.hsl.h,s:ee.props.hsl.s,l:ee.props.hsl.l,a:Math.round(ne.a*100)/100,source:"rgb"},q)):(ne.h||ne.s||ne.l)&&(typeof ne.s=="string"&&ne.s.includes("%")&&(ne.s=ne.s.replace("%","")),typeof ne.l=="string"&&ne.l.includes("%")&&(ne.l=ne.l.replace("%","")),ne.s==1?ne.s=.01:ne.l==1&&(ne.l=.01),ee.props.onChange({h:ne.h||ee.props.hsl.h,s:Number((0,c.default)(ne.s)?ee.props.hsl.s:ne.s),l:Number((0,c.default)(ne.l)?ee.props.hsl.l:ne.l),source:"hsl"},q))},ee.showHighlight=function(ne){ne.currentTarget.style.background="#eee"},ee.hideHighlight=function(ne){ne.currentTarget.style.background="transparent"},re.hsl.a!==1&&re.view==="hex"?ee.state={view:"rgb"}:ee.state={view:re.view},ee}return n(X,[{key:"render",value:function(){var ee=this,ne=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),q=void 0;return this.state.view==="hex"?q=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?q=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(q=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(d.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:ne.wrap,className:"flexbox-fix"},q,t.default.createElement("div",{style:ne.toggle},t.default.createElement("div",{style:ne.icon,onClick:this.toggleViews,ref:function(ue){return ee.icon=ue}},t.default.createElement(v.default,{style:ne.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(ee,ne){return ee.hsl.a!==1&&ne.view==="hex"?{view:"rgb"}:null}}]),X})(t.default.Component);return V.defaultProps={view:"hex"},p2.default=V,p2}var g2={},RH;function QDe(){if(RH)return g2;RH=1,Object.defineProperty(g2,"__esModule",{value:!0}),g2.ChromePointer=void 0;var n=wa(),e=r(n),t=Jp(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=g2.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return g2.default=o,g2}var y2={},PH;function qDe(){if(PH)return y2;PH=1,Object.defineProperty(y2,"__esModule",{value:!0}),y2.ChromePointerCircle=void 0;var n=wa(),e=r(n),t=Jp(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=y2.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return y2.default=o,y2}var UH;function YDe(){if(UH)return n2;UH=1,Object.defineProperty(n2,"__esModule",{value:!0}),n2.Chrome=void 0;var n=wa(),e=U(n),t=J1(),i=U(t),r=Jp(),o=U(r),s=nae(),a=U(s),c=oae(),d=WDe(),p=U(d),v=QDe(),M=U(v),E=qDe(),P=U(E);function U(V){return V&&V.__esModule?V:{default:V}}var z=n2.Chrome=function(Z){var X=Z.width,re=Z.onChange,ee=Z.disableAlpha,ne=Z.rgb,q=Z.hsl,le=Z.hsv,ue=Z.hex,ve=Z.renderers,pe=Z.styles,Be=pe===void 0?{}:pe,Ce=Z.className,Oe=Ce===void 0?"":Ce,Fe=Z.defaultView,Ee=(0,o.default)((0,a.default)({default:{picker:{width:X,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ne.r+", "+ne.g+", "+ne.b+", "+ne.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Be),{disableAlpha:ee});return e.default.createElement("div",{style:Ee.picker,className:"chrome-picker "+Oe},e.default.createElement("div",{style:Ee.saturation},e.default.createElement(c.Saturation,{style:Ee.Saturation,hsl:q,hsv:le,pointer:P.default,onChange:re})),e.default.createElement("div",{style:Ee.body},e.default.createElement("div",{style:Ee.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Ee.color},e.default.createElement("div",{style:Ee.swatch},e.default.createElement("div",{style:Ee.active}),e.default.createElement(c.Checkboard,{renderers:ve}))),e.default.createElement("div",{style:Ee.toggles},e.default.createElement("div",{style:Ee.hue},e.default.createElement(c.Hue,{style:Ee.Hue,hsl:q,pointer:M.default,onChange:re})),e.default.createElement("div",{style:Ee.alpha},e.default.createElement(c.Alpha,{style:Ee.Alpha,rgb:ne,hsl:q,pointer:M.default,renderers:ve,onChange:re})))),e.default.createElement(p.default,{rgb:ne,hsl:q,hex:ue,view:Fe,onChange:re,disableAlpha:ee})))};return z.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},z.defaultProps={width:225,disableAlpha:!1,styles:{}},n2.default=(0,c.ColorWrap)(z),n2}var VDe=YDe();const $De=xu(VDe);function br(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return br=function(){return s},s}br();function HDe(n){br().f[0]++;const e=(br().s[0]++,n.rgb);return br().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class SF extends En.Component{state=(br().s[2]++,{pickerOpened:!1});colorInput=(br().s[3]++,null);constructor(e){br().f[1]++,br().s[4]++,super(e),br().s[5]++,this.onChangeNoCheck=Y9.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){br().f[2]++,br().s[6]++,this.props.onChange(e)}calcPickerOffset=(br().s[7]++,()=>{br().f[3]++;const e=(br().s[8]++,this.colorInput);if(br().s[9]++,e){br().b[0][0]++;const t=(br().s[10]++,e.getBoundingClientRect());return br().s[11]++,{top:t.top,left:t.left+196}}else return br().b[0][1]++,br().s[12]++,{top:160,left:555}});togglePicker=(br().s[13]++,()=>{br().f[4]++,br().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){br().f[5]++,br().s[15]++;try{return br().s[16]++,Nu(this.props.value).rgb()}catch(e){return br().s[17]++,console.warn("Error parsing color: ",e),br().s[18]++,Nu("rgb(255,255,255)")}}onChange(e){br().f[6]++,br().s[19]++,this.props.onChange(e===""?(br().b[1][0]++,void 0):(br().b[1][1]++,e))}render(){br().f[7]++;const e=(br().s[20]++,this.calcPickerOffset()),t=(br().s[21]++,this.color.object()),i=(br().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(br().s[23]++,oe.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[oe.jsx($De,{color:i,onChange:s=>(br().f[8]++,br().s[24]++,this.onChangeNoCheck(HDe(s)))}),oe.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(br().s[25]++,{backgroundColor:this.props.value});return br().s[26]++,oe.jsxs("div",{className:"maputnik-color-wrapper",children:[(br().b[2][0]++,this.state.pickerOpened&&(br().b[2][1]++,r)),oe.jsx("div",{className:"maputnik-color-swatch",style:o}),oe.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{br().f[9]++,br().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(br().b[3][0]++,this.props.value):(br().b[3][1]++,""),onChange:s=>(br().f[10]++,br().s[28]++,this.onChange(s.target.value))})]})}}function en(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return en=function(){return s},s}en();class V1 extends En.Component{static defaultProps=(en().s[0]++,{rangeStep:1});_keyboardEvent=(en().s[1]++,!1);constructor(e){en().f[0]++,en().s[2]++,super(e),en().s[3]++,this.state={uuid:+Lx(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return en().f[1]++,en().s[4]++,en().b[1][0]++,!t.editing&&(en().b[1][1]++,e.value!==t.value)?(en().b[0][0]++,en().s[5]++,{value:e.value,dirtyValue:e.value}):(en().b[0][1]++,en().s[6]++,null)}changeValue(e){en().f[2]++;const t=(en().s[7]++,en().b[3][0]++,e===""||(en().b[3][1]++,e===void 0)?(en().b[2][0]++,void 0):(en().b[2][1]++,+e)),i=(en().s[8]++,this.props.value!==t);en().s[9]++,en().b[5][0]++,this.isValid(t)&&(en().b[5][1]++,i)?(en().b[4][0]++,en().s[10]++,this.props.onChange?(en().b[6][0]++,en().s[11]++,this.props.onChange(t)):en().b[6][1]++,en().s[12]++,this.setState({value:t})):(en().b[4][1]++,en().s[13]++,en().b[8][0]++,!this.isValid(t)&&(en().b[8][1]++,i)?(en().b[7][0]++,en().s[14]++,this.setState({value:void 0})):en().b[7][1]++),en().s[15]++,this.setState({dirtyValue:e===""?(en().b[9][0]++,void 0):(en().b[9][1]++,e)})}isValid(e){if(en().f[3]++,en().s[16]++,e===void 0)return en().b[10][0]++,en().s[17]++,!0;en().b[10][1]++;const t=(en().s[18]++,+e);return en().s[19]++,isNaN(t)?(en().b[11][0]++,en().s[20]++,!1):(en().b[11][1]++,en().s[21]++,en().b[13][0]++,!isNaN(this.props.min)&&(en().b[13][1]++,t<this.props.min)?(en().b[12][0]++,en().s[22]++,!1):(en().b[12][1]++,en().s[23]++,en().b[15][0]++,!isNaN(this.props.max)&&(en().b[15][1]++,t>this.props.max)?(en().b[14][0]++,en().s[24]++,!1):(en().b[14][1]++,en().s[25]++,!0)))}resetValue=(en().s[26]++,()=>{if(en().f[4]++,en().s[27]++,this.setState({editing:!1}),en().s[28]++,this.state.value)en().b[16][1]++;else{en().b[16][0]++,en().s[29]++;return}en().s[30]++,this.isValid(this.state.value)?en().b[17][1]++:(en().b[17][0]++,en().s[31]++,this.isValid(this.props.value)?(en().b[18][0]++,en().s[32]++,this.changeValue(this.props.value),en().s[33]++,this.setState({dirtyValue:this.props.value})):(en().b[18][1]++,en().s[34]++,this.changeValue(void 0),en().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(en().s[36]++,e=>{en().f[5]++;let t=(en().s[37]++,parseFloat(e.target.value));const i=(en().s[38]++,this.props.rangeStep);let r=(en().s[39]++,t);if(en().s[40]++,i){en().b[19][0]++;const o=(en().s[41]++,t%i);en().s[42]++,this._keyboardEvent?(en().b[20][0]++,en().s[43]++,t<+this.state.dirtyValue?(en().b[21][0]++,en().s[44]++,t=this.state.value-i):(en().b[21][1]++,en().s[45]++,t=this.state.value+i),en().s[46]++,r=t):(en().b[20][1]++,en().s[47]++,o<i/2?(en().b[22][0]++,en().s[48]++,t=t-o):(en().b[22][1]++,en().s[49]++,t=t+(i-o)))}else en().b[19][1]++;en().s[50]++,this._keyboardEvent=!1,en().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),en().s[52]++,this.setState({value:t,dirtyValue:r}),en().s[53]++,this.props.onChange?(en().b[23][0]++,en().s[54]++,this.props.onChange(t)):en().b[23][1]++});render(){if(en().f[6]++,en().s[55]++,en().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(en().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(en().b[25][2]++,this.props.min!==void 0)&&(en().b[25][3]++,this.props.max!==void 0)&&(en().b[25][4]++,this.props.allowRange)){en().b[24][0]++;const e=(en().s[56]++,this.state.editing?(en().b[26][0]++,this.state.dirtyValue):(en().b[26][1]++,this.state.value)),t=(en().s[57]++,this.props.default===void 0?(en().b[27][0]++,""):(en().b[27][1]++,this.props.default));let i;return en().s[58]++,this.state.editingRange?(en().b[28][0]++,en().s[59]++,i=this.state.value):(en().b[28][1]++,en().s[60]++,i=e),en().s[61]++,oe.jsxs("div",{className:"maputnik-number-container",children:[oe.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(en().b[29][0]++,t):(en().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{en().f[7]++,en().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{en().f[8]++,en().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{en().f[9]++,en().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{en().f[10]++,en().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),oe.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(en().b[30][0]++,""):(en().b[30][1]++,i),onFocus:r=>{en().f[11]++,en().s[66]++,this.setState({editing:!0})},onChange:r=>{en().f[12]++,en().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{en().f[13]++,en().s[68]++,this.setState({editing:!1}),en().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{en().b[24][1]++;const e=(en().s[70]++,this.state.editing?(en().b[31][0]++,this.state.dirtyValue):(en().b[31][1]++,this.state.value));return en().s[71]++,oe.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(en().b[32][0]++,""):(en().b[32][1]++,e),onChange:t=>(en().f[14]++,en().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{en().f[15]++,en().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function ig(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ig=function(){return s},s}ig();class sae extends En.Component{static defaultProps=(ig().s[0]++,{value:!1});onChange=(ig().s[1]++,()=>{ig().f[0]++,ig().s[2]++,this.props.onChange(!this.props.value)});render(){return ig().f[1]++,ig().s[3]++,oe.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[oe.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),oe.jsx("div",{className:"maputnik-checkbox-box",children:oe.jsx("svg",{style:{display:this.props.value?(ig().b[0][0]++,"inline"):(ig().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:oe.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function Ci(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ci=function(){return s},s}Ci();class IP extends En.Component{static defaultProps=(Ci().s[0]++,{value:[],default:[]});constructor(e){Ci().f[0]++,Ci().s[1]++,super(e),Ci().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Ci().f[1]++;const i=(Ci().s[3]++,[]),r=(Ci().s[4]++,t.initialPropsValue.slice(0));return Ci().s[5]++,Array(e.length).fill(null).map((o,s)=>{Ci().f[2]++,Ci().s[6]++,e.value[s]===t.initialPropsValue[s]?(Ci().b[0][0]++,Ci().s[7]++,i[s]=t.value[s]):(Ci().b[0][1]++,Ci().s[8]++,i[s]=t.value[s],Ci().s[9]++,r[s]=t.value[s])}),Ci().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return Ci().f[3]++,Ci().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{Ci().f[4]++;const r=(Ci().s[12]++,e[i]);return Ci().s[13]++,Ci().b[1][0]++,!(r===void 0||(Ci().b[1][1]++,r===""))})}changeValue(e,t){Ci().f[5]++;const i=(Ci().s[14]++,this.state.value.slice(0));Ci().s[15]++,i[e]=t,Ci().s[16]++,this.setState({value:i},()=>{Ci().f[6]++,Ci().s[17]++,Ci().b[3][0]++,this.isComplete(i)&&(Ci().b[3][1]++,this.props.onChange)?(Ci().b[2][0]++,Ci().s[18]++,this.props.onChange(i)):(Ci().b[2][1]++,Ci().s[19]++,this.props.onChange?(Ci().b[4][0]++,Ci().s[20]++,this.props.onChange(void 0)):Ci().b[4][1]++)})}render(){Ci().f[7]++;const{value:e}=(Ci().s[21]++,this.state),t=(Ci().s[22]++,Ci().b[5][0]++,e.length>0&&(Ci().b[5][1]++,!e.every(r=>(Ci().f[8]++,Ci().s[23]++,Ci().b[6][0]++,r===""||(Ci().b[6][1]++,r===void 0))))),i=(Ci().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(Ci().f[9]++,Ci().s[25]++,this.props.type==="number"?(Ci().b[7][0]++,Ci().s[26]++,oe.jsx(V1,{default:(Ci().b[9][0]++,t||(Ci().b[9][1]++,!this.props.default)?(Ci().b[8][0]++,void 0):(Ci().b[8][1]++,this.props.default[o])),value:e[o],required:t?(Ci().b[10][0]++,!0):(Ci().b[10][1]++,!1),onChange:s=>(Ci().f[10]++,Ci().s[27]++,this.changeValue(o,s)),"aria-label":(Ci().b[11][0]++,this.props["aria-label"]||(Ci().b[11][1]++,this.props.label))},o)):(Ci().b[7][1]++,Ci().s[28]++,oe.jsx(Wp,{default:(Ci().b[13][0]++,t||(Ci().b[13][1]++,!this.props.default)?(Ci().b[12][0]++,void 0):(Ci().b[12][1]++,this.props.default[o])),value:e[o],required:t?(Ci().b[14][0]++,!0):(Ci().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(Ci().b[15][0]++,this.props["aria-label"]||(Ci().b[15][1]++,this.props.label))},o)))));return Ci().s[29]++,oe.jsx("div",{className:"maputnik-array",children:i})}}function yu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yu=function(){return s},s}yu();class ZDe extends En.Component{render(){yu().f[0]++;let e=(yu().s[0]++,this.props.options);yu().s[1]++,yu().b[1][0]++,e.length>0&&(yu().b[1][1]++,!Array.isArray(e[0]))?(yu().b[0][0]++,yu().s[2]++,e=e.map(r=>(yu().f[1]++,yu().s[3]++,[r,r]))):yu().b[0][1]++;const t=(yu().s[4]++,yu().b[2][0]++,this.props.value||(yu().b[2][1]++,e[0][0])),i=(yu().s[5]++,e.map(([r,o])=>(yu().f[2]++,yu().s[6]++,oe.jsxs("label",{className:Ug("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[oe.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(yu().f[3]++,yu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return yu().s[8]++,oe.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function $a(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $a=function(){return s},s}$a();function XDe(n){$a().f[0]++;let e=($a().s[0]++,0);return $a().s[1]++,n.forEach(([t,i])=>{$a().f[1]++,$a().s[2]++,e+=i.length}),$a().s[3]++,e}class EF extends En.Component{render(){$a().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=($a().s[4]++,this.props);return $a().s[5]++,$a().b[1][0]++,e.length<=3&&($a().b[1][1]++,XDe(e)<=20)?($a().b[0][0]++,$a().s[6]++,oe.jsx(ZDe,{name:r,options:e,value:($a().b[2][0]++,t||($a().b[2][1]++,this.props.default)),onChange:i,"aria-label":($a().b[3][0]++,this.props["aria-label"]||($a().b[3][1]++,o))})):($a().b[0][1]++,$a().s[7]++,oe.jsx(o_,{options:e,value:($a().b[4][0]++,t||($a().b[4][1]++,this.props.default)),onChange:i,"aria-label":($a().b[5][0]++,this.props["aria-label"]||($a().b[5][1]++,o))}))}}function cx(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cx=function(){return s},s}cx();class JDe extends En.Component{render(){cx().f[0]++;const e=(cx().s[0]++,this.props.t);return cx().s[1]++,oe.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const F9=(cx().s[2]++,So()(JDe)),eRe="get_your_own_OpIi9ZULNHzrESv6T2vL",tRe="b71f7f0ba4064f5eb9e903859a9cf5c6",nRe="pk.put_your_api_key_here7bb23dffeb4",aae={openmaptiles:eRe,thunderforest:tRe,locationiq:nRe};function On(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return On=function(){return s},s}On();const iRe=(On().s[0]++,uae({version:8,sources:{},layers:[]}));function lae(){return On().f[0]++,On().s[1]++,Math.random().toString(36).substring(2,9)}function rRe(n){return On().f[1]++,On().s[2]++,On().b[1][0]++,!("id"in n)||(On().b[1][1]++,!n.id)?(On().b[0][0]++,On().s[3]++,n.id=lae()):On().b[0][1]++,On().s[4]++,n}function oRe(n){On().f[2]++;const e=(On().s[5]++,n.layers.map(t=>{On().f[3]++;const i=(On().s[6]++,{...t});return On().s[7]++,delete i.interactive,On().s[8]++,i}));return On().s[9]++,{...n,layers:e}}function sRe(n){return On().f[4]++,On().s[10]++,{...n,layers:sAe(n.layers)}}function uae(n){return On().f[5]++,On().s[11]++,oRe(sRe(rRe(n)))}function aRe(n,e){On().f[6]++,On().s[12]++;for(let t=(On().s[13]++,0);t<n.length;t++){if(On().s[14]++,n[t].id===e)return On().b[2][0]++,On().s[15]++,t;On().b[2][1]++}return On().s[16]++,null}function BF(n,e,t){On().f[7]++;const i=(On().s[17]++,On().b[3][0]++,e.metadata||(On().b[3][1]++,{}));let r=(On().s[18]++,i[`maputnik:${n}_access_token`]);return On().s[19]++,On().b[5][0]++,t.allowFallback&&(On().b[5][1]++,!r)?(On().b[4][0]++,On().s[20]++,r=aae[n]):On().b[4][1]++,On().s[21]++,r}function lRe(n,e,t=(On().b[6][0]++,{})){On().f[8]++;const i=(On().s[22]++,n.sources[e]);if(On().s[23]++,i)On().b[7][1]++;else return On().b[7][0]++,On().s[24]++,n;if(On().s[25]++,On().b[9][0]++,!("url"in i)||(On().b[9][1]++,!i.url))return On().b[8][0]++,On().s[26]++,n;On().b[8][1]++;let r=(On().s[27]++,e);On().s[28]++,On().b[11][0]++,e==="thunderforest_transport"||(On().b[11][1]++,e==="thunderforest_outdoors")?(On().b[10][0]++,On().s[29]++,r="thunderforest"):(On().b[10][1]++,On().s[30]++,On().b[13][0]++,"url"in i&&(On().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(On().b[12][0]++,On().s[31]++,r="stadia"):(On().b[12][1]++,On().s[32]++,On().b[15][0]++,"url"in i&&(On().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(On().b[14][0]++,On().s[33]++,r="locationiq"):On().b[14][1]++));const o=(On().s[34]++,BF(r,n,t));if(On().s[35]++,o)On().b[16][1]++;else return On().b[16][0]++,On().s[36]++,n;let s;On().s[37]++,r=="stadia"?(On().b[17][0]++,On().s[38]++,s=`${i.url}?api_key=${o}`):(On().b[17][1]++,On().s[39]++,s=i.url.replace("{key}",o));const a=(On().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(On().s[41]++,{...n,sources:a});return On().s[42]++,c}function uRe(n,e=(On().b[18][0]++,{})){On().f[9]++;let t=(On().s[43]++,n);if(On().s[44]++,Object.keys(n.sources).forEach(i=>{On().f[10]++,On().s[45]++,t=lRe(t,i,e)}),On().s[46]++,On().b[20][0]++,n.glyphs&&(On().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(On().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){On().b[19][0]++;const i=(On().s[47]++,BF("openmaptiles",n,e));On().s[48]++,i?(On().b[21][0]++,On().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):On().b[21][1]++}else On().b[19][1]++;return On().s[50]++,t}function cRe(n){On().f[11]++;const e=(On().s[51]++,{...n.metadata});return On().s[52]++,delete e["maputnik:openmaptiles_access_token"],On().s[53]++,delete e["maputnik:thunderforest_access_token"],On().s[54]++,delete e["maputnik:stadia_access_token"],On().s[55]++,delete e["maputnik:locationiq_access_token"],On().s[56]++,{...n,metadata:e}}const Ud={ensureStyleValidity:uae,emptyStyle:iRe,indexOfLayer:aRe,generateId:lae,getAccessToken:BF,replaceAccessTokens:uRe,stripAccessTokens:cRe};function zi(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="7e619cc067ee5afec3d59ae042f82a0a4a37e5ad",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}},13:{start:{line:25,column:39},end:{line:31,column:19}},14:{start:{line:26,column:2},end:{line:26,column:46}},15:{start:{line:27,column:2},end:{line:27,column:74}},16:{start:{line:28,column:2},end:{line:28,column:86}},17:{start:{line:29,column:2},end:{line:29,column:56}},18:{start:{line:30,column:2},end:{line:30,column:20}},19:{start:{line:33,column:2},end:{line:40,column:3}},20:{start:{line:34,column:19},end:{line:34,column:31}},21:{start:{line:35,column:35},end:{line:35,column:41}},22:{start:{line:36,column:20},end:{line:36,column:78}},23:{start:{line:37,column:4},end:{line:37,column:33}},24:{start:{line:39,column:4},end:{line:39,column:14}},25:{start:{line:44,column:2},end:{line:46,column:3}},26:{start:{line:45,column:4},end:{line:45,column:24}},27:{start:{line:47,column:2},end:{line:49,column:3}},28:{start:{line:48,column:4},end:{line:48,column:24}},29:{start:{line:50,column:32},end:{line:50,column:52}},30:{start:{line:51,column:16},end:{line:51,column:53}},31:{start:{line:52,column:2},end:{line:54,column:3}},32:{start:{line:53,column:4},end:{line:53,column:38}},33:{start:{line:55,column:2},end:{line:57,column:3}},34:{start:{line:56,column:4},end:{line:56,column:44}},35:{start:{line:58,column:2},end:{line:60,column:3}},36:{start:{line:59,column:4},end:{line:59,column:29}},37:{start:{line:61,column:2},end:{line:61,column:22}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:25,column:40},end:{line:25,column:41}},loc:{start:{line:25,column:56},end:{line:31,column:1}},line:25},3:{name:"getProtocolSafe",decl:{start:{line:32,column:9},end:{line:32,column:24}},loc:{start:{line:32,column:30},end:{line:41,column:1}},line:32},4:{name:"validate",decl:{start:{line:43,column:16},end:{line:43,column:24}},loc:{start:{line:43,column:30},end:{line:62,column:1}},line:43}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:31,column:3},end:{line:31,column:18}},type:"binary-expr",locations:[{start:{line:31,column:3},end:{line:31,column:12}},{start:{line:31,column:16},end:{line:31,column:18}}],line:31},2:{loc:{start:{line:44,column:2},end:{line:46,column:3}},type:"if",locations:[{start:{line:44,column:2},end:{line:46,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:47,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:47,column:6},end:{line:47,column:50}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:25}},{start:{line:47,column:29},end:{line:47,column:50}}],line:47},5:{loc:{start:{line:52,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:52,column:2},end:{line:54,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},6:{loc:{start:{line:52,column:6},end:{line:52,column:24}},type:"binary-expr",locations:[{start:{line:52,column:6},end:{line:52,column:15}},{start:{line:52,column:19},end:{line:52,column:24}}],line:52},7:{loc:{start:{line:55,column:2},end:{line:57,column:3}},type:"if",locations:[{start:{line:55,column:2},end:{line:57,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},9:{loc:{start:{line:58,column:6},end:{line:58,column:91}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:14}},{start:{line:58,column:18},end:{line:58,column:38}},{start:{line:58,column:42},end:{line:58,column:79}},{start:{line:58,column:83},end:{line:58,column:91}}],line:58}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:["ErrorType"],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;AAEO,WAAW,YAAX,kBAAWA,eAAX;AACL,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AACA,EAAAA,sBAAA;AAJgB,SAAAA;AAAA,GAAA;AAOlB,SAAS,gBAAgB,KAAuD;AAC9E,MAAI;AACF,UAAM,SAAS,IAAI,IAAI,GAAG;AAC1B,UAAM,EAAE,UAAU,SAAS,IAAI;AAC/B,UAAM,UAAU,4CAA4C,KAAK,QAAQ;AACzE,WAAO,EAAE,UAAU,QAAQ;AAAA,EAC7B,SACO,MAAM;AACX,WAAO,CAAC;AAAA,EACV;AACF;AAAC;AAEM,gBAAS,SAAS,KAAyB;AAChD,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AAGA,MAAI,IAAI,WAAW,GAAG,KAAK,CAAC,IAAI,WAAW,IAAI,GAAG;AAChD,WAAO;AAAA,EACT;AAEA,QAAM,EAAE,UAAU,QAAQ,IAAI,gBAAgB,GAAG;AACjD,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,YAAY,OAAO;AACtB,WAAO;AAAA,EACT;AACA,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT;AACA,MAAI,YACF,aAAa,WACb,OAAO,SAAS,aAAa,YAC7B,CAAC,SAAS;AACV,WAAO;AAAA,EACT;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7e619cc067ee5afec3d59ae042f82a0a4a37e5ad"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zi=function(){return s},s}zi();function ARe(){zi().f[0]++;const n=(zi().s[0]++,new URL(window.location.href)),e=(zi().s[1]++,n.searchParams.get("style"));return zi().s[2]++,e?(zi().b[0][0]++,zi().s[3]++,n.searchParams.delete("style"),zi().s[4]++,window.history.replaceState({},document.title,n.toString())):zi().b[0][1]++,zi().s[5]++,e}async function cae(n){zi().f[1]++,zi().s[6]++,console.log("Loading style",n),zi().s[7]++;try{const e=(zi().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(zi().s[9]++,await e.json());return zi().s[10]++,Ud.ensureStyleValidity(t)}catch{return zi().s[11]++,console.warn("Could not fetch default style: "+n),zi().s[12]++,Ud.emptyStyle}}var HS=(zi().s[13]++,(n=>(zi().f[2]++,zi().s[14]++,n[n.None=0]="None",zi().s[15]++,n[n.EmptyHttpsProtocol=1]="EmptyHttpsProtocol",zi().s[16]++,n[n.EmptyHttpOrHttpsProtocol=2]="EmptyHttpOrHttpsProtocol",zi().s[17]++,n[n.CorsError=3]="CorsError",zi().s[18]++,n))((zi().b[1][0]++,HS||(zi().b[1][1]++,{}))));function hRe(n){zi().f[3]++,zi().s[19]++;try{const e=(zi().s[20]++,new URL(n)),{protocol:t,hostname:i}=(zi().s[21]++,e),r=(zi().s[22]++,/^(localhost|\[::1\]|127(.[0-9]{1,3}){3})/i.test(i));return zi().s[23]++,{protocol:t,isLocal:r}}catch{return zi().s[24]++,{}}}function z9(n){if(zi().f[4]++,zi().s[25]++,n)zi().b[2][1]++;else return zi().b[2][0]++,zi().s[26]++,0;if(zi().s[27]++,zi().b[4][0]++,n.startsWith("/")&&(zi().b[4][1]++,!n.startsWith("//")))return zi().b[3][0]++,zi().s[28]++,0;zi().b[3][1]++;const{protocol:e,isLocal:t}=(zi().s[29]++,hRe(n)),i=(zi().s[30]++,window.location.protocol==="https:");if(zi().s[31]++,zi().b[6][0]++,!e&&(zi().b[6][1]++,i))return zi().b[5][0]++,zi().s[32]++,1;if(zi().b[5][1]++,zi().s[33]++,e)zi().b[7][1]++;else return zi().b[7][0]++,zi().s[34]++,2;return zi().s[35]++,zi().b[9][0]++,e&&(zi().b[9][1]++,e==="http:")&&(zi().b[9][2]++,window.location.protocol==="https:")&&(zi().b[9][3]++,!t)?(zi().b[8][0]++,zi().s[36]++,3):(zi().b[8][1]++,zi().s[37]++,0)}function ws(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="10bb41cd0b7b737b3850572eca04f957b2d429f2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:29,column:3}},1:{start:{line:10,column:6},end:{line:13,column:14}},2:{start:{line:15,column:6},end:{line:20,column:14}},3:{start:{line:22,column:6},end:{line:26,column:14}},4:{start:{line:28,column:6},end:{line:28,column:20}},5:{start:{line:32,column:24},end:{line:35,column:3}},6:{start:{line:37,column:4},end:{line:37,column:17}},7:{start:{line:38,column:4},end:{line:40,column:6}},8:{start:{line:42,column:12},end:{line:47,column:3}},9:{start:{line:43,column:4},end:{line:45,column:7}},10:{start:{line:46,column:4},end:{line:46,column:52}},11:{start:{line:46,column:28},end:{line:46,column:52}},12:{start:{line:48,column:13},end:{line:53,column:3}},13:{start:{line:49,column:4},end:{line:51,column:7}},14:{start:{line:52,column:4},end:{line:52,column:29}},15:{start:{line:55,column:4},end:{line:66,column:9}},16:{start:{line:69,column:17},end:{line:69,column:52}}},fnMap:{0:{name:"errorTypeToJsx",decl:{start:{line:7,column:9},end:{line:7,column:23}},loc:{start:{line:7,column:38},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:33,column:13},end:{line:33,column:14}},loc:{start:{line:33,column:19},end:{line:34,column:5}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:21},end:{line:41,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:42,column:12},end:{line:42,column:13}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},4:{name:"(anonymous_4)",decl:{start:{line:48,column:13},end:{line:48,column:14}},loc:{start:{line:48,column:22},end:{line:53,column:3}},line:48},5:{name:"(anonymous_5)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:67,column:3}},line:54}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:29,column:3}},type:"switch",locations:[{start:{line:9,column:4},end:{line:13,column:14}},{start:{line:14,column:4},end:{line:20,column:14}},{start:{line:21,column:4},end:{line:26,column:14}},{start:{line:27,column:4},end:{line:28,column:20}}],line:8},1:{loc:{start:{line:46,column:4},end:{line:46,column:52}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:[],mappings:"AAYU,SAAoC,KAApC;AAZV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAE7D,SAAS,WAAW,gBAAgB;AAEpC,SAAS,eAAe,WAAkC,GAAuC;AAC/F,UAAQ,WAAW;AAAA,IACjB,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ,KAAK,UAAU;AACb,aACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAmF,oBAAC,UAAK,sBAAQ;AAAA,QAAO;AAAA,SAAO,GAC9H;AAAA,IAEJ;AACE,aAAO;AAAA,EACX;AACF;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,KAAK;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,GAAG;AAAA,IACrB,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,GAAG;AAAA,IACrB,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,eAAe,KAAK,MAAM,OAAO,KAAK,MAAM,CAAC;AAAA,OAChD;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bb41cd0b7b737b3850572eca04f957b2d429f2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ws=function(){return s},s}ws();function dRe(n,e){switch(ws().f[0]++,ws().s[0]++,n){case HS.EmptyHttpsProtocol:return ws().b[0][0]++,ws().s[1]++,oe.jsx(F9,{children:oe.jsxs(Cb,{t:e,children:["Must provide protocol: ",oe.jsx("code",{children:"https://"})]})});case HS.EmptyHttpOrHttpsProtocol:return ws().b[0][1]++,ws().s[2]++,oe.jsx(F9,{children:oe.jsxs(Cb,{t:e,children:["Must provide protocol: ",oe.jsx("code",{children:"http://"})," or ",oe.jsx("code",{children:"https://"})]})});case HS.CorsError:return ws().b[0][2]++,ws().s[3]++,oe.jsx(F9,{children:oe.jsxs(Cb,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",oe.jsx("code",{children:"https://"})," domain"]})});default:ws().b[0][3]++,ws().s[4]++;return}}class fRe extends En.Component{static defaultProps=(ws().s[5]++,{onInput:()=>{ws().f[1]++}});constructor(e){ws().f[2]++,ws().s[6]++,super(e),ws().s[7]++,this.state={error:z9(e.value)}}onInput=(ws().s[8]++,e=>{ws().f[3]++,ws().s[9]++,this.setState({error:z9(e)}),ws().s[10]++,this.props.onInput?(ws().b[1][0]++,ws().s[11]++,this.props.onInput(e)):ws().b[1][1]++});onChange=(ws().s[12]++,e=>{ws().f[4]++,ws().s[13]++,this.setState({error:z9(e)}),ws().s[14]++,this.props.onChange(e)});render(){return ws().f[5]++,ws().s[15]++,oe.jsxs("div",{children:[oe.jsx(Wp,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),dRe(this.state.error,this.props.t)]})}}const OF=(ws().s[16]++,So()(fRe));function Vn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vn=function(){return s},s}Vn();class mRe extends En.Component{changeValue(e,t){Vn().f[0]++;const i=(Vn().s[0]++,this.values.slice(0));Vn().s[1]++,i[e]=t,Vn().s[2]++,this.props.onChange?(Vn().b[0][0]++,Vn().s[3]++,this.props.onChange(i)):Vn().b[0][1]++}get values(){return Vn().f[1]++,Vn().s[4]++,Vn().b[1][0]++,this.props.value||(Vn().b[1][1]++,this.props.default)||(Vn().b[1][2]++,[])}addValue=(Vn().s[5]++,()=>{Vn().f[2]++;const e=(Vn().s[6]++,this.values.slice(0));if(Vn().s[7]++,this.props.type==="number")Vn().b[2][0]++,Vn().s[8]++,e.push(0);else if(Vn().b[2][1]++,Vn().s[9]++,this.props.type==="url")Vn().b[3][0]++,Vn().s[10]++,e.push("");else if(Vn().b[3][1]++,Vn().s[11]++,this.props.type==="enum"){Vn().b[4][0]++;const{fieldSpec:t}=(Vn().s[12]++,this.props),i=(Vn().s[13]++,Object.keys(t.values)[0]);Vn().s[14]++,e.push(i)}else Vn().b[4][1]++,Vn().s[15]++,this.props.type==="color"?(Vn().b[5][0]++,Vn().s[16]++,e.push("#000000")):(Vn().b[5][1]++,Vn().s[17]++,e.push(""));Vn().s[18]++,this.props.onChange?(Vn().b[6][0]++,Vn().s[19]++,this.props.onChange(e)):Vn().b[6][1]++});deleteValue(e){Vn().f[3]++;const t=(Vn().s[20]++,this.values.slice(0));Vn().s[21]++,t.splice(e,1),Vn().s[22]++,this.props.onChange?(Vn().b[7][0]++,Vn().s[23]++,this.props.onChange(t.length>0?(Vn().b[8][0]++,t):(Vn().b[8][1]++,void 0))):Vn().b[7][1]++}render(){Vn().f[4]++;const e=(Vn().s[24]++,this.props.t),t=(Vn().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Vn().s[26]++,this.values.map((r,o)=>{Vn().f[5]++;const s=(Vn().s[27]++,oe.jsx(pRe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if(Vn().s[28]++,this.props.type==="url")Vn().b[9][0]++,Vn().s[29]++,a=oe.jsx(OF,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[10][0]++,this.props["aria-label"]||(Vn().b[10][1]++,this.props.label))});else if(Vn().b[9][1]++,Vn().s[30]++,this.props.type==="number")Vn().b[11][0]++,Vn().s[31]++,a=oe.jsx(V1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[12][0]++,this.props["aria-label"]||(Vn().b[12][1]++,this.props.label))});else if(Vn().b[11][1]++,Vn().s[32]++,this.props.type==="enum"){Vn().b[13][0]++;const c=(Vn().s[33]++,Object.keys(this.props.fieldSpec?.values).map(d=>(Vn().f[6]++,Vn().s[34]++,[d,lF(d)])));Vn().s[35]++,a=oe.jsx(EF,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[14][0]++,this.props["aria-label"]||(Vn().b[14][1]++,this.props.label))})}else Vn().b[13][1]++,Vn().s[36]++,this.props.type==="color"?(Vn().b[15][0]++,Vn().s[37]++,a=oe.jsx(SF,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[16][0]++,this.props["aria-label"]||(Vn().b[16][1]++,this.props.label))})):(Vn().b[15][1]++,Vn().s[38]++,a=oe.jsx(Wp,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[17][0]++,this.props["aria-label"]||(Vn().b[17][1]++,this.props.label))}));return Vn().s[39]++,oe.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[oe.jsx("div",{className:"maputnik-array-block-action",children:s}),oe.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return Vn().s[40]++,oe.jsxs("div",{className:"maputnik-array",children:[i,oe.jsx(js,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const ZS=(Vn().s[41]++,So()(mRe));class pRe extends En.Component{render(){Vn().f[7]++;const e=(Vn().s[42]++,this.props.t);return Vn().s[43]++,oe.jsx(js,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:oe.jsx(BK,{label:oe.jsx(Hb,{})})})}}function Ms(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ms=function(){return s},s}Ms();class gRe extends En.Component{static defaultProps=(Ms().s[0]++,{fonts:[]});get values(){Ms().f[0]++;const e=(Ms().s[1]++,Ms().b[0][0]++,this.props.value||(Ms().b[0][1]++,this.props.default)||(Ms().b[0][2]++,[]));return Ms().s[2]++,e[e.length-1]!==""?(Ms().b[1][0]++,Ms().s[3]++,e.concat("")):(Ms().b[1][1]++,Ms().s[4]++,e)}changeFont(e,t){Ms().f[1]++;const i=(Ms().s[5]++,this.values.slice(0));Ms().s[6]++,i[e]=t;const r=(Ms().s[7]++,i.filter(o=>(Ms().f[2]++,Ms().s[8]++,o!==void 0)).filter(o=>(Ms().f[3]++,Ms().s[9]++,o!=="")));Ms().s[10]++,this.props.onChange(r)}render(){Ms().f[4]++;const e=(Ms().s[11]++,this.values.map((t,i)=>(Ms().f[5]++,Ms().s[12]++,oe.jsx("li",{children:oe.jsx(WM,{"aria-label":(Ms().b[2][0]++,this.props["aria-label"]||(Ms().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Ms().f[6]++,Ms().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Ms().s[14]++,oe.jsx("ul",{className:"maputnik-font",children:e})}}function Xi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xi=function(){return s},s}Xi();const yRe=(Xi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class Ax extends En.Component{childNodes(){Xi().f[0]++;const e=(Xi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Xi().f[1]++,Xi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Xi().s[3]++,this.props.fieldSpec?.type){case"number":return Xi().b[0][0]++,Xi().s[4]++,oe.jsx(V1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Xi().b[0][1]++;{const t=(Xi().s[5]++,Object.keys((Xi().b[1][0]++,this.props.fieldSpec.values||(Xi().b[1][1]++,[]))).map(i=>(Xi().f[2]++,Xi().s[6]++,[i,lF(i)])));return Xi().s[7]++,oe.jsx(EF,{...e,options:t})}case"resolvedImage":Xi().b[0][2]++;case"formatted":Xi().b[0][3]++;case"string":if(Xi().b[0][4]++,Xi().s[8]++,yRe.indexOf(this.props.fieldName)>=0){Xi().b[2][0]++;const t=(Xi().s[9]++,Xi().b[3][0]++,this.props.fieldSpec.values||(Xi().b[3][1]++,[]));return Xi().s[10]++,oe.jsx(WM,{...e,options:t.map(i=>(Xi().f[3]++,Xi().s[11]++,[i,i]))})}else return Xi().b[2][1]++,Xi().s[12]++,oe.jsx(Wp,{...e});case"color":return Xi().b[0][5]++,Xi().s[13]++,oe.jsx(SF,{...e});case"boolean":return Xi().b[0][6]++,Xi().s[14]++,oe.jsx(sae,{...e});case"array":return Xi().b[0][7]++,Xi().s[15]++,this.props.fieldName==="text-font"?(Xi().b[4][0]++,Xi().s[16]++,oe.jsx(gRe,{...e,fonts:this.props.fieldSpec.values})):(Xi().b[4][1]++,Xi().s[17]++,this.props.fieldSpec.length?(Xi().b[5][0]++,Xi().s[18]++,oe.jsx(IP,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Xi().b[5][1]++,Xi().s[19]++,oe.jsx(ZS,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Xi().b[0][8]++,Xi().s[20]++,oe.jsx(ZS,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Xi().b[6][0]++,this.props.value):(Xi().b[6][1]++,[this.props.value])});case"colorArray":return Xi().b[0][9]++,Xi().s[21]++,oe.jsx(ZS,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Xi().b[7][0]++,this.props.value):(Xi().b[7][1]++,[this.props.value])});case"padding":return Xi().b[0][10]++,Xi().s[22]++,oe.jsx(IP,{...e,type:"number",value:Array.isArray(this.props.value)?(Xi().b[8][0]++,this.props.value):(Xi().b[8][1]++,[this.props.value]),length:4});default:return Xi().b[0][11]++,Xi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Xi().s[24]++,null}}render(){return Xi().f[4]++,Xi().s[25]++,oe.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function Qc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qc=function(){return s},s}Qc();Qc().s[0]++;const mv=n=>{Qc().f[0]++;const[e,t]=(Qc().s[1]++,En.useState(!1)),i=(Qc().s[2]++,En.useRef(Lx("fieldset_label_")));Qc().s[3]++;const r=o=>{Qc().f[1]++,Qc().s[4]++,t(o)};return Qc().s[5]++,oe.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(Qc().b[0][0]++,n.fieldSpec&&(Qc().b[0][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:oe.jsx(BK,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(Qc().b[1][0]++,!n.fieldSpec&&(Qc().b[1][1]++,oe.jsx("div",{className:Ug({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),oe.jsx("div",{className:"maputnik-input-block-action",children:n.action}),oe.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Qc().b[2][0]++,n.fieldSpec&&(Qc().b[2][1]++,oe.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Qc().b[3][0]++,""):(Qc().b[3][1]++,"none")},children:oe.jsx(sO,{fieldSpec:n.fieldSpec})})))]})};function Io(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Io=function(){return s},s}Io();function vRe(n){switch(Io().f[0]++,Io().s[0]++,n.type){case"color":return Io().b[0][0]++,Io().s[1]++,ds;case"enum":return Io().b[0][1]++,Io().s[2]++,Object.keys(n.values).length<=3?(Io().b[1][0]++,mv):(Io().b[1][1]++,ds);case"boolean":return Io().b[0][2]++,Io().s[3]++,ds;case"array":return Io().b[0][3]++,Io().s[4]++,mv;case"resolvedImage":return Io().b[0][4]++,Io().s[5]++,ds;case"number":return Io().b[0][5]++,Io().s[6]++,ds;case"string":return Io().b[0][6]++,Io().s[7]++,ds;case"formatted":return Io().b[0][7]++,Io().s[8]++,ds;case"padding":return Io().b[0][8]++,Io().s[9]++,ds;case"numberArray":return Io().b[0][9]++,Io().s[10]++,mv;case"colorArray":return Io().b[0][10]++,Io().s[11]++,mv;case"variableAnchorOffsetCollection":return Io().b[0][11]++,Io().s[12]++,mv;default:return Io().b[0][12]++,Io().s[13]++,console.warn("No such type for: "+n.type),Io().s[14]++,ds}}Io().s[15]++;const CRe=n=>{Io().f[1]++;const e=(Io().s[16]++,vRe(n.fieldSpec));return Io().s[17]++,oe.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:oe.jsx(Ax,{...n})})};function vu(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vu=function(){return s},s}vu();class bRe extends En.Component{render(){vu().f[0]++;const e=(vu().s[0]++,this.props.t);if(vu().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){vu().b[0][0]++;const t=(vu().s[2]++,oe.jsx(js,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:oe.jsx(q5,{})})),i=(vu().s[3]++,oe.jsx(js,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:oe.jsx(uj,{})}));let r;return vu().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(vu().b[1][0]++,vu().s[5]++,r=oe.jsx(js,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:oe.jsx(eme,{})})):vu().b[1][1]++,vu().s[6]++,oe.jsxs("div",{children:[t,r,i]})}else if(vu().b[0][1]++,vu().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){vu().b[2][0]++;const t=(vu().s[8]++,oe.jsx(js,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:oe.jsx(uj,{})}));return vu().s[9]++,oe.jsx("div",{children:t})}else return vu().b[2][1]++,vu().s[10]++,oe.jsx("div",{})}}const _Re=(vu().s[11]++,So()(bRe));function rg(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rg=function(){return s},s}rg();class xRe extends En.Component{static defaultProps=(rg().s[0]++,{errors:{}});render(){rg().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(rg().s[1]++,this.props),r=(rg().s[2]++,oe.jsx(_Re,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(rg().s[3]++,e[i+"."+t]);return rg().s[4]++,oe.jsx(CRe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:gO((rg().b[0][0]++,this.props.fieldName||(rg().b[0][1]++,""))),action:r})}}function Md(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Md=function(){return s},s}Md();function Aae(n,e){Md().f[0]++;const t=(Md().s[0]++,+n),i=(Md().s[1]++,+e);return Md().s[2]++,t<i?(Md().b[0][0]++,Md().s[3]++,-1):(Md().b[0][1]++,Md().s[4]++,t>i?(Md().b[1][0]++,Md().s[5]++,1):(Md().b[1][1]++,Md().s[6]++,0))}function Mp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mp=function(){return s},s}Mp();function dm(n){if(Mp().f[0]++,Mp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return Mp().b[0][0]++,Mp().s[1]++,n.default;Mp().b[0][1]++;const e=(Mp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return Mp().s[3]++,Mp().b[1][0]++,e[n.type]||(Mp().b[1][1]++,"")}function hx(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hx=function(){return s},s}hx();class MRe extends En.Component{render(){hx().f[0]++;const e=(hx().s[0]++,this.props.t);return hx().s[1]++,oe.jsx(js,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:oe.jsx(Hb,{})})}}const hae=(hx().s[2]++,So()(MRe));function Xt(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xt=function(){return s},s}Xt();function LH(n,e){Xt().f[0]++;let t;return Xt().s[0]++,Xt().b[1][0]++,n.value&&(Xt().b[1][1]++,n.value.stops)?(Xt().b[0][0]++,Xt().s[1]++,n.value.stops.forEach((i,r)=>{Xt().f[1]++,Xt().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?Xt().b[2][1]++:(Xt().b[2][0]++,Xt().s[3]++,t?Xt().b[3][1]++:(Xt().b[3][0]++,Xt().s[4]++,t={...e}),Xt().s[5]++,t[r]=Lx("stop-"))})):Xt().b[0][1]++,Xt().s[6]++,t}class wRe extends En.Component{state=(Xt().s[7]++,{refs:{}});componentDidMount(){Xt().f[2]++;const e=(Xt().s[8]++,LH(this.props,this.state));Xt().s[9]++,e?(Xt().b[4][0]++,Xt().s[10]++,this.setState({refs:e})):Xt().b[4][1]++}static getDerivedStateFromProps(e,t){Xt().f[3]++;const i=(Xt().s[11]++,LH(e,t));return Xt().s[12]++,i?(Xt().b[5][0]++,Xt().s[13]++,{refs:i}):(Xt().b[5][1]++,Xt().s[14]++,null)}getFieldFunctionType(e){return Xt().f[4]++,Xt().s[15]++,e.expression.interpolated?(Xt().b[6][0]++,Xt().s[16]++,"exponential"):(Xt().b[6][1]++,Xt().s[17]++,e.type==="number"?(Xt().b[7][0]++,Xt().s[18]++,"interval"):(Xt().b[7][1]++,Xt().s[19]++,"categorical"))}getDataFunctionTypes(e){return Xt().f[5]++,Xt().s[20]++,e.expression.interpolated?(Xt().b[8][0]++,Xt().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(Xt().b[8][1]++,Xt().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){Xt().f[6]++;const t=(Xt().s[23]++,e.map((r,o)=>(Xt().f[7]++,Xt().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Xt().f[8]++,Xt().s[25]++,Aae(r.data[0].zoom,o.data[0].zoom)))),i=(Xt().s[26]++,{});return Xt().s[27]++,t.forEach((r,o)=>{Xt().f[9]++,Xt().s[28]++,i[o]=r.ref}),Xt().s[29]++,this.setState({refs:i}),Xt().s[30]++,t.map(r=>(Xt().f[10]++,Xt().s[31]++,r.data))}onChange=(Xt().s[32]++,(e,t)=>{if(Xt().f[11]++,Xt().s[33]++,t.type==="identity")Xt().b[9][0]++,Xt().s[34]++,t={type:t.type,property:t.property};else{Xt().b[9][1]++;const i=(Xt().s[35]++,t.type==="categorical"?(Xt().b[10][0]++,""):(Xt().b[10][1]++,0));Xt().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},dm(this.props.fieldSpec)],[{zoom:10,value:i},dm(this.props.fieldSpec)]],...t}}Xt().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){Xt().f[12]++;const r=(Xt().s[38]++,Xt().b[11][0]++,this.props.value?.stops.slice(0)||(Xt().b[11][1]++,[]));Xt().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(Xt().b[12][0]++,0):(Xt().b[12][1]++,t.zoom)},i];const o=(Xt().s[40]++,this.orderStopsByZoom(r)),s=(Xt().s[41]++,{...this.props.value,stops:o});Xt().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){Xt().f[13]++;const t=(Xt().s[43]++,{...this.props.value,base:e});Xt().s[44]++,t.base===void 0?(Xt().b[13][0]++,Xt().s[45]++,delete t.base):Xt().b[13][1]++,Xt().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){Xt().f[14]++,Xt().s[47]++,Xt().b[15][0]++,e==="interpolate"&&(Xt().b[15][1]++,this.props.onChangeToZoomFunction)?(Xt().b[14][0]++,Xt().s[48]++,this.props.onChangeToZoomFunction()):(Xt().b[14][1]++,Xt().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){Xt().f[15]++,Xt().s[50]++,t?(Xt().b[16][0]++,Xt().s[51]++,this.props.value[e]=t):(Xt().b[16][1]++,Xt().s[52]++,delete this.props.value[e]),Xt().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){Xt().f[16]++;const e=(Xt().s[54]++,this.props.t);Xt().s[55]++,typeof this.props.value?.type>"u"?(Xt().b[17][0]++,Xt().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):Xt().b[17][1]++;let t;return Xt().s[57]++,this.props.value?.stops?(Xt().b[18][0]++,Xt().s[58]++,t=this.props.value.stops.map((i,r)=>{Xt().f[17]++;const o=(Xt().s[59]++,typeof i[0]=="object"?(Xt().b[19][0]++,i[0].zoom):(Xt().b[19][1]++,void 0)),s=(Xt().s[60]++,this.state.refs[r]),a=(Xt().s[61]++,typeof i[0]=="object"?(Xt().b[20][0]++,i[0].value):(Xt().b[20][1]++,i[0])),c=(Xt().s[62]++,i[1]),d=(Xt().s[63]++,oe.jsx(hae,{onClick:this.props.onDeleteStop?.bind(this,r)})),p=(Xt().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:E=>(Xt().f[18]++,Xt().s[65]++,this.changeStop(r,{zoom:o,value:E},c))});let v;Xt().s[66]++,this.props.value?.type==="categorical"?(Xt().b[21][0]++,Xt().s[67]++,v=oe.jsx(Wp,{...p})):(Xt().b[21][1]++,Xt().s[68]++,v=oe.jsx(V1,{...p}));let M=(Xt().s[69]++,null);return Xt().s[70]++,o!==void 0?(Xt().b[22][0]++,Xt().s[71]++,M=oe.jsx("div",{children:oe.jsx(V1,{"aria-label":"Zoom",value:o,onChange:E=>(Xt().f[19]++,Xt().s[72]++,this.changeStop(r,{zoom:E,value:a},c)),min:0,max:22})})):Xt().b[22][1]++,Xt().s[73]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:M}),oe.jsx("td",{children:v}),oe.jsx("td",{children:oe.jsx(Ax,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(E,P)=>(Xt().f[20]++,Xt().s[74]++,this.changeStop(r,{zoom:o,value:a},P))})}),oe.jsx("td",{children:d})]},s)})):Xt().b[18][1]++,Xt().s[75]++,oe.jsx("div",{className:"maputnik-data-spec-block",children:oe.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[oe.jsx("legend",{children:gO(this.props.fieldName)}),oe.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[oe.jsx(ds,{label:e("Function"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(o_,{value:this.props.value.type,onChange:i=>(Xt().f[21]++,Xt().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(Xt().b[23][0]++,this.props.value?.type!=="identity"&&(Xt().b[23][1]++,oe.jsx(ds,{label:e("Base"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(Ax,{fieldName:"base",fieldSpec:Yr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Xt().f[22]++,Xt().s[77]++,this.changeBase(r))})})},"base"))),oe.jsx(ds,{label:"Property",children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(Wp,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(Xt().f[23]++,Xt().s[78]++,this.changeDataProperty("property",i))})})},"property"),(Xt().b[24][0]++,t&&(Xt().b[24][1]++,oe.jsx(ds,{label:e("Default"),children:oe.jsx(Ax,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(Xt().f[24]++,Xt().s[79]++,this.changeDataProperty("default",r))})},"default"))),(Xt().b[25][0]++,t&&(Xt().b[25][1]++,oe.jsx("div",{className:"maputnik-function-stop",children:oe.jsxs("table",{className:"maputnik-function-stop-table",children:[oe.jsx("caption",{children:e("Stops")}),oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{children:e("Zoom")}),oe.jsx("th",{children:e("Input value")}),oe.jsx("th",{rowSpan:2,children:e("Output value")})]})}),oe.jsx("tbody",{children:t})]})}))),oe.jsxs("div",{className:"maputnik-toolbox",children:[(Xt().b[26][0]++,t&&(Xt().b[26][1]++,oe.jsxs(js,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[oe.jsx(pO,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),oe.jsxs(js,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[oe.jsx(q5,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const SRe=(Xt().s[80]++,So()(wRe));function Nn(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Nn=function(){return s},s}Nn();function KH(n,e){Nn().f[0]++;let t=(Nn().s[0]++,{});return Nn().s[1]++,Nn().b[1][0]++,n.value&&(Nn().b[1][1]++,n.value.stops)?(Nn().b[0][0]++,Nn().s[2]++,n.value.stops.forEach((i,r)=>{Nn().f[1]++,Nn().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(Nn().b[2][0]++,Nn().s[4]++,t?Nn().b[3][1]++:(Nn().b[3][0]++,Nn().s[5]++,t={...e}),Nn().s[6]++,t[r]=Lx("stop-")):(Nn().b[2][1]++,Nn().s[7]++,t[r]=e.refs[r])})):Nn().b[0][1]++,Nn().s[8]++,t}class ERe extends En.Component{static defaultProps=(Nn().s[9]++,{errors:{}});state=(Nn().s[10]++,{refs:{}});componentDidMount(){Nn().f[2]++;const e=(Nn().s[11]++,KH(this.props,this.state));Nn().s[12]++,e?(Nn().b[4][0]++,Nn().s[13]++,this.setState({refs:e})):Nn().b[4][1]++}static getDerivedStateFromProps(e,t){Nn().f[3]++;const i=(Nn().s[14]++,KH(e,t));return Nn().s[15]++,i?(Nn().b[5][0]++,Nn().s[16]++,{refs:i}):(Nn().b[5][1]++,Nn().s[17]++,null)}orderStopsByZoom(e){Nn().f[4]++;const t=(Nn().s[18]++,e.map((r,o)=>(Nn().f[5]++,Nn().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Nn().f[6]++,Nn().s[20]++,Aae(r.data[0],o.data[0])))),i=(Nn().s[21]++,{});return Nn().s[22]++,t.forEach((r,o)=>{Nn().f[7]++,Nn().s[23]++,i[o]=r.ref}),Nn().s[24]++,this.setState({refs:i}),Nn().s[25]++,t.map(r=>(Nn().f[8]++,Nn().s[26]++,r.data))}changeZoomStop(e,t,i){Nn().f[9]++;const r=(Nn().s[27]++,this.props.value.stops.slice(0));Nn().s[28]++,r[e]=[t,i];const o=(Nn().s[29]++,this.orderStopsByZoom(r)),s=(Nn().s[30]++,{...this.props.value,stops:o});Nn().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){Nn().f[10]++;const t=(Nn().s[32]++,{...this.props.value,base:e});Nn().s[33]++,t.base===void 0?(Nn().b[6][0]++,Nn().s[34]++,delete t.base):Nn().b[6][1]++,Nn().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(Nn().s[36]++,e=>{Nn().f[11]++,Nn().s[37]++,Nn().b[8][0]++,e!=="interpolate"&&(Nn().b[8][1]++,this.props.onChangeToDataFunction)?(Nn().b[7][0]++,Nn().s[38]++,this.props.onChangeToDataFunction(e)):Nn().b[7][1]++});render(){Nn().f[12]++;const e=(Nn().s[39]++,this.props.t),t=(Nn().s[40]++,this.props.value?.stops.map((i,r)=>{Nn().f[13]++;const o=(Nn().s[41]++,i[0]),s=(Nn().s[42]++,i[1]),a=(Nn().s[43]++,oe.jsx(hae,{onClick:this.props.onDeleteStop?.bind(this,r)}));return Nn().s[44]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:oe.jsx(V1,{"aria-label":e("Zoom"),value:o,onChange:c=>(Nn().f[14]++,Nn().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),oe.jsx("td",{children:oe.jsx(Ax,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,d)=>(Nn().f[15]++,Nn().s[46]++,this.changeZoomStop(r,o,d))})}),oe.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return Nn().s[47]++,oe.jsx("div",{className:"maputnik-data-spec-block",children:oe.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[oe.jsx("legend",{children:gO(this.props.fieldName)}),oe.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[oe.jsx(ds,{label:e("Function"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(o_,{value:"interpolate",onChange:i=>(Nn().f[16]++,Nn().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),oe.jsx(ds,{label:e("Base"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(Ax,{fieldName:"base",fieldSpec:Yr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Nn().f[17]++,Nn().s[49]++,this.changeBase(r))})})}),oe.jsx("div",{className:"maputnik-function-stop",children:oe.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[oe.jsx("caption",{children:e("Stops")}),oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{children:e("Zoom")}),oe.jsx("th",{rowSpan:2,children:e("Output value")})]})}),oe.jsx("tbody",{children:t})]})}),oe.jsxs("div",{className:"maputnik-toolbox",children:[oe.jsxs(js,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[oe.jsx(pO,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),oe.jsxs(js,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[oe.jsx(q5,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return Nn().f[18]++,Nn().s[50]++,e["property-type"]==="data-driven"?(Nn().b[9][0]++,Nn().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Nn().b[9][1]++,Nn().s[52]++,["interpolate"])}}const BRe=(Nn().s[53]++,So()(ERe));function dt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dt=function(){return s},s}dt();function FH(n){return dt().f[0]++,dt().s[0]++,dt().b[0][0]++,Array.isArray(n)&&(dt().b[0][1]++,n.length===2)&&(dt().b[0][2]++,n[0]==="literal")}function zH(n){return dt().f[1]++,dt().s[1]++,dt().b[1][0]++,Array.isArray(n)&&(dt().b[1][1]++,n.length===2)&&(dt().b[1][2]++,n[0]==="get")}function ORe(n){return dt().f[2]++,dt().s[2]++,dt().b[2][0]++,typeof n=="object"&&(dt().b[2][1]++,n.stops)&&(dt().b[2][2]++,typeof n.property>"u")&&(dt().b[2][3]++,Array.isArray(n.stops))&&(dt().b[2][4]++,n.stops.length>1)&&(dt().b[2][5]++,n.stops.every(e=>(dt().f[3]++,dt().s[3]++,dt().b[3][0]++,Array.isArray(e)&&(dt().b[3][1]++,e.length===2))))}function dae(n){return dt().f[4]++,dt().s[4]++,dt().b[4][0]++,typeof n=="object"&&(dt().b[4][1]++,n.type==="identity")&&(dt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function IRe(n){return dt().f[5]++,dt().s[5]++,dt().b[5][0]++,typeof n=="object"&&(dt().b[5][1]++,n.stops)&&(dt().b[5][2]++,typeof n.property<"u")&&(dt().b[5][3]++,n.stops.length>1)&&(dt().b[5][4]++,Array.isArray(n.stops))&&(dt().b[5][5]++,n.stops.every(e=>(dt().f[6]++,dt().s[6]++,dt().b[6][0]++,Array.isArray(e)&&(dt().b[6][1]++,e.length===2)&&(dt().b[6][2]++,typeof e[0]=="object"))))}function TRe(n){return dt().f[7]++,dt().s[7]++,dt().b[7][0]++,dae(n)||(dt().b[7][1]++,IRe(n))}function IF(n){dt().f[8]++;const e=(dt().s[8]++,["string","boolean","number"]);return dt().s[9]++,e.includes(typeof n)}function jH(n){return dt().f[9]++,dt().s[10]++,Array.isArray(n)?(dt().b[8][0]++,dt().s[11]++,n.every(IF)):(dt().b[8][1]++,dt().s[12]++,!1)}function NH(n,e=(dt().b[9][0]++,{})){return dt().f[10]++,dt().s[13]++,n===void 0?(dt().b[10][0]++,dt().s[14]++,"value"):(dt().b[10][1]++,dt().s[15]++,IF(n)?(dt().b[11][0]++,dt().s[16]++,"value"):(dt().b[11][1]++,dt().s[17]++,dt().b[13][0]++,e.type==="array"&&(dt().b[13][1]++,jH(n))?(dt().b[12][0]++,dt().s[18]++,"value"):(dt().b[12][1]++,dt().s[19]++,dt().b[15][0]++,e.type==="numberArray"&&(dt().b[15][1]++,jH(n))?(dt().b[14][0]++,dt().s[20]++,"value"):(dt().b[14][1]++,dt().s[21]++,e.type==="colorArray"?(dt().b[16][0]++,dt().s[22]++,"value"):(dt().b[16][1]++,dt().s[23]++,e.type==="padding"?(dt().b[17][0]++,dt().s[24]++,"value"):(dt().b[17][1]++,dt().s[25]++,e.type==="variableAnchorOffsetCollection"?(dt().b[18][0]++,dt().s[26]++,"value"):(dt().b[18][1]++,dt().s[27]++,ORe(n)?(dt().b[19][0]++,dt().s[28]++,"zoom_function"):(dt().b[19][1]++,dt().s[29]++,TRe(n)?(dt().b[20][0]++,dt().s[30]++,"data_function"):(dt().b[20][1]++,dt().s[31]++,"expression")))))))))}dt().s[32]++;const kRe=n=>{dt().f[11]++;const[e,t]=(dt().s[33]++,En.useState(NH(n.value,n.fieldSpec))),[i,r]=(dt().s[34]++,En.useState(!1));dt().s[35]++,En.useEffect(()=>{dt().f[12]++,dt().s[36]++,i?dt().b[21][1]++:(dt().b[21][0]++,dt().s[37]++,t(NH(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),dt().s[38]++;const o=X=>(dt().f[13]++,dt().s[39]++,X.expression.interpolated?(dt().b[22][0]++,dt().s[40]++,"exponential"):(dt().b[22][1]++,dt().s[41]++,X.type==="number"?(dt().b[23][0]++,dt().s[42]++,"interval"):(dt().b[23][1]++,dt().s[43]++,"categorical")));dt().s[44]++;const s=()=>{dt().f[14]++;const X=(dt().s[45]++,n.value.stops.slice(0)),re=(dt().s[46]++,X[X.length-1]);dt().s[47]++,typeof re[0]=="object"?(dt().b[24][0]++,dt().s[48]++,X.push([{zoom:re[0].zoom+1,value:re[0].value},re[1]])):(dt().b[24][1]++,dt().s[49]++,X.push([re[0]+1,re[1]]));const ee=(dt().s[50]++,{...n.value,stops:X});dt().s[51]++,n.onChange(n.fieldName,ee)};dt().s[52]++;const a=()=>{dt().f[15]++;const{fieldSpec:X,fieldName:re}=(dt().s[53]++,n);dt().s[54]++,n.onChange(re,X.default),dt().s[55]++,t("value")};dt().s[56]++;const c=X=>{dt().f[16]++;const re=(dt().s[57]++,n.value.stops.slice(0));dt().s[58]++,re.splice(X,1);let ee=(dt().s[59]++,{...n.value,stops:re});dt().s[60]++,re.length===1?(dt().b[25][0]++,dt().s[61]++,ee=re[0][1]):dt().b[25][1]++,dt().s[62]++,n.onChange(n.fieldName,ee)};dt().s[63]++;const d=()=>{dt().f[17]++;const{value:X}=(dt().s[64]++,n);let re;dt().s[65]++,typeof X=="object"?(dt().b[26][0]++,dt().s[66]++,X.stops?(dt().b[27][0]++,dt().s[67]++,re={base:X.base,stops:X.stops.map(ee=>(dt().f[18]++,dt().s[68]++,[ee[0].zoom,(dt().b[28][0]++,ee[1]||(dt().b[28][1]++,dm(n.fieldSpec)))]))}):(dt().b[27][1]++,dt().s[69]++,re={base:X.base,stops:[[6,dm(n.fieldSpec)],[10,dm(n.fieldSpec)]]})):(dt().b[26][1]++,dt().s[70]++,re={stops:[[6,(dt().b[29][0]++,X||(dt().b[29][1]++,dm(n.fieldSpec)))],[10,(dt().b[30][0]++,X||(dt().b[30][1]++,dm(n.fieldSpec)))]]}),dt().s[71]++,n.onChange(n.fieldName,re)};dt().s[72]++;const p=()=>{dt().f[19]++;const{value:X,fieldName:re}=(dt().s[73]++,n);dt().s[74]++,zH(X)?(dt().b[31][0]++,dt().s[75]++,n.onChange(re,{type:"identity",property:X[1]}),dt().s[76]++,t("value")):(dt().b[31][1]++,dt().s[77]++,FH(X)?(dt().b[32][0]++,dt().s[78]++,n.onChange(re,X[1]),dt().s[79]++,t("value")):dt().b[32][1]++)};dt().s[80]++;const v=()=>{dt().f[20]++;const{value:X,fieldSpec:re}=(dt().s[81]++,n);return dt().s[82]++,dt().b[33][0]++,zH(X)||(dt().b[33][1]++,FH(X))||(dt().b[33][2]++,IF(X))||(dt().b[33][3]++,Array.isArray(X)&&(dt().b[33][4]++,re.type==="array"))};dt().s[83]++;const M=()=>{dt().f[21]++;const{value:X,fieldSpec:re}=(dt().s[84]++,n);let ee;dt().s[85]++,dt().b[35][0]++,typeof X=="object"&&(dt().b[35][1]++,"stops"in X)?(dt().b[34][0]++,dt().s[86]++,ee=_de.convertFunction(X,re)):(dt().b[34][1]++,dt().s[87]++,dae(X)?(dt().b[36][0]++,dt().s[88]++,ee=["get",X.property]):(dt().b[36][1]++,dt().s[89]++,ee=["literal",(dt().b[37][0]++,X||(dt().b[37][1]++,n.fieldSpec.default))])),dt().s[90]++,n.onChange(n.fieldName,ee)};dt().s[91]++;const E=()=>{dt().f[22]++;const X=(dt().s[92]++,o(n.fieldSpec)),re=(dt().s[93]++,X==="categorical"?(dt().b[38][0]++,""):(dt().b[38][1]++,0)),{value:ee}=(dt().s[94]++,n);let ne;dt().s[95]++,typeof ee=="object"?(dt().b[39][0]++,dt().s[96]++,ee.stops?(dt().b[40][0]++,dt().s[97]++,ne={property:"",type:X,base:ee.base,stops:ee.stops.map(q=>(dt().f[23]++,dt().s[98]++,[{zoom:q[0],value:re},(dt().b[41][0]++,q[1]||(dt().b[41][1]++,dm(n.fieldSpec)))]))}):(dt().b[40][1]++,dt().s[99]++,ne={property:"",type:X,base:ee.base,stops:[[{zoom:6,value:re},dm(n.fieldSpec)],[{zoom:10,value:re},dm(n.fieldSpec)]]})):(dt().b[39][1]++,dt().s[100]++,ne={property:"",type:X,base:ee.base,stops:[[{zoom:6,value:re},(dt().b[42][0]++,n.value||(dt().b[42][1]++,dm(n.fieldSpec)))],[{zoom:10,value:re},(dt().b[43][0]++,n.value||(dt().b[43][1]++,dm(n.fieldSpec)))]]}),dt().s[101]++,n.onChange(n.fieldName,ne)};dt().s[102]++;const P=()=>{dt().f[24]++;const X=(dt().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);dt().s[104]++,n.onChange(n.fieldName,X)};dt().s[105]++;const U=()=>{dt().f[25]++,dt().s[106]++,r(!0)};dt().s[107]++;const z=()=>{dt().f[26]++,dt().s[108]++,r(!1)},V=(dt().s[109]++,n.fieldSpec.default===n.value?(dt().b[44][0]++,"maputnik-default-property"):(dt().b[44][1]++,"maputnik-modified-property"));let Z;return dt().s[110]++,e==="expression"?(dt().b[45][0]++,dt().s[111]++,Z=oe.jsx(Mse,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:v,onUndo:p,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:U,onBlur:z})):(dt().b[45][1]++,dt().s[112]++,e==="zoom_function"?(dt().b[46][0]++,dt().s[113]++,Z=oe.jsx(BRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:E,onExpressionClick:M})):(dt().b[46][1]++,dt().s[114]++,e==="data_function"?(dt().b[47][0]++,dt().s[115]++,Z=oe.jsx(SRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:d,onExpressionClick:M})):(dt().b[47][1]++,dt().s[116]++,Z=oe.jsx(xRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:d,onDataClick:E,onExpressionClick:M,onElevationClick:P})))),dt().s[117]++,oe.jsx("div",{className:V,"data-wd-key":"spec-field-container:"+n.fieldName,children:Z})};function kr(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kr=function(){return s},s}kr();const DRe=(kr().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function RRe(n,e,t){kr().f[0]++;const i=(kr().s[1]++,fae(n,e,t)),r=(kr().s[2]++,n[i+"_"+e]),o=(kr().s[3]++,r[t]);return kr().s[4]++,DRe.indexOf(t)>=0?(kr().b[0][0]++,kr().s[5]++,{...o,values:n.$root.sprite.values}):(kr().b[0][1]++,kr().s[6]++,t==="text-font"?(kr().b[1][0]++,kr().s[7]++,{...o,values:n.$root.glyphs.values}):(kr().b[1][1]++,kr().s[8]++,o))}function fae(n,e,t){kr().f[1]++;const i=(kr().s[9]++,kr().b[2][0]++,n["paint_"+e]||(kr().b[2][1]++,{}));return kr().s[10]++,t in i?(kr().b[3][0]++,"paint"):(kr().b[3][1]++,"layout")}class PRe extends En.Component{onPropertyChange=(kr().s[11]++,(e,t)=>{kr().f[2]++;const i=(kr().s[12]++,fae(this.props.spec,this.props.layer.type,e));kr().s[13]++,this.props.onChange(i,e,t)});render(){kr().f[3]++;const{errors:e}=(kr().s[14]++,this.props),t=(kr().s[15]++,this.props.groupFields.map(i=>{kr().f[4]++;const r=(kr().s[16]++,RRe(this.props.spec,this.props.layer.type,i)),o=(kr().s[17]++,kr().b[4][0]++,this.props.layer.paint||(kr().b[4][1]++,{})),s=(kr().s[18]++,kr().b[5][0]++,this.props.layer.layout||(kr().b[5][1]++,{})),a=(kr().s[19]++,i in o?(kr().b[6][0]++,o[i]):(kr().b[6][1]++,s[i])),c=(kr().s[20]++,i in o?(kr().b[7][0]++,"paint"):(kr().b[7][1]++,"layout"));return kr().s[21]++,oe.jsx(kRe,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return kr().s[22]++,oe.jsx("div",{className:"maputnik-property-group",children:t})}}function j2(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return j2=function(){return s},s}j2();class URe extends En.Component{render(){return j2().f[0]++,j2().s[0]++,oe.jsxs(Cse,{uuid:this.props.id,children:[oe.jsx(xse,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(j2().f[1]++,j2().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:oe.jsxs(JTe,{className:"maputnik-layer-editor-group__button",children:[oe.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),oe.jsx(uJ,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),oe.jsx(lJ,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),oe.jsx(ike,{children:this.props.children})]})}}function Db(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Db=function(){return s},s}Db();Db().s[0]++;const LRe=n=>{Db().f[0]++;const e=(Db().s[1]++,n.t);return Db().s[2]++,oe.jsx(ds,{label:e("Min Zoom"),fieldSpec:Yr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:oe.jsx(V1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Yr.layer.minzoom.minimum,max:Yr.layer.minzoom.maximum,default:Yr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},KRe=(Db().s[3]++,So()(LRe));function Rb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rb=function(){return s},s}Rb();Rb().s[0]++;const FRe=n=>{Rb().f[0]++;const e=(Rb().s[1]++,n.t);return Rb().s[2]++,oe.jsx(ds,{label:e("Max Zoom"),fieldSpec:Yr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:oe.jsx(V1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Yr.layer.maxzoom.minimum,max:Yr.layer.maxzoom.maximum,default:Yr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},zRe=(Rb().s[3]++,So()(FRe));function wv(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wv=function(){return s},s}wv();wv().s[0]++;const jRe=n=>{wv().f[0]++;const e=(wv().s[1]++,n.t),t=(wv().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return wv().s[3]++,oe.jsx(ds,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:oe.jsx(Wp,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},NRe=(wv().s[4]++,So()(jRe));function N2(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return N2=function(){return s},s}N2();function mae(n){return N2().f[0]++,N2().s[0]++,n===""?(N2().b[0][0]++,"[empty_string]"):(N2().b[0][1]++,`'${n}'`)}function Ht(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="838074c1cccc813ecacd0208f5f23e782debdabc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YAAO,eAAY,uBAClB,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"838074c1cccc813ecacd0208f5f23e782debdabc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ht=function(){return s},s}Ht();function GRe(n){Ht().f[0]++;const e=(Ht().s[0]++,[]);return Ht().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(Cm.layout_symbol).filter(t=>(Ht().f[1]++,Ht().s[2]++,t.startsWith("symbol-")))}),Ht().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(Cm.layout_symbol).filter(t=>(Ht().f[2]++,Ht().s[4]++,t.startsWith("text-")))}),Ht().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(Cm.layout_symbol).filter(t=>(Ht().f[3]++,Ht().s[6]++,t.startsWith("icon-")))}),Ht().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(Cm.paint_symbol).filter(t=>(Ht().f[4]++,Ht().s[8]++,t.startsWith("text-")))}),Ht().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(Cm.paint_symbol).filter(t=>(Ht().f[5]++,Ht().s[10]++,t.startsWith("icon-")))}),Ht().s[11]++,e}function pae(n,e){if(Ht().f[6]++,Ht().s[12]++,Object.keys(Cm.layer.type.values).indexOf(n)<0)return Ht().b[0][0]++,Ht().s[13]++,[];if(Ht().b[0][1]++,Ht().s[14]++,n==="symbol")return Ht().b[1][0]++,Ht().s[15]++,GRe(e);Ht().b[1][1]++;const t=(Ht().s[16]++,[]);return Ht().s[17]++,Object.keys(Cm["paint_"+n]).length>0?(Ht().b[2][0]++,Ht().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(Cm["paint_"+n])})):Ht().b[2][1]++,Ht().s[19]++,Object.keys(Cm["layout_"+n]).length>0?(Ht().b[3][0]++,Ht().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(Cm["layout_"+n])})):Ht().b[3][1]++,Ht().s[21]++,t}function GH(n,e){Ht().f[7]++;const t=(Ht().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(Ht().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(Ht().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Ht().s[25]++,[t,i].concat(pae(n,e)).concat([r])}class WRe extends En.Component{static defaultProps=(Ht().s[26]++,{onLayerChanged:()=>{Ht().f[8]++},onLayerIdChange:()=>{Ht().f[9]++},onLayerDestroyed:()=>{Ht().f[10]++}});constructor(e){Ht().f[11]++,Ht().s[27]++,super(e);const t=(Ht().s[28]++,{});Ht().s[29]++;for(const i of GH(this.props.layer.type,e.t))Ht().s[30]++,t[i.title]=!0;Ht().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Ht().f[12]++;const i=(Ht().s[32]++,{...t.editorGroups});Ht().s[33]++;for(const r of pae(e.layer.type,e.t))Ht().s[34]++,r.title in i?Ht().b[4][1]++:(Ht().b[4][0]++,Ht().s[35]++,i[r.title]=!0);return Ht().s[36]++,{editorGroups:i}}changeProperty(e,t,i){Ht().f[13]++,Ht().s[37]++,this.props.onLayerChanged(this.props.layerIndex,fTe(this.props.layer,e,t,i))}onGroupToggle(e,t){Ht().f[14]++;const i=(Ht().s[38]++,{...this.state.editorGroups,[e]:t});Ht().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){Ht().f[15]++;let i=(Ht().s[40]++,"");Ht().s[41]++,this.props.layer.metadata?(Ht().b[5][0]++,Ht().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):Ht().b[5][1]++;const{errors:r,layerIndex:o}=(Ht().s[43]++,this.props),s=(Ht().s[44]++,{});Ht().s[45]++,r.forEach(d=>{Ht().f[16]++,Ht().s[46]++,Ht().b[7][0]++,d.parsed&&(Ht().b[7][1]++,d.parsed.type==="layer")&&(Ht().b[7][2]++,d.parsed.data.index==o)?(Ht().b[6][0]++,Ht().s[47]++,s[d.parsed.data.key]={message:d.parsed.data.message}):Ht().b[6][1]++});let a;const c=(Ht().s[48]++,this.props.layer);switch(Ht().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?(Ht().b[8][0]++,Ht().s[50]++,a=this.props.sources[c.source].layers):Ht().b[8][1]++,Ht().s[51]++,e){case"layer":return Ht().b[9][0]++,Ht().s[52]++,oe.jsxs("div",{children:[oe.jsx(Yoe,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:d=>(Ht().f[17]++,Ht().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,d))}),oe.jsx(qoe,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:d=>(Ht().f[18]++,Ht().s[54]++,this.props.onLayerChanged(this.props.layerIndex,dTe(this.props.layer,d)))}),(Ht().b[10][0]++,this.props.layer.type!=="background"&&(Ht().b[10][1]++,oe.jsx(Ase,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:d=>(Ht().f[19]++,Ht().s[55]++,this.changeProperty(null,"source",d))}))),(Ht().b[11][0]++,!wP.includes(this.props.layer.type)&&(Ht().b[11][1]++,oe.jsx(hse,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:d=>(Ht().f[20]++,Ht().s[56]++,this.changeProperty(null,"source-layer",d))}))),oe.jsx(KRe,{error:s.minzoom,value:this.props.layer.minzoom,onChange:d=>(Ht().f[21]++,Ht().s[57]++,this.changeProperty(null,"minzoom",d))}),oe.jsx(zRe,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:d=>(Ht().f[22]++,Ht().s[58]++,this.changeProperty(null,"maxzoom",d))}),oe.jsx(NRe,{error:s.comment,value:i,onChange:d=>(Ht().f[23]++,Ht().s[59]++,this.changeProperty("metadata","maputnik:comment",d==""?(Ht().b[12][0]++,void 0):(Ht().b[12][1]++,d)))})]});case"filter":return Ht().b[9][1]++,Ht().s[60]++,oe.jsx("div",{children:oe.jsx("div",{className:"maputnik-filter-editor-wrapper",children:oe.jsx(vke,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:d=>(Ht().f[24]++,Ht().s[61]++,this.changeProperty(null,"filter",d))})})});case"properties":return Ht().b[9][2]++,Ht().s[62]++,oe.jsx(PRe,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Ht().b[9][3]++,Ht().s[63]++,oe.jsx(mO,{lintType:"layer",value:this.props.layer,onChange:d=>{Ht().f[25]++,Ht().s[64]++,this.props.onLayerChanged(this.props.layerIndex,d)}});default:return Ht().b[9][4]++,Ht().s[65]++,oe.jsx(oe.Fragment,{})}}moveLayer(e){Ht().f[26]++,Ht().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Ht().f[27]++;const e=(Ht().s[67]++,this.props.t),t=(Ht().s[68]++,[]),i=(Ht().s[69]++,this.props.layer.type),r=(Ht().s[70]++,GH(i,e).filter(c=>(Ht().f[28]++,Ht().s[71]++,Ht().b[13][0]++,!(i==="background"&&(Ht().b[13][1]++,c.type==="source")))).map(c=>{Ht().f[29]++;const d=(Ht().s[72]++,c.id);return Ht().s[73]++,t.push(d),Ht().s[74]++,oe.jsx(URe,{"data-wd-key":c.title,id:d,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},d)})),o=(Ht().s[75]++,Ht().b[14][0]++,this.props.layer.layout||(Ht().b[14][1]++,{})),s=(Ht().s[76]++,{delete:{text:e("Delete"),handler:()=>(Ht().f[30]++,Ht().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(Ht().f[31]++,Ht().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?(Ht().b[15][0]++,e("Show")):(Ht().b[15][1]++,e("Hide")),handler:()=>(Ht().f[32]++,Ht().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Ht().f[33]++,Ht().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Ht().f[34]++,Ht().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,d){Ht().f[35]++,Ht().s[82]++,d.stopPropagation(),Ht().s[83]++,s[c].handler()}return Ht().s[84]++,oe.jsx(dx.Provider,{value:{size:"14px",color:"#8e8e8e"},children:oe.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[oe.jsx("header",{"data-wd-key":"layer-editor.header",children:oe.jsxs("div",{className:"layer-header",children:[oe.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:mae(this.props.layer.id)})}),oe.jsx("div",{className:"layer-header__info",children:oe.jsxs(cS.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[oe.jsx(cS.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:oe.jsx(sme,{className:"more-menu__button__svg"})}),oe.jsx(cS.Menu,{children:oe.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{Ht().f[36]++;const d=(Ht().s[85]++,s[c]);return Ht().s[86]++,oe.jsx("li",{children:oe.jsx(cS.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":d.wdKey,children:d.text})},c)})})})]})})]})}),oe.jsx(zTe,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const QRe=(Ht().s[87]++,So()(WRe));var WH=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},qRe=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),YRe=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),VRe=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),$Re=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),HRe=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),ZRe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,XRe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,QH=3,JRe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ZRe]],qH=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ePe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new HRe:typeof navigator<"u"?nPe(navigator.userAgent):rPe()}function tPe(n){return n!==""&&JRe.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function nPe(n){var e=tPe(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new $Re;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<QH&&(r=WH(WH([],r,!0),oPe(QH-r.length),!0)):r=[];var o=r.join("."),s=iPe(n),a=XRe.exec(n);return a&&a[1]?new VRe(t,o,s,a[1]):new qRe(t,o,s)}function iPe(n){for(var e=0,t=qH.length;e<t;e++){var i=qH[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function rPe(){var n=typeof process<"u"&&process.version;return n?new YRe(process.version.slice(1)):null}function oPe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const sPe="maputnik",aPe="3.0.0",YH={name:sPe,version:aPe},lPe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Fi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="b1db351d0c47799db6b375c4cdc14373feef0b12",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:21,column:16},end:{line:21,column:24}},1:{start:{line:22,column:41},end:{line:22,column:89}},2:{start:{line:25,column:4},end:{line:25,column:107}},3:{start:{line:30,column:4},end:{line:40,column:6}},4:{start:{line:45,column:4},end:{line:52,column:6}},5:{start:{line:57,column:4},end:{line:65,column:6}},6:{start:{line:69,column:10},end:{line:77,column:3}},7:{start:{line:79,column:4},end:{line:79,column:34}},8:{start:{line:82,column:4},end:{line:82,column:40}},9:{start:{line:84,column:11},end:{line:91,column:3}},10:{start:{line:85,column:4},end:{line:90,column:5}},11:{start:{line:86,column:6},end:{line:86,column:59}},12:{start:{line:88,column:17},end:{line:88,column:65}},13:{start:{line:89,column:6},end:{line:89,column:17}},14:{start:{line:93,column:14},end:{line:93,column:26}},15:{start:{line:94,column:18},end:{line:130,column:5}},16:{start:{line:131,column:24},end:{line:133,column:6}},17:{start:{line:132,column:6},end:{line:132,column:45}},18:{start:{line:134,column:4},end:{line:264,column:12}},19:{start:{line:145,column:33},end:{line:145,column:58}},20:{start:{line:154,column:33},end:{line:154,column:60}},21:{start:{line:163,column:33},end:{line:163,column:51}},22:{start:{line:190,column:80},end:{line:190,column:112}},23:{start:{line:194,column:82},end:{line:194,column:116}},24:{start:{line:198,column:87},end:{line:198,column:125}},25:{start:{line:202,column:80},end:{line:202,column:112}},26:{start:{line:206,column:83},end:{line:206,column:118}},27:{start:{line:210,column:84},end:{line:210,column:120}},28:{start:{line:214,column:88},end:{line:214,column:127}},29:{start:{line:227,column:33},end:{line:227,column:69}},30:{start:{line:230,column:38},end:{line:230,column:59}},31:{start:{line:231,column:20},end:{line:231,column:157}},32:{start:{line:233,column:115},end:{line:233,column:148}},33:{start:{line:234,column:20},end:{line:234,column:133}},34:{start:{line:250,column:33},end:{line:250,column:74}},35:{start:{line:253,column:18},end:{line:253,column:94}},36:{start:{line:267,column:19},end:{line:267,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:11},end:{line:26,column:3}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:11},end:{line:41,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:53,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:11},end:{line:66,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:23},end:{line:80,column:3}},line:78},5:{name:"(anonymous_5)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:28},end:{line:83,column:3}},line:81},6:{name:"(anonymous_6)",decl:{start:{line:84,column:11},end:{line:84,column:12}},loc:{start:{line:84,column:23},end:{line:91,column:3}},line:84},7:{name:"(anonymous_7)",decl:{start:{line:92,column:2},end:{line:92,column:3}},loc:{start:{line:92,column:11},end:{line:265,column:3}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:131,column:35},end:{line:131,column:36}},loc:{start:{line:131,column:45},end:{line:133,column:5}},line:131},9:{name:"(anonymous_9)",decl:{start:{line:145,column:25},end:{line:145,column:26}},loc:{start:{line:145,column:33},end:{line:145,column:58}},line:145},10:{name:"(anonymous_10)",decl:{start:{line:154,column:25},end:{line:154,column:26}},loc:{start:{line:154,column:33},end:{line:154,column:60}},line:154},11:{name:"(anonymous_11)",decl:{start:{line:163,column:25},end:{line:163,column:26}},loc:{start:{line:163,column:33},end:{line:163,column:51}},line:163},12:{name:"(anonymous_12)",decl:{start:{line:190,column:74},end:{line:190,column:75}},loc:{start:{line:190,column:80},end:{line:190,column:112}},line:190},13:{name:"(anonymous_13)",decl:{start:{line:194,column:76},end:{line:194,column:77}},loc:{start:{line:194,column:82},end:{line:194,column:116}},line:194},14:{name:"(anonymous_14)",decl:{start:{line:198,column:81},end:{line:198,column:82}},loc:{start:{line:198,column:87},end:{line:198,column:125}},line:198},15:{name:"(anonymous_15)",decl:{start:{line:202,column:74},end:{line:202,column:75}},loc:{start:{line:202,column:80},end:{line:202,column:112}},line:202},16:{name:"(anonymous_16)",decl:{start:{line:206,column:77},end:{line:206,column:78}},loc:{start:{line:206,column:83},end:{line:206,column:118}},line:206},17:{name:"(anonymous_17)",decl:{start:{line:210,column:78},end:{line:210,column:79}},loc:{start:{line:210,column:84},end:{line:210,column:120}},line:210},18:{name:"(anonymous_18)",decl:{start:{line:214,column:82},end:{line:214,column:83}},loc:{start:{line:214,column:88},end:{line:214,column:127}},line:214},19:{name:"(anonymous_19)",decl:{start:{line:227,column:26},end:{line:227,column:27}},loc:{start:{line:227,column:33},end:{line:227,column:69}},line:227},20:{name:"(anonymous_20)",decl:{start:{line:230,column:31},end:{line:230,column:32}},loc:{start:{line:230,column:38},end:{line:230,column:59}},line:230},21:{name:"(anonymous_21)",decl:{start:{line:230,column:65},end:{line:230,column:66}},loc:{start:{line:230,column:75},end:{line:232,column:19}},line:230},22:{name:"(anonymous_22)",decl:{start:{line:233,column:108},end:{line:233,column:109}},loc:{start:{line:233,column:115},end:{line:233,column:148}},line:233},23:{name:"(anonymous_23)",decl:{start:{line:233,column:154},end:{line:233,column:155}},loc:{start:{line:233,column:164},end:{line:235,column:19}},line:233},24:{name:"(anonymous_24)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:33},end:{line:250,column:74}},line:250},25:{name:"(anonymous_25)",decl:{start:{line:252,column:65},end:{line:252,column:66}},loc:{start:{line:252,column:83},end:{line:254,column:17}},line:252}},branchMap:{0:{loc:{start:{line:85,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:85,column:4},end:{line:90,column:5}},{start:{line:87,column:11},end:{line:90,column:5}}],line:85}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAoCW,SAAA,KAwLG,YAxLH;AApCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b1db351d0c47799db6b375c4cdc14373feef0b12"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Fi=function(){return s},s}Fi();const uPe=(Fi().s[0]++,ePe()),pS=(Fi().s[1]++,["chrome","firefox"].indexOf(uPe.name)>-1);class J0 extends En.Component{render(){return Fi().f[0]++,Fi().s[2]++,oe.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class cPe extends En.Component{render(){return Fi().f[1]++,Fi().s[3]++,oe.jsx("a",{className:Ug("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class VH extends En.Component{render(){return Fi().f[2]++,Fi().s[4]++,oe.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class XC extends En.Component{render(){return Fi().f[3]++,Fi().s[5]++,oe.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class APe extends En.Component{state=(Fi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Fi().f[4]++,Fi().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Fi().f[5]++,Fi().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Fi().s[9]++,e=>{if(Fi().f[6]++,Fi().s[10]++,e==="map")Fi().b[0][0]++,Fi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Fi().b[0][1]++;const t=(Fi().s[12]++,document.querySelector("#skip-target-"+e));Fi().s[13]++,t.focus()}});render(){Fi().f[7]++;const e=(Fi().s[14]++,this.props.t),t=(Fi().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!pS},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!pS},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!pS},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!pS}]),i=(Fi().s[16]++,t.find(r=>(Fi().f[8]++,Fi().s[17]++,r.id===this.props.mapState)));return Fi().s[18]++,oe.jsx("nav",{className:"maputnik-toolbar",children:oe.jsxs("div",{className:"maputnik-toolbar__inner",children:[oe.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[oe.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Fi().f[9]++,Fi().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),oe.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Fi().f[10]++,Fi().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),oe.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Fi().f[11]++,Fi().s[21]++,this.onSkip("map")),children:e("Map view")}),oe.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[oe.jsx("img",{src:lPe,alt:e("Maputnik on GitHub")}),oe.jsxs("h1",{children:[oe.jsx("span",{className:"maputnik-toolbar-name",children:YH.name}),oe.jsxs("span",{className:"maputnik-toolbar-version",children:["v",YH.version]})]})]})]}),oe.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[oe.jsxs(XC,{wdKey:"nav:open",onClick:()=>(Fi().f[12]++,Fi().s[22]++,this.props.onToggleModal("open")),children:[oe.jsx(qfe,{}),oe.jsx(J0,{children:e("Open")})]}),oe.jsxs(XC,{wdKey:"nav:export",onClick:()=>(Fi().f[13]++,Fi().s[23]++,this.props.onToggleModal("export")),children:[oe.jsx(pD,{}),oe.jsx(J0,{children:e("Save")})]}),oe.jsxs(XC,{wdKey:"nav:code-editor",onClick:()=>(Fi().f[14]++,Fi().s[24]++,this.props.onToggleModal("codeEditor")),children:[oe.jsx(zfe,{}),oe.jsx(J0,{children:e("Code Editor")})]}),oe.jsxs(XC,{wdKey:"nav:chat",onClick:()=>(Fi().f[15]++,Fi().s[25]++,this.props.onToggleModal("chat")),children:[oe.jsx(Hfe,{}),oe.jsx(J0,{children:e("Chat")})]}),oe.jsxs(XC,{wdKey:"nav:sources",onClick:()=>(Fi().f[16]++,Fi().s[26]++,this.props.onToggleModal("sources")),children:[oe.jsx(ime,{}),oe.jsx(J0,{children:e("Data Sources")})]}),oe.jsxs(XC,{wdKey:"nav:settings",onClick:()=>(Fi().f[17]++,Fi().s[27]++,this.props.onToggleModal("settings")),children:[oe.jsx(Yfe,{}),oe.jsx(J0,{children:e("Style Settings")})]}),oe.jsxs(XC,{wdKey:"nav:global-state",onClick:()=>(Fi().f[18]++,Fi().s[28]++,this.props.onToggleModal("globalState")),children:[oe.jsx(lme,{}),oe.jsx(J0,{children:e("Global State")})]}),oe.jsxs(VH,{wdKey:"nav:inspect",children:[oe.jsx(jfe,{}),oe.jsxs(J0,{children:[e("View"),oe.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Fi().f[19]++,Fi().s[29]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Fi().f[20]++,Fi().s[30]++,r.group==="general")).map(r=>(Fi().f[21]++,Fi().s[31]++,oe.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),oe.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Fi().f[22]++,Fi().s[32]++,r.group==="color-accessibility")).map(r=>(Fi().f[23]++,Fi().s[33]++,oe.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),oe.jsxs(VH,{wdKey:"nav:language",children:[oe.jsx(Qfe,{}),oe.jsxs(J0,{children:["Language",oe.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Fi().f[24]++,Fi().s[34]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(OZ).map(([r,o])=>(Fi().f[25]++,Fi().s[35]++,oe.jsx("option",{value:r,children:o},r)))})]})]}),oe.jsxs(cPe,{href:"https://github.com/maplibre/maputnik/wiki",children:[oe.jsx(Nfe,{}),oe.jsx(J0,{children:e("Help")})]})]})]})})}}const hPe=(Fi().s[36]++,So()(APe));function T6(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return T6=function(){return s},s}T6();class $H extends En.Component{render(){return T6().f[0]++,T6().s[0]++,oe.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function mm(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mm=function(){return s},s}mm();class dPe extends En.Component{render(){return mm().f[0]++,mm().s[0]++,document.body.dir=this.props.i18n.dir(),mm().s[1]++,oe.jsx(dx.Provider,{value:{size:"14px"},children:oe.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,oe.jsxs("div",{className:"maputnik-layout-main",children:[(mm().b[0][0]++,this.props.codeEditor&&(mm().b[0][1]++,oe.jsx("div",{className:"maputnik-layout-code-editor",children:oe.jsx($H,{children:this.props.codeEditor})}))),(mm().b[1][0]++,!this.props.codeEditor&&(mm().b[1][1]++,oe.jsxs(oe.Fragment,{children:[oe.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),oe.jsx("div",{className:"maputnik-layout-drawer",children:oe.jsx($H,{children:this.props.layerEditor})})]}))),this.props.map]}),(mm().b[2][0]++,this.props.bottom&&(mm().b[2][1]++,oe.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const fPe=(mm().s[2]++,So()(dPe));function Ca(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ca=function(){return s},s}Ca();class mPe extends En.Component{static defaultProps=(Ca().s[0]++,{onLayerSelect:()=>{Ca().f[0]++}});render(){Ca().f[1]++;const{t:e,selectedLayerIndex:t}=(Ca().s[1]++,this.props),i=(Ca().s[2]++,this.props.errors?.map((o,s)=>{Ca().f[2]++;let a;if(Ca().s[3]++,Ca().b[1][0]++,o.parsed&&(Ca().b[1][1]++,o.parsed.type==="layer")){Ca().b[0][0]++;const{parsed:c}=(Ca().s[4]++,o),d=(Ca().s[5]++,this.props.mapStyle?.layers[c.data.index].id);Ca().s[6]++,a=oe.jsxs(oe.Fragment,{children:[oe.jsxs(Cb,{t:e,children:["Layer ",oe.jsx("span",{children:mae(d)}),": ",c.data.message]}),(Ca().b[2][0]++,t!==c.data.index&&(Ca().b[2][1]++,oe.jsxs(oe.Fragment,{children:["",oe.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(Ca().f[3]++,Ca().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else Ca().b[0][1]++,Ca().s[8]++,a=o.message;return Ca().s[9]++,oe.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(Ca().s[10]++,this.props.infos?.map((o,s)=>(Ca().f[4]++,Ca().s[11]++,oe.jsx("p",{children:o},"info-"+s))));return Ca().s[12]++,oe.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const pPe=(Ca().s[13]++,So()(mPe));function Y5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Y5=function(){return s},s}Y5();Y5().s[0]++;const k6=n=>(Y5().f[0]++,Y5().s[1]++,oe.jsx(mv,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(IP,{...n})}));function V5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return V5=function(){return s},s}V5();V5().s[0]++;const Bp=n=>(V5().f[0]++,V5().s[1]++,oe.jsx(ds,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(V1,{...n})}));function $5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $5=function(){return s},s}$5();$5().s[0]++;const wd=n=>($5().f[0]++,$5().s[1]++,oe.jsx(ds,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(Wp,{...n})}));function H5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return H5=function(){return s},s}H5();H5().s[0]++;const HM=n=>(H5().f[0]++,H5().s[1]++,oe.jsx(ds,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(OF,{...n})}));function Z5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Z5=function(){return s},s}Z5();Z5().s[0]++;const X5=n=>(Z5().f[0]++,Z5().s[1]++,oe.jsx(ds,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(o_,{...n})}));function J5(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return J5=function(){return s},s}J5();J5().s[0]++;const gPe=n=>(J5().f[0]++,J5().s[1]++,oe.jsx(mv,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(EF,{...n})}));function eM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return eM=function(){return s},s}eM();eM().s[0]++;const yPe=n=>(eM().f[0]++,eM().s[1]++,oe.jsx(ds,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(SF,{...n})}));function tM(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tM=function(){return s},s}tM();tM().s[0]++;const gae=n=>(tM().f[0]++,tM().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function kn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="88fb94a6f90f9fea29b8036f99aee1df40b81df7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:18,column:23},end:{line:20,column:5}},1:{start:{line:21,column:4},end:{line:25,column:5}},2:{start:{line:22,column:6},end:{line:22,column:34}},3:{start:{line:24,column:6},end:{line:24,column:35}},4:{start:{line:26,column:4},end:{line:29,column:7}},5:{start:{line:32,column:18},end:{line:34,column:5}},6:{start:{line:35,column:4},end:{line:39,column:5}},7:{start:{line:36,column:6},end:{line:36,column:29}},8:{start:{line:38,column:6},end:{line:38,column:30}},9:{start:{line:40,column:4},end:{line:43,column:7}},10:{start:{line:46,column:20},end:{line:48,column:5}},11:{start:{line:49,column:4},end:{line:53,column:5}},12:{start:{line:50,column:6},end:{line:50,column:31}},13:{start:{line:52,column:6},end:{line:52,column:32}},14:{start:{line:54,column:4},end:{line:57,column:7}},15:{start:{line:60,column:23},end:{line:62,column:5}},16:{start:{line:63,column:4},end:{line:67,column:5}},17:{start:{line:64,column:6},end:{line:64,column:29}},18:{start:{line:66,column:6},end:{line:66,column:30}},19:{start:{line:68,column:4},end:{line:71,column:7}},20:{start:{line:74,column:25},end:{line:76,column:5}},21:{start:{line:77,column:4},end:{line:81,column:5}},22:{start:{line:78,column:6},end:{line:78,column:36}},23:{start:{line:80,column:6},end:{line:80,column:37}},24:{start:{line:82,column:4},end:{line:82,column:44}},25:{start:{line:85,column:21},end:{line:85,column:55}},26:{start:{line:86,column:54},end:{line:86,column:64}},27:{start:{line:87,column:16},end:{line:87,column:38}},28:{start:{line:88,column:18},end:{line:88,column:49}},29:{start:{line:89,column:23},end:{line:89,column:59}},30:{start:{line:90,column:20},end:{line:90,column:53}},31:{start:{line:91,column:23},end:{line:91,column:59}},32:{start:{line:92,column:4},end:{line:335,column:6}},33:{start:{line:107,column:35},end:{line:107,column:74}},34:{start:{line:117,column:35},end:{line:117,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:30,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:39},end:{line:44,column:3}},line:31},2:{name:"(anonymous_2)",decl:{start:{line:45,column:2},end:{line:45,column:3}},loc:{start:{line:45,column:41},end:{line:58,column:3}},line:45},3:{name:"(anonymous_3)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:30},end:{line:72,column:3}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:39},end:{line:83,column:3}},line:73},5:{name:"(anonymous_5)",decl:{start:{line:84,column:2},end:{line:84,column:3}},loc:{start:{line:84,column:11},end:{line:336,column:3}},line:84},6:{name:"(anonymous_6)",decl:{start:{line:107,column:24},end:{line:107,column:25}},loc:{start:{line:107,column:35},end:{line:107,column:74}},line:107},7:{name:"(anonymous_7)",decl:{start:{line:117,column:24},end:{line:117,column:25}},loc:{start:{line:117,column:35},end:{line:117,column:75}},line:117},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:21,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:25,column:5}},{start:{line:23,column:11},end:{line:25,column:5}}],line:21},1:{loc:{start:{line:35,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:39,column:5}},{start:{line:37,column:11},end:{line:39,column:5}}],line:35},2:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:49},3:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},4:{loc:{start:{line:77,column:4},end:{line:81,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:81,column:5}},{start:{line:79,column:11},end:{line:81,column:5}}],line:77},5:{loc:{start:{line:85,column:21},end:{line:85,column:55}},type:"binary-expr",locations:[{start:{line:85,column:21},end:{line:85,column:49}},{start:{line:85,column:53},end:{line:85,column:55}}],line:85},6:{loc:{start:{line:88,column:18},end:{line:88,column:49}},type:"binary-expr",locations:[{start:{line:88,column:18},end:{line:88,column:43}},{start:{line:88,column:47},end:{line:88,column:49}}],line:88},7:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},8:{loc:{start:{line:90,column:20},end:{line:90,column:53}},type:"binary-expr",locations:[{start:{line:90,column:20},end:{line:90,column:47}},{start:{line:90,column:51},end:{line:90,column:53}}],line:90},9:{loc:{start:{line:91,column:23},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:23},end:{line:91,column:53}},{start:{line:91,column:57},end:{line:91,column:59}}],line:91},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAqIM,SACE,KADF;AArIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA,oBAAC,SAAM,OAAO,EAAE,YAAY,GAAG,WAAW,OAAO,MAAM,QAAQ,eAAY,yBACzE;AAAA,YAAC;AAAA;AAAA,cACC,UAAS;AAAA,cACT,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D,GACF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"88fb94a6f90f9fea29b8036f99aee1df40b81df7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kn=function(){return s},s}kn();class vPe extends En.Component{changeTransitionProperty(e,t){kn().f[0]++;const i=(kn().s[0]++,{...this.props.mapStyle.transition});kn().s[1]++,t===void 0?(kn().b[0][0]++,kn().s[2]++,delete i[e]):(kn().b[0][1]++,kn().s[3]++,i[e]=t),kn().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){kn().f[1]++;const i=(kn().s[5]++,{...this.props.mapStyle.light});kn().s[6]++,t===void 0?(kn().b[1][0]++,kn().s[7]++,delete i[e]):(kn().b[1][1]++,kn().s[8]++,i[e]=t),kn().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){kn().f[2]++;const i=(kn().s[10]++,{...this.props.mapStyle.terrain});kn().s[11]++,t===void 0?(kn().b[2][0]++,kn().s[12]++,delete i[e]):(kn().b[2][1]++,kn().s[13]++,i[e]=t),kn().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){kn().f[3]++;const t=(kn().s[15]++,{...this.props.mapStyle.projection});kn().s[16]++,e===void 0?(kn().b[3][0]++,kn().s[17]++,delete t.type):(kn().b[3][1]++,kn().s[18]++,t.type=e),kn().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){kn().f[4]++;const i=(kn().s[20]++,{...this.props.mapStyle});kn().s[21]++,t===void 0?(kn().b[4][0]++,kn().s[22]++,delete i[e]):(kn().b[4][1]++,kn().s[23]++,i[e]=t),kn().s[24]++,this.props.onStyleChanged(i)}render(){kn().f[5]++;const e=(kn().s[25]++,kn().b[5][0]++,this.props.mapStyle.metadata||(kn().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(kn().s[26]++,this.props),o=(kn().s[27]++,gae(t)),s=(kn().s[28]++,kn().b[6][0]++,this.props.mapStyle.light||(kn().b[6][1]++,{})),a=(kn().s[29]++,kn().b[7][0]++,this.props.mapStyle.transition||(kn().b[7][1]++,{})),c=(kn().s[30]++,kn().b[8][0]++,this.props.mapStyle.terrain||(kn().b[8][1]++,{})),d=(kn().s[31]++,kn().b[9][0]++,this.props.mapStyle.projection||(kn().b[9][1]++,{}));return kn().s[32]++,oe.jsx(ey,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:oe.jsxs("div",{className:"modal:settings",children:[oe.jsx(wd,{label:t("Name"),fieldSpec:Yr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:p=>(kn().f[6]++,kn().s[33]++,this.changeStyleProperty("name",p))}),oe.jsx(wd,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:p=>(kn().f[7]++,kn().s[34]++,this.changeStyleProperty("owner",p))}),oe.jsx(ds,{label:t("Sprite URL"),fieldSpec:Yr.$root.sprite,"data-wd-key":"modal:settings.sprite",children:oe.jsx(mO,{lintType:"json",value:this.props.mapStyle.sprite,onChange:p=>(kn().f[8]++,kn().s[35]++,this.changeStyleProperty("sprite",p))})}),oe.jsx(HM,{label:t("Glyphs URL"),fieldSpec:Yr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:p=>(kn().f[9]++,kn().s[36]++,this.changeStyleProperty("glyphs",p))}),oe.jsx(wd,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:p=>(kn().f[10]++,kn().s[37]++,i("maputnik:openmaptiles_access_token",p))}),oe.jsx(wd,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:p=>(kn().f[11]++,kn().s[38]++,i("maputnik:thunderforest_access_token",p))}),oe.jsx(wd,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:p=>(kn().f[12]++,kn().s[39]++,i("maputnik:stadia_access_token",p))}),oe.jsx(wd,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:p=>(kn().f[13]++,kn().s[40]++,i("maputnik:locationiq_access_token",p))}),oe.jsx(k6,{label:t("Center"),fieldSpec:Yr.$root.center,length:2,type:"number",value:(kn().b[10][0]++,r.center||(kn().b[10][1]++,[])),default:[0,0],onChange:p=>(kn().f[14]++,kn().s[41]++,this.changeStyleProperty("center",p))}),oe.jsx(Bp,{label:t("Zoom"),fieldSpec:Yr.$root.zoom,value:r.zoom,default:0,onChange:p=>(kn().f[15]++,kn().s[42]++,this.changeStyleProperty("zoom",p))}),oe.jsx(Bp,{label:t("Bearing"),fieldSpec:Yr.$root.bearing,value:r.bearing,default:Yr.$root.bearing.default,onChange:p=>(kn().f[16]++,kn().s[43]++,this.changeStyleProperty("bearing",p))}),oe.jsx(Bp,{label:t("Pitch"),fieldSpec:Yr.$root.pitch,value:r.pitch,default:Yr.$root.pitch.default,onChange:p=>(kn().f[17]++,kn().s[44]++,this.changeStyleProperty("pitch",p))}),oe.jsx(gPe,{label:t("Light anchor"),fieldSpec:Yr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(Yr.light.anchor.values),default:Yr.light.anchor.default,onChange:p=>(kn().f[18]++,kn().s[45]++,this.changeLightProperty("anchor",p))}),oe.jsx(yPe,{label:t("Light color"),fieldSpec:Yr.light.color,value:s.color,default:Yr.light.color.default,onChange:p=>(kn().f[19]++,kn().s[46]++,this.changeLightProperty("color",p))}),oe.jsx(Bp,{label:t("Light intensity"),fieldSpec:Yr.light.intensity,value:s.intensity,default:Yr.light.intensity.default,onChange:p=>(kn().f[20]++,kn().s[47]++,this.changeLightProperty("intensity",p))}),oe.jsx(k6,{label:t("Light position"),fieldSpec:Yr.light.position,type:"number",length:Yr.light.position.length,value:s.position,default:Yr.light.position.default,onChange:p=>(kn().f[21]++,kn().s[48]++,this.changeLightProperty("position",p))}),oe.jsx(wd,{label:t("Terrain source"),fieldSpec:Yr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:p=>(kn().f[22]++,kn().s[49]++,this.changeTerrainProperty("source",p))}),oe.jsx(Bp,{label:t("Terrain exaggeration"),fieldSpec:Yr.terrain.exaggeration,value:c.exaggeration,default:Yr.terrain.exaggeration.default,onChange:p=>(kn().f[23]++,kn().s[50]++,this.changeTerrainProperty("exaggeration",p))}),oe.jsx(Bp,{label:t("Transition delay"),fieldSpec:Yr.transition.delay,value:a.delay,default:Yr.transition.delay.default,onChange:p=>(kn().f[24]++,kn().s[51]++,this.changeTransitionProperty("delay",p))}),oe.jsx(Bp,{label:t("Transition duration"),fieldSpec:Yr.transition.duration,value:a.duration,default:Yr.transition.duration.default,onChange:p=>(kn().f[25]++,kn().s[52]++,this.changeTransitionProperty("duration",p))}),oe.jsx(X5,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(kn().b[11][0]++,d?.type?.toString()||(kn().b[11][1]++,"")),onChange:p=>(kn().f[26]++,kn().s[53]++,this.changeProjectionType(p))}),oe.jsx(X5,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(kn().b[12][0]++,e["maputnik:renderer"]||(kn().b[12][1]++,"mlgljs")),onChange:p=>(kn().f[27]++,kn().s[54]++,i("maputnik:renderer",p))})]})})}}const CPe=(kn().s[55]++,So()(vPe));var XS={exports:{}},bPe=XS.exports,HH;function _Pe(){return HH||(HH=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",bPe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,d=s.trim===void 0?!0:s.trim,p=o.normalize().split("").reduce(function(v,M){var E=a[M];return E===void 0&&(E=t[M]),E===void 0&&(E=M),E===c&&(E=" "),v+E.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(p=p.replace(/[^A-Za-z0-9\s]/g,"")),d&&(p=p.trim()),p=p.replace(/\s+/g,c),s.lower&&(p=p.toLowerCase()),p}return r.extend=function(o){Object.assign(t,o)},r})})(XS)),XS.exports}var xPe=_Pe();const MPe=xu(xPe);var JS={exports:{}},wPe=JS.exports,ZH;function SPe(){return ZH||(ZH=1,(function(n,e){(function(t,i){i()})(wPe,function(){function t(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function i(d,p,v){var M=new XMLHttpRequest;M.open("GET",d),M.responseType="blob",M.onload=function(){c(M.response,p,v)},M.onerror=function(){console.error("could not download file")},M.send()}function r(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(d,p,v){var M=s.URL||s.webkitURL,E=document.createElement("a");p=p||d.name||"download",E.download=p,E.rel="noopener",typeof d=="string"?(E.href=d,E.origin===location.origin?o(E):r(E.href)?i(d,p,v):o(E,E.target="_blank")):(E.href=M.createObjectURL(d),setTimeout(function(){M.revokeObjectURL(E.href)},4e4),setTimeout(function(){o(E)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,v){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,v),p);else if(r(d))i(d,p,v);else{var M=document.createElement("a");M.href=d,M.target="_blank",setTimeout(function(){o(M)})}}:function(d,p,v,M){if(M=M||open("","_blank"),M&&(M.document.title=M.document.body.innerText="downloading..."),typeof d=="string")return i(d,p,v);var E=d.type==="application/octet-stream",P=/constructor/i.test(s.HTMLElement)||s.safari,U=/CriOS\/[\d]+/.test(navigator.userAgent);if((U||E&&P||a)&&typeof FileReader<"u"){var z=new FileReader;z.onloadend=function(){var X=z.result;X=U?X:X.replace(/^data:[^;]*;/,"data:attachment/file;"),M?M.location.href=X:location=X,M=null},z.readAsDataURL(d)}else{var V=s.URL||s.webkitURL,Z=V.createObjectURL(d);M?M.location=Z:location.href=Z,M=null,setTimeout(function(){V.revokeObjectURL(Z)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(JS)),JS.exports}var XH=SPe();const EPe="5.14.0";function di(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return di=function(){return s},s}di();const JH=(di().s[0]++,EPe),eZ=(di().s[1]++,typeof window.showSaveFilePicker=="function");class BPe extends En.Component{tokenizedStyle(){return di().f[0]++,di().s[2]++,fde(Ud.stripAccessTokens(Ud.replaceAccessTokens(this.props.mapStyle)))}exportName(){return di().f[1]++,di().s[3]++,this.props.mapStyle.name?(di().b[0][0]++,di().s[4]++,MPe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(di().b[0][1]++,di().s[5]++,this.props.mapStyle.id)}createHtml(){di().f[2]++;const e=(di().s[6]++,this.tokenizedStyle()),t=(di().s[7]++,di().b[1][0]++,this.props.mapStyle.name||(di().b[1][1]++,this.props.t("Map"))),i=(di().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${JH}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${JH}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(di().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(di().s[10]++,this.exportName());di().s[11]++,XH.saveAs(r,o+".html")}async saveStyle(){di().f[3]++;const e=(di().s[12]++,this.tokenizedStyle());if(di().s[13]++,eZ)di().b[2][1]++;else{di().b[2][0]++;const r=(di().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(di().s[15]++,this.exportName());di().s[16]++,XH.saveAs(r,o+".json"),di().s[17]++;return}let t=(di().s[18]++,this.props.fileHandle);if(di().s[19]++,t==null)if(di().b[3][0]++,di().s[20]++,t=await this.createFileHandle(),di().s[21]++,this.props.onSetFileHandle(t),di().s[22]++,t==null){di().b[4][0]++,di().s[23]++;return}else di().b[4][1]++;else di().b[3][1]++;const i=(di().s[24]++,await t.createWritable());di().s[25]++,await i.write(e),di().s[26]++,await i.close(),di().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){di().f[4]++;const e=(di().s[28]++,this.tokenizedStyle()),t=(di().s[29]++,await this.createFileHandle());if(di().s[30]++,this.props.onSetFileHandle(t),di().s[31]++,t==null){di().b[5][0]++,di().s[32]++;return}else di().b[5][1]++;const i=(di().s[33]++,await t.createWritable());di().s[34]++,await i.write(e),di().s[35]++,await i.close(),di().s[36]++,this.props.onOpenToggle()}async createFileHandle(){di().f[5]++;const e=(di().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(di().s[38]++,await window.showSaveFilePicker(e));return di().s[39]++,this.props.onSetFileHandle(t),di().s[40]++,t}changeMetadataProperty(e,t){di().f[6]++;const i=(di().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});di().s[42]++,this.props.onStyleChanged(i)}render(){di().f[7]++;const e=(di().s[43]++,this.props.t),t=(di().s[44]++,gae(e));return di().s[45]++,oe.jsx(ey,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Save Style")}),oe.jsx("p",{children:e("Save the JSON style to your computer.")}),oe.jsxs("div",{children:[oe.jsx(wd,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(di().b[6][0]++,this.props.mapStyle.metadata||(di().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),oe.jsx(wd,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(di().b[7][0]++,this.props.mapStyle.metadata||(di().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),oe.jsx(wd,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(di().b[8][0]++,this.props.mapStyle.metadata||(di().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),oe.jsx(wd,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(di().b[9][0]++,this.props.mapStyle.metadata||(di().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),oe.jsxs("div",{className:"maputnik-modal-export-buttons",children:[oe.jsxs(js,{onClick:this.saveStyle.bind(this),children:[oe.jsx(pD,{}),e("Save")]}),(di().b[10][0]++,eZ&&(di().b[10][1]++,oe.jsxs(js,{onClick:this.saveStyleAs.bind(this),children:[oe.jsx(pD,{}),e("Save as")]}))),oe.jsxs(js,{onClick:this.createHtml.bind(this),children:[oe.jsx(ome,{}),e("Create HTML")]})]})]})})}}const OPe=(di().s[46]++,So()(BPe));function nM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return nM=function(){return s},s}nM();nM().s[0]++;const yae=n=>(nM().f[0]++,nM().s[1]++,oe.jsx(mv,{label:n.label,children:oe.jsx(ZS,{...n})}));function iM(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return iM=function(){return s},s}iM();iM().s[0]++;const IPe=n=>(iM().f[0]++,iM().s[1]++,oe.jsx(ds,{label:n.label,children:oe.jsx(sae,{...n})}));function Mn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="18323b845fc84e69550b153f838c0967a64d83cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:242,column:9}},37:{start:{line:222,column:12},end:{line:225,column:15}},38:{start:{line:235,column:12},end:{line:238,column:15}},39:{start:{line:247,column:14},end:{line:247,column:26}},40:{start:{line:248,column:4},end:{line:263,column:9}},41:{start:{line:256,column:29},end:{line:259,column:12}},42:{start:{line:268,column:14},end:{line:268,column:26}},43:{start:{line:269,column:24},end:{line:275,column:5}},44:{start:{line:276,column:4},end:{line:340,column:5}},45:{start:{line:278,column:8},end:{line:278,column:79}},46:{start:{line:280,column:8},end:{line:280,column:85}},47:{start:{line:282,column:8},end:{line:282,column:77}},48:{start:{line:284,column:8},end:{line:284,column:76}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:300,column:13}},51:{start:{line:293,column:36},end:{line:296,column:14}},52:{start:{line:302,column:8},end:{line:302,column:77}},53:{start:{line:304,column:8},end:{line:331,column:13}},54:{start:{line:310,column:38},end:{line:313,column:16}},55:{start:{line:324,column:38},end:{line:327,column:16}},56:{start:{line:333,column:8},end:{line:333,column:76}},57:{start:{line:335,column:8},end:{line:335,column:74}},58:{start:{line:337,column:8},end:{line:337,column:74}},59:{start:{line:339,column:8},end:{line:339,column:20}},60:{start:{line:343,column:31},end:{line:343,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:243,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:221,column:20},end:{line:221,column:21}},loc:{start:{line:221,column:30},end:{line:226,column:11}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:234,column:20},end:{line:234,column:21}},loc:{start:{line:234,column:33},end:{line:239,column:11}},line:234},24:{name:"(anonymous_24)",decl:{start:{line:246,column:2},end:{line:246,column:3}},loc:{start:{line:246,column:11},end:{line:264,column:3}},line:246},25:{name:"(anonymous_25)",decl:{start:{line:256,column:20},end:{line:256,column:21}},loc:{start:{line:256,column:29},end:{line:259,column:12}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:267,column:2},end:{line:267,column:3}},loc:{start:{line:267,column:11},end:{line:341,column:3}},line:267},27:{name:"(anonymous_27)",decl:{start:{line:293,column:22},end:{line:293,column:23}},loc:{start:{line:293,column:36},end:{line:296,column:14}},line:293},28:{name:"(anonymous_28)",decl:{start:{line:310,column:24},end:{line:310,column:25}},loc:{start:{line:310,column:38},end:{line:313,column:16}},line:310},29:{name:"(anonymous_29)",decl:{start:{line:324,column:24},end:{line:324,column:25}},loc:{start:{line:324,column:38},end:{line:327,column:16}},line:324}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:258,column:17},end:{line:258,column:72}},type:"cond-expr",locations:[{start:{line:258,column:48},end:{line:258,column:51}},{start:{line:258,column:54},end:{line:258,column:72}}],line:258},4:{loc:{start:{line:276,column:4},end:{line:340,column:5}},type:"switch",locations:[{start:{line:277,column:6},end:{line:278,column:79}},{start:{line:279,column:6},end:{line:280,column:85}},{start:{line:281,column:6},end:{line:282,column:77}},{start:{line:283,column:6},end:{line:284,column:76}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:300,column:13}},{start:{line:301,column:6},end:{line:302,column:77}},{start:{line:303,column:6},end:{line:331,column:13}},{start:{line:332,column:6},end:{line:333,column:76}},{start:{line:334,column:6},end:{line:335,column:74}},{start:{line:336,column:6},end:{line:337,column:74}},{start:{line:338,column:6},end:{line:339,column:20}}],line:276},5:{loc:{start:{line:297,column:19},end:{line:297,column:86}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:45}},{start:{line:297,column:49},end:{line:297,column:86}}],line:297},6:{loc:{start:{line:314,column:21},end:{line:314,column:92}},type:"binary-expr",locations:[{start:{line:314,column:21},end:{line:314,column:47}},{start:{line:314,column:51},end:{line:314,column:92}}],line:314},7:{loc:{start:{line:328,column:21},end:{line:328,column:92}},type:"binary-expr",locations:[{start:{line:328,column:21},end:{line:328,column:47}},{start:{line:328,column:51},end:{line:328,column:92}}],line:328}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"18323b845fc84e69550b153f838c0967a64d83cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mn=function(){return s},s}Mn();class j9 extends En.Component{render(){Mn().f[0]++;const e=(Mn().s[0]++,this.props.t);return Mn().s[1]++,oe.jsxs("div",{children:[oe.jsx(HM,{label:e("TileJSON URL"),fieldSpec:Xo.source_vector.url,value:this.props.source.url,onChange:t=>(Mn().f[1]++,Mn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class N9 extends En.Component{changeTileUrls(e){Mn().f[2]++,Mn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Mn().f[3]++;const e=(Mn().s[4]++,Mn().b[0][0]++,this.props.source.tiles||(Mn().b[0][1]++,[]));return Mn().s[5]++,oe.jsx(yae,{label:this.props.t("Tile URL"),fieldSpec:Xo.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Mn().f[4]++;const e=(Mn().s[6]++,this.props.t);return Mn().s[7]++,oe.jsxs("div",{children:[this.renderTileUrls(),oe.jsx(X5,{label:e("Scheme Type"),fieldSpec:Xo.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Mn().f[5]++,Mn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),oe.jsx(Bp,{label:e("Min Zoom"),fieldSpec:Xo.source_vector.minzoom,value:(Mn().b[1][0]++,this.props.source.minzoom||(Mn().b[1][1]++,0)),onChange:t=>(Mn().f[6]++,Mn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),oe.jsx(Bp,{label:e("Max Zoom"),fieldSpec:Xo.source_vector.maxzoom,value:(Mn().b[2][0]++,this.props.source.maxzoom||(Mn().b[2][1]++,22)),onChange:t=>(Mn().f[7]++,Mn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Mn().s[11]++;const vae=n=>(Mn().f[8]++,Mn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class TPe extends En.Component{render(){Mn().f[9]++;const e=(Mn().s[13]++,this.props.t);Mn().s[14]++;const t=(i,r)=>{Mn().f[10]++;const o=(Mn().s[15]++,this.props.source.coordinates.slice(0));Mn().s[16]++,o[i]=r,Mn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return Mn().s[18]++,oe.jsxs("div",{children:[oe.jsx(HM,{label:e("Image URL"),fieldSpec:Xo.source_image.url,value:this.props.source.url,onChange:i=>(Mn().f[11]++,Mn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),vae(e).map(({label:i,key:r},o)=>(Mn().f[12]++,Mn().s[20]++,oe.jsx(k6,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(Mn().f[13]++,Mn().s[21]++,t(o,s))},r)))]})}}class kPe extends En.Component{render(){Mn().f[14]++;const e=(Mn().s[22]++,this.props.t);Mn().s[23]++;const t=(r,o)=>{Mn().f[15]++;const s=(Mn().s[24]++,this.props.source.coordinates.slice(0));Mn().s[25]++,s[r]=o,Mn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};Mn().s[27]++;const i=r=>{Mn().f[16]++,Mn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return Mn().s[29]++,oe.jsxs("div",{children:[oe.jsx(yae,{label:e("Video URL"),fieldSpec:Xo.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),vae(e).map(({label:r,key:o},s)=>(Mn().f[17]++,Mn().s[30]++,oe.jsx(k6,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(Mn().f[18]++,Mn().s[31]++,t(s,a))},o)))]})}}class DPe extends En.Component{render(){Mn().f[19]++;const e=(Mn().s[32]++,this.props.t);return Mn().s[33]++,oe.jsx(HM,{label:e("GeoJSON URL"),fieldSpec:Xo.source_geojson.data,value:this.props.source.data,onChange:t=>(Mn().f[20]++,Mn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class RPe extends En.Component{render(){Mn().f[21]++;const e=(Mn().s[35]++,this.props.t);return Mn().s[36]++,oe.jsxs("div",{children:[oe.jsx(ds,{label:e("GeoJSON"),fieldSpec:Xo.source_geojson.data,children:oe.jsx(mO,{value:this.props.source.data,lintType:"json",onChange:t=>{Mn().f[22]++,Mn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),oe.jsx(IPe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Mn().f[23]++,Mn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class PPe extends En.Component{render(){Mn().f[24]++;const e=(Mn().s[39]++,this.props.t);return Mn().s[40]++,oe.jsxs("div",{children:[oe.jsx(HM,{label:e("PMTiles URL"),fieldSpec:Xo.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Mn().f[25]++,Mn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Mn().b[3][0]++,t):(Mn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class UPe extends En.Component{render(){Mn().f[26]++;const e=(Mn().s[42]++,this.props.t),t=(Mn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Mn().s[44]++,this.props.mode){case"geojson_url":return Mn().b[4][0]++,Mn().s[45]++,oe.jsx(DPe,{...t});case"geojson_json":return Mn().b[4][1]++,Mn().s[46]++,oe.jsx(RPe,{...t});case"tilejson_vector":return Mn().b[4][2]++,Mn().s[47]++,oe.jsx(j9,{...t});case"tile_vector":return Mn().b[4][3]++,Mn().s[48]++,oe.jsx(N9,{...t});case"tilejson_raster":return Mn().b[4][4]++,Mn().s[49]++,oe.jsx(j9,{...t});case"tile_raster":return Mn().b[4][5]++,Mn().s[50]++,oe.jsx(N9,{...t,children:oe.jsx(Bp,{label:e("Tile Size"),fieldSpec:Xo.source_raster.tileSize,onChange:i=>(Mn().f[27]++,Mn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(Mn().b[5][0]++,this.props.source.tileSize||(Mn().b[5][1]++,Xo.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Mn().b[4][6]++,Mn().s[52]++,oe.jsx(j9,{...t});case"tilexyz_raster-dem":return Mn().b[4][7]++,Mn().s[53]++,oe.jsxs(N9,{...t,children:[oe.jsx(Bp,{label:e("Tile Size"),fieldSpec:Xo.source_raster_dem.tileSize,onChange:i=>(Mn().f[28]++,Mn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(Mn().b[6][0]++,this.props.source.tileSize||(Mn().b[6][1]++,Xo.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),oe.jsx(X5,{label:e("Encoding"),fieldSpec:Xo.source_raster_dem.encoding,options:Object.keys(Xo.source_raster_dem.encoding.values),onChange:i=>(Mn().f[29]++,Mn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(Mn().b[7][0]++,this.props.source.encoding||(Mn().b[7][1]++,Xo.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Mn().b[4][8]++,Mn().s[56]++,oe.jsx(PPe,{...t});case"image":return Mn().b[4][9]++,Mn().s[57]++,oe.jsx(TPe,{...t});case"video":return Mn().b[4][10]++,Mn().s[58]++,oe.jsx(kPe,{...t});default:return Mn().b[4][11]++,Mn().s[59]++,null}}}const Cae=(Mn().s[60]++,So()(UPe));function Kp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Kp=function(){return s},s}Kp();function LPe(n,e){Kp().f[0]++;const t=(Kp().s[0]++,{...n.sources});return Kp().s[1]++,delete t[e],Kp().s[2]++,{...n,sources:t}}function tZ(n,e,t){return Kp().f[1]++,Kp().s[3]++,bae(n,e,t)}function bae(n,e,t){Kp().f[2]++;const i=(Kp().s[4]++,{...n.sources,[e]:t});return Kp().s[5]++,{...n,sources:i}}const KPe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},FPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},zPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},jPe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},NPe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},nZ={openmaptiles:KPe,thunderforest_transport:FPe,thunderforest_outdoors:zPe,open_zoomstack:jPe,locationiq:NPe};function Qt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qt=function(){return s},s}Qt();class GPe extends En.Component{render(){return Qt().f[0]++,Qt().s[0]++,oe.jsx("div",{className:"maputnik-public-source",children:oe.jsxs(js,{className:"maputnik-public-source-select",onClick:()=>(Qt().f[1]++,Qt().s[1]++,this.props.onSelect(this.props.id)),children:[oe.jsxs("div",{className:"maputnik-public-source-info",children:[oe.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),oe.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(aJ,{})]})})}}function WPe(n){return Qt().f[2]++,Qt().s[2]++,n.type==="raster"?(Qt().b[0][0]++,Qt().s[3]++,n.tiles?(Qt().b[1][0]++,Qt().s[4]++,"tile_raster"):(Qt().b[1][1]++,Qt().s[5]++,"tilejson_raster")):(Qt().b[0][1]++,Qt().s[6]++,n.type==="raster-dem"?(Qt().b[2][0]++,Qt().s[7]++,n.tiles?(Qt().b[3][0]++,Qt().s[8]++,"tilexyz_raster-dem"):(Qt().b[3][1]++,Qt().s[9]++,"tilejson_raster-dem")):(Qt().b[2][1]++,Qt().s[10]++,n.type==="vector"?(Qt().b[4][0]++,Qt().s[11]++,n.tiles?(Qt().b[5][0]++,Qt().s[12]++,"tile_vector"):(Qt().b[5][1]++,Qt().s[13]++,Qt().b[7][0]++,n.url&&(Qt().b[7][1]++,n.url.startsWith("pmtiles://"))?(Qt().b[6][0]++,Qt().s[14]++,"pmtiles_vector"):(Qt().b[6][1]++,Qt().s[15]++,"tilejson_vector"))):(Qt().b[4][1]++,Qt().s[16]++,n.type==="geojson"?(Qt().b[8][0]++,Qt().s[17]++,typeof n.data=="string"?(Qt().b[9][0]++,Qt().s[18]++,"geojson_url"):(Qt().b[9][1]++,Qt().s[19]++,"geojson_json")):(Qt().b[8][1]++,Qt().s[20]++,n.type==="image"?(Qt().b[10][0]++,Qt().s[21]++,"image"):(Qt().b[10][1]++,Qt().s[22]++,n.type==="video"?(Qt().b[11][0]++,Qt().s[23]++,"video"):(Qt().b[11][1]++,Qt().s[24]++,null))))))}class QPe extends En.Component{render(){Qt().f[3]++;const e=(Qt().s[25]++,this.props.t);return Qt().s[26]++,oe.jsxs("div",{className:"maputnik-active-source-type-editor",children:[oe.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[oe.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(js,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(Qt().f[4]++,Qt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:oe.jsx(Hb,{})})]}),oe.jsx("div",{className:"maputnik-active-source-type-editor-content",children:oe.jsx(Cae,{onChange:this.props.onChange,mode:WPe(this.props.source),source:this.props.source})})]})}}class qPe extends En.Component{constructor(e){Qt().f[5]++,Qt().s[28]++,super(e),Qt().s[29]++,this.state={mode:"tilejson_vector",sourceId:Ud.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){Qt().f[6]++;const t=(Qt().s[30]++,Qt().b[12][0]++,(Qt().b[13][0]++,this.state||(Qt().b[13][1]++,{})).source||(Qt().b[12][1]++,{})),{protocol:i}=(Qt().s[31]++,window.location);switch(Qt().s[32]++,e){case"pmtiles_vector":return Qt().b[14][0]++,Qt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return Qt().b[14][1]++,Qt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return Qt().b[14][2]++,Qt().s[35]++,{type:"geojson",cluster:(Qt().b[15][0]++,t.cluster||(Qt().b[15][1]++,!1)),data:""};case"tilejson_vector":return Qt().b[14][3]++,Qt().s[36]++,{type:"vector",url:(Qt().b[16][0]++,t.url||(Qt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return Qt().b[14][4]++,Qt().s[37]++,{type:"vector",tiles:(Qt().b[17][0]++,t.tiles||(Qt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(Qt().b[18][0]++,t.minzoom||(Qt().b[18][1]++,0)),maxzoom:(Qt().b[19][0]++,t.maxzoom||(Qt().b[19][1]++,14)),scheme:(Qt().b[20][0]++,t.scheme||(Qt().b[20][1]++,"xyz"))};case"tilejson_raster":return Qt().b[14][5]++,Qt().s[38]++,{type:"raster",url:(Qt().b[21][0]++,t.url||(Qt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return Qt().b[14][6]++,Qt().s[39]++,{type:"raster",tiles:(Qt().b[22][0]++,t.tiles||(Qt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Qt().b[23][0]++,t.minzoom||(Qt().b[23][1]++,0)),maxzoom:(Qt().b[24][0]++,t.maxzoom||(Qt().b[24][1]++,14)),scheme:(Qt().b[25][0]++,t.scheme||(Qt().b[25][1]++,"xyz")),tileSize:(Qt().b[26][0]++,t.tileSize||(Qt().b[26][1]++,512))};case"tilejson_raster-dem":return Qt().b[14][7]++,Qt().s[40]++,{type:"raster-dem",url:(Qt().b[27][0]++,t.url||(Qt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return Qt().b[14][8]++,Qt().s[41]++,{type:"raster-dem",tiles:(Qt().b[28][0]++,t.tiles||(Qt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Qt().b[29][0]++,t.minzoom||(Qt().b[29][1]++,0)),maxzoom:(Qt().b[30][0]++,t.maxzoom||(Qt().b[30][1]++,14)),tileSize:(Qt().b[31][0]++,t.tileSize||(Qt().b[31][1]++,512))};case"image":return Qt().b[14][9]++,Qt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return Qt().b[14][10]++,Qt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return Qt().b[14][11]++,Qt().s[44]++,{}}}onAdd=(Qt().s[45]++,()=>{Qt().f[7]++;const{source:e,sourceId:t}=(Qt().s[46]++,this.state);Qt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(Qt().s[48]++,e=>{Qt().f[8]++,Qt().s[49]++,this.setState({source:e})});render(){Qt().f[9]++;const e=(Qt().s[50]++,this.props.t),t=(Qt().s[51]++,{doc:Yr.source_vector.type.doc});return Qt().s[52]++,oe.jsxs("div",{className:"maputnik-add-source",children:[oe.jsx(wd,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(Qt().f[10]++,Qt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),oe.jsx(X5,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(Qt().f[11]++,Qt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),oe.jsx(Cae,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),oe.jsx(js,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class YPe extends En.Component{stripTitle(e){Qt().f[12]++;const t=(Qt().s[55]++,{...e});return Qt().s[56]++,delete t.title,Qt().s[57]++,t}render(){Qt().f[13]++;const{t:e,mapStyle:t}=(Qt().s[58]++,this.props),i=(Qt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Qt().s[60]++,Object.keys(t.sources).map(s=>{Qt().f[14]++;const a=(Qt().s[61]++,t.sources[s]);return Qt().s[62]++,oe.jsx(QPe,{sourceId:s,source:a,onChange:c=>(Qt().f[15]++,Qt().s[63]++,this.props.onStyleChanged(bae(t,s,c))),onDelete:()=>(Qt().f[16]++,Qt().s[64]++,this.props.onStyleChanged(LPe(t,s))),...i},s)})),o=(Qt().s[65]++,Object.keys(nZ).filter(s=>(Qt().f[17]++,Qt().s[66]++,!(s in t.sources))).map(s=>{Qt().f[18]++;const a=(Qt().s[67]++,nZ[s]);return Qt().s[68]++,oe.jsx(GPe,{id:s,type:a.type,title:a.title,onSelect:()=>(Qt().f[19]++,Qt().s[69]++,this.props.onStyleChanged(tZ(t,s,this.stripTitle(a))))},s)}));return Qt().s[70]++,oe.jsxs(ey,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Active Sources")}),r]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Choose Public Source")}),oe.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),oe.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Add New Source")}),oe.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),oe.jsx(qPe,{onAdd:(s,a)=>(Qt().f[20]++,Qt().s[71]++,this.props.onStyleChanged(tZ(t,s,a))),...i})]})]})}}const VPe=(Qt().s[72]++,So()(YPe));function og(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return og=function(){return s},s}og();class $Pe extends En.Component{render(){og().f[0]++;const e=(og().s[0]++,this.props.t);return og().s[1]++,oe.jsxs(ey,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(og().f[1]++,og().s[2]++,this.props.onCancel()),children:[oe.jsx("p",{children:this.props.message}),oe.jsx("p",{className:"maputnik-dialog__buttons",children:oe.jsx(js,{onClick:t=>(og().f[2]++,og().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const HPe=(og().s[4]++,So()($Pe)),_ae=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function wn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wn=function(){return s},s}wn();class ZPe extends En.Component{render(){return wn().f[0]++,wn().s[0]++,oe.jsx("div",{className:"maputnik-public-style",children:oe.jsxs(js,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(wn().f[1]++,wn().s[1]++,this.props.onSelect(this.props.url)),children:[oe.jsxs("div",{className:"maputnik-public-style-header",children:[oe.jsx("div",{children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(aJ,{})]}),oe.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class XPe extends En.Component{constructor(e){wn().f[2]++,wn().s[2]++,super(e),wn().s[3]++,this.state={styleUrl:""}}clearError(){wn().f[3]++,wn().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){wn().f[4]++,wn().s[5]++,e?(wn().b[0][0]++,wn().s[6]++,e.stopPropagation()):wn().b[0][1]++,wn().s[7]++,this.state.activeRequest?(wn().b[1][0]++,wn().s[8]++,this.state.activeRequest.abort(),wn().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):wn().b[1][1]++}onStyleSelect=(wn().s[10]++,e=>{wn().f[5]++,wn().s[11]++,this.clearError();let t=(wn().s[12]++,!1);wn().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return wn().f[6]++,wn().s[14]++,i.json()}).then(i=>{if(wn().f[7]++,wn().s[15]++,t){wn().b[2][0]++,wn().s[16]++;return}else wn().b[2][1]++;wn().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(wn().s[18]++,Ud.ensureStyleValidity(i));wn().s[19]++,console.log("Loaded style ",r.id),wn().s[20]++,this.props.onStyleOpen(r),wn().s[21]++,this.onOpenToggle()}).catch(i=>{wn().f[8]++,wn().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),wn().s[23]++,console.error(i),wn().s[24]++,console.warn("Could not open the style URL",e)}),wn().s[25]++,this.setState({activeRequest:{abort:function(){wn().f[9]++,wn().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(wn().s[27]++,e=>{wn().f[10]++,wn().s[28]++,e.preventDefault(),wn().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(wn().s[30]++,async()=>{wn().f[11]++,wn().s[31]++,this.clearError();const e=(wn().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(wn().s[33]++,await window.showOpenFilePicker(e)),i=(wn().s[34]++,await t.getFile()),r=(wn().s[35]++,await i.text());let o;wn().s[36]++;try{wn().s[37]++,o=JSON.parse(r)}catch(s){wn().s[38]++,this.setState({error:s.toString()}),wn().s[39]++;return}return wn().s[40]++,o=Ud.ensureStyleValidity(o),wn().s[41]++,this.props.onStyleOpen(o,t),wn().s[42]++,this.onOpenToggle(),wn().s[43]++,i});onFileChanged=(wn().s[44]++,e=>{if(wn().f[12]++,wn().s[45]++,e)wn().b[3][1]++;else{wn().b[3][0]++,wn().s[46]++;return}if(wn().s[47]++,e.length===0){wn().b[4][0]++,wn().s[48]++;return}else wn().b[4][1]++;const t=(wn().s[49]++,e[0]),i=(wn().s[50]++,new FileReader);wn().s[51]++,this.clearError(),wn().s[52]++,i.readAsText(t,"UTF-8"),wn().s[53]++,i.onload=r=>{wn().f[13]++;let o;wn().s[54]++;try{wn().s[55]++,o=JSON.parse(r.target?.result)}catch(s){wn().s[56]++,this.setState({error:s.toString()}),wn().s[57]++;return}wn().s[58]++,o=Ud.ensureStyleValidity(o),wn().s[59]++,this.props.onStyleOpen(o),wn().s[60]++,this.onOpenToggle()},wn().s[61]++,i.onerror=r=>(wn().f[14]++,wn().s[62]++,console.log(r.target))});onOpenToggle(){wn().f[15]++,wn().s[63]++,this.setState({styleUrl:""}),wn().s[64]++,this.clearError(),wn().s[65]++,this.props.onOpenToggle()}onChangeUrl=(wn().s[66]++,e=>{wn().f[16]++,wn().s[67]++,this.setState({styleUrl:e})});render(){wn().f[17]++;const e=(wn().s[68]++,this.props.t),t=(wn().s[69]++,_ae.map(r=>(wn().f[18]++,wn().s[70]++,oe.jsx(ZPe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return wn().s[71]++,this.state.error?(wn().b[5][0]++,wn().s[72]++,i=oe.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,oe.jsx("a",{href:"#",onClick:()=>(wn().f[19]++,wn().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):wn().b[5][1]++,wn().s[74]++,oe.jsxs("div",{children:[oe.jsxs(ey,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(wn().f[20]++,wn().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Open local Style")}),oe.jsx("p",{children:e("Open a local JSON style from your computer.")}),oe.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(wn().b[6][0]++,oe.jsxs(js,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[oe.jsx(cj,{})," ",e("Open Style")]})):(wn().b[6][1]++,oe.jsxs("label",{children:[oe.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[oe.jsx(cj,{})," ",e("Open Style")]}),oe.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(wn().f[21]++,wn().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),oe.jsx("section",{className:"maputnik-modal-section",children:oe.jsxs("form",{onSubmit:this.onSubmitUrl,children:[oe.jsx("h1",{children:e("Load from URL")}),oe.jsx("p",{children:oe.jsxs(Cb,{t:e,children:["Load from a URL. Note that the URL must have ",oe.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),oe.jsx(OF,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),oe.jsx("div",{children:oe.jsx(js,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[oe.jsx("h1",{children:e("Gallery Styles")}),oe.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),oe.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),oe.jsx(HPe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(wn().f[22]++,wn().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const JPe=(wn().s[78]++,So()(XPe));function pm(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pm=function(){return s},s}pm();class eUe extends En.Component{render(){pm().f[0]++;const e=(pm().s[0]++,this.props.t),t=(pm().s[1]++,[{key:oe.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:oe.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:oe.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:oe.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:oe.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:oe.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:oe.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:oe.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(pm().s[2]++,[{key:oe.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:oe.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:oe.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:oe.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:oe.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:oe.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return pm().s[3]++,oe.jsx(ey,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[oe.jsx("p",{children:oe.jsxs(Cb,{t:e,children:["Press ",oe.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),oe.jsx("dl",{children:t.map((r,o)=>(pm().f[1]++,pm().s[4]++,oe.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[oe.jsx("dt",{children:r.key},"dt"+o),oe.jsx("dd",{children:r.text},"dd"+o)]},o)))}),oe.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),oe.jsx("ul",{children:i.map((r,o)=>(pm().f[2]++,pm().s[5]++,oe.jsxs("li",{children:[oe.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const tUe=(pm().s[6]++,So()(eUe));function Cu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cu=function(){return s},s}Cu();class nUe extends En.Component{render(){Cu().f[0]++;const{t:e,mapView:t}=(Cu().s[0]++,this.props),i=(Cu().s[1]++,Math.round(t.zoom)+1),r=(Cu().s[2]++,+t.center.lng.toFixed(5)),o=(Cu().s[3]++,+t.center.lat.toFixed(5));return Cu().s[4]++,oe.jsxs(ey,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[oe.jsx("h1",{children:e("Options")}),(Cu().b[0][0]++,this.props.renderer==="mlgljs"&&(Cu().b[0][1]++,oe.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(Cu().f[1]++,Cu().s[5]++,oe.jsx("li",{children:oe.jsxs("label",{children:[oe.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Cu().f[2]++,Cu().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(Cu().b[1][0]++,this.props.renderer==="ol"&&(Cu().b[1][1]++,oe.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(Cu().f[3]++,Cu().s[7]++,oe.jsx("li",{children:oe.jsxs("label",{children:[oe.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Cu().f[4]++,Cu().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Links")}),oe.jsx("p",{children:oe.jsxs(Cb,{t:e,children:[oe.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const iUe=(Cu().s[9]++,So()(nUe));function bi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bi=function(){return s},s}bi();bi().s[0]++;const rUe=n=>{bi().f[0]++,bi().s[1]++;const e=()=>{bi().f[1]++;const d=(bi().s[2]++,n.mapStyle),p=(bi().s[3]++,bi().b[0][0]++,d.state||(bi().b[0][1]++,{}));return bi().s[4]++,Object.entries(p).map(([v,M])=>(bi().f[2]++,bi().s[5]++,{key:v,value:M.default}))};bi().s[6]++;const t=d=>{bi().f[3]++;const p=(bi().s[7]++,{...n.mapStyle}),v=(bi().s[8]++,{});bi().s[9]++;for(const M of d)bi().s[10]++,M.key.trim()!==""?(bi().b[1][0]++,bi().s[11]++,v[M.key]={default:M.value}):bi().b[1][1]++;bi().s[12]++,p.state=Object.keys(v).length>0?(bi().b[2][0]++,v):(bi().b[2][1]++,void 0),bi().s[13]++,n.onStyleChanged(p)};bi().s[14]++;const i=()=>{bi().f[4]++;const d=(bi().s[15]++,e());let p=(bi().s[16]++,1);for(bi().s[17]++;d.find(v=>(bi().f[5]++,bi().s[18]++,v.key===`key${p}`));)bi().s[19]++,p++;bi().s[20]++,d.push({key:`key${p}`,value:"value"}),bi().s[21]++,t(d)};bi().s[22]++;const r=d=>{bi().f[6]++;const p=(bi().s[23]++,e());bi().s[24]++,p.splice(d,1),bi().s[25]++,t(p)};bi().s[26]++;const o=(d,p)=>{bi().f[7]++;const v=(bi().s[27]++,e());bi().s[28]++,v[d].key=(bi().b[3][0]++,p||(bi().b[3][1]++,"")),bi().s[29]++,t(v)};bi().s[30]++;const s=(d,p)=>{bi().f[8]++;const v=(bi().s[31]++,e());bi().s[32]++,v[d].value=(bi().b[4][0]++,p||(bi().b[4][1]++,"")),bi().s[33]++,t(v)},a=(bi().s[34]++,e()),c=(bi().s[35]++,a.map((d,p)=>(bi().f[9]++,bi().s[36]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:oe.jsx(wd,{label:n.t("Key"),value:d.key,onChange:v=>(bi().f[10]++,bi().s[37]++,o(p,(bi().b[5][0]++,v||(bi().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+p})}),oe.jsx("td",{children:oe.jsx(wd,{label:n.t("Value"),value:d.value,onChange:v=>(bi().f[11]++,bi().s[38]++,s(p,(bi().b[6][0]++,v||(bi().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+p})}),oe.jsx("td",{style:{verticalAlign:"middle"},children:oe.jsx(js,{onClick:()=>(bi().f[12]++,bi().s[39]++,r(p)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:oe.jsx(Hb,{})})})]},p))));return bi().s[40]++,oe.jsxs(ey,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(bi().b[7][0]++,a.length===0&&(bi().b[7][1]++,oe.jsxs("div",{children:[oe.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),oe.jsx("div",{className:"maputnik-doc-inline",children:oe.jsx(sO,{fieldSpec:Yr.$root.state})},"doc")]}))),(bi().b[8][0]++,a.length>0&&(bi().b[8][1]++,oe.jsxs("table",{children:[oe.jsx("thead",{}),oe.jsx("tbody",{children:c})]}))),oe.jsx("div",{children:oe.jsxs(js,{onClick:i,"data-wd-key":"global-state-add-variable",children:[oe.jsx(pO,{}),n.t("Add Variable")]})})]})},oUe=(bi().s[41]++,So()(rUe));var sUe=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},n(e,t)};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}})(),aUe=Object.prototype.hasOwnProperty;function TP(n,e){return aUe.call(n,e)}function kP(n){if(Array.isArray(n)){for(var e=new Array(n.length),t=0;t<e.length;t++)e[t]=""+t;return e}if(Object.keys)return Object.keys(n);var i=[];for(var r in n)TP(n,r)&&i.push(r);return i}function Bf(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function DP(n){for(var e=0,t=n.length,i;e<t;){if(i=n.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function ib(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function xae(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function RP(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(var e=0,t=n.length;e<t;e++)if(RP(n[e]))return!0}else if(typeof n=="object"){for(var i=kP(n),r=i.length,o=0;o<r;o++)if(RP(n[i[o]]))return!0}}return!1}function iZ(n,e){var t=[n];for(var i in e){var r=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof r<"u"&&t.push(i+": "+r)}return t.join(`
`)}var Mae=(function(n){sUe(e,n);function e(t,i,r,o,s){var a=this.constructor,c=n.call(this,iZ(t,{name:i,index:r,operation:o,tree:s}))||this;return c.name=i,c.index=r,c.operation=o,c.tree=s,Object.setPrototypeOf(c,a.prototype),c.message=iZ(t,{name:i,index:r,operation:o,tree:s}),c}return e})(Error),Vl=Mae,lUe=Bf,G2={add:function(n,e,t){return n[e]=this.value,{newDocument:t}},remove:function(n,e,t){var i=n[e];return delete n[e],{newDocument:t,removed:i}},replace:function(n,e,t){var i=n[e];return n[e]=this.value,{newDocument:t,removed:i}},move:function(n,e,t){var i=D6(t,this.path);i&&(i=Bf(i));var r=Pb(t,{op:"remove",path:this.from}).removed;return Pb(t,{op:"add",path:this.path,value:r}),{newDocument:t,removed:i}},copy:function(n,e,t){var i=D6(t,this.from);return Pb(t,{op:"add",path:this.path,value:Bf(i)}),{newDocument:t}},test:function(n,e,t){return{newDocument:t,test:rM(n[e],this.value)}},_get:function(n,e,t){return this.value=n[e],{newDocument:t}}},uUe={add:function(n,e,t){return DP(e)?n.splice(e,0,this.value):n[e]=this.value,{newDocument:t,index:e}},remove:function(n,e,t){var i=n.splice(e,1);return{newDocument:t,removed:i[0]}},replace:function(n,e,t){var i=n[e];return n[e]=this.value,{newDocument:t,removed:i}},move:G2.move,copy:G2.copy,test:G2.test,_get:G2._get};function D6(n,e){if(e=="")return n;var t={op:"_get",path:e};return Pb(n,t),t.value}function Pb(n,e,t,i,r,o){if(t===void 0&&(t=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),o===void 0&&(o=0),t&&(typeof t=="function"?t(e,0,n,e.path):R6(e,0)),e.path===""){var s={newDocument:n};if(e.op==="add")return s.newDocument=e.value,s;if(e.op==="replace")return s.newDocument=e.value,s.removed=n,s;if(e.op==="move"||e.op==="copy")return s.newDocument=D6(n,e.from),e.op==="move"&&(s.removed=n),s;if(e.op==="test"){if(s.test=rM(n,e.value),s.test===!1)throw new Vl("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return s.newDocument=n,s}else{if(e.op==="remove")return s.removed=n,s.newDocument=null,s;if(e.op==="_get")return e.value=n,s;if(t)throw new Vl("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,n);return s}}else{i||(n=Bf(n));var a=e.path||"",c=a.split("/"),d=n,p=1,v=c.length,M=void 0,E=void 0,P=void 0;for(typeof t=="function"?P=t:P=R6;;){if(E=c[p],E&&E.indexOf("~")!=-1&&(E=xae(E)),r&&(E=="__proto__"||E=="prototype"&&p>0&&c[p-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&M===void 0&&(d[E]===void 0?M=c.slice(0,p).join("/"):p==v-1&&(M=e.path),M!==void 0&&P(e,0,n,M)),p++,Array.isArray(d)){if(E==="-")E=d.length;else{if(t&&!DP(E))throw new Vl("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,n);DP(E)&&(E=~~E)}if(p>=v){if(t&&e.op==="add"&&E>d.length)throw new Vl("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,n);var s=uUe[e.op].call(e,d,E,n);if(s.test===!1)throw new Vl("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return s}}else if(p>=v){var s=G2[e.op].call(e,d,E,n);if(s.test===!1)throw new Vl("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return s}if(d=d[E],t&&p<v&&(!d||typeof d!="object"))throw new Vl("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,n)}}}function BO(n,e,t,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),t&&!Array.isArray(e))throw new Vl("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(n=Bf(n));for(var o=new Array(e.length),s=0,a=e.length;s<a;s++)o[s]=Pb(n,e[s],t,!0,r,s),n=o[s].newDocument;return o.newDocument=n,o}function cUe(n,e,t){var i=Pb(n,e);if(i.test===!1)throw new Vl("Test operation failed","TEST_OPERATION_FAILED",t,e,n);return i.newDocument}function R6(n,e,t,i){if(typeof n!="object"||n===null||Array.isArray(n))throw new Vl("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,n,t);if(G2[n.op]){if(typeof n.path!="string")throw new Vl("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,n,t);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new Vl('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,n,t);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new Vl("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new Vl("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&RP(n.value))throw new Vl("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,n,t);if(t){if(n.op=="add"){var r=n.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new Vl("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,n,t)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==i)throw new Vl("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,n,t)}else if(n.op==="move"||n.op==="copy"){var s={op:"_get",path:n.from,value:void 0},a=wae([s],t);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Vl("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,n,t)}}}else throw new Vl("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,n,t)}function wae(n,e,t){try{if(!Array.isArray(n))throw new Vl("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)BO(Bf(e),Bf(n),t||!0);else{t=t||R6;for(var i=0;i<n.length;i++)t(n[i],i,e,void 0)}}catch(r){if(r instanceof Vl)return r;throw r}}function rM(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var t=Array.isArray(n),i=Array.isArray(e),r,o,s;if(t&&i){if(o=n.length,o!=e.length)return!1;for(r=o;r--!==0;)if(!rM(n[r],e[r]))return!1;return!0}if(t!=i)return!1;var a=Object.keys(n);if(o=a.length,o!==Object.keys(e).length)return!1;for(r=o;r--!==0;)if(!e.hasOwnProperty(a[r]))return!1;for(r=o;r--!==0;)if(s=a[r],!rM(n[s],e[s]))return!1;return!0}return n!==n&&e!==e}const AUe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Vl,_areEquals:rM,applyOperation:Pb,applyPatch:BO,applyReducer:cUe,deepClone:lUe,getValueByPointer:D6,validate:wae,validator:R6},Symbol.toStringTag,{value:"Module"}));var TF=new WeakMap,hUe=(function(){function n(e){this.observers=new Map,this.obj=e}return n})(),dUe=(function(){function n(e,t){this.callback=e,this.observer=t}return n})();function fUe(n){return TF.get(n)}function mUe(n,e){return n.observers.get(e)}function pUe(n,e){n.observers.delete(e.callback)}function gUe(n,e){e.unobserve()}function yUe(n,e){var t=[],i,r=fUe(n);if(!r)r=new hUe(n),TF.set(n,r);else{var o=mUe(r,e);i=o&&o.observer}if(i)return i;if(i={},r.value=Bf(n),e){i.callback=e,i.next=null;var s=function(){PP(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=t,i.object=n,i.unobserve=function(){PP(i),clearTimeout(i.next),pUe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(e,new dUe(e,i)),i}function PP(n,e){e===void 0&&(e=!1);var t=TF.get(n.object);kF(t.value,n.object,n.patches,"",e),n.patches.length&&BO(t.value,n.patches);var i=n.patches;return i.length>0&&(n.patches=[],n.callback&&n.callback(i)),i}function kF(n,e,t,i,r){if(e!==n){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=kP(e),s=kP(n),a=!1,c=s.length-1;c>=0;c--){var d=s[c],p=n[d];if(TP(e,d)&&!(e[d]===void 0&&p!==void 0&&Array.isArray(e)===!1)){var v=e[d];typeof p=="object"&&p!=null&&typeof v=="object"&&v!=null&&Array.isArray(p)===Array.isArray(v)?kF(p,v,t,i+"/"+ib(d),r):p!==v&&(r&&t.push({op:"test",path:i+"/"+ib(d),value:Bf(p)}),t.push({op:"replace",path:i+"/"+ib(d),value:Bf(v)}))}else Array.isArray(n)===Array.isArray(e)?(r&&t.push({op:"test",path:i+"/"+ib(d),value:Bf(p)}),t.push({op:"remove",path:i+"/"+ib(d)}),a=!0):(r&&t.push({op:"test",path:i,value:n}),t.push({op:"replace",path:i,value:e}))}if(!(!a&&o.length==s.length))for(var c=0;c<o.length;c++){var d=o[c];!TP(n,d)&&e[d]!==void 0&&t.push({op:"add",path:i+"/"+ib(d),value:Bf(e[d])})}}}function vUe(n,e,t){t===void 0&&(t=!1);var i=[];return kF(n,e,i,"",t),i}const CUe=Object.freeze(Object.defineProperty({__proto__:null,compare:vUe,generate:PP,observe:yUe,unobserve:gUe},Symbol.toStringTag,{value:"Module"}));Object.assign({},AUe,CUe,{JsonPatchError:Mae,deepClone:Bf,escapePathComponent:ib,unescapePathComponent:xae});function st(){var n="/home/runner/work/maputnik/maputnik/src/libs/style-chat.ts",e="5e44de22453c0840b698a6ffec791d4ed189601f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style-chat.ts",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:66}},1:{start:{line:6,column:2},end:{line:13,column:50}},2:{start:{line:16,column:17},end:{line:16,column:29}},3:{start:{line:17,column:2},end:{line:17,column:43}},4:{start:{line:17,column:30},end:{line:17,column:43}},5:{start:{line:18,column:36},end:{line:18,column:45}},6:{start:{line:19,column:2},end:{line:22,column:5}},7:{start:{line:20,column:15},end:{line:20,column:23}},8:{start:{line:21,column:4},end:{line:21,column:53}},9:{start:{line:21,column:32},end:{line:21,column:53}},10:{start:{line:23,column:2},end:{line:36,column:5}},11:{start:{line:24,column:17},end:{line:24,column:24}},12:{start:{line:25,column:4},end:{line:25,column:76}},13:{start:{line:25,column:66},end:{line:25,column:76}},14:{start:{line:26,column:21},end:{line:26,column:64}},15:{start:{line:26,column:51},end:{line:26,column:63}},16:{start:{line:27,column:4},end:{line:27,column:67}},17:{start:{line:27,column:57},end:{line:27,column:67}},18:{start:{line:28,column:25},end:{line:28,column:36}},19:{start:{line:29,column:32},end:{line:29,column:84}},20:{start:{line:30,column:4},end:{line:30,column:53}},21:{start:{line:30,column:43},end:{line:30,column:53}},22:{start:{line:31,column:18},end:{line:31,column:52}},23:{start:{line:32,column:4},end:{line:32,column:36}},24:{start:{line:32,column:26},end:{line:32,column:36}},25:{start:{line:33,column:17},end:{line:33,column:44}},26:{start:{line:34,column:20},end:{line:34,column:73}},27:{start:{line:35,column:4},end:{line:35,column:36}},28:{start:{line:39,column:17},end:{line:39,column:29}},29:{start:{line:40,column:2},end:{line:40,column:42}},30:{start:{line:40,column:30},end:{line:40,column:42}},31:{start:{line:41,column:16},end:{line:41,column:104}},32:{start:{line:41,column:37},end:{line:41,column:84}},33:{start:{line:41,column:97},end:{line:41,column:103}},34:{start:{line:42,column:2},end:{line:42,column:50}},35:{start:{line:45,column:12},end:{line:45,column:15}},36:{start:{line:46,column:2},end:{line:46,column:96}},37:{start:{line:49,column:18},end:{line:49,column:28}},38:{start:{line:50,column:20},end:{line:50,column:62}},39:{start:{line:51,column:21},end:{line:51,column:55}},40:{start:{line:52,column:2},end:{line:52,column:32}},41:{start:{line:55,column:18},end:{line:55,column:28}},42:{start:{line:56,column:21},end:{line:56,column:61}},43:{start:{line:57,column:2},end:{line:57,column:62}},44:{start:{line:57,column:50},end:{line:57,column:62}},45:{start:{line:58,column:16},end:{line:58,column:32}},46:{start:{line:59,column:14},end:{line:59,column:15}},47:{start:{line:60,column:2},end:{line:67,column:3}},48:{start:{line:60,column:15},end:{line:60,column:20}},49:{start:{line:61,column:14},end:{line:61,column:24}},50:{start:{line:62,column:4},end:{line:66,column:5}},51:{start:{line:62,column:19},end:{line:62,column:27}},52:{start:{line:63,column:9},end:{line:66,column:5}},53:{start:{line:64,column:6},end:{line:64,column:14}},54:{start:{line:65,column:6},end:{line:65,column:58}},55:{start:{line:65,column:23},end:{line:65,column:58}},56:{start:{line:68,column:2},end:{line:68,column:14}},57:{start:{line:70,column:29},end:{line:70,column:54}},58:{start:{line:71,column:22},end:{line:71,column:47}},59:{start:{line:72,column:25},end:{line:72,column:29}},60:{start:{line:80,column:6},end:{line:80,column:12}},61:{start:{line:81,column:19},end:{line:81,column:41}},62:{start:{line:82,column:2},end:{line:84,column:3}},63:{start:{line:83,column:4},end:{line:83,column:124}},64:{start:{line:85,column:23},end:{line:85,column:45}},65:{start:{line:86,column:24},end:{line:86,column:104}},66:{start:{line:86,column:66},end:{line:86,column:102}},67:{start:{line:87,column:22},end:{line:95,column:3}},68:{start:{line:96,column:19},end:{line:96,column:50}},69:{start:{line:97,column:15},end:{line:102,column:3}},70:{start:{line:103,column:18},end:{line:106,column:3}},71:{start:{line:107,column:2},end:{line:109,column:3}},72:{start:{line:108,column:4},end:{line:108,column:34}},73:{start:{line:111,column:2},end:{line:120,column:3}},74:{start:{line:112,column:4},end:{line:116,column:7}},75:{start:{line:118,column:20},end:{line:118,column:68}},76:{start:{line:119,column:4},end:{line:119,column:61}},77:{start:{line:121,column:2},end:{line:124,column:3}},78:{start:{line:122,column:17},end:{line:122,column:33}},79:{start:{line:123,column:4},end:{line:123,column:82}},80:{start:{line:126,column:2},end:{line:130,column:3}},81:{start:{line:127,column:4},end:{line:127,column:28}},82:{start:{line:129,column:4},end:{line:129,column:66}},83:{start:{line:131,column:18},end:{line:131,column:52}},84:{start:{line:132,column:2},end:{line:134,column:3}},85:{start:{line:133,column:4},end:{line:133,column:70}},86:{start:{line:136,column:19},end:{line:136,column:53}},87:{start:{line:137,column:2},end:{line:143,column:3}},88:{start:{line:138,column:4},end:{line:142,column:5}},89:{start:{line:139,column:6},end:{line:139,column:36}},90:{start:{line:141,column:6},end:{line:141,column:22}},91:{start:{line:144,column:2},end:{line:150,column:3}},92:{start:{line:145,column:4},end:{line:149,column:5}},93:{start:{line:146,column:6},end:{line:146,column:46}},94:{start:{line:148,column:6},end:{line:148,column:99}},95:{start:{line:151,column:2},end:{line:153,column:3}},96:{start:{line:152,column:4},end:{line:152,column:80}},97:{start:{line:154,column:2},end:{line:168,column:3}},98:{start:{line:155,column:18},end:{line:155,column:32}},99:{start:{line:156,column:21},end:{line:156,column:54}},100:{start:{line:157,column:22},end:{line:157,column:39}},101:{start:{line:158,column:4},end:{line:167,column:5}},102:{start:{line:159,column:28},end:{line:159,column:64}},103:{start:{line:160,column:6},end:{line:164,column:7}},104:{start:{line:161,column:8},end:{line:161,column:94}},105:{start:{line:163,column:8},end:{line:163,column:83}},106:{start:{line:166,column:6},end:{line:166,column:81}},107:{start:{line:169,column:2},end:{line:222,column:3}},108:{start:{line:170,column:16},end:{line:170,column:22}},109:{start:{line:171,column:4},end:{line:173,column:5}},110:{start:{line:172,column:6},end:{line:172,column:71}},111:{start:{line:174,column:4},end:{line:174,column:49}},112:{start:{line:175,column:19},end:{line:175,column:54}},113:{start:{line:175,column:38},end:{line:175,column:53}},114:{start:{line:176,column:23},end:{line:176,column:62}},115:{start:{line:176,column:42},end:{line:176,column:61}},116:{start:{line:177,column:27},end:{line:177,column:109}},117:{start:{line:177,column:54},end:{line:177,column:101}},118:{start:{line:178,column:20},end:{line:178,column:36}},119:{start:{line:179,column:21},end:{line:181,column:5}},120:{start:{line:180,column:6},end:{line:180,column:43}},121:{start:{line:182,column:4},end:{line:214,column:5}},122:{start:{line:183,column:6},end:{line:197,column:7}},123:{start:{line:184,column:8},end:{line:194,column:9}},124:{start:{line:185,column:10},end:{line:185,column:35}},125:{start:{line:187,column:27},end:{line:187,column:43}},126:{start:{line:188,column:10},end:{line:193,column:11}},127:{start:{line:189,column:12},end:{line:189,column:41}},128:{start:{line:190,column:12},end:{line:190,column:28}},129:{start:{line:192,column:12},end:{line:192,column:27}},130:{start:{line:196,column:8},end:{line:196,column:24}},131:{start:{line:199,column:22},end:{line:199,column:70}},132:{start:{line:200,column:6},end:{line:213,column:7}},133:{start:{line:201,column:29},end:{line:203,column:9}},134:{start:{line:202,column:18},end:{line:202,column:65}},135:{start:{line:204,column:8},end:{line:204,column:37}},136:{start:{line:205,column:8},end:{line:210,column:9}},137:{start:{line:206,column:10},end:{line:206,column:33}},138:{start:{line:208,column:31},end:{line:208,column:94}},139:{start:{line:209,column:10},end:{line:209,column:71}},140:{start:{line:212,column:8},end:{line:212,column:64}},141:{start:{line:215,column:19},end:{line:215,column:65}},142:{start:{line:216,column:20},end:{line:216,column:50}},143:{start:{line:217,column:4},end:{line:220,column:5}},144:{start:{line:218,column:18},end:{line:218,column:69}},145:{start:{line:219,column:6},end:{line:219,column:71}},146:{start:{line:221,column:4},end:{line:221,column:39}},147:{start:{line:223,column:19},end:{line:223,column:25}},148:{start:{line:224,column:19},end:{line:227,column:3}},149:{start:{line:228,column:20},end:{line:228,column:52}},150:{start:{line:229,column:2},end:{line:231,column:3}},151:{start:{line:230,column:4},end:{line:230,column:98}},152:{start:{line:232,column:2},end:{line:232,column:39}}},fnMap:{0:{name:"getSystemPromptPatch",decl:{start:{line:5,column:9},end:{line:5,column:29}},loc:{start:{line:5,column:32},end:{line:14,column:1}},line:5},1:{name:"resolveLayerIdsInPatch",decl:{start:{line:15,column:9},end:{line:15,column:31}},loc:{start:{line:15,column:46},end:{line:37,column:1}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:31},end:{line:22,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:27},end:{line:36,column:3}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:44},end:{line:26,column:45}},loc:{start:{line:26,column:51},end:{line:26,column:63}},line:26},5:{name:"getTextFromAnthropicResponse",decl:{start:{line:38,column:9},end:{line:38,column:37}},loc:{start:{line:38,column:44},end:{line:43,column:1}},line:38},6:{name:"(anonymous_6)",decl:{start:{line:41,column:30},end:{line:41,column:31}},loc:{start:{line:41,column:37},end:{line:41,column:84}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:41,column:90},end:{line:41,column:91}},loc:{start:{line:41,column:97},end:{line:41,column:103}},line:41},8:{name:"isApiWrapper",decl:{start:{line:44,column:9},end:{line:44,column:21}},loc:{start:{line:44,column:27},end:{line:47,column:1}},line:44},9:{name:"parseJsonFromResponse",decl:{start:{line:48,column:9},end:{line:48,column:30}},loc:{start:{line:48,column:36},end:{line:53,column:1}},line:48},10:{name:"extractPatchArrayFromText",decl:{start:{line:54,column:9},end:{line:54,column:34}},loc:{start:{line:54,column:40},end:{line:69,column:1}},line:54},11:{name:"editStyleWithLLM",decl:{start:{line:73,column:22},end:{line:73,column:38}},loc:{start:{line:73,column:47},end:{line:233,column:1}},line:73},12:{name:"(anonymous_12)",decl:{start:{line:86,column:58},end:{line:86,column:59}},loc:{start:{line:86,column:66},end:{line:86,column:102}},line:86},13:{name:"(anonymous_13)",decl:{start:{line:175,column:30},end:{line:175,column:31}},loc:{start:{line:175,column:38},end:{line:175,column:53}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:176,column:34},end:{line:176,column:35}},loc:{start:{line:176,column:42},end:{line:176,column:61}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:46},end:{line:177,column:47}},loc:{start:{line:177,column:54},end:{line:177,column:101}},line:177},16:{name:"(anonymous_16)",decl:{start:{line:179,column:21},end:{line:179,column:22}},loc:{start:{line:179,column:28},end:{line:181,column:5}},line:179},17:{name:"(anonymous_17)",decl:{start:{line:202,column:10},end:{line:202,column:11}},loc:{start:{line:202,column:18},end:{line:202,column:65}},line:202}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:17,column:43}},type:"if",locations:[{start:{line:17,column:2},end:{line:17,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:21,column:4},end:{line:21,column:53}},type:"if",locations:[{start:{line:21,column:4},end:{line:21,column:53}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},2:{loc:{start:{line:25,column:4},end:{line:25,column:76}},type:"if",locations:[{start:{line:25,column:4},end:{line:25,column:76}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25},3:{loc:{start:{line:25,column:8},end:{line:25,column:64}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:32}},{start:{line:25,column:36},end:{line:25,column:64}}],line:25},4:{loc:{start:{line:27,column:4},end:{line:27,column:67}},type:"if",locations:[{start:{line:27,column:4},end:{line:27,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27},5:{loc:{start:{line:27,column:8},end:{line:27,column:55}},type:"binary-expr",locations:[{start:{line:27,column:8},end:{line:27,column:27}},{start:{line:27,column:31},end:{line:27,column:55}}],line:27},6:{loc:{start:{line:30,column:4},end:{line:30,column:53}},type:"if",locations:[{start:{line:30,column:4},end:{line:30,column:53}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},7:{loc:{start:{line:32,column:4},end:{line:32,column:36}},type:"if",locations:[{start:{line:32,column:4},end:{line:32,column:36}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},8:{loc:{start:{line:34,column:50},end:{line:34,column:72}},type:"cond-expr",locations:[{start:{line:34,column:57},end:{line:34,column:67}},{start:{line:34,column:70},end:{line:34,column:72}}],line:34},9:{loc:{start:{line:40,column:2},end:{line:40,column:42}},type:"if",locations:[{start:{line:40,column:2},end:{line:40,column:42}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},10:{loc:{start:{line:41,column:37},end:{line:41,column:84}},type:"binary-expr",locations:[{start:{line:41,column:37},end:{line:41,column:54}},{start:{line:41,column:58},end:{line:41,column:84}}],line:41},11:{loc:{start:{line:42,column:9},end:{line:42,column:49}},type:"cond-expr",locations:[{start:{line:42,column:28},end:{line:42,column:42}},{start:{line:42,column:45},end:{line:42,column:49}}],line:42},12:{loc:{start:{line:46,column:9},end:{line:46,column:95}},type:"binary-expr",locations:[{start:{line:46,column:9},end:{line:46,column:33}},{start:{line:46,column:37},end:{line:46,column:64}},{start:{line:46,column:68},end:{line:46,column:95}}],line:46},13:{loc:{start:{line:51,column:21},end:{line:51,column:55}},type:"cond-expr",locations:[{start:{line:51,column:33},end:{line:51,column:45}},{start:{line:51,column:48},end:{line:51,column:55}}],line:51},14:{loc:{start:{line:57,column:2},end:{line:57,column:62}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:62}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},15:{loc:{start:{line:57,column:6},end:{line:57,column:48}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:17}},{start:{line:57,column:21},end:{line:57,column:48}}],line:57},16:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:63,column:9},end:{line:66,column:5}}],line:62},17:{loc:{start:{line:63,column:9},end:{line:66,column:5}},type:"if",locations:[{start:{line:63,column:9},end:{line:66,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},18:{loc:{start:{line:65,column:6},end:{line:65,column:58}},type:"if",locations:[{start:{line:65,column:6},end:{line:65,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},19:{loc:{start:{line:77,column:4},end:{line:77,column:22}},type:"default-arg",locations:[{start:{line:77,column:13},end:{line:77,column:22}}],line:77},20:{loc:{start:{line:78,column:4},end:{line:78,column:136}},type:"default-arg",locations:[{start:{line:78,column:13},end:{line:78,column:136}}],line:78},21:{loc:{start:{line:78,column:13},end:{line:78,column:136}},type:"binary-expr",locations:[{start:{line:78,column:13},end:{line:78,column:22}},{start:{line:78,column:65},end:{line:78,column:135}}],line:78},22:{loc:{start:{line:78,column:65},end:{line:78,column:135}},type:"cond-expr",locations:[{start:{line:78,column:73},end:{line:78,column:93}},{start:{line:78,column:96},end:{line:78,column:135}}],line:78},23:{loc:{start:{line:79,column:4},end:{line:79,column:28}},type:"default-arg",locations:[{start:{line:79,column:26},end:{line:79,column:28}}],line:79},24:{loc:{start:{line:82,column:2},end:{line:84,column:3}},type:"if",locations:[{start:{line:82,column:2},end:{line:84,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},25:{loc:{start:{line:82,column:6},end:{line:82,column:34}},type:"binary-expr",locations:[{start:{line:82,column:6},end:{line:82,column:15}},{start:{line:82,column:19},end:{line:82,column:34}}],line:82},26:{loc:{start:{line:98,column:11},end:{line:98,column:73}},type:"binary-expr",locations:[{start:{line:98,column:11},end:{line:98,column:20}},{start:{line:98,column:60},end:{line:98,column:73}}],line:98},27:{loc:{start:{line:107,column:2},end:{line:109,column:3}},type:"if",locations:[{start:{line:107,column:2},end:{line:109,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:107},28:{loc:{start:{line:107,column:6},end:{line:107,column:25}},type:"binary-expr",locations:[{start:{line:107,column:6},end:{line:107,column:15}},{start:{line:107,column:19},end:{line:107,column:25}}],line:107},29:{loc:{start:{line:118,column:20},end:{line:118,column:68}},type:"cond-expr",locations:[{start:{line:118,column:43},end:{line:118,column:54}},{start:{line:118,column:57},end:{line:118,column:68}}],line:118},30:{loc:{start:{line:121,column:2},end:{line:124,column:3}},type:"if",locations:[{start:{line:121,column:2},end:{line:124,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},31:{loc:{start:{line:132,column:2},end:{line:134,column:3}},type:"if",locations:[{start:{line:132,column:2},end:{line:134,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:132},32:{loc:{start:{line:132,column:6},end:{line:132,column:45}},type:"binary-expr",locations:[{start:{line:132,column:6},end:{line:132,column:14}},{start:{line:132,column:18},end:{line:132,column:45}}],line:132},33:{loc:{start:{line:137,column:2},end:{line:143,column:3}},type:"if",locations:[{start:{line:137,column:2},end:{line:143,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},34:{loc:{start:{line:144,column:2},end:{line:150,column:3}},type:"if",locations:[{start:{line:144,column:2},end:{line:150,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:144},35:{loc:{start:{line:151,column:2},end:{line:153,column:3}},type:"if",locations:[{start:{line:151,column:2},end:{line:153,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:151},36:{loc:{start:{line:151,column:6},end:{line:151,column:51}},type:"binary-expr",locations:[{start:{line:151,column:6},end:{line:151,column:21}},{start:{line:151,column:25},end:{line:151,column:51}}],line:151},37:{loc:{start:{line:154,column:2},end:{line:168,column:3}},type:"if",locations:[{start:{line:154,column:2},end:{line:168,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:154},38:{loc:{start:{line:156,column:21},end:{line:156,column:54}},type:"cond-expr",locations:[{start:{line:156,column:44},end:{line:156,column:49}},{start:{line:156,column:52},end:{line:156,column:54}}],line:156},39:{loc:{start:{line:158,column:4},end:{line:167,column:5}},type:"if",locations:[{start:{line:158,column:4},end:{line:167,column:5}},{start:{line:165,column:11},end:{line:167,column:5}}],line:158},40:{loc:{start:{line:161,column:17},end:{line:161,column:93}},type:"cond-expr",locations:[{start:{line:161,column:33},end:{line:161,column:58}},{start:{line:161,column:61},end:{line:161,column:93}}],line:161},41:{loc:{start:{line:169,column:2},end:{line:222,column:3}},type:"if",locations:[{start:{line:169,column:2},end:{line:222,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:169},42:{loc:{start:{line:171,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:171,column:4},end:{line:173,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},43:{loc:{start:{line:177,column:27},end:{line:177,column:109}},type:"cond-expr",locations:[{start:{line:177,column:36},end:{line:177,column:102}},{start:{line:177,column:105},end:{line:177,column:109}}],line:177},44:{loc:{start:{line:177,column:54},end:{line:177,column:101}},type:"cond-expr",locations:[{start:{line:177,column:72},end:{line:177,column:96}},{start:{line:177,column:99},end:{line:177,column:101}}],line:177},45:{loc:{start:{line:183,column:6},end:{line:197,column:7}},type:"if",locations:[{start:{line:183,column:6},end:{line:197,column:7}},{start:{line:195,column:13},end:{line:197,column:7}}],line:183},46:{loc:{start:{line:188,column:10},end:{line:193,column:11}},type:"if",locations:[{start:{line:188,column:10},end:{line:193,column:11}},{start:{line:191,column:17},end:{line:193,column:11}}],line:188},47:{loc:{start:{line:199,column:22},end:{line:199,column:70}},type:"cond-expr",locations:[{start:{line:199,column:45},end:{line:199,column:56}},{start:{line:199,column:59},end:{line:199,column:70}}],line:199},48:{loc:{start:{line:200,column:6},end:{line:213,column:7}},type:"if",locations:[{start:{line:200,column:6},end:{line:213,column:7}},{start:{line:211,column:13},end:{line:213,column:7}}],line:200},49:{loc:{start:{line:200,column:10},end:{line:200,column:47}},type:"binary-expr",locations:[{start:{line:200,column:10},end:{line:200,column:20}},{start:{line:200,column:24},end:{line:200,column:47}}],line:200},50:{loc:{start:{line:202,column:18},end:{line:202,column:65}},type:"cond-expr",locations:[{start:{line:202,column:40},end:{line:202,column:60}},{start:{line:202,column:63},end:{line:202,column:65}}],line:202},51:{loc:{start:{line:208,column:31},end:{line:208,column:94}},type:"cond-expr",locations:[{start:{line:208,column:59},end:{line:208,column:75}},{start:{line:208,column:78},end:{line:208,column:94}}],line:208},52:{loc:{start:{line:215,column:39},end:{line:215,column:63}},type:"binary-expr",locations:[{start:{line:215,column:39},end:{line:215,column:51}},{start:{line:215,column:55},end:{line:215,column:63}}],line:215},53:{loc:{start:{line:216,column:20},end:{line:216,column:50}},type:"binary-expr",locations:[{start:{line:216,column:20},end:{line:216,column:44}},{start:{line:216,column:48},end:{line:216,column:50}}],line:216},54:{loc:{start:{line:217,column:4},end:{line:220,column:5}},type:"if",locations:[{start:{line:217,column:4},end:{line:220,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:217},55:{loc:{start:{line:218,column:18},end:{line:218,column:69}},type:"binary-expr",locations:[{start:{line:218,column:18},end:{line:218,column:37}},{start:{line:218,column:41},end:{line:218,column:69}}],line:218},56:{loc:{start:{line:226,column:8},end:{line:226,column:31}},type:"binary-expr",locations:[{start:{line:226,column:8},end:{line:226,column:19}},{start:{line:226,column:23},end:{line:226,column:31}}],line:226},57:{loc:{start:{line:228,column:20},end:{line:228,column:52}},type:"binary-expr",locations:[{start:{line:228,column:20},end:{line:228,column:46}},{start:{line:228,column:50},end:{line:228,column:52}}],line:228},58:{loc:{start:{line:229,column:2},end:{line:231,column:3}},type:"if",locations:[{start:{line:229,column:2},end:{line:231,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:229},59:{loc:{start:{line:230,column:49},end:{line:230,column:93}},type:"binary-expr",locations:[{start:{line:230,column:49},end:{line:230,column:70}},{start:{line:230,column:74},end:{line:230,column:93}}],line:230}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0],20:[0],21:[0,0],22:[0,0],23:[0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style-chat.ts"],names:[],mappings:"AAAA,OAAO,eAAe;AACtB,SAAS,kBAAkC;AAC3C,SAAS,wBAAwB;AAGjC,MAAM,iBAAiB;AAGvB,SAAS,uBAA+B;AACtC,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gJAMuI,cAAc;AAAA;AAE9J;AAMA,SAAS,uBACP,OACA,OACa;AACb,QAAM,SAAS,MAAM;AACrB,MAAI,CAAC,MAAM,QAAQ,MAAM,EAAG,QAAO;AACnC,QAAM,gCAAgB,IAAoB;AAC1C,SAAO,QAAQ,CAAC,OAAO,MAAM;AAC3B,UAAM,KAAM,MAA0B;AACtC,QAAI,OAAO,OAAO,SAAU,WAAU,IAAI,IAAI,CAAC;AAAA,EACjD,CAAC;AACD,SAAO,MAAM,IAAI,CAAC,OAAO;AACvB,UAAM,OAAO,GAAG;AAChB,QAAI,OAAO,SAAS,YAAY,CAAC,KAAK,WAAW,UAAU,EAAG,QAAO;AACrE,UAAM,WAAW,KAAK,MAAM,GAAG,EAAE,OAAO,CAAC,MAAM,EAAE,SAAS,CAAC;AAC3D,QAAI,SAAS,SAAS,KAAK,SAAS,CAAC,MAAM,SAAU,QAAO;AAC5D,UAAM,eAAe,SAAS,CAAC;AAC/B,UAAM,sBAAsB,aAAa,QAAQ,OAAO,GAAG,EAAE,QAAQ,OAAO,GAAG;AAC/E,QAAI,QAAQ,KAAK,mBAAmB,EAAG,QAAO;AAC9C,UAAM,QAAQ,UAAU,IAAI,mBAAmB;AAC/C,QAAI,UAAU,OAAW,QAAO;AAChC,UAAM,OAAO,SAAS,MAAM,CAAC,EAAE,KAAK,GAAG;AACvC,UAAM,UAAU,aAAa,OAAO,KAAK,KAAK,OAAO,MAAM,OAAO;AAClE,WAAO,EAAE,GAAG,IAAI,MAAM,QAAQ;AAAA,EAChC,CAAC;AACH;AAiBA,SAAS,6BAA6B,MAA4E;AAChH,QAAM,SAAS,KAAK;AACpB,MAAI,CAAC,MAAM,QAAQ,MAAM,EAAG,QAAO;AACnC,QAAM,QAAQ,OACX,OAAO,CAAC,MAAM,EAAE,SAAS,UAAU,OAAO,EAAE,SAAS,QAAQ,EAC7D,IAAI,CAAC,MAAM,EAAE,IAAc;AAC9B,SAAO,MAAM,SAAS,IAAI,MAAM,KAAK,EAAE,IAAI;AAC7C;AAGA,SAAS,aAAa,KAAsB;AAC1C,QAAM,IAAI;AACV,SAAO,MAAM,QAAQ,EAAE,OAAO,KAAK,OAAO,EAAE,UAAU,YAAY,OAAO,EAAE,UAAU;AACvF;AAGA,SAAS,sBAAsB,KAAsB;AACnD,QAAM,UAAU,IAAI,KAAK;AACzB,QAAM,YAAY,QAAQ,MAAM,2BAA2B;AAC3D,QAAM,aAAa,YAAY,UAAU,CAAC,IAAI;AAC9C,SAAO,KAAK,MAAM,UAAU;AAC9B;AAOA,SAAS,0BAA0B,KAA4B;AAC7D,QAAM,UAAU,IAAI,KAAK;AACzB,QAAM,aAAa,QAAQ,MAAM,yBAAyB;AAC1D,MAAI,CAAC,cAAc,WAAW,UAAU,OAAW,QAAO;AAC1D,QAAM,QAAQ,WAAW;AACzB,MAAI,QAAQ;AACZ,WAAS,IAAI,OAAO,IAAI,QAAQ,QAAQ,KAAK;AAC3C,UAAM,IAAI,QAAQ,CAAC;AACnB,QAAI,MAAM,IAAK;AAAA,aACN,MAAM,KAAK;AAClB;AACA,UAAI,UAAU,EAAG,QAAO,QAAQ,MAAM,OAAO,IAAI,CAAC;AAAA,IACpD;AAAA,EACF;AACA,SAAO;AACT;AAEA,MAAM,uBAAuB;AAG7B,MAAM,gBAAgB;AACtB,MAAM,mBAAmB;AAMzB,sBAAsB,iBAAiB,QAAmD;AACxF,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA,SAAS,yBAAgB;AAAA,IACzB,SAAU,yBAAgB,2BAAkD,QAAsB,uBAAuB;AAAA,IACzH,sBAAsB,CAAC;AAAA,EACzB,IAAI;AAEJ,QAAM,WAAW,OAAO,WAAW,GAAG;AACtC,MAAI,CAAC,YAAY,CAAC,QAAQ,KAAK,GAAG;AAChC,WAAO,EAAE,IAAI,OAAO,OAAO,2FAA2F;AAAA,EACxH;AAEA,QAAM,eAAe,qBAAqB;AAC1C,QAAM,gBAAgB,oBAAoB,MAAM,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,MAA8B,SAAS,EAAE,QAAQ,EAAE;AAC7H,QAAM,cAAiD;AAAA,IACrD,MAAM;AAAA,IACN,SAAS;AAAA;AAAA,EAAoC,KAAK,UAAU,OAAO,MAAM,CAAC,CAAC;AAAA;AAAA;AAAA,gBAA6B,MAAM;AAAA,EAChH;AACA,QAAM,WAAW,CAAC,GAAG,eAAe,WAAW;AAE/C,QAAM,OAAO;AAAA,IACX,OAAQ,yBAAgB,wBAA+C;AAAA,IACvE,YAAY;AAAA,IACZ,QAAQ;AAAA,IACR;AAAA,EACF;AAEA,QAAM,UAAkC;AAAA,IACtC,gBAAgB;AAAA,IAChB,qBAAqB;AAAA,EACvB;AACA,MAAI,CAAC,YAAY,QAAQ;AACvB,YAAQ,WAAW,IAAI;AAAA,EACzB;AAEA,MAAI;AACJ,MAAI;AACF,UAAM,MAAM,MAAM,QAAQ;AAAA,MACxB,QAAQ;AAAA,MACR;AAAA,MACA,MAAM,KAAK,UAAU,IAAI;AAAA,IAC3B,CAAC;AAAA,EACH,SAAS,KAAK;AACZ,UAAM,UAAU,eAAe,QAAQ,IAAI,UAAU,OAAO,GAAG;AAC/D,WAAO,EAAE,IAAI,OAAO,OAAO,kBAAkB,OAAO,GAAG;AAAA,EACzD;AAEA,MAAI,CAAC,IAAI,IAAI;AACX,UAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,WAAO,EAAE,IAAI,OAAO,OAAO,aAAa,IAAI,MAAM,KAAK,KAAK,MAAM,GAAG,GAAG,CAAC,GAAG;AAAA,EAC9E;AAEA,MAAI;AACJ,MAAI;AACF,WAAO,MAAM,IAAI,KAAK;AAAA,EACxB,QAAQ;AACN,WAAO,EAAE,IAAI,OAAO,OAAO,iCAAiC;AAAA,EAC9D;AAEA,QAAM,UAAU,6BAA6B,IAAI;AACjD,MAAI,CAAC,WAAW,OAAO,YAAY,UAAU;AAC3C,WAAO,EAAE,IAAI,OAAO,OAAO,qCAAqC;AAAA,EAClE;AAEA,MAAI;AACJ,QAAM,WAAW,0BAA0B,OAAO;AAClD,MAAI,UAAU;AACZ,QAAI;AACF,eAAS,KAAK,MAAM,QAAQ;AAAA,IAC9B,QAAQ;AACN,eAAS;AAAA,IACX;AAAA,EACF;AACA,MAAI,WAAW,QAAW;AACxB,QAAI;AACF,eAAS,sBAAsB,OAAO;AAAA,IACxC,QAAQ;AACN,aAAO,EAAE,IAAI,OAAO,OAAO,gEAAgE;AAAA,IAC7F;AAAA,EACF;AAEA,MAAI,WAAW,QAAQ,OAAO,WAAW,UAAU;AACjD,WAAO,EAAE,IAAI,OAAO,OAAO,+CAA+C;AAAA,EAC5E;AAEA,MAAI,aAAa,MAAM,GAAG;AACxB,UAAM,QAAS,OAAmC;AAClD,UAAM,WAAW,MAAM,QAAQ,KAAK,IAAI,QAAQ,CAAC;AACjD,UAAM,YAAa,SAAS,CAAC,GAAqC;AAClE,QAAI,OAAO,cAAc,UAAU;AACjC,YAAM,gBAAgB,0BAA0B,SAAS;AACzD,UAAI;AACF,iBAAS,gBAAgB,KAAK,MAAM,aAAa,IAAI,sBAAsB,SAAS;AAAA,MACtF,QAAQ;AACN,eAAO,EAAE,IAAI,OAAO,OAAO,8CAA8C;AAAA,MAC3E;AAAA,IACF,OAAO;AACL,aAAO,EAAE,IAAI,OAAO,OAAO,8CAA8C;AAAA,IAC3E;AAAA,EACF;AAGA,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,QAAI,QAAQ;AACZ,QAAI,MAAM,WAAW,GAAG;AACtB,aAAO,EAAE,IAAI,MAAM,OAAO,aAAa,wBAAwB;AAAA,IACjE;AACA,YAAQ,uBAAuB,OAAO,KAAK;AAC3C,UAAM,SAAS,MAAM,KAAK,CAAC,OAAO,GAAG,OAAO,KAAK;AACjD,UAAM,aAAa,MAAM,KAAK,CAAC,OAAO,GAAG,OAAO,SAAS;AACzD,UAAM,iBAAiB,SAClB,MAAM,IAAI,CAAC,OAAQ,GAAG,OAAO,QAAQ,EAAE,GAAG,IAAI,IAAI,UAAmB,IAAI,EAAG,IAC7E;AACJ,QAAI,YAAY,UAAU,KAAK;AAC/B,UAAM,WAAW,CAAC,MAAmB;AACnC,iBAAW,WAAW,GAAG,MAAM,IAAI;AAAA,IACrC;AACA,QAAI;AACF,UAAI,mBAAmB,MAAM;AAC3B,YAAI;AACF,mBAAS,cAAc;AAAA,QACzB,SAAS,UAAU;AACjB,gBAAM,WAAW,OAAO,QAAQ;AAChC,cAAI,SAAS,SAAS,6BAA6B,GAAG;AACpD,wBAAY,UAAU,KAAK;AAC3B,qBAAS,KAAK;AAAA,UAChB,OAAO;AACL,kBAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,OAAO;AACL,iBAAS,KAAK;AAAA,MAChB;AAAA,IACF,SAAS,KAAK;AACZ,YAAM,UAAU,eAAe,QAAQ,IAAI,UAAU,OAAO,GAAG;AAC/D,UAAI,cAAc,mBAAmB,MAAM;AACzC,cAAM,eAAe,MAAM;AAAA,UAAI,CAAC,OAC9B,GAAG,OAAO,YAAY,EAAE,GAAG,IAAI,IAAI,MAAe,IAAI;AAAA,QACxD;AACA,oBAAY,UAAU,KAAK;AAC3B,YAAI;AACF,mBAAS,YAAY;AAAA,QACvB,SAAS,UAAU;AACjB,gBAAM,eAAe,oBAAoB,QAAQ,SAAS,UAAU,OAAO,QAAQ;AACnF,iBAAO,EAAE,IAAI,OAAO,OAAO,iBAAiB,YAAY,GAAG;AAAA,QAC7D;AAAA,MACF,OAAO;AACL,eAAO,EAAE,IAAI,OAAO,OAAO,iBAAiB,OAAO,GAAG;AAAA,MACxD;AAAA,IACF;AACA,UAAM,SAAS,EAAE,GAAG,WAAW,IAAK,UAAU,MAAiB,MAAM,GAAG;AACxE,UAAM,UAAwC,iBAAiB,MAAM,KAAiD,CAAC;AACvH,QAAI,QAAQ,SAAS,GAAG;AACtB,YAAM,MAAM,QAAQ,CAAC,GAAG,WAAW;AACnC,aAAO,EAAE,IAAI,OAAO,OAAO,8BAA8B,GAAG,GAAG;AAAA,IACjE;AACA,WAAO,EAAE,IAAI,MAAM,OAAO,OAAO;AAAA,EACnC;AAGA,QAAM,WAAW;AACjB,QAAM,WAAqC;AAAA,IACzC,GAAG;AAAA,IACH,IAAK,SAAS,MAAiB,MAAM;AAAA,EACvC;AACA,QAAM,YAA0C,iBAAiB,QAAQ,KAAiD,CAAC;AAC3H,MAAI,UAAU,SAAS,GAAG;AACxB,WAAO,EAAE,IAAI,OAAO,OAAO,kBAAkB,UAAU,CAAC,GAAG,WAAW,mBAAmB,GAAG;AAAA,EAC9F;AACA,SAAO,EAAE,IAAI,MAAM,OAAO,SAAS;AACrC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5e44de22453c0840b698a6ffec791d4ed189601f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return st=function(){return s},s}st();const bUe=(st().s[0]++,"https://maplibre.org/maplibre-style-spec/");function _Ue(){return st().f[0]++,st().s[1]++,`You edit MapLibre GL map styles. You receive the current style JSON and a user request. Return ONLY a JSON Patch (RFC 6902) array that, when applied to the style, makes the requested change.

Rules:
- Output nothing but a JSON array of patch operations. No markdown, no explanation, no commentary before or after the array. Example: [{"op":"replace","path":"/layers/roads_minor/paint/line-color","value":"#d8d8d8"}]
- Paths use JSON Pointer with layer id (not index): /layers/<layer_id>/paint/line-color, e.g. /layers/roads_minor/paint/line-color or /layers/landuse_park/paint/fill-color. We resolve layer id to index automatically. The path must end at a property name. Never use array indices on property values (no /paint/line-color/0 or /3). Paint properties like line-color, fill-color are strings or expressions; set the whole value with one replace/add.
- Use "replace" for existing properties, "add" for new ones. For paint or layout properties that may be missing (e.g. line-dasharray, line-cap), use "add" so the patch works whether the property exists or not. Preserve id, sources, glyphs, sprite unless the user asks to change them.
- For label overlap: adjust symbol layers' layout/paint (text-size, text-max-width, text-optional, symbol-spacing, text-allow-overlap). Spec: ${bUe}
- Only include operations that change something.`}function xUe(n,e){st().f[1]++;const t=(st().s[2]++,n.layers);if(st().s[3]++,Array.isArray(t))st().b[0][1]++;else return st().b[0][0]++,st().s[4]++,e;const i=(st().s[5]++,new Map);return st().s[6]++,t.forEach((r,o)=>{st().f[2]++;const s=(st().s[7]++,r.id);st().s[8]++,typeof s=="string"?(st().b[1][0]++,st().s[9]++,i.set(s,o)):st().b[1][1]++}),st().s[10]++,e.map(r=>{st().f[3]++;const o=(st().s[11]++,r.path);if(st().s[12]++,st().b[3][0]++,typeof o!="string"||(st().b[3][1]++,!o.startsWith("/layers/")))return st().b[2][0]++,st().s[13]++,r;st().b[2][1]++;const s=(st().s[14]++,o.split("/").filter(M=>(st().f[4]++,st().s[15]++,M.length>0)));if(st().s[16]++,st().b[5][0]++,s.length<2||(st().b[5][1]++,s[0]!=="layers"))return st().b[4][0]++,st().s[17]++,r;st().b[4][1]++;const a=(st().s[18]++,s[1]),c=(st().s[19]++,a.replace(/~1/g,"/").replace(/~0/g,"~"));if(st().s[20]++,/^\d+$/.test(c))return st().b[6][0]++,st().s[21]++,r;st().b[6][1]++;const d=(st().s[22]++,i.get(c));if(st().s[23]++,d===void 0)return st().b[7][0]++,st().s[24]++,r;st().b[7][1]++;const p=(st().s[25]++,s.slice(2).join("/")),v=(st().s[26]++,"/layers/"+String(d)+(p?(st().b[8][0]++,"/"+p):(st().b[8][1]++,"")));return st().s[27]++,{...r,path:v}})}function MUe(n){st().f[5]++;const e=(st().s[28]++,n.content);if(st().s[29]++,Array.isArray(e))st().b[9][1]++;else return st().b[9][0]++,st().s[30]++,null;const t=(st().s[31]++,e.filter(i=>(st().f[6]++,st().s[32]++,st().b[10][0]++,i.type==="text"&&(st().b[10][1]++,typeof i.text=="string"))).map(i=>(st().f[7]++,st().s[33]++,i.text)));return st().s[34]++,t.length>0?(st().b[11][0]++,t.join("")):(st().b[11][1]++,null)}function wUe(n){st().f[8]++;const e=(st().s[35]++,n);return st().s[36]++,st().b[12][0]++,Array.isArray(e.content)&&(st().b[12][1]++,typeof e.usage=="object")&&(st().b[12][2]++,typeof e.model=="string")}function rZ(n){st().f[9]++;const e=(st().s[37]++,n.trim()),t=(st().s[38]++,e.match(/(\[[\s\S]*\]|\{[\s\S]*\})/)),i=(st().s[39]++,t?(st().b[13][0]++,t[1]):(st().b[13][1]++,e));return st().s[40]++,JSON.parse(i)}function oZ(n){st().f[10]++;const e=(st().s[41]++,n.trim()),t=(st().s[42]++,e.match(/\[\s*\{\s*\\?["']op["']/));if(st().s[43]++,st().b[15][0]++,!t||(st().b[15][1]++,t.index===void 0))return st().b[14][0]++,st().s[44]++,null;st().b[14][1]++;const i=(st().s[45]++,t.index);let r=(st().s[46]++,0);st().s[47]++;for(let o=(st().s[48]++,i);o<e.length;o++){const s=(st().s[49]++,e[o]);if(st().s[50]++,s==="[")st().b[16][0]++,st().s[51]++,r++;else if(st().b[16][1]++,st().s[52]++,s==="]"){if(st().b[17][0]++,st().s[53]++,r--,st().s[54]++,r===0)return st().b[18][0]++,st().s[55]++,e.slice(i,o+1);st().b[18][1]++}else st().b[17][1]++}return st().s[56]++,null}st().s[57]++;const SUe=(st().s[58]++,"claude-3-5-haiku-latest"),EUe=(st().s[59]++,4096);async function BUe(n){st().f[11]++;const{style:e,prompt:t,apiKey:i=(st().b[19][0]++,void 0),apiUrl:r=(st().b[20][0]++,st().b[21][0]++,void 0||(st().b[21][1]++,st().b[22][1]++,"https://api.anthropic.com/v1/messages")),conversationHistory:o=(st().b[23][0]++,[])}=(st().s[60]++,n),s=(st().s[61]++,r.startsWith("/"));if(st().s[62]++,st().b[25][0]++,!s&&(st().b[25][1]++,!i?.trim()))return st().b[24][0]++,st().s[63]++,{ok:!1,error:"Missing API key. Set VITE_ANTHROPIC_API_KEY or, in dev, ANTHROPIC_API_KEY on the server."};st().b[24][1]++;const a=(st().s[64]++,_Ue()),c=(st().s[65]++,o.slice(-6).map(ee=>(st().f[12]++,st().s[66]++,{role:ee.role,content:ee.content}))),d=(st().s[67]++,{role:"user",content:`Current style JSON:
\`\`\`json
${JSON.stringify(e,null,2)}
\`\`\`

User request: ${t}`}),p=(st().s[68]++,[...c,d]),v=(st().s[69]++,{model:(st().b[26][0]++,void 0||(st().b[26][1]++,SUe)),max_tokens:EUe,system:a,messages:p}),M=(st().s[70]++,{"Content-Type":"application/json","anthropic-version":"2023-06-01"});st().s[71]++,st().b[28][0]++,!s&&(st().b[28][1]++,i)?(st().b[27][0]++,st().s[72]++,M["x-api-key"]=i):st().b[27][1]++;let E;st().s[73]++;try{st().s[74]++,E=await fetch(r,{method:"POST",headers:M,body:JSON.stringify(v)})}catch(ee){const ne=(st().s[75]++,ee instanceof Error?(st().b[29][0]++,ee.message):(st().b[29][1]++,String(ee)));return st().s[76]++,{ok:!1,error:`Network error: ${ne}`}}if(st().s[77]++,E.ok)st().b[30][1]++;else{st().b[30][0]++;const ee=(st().s[78]++,await E.text());return st().s[79]++,{ok:!1,error:`API error ${E.status}: ${ee.slice(0,200)}`}}let P;st().s[80]++;try{st().s[81]++,P=await E.json()}catch{return st().s[82]++,{ok:!1,error:"Invalid JSON response from API"}}const U=(st().s[83]++,MUe(P));if(st().s[84]++,st().b[32][0]++,!U||(st().b[32][1]++,typeof U!="string"))return st().b[31][0]++,st().s[85]++,{ok:!1,error:"Empty or invalid response from API"};st().b[31][1]++;let z;const V=(st().s[86]++,oZ(U));if(st().s[87]++,V){st().b[33][0]++,st().s[88]++;try{st().s[89]++,z=JSON.parse(V)}catch{st().s[90]++,z=void 0}}else st().b[33][1]++;if(st().s[91]++,z===void 0){st().b[34][0]++,st().s[92]++;try{st().s[93]++,z=rZ(U)}catch{return st().s[94]++,{ok:!1,error:"Model did not return valid JSON. Try rephrasing your request."}}}else st().b[34][1]++;if(st().s[95]++,st().b[36][0]++,z===null||(st().b[36][1]++,typeof z!="object"))return st().b[35][0]++,st().s[96]++,{ok:!1,error:"Model response was not JSON object or array."};if(st().b[35][1]++,st().s[97]++,wUe(z)){st().b[37][0]++;const ee=(st().s[98]++,z.content),ne=(st().s[99]++,Array.isArray(ee)?(st().b[38][0]++,ee):(st().b[38][1]++,[])),q=(st().s[100]++,ne[0]?.text);if(st().s[101]++,typeof q=="string"){st().b[39][0]++;const le=(st().s[102]++,oZ(q));st().s[103]++;try{st().s[104]++,z=le?(st().b[40][0]++,JSON.parse(le)):(st().b[40][1]++,rZ(q))}catch{return st().s[105]++,{ok:!1,error:"Could not parse style from nested response."}}}else return st().b[39][1]++,st().s[106]++,{ok:!1,error:"Response was API wrapper; no content found."}}else st().b[37][1]++;if(st().s[107]++,Array.isArray(z)){st().b[41][0]++;let ee=(st().s[108]++,z);if(st().s[109]++,ee.length===0)return st().b[42][0]++,st().s[110]++,{ok:!0,style:e,explanation:"No changes requested."};st().b[42][1]++,st().s[111]++,ee=xUe(e,ee);const ne=(st().s[112]++,ee.some(Ce=>(st().f[13]++,st().s[113]++,Ce.op==="add"))),q=(st().s[114]++,ee.some(Ce=>(st().f[14]++,st().s[115]++,Ce.op==="replace"))),le=(st().s[116]++,ne?(st().b[43][0]++,ee.map(Ce=>(st().f[15]++,st().s[117]++,Ce.op==="add"?(st().b[44][0]++,{...Ce,op:"replace"}):(st().b[44][1]++,Ce)))):(st().b[43][1]++,null));let ue=(st().s[118]++,v4(e));st().s[119]++;const ve=Ce=>{st().f[16]++,st().s[120]++,BO(ue,Ce,!0,!0)};st().s[121]++;try{if(st().s[122]++,le!==null){st().b[45][0]++,st().s[123]++;try{st().s[124]++,ve(le)}catch(Ce){const Oe=(st().s[125]++,String(Ce));if(st().s[126]++,Oe.includes("OPERATION_PATH_UNRESOLVABLE"))st().b[46][0]++,st().s[127]++,ue=v4(e),st().s[128]++,ve(ee);else throw st().b[46][1]++,st().s[129]++,Ce}}else st().b[45][1]++,st().s[130]++,ve(ee)}catch(Ce){const Oe=(st().s[131]++,Ce instanceof Error?(st().b[47][0]++,Ce.message):(st().b[47][1]++,String(Ce)));if(st().s[132]++,st().b[49][0]++,q&&(st().b[49][1]++,le===null)){st().b[48][0]++;const Fe=(st().s[133]++,ee.map(Ee=>(st().f[17]++,st().s[134]++,Ee.op==="replace"?(st().b[50][0]++,{...Ee,op:"add"}):(st().b[50][1]++,Ee))));st().s[135]++,ue=v4(e),st().s[136]++;try{st().s[137]++,ve(Fe)}catch(Ee){const Ve=(st().s[138]++,Ee instanceof Error?(st().b[51][0]++,Ee.message):(st().b[51][1]++,String(Ee)));return st().s[139]++,{ok:!1,error:`Patch failed: ${Ve}`}}}else return st().b[48][1]++,st().s[140]++,{ok:!1,error:`Patch failed: ${Oe}`}}const pe=(st().s[141]++,{...ue,id:(st().b[52][0]++,ue.id||(st().b[52][1]++,e.id))}),Be=(st().s[142]++,st().b[53][0]++,eh(pe)??(st().b[53][1]++,[]));if(st().s[143]++,Be.length>0){st().b[54][0]++;const Ce=(st().s[144]++,st().b[55][0]++,Be[0]?.message??(st().b[55][1]++,"Invalid style after patch."));return st().s[145]++,{ok:!1,error:`Style invalid after patch: ${Ce}`}}else st().b[54][1]++;return st().s[146]++,{ok:!0,style:pe}}else st().b[41][1]++;const Z=(st().s[147]++,z),X=(st().s[148]++,{...Z,id:(st().b[56][0]++,Z.id||(st().b[56][1]++,e.id))}),re=(st().s[149]++,st().b[57][0]++,eh(X)??(st().b[57][1]++,[]));return st().s[150]++,re.length>0?(st().b[58][0]++,st().s[151]++,{ok:!1,error:`Invalid style: ${st().b[59][0]++,re[0]?.message??(st().b[59][1]++,"validation failed")}`}):(st().b[58][1]++,st().s[152]++,{ok:!0,style:X})}function Jn(){var n="/home/runner/work/maputnik/maputnik/src/components/StyleChatPanel.tsx",e="2b5f275ec12c59515fd2d32cf69405dc7e92d795",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/StyleChatPanel.tsx",statementMap:{0:{start:{line:6,column:19},end:{line:6,column:41}},1:{start:{line:7,column:16},end:{line:7,column:36}},2:{start:{line:8,column:2},end:{line:10,column:4}},3:{start:{line:9,column:17},end:{line:9,column:152}},4:{start:{line:13,column:19},end:{line:13,column:36}},5:{start:{line:15,column:4},end:{line:15,column:17}},6:{start:{line:16,column:4},end:{line:20,column:6}},7:{start:{line:23,column:4},end:{line:25,column:5}},8:{start:{line:24,column:6},end:{line:24,column:74}},9:{start:{line:27,column:13},end:{line:60,column:3}},10:{start:{line:28,column:4},end:{line:28,column:23}},11:{start:{line:29,column:19},end:{line:29,column:42}},12:{start:{line:30,column:4},end:{line:30,column:46}},13:{start:{line:30,column:39},end:{line:30,column:46}},14:{start:{line:31,column:24},end:{line:31,column:57}},15:{start:{line:32,column:4},end:{line:36,column:8}},16:{start:{line:32,column:26},end:{line:36,column:5}},17:{start:{line:37,column:20},end:{line:37,column:57}},18:{start:{line:38,column:19},end:{line:42,column:6}},19:{start:{line:43,column:4},end:{line:59,column:5}},20:{start:{line:44,column:26},end:{line:47,column:7}},21:{start:{line:48,column:6},end:{line:48,column:80}},22:{start:{line:49,column:31},end:{line:49,column:142}},23:{start:{line:50,column:6},end:{line:53,column:10}},24:{start:{line:50,column:28},end:{line:53,column:7}},25:{start:{line:55,column:6},end:{line:58,column:10}},26:{start:{line:55,column:28},end:{line:58,column:7}},27:{start:{line:61,column:18},end:{line:63,column:3}},28:{start:{line:62,column:4},end:{line:62,column:45}},29:{start:{line:64,column:22},end:{line:73,column:3}},30:{start:{line:65,column:4},end:{line:65,column:34}},31:{start:{line:65,column:27},end:{line:65,column:34}},32:{start:{line:66,column:4},end:{line:68,column:5}},33:{start:{line:67,column:6},end:{line:67,column:13}},34:{start:{line:69,column:4},end:{line:69,column:23}},35:{start:{line:70,column:4},end:{line:72,column:5}},36:{start:{line:71,column:6},end:{line:71,column:23}},37:{start:{line:75,column:14},end:{line:75,column:26}},38:{start:{line:76,column:41},end:{line:76,column:51}},39:{start:{line:77,column:4},end:{line:120,column:9}},40:{start:{line:82,column:49},end:{line:89,column:9}},41:{start:{line:123,column:23},end:{line:123,column:64}}},fnMap:{0:{name:"linkify",decl:{start:{line:5,column:9},end:{line:5,column:16}},loc:{start:{line:5,column:23},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:17},end:{line:9,column:152}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:21},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:44},end:{line:26,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:26},end:{line:60,column:3}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:32,column:18},end:{line:32,column:19}},loc:{start:{line:32,column:26},end:{line:36,column:5}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:50,column:20},end:{line:50,column:21}},loc:{start:{line:50,column:28},end:{line:53,column:7}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:28},end:{line:58,column:7}},line:55},8:{name:"(anonymous_8)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:25},end:{line:63,column:3}},line:61},9:{name:"(anonymous_9)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:73,column:3}},line:64},10:{name:"(anonymous_10)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:11},end:{line:121,column:3}},line:74},11:{name:"(anonymous_11)",decl:{start:{line:82,column:21},end:{line:82,column:22}},loc:{start:{line:82,column:49},end:{line:89,column:9}},line:82}},branchMap:{0:{loc:{start:{line:9,column:17},end:{line:9,column:152}},type:"cond-expr",locations:[{start:{line:9,column:56},end:{line:9,column:145}},{start:{line:9,column:148},end:{line:9,column:152}}],line:9},1:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:30,column:4},end:{line:30,column:46}},type:"if",locations:[{start:{line:30,column:4},end:{line:30,column:46}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},3:{loc:{start:{line:30,column:8},end:{line:30,column:37}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:15}},{start:{line:30,column:19},end:{line:30,column:37}}],line:30},4:{loc:{start:{line:43,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:59,column:5}},{start:{line:54,column:11},end:{line:59,column:5}}],line:43},5:{loc:{start:{line:46,column:12},end:{line:46,column:53}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:46,column:53}}],line:46},6:{loc:{start:{line:49,column:31},end:{line:49,column:142}},type:"cond-expr",locations:[{start:{line:49,column:52},end:{line:49,column:109}},{start:{line:49,column:112},end:{line:49,column:142}}],line:49},7:{loc:{start:{line:65,column:4},end:{line:65,column:34}},type:"if",locations:[{start:{line:65,column:4},end:{line:65,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},8:{loc:{start:{line:66,column:4},end:{line:68,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:68,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},9:{loc:{start:{line:66,column:8},end:{line:66,column:30}},type:"binary-expr",locations:[{start:{line:66,column:8},end:{line:66,column:17}},{start:{line:66,column:21},end:{line:66,column:30}}],line:66},10:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},11:{loc:{start:{line:70,column:8},end:{line:70,column:54}},type:"binary-expr",locations:[{start:{line:70,column:8},end:{line:70,column:31}},{start:{line:70,column:35},end:{line:70,column:54}}],line:70},12:{loc:{start:{line:79,column:8},end:{line:81,column:12}},type:"binary-expr",locations:[{start:{line:79,column:8},end:{line:79,column:29}},{start:{line:79,column:49},end:{line:81,column:12}}],line:79},13:{loc:{start:{line:90,column:8},end:{line:90,column:169}},type:"binary-expr",locations:[{start:{line:90,column:8},end:{line:90,column:15}},{start:{line:90,column:35},end:{line:90,column:169}}],line:90},14:{loc:{start:{line:114,column:24},end:{line:114,column:48}},type:"binary-expr",locations:[{start:{line:114,column:24},end:{line:114,column:31}},{start:{line:114,column:35},end:{line:114,column:48}}],line:114}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/StyleChatPanel.tsx"],names:[],mappings:"AAYM,cAyGE,YAzGF;AAZN,OAAO,WAAW;AAClB,SAAS,uBAA6C;AAGtD,SAAS,wBAAwB;AAGjC,SAAS,QAAQ,MAA+B;AAC9C,QAAM,WAAW;AACjB,QAAM,QAAQ,KAAK,MAAM,QAAQ;AACjC,SAAO,MAAM;AAAA,IAAI,CAAC,MAAM,MACtB,KAAK,MAAM,QAAQ,IACjB,oBAAC,OAAU,MAAM,MAAM,QAAO,UAAS,KAAI,uBACxC,kBADK,CAER,IAEA;AAAA,EAEJ;AACF;AAkBA,MAAM,+BAA+B,MAAM,UAA4D;AAAA,EAC7F,iBAAiB,MAAM,UAA0B;AAAA,EAEzD,YAAY,OAAoC;AAC9C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,CAAC;AAAA,MACX,SAAS;AAAA,MACT,OAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,mBAAmB,YAAyC,WAAgC;AAC1F,QAAI,KAAK,MAAM,SAAS,WAAW,UAAU,SAAS,QAAQ;AAC5D,WAAK,eAAe,SAAS,eAAe,EAAE,UAAU,SAAS,CAAC;AAAA,IACpE;AAAA,EACF;AAAA,EAEA,WAAW,OAAO,MAAuB;AACvC,MAAE,eAAe;AACjB,UAAM,SAAS,KAAK,MAAM,MAAM,KAAK;AACrC,QAAI,CAAC,UAAU,KAAK,MAAM,QAAS;AAEnC,UAAM,cAA2B,EAAE,MAAM,QAAQ,SAAS,OAAO;AACjE,SAAK,SAAS,CAAC,OAAO;AAAA,MACpB,UAAU,CAAC,GAAG,EAAE,UAAU,WAAW;AAAA,MACrC,OAAO;AAAA,MACP,SAAS;AAAA,IACX,EAAE;AAEF,UAAM,UAAyB,CAAC,GAAG,KAAK,MAAM,UAAU,WAAW;AAEnE,UAAM,SAAS,MAAM,iBAAiB;AAAA,MACpC,OAAO,KAAK,MAAM;AAAA,MAClB;AAAA,MACA,qBAAqB,QAAQ,MAAM,EAAE;AAAA,IACvC,CAAC;AAED,QAAI,OAAO,IAAI;AACb,YAAM,cAAwC;AAAA,QAC5C,GAAG,OAAO;AAAA,QACV,IAAI,OAAO,MAAM,MAAM,KAAK,MAAM,SAAS;AAAA,MAC7C;AACA,WAAK,MAAM,eAAe,aAAa,EAAE,aAAa,MAAM,MAAM,KAAK,CAAC;AACxE,YAAM,mBAAmB,OAAO,cAC5B,GAAG,KAAK,MAAM,EAAE,gBAAgB,CAAC,IAAI,OAAO,WAAW,KACvD,KAAK,MAAM,EAAE,gBAAgB;AACjC,WAAK,SAAS,CAAC,OAAO;AAAA,QACpB,UAAU,CAAC,GAAG,EAAE,UAAU,EAAE,MAAM,aAAa,SAAS,iBAAiB,CAAC;AAAA,QAC1E,SAAS;AAAA,MACX,EAAE;AAAA,IACJ,OAAO;AACL,WAAK,SAAS,CAAC,OAAO;AAAA,QACpB,UAAU,CAAC,GAAG,EAAE,UAAU,EAAE,MAAM,aAAa,SAAS,OAAO,MAAM,CAAC;AAAA,QACtE,SAAS;AAAA,MACX,EAAE;AAAA,IACJ;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAA8C;AAC7D,SAAK,SAAS,EAAE,OAAO,EAAE,OAAO,MAAM,CAAC;AAAA,EACzC;AAAA,EAEA,oBAAoB,CAAC,MAAgD;AACnE,QAAI,EAAE,QAAQ,QAAS;AACvB,QAAI,EAAE,WAAW,EAAE,SAAS;AAC1B;AAAA,IACF;AACA,MAAE,eAAe;AACjB,QAAI,KAAK,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,MAAM,SAAS;AAClD,WAAK,SAAS,CAA+B;AAAA,IAC/C;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAE,UAAU,SAAS,MAAM,IAAI,KAAK;AAE1C,WACE,qBAAC,SAAI,WAAU,6BACb;AAAA,2BAAC,SAAI,WAAU,uCACZ;AAAA,iBAAS,WAAW,KACnB,oBAAC,OAAE,WAAU,0CACV;AAAA,UACC,EAAE,2QAA2Q;AAAA,QAC/Q,GACF;AAAA,QAED,SAAS,IAAI,CAAC,KAAK,MAClB;AAAA,UAAC;AAAA;AAAA,YAEC,WAAW,0EAA0E,IAAI,IAAI;AAAA,YAE5F,cAAI;AAAA;AAAA,UAHA;AAAA,QAIP,CACD;AAAA,QACA,WACC,oBAAC,SAAI,WAAU,oFACZ,YAAE,UAAU,GACf;AAAA,QAEF,oBAAC,SAAI,KAAK,KAAK,gBAAgB;AAAA,SACjC;AAAA,MACA,qBAAC,UAAK,WAAU,mCAAkC,UAAU,KAAK,UAC/D;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YACV,OAAO;AAAA,YACP,UAAU,KAAK;AAAA,YACf,WAAW,KAAK;AAAA,YAChB,aAAa,EAAE,qBAAqB;AAAA,YACpC,MAAM;AAAA,YACN,UAAU;AAAA,YACV,cAAY,EAAE,qBAAqB;AAAA;AAAA,QACrC;AAAA,QACA,qBAAC,SAAI,WAAU,uCACb;AAAA,8BAAC,UAAK,WAAU,mCAAkC,eAAY,QAC3D,YAAE,yCAAyC,GAC9C;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,WAAU;AAAA,cACV,UAAU,WAAW,CAAC,MAAM,KAAK;AAAA,cAEhC,YAAE,MAAM;AAAA;AAAA,UACX;AAAA,WACF;AAAA,SACF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5f275ec12c59515fd2d32cf69405dc7e92d795"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Jn=function(){return s},s}Jn();function OUe(n){Jn().f[0]++;const e=(Jn().s[0]++,/(https?:\/\/[^\s]+)/g),t=(Jn().s[1]++,n.split(e));return Jn().s[2]++,t.map((i,r)=>(Jn().f[1]++,Jn().s[3]++,i.match(e)?(Jn().b[0][0]++,oe.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:i},r)):(Jn().b[0][1]++,i)))}class IUe extends En.Component{messagesEndRef=(Jn().s[4]++,En.createRef());constructor(e){Jn().f[2]++,Jn().s[5]++,super(e),Jn().s[6]++,this.state={messages:[],loading:!1,input:""}}componentDidUpdate(e,t){Jn().f[3]++,Jn().s[7]++,this.state.messages.length!==t.messages.length?(Jn().b[1][0]++,Jn().s[8]++,this.messagesEndRef.current?.scrollIntoView({behavior:"smooth"})):Jn().b[1][1]++}onSubmit=(Jn().s[9]++,async e=>{Jn().f[4]++,Jn().s[10]++,e.preventDefault();const t=(Jn().s[11]++,this.state.input.trim());if(Jn().s[12]++,Jn().b[3][0]++,!t||(Jn().b[3][1]++,this.state.loading)){Jn().b[2][0]++,Jn().s[13]++;return}else Jn().b[2][1]++;const i=(Jn().s[14]++,{role:"user",content:t});Jn().s[15]++,this.setState(s=>(Jn().f[5]++,Jn().s[16]++,{messages:[...s.messages,i],input:"",loading:!0}));const r=(Jn().s[17]++,[...this.state.messages,i]),o=(Jn().s[18]++,await BUe({style:this.props.mapStyle,prompt:t,conversationHistory:r.slice(-6)}));if(Jn().s[19]++,o.ok){Jn().b[4][0]++;const s=(Jn().s[20]++,{...o.style,id:(Jn().b[5][0]++,o.style.id||(Jn().b[5][1]++,this.props.mapStyle.id))});Jn().s[21]++,this.props.onStyleChanged(s,{addRevision:!0,save:!0});const a=(Jn().s[22]++,o.explanation?(Jn().b[6][0]++,`${this.props.t("Style updated.")} ${o.explanation}`):(Jn().b[6][1]++,this.props.t("Style updated.")));Jn().s[23]++,this.setState(c=>(Jn().f[6]++,Jn().s[24]++,{messages:[...c.messages,{role:"assistant",content:a}],loading:!1}))}else Jn().b[4][1]++,Jn().s[25]++,this.setState(s=>(Jn().f[7]++,Jn().s[26]++,{messages:[...s.messages,{role:"assistant",content:o.error}],loading:!1}))});onInputChange=(Jn().s[27]++,e=>{Jn().f[8]++,Jn().s[28]++,this.setState({input:e.target.value})});onTextareaKeyDown=(Jn().s[29]++,e=>{if(Jn().f[9]++,Jn().s[30]++,e.key!=="Enter"){Jn().b[7][0]++,Jn().s[31]++;return}else Jn().b[7][1]++;if(Jn().s[32]++,Jn().b[9][0]++,e.ctrlKey||(Jn().b[9][1]++,e.metaKey)){Jn().b[8][0]++,Jn().s[33]++;return}else Jn().b[8][1]++;Jn().s[34]++,e.preventDefault(),Jn().s[35]++,Jn().b[11][0]++,this.state.input.trim()&&(Jn().b[11][1]++,!this.state.loading)?(Jn().b[10][0]++,Jn().s[36]++,this.onSubmit(e)):Jn().b[10][1]++});render(){Jn().f[10]++;const e=(Jn().s[37]++,this.props.t),{messages:t,loading:i,input:r}=(Jn().s[38]++,this.state);return Jn().s[39]++,oe.jsxs("div",{className:"maputnik-style-chat-panel",children:[oe.jsxs("div",{className:"maputnik-style-chat-panel__messages",children:[(Jn().b[12][0]++,t.length===0&&(Jn().b[12][1]++,oe.jsx("p",{className:"maputnik-style-chat-panel__placeholder",children:OUe(e("Tell me how you'd like to style the map and I'll try my best to edit the style.json file to implement it. If you have any problems, submit an issue or fork it from the original: https://github.com/maplibre/maputnik or my fork: https://github.com/Willjfield/maputnik"))}))),t.map((o,s)=>(Jn().f[11]++,Jn().s[40]++,oe.jsx("div",{className:`maputnik-style-chat-panel__message maputnik-style-chat-panel__message--${o.role}`,children:o.content},s))),(Jn().b[13][0]++,i&&(Jn().b[13][1]++,oe.jsx("div",{className:"maputnik-style-chat-panel__message maputnik-style-chat-panel__message--assistant",children:e("Loading")}))),oe.jsx("div",{ref:this.messagesEndRef})]}),oe.jsxs("form",{className:"maputnik-style-chat-panel__form",onSubmit:this.onSubmit,children:[oe.jsx("textarea",{className:"maputnik-style-chat-panel__input",value:r,onChange:this.onInputChange,onKeyDown:this.onTextareaKeyDown,placeholder:e("Enter your request"),rows:2,disabled:i,"aria-label":e("Enter your request")}),oe.jsxs("div",{className:"maputnik-style-chat-panel__form-row",children:[oe.jsx("span",{className:"maputnik-style-chat-panel__hint","aria-hidden":"true",children:e("Enter to send  Ctrl+Enter for new line")}),oe.jsx("button",{type:"submit",className:"maputnik-button maputnik-style-chat-panel__submit",disabled:(Jn().b[14][0]++,i||(Jn().b[14][1]++,!r.trim())),children:e("Send")})]})]})]})}}const TUe=(Jn().s[41]++,So()(IUe));function tr(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalChat.tsx",e="d67d153f52261a48ccbf03e0d2a1aec796c55343",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalChat.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:20}},1:{start:{line:7,column:18},end:{line:7,column:20}},2:{start:{line:9,column:17},end:{line:9,column:34}},3:{start:{line:11,column:4},end:{line:11,column:17}},4:{start:{line:12,column:4},end:{line:12,column:65}},5:{start:{line:14,column:12},end:{line:19,column:3}},6:{start:{line:15,column:4},end:{line:17,column:5}},7:{start:{line:16,column:6},end:{line:16,column:36}},8:{start:{line:18,column:4},end:{line:18,column:30}},9:{start:{line:20,column:21},end:{line:30,column:3}},10:{start:{line:21,column:4},end:{line:21,column:43}},11:{start:{line:21,column:36},end:{line:21,column:43}},12:{start:{line:22,column:4},end:{line:29,column:7}},13:{start:{line:32,column:26},end:{line:32,column:36}},14:{start:{line:33,column:4},end:{line:39,column:5}},15:{start:{line:34,column:6},end:{line:34,column:60}},16:{start:{line:35,column:6},end:{line:35,column:57}},17:{start:{line:36,column:11},end:{line:39,column:5}},18:{start:{line:37,column:6},end:{line:37,column:63}},19:{start:{line:38,column:6},end:{line:38,column:60}},20:{start:{line:42,column:4},end:{line:42,column:61}},21:{start:{line:43,column:4},end:{line:43,column:58}},22:{start:{line:45,column:15},end:{line:52,column:3}},23:{start:{line:46,column:26},end:{line:46,column:36}},24:{start:{line:47,column:4},end:{line:47,column:27}},25:{start:{line:47,column:20},end:{line:47,column:27}},26:{start:{line:48,column:4},end:{line:51,column:7}},27:{start:{line:53,column:14},end:{line:55,column:3}},28:{start:{line:54,column:4},end:{line:54,column:39}},29:{start:{line:57,column:14},end:{line:57,column:26}},30:{start:{line:58,column:4},end:{line:58,column:40}},31:{start:{line:58,column:28},end:{line:58,column:40}},32:{start:{line:59,column:4},end:{line:100,column:6}},33:{start:{line:103,column:18},end:{line:103,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:13,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:21},end:{line:20,column:22}},loc:{start:{line:20,column:28},end:{line:30,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:44},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:25},end:{line:44,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:45,column:15},end:{line:45,column:16}},loc:{start:{line:45,column:22},end:{line:52,column:3}},line:45},6:{name:"(anonymous_6)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:20},end:{line:55,column:3}},line:53},7:{name:"(anonymous_7)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:11},end:{line:101,column:3}},line:56}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:17,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:21,column:4},end:{line:21,column:43}},type:"if",locations:[{start:{line:21,column:4},end:{line:21,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},2:{loc:{start:{line:33,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:39,column:5}},{start:{line:36,column:11},end:{line:39,column:5}}],line:33},3:{loc:{start:{line:33,column:8},end:{line:33,column:41}},type:"binary-expr",locations:[{start:{line:33,column:8},end:{line:33,column:17}},{start:{line:33,column:21},end:{line:33,column:41}}],line:33},4:{loc:{start:{line:36,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:36,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},5:{loc:{start:{line:36,column:15},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:15},end:{line:36,column:25}},{start:{line:36,column:29},end:{line:36,column:48}}],line:36},6:{loc:{start:{line:47,column:4},end:{line:47,column:27}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:27}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:58,column:4},end:{line:58,column:40}},type:"if",locations:[{start:{line:58,column:4},end:{line:58,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalChat.tsx"],names:[],mappings:"AA6FU,SAIE,KAJF;AA7FV,OAAO,WAAW;AAClB,SAAS,eAAe;AACxB,SAAS,uBAA6C;AACtD,OAAO,oBAAoB;AAI3B,MAAM,YAAY;AAClB,MAAM,YAAY;AAelB,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EAC9E,eAAe,MAAM,UAA0B;AAAA,EAEvD,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ,EAAE,GAAG,WAAW,GAAG,WAAW,WAAW,KAAK;AAAA,EAC7D;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AACA,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,mBAAmB,CAAC,MAAwB;AAC1C,QAAK,EAAE,OAAuB,QAAQ,QAAQ,EAAG;AACjD,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,QACT,GAAG,EAAE;AAAA,QACL,GAAG,EAAE;AAAA,QACL,MAAM,KAAK,MAAM;AAAA,QACjB,KAAK,KAAK,MAAM;AAAA,MAClB;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,YAAoC,WAA2B;AAChF,UAAM,EAAE,UAAU,IAAI,KAAK;AAC3B,QAAI,aAAa,CAAC,UAAU,WAAW;AACrC,aAAO,iBAAiB,aAAa,KAAK,UAAU;AACpD,aAAO,iBAAiB,WAAW,KAAK,SAAS;AAAA,IACnD,WAAW,CAAC,aAAa,UAAU,WAAW;AAC5C,aAAO,oBAAoB,aAAa,KAAK,UAAU;AACvD,aAAO,oBAAoB,WAAW,KAAK,SAAS;AAAA,IACtD;AAAA,EACF;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,aAAa,KAAK,UAAU;AACvD,WAAO,oBAAoB,WAAW,KAAK,SAAS;AAAA,EACtD;AAAA,EAEA,aAAa,CAAC,MAAkB;AAC9B,UAAM,EAAE,UAAU,IAAI,KAAK;AAC3B,QAAI,CAAC,UAAW;AAChB,SAAK,SAAS;AAAA,MACZ,GAAG,UAAU,QAAQ,EAAE,UAAU,UAAU;AAAA,MAC3C,GAAG,UAAU,OAAO,EAAE,UAAU,UAAU;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,MAAM;AAChB,SAAK,SAAS,EAAE,WAAW,KAAK,CAAC;AAAA,EACnC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,CAAC,KAAK,MAAM,OAAQ,QAAO;AAE/B,WACE;AAAA,MAAC;AAAA;AAAA,QACC,KAAK,KAAK;AAAA,QACV,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,oBAAoB;AAAA,QAClC,OAAO,EAAE,MAAM,KAAK,MAAM,GAAG,KAAK,KAAK,MAAM,EAAE;AAAA,QAE/C,+BAAC,SAAI,WAAU,sCACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,aAAa,KAAK;AAAA,cAElB;AAAA,oCAAC,QAAG,WAAU,+BAA+B,YAAE,oBAAoB,GAAE;AAAA,gBACrE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,gBACjC;AAAA,kBAAC;AAAA;AAAA,oBACC,MAAK;AAAA,oBACL,WAAU;AAAA,oBACV,OAAO,EAAE,aAAa;AAAA,oBACtB,SAAS,KAAK;AAAA,oBACd,eAAY;AAAA,oBAEZ,8BAAC,WAAQ;AAAA;AAAA,gBACX;AAAA;AAAA;AAAA,UACF;AAAA,UACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BACb;AAAA,YAAC;AAAA;AAAA,cACC,UAAU,KAAK,MAAM;AAAA,cACrB,gBAAgB,KAAK,MAAM;AAAA;AAAA,UAC7B,GACF,GACF;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d67d153f52261a48ccbf03e0d2a1aec796c55343"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tr=function(){return s},s}tr();const kUe=(tr().s[0]++,80),DUe=(tr().s[1]++,24);class RUe extends En.Component{containerRef=(tr().s[2]++,En.createRef());constructor(e){tr().f[0]++,tr().s[3]++,super(e),tr().s[4]++,this.state={x:kUe,y:DUe,dragStart:null}}onClose=(tr().s[5]++,()=>{tr().f[1]++,tr().s[6]++,document.activeElement?(tr().b[0][0]++,tr().s[7]++,document.activeElement.blur()):tr().b[0][1]++,tr().s[8]++,this.props.onOpenToggle()});onTitleMouseDown=(tr().s[9]++,e=>{if(tr().f[2]++,tr().s[10]++,e.target.closest("button")){tr().b[1][0]++,tr().s[11]++;return}else tr().b[1][1]++;tr().s[12]++,this.setState({dragStart:{x:e.clientX,y:e.clientY,left:this.state.x,top:this.state.y}})});componentDidUpdate(e,t){tr().f[3]++;const{dragStart:i}=(tr().s[13]++,this.state);tr().s[14]++,tr().b[3][0]++,i&&(tr().b[3][1]++,!t.dragStart)?(tr().b[2][0]++,tr().s[15]++,window.addEventListener("mousemove",this.onDragMove),tr().s[16]++,window.addEventListener("mouseup",this.onDragEnd)):(tr().b[2][1]++,tr().s[17]++,tr().b[5][0]++,!i&&(tr().b[5][1]++,t.dragStart)?(tr().b[4][0]++,tr().s[18]++,window.removeEventListener("mousemove",this.onDragMove),tr().s[19]++,window.removeEventListener("mouseup",this.onDragEnd)):tr().b[4][1]++)}componentWillUnmount(){tr().f[4]++,tr().s[20]++,window.removeEventListener("mousemove",this.onDragMove),tr().s[21]++,window.removeEventListener("mouseup",this.onDragEnd)}onDragMove=(tr().s[22]++,e=>{tr().f[5]++;const{dragStart:t}=(tr().s[23]++,this.state);if(tr().s[24]++,t)tr().b[6][1]++;else{tr().b[6][0]++,tr().s[25]++;return}tr().s[26]++,this.setState({x:t.left+(e.clientX-t.x),y:t.top+(e.clientY-t.y)})});onDragEnd=(tr().s[27]++,()=>{tr().f[6]++,tr().s[28]++,this.setState({dragStart:null})});render(){tr().f[7]++;const e=(tr().s[29]++,this.props.t);if(tr().s[30]++,this.props.isOpen)tr().b[7][1]++;else return tr().b[7][0]++,tr().s[31]++,null;return tr().s[32]++,oe.jsx("div",{ref:this.containerRef,className:"maputnik-chat-float","data-wd-key":"modal:chat",role:"dialog","aria-label":e("Edit style with AI"),style:{left:this.state.x,top:this.state.y},children:oe.jsxs("div",{className:"maputnik-modal maputnik-modal-chat",children:[oe.jsxs("header",{className:"maputnik-modal-header maputnik-chat-float__titlebar",onMouseDown:this.onTitleMouseDown,children:[oe.jsx("h1",{className:"maputnik-modal-header-title",children:e("Edit style with AI")}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx("button",{type:"button",className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":"modal:chat.close-modal",children:oe.jsx(cJ,{})})]}),oe.jsx("div",{className:"maputnik-modal-scroller",children:oe.jsx("div",{className:"maputnik-modal-content",children:oe.jsx(TUe,{mapStyle:this.props.mapStyle,onStyleChanged:this.props.onStyleChanged})})})]})})}}const PUe=(tr().s[33]++,So()(RUe));function Qo(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="5a9c2665b160f40983faeb4cc69ad8e0d0d449de",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:2,column:2},end:{line:14,column:3}},1:{start:{line:3,column:21},end:{line:6,column:6}},2:{start:{line:7,column:4},end:{line:9,column:5}},3:{start:{line:8,column:6},end:{line:8,column:60}},4:{start:{line:10,column:4},end:{line:10,column:33}},5:{start:{line:12,column:4},end:{line:12,column:95}},6:{start:{line:13,column:4},end:{line:13,column:24}},7:{start:{line:17,column:2},end:{line:17,column:30}},8:{start:{line:17,column:20},end:{line:17,column:30}},9:{start:{line:18,column:17},end:{line:18,column:37}},10:{start:{line:19,column:23},end:{line:19,column:109}},11:{start:{line:20,column:2},end:{line:24,column:3}},12:{start:{line:21,column:4},end:{line:21,column:41}},13:{start:{line:23,column:4},end:{line:23,column:69}},14:{start:{line:25,column:14},end:{line:25,column:31}},15:{start:{line:26,column:16},end:{line:26,column:39}},16:{start:{line:27,column:2},end:{line:27,column:29}},17:{start:{line:30,column:2},end:{line:30,column:26}},18:{start:{line:30,column:16},end:{line:30,column:26}},19:{start:{line:31,column:14},end:{line:31,column:31}},20:{start:{line:32,column:17},end:{line:32,column:40}},21:{start:{line:33,column:2},end:{line:33,column:29}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:1,column:15},end:{line:1,column:23}},loc:{start:{line:1,column:43},end:{line:15,column:1}},line:1},1:{name:"downloadGlyphsMetadata",decl:{start:{line:16,column:22},end:{line:16,column:44}},loc:{start:{line:16,column:58},end:{line:28,column:1}},line:16},2:{name:"downloadSpriteMetadata",decl:{start:{line:29,column:22},end:{line:29,column:44}},loc:{start:{line:29,column:54},end:{line:34,column:1}},line:29}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:17,column:2},end:{line:17,column:30}},type:"if",locations:[{start:{line:17,column:2},end:{line:17,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},2:{loc:{start:{line:20,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:24,column:3}},{start:{line:22,column:9},end:{line:24,column:3}}],line:20},3:{loc:{start:{line:30,column:2},end:{line:30,column:26}},type:"if",locations:[{start:{line:30,column:2},end:{line:30,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,eAAe,SAAY,KAAa,cAA6B;AACnE,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,KAAK;AAAA,MAChC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,MAAM,SAAS,KAAK;AAAA,EAC7B,QAAQ;AACN,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,WAAO;AAAA,EACT;AACF;AAEA,sBAAsB,uBAAuB,aAAwC;AACnF,MAAG,CAAC,YAAa,QAAO,CAAC;AAIzB,QAAM,SAAS,IAAI,IAAI,WAAW;AAClC,QAAM,eAAe,MAAM,mBAAmB,aAAa,IAAI,MAAM,mBAAmB,SAAS,IAAI;AACrG,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,SAAS;AAC5B,QAAM,QAAQ,MAAM,SAAS,KAAK,CAAC,CAAa;AAChD,SAAO,CAAC,GAAG,IAAI,IAAI,KAAK,CAAC;AAC3B;AAEA,sBAAsB,uBAAuB,SAAoC;AAC/E,MAAG,CAAC,QAAS,QAAO,CAAC;AACrB,QAAM,MAAM,UAAU;AACtB,QAAM,SAAS,MAAM,SAAS,KAAK,CAAC,CAA2B;AAC/D,SAAO,OAAO,KAAK,MAAM;AAC3B;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5a9c2665b160f40983faeb4cc69ad8e0d0d449de"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qo=function(){return s},s}Qo();async function Sae(n,e){Qo().f[0]++,Qo().s[0]++;try{const t=(Qo().s[1]++,await fetch(n,{mode:"cors",credentials:"same-origin"}));if(Qo().s[2]++,t.ok)Qo().b[0][1]++;else throw Qo().b[0][0]++,Qo().s[3]++,new Error("Failed to load metadata for "+n);return Qo().s[4]++,await t.json()}catch{return Qo().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Qo().s[6]++,e}}async function UUe(n){if(Qo().f[1]++,Qo().s[7]++,n)Qo().b[1][1]++;else return Qo().b[1][0]++,Qo().s[8]++,[];const e=(Qo().s[9]++,new URL(n)),t=(Qo().s[10]++,"/"+encodeURIComponent("{fontstack}")+"/"+encodeURIComponent("{range}")+".pbf");Qo().s[11]++,e.pathname===t?(Qo().b[2][0]++,Qo().s[12]++,e.pathname="/fontstacks.json"):(Qo().b[2][1]++,Qo().s[13]++,e.pathname=e.pathname.replace(t,".json"));const i=(Qo().s[14]++,e.toString()),r=(Qo().s[15]++,await Sae(i,[]));return Qo().s[16]++,[...new Set(r)]}async function LUe(n){if(Qo().f[2]++,Qo().s[17]++,n)Qo().b[3][1]++;else return Qo().b[3][0]++,Qo().s[18]++,[];const e=(Qo().s[19]++,n+".json"),t=(Qo().s[20]++,await Sae(e,{}));return Qo().s[21]++,Object.keys(t)}function Ph(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ph=function(){return s},s}Ph();function Eae(n,e){Ph().f[0]++;const t=(Ph().s[0]++,AAe(n,e));return Ph().s[1]++,t.map(i=>(Ph().f[1]++,Ph().s[2]++,i.command+" "+i.args.join(" ")))}function KUe(n,e){return Ph().f[2]++,Ph().s[3]++,Eae(n,e).map(t=>(Ph().f[3]++,Ph().s[4]++,"Undo "+t))}function FUe(n,e){return Ph().f[4]++,Ph().s[5]++,Eae(n,e).map(t=>(Ph().f[5]++,Ph().s[6]++,"Redo "+t))}var UP=function(n,e){return UP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},UP(n,e)};function Bae(n,e){UP(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function zUe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function jUe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function NUe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(jUe(arguments[e]));return n}var Oae=(function(){function n(e,t){this.target=t,this.type=e}return n})(),GUe=(function(n){Bae(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(Oae),WUe=(function(n){Bae(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(Oae);var QUe=function(){if(typeof WebSocket<"u")return WebSocket},qUe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},JC={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?JC.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?JC.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=zUe(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,NUe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?JC.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?JC.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?JC.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?JC.maxRetries:i,o=t.connectionTimeout,s=o===void 0?JC.connectionTimeout:o,a=t.WebSocket,c=a===void 0?QUe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!qUe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(d){e._closeCalled||(e._debug("connect",{url:d,protocols:e._protocols}),e._ws=e._protocols?new c(d,e._protocols):new c(d),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new GUe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new WUe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Iae(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Iae=function(){return s},s}Iae();function gi(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gi=function(){return s},s}gi();const OO=(gi().s[0]++,"maputnik"),Tae=(gi().s[1]++,"style"),sZ=(gi().s[2]++,{latest:[OO,"latest_style"].join(":")}),YUe=(gi().s[3]++,_ae[0].url);function aZ(){return gi().f[0]++,gi().s[4]++,cae(YUe)}function VUe(){gi().f[1]++;const n=(gi().s[5]++,[]);gi().s[6]++;for(let e=(gi().s[7]++,0);e<window.localStorage.length;e++){const t=(gi().s[8]++,window.localStorage.key(e));gi().s[9]++,kae(t)?(gi().b[0][0]++,gi().s[10]++,n.push($Ue(t))):gi().b[0][1]++}return gi().s[11]++,n}function kae(n){gi().f[2]++;const e=(gi().s[12]++,n.split(":"));return gi().s[13]++,gi().b[1][0]++,e.length===3&&(gi().b[1][1]++,e[0]===OO)&&(gi().b[1][2]++,e[1]===Tae)}function $Ue(n){if(gi().f[3]++,gi().s[14]++,kae(n))gi().b[2][1]++;else throw gi().b[2][0]++,gi().s[15]++,"Key is not a valid style key";const e=(gi().s[16]++,n.split(":")),t=(gi().s[17]++,e[2]);return gi().s[18]++,t}function lZ(n){return gi().f[4]++,gi().s[19]++,[OO,Tae,n].join(":")}class HUe{mapStyles;constructor(){gi().f[5]++,gi().s[20]++,this.mapStyles=VUe()}purge(){gi().f[6]++,gi().s[21]++;for(let e=(gi().s[22]++,0);e<window.localStorage.length;e++){const t=(gi().s[23]++,window.localStorage.key(e));gi().s[24]++,t.startsWith(OO)?(gi().b[3][0]++,gi().s[25]++,window.localStorage.removeItem(t)):gi().b[3][1]++}}async getLatestStyle(){if(gi().f[7]++,gi().s[26]++,this.mapStyles.length===0)return gi().b[4][0]++,gi().s[27]++,aZ();gi().b[4][1]++;const e=(gi().s[28]++,window.localStorage.getItem(sZ.latest)),t=(gi().s[29]++,window.localStorage.getItem(lZ(e)));return gi().s[30]++,t?(gi().b[5][0]++,gi().s[31]++,JSON.parse(t)):(gi().b[5][1]++,gi().s[32]++,aZ())}save(e){gi().f[8]++,gi().s[33]++,e=Ud.ensureStyleValidity(e);const t=(gi().s[34]++,lZ(e.id));gi().s[35]++;const i=()=>{gi().f[9]++,gi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),gi().s[37]++,window.localStorage.setItem(sZ.latest,e.id)};gi().s[38]++;try{gi().s[39]++,i()}catch(r){if(gi().s[40]++,gi().b[7][0]++,r instanceof DOMException&&(gi().b[7][1]++,r.code===22||(gi().b[7][2]++,r.code===1014)||(gi().b[7][3]++,r.name==="QuotaExceededError")||(gi().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))gi().b[6][0]++,gi().s[41]++,this.purge(),gi().s[42]++,i();else throw gi().b[6][1]++,gi().s[43]++,r}return gi().s[44]++,e}}function Th(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Th=function(){return s},s}Th();async function ZUe(n){Th().f[0]++;const e=(Th().s[0]++,ARe()),t=(Th().s[1]++,Th().b[0][0]++,e&&(Th().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;Th().s[2]++,Th().b[1][1]++,Th().s[9]++,i=new HUe;const r=(Th().s[10]++,t?(Th().b[2][0]++,await cae(e)):(Th().b[2][1]++,await i.getLatestStyle()));return Th().s[11]++,n(r,{initialLoad:!0,save:!1}),Th().s[12]++,i}function Ua(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ua=function(){return s},s}Ua();class XUe{revisions;currentIdx;constructor(e=(Ua().b[0][0]++,[])){Ua().f[0]++,Ua().s[0]++,this.revisions=e,Ua().s[1]++,this.currentIdx=e.length-1}get latest(){return Ua().f[1]++,Ua().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ua().f[2]++,Ua().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ua().f[3]++,Ua().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ua().s[5]++,this.revisions.push(e),Ua().s[6]++,this.currentIdx++}undo(){return Ua().f[4]++,Ua().s[7]++,this.currentIdx>0?(Ua().b[1][0]++,Ua().s[8]++,this.currentIdx--):Ua().b[1][1]++,Ua().s[9]++,this.current}redo(){return Ua().f[5]++,Ua().s[10]++,this.currentIdx<this.revisions.length-1?(Ua().b[2][0]++,Ua().s[11]++,this.currentIdx++):Ua().b[2][1]++,Ua().s[12]++,this.current}}var G9,uZ;function JUe(){if(uZ)return G9;uZ=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,d=typeof self=="object"&&self&&self.Object===Object&&self,p=c||d||Function("return this")(),v=Object.prototype,M=v.toString,E=Math.max,P=Math.min,U=function(){return p.Date.now()};function z(ne,q,le){var ue,ve,pe,Be,Ce,Oe,Fe=0,Ee=!1,Ve=!1,ut=!0;if(typeof ne!="function")throw new TypeError(n);q=ee(q)||0,Z(le)&&(Ee=!!le.leading,Ve="maxWait"in le,pe=Ve?E(ee(le.maxWait)||0,q):pe,ut="trailing"in le?!!le.trailing:ut);function mt(Ue){var ke=ue,Te=ve;return ue=ve=void 0,Fe=Ue,Be=ne.apply(Te,ke),Be}function Pe(Ue){return Fe=Ue,Ce=setTimeout(Ke,q),Ee?mt(Ue):Be}function De(Ue){var ke=Ue-Oe,Te=Ue-Fe,He=q-ke;return Ve?P(He,pe-Te):He}function Xe(Ue){var ke=Ue-Oe,Te=Ue-Fe;return Oe===void 0||ke>=q||ke<0||Ve&&Te>=pe}function Ke(){var Ue=U();if(Xe(Ue))return Bt(Ue);Ce=setTimeout(Ke,De(Ue))}function Bt(Ue){return Ce=void 0,ut&&ue?mt(Ue):(ue=ve=void 0,Be)}function ot(){Ce!==void 0&&clearTimeout(Ce),Fe=0,ue=Oe=ve=Ce=void 0}function Et(){return Ce===void 0?Be:Bt(U())}function Rt(){var Ue=U(),ke=Xe(Ue);if(ue=arguments,ve=this,Oe=Ue,ke){if(Ce===void 0)return Pe(Oe);if(Ve)return Ce=setTimeout(Ke,q),mt(Oe)}return Ce===void 0&&(Ce=setTimeout(Ke,q)),Be}return Rt.cancel=ot,Rt.flush=Et,Rt}function V(ne,q,le){var ue=!0,ve=!0;if(typeof ne!="function")throw new TypeError(n);return Z(le)&&(ue="leading"in le?!!le.leading:ue,ve="trailing"in le?!!le.trailing:ve),z(ne,q,{leading:ue,maxWait:q,trailing:ve})}function Z(ne){var q=typeof ne;return!!ne&&(q=="object"||q=="function")}function X(ne){return!!ne&&typeof ne=="object"}function re(ne){return typeof ne=="symbol"||X(ne)&&M.call(ne)==t}function ee(ne){if(typeof ne=="number")return ne;if(re(ne))return e;if(Z(ne)){var q=typeof ne.valueOf=="function"?ne.valueOf():ne;ne=Z(q)?q+"":q}if(typeof ne!="string")return ne===0?ne:+ne;ne=ne.replace(i,"");var le=o.test(ne);return le||s.test(ne)?a(ne.slice(2),le?2:8):r.test(ne)?e:+ne}return G9=V,G9}var eLe=JUe();const tLe=xu(eLe);var p4={exports:{}};p4.exports;var cZ;function nLe(){return cZ||(cZ=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",p="[object Boolean]",v="[object Date]",M="[object Error]",E="[object Function]",P="[object GeneratorFunction]",U="[object Map]",z="[object Number]",V="[object Null]",Z="[object Object]",X="[object Promise]",re="[object Proxy]",ee="[object RegExp]",ne="[object Set]",q="[object String]",le="[object Symbol]",ue="[object Undefined]",ve="[object WeakMap]",pe="[object ArrayBuffer]",Be="[object DataView]",Ce="[object Float32Array]",Oe="[object Float64Array]",Fe="[object Int8Array]",Ee="[object Int16Array]",Ve="[object Int32Array]",ut="[object Uint8Array]",mt="[object Uint8ClampedArray]",Pe="[object Uint16Array]",De="[object Uint32Array]",Xe=/[\\^$.*+?()[\]{}|]/g,Ke=/^\[object .+?Constructor\]$/,Bt=/^(?:0|[1-9]\d*)$/,ot={};ot[Ce]=ot[Oe]=ot[Fe]=ot[Ee]=ot[Ve]=ot[ut]=ot[mt]=ot[Pe]=ot[De]=!0,ot[a]=ot[c]=ot[pe]=ot[p]=ot[Be]=ot[v]=ot[M]=ot[E]=ot[U]=ot[z]=ot[Z]=ot[ee]=ot[ne]=ot[q]=ot[ve]=!1;var Et=typeof window=="object"&&window&&window.Object===Object&&window,Rt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Et||Rt||Function("return this")(),ke=e&&!e.nodeType&&e,Te=ke&&!0&&n&&!n.nodeType&&n,He=Te&&Te.exports===ke,Ct=He&&Et.process,vt=(function(){try{return Ct&&Ct.binding&&Ct.binding("util")}catch{}})(),wt=vt&&vt.isTypedArray;function Ft(ie,_e){for(var $e=-1,Ot=ie==null?0:ie.length,qn=0,Rn=[];++$e<Ot;){var Ti=ie[$e];_e(Ti,$e,ie)&&(Rn[qn++]=Ti)}return Rn}function Pt(ie,_e){for(var $e=-1,Ot=_e.length,qn=ie.length;++$e<Ot;)ie[qn+$e]=_e[$e];return ie}function nn(ie,_e){for(var $e=-1,Ot=ie==null?0:ie.length;++$e<Ot;)if(_e(ie[$e],$e,ie))return!0;return!1}function Kn(ie,_e){for(var $e=-1,Ot=Array(ie);++$e<ie;)Ot[$e]=_e($e);return Ot}function Wn(ie){return function(_e){return ie(_e)}}function Mi(ie,_e){return ie.has(_e)}function Fn(ie,_e){return ie?.[_e]}function Ln(ie){var _e=-1,$e=Array(ie.size);return ie.forEach(function(Ot,qn){$e[++_e]=[qn,Ot]}),$e}function In(ie,_e){return function($e){return ie(_e($e))}}function oi(ie){var _e=-1,$e=Array(ie.size);return ie.forEach(function(Ot){$e[++_e]=Ot}),$e}var Tn=Array.prototype,je=Function.prototype,$=Object.prototype,j=Ue["__core-js_shared__"],Q=je.toString,Ae=$.hasOwnProperty,Me=(function(){var ie=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""})(),Ne=$.toString,We=RegExp("^"+Q.call(Ae).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=He?Ue.Buffer:void 0,bt=Ue.Symbol,Ye=Ue.Uint8Array,at=$.propertyIsEnumerable,C=Tn.splice,Ut=bt?bt.toStringTag:void 0,gn=Object.getOwnPropertySymbols,bn=it?it.isBuffer:void 0,_n=In(Object.keys,Object),Mt=Bo(Ue,"DataView"),xi=Bo(Ue,"Map"),ji=Bo(Ue,"Promise"),Qn=Bo(Ue,"Set"),Zn=Bo(Ue,"WeakMap"),Yi=Bo(Object,"create"),qi=ts(Mt),Ui=ts(xi),Vi=ts(ji),Ki=ts(Qn),Ir=ts(Zn),Eo=bt?bt.prototype:void 0,cn=Eo?Eo.valueOf:void 0;function rr(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function Yo(){this.__data__=Yi?Yi(null):{},this.size=0}function aa(ie){var _e=this.has(ie)&&delete this.__data__[ie];return this.size-=_e?1:0,_e}function lo(ie){var _e=this.__data__;if(Yi){var $e=_e[ie];return $e===i?void 0:$e}return Ae.call(_e,ie)?_e[ie]:void 0}function Dn(ie){var _e=this.__data__;return Yi?_e[ie]!==void 0:Ae.call(_e,ie)}function er(ie,_e){var $e=this.__data__;return this.size+=this.has(ie)?0:1,$e[ie]=Yi&&_e===void 0?i:_e,this}rr.prototype.clear=Yo,rr.prototype.delete=aa,rr.prototype.get=lo,rr.prototype.has=Dn,rr.prototype.set=er;function Ai(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function ja(){this.__data__=[],this.size=0}function _A(ie){var _e=this.__data__,$e=Ar(_e,ie);if($e<0)return!1;var Ot=_e.length-1;return $e==Ot?_e.pop():C.call(_e,$e,1),--this.size,!0}function Sl(ie){var _e=this.__data__,$e=Ar(_e,ie);return $e<0?void 0:_e[$e][1]}function Hi(ie){return Ar(this.__data__,ie)>-1}function $u(ie,_e){var $e=this.__data__,Ot=Ar($e,ie);return Ot<0?(++this.size,$e.push([ie,_e])):$e[Ot][1]=_e,this}Ai.prototype.clear=ja,Ai.prototype.delete=_A,Ai.prototype.get=Sl,Ai.prototype.has=Hi,Ai.prototype.set=$u;function fo(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.clear();++_e<$e;){var Ot=ie[_e];this.set(Ot[0],Ot[1])}}function Xa(){this.size=0,this.__data__={hash:new rr,map:new(xi||Ai),string:new rr}}function El(ie){var _e=ms(this,ie).delete(ie);return this.size-=_e?1:0,_e}function Na(ie){return ms(this,ie).get(ie)}function Lo(ie){return ms(this,ie).has(ie)}function bc(ie,_e){var $e=ms(this,ie),Ot=$e.size;return $e.set(ie,_e),this.size+=$e.size==Ot?0:1,this}fo.prototype.clear=Xa,fo.prototype.delete=El,fo.prototype.get=Na,fo.prototype.has=Lo,fo.prototype.set=bc;function Vo(ie){var _e=-1,$e=ie==null?0:ie.length;for(this.__data__=new fo;++_e<$e;)this.add(ie[_e])}function vr(ie){return this.__data__.set(ie,i),this}function Ga(ie){return this.__data__.has(ie)}Vo.prototype.add=Vo.prototype.push=vr,Vo.prototype.has=Ga;function es(ie){var _e=this.__data__=new Ai(ie);this.size=_e.size}function Mu(){this.__data__=new Ai,this.size=0}function wu(ie){var _e=this.__data__,$e=_e.delete(ie);return this.size=_e.size,$e}function hl(ie){return this.__data__.get(ie)}function Xc(ie){return this.__data__.has(ie)}function dl(ie,_e){var $e=this.__data__;if($e instanceof Ai){var Ot=$e.__data__;if(!xi||Ot.length<t-1)return Ot.push([ie,_e]),this.size=++$e.size,this;$e=this.__data__=new fo(Ot)}return $e.set(ie,_e),this.size=$e.size,this}es.prototype.clear=Mu,es.prototype.delete=wu,es.prototype.get=hl,es.prototype.has=Xc,es.prototype.set=dl;function Wa(ie,_e){var $e=mo(ie),Ot=!$e&&ns(ie),qn=!$e&&!Ot&&wi(ie),Rn=!$e&&!Ot&&!qn&&la(ie),Ti=$e||Ot||qn||Rn,Ni=Ti?Kn(ie.length,String):[],Yn=Ni.length;for(var Oi in ie)Ae.call(ie,Oi)&&!(Ti&&(Oi=="length"||qn&&(Oi=="offset"||Oi=="parent")||Rn&&(Oi=="buffer"||Oi=="byteLength"||Oi=="byteOffset")||Bu(Oi,Yn)))&&Ni.push(Oi);return Ni}function Ar(ie,_e){for(var $e=ie.length;$e--;)if(Xu(ie[$e][0],_e))return $e;return-1}function Hu(ie,_e,$e){var Ot=_e(ie);return mo(ie)?Ot:Pt(Ot,$e(ie))}function Bl(ie){return ie==null?ie===void 0?ue:V:Ut&&Ut in Object(ie)?eu(ie):Ja(ie)}function Ol(ie){return Hr(ie)&&Bl(ie)==a}function Su(ie,_e,$e,Ot,qn){return ie===_e?!0:ie==null||_e==null||!Hr(ie)&&!Hr(_e)?ie!==ie&&_e!==_e:_c(ie,_e,$e,Ot,Su,qn)}function _c(ie,_e,$e,Ot,qn,Rn){var Ti=mo(ie),Ni=mo(_e),Yn=Ti?c:Is(ie),Oi=Ni?c:Is(_e);Yn=Yn==a?Z:Yn,Oi=Oi==a?Z:Oi;var ni=Yn==Z,si=Oi==Z,mr=Yn==Oi;if(mr&&wi(ie)){if(!wi(_e))return!1;Ti=!0,ni=!1}if(mr&&!ni)return Rn||(Rn=new es),Ti||la(ie)?Zl(ie,_e,$e,Ot,qn,Rn):Jc(ie,_e,Yn,$e,Ot,qn,Rn);if(!($e&r)){var ii=ni&&Ae.call(ie,"__wrapped__"),jr=si&&Ae.call(_e,"__wrapped__");if(ii||jr){var Oo=ii?ie.value():ie,Ko=jr?_e.value():_e;return Rn||(Rn=new es),qn(Oo,Ko,$e,Ot,Rn)}}return mr?(Rn||(Rn=new es),Xl(ie,_e,$e,Ot,qn,Rn)):!1}function zh(ie){if(!Ns(ie)||Zu(ie))return!1;var _e=Xs(ie)?We:Ke;return _e.test(ts(ie))}function Zs(ie){return Hr(ie)&&bo(ie.length)&&!!ot[Bl(ie)]}function xc(ie){if(!nr(ie))return _n(ie);var _e=[];for(var $e in Object(ie))Ae.call(ie,$e)&&$e!="constructor"&&_e.push($e);return _e}function Zl(ie,_e,$e,Ot,qn,Rn){var Ti=$e&r,Ni=ie.length,Yn=_e.length;if(Ni!=Yn&&!(Ti&&Yn>Ni))return!1;var Oi=Rn.get(ie);if(Oi&&Rn.get(_e))return Oi==_e;var ni=-1,si=!0,mr=$e&o?new Vo:void 0;for(Rn.set(ie,_e),Rn.set(_e,ie);++ni<Ni;){var ii=ie[ni],jr=_e[ni];if(Ot)var Oo=Ti?Ot(jr,ii,ni,_e,ie,Rn):Ot(ii,jr,ni,ie,_e,Rn);if(Oo!==void 0){if(Oo)continue;si=!1;break}if(mr){if(!nn(_e,function(Ko,ps){if(!Mi(mr,ps)&&(ii===Ko||qn(ii,Ko,$e,Ot,Rn)))return mr.push(ps)})){si=!1;break}}else if(!(ii===jr||qn(ii,jr,$e,Ot,Rn))){si=!1;break}}return Rn.delete(ie),Rn.delete(_e),si}function Jc(ie,_e,$e,Ot,qn,Rn,Ti){switch($e){case Be:if(ie.byteLength!=_e.byteLength||ie.byteOffset!=_e.byteOffset)return!1;ie=ie.buffer,_e=_e.buffer;case pe:return!(ie.byteLength!=_e.byteLength||!Rn(new Ye(ie),new Ye(_e)));case p:case v:case z:return Xu(+ie,+_e);case M:return ie.name==_e.name&&ie.message==_e.message;case ee:case q:return ie==_e+"";case U:var Ni=Ln;case ne:var Yn=Ot&r;if(Ni||(Ni=oi),ie.size!=_e.size&&!Yn)return!1;var Oi=Ti.get(ie);if(Oi)return Oi==_e;Ot|=o,Ti.set(ie,_e);var ni=Zl(Ni(ie),Ni(_e),Ot,qn,Rn,Ti);return Ti.delete(ie),ni;case le:if(cn)return cn.call(ie)==cn.call(_e)}return!1}function Xl(ie,_e,$e,Ot,qn,Rn){var Ti=$e&r,Ni=Jl(ie),Yn=Ni.length,Oi=Jl(_e),ni=Oi.length;if(Yn!=ni&&!Ti)return!1;for(var si=Yn;si--;){var mr=Ni[si];if(!(Ti?mr in _e:Ae.call(_e,mr)))return!1}var ii=Rn.get(ie);if(ii&&Rn.get(_e))return ii==_e;var jr=!0;Rn.set(ie,_e),Rn.set(_e,ie);for(var Oo=Ti;++si<Yn;){mr=Ni[si];var Ko=ie[mr],ps=_e[mr];if(Ot)var oh=Ti?Ot(ps,Ko,mr,_e,ie,Rn):Ot(Ko,ps,mr,ie,_e,Rn);if(!(oh===void 0?Ko===ps||qn(Ko,ps,$e,Ot,Rn):oh)){jr=!1;break}Oo||(Oo=mr=="constructor")}if(jr&&!Oo){var Il=ie.constructor,gs=_e.constructor;Il!=gs&&"constructor"in ie&&"constructor"in _e&&!(typeof Il=="function"&&Il instanceof Il&&typeof gs=="function"&&gs instanceof gs)&&(jr=!1)}return Rn.delete(ie),Rn.delete(_e),jr}function Jl(ie){return Hu(ie,el,Eu)}function ms(ie,_e){var $e=ie.__data__;return tu(_e)?$e[typeof _e=="string"?"string":"hash"]:$e.map}function Bo(ie,_e){var $e=Fn(ie,_e);return zh($e)?$e:void 0}function eu(ie){var _e=Ae.call(ie,Ut),$e=ie[Ut];try{ie[Ut]=void 0;var Ot=!0}catch{}var qn=Ne.call(ie);return Ot&&(_e?ie[Ut]=$e:delete ie[Ut]),qn}var Eu=gn?function(ie){return ie==null?[]:(ie=Object(ie),Ft(gn(ie),function(_e){return at.call(ie,_e)}))}:Zi,Is=Bl;(Mt&&Is(new Mt(new ArrayBuffer(1)))!=Be||xi&&Is(new xi)!=U||ji&&Is(ji.resolve())!=X||Qn&&Is(new Qn)!=ne||Zn&&Is(new Zn)!=ve)&&(Is=function(ie){var _e=Bl(ie),$e=_e==Z?ie.constructor:void 0,Ot=$e?ts($e):"";if(Ot)switch(Ot){case qi:return Be;case Ui:return U;case Vi:return X;case Ki:return ne;case Ir:return ve}return _e});function Bu(ie,_e){return _e=_e??s,!!_e&&(typeof ie=="number"||Bt.test(ie))&&ie>-1&&ie%1==0&&ie<_e}function tu(ie){var _e=typeof ie;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ie!=="__proto__":ie===null}function Zu(ie){return!!Me&&Me in ie}function nr(ie){var _e=ie&&ie.constructor,$e=typeof _e=="function"&&_e.prototype||$;return ie===$e}function Ja(ie){return Ne.call(ie)}function ts(ie){if(ie!=null){try{return Q.call(ie)}catch{}try{return ie+""}catch{}}return""}function Xu(ie,_e){return ie===_e||ie!==ie&&_e!==_e}var ns=Ol((function(){return arguments})())?Ol:function(ie){return Hr(ie)&&Ae.call(ie,"callee")&&!at.call(ie,"callee")},mo=Array.isArray;function po(ie){return ie!=null&&bo(ie.length)&&!Xs(ie)}var wi=bn||Rr;function ro(ie,_e){return Su(ie,_e)}function Xs(ie){if(!Ns(ie))return!1;var _e=Bl(ie);return _e==E||_e==P||_e==d||_e==re}function bo(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=s}function Ns(ie){var _e=typeof ie;return ie!=null&&(_e=="object"||_e=="function")}function Hr(ie){return ie!=null&&typeof ie=="object"}var la=wt?Wn(wt):Zs;function el(ie){return po(ie)?Wa(ie):xc(ie)}function Zi(){return[]}function Rr(){return!1}n.exports=ro})(p4,p4.exports)),p4.exports}var iLe=nLe();const LP=xu(iLe);function ur(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="f697c030ede0efa960b33f85ca9652efe882c805",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:5}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:24,column:4},end:{line:26,column:5}},9:{start:{line:25,column:6},end:{line:25,column:42}},10:{start:{line:27,column:4},end:{line:27,column:48}},11:{start:{line:30,column:33},end:{line:30,column:58}},12:{start:{line:31,column:4},end:{line:44,column:7}},13:{start:{line:32,column:6},end:{line:43,column:9}},14:{start:{line:33,column:32},end:{line:33,column:71}},15:{start:{line:34,column:23},end:{line:34,column:53}},16:{start:{line:35,column:8},end:{line:41,column:11}},17:{start:{line:36,column:10},end:{line:40,column:13}},18:{start:{line:37,column:40},end:{line:37,column:75}},19:{start:{line:38,column:12},end:{line:38,column:71}},20:{start:{line:39,column:12},end:{line:39,column:64}},21:{start:{line:42,column:8},end:{line:42,column:60}},22:{start:{line:45,column:4},end:{line:47,column:5}},23:{start:{line:46,column:6},end:{line:46,column:52}},24:{start:{line:51,column:4},end:{line:51,column:25}},25:{start:{line:54,column:4},end:{line:54,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:28,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:32},end:{line:48,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:31,column:39},end:{line:31,column:40}},loc:{start:{line:31,column:53},end:{line:44,column:5}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:32,column:46},end:{line:32,column:47}},loc:{start:{line:32,column:65},end:{line:43,column:7}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:35,column:58},end:{line:35,column:59}},loc:{start:{line:35,column:71},end:{line:41,column:9}},line:35},8:{name:"(anonymous_8)",decl:{start:{line:36,column:50},end:{line:36,column:51}},loc:{start:{line:36,column:68},end:{line:40,column:11}},line:36},9:{name:"(anonymous_9)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:16},end:{line:52,column:3}},line:50},10:{name:"(anonymous_10)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:21},end:{line:55,column:3}},line:53}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:24,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:26,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},4:{loc:{start:{line:32,column:7},end:{line:32,column:36}},type:"binary-expr",locations:[{start:{line:32,column:7},end:{line:32,column:30}},{start:{line:32,column:34},end:{line:32,column:36}}],line:32},5:{loc:{start:{line:33,column:32},end:{line:33,column:71}},type:"binary-expr",locations:[{start:{line:33,column:32},end:{line:33,column:65}},{start:{line:33,column:69},end:{line:33,column:71}}],line:33},6:{loc:{start:{line:37,column:40},end:{line:37,column:75}},type:"binary-expr",locations:[{start:{line:37,column:40},end:{line:37,column:69}},{start:{line:37,column:73},end:{line:37,column:75}}],line:37},7:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,eAAW,YAAY,OAAO,KAAK,IAAI,MAAM,YAAY,GAAG;AAG1D,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE;AAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f697c030ede0efa960b33f85ca9652efe882c805"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ur=function(){return s},s}ur();class rLe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(ur().b[0][0]++,{})){ur().f[0]++,ur().s[0]++,this.onSourcesChange=(ur().b[1][0]++,e.onSourcesChange||(ur().b[1][1]++,()=>{ur().f[1]++})),ur().s[1]++,this.onVectorLayersChange=(ur().b[2][0]++,e.onVectorLayersChange||(ur().b[2][1]++,()=>{ur().f[2]++})),ur().s[2]++,this._sources={},ur().s[3]++,this._vectorLayers={},ur().s[4]++,this.throttledAnalyzeVectorLayerFields=tLe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){ur().f[3]++;const t=(ur().s[5]++,{...this._sources});ur().s[6]++;for(const i of Object.keys(e.style.tileManagers))ur().s[7]++,this._sources[i]=e.style.tileManagers[i]._source.vectorLayerIds;ur().s[8]++,LP(t,this._sources)?ur().b[3][1]++:(ur().b[3][0]++,ur().s[9]++,this.onSourcesChange(this._sources)),ur().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){ur().f[4]++;const t=(ur().s[11]++,{...this._vectorLayers});ur().s[12]++,Object.keys(this._sources).forEach(i=>{ur().f[5]++,ur().s[13]++,(ur().b[4][0]++,this._sources[i]||(ur().b[4][1]++,[])).forEach(r=>{ur().f[6]++;const o=(ur().s[14]++,ur().b[5][0]++,this._vectorLayers[r]||(ur().b[5][1]++,{})),s=(ur().s[15]++,{sourceLayer:r});ur().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{ur().f[7]++,ur().s[17]++,Object.keys(a.properties).forEach(c=>{ur().f[8]++;const d=(ur().s[18]++,ur().b[6][0]++,o[c]||(ur().b[6][1]++,{}));ur().s[19]++,d[a.properties[c]]={},ur().s[20]++,o[c]=d})}),ur().s[21]++,this._vectorLayers[r]=o})}),ur().s[22]++,LP(t,this._vectorLayers)?ur().b[7][1]++:(ur().b[7][0]++,ur().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return ur().f[9]++,ur().s[24]++,this._sources}get vectorLayers(){return ur().f[10]++,ur().s[25]++,this._vectorLayers}}function fe(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="b644180e08cba18a95044411ecd60ad7aec7c253",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:37,column:0},end:{line:37,column:30}},1:{start:{line:39,column:29},end:{line:39,column:60}},2:{start:{line:40,column:26},end:{line:40,column:54}},3:{start:{line:41,column:31},end:{line:41,column:64}},4:{start:{line:42,column:28},end:{line:42,column:58}},5:{start:{line:43,column:2},end:{line:60,column:3}},6:{start:{line:44,column:24},end:{line:44,column:95}},7:{start:{line:45,column:4},end:{line:47,column:5}},8:{start:{line:46,column:6},end:{line:46,column:47}},9:{start:{line:48,column:9},end:{line:60,column:3}},10:{start:{line:49,column:24},end:{line:49,column:96}},11:{start:{line:50,column:4},end:{line:52,column:5}},12:{start:{line:51,column:6},end:{line:51,column:47}},13:{start:{line:53,column:9},end:{line:60,column:3}},14:{start:{line:54,column:24},end:{line:54,column:93}},15:{start:{line:55,column:4},end:{line:57,column:5}},16:{start:{line:56,column:6},end:{line:56,column:47}},17:{start:{line:59,column:4},end:{line:59,column:15}},18:{start:{line:63,column:2},end:{line:72,column:4}},19:{start:{line:76,column:15},end:{line:76,column:19}},20:{start:{line:79,column:4},end:{line:79,column:17}},21:{start:{line:80,column:4},end:{line:80,column:45}},22:{start:{line:81,column:4},end:{line:81,column:38}},23:{start:{line:82,column:4},end:{line:119,column:6}},24:{start:{line:120,column:4},end:{line:122,column:7}},25:{start:{line:121,column:35},end:{line:121,column:69}},26:{start:{line:124,column:31},end:{line:197,column:3}},27:{start:{line:125,column:22},end:{line:182,column:5}},28:{start:{line:129,column:10},end:{line:129,column:40}},29:{start:{line:135,column:10},end:{line:135,column:35}},30:{start:{line:141,column:10},end:{line:141,column:37}},31:{start:{line:147,column:10},end:{line:147,column:38}},32:{start:{line:153,column:10},end:{line:153,column:39}},33:{start:{line:159,column:10},end:{line:159,column:42}},34:{start:{line:165,column:10},end:{line:167,column:12}},35:{start:{line:173,column:10},end:{line:173,column:63}},36:{start:{line:179,column:10},end:{line:179,column:36}},37:{start:{line:183,column:4},end:{line:196,column:7}},38:{start:{line:184,column:6},end:{line:195,column:7}},39:{start:{line:185,column:8},end:{line:185,column:24}},40:{start:{line:186,column:8},end:{line:186,column:30}},41:{start:{line:187,column:13},end:{line:195,column:7}},42:{start:{line:188,column:25},end:{line:190,column:10}},43:{start:{line:189,column:10},end:{line:189,column:41}},44:{start:{line:191,column:8},end:{line:194,column:9}},45:{start:{line:192,column:10},end:{line:192,column:44}},46:{start:{line:193,column:10},end:{line:193,column:29}},47:{start:{line:198,column:19},end:{line:216,column:3}},48:{start:{line:199,column:4},end:{line:215,column:5}},49:{start:{line:200,column:6},end:{line:206,column:7}},50:{start:{line:201,column:8},end:{line:201,column:27}},51:{start:{line:202,column:8},end:{line:202,column:22}},52:{start:{line:203,column:13},end:{line:206,column:7}},53:{start:{line:204,column:8},end:{line:204,column:27}},54:{start:{line:205,column:8},end:{line:205,column:22}},55:{start:{line:208,column:6},end:{line:214,column:7}},56:{start:{line:209,column:8},end:{line:209,column:27}},57:{start:{line:210,column:8},end:{line:210,column:22}},58:{start:{line:211,column:13},end:{line:214,column:7}},59:{start:{line:212,column:8},end:{line:212,column:27}},60:{start:{line:213,column:8},end:{line:213,column:22}},61:{start:{line:218,column:4},end:{line:218,column:102}},62:{start:{line:218,column:65},end:{line:218,column:100}},63:{start:{line:219,column:4},end:{line:219,column:60}},64:{start:{line:222,column:4},end:{line:222,column:63}},65:{start:{line:225,column:4},end:{line:225,column:41}},66:{start:{line:228,column:21},end:{line:228,column:55}},67:{start:{line:229,column:24},end:{line:229,column:93}},68:{start:{line:230,column:21},end:{line:230,column:110}},69:{start:{line:231,column:4},end:{line:233,column:7}},70:{start:{line:232,column:6},end:{line:232,column:80}},71:{start:{line:236,column:4},end:{line:238,column:7}},72:{start:{line:237,column:6},end:{line:237,column:80}},73:{start:{line:240,column:29},end:{line:254,column:3}},74:{start:{line:241,column:4},end:{line:245,column:5}},75:{start:{line:242,column:6},end:{line:244,column:9}},76:{start:{line:246,column:25},end:{line:252,column:5}},77:{start:{line:253,column:4},end:{line:253,column:38}},78:{start:{line:255,column:19},end:{line:392,column:3}},79:{start:{line:256,column:4},end:{line:261,column:6}},80:{start:{line:262,column:21},end:{line:262,column:40}},81:{start:{line:263,column:27},end:{line:263,column:90}},82:{start:{line:264,column:26},end:{line:264,column:74}},83:{start:{line:265,column:25},end:{line:265,column:56}},84:{start:{line:266,column:4},end:{line:268,column:5}},85:{start:{line:267,column:6},end:{line:267,column:71}},86:{start:{line:269,column:4},end:{line:271,column:5}},87:{start:{line:270,column:6},end:{line:270,column:71}},88:{start:{line:272,column:4},end:{line:276,column:5}},89:{start:{line:273,column:6},end:{line:275,column:7}},90:{start:{line:274,column:8},end:{line:274,column:63}},91:{start:{line:277,column:4},end:{line:279,column:5}},92:{start:{line:278,column:6},end:{line:278,column:44}},93:{start:{line:280,column:19},end:{line:280,column:51}},94:{start:{line:281,column:24},end:{line:281,column:26}},95:{start:{line:282,column:4},end:{line:293,column:5}},96:{start:{line:283,column:26},end:{line:283,column:42}},97:{start:{line:284,column:6},end:{line:292,column:9}},98:{start:{line:285,column:8},end:{line:290,column:9}},99:{start:{line:286,column:24},end:{line:288,column:11}},100:{start:{line:289,column:10},end:{line:289,column:34}},101:{start:{line:291,column:8},end:{line:291,column:40}},102:{start:{line:294,column:25},end:{line:345,column:6}},103:{start:{line:295,column:23},end:{line:295,column:109}},104:{start:{line:296,column:6},end:{line:309,column:7}},105:{start:{line:297,column:35},end:{line:297,column:43}},106:{start:{line:298,column:8},end:{line:308,column:10}},107:{start:{line:310,column:33},end:{line:310,column:100}},108:{start:{line:311,column:6},end:{line:324,column:7}},109:{start:{line:312,column:35},end:{line:312,column:53}},110:{start:{line:313,column:8},end:{line:323,column:10}},111:{start:{line:325,column:25},end:{line:325,column:88}},112:{start:{line:326,column:6},end:{line:344,column:7}},113:{start:{line:327,column:52},end:{line:327,column:62}},114:{start:{line:328,column:20},end:{line:328,column:78}},115:{start:{line:329,column:8},end:{line:339,column:10}},116:{start:{line:341,column:8},end:{line:343,column:10}},117:{start:{line:346,column:24},end:{line:346,column:30}},118:{start:{line:347,column:4},end:{line:361,column:5}},119:{start:{line:348,column:6},end:{line:348,column:42}},120:{start:{line:349,column:6},end:{line:360,column:7}},121:{start:{line:350,column:28},end:{line:350,column:33}},122:{start:{line:351,column:8},end:{line:359,column:9}},123:{start:{line:352,column:10},end:{line:358,column:11}},124:{start:{line:353,column:28},end:{line:353,column:49}},125:{start:{line:354,column:30},end:{line:354,column:69}},126:{start:{line:355,column:12},end:{line:355,column:44}},127:{start:{line:357,column:12},end:{line:357,column:46}},128:{start:{line:362,column:4},end:{line:364,column:5}},129:{start:{line:363,column:6},end:{line:363,column:40}},130:{start:{line:365,column:4},end:{line:367,column:5}},131:{start:{line:366,column:6},end:{line:366,column:40}},132:{start:{line:368,column:4},end:{line:370,column:5}},133:{start:{line:369,column:6},end:{line:369,column:47}},134:{start:{line:371,column:4},end:{line:373,column:5}},135:{start:{line:372,column:6},end:{line:372,column:31}},136:{start:{line:374,column:17},end:{line:374,column:31}},137:{start:{line:375,column:19},end:{line:375,column:35}},138:{start:{line:376,column:4},end:{line:391,column:7}},139:{start:{line:389,column:6},end:{line:389,column:26}},140:{start:{line:390,column:6},end:{line:390,column:27}},141:{start:{line:393,column:11},end:{line:400,column:3}},142:{start:{line:394,column:24},end:{line:394,column:49}},143:{start:{line:395,column:21},end:{line:395,column:67}},144:{start:{line:396,column:4},end:{line:396,column:61}},145:{start:{line:397,column:4},end:{line:399,column:7}},146:{start:{line:401,column:11},end:{line:408,column:3}},147:{start:{line:402,column:24},end:{line:402,column:49}},148:{start:{line:403,column:21},end:{line:403,column:67}},149:{start:{line:404,column:4},end:{line:404,column:61}},150:{start:{line:405,column:4},end:{line:407,column:7}},151:{start:{line:409,column:16},end:{line:423,column:3}},152:{start:{line:410,column:33},end:{line:410,column:37}},153:{start:{line:411,column:17},end:{line:411,column:43}},154:{start:{line:412,column:4},end:{line:412,column:53}},155:{start:{line:413,column:4},end:{line:413,column:53}},156:{start:{line:414,column:4},end:{line:414,column:38}},157:{start:{line:414,column:31},end:{line:414,column:38}},158:{start:{line:415,column:4},end:{line:419,column:5}},159:{start:{line:416,column:6},end:{line:418,column:9}},160:{start:{line:420,column:4},end:{line:420,column:29}},161:{start:{line:421,column:4},end:{line:421,column:49}},162:{start:{line:422,column:4},end:{line:422,column:32}},163:{start:{line:424,column:19},end:{line:430,column:3}},164:{start:{line:425,column:25},end:{line:428,column:5}},165:{start:{line:429,column:4},end:{line:429,column:38}},166:{start:{line:431,column:19},end:{line:436,column:3}},167:{start:{line:432,column:19},end:{line:432,column:45}},168:{start:{line:433,column:28},end:{line:433,column:43}},169:{start:{line:434,column:4},end:{line:434,column:37}},170:{start:{line:435,column:4},end:{line:435,column:41}},171:{start:{line:437,column:16},end:{line:444,column:3}},172:{start:{line:438,column:19},end:{line:438,column:45}},173:{start:{line:439,column:26},end:{line:439,column:41}},174:{start:{line:440,column:24},end:{line:440,column:55}},175:{start:{line:441,column:4},end:{line:441,column:46}},176:{start:{line:442,column:4},end:{line:442,column:48}},177:{start:{line:443,column:4},end:{line:443,column:39}},178:{start:{line:445,column:28},end:{line:454,column:3}},179:{start:{line:446,column:19},end:{line:446,column:45}},180:{start:{line:447,column:26},end:{line:447,column:41}},181:{start:{line:448,column:18},end:{line:448,column:45}},182:{start:{line:449,column:26},end:{line:449,column:70}},183:{start:{line:450,column:4},end:{line:450,column:88}},184:{start:{line:451,column:4},end:{line:451,column:33}},185:{start:{line:452,column:4},end:{line:452,column:33}},186:{start:{line:453,column:4},end:{line:453,column:39}},187:{start:{line:455,column:20},end:{line:462,column:3}},188:{start:{line:456,column:26},end:{line:456,column:61}},189:{start:{line:457,column:4},end:{line:460,column:6}},190:{start:{line:461,column:4},end:{line:461,column:39}},191:{start:{line:463,column:19},end:{line:467,column:3}},192:{start:{line:464,column:26},end:{line:464,column:61}},193:{start:{line:465,column:4},end:{line:465,column:33}},194:{start:{line:466,column:4},end:{line:466,column:39}},195:{start:{line:468,column:16},end:{line:472,column:3}},196:{start:{line:469,column:4},end:{line:471,column:27}},197:{start:{line:473,column:21},end:{line:487,column:3}},198:{start:{line:474,column:21},end:{line:474,column:44}},199:{start:{line:475,column:4},end:{line:486,column:5}},200:{start:{line:476,column:27},end:{line:482,column:7}},201:{start:{line:483,column:6},end:{line:483,column:26}},202:{start:{line:485,column:6},end:{line:485,column:22}},203:{start:{line:488,column:14},end:{line:492,column:3}},204:{start:{line:489,column:4},end:{line:489,column:34}},205:{start:{line:490,column:4},end:{line:490,column:47}},206:{start:{line:491,column:4},end:{line:491,column:34}},207:{start:{line:494,column:23},end:{line:494,column:25}},208:{start:{line:495,column:4},end:{line:534,column:5}},209:{start:{line:496,column:21},end:{line:496,column:53}},210:{start:{line:497,column:6},end:{line:533,column:7}},211:{start:{line:498,column:8},end:{line:498,column:93}},212:{start:{line:499,column:8},end:{line:501,column:9}},213:{start:{line:500,column:10},end:{line:500,column:38}},214:{start:{line:503,column:8},end:{line:506,column:10}},215:{start:{line:507,column:18},end:{line:507,column:28}},216:{start:{line:508,column:8},end:{line:512,column:9}},217:{start:{line:509,column:10},end:{line:509,column:62}},218:{start:{line:511,column:10},end:{line:511,column:63}},219:{start:{line:513,column:32},end:{line:520,column:9}},220:{start:{line:514,column:10},end:{line:516,column:11}},221:{start:{line:515,column:12},end:{line:515,column:19}},222:{start:{line:517,column:10},end:{line:519,column:11}},223:{start:{line:518,column:12},end:{line:518,column:50}},224:{start:{line:521,column:8},end:{line:532,column:9}},225:{start:{line:522,column:10},end:{line:529,column:11}},226:{start:{line:523,column:25},end:{line:523,column:77}},227:{start:{line:524,column:12},end:{line:524,column:34}},228:{start:{line:526,column:29},end:{line:526,column:63}},229:{start:{line:527,column:25},end:{line:527,column:46}},230:{start:{line:528,column:12},end:{line:528,column:34}},231:{start:{line:531,column:10},end:{line:531,column:78}},232:{start:{line:535,column:4},end:{line:540,column:5}},233:{start:{line:536,column:6},end:{line:536,column:51}},234:{start:{line:537,column:6},end:{line:539,column:9}},235:{start:{line:543,column:21},end:{line:543,column:55}},236:{start:{line:544,column:4},end:{line:544,column:53}},237:{start:{line:546,column:16},end:{line:550,column:3}},238:{start:{line:547,column:4},end:{line:549,column:7}},239:{start:{line:552,column:40},end:{line:552,column:50}},240:{start:{line:553,column:21},end:{line:565,column:5}},241:{start:{line:557,column:8},end:{line:559,column:11}},242:{start:{line:562,column:8},end:{line:562,column:44}},243:{start:{line:563,column:8},end:{line:563,column:28}},244:{start:{line:566,column:21},end:{line:566,column:40}},245:{start:{line:568,column:4},end:{line:590,column:5}},246:{start:{line:569,column:6},end:{line:577,column:8}},247:{start:{line:575,column:38},end:{line:575,column:66}},248:{start:{line:579,column:6},end:{line:589,column:8}},249:{start:{line:592,column:4},end:{line:594,column:5}},250:{start:{line:593,column:6},end:{line:593,column:63}},251:{start:{line:595,column:25},end:{line:595,column:27}},252:{start:{line:596,column:4},end:{line:598,column:5}},253:{start:{line:597,column:6},end:{line:597,column:52}},254:{start:{line:599,column:4},end:{line:599,column:160}},255:{start:{line:601,column:18},end:{line:619,column:3}},256:{start:{line:602,column:43},end:{line:602,column:53}},257:{start:{line:603,column:35},end:{line:603,column:45}},258:{start:{line:604,column:16},end:{line:604,column:38}},259:{start:{line:605,column:20},end:{line:605,column:50}},260:{start:{line:606,column:4},end:{line:606,column:70}},261:{start:{line:607,column:23},end:{line:607,column:122}},262:{start:{line:607,column:66},end:{line:607,column:91}},263:{start:{line:607,column:109},end:{line:607,column:121}},264:{start:{line:608,column:4},end:{line:612,column:5}},265:{start:{line:609,column:6},end:{line:609,column:58}},266:{start:{line:611,column:6},end:{line:611,column:39}},267:{start:{line:613,column:4},end:{line:617,column:5}},268:{start:{line:614,column:6},end:{line:614,column:38}},269:{start:{line:615,column:11},end:{line:617,column:5}},270:{start:{line:616,column:6},end:{line:616,column:46}},271:{start:{line:618,column:4},end:{line:618,column:71}},272:{start:{line:620,column:27},end:{line:665,column:3}},273:{start:{line:621,column:16},end:{line:621,column:38}},274:{start:{line:622,column:23},end:{line:622,column:52}},275:{start:{line:623,column:4},end:{line:635,column:5}},276:{start:{line:624,column:21},end:{line:624,column:42}},277:{start:{line:625,column:23},end:{line:625,column:25}},278:{start:{line:626,column:6},end:{line:628,column:9}},279:{start:{line:627,column:8},end:{line:627,column:35}},280:{start:{line:629,column:6},end:{line:634,column:9}},281:{start:{line:636,column:17},end:{line:636,column:45}},282:{start:{line:637,column:4},end:{line:639,column:5}},283:{start:{line:638,column:6},end:{line:638,column:29}},284:{start:{line:640,column:17},end:{line:640,column:46}},285:{start:{line:641,column:4},end:{line:664,column:5}},286:{start:{line:642,column:6},end:{line:663,column:7}},287:{start:{line:643,column:22},end:{line:643,column:37}},288:{start:{line:644,column:46},end:{line:647,column:9}},289:{start:{line:648,column:20},end:{line:648,column:24}},290:{start:{line:649,column:8},end:{line:654,column:9}},291:{start:{line:650,column:33},end:{line:650,column:63}},292:{start:{line:651,column:10},end:{line:653,column:11}},293:{start:{line:652,column:12},end:{line:652,column:26}},294:{start:{line:655,column:8},end:{line:660,column:9}},295:{start:{line:656,column:10},end:{line:659,column:13}},296:{start:{line:662,column:8},end:{line:662,column:26}},297:{start:{line:666,column:18},end:{line:671,column:3}},298:{start:{line:667,column:4},end:{line:670,column:27}},299:{start:{line:673,column:4},end:{line:678,column:27}},300:{start:{line:681,column:4},end:{line:681,column:60}},301:{start:{line:683,column:20},end:{line:685,column:3}},302:{start:{line:684,column:4},end:{line:684,column:34}},303:{start:{line:686,column:28},end:{line:693,column:3}},304:{start:{line:687,column:4},end:{line:692,column:7}},305:{start:{line:694,column:28},end:{line:701,column:3}},306:{start:{line:695,column:4},end:{line:700,column:7}},307:{start:{line:703,column:19},end:{line:703,column:51}},308:{start:{line:704,column:26},end:{line:704,column:92}},309:{start:{line:705,column:36},end:{line:718,column:5}},310:{start:{line:716,column:34},end:{line:716,column:57}},311:{start:{line:719,column:23},end:{line:726,column:14}},312:{start:{line:723,column:30},end:{line:723,column:57}},313:{start:{line:724,column:23},end:{line:724,column:57}},314:{start:{line:727,column:38},end:{line:741,column:5}},315:{start:{line:742,column:24},end:{line:761,column:14}},316:{start:{line:762,column:24},end:{line:772,column:14}},317:{start:{line:773,column:35},end:{line:851,column:8}},318:{start:{line:783,column:30},end:{line:783,column:55}},319:{start:{line:791,column:30},end:{line:791,column:59}},320:{start:{line:801,column:30},end:{line:801,column:58}},321:{start:{line:810,column:30},end:{line:810,column:56}},322:{start:{line:820,column:30},end:{line:820,column:54}},323:{start:{line:830,column:30},end:{line:830,column:57}},324:{start:{line:839,column:30},end:{line:839,column:61}},325:{start:{line:848,column:30},end:{line:848,column:54}},326:{start:{line:852,column:4},end:{line:863,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:38,column:9},end:{line:38,column:28}},loc:{start:{line:38,column:44},end:{line:61,column:1}},line:38},1:{name:"updateRootSpec",decl:{start:{line:62,column:9},end:{line:62,column:23}},loc:{start:{line:62,column:52},end:{line:73,column:1}},line:62},2:{name:"(anonymous_2)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:21},end:{line:123,column:3}},line:78},3:{name:"(anonymous_3)",decl:{start:{line:121,column:28},end:{line:121,column:29}},loc:{start:{line:121,column:35},end:{line:121,column:69}},line:121},4:{name:"(anonymous_4)",decl:{start:{line:124,column:31},end:{line:124,column:32}},loc:{start:{line:124,column:37},end:{line:197,column:3}},line:124},5:{name:"(anonymous_5)",decl:{start:{line:128,column:17},end:{line:128,column:18}},loc:{start:{line:128,column:23},end:{line:130,column:9}},line:128},6:{name:"(anonymous_6)",decl:{start:{line:134,column:17},end:{line:134,column:18}},loc:{start:{line:134,column:23},end:{line:136,column:9}},line:134},7:{name:"(anonymous_7)",decl:{start:{line:140,column:17},end:{line:140,column:18}},loc:{start:{line:140,column:23},end:{line:142,column:9}},line:140},8:{name:"(anonymous_8)",decl:{start:{line:146,column:17},end:{line:146,column:18}},loc:{start:{line:146,column:23},end:{line:148,column:9}},line:146},9:{name:"(anonymous_9)",decl:{start:{line:152,column:17},end:{line:152,column:18}},loc:{start:{line:152,column:23},end:{line:154,column:9}},line:152},10:{name:"(anonymous_10)",decl:{start:{line:158,column:17},end:{line:158,column:18}},loc:{start:{line:158,column:23},end:{line:160,column:9}},line:158},11:{name:"(anonymous_11)",decl:{start:{line:164,column:17},end:{line:164,column:18}},loc:{start:{line:164,column:23},end:{line:168,column:9}},line:164},12:{name:"(anonymous_12)",decl:{start:{line:172,column:17},end:{line:172,column:18}},loc:{start:{line:172,column:23},end:{line:174,column:9}},line:172},13:{name:"(anonymous_13)",decl:{start:{line:178,column:17},end:{line:178,column:18}},loc:{start:{line:178,column:23},end:{line:180,column:9}},line:178},14:{name:"(anonymous_14)",decl:{start:{line:183,column:44},end:{line:183,column:45}},loc:{start:{line:183,column:51},end:{line:196,column:5}},line:183},15:{name:"(anonymous_15)",decl:{start:{line:188,column:40},end:{line:188,column:41}},loc:{start:{line:188,column:55},end:{line:190,column:9}},line:188},16:{name:"(anonymous_16)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:26},end:{line:216,column:3}},line:198},17:{name:"(anonymous_17)",decl:{start:{line:217,column:2},end:{line:217,column:3}},loc:{start:{line:217,column:28},end:{line:220,column:3}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:218,column:45},end:{line:218,column:46}},loc:{start:{line:218,column:65},end:{line:218,column:100}},line:218},19:{name:"(anonymous_19)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:25},end:{line:223,column:3}},line:221},20:{name:"(anonymous_20)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:226,column:3}},line:224},21:{name:"(anonymous_21)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:27},end:{line:234,column:3}},line:227},22:{name:"(anonymous_22)",decl:{start:{line:231,column:42},end:{line:231,column:43}},loc:{start:{line:231,column:53},end:{line:233,column:5}},line:231},23:{name:"(anonymous_23)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:23},end:{line:239,column:3}},line:235},24:{name:"(anonymous_24)",decl:{start:{line:236,column:41},end:{line:236,column:42}},loc:{start:{line:236,column:52},end:{line:238,column:5}},line:236},25:{name:"(anonymous_25)",decl:{start:{line:240,column:29},end:{line:240,column:30}},loc:{start:{line:240,column:50},end:{line:254,column:3}},line:240},26:{name:"(anonymous_26)",decl:{start:{line:255,column:19},end:{line:255,column:20}},loc:{start:{line:255,column:44},end:{line:392,column:3}},line:255},27:{name:"(anonymous_27)",decl:{start:{line:284,column:30},end:{line:284,column:31}},loc:{start:{line:284,column:48},end:{line:292,column:7}},line:284},28:{name:"(anonymous_28)",decl:{start:{line:294,column:56},end:{line:294,column:57}},loc:{start:{line:294,column:67},end:{line:345,column:5}},line:294},29:{name:"(anonymous_29)",decl:{start:{line:388,column:7},end:{line:388,column:8}},loc:{start:{line:388,column:13},end:{line:391,column:5}},line:388},30:{name:"(anonymous_30)",decl:{start:{line:393,column:11},end:{line:393,column:12}},loc:{start:{line:393,column:17},end:{line:400,column:3}},line:393},31:{name:"(anonymous_31)",decl:{start:{line:401,column:11},end:{line:401,column:12}},loc:{start:{line:401,column:17},end:{line:408,column:3}},line:401},32:{name:"(anonymous_32)",decl:{start:{line:409,column:16},end:{line:409,column:17}},loc:{start:{line:409,column:26},end:{line:423,column:3}},line:409},33:{name:"(anonymous_33)",decl:{start:{line:424,column:19},end:{line:424,column:20}},loc:{start:{line:424,column:38},end:{line:430,column:3}},line:424},34:{name:"(anonymous_34)",decl:{start:{line:431,column:19},end:{line:431,column:20}},loc:{start:{line:431,column:30},end:{line:436,column:3}},line:431},35:{name:"(anonymous_35)",decl:{start:{line:437,column:16},end:{line:437,column:17}},loc:{start:{line:437,column:27},end:{line:444,column:3}},line:437},36:{name:"(anonymous_36)",decl:{start:{line:445,column:28},end:{line:445,column:29}},loc:{start:{line:445,column:39},end:{line:454,column:3}},line:445},37:{name:"(anonymous_37)",decl:{start:{line:455,column:20},end:{line:455,column:21}},loc:{start:{line:455,column:46},end:{line:462,column:3}},line:455},38:{name:"(anonymous_38)",decl:{start:{line:463,column:19},end:{line:463,column:20}},loc:{start:{line:463,column:37},end:{line:467,column:3}},line:463},39:{name:"(anonymous_39)",decl:{start:{line:468,column:16},end:{line:468,column:17}},loc:{start:{line:468,column:30},end:{line:472,column:3}},line:468},40:{name:"(anonymous_40)",decl:{start:{line:473,column:21},end:{line:473,column:22}},loc:{start:{line:473,column:35},end:{line:487,column:3}},line:473},41:{name:"(anonymous_41)",decl:{start:{line:488,column:14},end:{line:488,column:15}},loc:{start:{line:488,column:40},end:{line:492,column:3}},line:488},42:{name:"(anonymous_42)",decl:{start:{line:493,column:2},end:{line:493,column:3}},loc:{start:{line:493,column:23},end:{line:541,column:3}},line:493},43:{name:"(anonymous_43)",decl:{start:{line:513,column:32},end:{line:513,column:33}},loc:{start:{line:513,column:42},end:{line:520,column:9}},line:513},44:{name:"(anonymous_44)",decl:{start:{line:542,column:2},end:{line:542,column:3}},loc:{start:{line:542,column:17},end:{line:545,column:3}},line:542},45:{name:"(anonymous_45)",decl:{start:{line:546,column:16},end:{line:546,column:17}},loc:{start:{line:546,column:29},end:{line:550,column:3}},line:546},46:{name:"(anonymous_46)",decl:{start:{line:551,column:2},end:{line:551,column:3}},loc:{start:{line:551,column:16},end:{line:600,column:3}},line:551},47:{name:"(anonymous_47)",decl:{start:{line:556,column:27},end:{line:556,column:28}},loc:{start:{line:556,column:42},end:{line:560,column:7}},line:556},48:{name:"(anonymous_48)",decl:{start:{line:561,column:20},end:{line:561,column:21}},loc:{start:{line:561,column:27},end:{line:564,column:7}},line:561},49:{name:"(anonymous_49)",decl:{start:{line:575,column:25},end:{line:575,column:26}},loc:{start:{line:575,column:38},end:{line:575,column:66}},line:575},50:{name:"(anonymous_50)",decl:{start:{line:601,column:18},end:{line:601,column:19}},loc:{start:{line:601,column:24},end:{line:619,column:3}},line:601},51:{name:"(anonymous_51)",decl:{start:{line:607,column:50},end:{line:607,column:51}},loc:{start:{line:607,column:66},end:{line:607,column:91}},line:607},52:{name:"(anonymous_52)",decl:{start:{line:607,column:100},end:{line:607,column:101}},loc:{start:{line:607,column:109},end:{line:607,column:121}},line:607},53:{name:"(anonymous_53)",decl:{start:{line:620,column:27},end:{line:620,column:28}},loc:{start:{line:620,column:41},end:{line:665,column:3}},line:620},54:{name:"(anonymous_54)",decl:{start:{line:626,column:21},end:{line:626,column:22}},loc:{start:{line:626,column:36},end:{line:628,column:7}},line:626},55:{name:"(anonymous_55)",decl:{start:{line:666,column:18},end:{line:666,column:19}},loc:{start:{line:666,column:29},end:{line:671,column:3}},line:666},56:{name:"(anonymous_56)",decl:{start:{line:672,column:2},end:{line:672,column:3}},loc:{start:{line:672,column:29},end:{line:679,column:3}},line:672},57:{name:"(anonymous_57)",decl:{start:{line:680,column:2},end:{line:680,column:3}},loc:{start:{line:680,column:25},end:{line:682,column:3}},line:680},58:{name:"(anonymous_58)",decl:{start:{line:683,column:20},end:{line:683,column:21}},loc:{start:{line:683,column:36},end:{line:685,column:3}},line:683},59:{name:"(anonymous_59)",decl:{start:{line:686,column:28},end:{line:686,column:29}},loc:{start:{line:686,column:44},end:{line:693,column:3}},line:686},60:{name:"(anonymous_60)",decl:{start:{line:694,column:28},end:{line:694,column:29}},loc:{start:{line:694,column:44},end:{line:701,column:3}},line:694},61:{name:"(anonymous_61)",decl:{start:{line:702,column:2},end:{line:702,column:3}},loc:{start:{line:702,column:11},end:{line:864,column:3}},line:702},62:{name:"(anonymous_62)",decl:{start:{line:716,column:23},end:{line:716,column:24}},loc:{start:{line:716,column:34},end:{line:716,column:57}},line:716},63:{name:"(anonymous_63)",decl:{start:{line:723,column:18},end:{line:723,column:19}},loc:{start:{line:723,column:30},end:{line:723,column:57}},line:723},64:{name:"(anonymous_64)",decl:{start:{line:724,column:17},end:{line:724,column:18}},loc:{start:{line:724,column:23},end:{line:724,column:57}},line:724},65:{name:"(anonymous_65)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:55}},line:783},66:{name:"(anonymous_66)",decl:{start:{line:791,column:24},end:{line:791,column:25}},loc:{start:{line:791,column:30},end:{line:791,column:59}},line:791},67:{name:"(anonymous_67)",decl:{start:{line:801,column:24},end:{line:801,column:25}},loc:{start:{line:801,column:30},end:{line:801,column:58}},line:801},68:{name:"(anonymous_68)",decl:{start:{line:810,column:24},end:{line:810,column:25}},loc:{start:{line:810,column:30},end:{line:810,column:56}},line:810},69:{name:"(anonymous_69)",decl:{start:{line:820,column:24},end:{line:820,column:25}},loc:{start:{line:820,column:30},end:{line:820,column:54}},line:820},70:{name:"(anonymous_70)",decl:{start:{line:830,column:24},end:{line:830,column:25}},loc:{start:{line:830,column:30},end:{line:830,column:57}},line:830},71:{name:"(anonymous_71)",decl:{start:{line:839,column:24},end:{line:839,column:25}},loc:{start:{line:839,column:30},end:{line:839,column:61}},line:839},72:{name:"(anonymous_72)",decl:{start:{line:848,column:24},end:{line:848,column:25}},loc:{start:{line:848,column:30},end:{line:848,column:54}},line:848}},branchMap:{0:{loc:{start:{line:43,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:43,column:2},end:{line:60,column:3}},{start:{line:48,column:9},end:{line:60,column:3}}],line:43},1:{loc:{start:{line:43,column:6},end:{line:43,column:43}},type:"binary-expr",locations:[{start:{line:43,column:6},end:{line:43,column:24}},{start:{line:43,column:28},end:{line:43,column:43}}],line:43},2:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},3:{loc:{start:{line:48,column:9},end:{line:60,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:60,column:3}},{start:{line:53,column:9},end:{line:60,column:3}}],line:48},4:{loc:{start:{line:50,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},5:{loc:{start:{line:53,column:9},end:{line:60,column:3}},type:"if",locations:[{start:{line:53,column:9},end:{line:60,column:3}},{start:{line:58,column:9},end:{line:60,column:3}}],line:53},6:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:166,column:12},end:{line:166,column:61}},type:"cond-expr",locations:[{start:{line:166,column:44},end:{line:166,column:53}},{start:{line:166,column:56},end:{line:166,column:61}}],line:166},8:{loc:{start:{line:184,column:6},end:{line:195,column:7}},type:"if",locations:[{start:{line:184,column:6},end:{line:195,column:7}},{start:{line:187,column:13},end:{line:195,column:7}}],line:184},9:{loc:{start:{line:187,column:13},end:{line:195,column:7}},type:"if",locations:[{start:{line:187,column:13},end:{line:195,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:187},10:{loc:{start:{line:187,column:17},end:{line:187,column:88}},type:"binary-expr",locations:[{start:{line:187,column:17},end:{line:187,column:44}},{start:{line:187,column:48},end:{line:187,column:88}}],line:187},11:{loc:{start:{line:191,column:8},end:{line:194,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:194,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},12:{loc:{start:{line:199,column:4},end:{line:215,column:5}},type:"if",locations:[{start:{line:199,column:4},end:{line:215,column:5}},{start:{line:207,column:11},end:{line:215,column:5}}],line:199},13:{loc:{start:{line:200,column:6},end:{line:206,column:7}},type:"if",locations:[{start:{line:200,column:6},end:{line:206,column:7}},{start:{line:203,column:13},end:{line:206,column:7}}],line:200},14:{loc:{start:{line:200,column:10},end:{line:200,column:53}},type:"binary-expr",locations:[{start:{line:200,column:10},end:{line:200,column:19}},{start:{line:200,column:23},end:{line:200,column:33}},{start:{line:200,column:37},end:{line:200,column:53}}],line:200},15:{loc:{start:{line:203,column:13},end:{line:206,column:7}},type:"if",locations:[{start:{line:203,column:13},end:{line:206,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:203},16:{loc:{start:{line:203,column:17},end:{line:203,column:46}},type:"binary-expr",locations:[{start:{line:203,column:17},end:{line:203,column:26}},{start:{line:203,column:30},end:{line:203,column:46}}],line:203},17:{loc:{start:{line:208,column:6},end:{line:214,column:7}},type:"if",locations:[{start:{line:208,column:6},end:{line:214,column:7}},{start:{line:211,column:13},end:{line:214,column:7}}],line:208},18:{loc:{start:{line:208,column:10},end:{line:208,column:39}},type:"binary-expr",locations:[{start:{line:208,column:10},end:{line:208,column:19}},{start:{line:208,column:23},end:{line:208,column:39}}],line:208},19:{loc:{start:{line:211,column:13},end:{line:214,column:7}},type:"if",locations:[{start:{line:211,column:13},end:{line:214,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:211},20:{loc:{start:{line:211,column:17},end:{line:211,column:46}},type:"binary-expr",locations:[{start:{line:211,column:17},end:{line:211,column:26}},{start:{line:211,column:30},end:{line:211,column:46}}],line:211},21:{loc:{start:{line:228,column:21},end:{line:228,column:55}},type:"binary-expr",locations:[{start:{line:228,column:21},end:{line:228,column:49}},{start:{line:228,column:53},end:{line:228,column:55}}],line:228},22:{loc:{start:{line:229,column:24},end:{line:229,column:93}},type:"binary-expr",locations:[{start:{line:229,column:24},end:{line:229,column:70}},{start:{line:229,column:74},end:{line:229,column:93}}],line:229},23:{loc:{start:{line:230,column:21},end:{line:230,column:110}},type:"cond-expr",locations:[{start:{line:230,column:55},end:{line:230,column:96}},{start:{line:230,column:99},end:{line:230,column:110}}],line:230},24:{loc:{start:{line:241,column:4},end:{line:245,column:5}},type:"if",locations:[{start:{line:241,column:4},end:{line:245,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:241},25:{loc:{start:{line:241,column:8},end:{line:241,column:123}},type:"binary-expr",locations:[{start:{line:241,column:8},end:{line:241,column:40}},{start:{line:241,column:44},end:{line:241,column:123}}],line:241},26:{loc:{start:{line:255,column:30},end:{line:255,column:39}},type:"default-arg",locations:[{start:{line:255,column:37},end:{line:255,column:39}}],line:255},27:{loc:{start:{line:263,column:27},end:{line:263,column:90}},type:"binary-expr",locations:[{start:{line:263,column:27},end:{line:263,column:44}},{start:{line:263,column:48},end:{line:263,column:90}}],line:263},28:{loc:{start:{line:264,column:26},end:{line:264,column:74}},type:"binary-expr",locations:[{start:{line:264,column:26},end:{line:264,column:42}},{start:{line:264,column:46},end:{line:264,column:74}}],line:264},29:{loc:{start:{line:265,column:25},end:{line:265,column:56}},type:"binary-expr",locations:[{start:{line:265,column:25},end:{line:265,column:39}},{start:{line:265,column:43},end:{line:265,column:56}}],line:265},30:{loc:{start:{line:266,column:4},end:{line:268,column:5}},type:"if",locations:[{start:{line:266,column:4},end:{line:268,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},31:{loc:{start:{line:266,column:8},end:{line:266,column:62}},type:"binary-expr",locations:[{start:{line:266,column:8},end:{line:266,column:23}},{start:{line:266,column:27},end:{line:266,column:62}}],line:266},32:{loc:{start:{line:269,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:269,column:4},end:{line:271,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:269},33:{loc:{start:{line:269,column:8},end:{line:269,column:62}},type:"binary-expr",locations:[{start:{line:269,column:8},end:{line:269,column:23}},{start:{line:269,column:27},end:{line:269,column:62}}],line:269},34:{loc:{start:{line:273,column:6},end:{line:275,column:7}},type:"if",locations:[{start:{line:273,column:6},end:{line:275,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:273},35:{loc:{start:{line:273,column:10},end:{line:273,column:69}},type:"binary-expr",locations:[{start:{line:273,column:10},end:{line:273,column:16}},{start:{line:273,column:20},end:{line:273,column:35}},{start:{line:273,column:39},end:{line:273,column:69}}],line:273},36:{loc:{start:{line:277,column:4},end:{line:279,column:5}},type:"if",locations:[{start:{line:277,column:4},end:{line:279,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:277},37:{loc:{start:{line:280,column:19},end:{line:280,column:51}},type:"binary-expr",locations:[{start:{line:280,column:19},end:{line:280,column:45}},{start:{line:280,column:49},end:{line:280,column:51}}],line:280},38:{loc:{start:{line:282,column:4},end:{line:293,column:5}},type:"if",locations:[{start:{line:282,column:4},end:{line:293,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},39:{loc:{start:{line:282,column:8},end:{line:282,column:35}},type:"binary-expr",locations:[{start:{line:282,column:8},end:{line:282,column:16}},{start:{line:282,column:20},end:{line:282,column:35}}],line:282},40:{loc:{start:{line:285,column:8},end:{line:290,column:9}},type:"if",locations:[{start:{line:285,column:8},end:{line:290,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},41:{loc:{start:{line:285,column:12},end:{line:285,column:56}},type:"binary-expr",locations:[{start:{line:285,column:12},end:{line:285,column:27}},{start:{line:285,column:31},end:{line:285,column:56}}],line:285},42:{loc:{start:{line:296,column:6},end:{line:309,column:7}},type:"if",locations:[{start:{line:296,column:6},end:{line:309,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:296},43:{loc:{start:{line:311,column:6},end:{line:324,column:7}},type:"if",locations:[{start:{line:311,column:6},end:{line:324,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:311},44:{loc:{start:{line:326,column:6},end:{line:344,column:7}},type:"if",locations:[{start:{line:326,column:6},end:{line:344,column:7}},{start:{line:340,column:13},end:{line:344,column:7}}],line:326},45:{loc:{start:{line:328,column:20},end:{line:328,column:78}},type:"cond-expr",locations:[{start:{line:328,column:40},end:{line:328,column:67}},{start:{line:328,column:70},end:{line:328,column:78}}],line:328},46:{loc:{start:{line:328,column:20},end:{line:328,column:37}},type:"binary-expr",locations:[{start:{line:328,column:20},end:{line:328,column:25}},{start:{line:328,column:29},end:{line:328,column:37}}],line:328},47:{loc:{start:{line:347,column:4},end:{line:361,column:5}},type:"if",locations:[{start:{line:347,column:4},end:{line:361,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:347},48:{loc:{start:{line:351,column:8},end:{line:359,column:9}},type:"if",locations:[{start:{line:351,column:8},end:{line:359,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:351},49:{loc:{start:{line:362,column:4},end:{line:364,column:5}},type:"if",locations:[{start:{line:362,column:4},end:{line:364,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:362},50:{loc:{start:{line:365,column:4},end:{line:367,column:5}},type:"if",locations:[{start:{line:365,column:4},end:{line:367,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:365},51:{loc:{start:{line:368,column:4},end:{line:370,column:5}},type:"if",locations:[{start:{line:368,column:4},end:{line:370,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:368},52:{loc:{start:{line:371,column:4},end:{line:373,column:5}},type:"if",locations:[{start:{line:371,column:4},end:{line:373,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:371},53:{loc:{start:{line:379,column:15},end:{line:386,column:28}},type:"cond-expr",locations:[{start:{line:379,column:48},end:{line:386,column:7}},{start:{line:386,column:10},end:{line:386,column:28}}],line:379},54:{loc:{start:{line:379,column:15},end:{line:379,column:45}},type:"binary-expr",locations:[{start:{line:379,column:15},end:{line:379,column:27}},{start:{line:379,column:31},end:{line:379,column:35}},{start:{line:379,column:39},end:{line:379,column:45}}],line:379},55:{loc:{start:{line:414,column:4},end:{line:414,column:38}},type:"if",locations:[{start:{line:414,column:4},end:{line:414,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:414},56:{loc:{start:{line:415,column:4},end:{line:419,column:5}},type:"if",locations:[{start:{line:415,column:4},end:{line:419,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:415},57:{loc:{start:{line:449,column:26},end:{line:449,column:70}},type:"cond-expr",locations:[{start:{line:449,column:46},end:{line:449,column:65}},{start:{line:449,column:68},end:{line:449,column:70}}],line:449},58:{loc:{start:{line:450,column:31},end:{line:450,column:87}},type:"cond-expr",locations:[{start:{line:450,column:69},end:{line:450,column:78}},{start:{line:450,column:81},end:{line:450,column:87}}],line:450},59:{loc:{start:{line:474,column:21},end:{line:474,column:44}},type:"binary-expr",locations:[{start:{line:474,column:21},end:{line:474,column:38}},{start:{line:474,column:42},end:{line:474,column:44}}],line:474},60:{loc:{start:{line:475,column:4},end:{line:486,column:5}},type:"if",locations:[{start:{line:475,column:4},end:{line:486,column:5}},{start:{line:484,column:11},end:{line:486,column:5}}],line:475},61:{loc:{start:{line:497,column:6},end:{line:533,column:7}},type:"if",locations:[{start:{line:497,column:6},end:{line:533,column:7}},{start:{line:502,column:13},end:{line:533,column:7}}],line:497},62:{loc:{start:{line:497,column:10},end:{line:497,column:56}},type:"binary-expr",locations:[{start:{line:497,column:10},end:{line:497,column:34}},{start:{line:497,column:38},end:{line:497,column:56}}],line:497},63:{loc:{start:{line:498,column:26},end:{line:498,column:92}},type:"binary-expr",locations:[{start:{line:498,column:26},end:{line:498,column:49}},{start:{line:498,column:53},end:{line:498,column:92}}],line:498},64:{loc:{start:{line:499,column:8},end:{line:501,column:9}},type:"if",locations:[{start:{line:499,column:8},end:{line:501,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:499},65:{loc:{start:{line:514,column:10},end:{line:516,column:11}},type:"if",locations:[{start:{line:514,column:10},end:{line:516,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:514},66:{loc:{start:{line:522,column:10},end:{line:529,column:11}},type:"if",locations:[{start:{line:522,column:10},end:{line:529,column:11}},{start:{line:525,column:17},end:{line:529,column:11}}],line:522},67:{loc:{start:{line:535,column:4},end:{line:540,column:5}},type:"if",locations:[{start:{line:535,column:4},end:{line:540,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:535},68:{loc:{start:{line:543,column:21},end:{line:543,column:55}},type:"binary-expr",locations:[{start:{line:543,column:21},end:{line:543,column:49}},{start:{line:543,column:53},end:{line:543,column:55}}],line:543},69:{loc:{start:{line:544,column:11},end:{line:544,column:52}},type:"binary-expr",locations:[{start:{line:544,column:11},end:{line:544,column:40}},{start:{line:544,column:44},end:{line:544,column:52}}],line:544},70:{loc:{start:{line:554,column:16},end:{line:554,column:41}},type:"binary-expr",locations:[{start:{line:554,column:16},end:{line:554,column:29}},{start:{line:554,column:33},end:{line:554,column:41}}],line:554},71:{loc:{start:{line:568,column:4},end:{line:590,column:5}},type:"if",locations:[{start:{line:568,column:4},end:{line:590,column:5}},{start:{line:578,column:11},end:{line:590,column:5}}],line:568},72:{loc:{start:{line:592,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:592,column:4},end:{line:594,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:592},73:{loc:{start:{line:596,column:4},end:{line:598,column:5}},type:"if",locations:[{start:{line:596,column:4},end:{line:598,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:596},74:{loc:{start:{line:607,column:66},end:{line:607,column:91}},type:"cond-expr",locations:[{start:{line:607,column:81},end:{line:607,column:84}},{start:{line:607,column:87},end:{line:607,column:91}}],line:607},75:{loc:{start:{line:608,column:4},end:{line:612,column:5}},type:"if",locations:[{start:{line:608,column:4},end:{line:612,column:5}},{start:{line:610,column:11},end:{line:612,column:5}}],line:608},76:{loc:{start:{line:613,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:613,column:4},end:{line:617,column:5}},{start:{line:615,column:11},end:{line:617,column:5}}],line:613},77:{loc:{start:{line:615,column:11},end:{line:617,column:5}},type:"if",locations:[{start:{line:615,column:11},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:615},78:{loc:{start:{line:623,column:4},end:{line:635,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:635,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},79:{loc:{start:{line:623,column:8},end:{line:623,column:39}},type:"binary-expr",locations:[{start:{line:623,column:8},end:{line:623,column:18}},{start:{line:623,column:22},end:{line:623,column:39}}],line:623},80:{loc:{start:{line:637,column:4},end:{line:639,column:5}},type:"if",locations:[{start:{line:637,column:4},end:{line:639,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:637,column:8},end:{line:637,column:27}},type:"binary-expr",locations:[{start:{line:637,column:8},end:{line:637,column:12}},{start:{line:637,column:16},end:{line:637,column:27}}],line:637},82:{loc:{start:{line:641,column:4},end:{line:664,column:5}},type:"if",locations:[{start:{line:641,column:4},end:{line:664,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:641},83:{loc:{start:{line:649,column:8},end:{line:654,column:9}},type:"if",locations:[{start:{line:649,column:8},end:{line:654,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:649},84:{loc:{start:{line:651,column:10},end:{line:653,column:11}},type:"if",locations:[{start:{line:651,column:10},end:{line:653,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:651},85:{loc:{start:{line:655,column:8},end:{line:660,column:9}},type:"if",locations:[{start:{line:655,column:8},end:{line:660,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:655},86:{loc:{start:{line:703,column:19},end:{line:703,column:51}},type:"binary-expr",locations:[{start:{line:703,column:19},end:{line:703,column:45}},{start:{line:703,column:49},end:{line:703,column:51}}],line:703},87:{loc:{start:{line:704,column:26},end:{line:704,column:92}},type:"cond-expr",locations:[{start:{line:704,column:46},end:{line:704,column:83}},{start:{line:704,column:86},end:{line:704,column:92}}],line:704},88:{loc:{start:{line:719,column:23},end:{line:726,column:14}},type:"cond-expr",locations:[{start:{line:719,column:70},end:{line:726,column:5}},{start:{line:726,column:8},end:{line:726,column:14}}],line:719},89:{loc:{start:{line:742,column:24},end:{line:761,column:14}},type:"cond-expr",locations:[{start:{line:742,column:56},end:{line:761,column:5}},{start:{line:761,column:8},end:{line:761,column:14}}],line:742},90:{loc:{start:{line:762,column:24},end:{line:772,column:14}},type:"cond-expr",locations:[{start:{line:762,column:97},end:{line:772,column:5}},{start:{line:772,column:8},end:{line:772,column:14}}],line:762}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0,320:0,321:0,322:0,323:0,324:0,325:0,326:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0],86:[0,0],87:[0,0],88:[0,0],89:[0,0],90:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AA+sBmB,SAAA,KAwNA,YAxNA;AA/sBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AAEtB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AA2CA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,QACA,OAAO;AAAA,MACT;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,QACZ,MAAM;AAAA,MACR;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,QAAQ,EAAE,KAAK,CAAA,UAAS;AAC7C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,OAAO,EAAE,KAAK,CAAA,UAAS;AAC5C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAIA,UAAM,WAAW,KAAK,MAAM;AAC5B,UAAM,iBAAiB,CAAC,SAAS,WAAW,OAAO,KAAK,SAAS,OAAO,EAAE,WAAW;AACrF,UAAM,gBAAgB,CAAC,SAAS,UAAU,SAAS,OAAO,WAAW;AACrE,UAAM,eAAe,kBAAkB;AAKvC,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,UAAM,OAAO,UAAU;AACvB,UAAM,SAAS,UAAU;AAEzB,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,SAAS,gBAAgB,QAAQ,SAAS;AAAA,QACxC;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,QACA,OAAO;AAAA,MACT,IAAI,KAAK,MAAM;AAAA,MACf,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAOT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,SAAS,KAAK,MAAM;AAAA,MACpB,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,QAAA;AAAA,MAC7C;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b644180e08cba18a95044411ecd60ad7aec7c253"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fe=function(){return s},s}fe();fe().s[0]++;window.Buffer=Tue.Buffer;function gS(n,e){fe().f[0]++;const t=(fe().s[1]++,n.match(/\.tilehosting\.com/)),i=(fe().s[2]++,n.match(/\.maptiler\.com/)),r=(fe().s[3]++,n.match(/\.thunderforest\.com/)),o=(fe().s[4]++,n.match(/\.locationiq\.com/));if(fe().s[5]++,fe().b[1][0]++,t||(fe().b[1][1]++,i)){fe().b[0][0]++;const s=(fe().s[6]++,Ud.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(fe().s[7]++,s)return fe().b[2][0]++,fe().s[8]++,n.replace("{key}",s);fe().b[2][1]++}else if(fe().b[0][1]++,fe().s[9]++,r){fe().b[3][0]++;const s=(fe().s[10]++,Ud.getAccessToken("thunderforest",e,{allowFallback:!0}));if(fe().s[11]++,s)return fe().b[4][0]++,fe().s[12]++,n.replace("{key}",s);fe().b[4][1]++}else if(fe().b[3][1]++,fe().s[13]++,o){fe().b[5][0]++;const s=(fe().s[14]++,Ud.getAccessToken("locationiq",e,{allowFallback:!0}));if(fe().s[15]++,s)return fe().b[6][0]++,fe().s[16]++,n.replace("{key}",s);fe().b[6][1]++}else return fe().b[5][1]++,fe().s[17]++,n}function AZ(n,e,t){return fe().f[1]++,fe().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class oLe extends En.Component{revisionStore;styleStore=(fe().s[19]++,null);layerWatcher;constructor(e){fe().f[2]++,fe().s[20]++,super(e),fe().s[21]++,this.revisionStore=new XUe,fe().s[22]++,this.configureKeyboardShortcuts(),fe().s[23]++,this.state={errors:[],infos:[],mapStyle:Ud.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Yr,mapView:{zoom:0,center:{lng:0,lat:0},_from:"app"},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1,chat:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},fe().s[24]++,this.layerWatcher=new rLe({onVectorLayersChange:t=>(fe().f[3]++,fe().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(fe().s[26]++,()=>{fe().f[4]++;const e=(fe().s[27]++,[{key:"?",handler:()=>{fe().f[5]++,fe().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{fe().f[6]++,fe().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{fe().f[7]++,fe().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{fe().f[8]++,fe().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{fe().f[9]++,fe().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{fe().f[10]++,fe().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{fe().f[11]++,fe().s[34]++,this.setMapState(this.state.mapState==="map"?(fe().b[7][0]++,"inspect"):(fe().b[7][1]++,"map"))}},{key:"m",handler:()=>{fe().f[12]++,fe().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{fe().f[13]++,fe().s[36]++,this.toggleModal("debug")}}]);fe().s[37]++,document.body.addEventListener("keyup",t=>{if(fe().f[14]++,fe().s[38]++,t.key==="Escape")fe().b[8][0]++,fe().s[39]++,t.target.blur(),fe().s[40]++,document.body.focus();else if(fe().b[8][1]++,fe().s[41]++,fe().b[10][0]++,this.state.isOpen.shortcuts||(fe().b[10][1]++,document.activeElement===document.body)){fe().b[9][0]++;const i=(fe().s[42]++,e.find(r=>(fe().f[15]++,fe().s[43]++,r.key===t.key)));fe().s[44]++,i?(fe().b[11][0]++,fe().s[45]++,this.setModal("shortcuts",!1),fe().s[46]++,i.handler()):fe().b[11][1]++}else fe().b[9][1]++})});handleKeyPress=(fe().s[47]++,e=>{fe().f[16]++,fe().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(fe().b[12][0]++,fe().s[49]++,fe().b[14][0]++,e.metaKey&&(fe().b[14][1]++,e.shiftKey)&&(fe().b[14][2]++,e.keyCode===90)?(fe().b[13][0]++,fe().s[50]++,e.preventDefault(),fe().s[51]++,this.onRedo()):(fe().b[13][1]++,fe().s[52]++,fe().b[16][0]++,e.metaKey&&(fe().b[16][1]++,e.keyCode===90)?(fe().b[15][0]++,fe().s[53]++,e.preventDefault(),fe().s[54]++,this.onUndo()):fe().b[15][1]++)):(fe().b[12][1]++,fe().s[55]++,fe().b[18][0]++,e.ctrlKey&&(fe().b[18][1]++,e.keyCode===90)?(fe().b[17][0]++,fe().s[56]++,e.preventDefault(),fe().s[57]++,this.onUndo()):(fe().b[17][1]++,fe().s[58]++,fe().b[20][0]++,e.ctrlKey&&(fe().b[20][1]++,e.keyCode===89)?(fe().b[19][0]++,fe().s[59]++,e.preventDefault(),fe().s[60]++,this.onRedo()):fe().b[19][1]++))});async componentDidMount(){fe().f[17]++,fe().s[61]++,this.styleStore=await ZUe((e,t)=>(fe().f[18]++,fe().s[62]++,this.onStyleChanged(e,t))),fe().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){fe().f[19]++,fe().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){fe().f[20]++,fe().s[65]++,this.styleStore?.save(e)}updateFonts(e){fe().f[21]++;const t=(fe().s[66]++,fe().b[21][0]++,this.state.mapStyle.metadata||(fe().b[21][1]++,{})),i=(fe().s[67]++,fe().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(fe().b[22][1]++,aae.openmaptiles)),r=(fe().s[68]++,typeof e=="string"?(fe().b[23][0]++,e.replace("{key}",i)):(fe().b[23][1]++,e));fe().s[69]++,UUe(r).then(o=>{fe().f[22]++,fe().s[70]++,this.setState({spec:AZ(this.state.spec,"glyphs",o)})})}updateIcons(e){fe().f[23]++,fe().s[71]++,LUe(e).then(t=>{fe().f[24]++,fe().s[72]++,this.setState({spec:AZ(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(fe().s[73]++,(e,t)=>{fe().f[25]++,fe().s[74]++,fe().b[25][0]++,e==="maputnik:renderer"&&(fe().b[25][1]++,t!==Rue(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(fe().b[24][0]++,fe().s[75]++,this.setState({mapState:"map"})):fe().b[24][1]++;const i=(fe().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});fe().s[77]++,this.onStyleChanged(i)});onStyleChanged=(fe().s[78]++,(e,t=(fe().b[26][0]++,{}))=>{fe().f[26]++,fe().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t};const i=(fe().s[80]++,this.state.mapStyle),r=(fe().s[81]++,fe().b[27][0]++,!i.sources||(fe().b[27][1]++,Object.keys(i.sources).length===0)),o=(fe().s[82]++,fe().b[28][0]++,!i.layers||(fe().b[28][1]++,i.layers.length===0)),s=(fe().s[83]++,fe().b[29][0]++,r&&(fe().b[29][1]++,o));fe().s[84]++,fe().b[31][0]++,e.glyphs&&(fe().b[31][1]++,typeof e.glyphs=="string")?(fe().b[30][0]++,fe().s[85]++,e.glyphs=gS(e.glyphs,e)):fe().b[30][1]++,fe().s[86]++,fe().b[33][0]++,e.sprite&&(fe().b[33][1]++,typeof e.sprite=="string")?(fe().b[32][0]++,fe().s[87]++,e.sprite=gS(e.sprite,e)):fe().b[32][1]++,fe().s[88]++;for(const[E,P]of Object.entries(e.sources))fe().s[89]++,fe().b[35][0]++,P&&(fe().b[35][1]++,"url"in P)&&(fe().b[35][2]++,typeof P.url=="string")?(fe().b[34][0]++,fe().s[90]++,P.url=gS(P.url,e)):fe().b[34][1]++;fe().s[91]++,t.initialLoad?(fe().b[36][0]++,fe().s[92]++,this.getInitialStateFromUrl(e)):fe().b[36][1]++;const a=(fe().s[93]++,fe().b[37][0]++,eh(e)||(fe().b[37][1]++,[])),c=(fe().s[94]++,[]);if(fe().s[95]++,fe().b[39][0]++,e&&(fe().b[39][1]++,e.layers)){fe().b[38][0]++;const E=(fe().s[96]++,new window.Map);fe().s[97]++,e.layers.forEach((P,U)=>{if(fe().f[27]++,fe().s[98]++,fe().b[41][0]++,P.id===""&&(fe().b[41][1]++,E.has(P.id))){fe().b[40][0]++;const z=(fe().s[99]++,new Error(`layers[${U}]: duplicate layer id [empty_string], previously used`));fe().s[100]++,c.push(z)}else fe().b[40][1]++;fe().s[101]++,E.set(P.id,!0)})}else fe().b[38][1]++;const d=(fe().s[102]++,c.concat(a).map(E=>{fe().f[28]++;const P=(fe().s[103]++,E.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(fe().s[104]++,P){fe().b[42][0]++;const[,V,Z]=(fe().s[105]++,P);return fe().s[106]++,{message:E.message,parsed:{type:"layer",data:{index:parseInt(V,10),key:"id",message:Z}}}}else fe().b[42][1]++;const U=(fe().s[107]++,E.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(fe().s[108]++,U){fe().b[43][0]++;const[,V,Z]=(fe().s[109]++,U);return fe().s[110]++,{message:E.message,parsed:{type:"layer",data:{index:parseInt(V,10),key:"source",message:Z}}}}else fe().b[43][1]++;const z=(fe().s[111]++,E.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(fe().s[112]++,z){fe().b[44][0]++;const[,V,Z,X,re]=(fe().s[113]++,z),ee=(fe().s[114]++,fe().b[46][0]++,Z&&(fe().b[46][1]++,X)?(fe().b[45][0]++,[Z,X].join(".")):(fe().b[45][1]++,X));return fe().s[115]++,{message:E.message,parsed:{type:"layer",data:{index:parseInt(V,10),key:ee,message:re}}}}else return fe().b[44][1]++,fe().s[116]++,{message:E.message}}));let p=(fe().s[117]++,void 0);if(fe().s[118]++,a.length>0){fe().b[47][0]++,fe().s[119]++,p=v4(e),fe().s[120]++;for(const E of a){const{message:P}=(fe().s[121]++,E);if(fe().s[122]++,P){fe().b[48][0]++,fe().s[123]++;try{const U=(fe().s[124]++,P.split(":")[0]),z=(fe().s[125]++,U.match(/^\S+?\[\d+\]\.[^[]+/)[0]);fe().s[126]++,oM.unset(p,z)}catch(U){fe().s[127]++,console.warn(P+" "+U)}}else fe().b[48][1]++}}else fe().b[47][1]++;fe().s[128]++,e.glyphs!==this.state.mapStyle.glyphs?(fe().b[49][0]++,fe().s[129]++,this.updateFonts(e.glyphs)):fe().b[49][1]++,fe().s[130]++,e.sprite!==this.state.mapStyle.sprite?(fe().b[50][0]++,fe().s[131]++,this.updateIcons(e.sprite)):fe().b[50][1]++,fe().s[132]++,t.addRevision?(fe().b[51][0]++,fe().s[133]++,this.revisionStore.addRevision(e)):fe().b[51][1]++,fe().s[134]++,t.save?(fe().b[52][0]++,fe().s[135]++,this.saveStyle(e)):fe().b[52][1]++;const v=(fe().s[136]++,e?.zoom),M=(fe().s[137]++,e?.center);fe().s[138]++,this.setState({mapStyle:e,dirtyMapStyle:p,mapView:(fe().b[54][0]++,s&&(fe().b[54][1]++,v)&&(fe().b[54][2]++,M)?(fe().b[53][0]++,{zoom:v,center:{lng:M[0],lat:M[1]},_from:"app"}):(fe().b[53][1]++,this.state.mapView)),errors:d},()=>{fe().f[29]++,fe().s[139]++,this.fetchSources(),fe().s[140]++,this.setStateInUrl()})});onUndo=(fe().s[141]++,()=>{fe().f[30]++;const e=(fe().s[142]++,this.revisionStore.undo()),t=(fe().s[143]++,KUe(this.state.mapStyle,e));fe().s[144]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[145]++,this.setState({infos:t})});onRedo=(fe().s[146]++,()=>{fe().f[31]++;const e=(fe().s[147]++,this.revisionStore.redo()),t=(fe().s[148]++,FUe(this.state.mapStyle,e));fe().s[149]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[150]++,this.setState({infos:t})});onMoveLayer=(fe().s[151]++,e=>{fe().f[32]++;let{oldIndex:t,newIndex:i}=(fe().s[152]++,e),r=(fe().s[153]++,this.state.mapStyle.layers);if(fe().s[154]++,t=xz(t,0,r.length-1),fe().s[155]++,i=xz(i,0,r.length-1),fe().s[156]++,t===i){fe().b[55][0]++,fe().s[157]++;return}else fe().b[55][1]++;fe().s[158]++,t===this.state.selectedLayerIndex?(fe().b[56][0]++,fe().s[159]++,this.setState({selectedLayerIndex:i})):fe().b[56][1]++,fe().s[160]++,r=r.slice(0),fe().s[161]++,Lue(r,t,i),fe().s[162]++,this.onLayersChange(r)});onLayersChange=(fe().s[163]++,e=>{fe().f[33]++;const t=(fe().s[164]++,{...this.state.mapStyle,layers:e});fe().s[165]++,this.onStyleChanged(t)});onLayerDestroy=(fe().s[166]++,e=>{fe().f[34]++;const t=(fe().s[167]++,this.state.mapStyle.layers),i=(fe().s[168]++,t.slice(0));fe().s[169]++,i.splice(e,1),fe().s[170]++,this.onLayersChange(i)});onLayerCopy=(fe().s[171]++,e=>{fe().f[35]++;const t=(fe().s[172]++,this.state.mapStyle.layers),i=(fe().s[173]++,t.slice(0)),r=(fe().s[174]++,v4(i[e]));fe().s[175]++,r.id=r.id+"-copy",fe().s[176]++,i.splice(e,0,r),fe().s[177]++,this.onLayersChange(i)});onLayerVisibilityToggle=(fe().s[178]++,e=>{fe().f[36]++;const t=(fe().s[179]++,this.state.mapStyle.layers),i=(fe().s[180]++,t.slice(0)),r=(fe().s[181]++,{...i[e]}),o=(fe().s[182]++,"layout"in r?(fe().b[57][0]++,{...r.layout}):(fe().b[57][1]++,{}));fe().s[183]++,o.visibility=o.visibility==="none"?(fe().b[58][0]++,"visible"):(fe().b[58][1]++,"none"),fe().s[184]++,r.layout=o,fe().s[185]++,i[e]=r,fe().s[186]++,this.onLayersChange(i)});onLayerIdChange=(fe().s[187]++,(e,t,i)=>{fe().f[37]++;const r=(fe().s[188]++,this.state.mapStyle.layers.slice(0));fe().s[189]++,r[e]={...r[e],id:i},fe().s[190]++,this.onLayersChange(r)});onLayerChanged=(fe().s[191]++,(e,t)=>{fe().f[38]++;const i=(fe().s[192]++,this.state.mapStyle.layers.slice(0));fe().s[193]++,i[e]=t,fe().s[194]++,this.onLayersChange(i)});setMapState=(fe().s[195]++,e=>{fe().f[39]++,fe().s[196]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(fe().s[197]++,e=>{fe().f[40]++;const t=(fe().s[198]++,fe().b[59][0]++,e.metadata||(fe().b[59][1]++,{}));if(fe().s[199]++,t["maputnik:renderer"]===void 0){fe().b[60][0]++;const i=(fe().s[200]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return fe().s[201]++,i}else return fe().b[60][1]++,fe().s[202]++,e});openStyle=(fe().s[203]++,(e,t)=>{fe().f[41]++,fe().s[204]++,this.setState({fileHandle:t}),fe().s[205]++,e=this.setDefaultValues(e),fe().s[206]++,this.onStyleChanged(e)});async fetchSources(){fe().f[42]++;const e=(fe().s[207]++,{});fe().s[208]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(fe().s[209]++,this.state.mapStyle.sources[t]);if(fe().s[210]++,fe().b[62][0]++,i.type!=="vector"||(fe().b[62][1]++,!("url"in i)))fe().b[61][0]++,fe().s[211]++,e[t]=(fe().b[63][0]++,this.state.sources[t]||(fe().b[63][1]++,{...this.state.mapStyle.sources[t]})),fe().s[212]++,e[t].layers===void 0?(fe().b[64][0]++,fe().s[213]++,e[t].layers=[]):fe().b[64][1]++;else{fe().b[61][1]++,fe().s[214]++,e[t]={type:i.type,layers:[]};let r=(fe().s[215]++,i.url);fe().s[216]++;try{fe().s[217]++,r=gS(r,this.state.mapStyle)}catch(s){fe().s[218]++,console.warn("Failed to setFetchAccessToken: ",s)}fe().s[219]++;const o=s=>{if(fe().f[43]++,fe().s[220]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))fe().b[65][1]++;else{fe().b[65][0]++,fe().s[221]++;return}fe().s[222]++;for(const a of s.vector_layers)fe().s[223]++,e[t].layers.push(a.id)};fe().s[224]++;try{if(fe().s[225]++,r.startsWith("pmtiles://")){fe().b[66][0]++;const s=(fe().s[226]++,await new H9(r.substring(10)).getTileJson(""));fe().s[227]++,o(s)}else{fe().b[66][1]++;const s=(fe().s[228]++,await fetch(r,{mode:"cors"})),a=(fe().s[229]++,await s.json());fe().s[230]++,o(a)}}catch(s){fe().s[231]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}fe().s[232]++,LP(this.state.sources,e)?fe().b[67][1]++:(fe().b[67][0]++,fe().s[233]++,console.debug("Setting sources",e),fe().s[234]++,this.setState({sources:e}))}_getRenderer(){fe().f[44]++;const e=(fe().s[235]++,fe().b[68][0]++,this.state.mapStyle.metadata||(fe().b[68][1]++,{}));return fe().s[236]++,fe().b[69][0]++,e["maputnik:renderer"]||(fe().b[69][1]++,"mlgljs")}onMapChange=(fe().s[237]++,e=>{fe().f[45]++,fe().s[238]++,this.setState({mapView:e})});mapRenderer(){fe().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(fe().s[239]++,this.state),i=(fe().s[240]++,{mapStyle:(fe().b[70][0]++,t||(fe().b[70][1]++,e)),mapView:this.state.mapView,replaceAccessTokens:c=>(fe().f[47]++,fe().s[241]++,Ud.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{fe().f[48]++,fe().s[242]++,this.layerWatcher.analyzeMap(c.map),fe().s[243]++,this.fetchSources()}}),r=(fe().s[244]++,this._getRenderer());let o;fe().s[245]++,r==="ol"?(fe().b[71][0]++,fe().s[246]++,o=oe.jsx(L_e,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(fe().f[49]++,fe().s[247]++,this.onLayerSelect(+c))})):(fe().b[71][1]++,fe().s[248]++,o=oe.jsx(tpe,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;fe().s[249]++,this.state.mapState.match(/^filter-/)?(fe().b[72][0]++,fe().s[250]++,s=this.state.mapState.replace(/^filter-/,"")):fe().b[72][1]++;const a=(fe().s[251]++,{});return fe().s[252]++,s?(fe().b[73][0]++,fe().s[253]++,a.filter=`url('#${s}')`):fe().b[73][1]++,fe().s[254]++,oe.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(fe().s[255]++,()=>{fe().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(fe().s[256]++,this.state),{selectedLayerIndex:r}=(fe().s[257]++,this.state),o=(fe().s[258]++,new URL(location.href)),s=(fe().s[259]++,Iz(JSON.stringify(t)));fe().s[260]++,o.searchParams.set("layer",`${s}~${r}`);const a=(fe().s[261]++,Object.entries(i).map(([c,d])=>(fe().f[51]++,fe().s[262]++,d===!0?(fe().b[74][0]++,c):(fe().b[74][1]++,null))).filter(c=>(fe().f[52]++,fe().s[263]++,c!==null)));fe().s[264]++,a.length>0?(fe().b[75][0]++,fe().s[265]++,o.searchParams.set("modal",a.join(","))):(fe().b[75][1]++,fe().s[266]++,o.searchParams.delete("modal")),fe().s[267]++,e==="map"?(fe().b[76][0]++,fe().s[268]++,o.searchParams.delete("view")):(fe().b[76][1]++,fe().s[269]++,e==="inspect"?(fe().b[77][0]++,fe().s[270]++,o.searchParams.set("view","inspect")):fe().b[77][1]++),fe().s[271]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(fe().s[272]++,e=>{fe().f[53]++;const t=(fe().s[273]++,new URL(location.href)),i=(fe().s[274]++,t.searchParams.get("modal"));if(fe().s[275]++,fe().b[79][0]++,i&&(fe().b[79][1]++,i!=="")){fe().b[78][0]++;const s=(fe().s[276]++,i.split(",")),a=(fe().s[277]++,{});fe().s[278]++,s.forEach(c=>{fe().f[54]++,fe().s[279]++,a[c]=!0}),fe().s[280]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else fe().b[78][1]++;const r=(fe().s[281]++,t.searchParams.get("view"));fe().s[282]++,fe().b[81][0]++,r&&(fe().b[81][1]++,r!=="")?(fe().b[80][0]++,fe().s[283]++,this.setMapState(r)):fe().b[80][1]++;const o=(fe().s[284]++,t.searchParams.get("layer"));if(fe().s[285]++,o){fe().b[82][0]++,fe().s[286]++;try{const s=(fe().s[287]++,o.split("~")),[a,c]=(fe().s[288]++,[s[0],parseInt(s[1],10)]);let d=(fe().s[289]++,!0);if(fe().s[290]++,a!=="-"){fe().b[83][0]++;const p=(fe().s[291]++,Iz(JSON.stringify(e)));fe().s[292]++,p!==parseInt(a,10)?(fe().b[84][0]++,fe().s[293]++,d=!1):fe().b[84][1]++}else fe().b[83][1]++;fe().s[294]++,d?(fe().b[85][0]++,fe().s[295]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):fe().b[85][1]++}catch(s){fe().s[296]++,console.warn(s)}}else fe().b[82][1]++});onLayerSelect=(fe().s[297]++,e=>{fe().f[55]++,fe().s[298]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){fe().f[56]++,fe().s[299]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){fe().f[57]++,fe().s[300]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(fe().s[301]++,e=>{fe().f[58]++,fe().s[302]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(fe().s[303]++,(e,t)=>{fe().f[59]++,fe().s[304]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(fe().s[305]++,(e,t)=>{fe().f[60]++,fe().s[306]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){fe().f[61]++;const e=(fe().s[307]++,fe().b[86][0]++,this.state.mapStyle.layers||(fe().b[86][1]++,[])),t=(fe().s[308]++,e.length>0?(fe().b[87][0]++,e[this.state.selectedLayerIndex]):(fe().b[87][1]++,void 0)),i=(fe().s[309]++,oe.jsx(hPe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:d=>(fe().f[62]++,fe().s[310]++,this.toggleModal(d))})),r=(fe().s[311]++,this.state.isOpen.codeEditor?(fe().b[88][0]++,oe.jsx(OSe,{value:this.state.mapStyle,onChange:d=>(fe().f[63]++,fe().s[312]++,this.onStyleChanged(d)),onClose:()=>(fe().f[64]++,fe().s[313]++,this.setModal("codeEditor",!1))})):(fe().b[88][1]++,void 0)),o=(fe().s[314]++,oe.jsx(yTe,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(fe().s[315]++,t?(fe().b[89][0]++,oe.jsx(QRe,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(fe().b[89][1]++,void 0)),a=(fe().s[316]++,this.state.errors.length+this.state.infos.length>0?(fe().b[90][0]++,oe.jsx(pPe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(fe().b[90][1]++,void 0)),c=(fe().s[317]++,oe.jsxs("div",{children:[oe.jsx(iUe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(fe().f[65]++,fe().s[318]++,this.toggleModal("debug")),mapView:this.state.mapView}),oe.jsx(tUe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(fe().f[66]++,fe().s[319]++,this.toggleModal("shortcuts"))}),oe.jsx(CPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(fe().f[67]++,fe().s[320]++,this.toggleModal("settings"))}),oe.jsx(OPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(fe().f[68]++,fe().s[321]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),oe.jsx(JPe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(fe().f[69]++,fe().s[322]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),oe.jsx(VPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(fe().f[70]++,fe().s[323]++,this.toggleModal("sources"))}),oe.jsx(oUe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(fe().f[71]++,fe().s[324]++,this.toggleModal("globalState"))}),oe.jsx(PUe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.chat,onOpenToggle:()=>(fe().f[72]++,fe().s[325]++,this.toggleModal("chat"))})]}));return fe().s[326]++,oe.jsx(fPe,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const sLe=mZ.createRoot(document.querySelector("#app"));sLe.render(oe.jsx(dx.Provider,{value:{className:"react-icons"},children:oe.jsx(oLe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-BDH3lAxB.js.map
